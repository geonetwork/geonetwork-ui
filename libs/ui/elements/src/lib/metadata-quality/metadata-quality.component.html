<div *ngIf="metadataQualityDisplay" class="mb-6 metadata-quality">
  <ng-container *ngIf="theme !== 'light'; else lightTheme">
    <gn-ui-popover [content]="popoverItems" theme="light-border">
      <div class="min-w-[200px]" [class]="smaller ? 'leading-[8px]' : ''">
        <gn-ui-progress-bar
          tabindex="0"
          [value]="qualityScore"
          [type]="theme"
        ></gn-ui-progress-bar>
      </div>
    </gn-ui-popover>
  </ng-container>

  <ng-template #lightTheme>
    <div
      class="flex items-center"
      [class]="smaller ? 'leading-[8px] min-w-[120px]' : 'min-w-[200px]'"
    >
      <gn-ui-progress-bar
        tabindex="0"
        [value]="qualityScore"
        [type]="theme"
        class="flex-grow"
      ></gn-ui-progress-bar>
      <gn-ui-popover
        [content]="popoverItems"
        theme="light-border"
        [class]="smaller ? 'ml-2' : 'ml-2 mt-1'"
      >
        <ng-icon
          name="matInfoOutline"
          class="flex-shrink-0 text-gray-600"
        ></ng-icon>
      </gn-ui-popover>
    </div>
  </ng-template>
</div>
<ng-template #popoverItems>
  <div class="p-2 py-4">
    <div class="mb-4 font-bold" translate>record.metadata.quality.details</div>
    <gn-ui-metadata-quality-item
      *ngFor="let e of items"
      [name]="e.name"
      [value]="e.value"
    ></gn-ui-metadata-quality-item>
  </div>
</ng-template>
