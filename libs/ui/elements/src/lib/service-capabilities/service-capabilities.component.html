<div style="height: 652px" id="preview" *ngIf="apiLinks.length > 0">
  <div
    class="bg-primary-opacity-10 pt-8 overflow-visible sm:pt-5"
    style="height: 512px"
  >
    <div class="container-lg px-4 lg:mx-auto">
      <div>
        <div class="text-[28px] text-title font-title my-6" translate>
          service.metadata.capabilities
        </div>
        <div
          *ngIf="loading"
          class="flex justify-center w-full h-[200px] items-center"
        >
          <gn-ui-spinning-loader></gn-ui-spinning-loader>
        </div>
        <div *ngIf="!loading">
          <div class="flex flex-row gap-5">
            <div class="h-14 w-2/5 mb-4 flex flex-row relative">
              <gn-ui-text-input
                class="w-full"
                extraClass="h-14 border rounded-lg"
                [placeholder]="'service.metadata.search' | translate"
                (input)="onSearchChange($event)"
                (keydown.enter)="onSearchEnter($event)"
              >
              </gn-ui-text-input>
              <div class="border-l absolute border-gray-200 right-0 h-14 w-14">
                <gn-ui-button
                  #inputBtn
                  type="outline"
                  extraClass="h-12 w-12 border-0 absolute right-1 top-1"
                  (buttonClick)="searchLayers()"
                >
                  <ng-icon name="iconoirSearch"></ng-icon>
                </gn-ui-button>
              </div>
            </div>
            <gn-ui-popover
              [content]="popoverItems"
              theme="light"
              class="w-14 h-14 border border-gray-300 rounded-lg flex justify-center items-center"
            >
              <ng-icon name="matInfoOutline" class="w-6 h-6 pt-0.5"></ng-icon>
            </gn-ui-popover>
          </div>
          <div
            style="height: 500px"
            class="bg-white shadow-xl rounded p-0 flex flex-row"
          >
            <div
              class="flex flex-col gap-2 bg-gray-100 w-1/2 h-full rounded-l overflow-y-scroll py-5 pr-1 pl-3"
              data-test="layer-list"
            >
              <gn-ui-button
                *ngFor="let layerItem of filteredLayers"
                type="outline"
                [extraClass]="getExtraClass(layerItem)"
                (buttonClick)="selectLayer(layerItem)"
              >
                {{ layerItem.title || layerItem.name }}
              </gn-ui-button>
            </div>
            <div
              data-test="layer-information"
              *ngIf="layerInformation.length > 0"
              class="flex flex-col gap-4 h-full w-1/2 py-5 px-10 overflow-y-scroll"
            >
              <div
                *ngFor="let item of layerInformation"
                class="flex flex-row gap-4 border-b border-gray-200"
              >
                <span class="font-semibold w-24">{{ item.displayName }}</span>
                <div *ngIf="isList(item.value)">
                  <div
                    *ngFor="let subItem of item.value"
                    class="flex flex-row break-words max-w-72"
                  >
                    {{ subItem }}
                  </div>
                </div>
                <div class="break-words max-w-72" *ngIf="!isList(item.value)">
                  {{ item.value }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #popoverItems>
  <div class="p-2 py-4">
    <div translate>service.metadata.filter</div>
  </div>
</ng-template>
