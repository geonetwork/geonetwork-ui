<div
  class="h-full flex items-center justify-center"
  cdkOverlayOrigin
  #anchorRef
  #trigger="cdkOverlayOrigin"
  [class]="extraClass"
  data-cy="cell-popin"
>
  <ng-content select="[cellContent]"></ng-content>
  <ng-template
    *ngIf="activePopin"
    cdkConnectedOverlay
    [cdkConnectedOverlayPush]="false"
    [cdkConnectedOverlayOrigin]="trigger"
    [cdkConnectedOverlayOpen]="isOpen"
    [cdkConnectedOverlayPositions]="overlayPositions"
    [cdkConnectedOverlayWidth]="'auto'"
    [cdkConnectedOverlayFlexibleDimensions]="true"
    [cdkConnectedOverlayGrowAfterOpen]="true"
    (detach)="closeOverlay()"
  >
    <div
      *ngIf="activePopin && isVisible"
      class="bg-white shadow-lg border border-gray-300 relative"
      data-cy="cell-popin-content"
    >
      <ng-content select="[popinContent]"></ng-content>
      <gn-ui-button
        data-cy="cell-popin-close"
        [style.--gn-ui-button-background]="'bg-transparent'"
        class="absolute top-2 right-2"
        type="light"
        (buttonClick)="closeOverlay()"
        extraClass="w-10 h-8 px-1"
      >
        <ng-icon name="iconoirReduce" size="24"></ng-icon>
      </gn-ui-button>
    </div>
  </ng-template>
</div>
