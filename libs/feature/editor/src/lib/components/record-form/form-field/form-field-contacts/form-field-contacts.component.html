<div class="flex flex-col gap-3">
  <gn-ui-autocomplete
    [placeholder]="'editor.record.form.field.contacts.placeholder' | translate"
    [action]="autoCompleteAction"
    (itemSelected)="addContact($event)"
    [displayWithFn]="displayWithFn"
    [minCharacterCount]="1"
    [clearOnSelection]="true"
    >
  </gn-ui-autocomplete>

  @if (contacts.length > 0) {
    @if (contacts.length === 1) {
      @for (contact of contacts; track contact; let index = $index) {
        <gn-ui-contact-card
          [contact]="contact"
        ></gn-ui-contact-card>
      }
    }
    @if (contacts.length > 1) {
      <gn-ui-sortable-list
        [items]="contacts"
        (itemsOrderChange)="handleContactsChanged($event)"
        [elementTemplate]="contactTemplate"
      ></gn-ui-sortable-list>
      <ng-template #contactTemplate let-contact>
        <gn-ui-contact-card [contact]="contact"></gn-ui-contact-card>
      </ng-template>
    }
  } @else {
    <div
      class="p-4 text-sm border border-primary bg-primary-lightest rounded-lg"
      translate
      >
      editor.record.form.field.contacts.noContact
    </div>
  }
</div>

