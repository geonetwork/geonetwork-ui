<div class="mt-6 bg-white border border-gray-300 overflow-hidden rounded-lg">
  <div
    class="w-full h-[700px] md:h-[366px] flex md:flex-row flex-col border-b border-gray-300"
  >
    <div class="w-full md:w-5/12 h-[366px] flex flex-col">
      <gn-ui-date-range-inputs
        [temporalExtent]="currentTemporalExtent$ | async"
        (temporalExtentChange)="onTemporalExtentChange($event)"
      ></gn-ui-date-range-inputs>

      <div class="mt-auto mb-8 mx-8" *ngIf="isFilterModified$ | async">
        <gn-ui-button
          id="reset-filters-button"
          type="light"
          (buttonClick)="onResetFilters()"
        >
          <span translate>stac.filter.reset</span>
          <ng-icon name="matDeleteOutline" class="ml-2"></ng-icon>
        </gn-ui-button>
      </div>
    </div>

    <div class="w-full md:w-7/12 h-[334px] md:h-[366px] flex flex-col">
      <gn-ui-map-container
        #mapContainer
        [context]="mapContext$ | async"
        (extentChange)="onSpatialExtentChange($event)"
        (resolvedExtentChange)="onResolvedMapExtentChange($event)"
        class="w-full h-full"
      >
        <div
          class="bg-white rounded-xl shadow-xl absolute left-1/2 transform -translate-x-1/2 bottom-0 mb-2.5 px-4 py-2 z-10 max-w-[90%] w-max"
        >
          <gn-ui-check-toggle
            [value]="isSpatialFilterEnabled$ | async"
            (toggled)="onSpatialFilterToggle($event)"
            [label]="'stac.filter.enable' | translate"
            [color]="'primary'"
          ></gn-ui-check-toggle>
        </div>
      </gn-ui-map-container>
    </div>
  </div>
  <div
    class="relative mx-5 my-[30px] min-h-[274px] flex items-center justify-center flex-col"
  >
    <!-- Keep grid outside ngIf to keep items$ observable alive -->
    <gn-ui-stac-items-result-grid
      [items]="items$ | async"
    ></gn-ui-stac-items-result-grid>
    <div
      *ngIf="(items$ | async)?.length > 0; else noResultsOrError"
      class="mt-[20px] mx-auto flex justify-center"
    >
      <gn-ui-previous-next-buttons
        [listComponent]="this"
        [displayLabels]="true"
      ></gn-ui-previous-next-buttons>
    </div>
    <ng-template #noResultsOrError>
      <gn-ui-popup-alert
        *ngIf="error$ | async as error"
        type="warning"
        icon="matErrorOutlineOutline"
        class="absolute left-0 top-0 w-full block"
      >
        <span translate>{{ error }}</span>
      </gn-ui-popup-alert>
      <div
        *ngIf="!(error$ | async)"
        class="flex items-center justify-center flex-col h-full gap-[10px]"
      >
        <h2 class="text-center text-xl" translate>stac.results.noResults</h2>
        <gn-ui-button
          id="no-results-button"
          type="secondary"
          (buttonClick)="onResetFilters()"
        >
          <span translate>stac.filter.reset</span>
          <ng-icon name="matDeleteOutline" class="ml-2"></ng-icon>
        </gn-ui-button>
      </div>
    </ng-template>
  </div>
</div>
