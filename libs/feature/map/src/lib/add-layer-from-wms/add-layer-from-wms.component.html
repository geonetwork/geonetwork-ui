<div class="input-container">
  <gn-ui-text-input
    [(value)]="wmsUrl"
    (valueChange)="urlChange.next($event); isInvalidUrl = false"
    hint="Enter WMS service URL"
    style="width: 400px"
    class="wms-url-input"
  >
  </gn-ui-text-input>
</div>

<div *ngIf="isInvalidUrl" class="error-message">
  {{ errorMessage }}
</div>

<div *ngIf="loading">
  <p class="loading-message">Loading...</p>
</div>

<div *ngIf="!loading && layers.length > 0">
  <h2 class="available-layers-header" style="font-weight: bolder">
    Available Layers
  </h2>
  <div *ngFor="let layer of layers">
    <gn-ui-expandable-panel title="{{ layer.title }}" [collapsed]="true">
      <div *ngIf="layer.children.length > 0; else noChildren">
        <div *ngFor="let child of layer.children" class="child-layer">
          <span class="layer-title" [attr.title]="child.title">{{
            child.title
          }}</span>
          <gn-ui-button
            type="primary"
            (buttonClick)="addLayer(child)"
            style="font-size: 0.8em; padding: 5px 10px"
            >Add</gn-ui-button
          >
        </div>
      </div>
      <ng-template #noChildren>
        <div class="child-layer">
          <p class="layer-title">{{ layer.title }}</p>
          <gn-ui-button
            type="primary"
            (buttonClick)="addLayer(layer)"
            style="font-size: 0.8em; padding: 5px 10px"
            >Add</gn-ui-button
          >
        </div>
      </ng-template>
    </gn-ui-expandable-panel>
  </div>
</div>
