(self.webpackChunkgeonetwork_ui=self.webpackChunkgeonetwork_ui||[]).push([[6571],{"./libs/common/domain/src/lib/repository/records-repository.interface.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{w:()=>RecordsRepositoryInterface});class RecordsRepositoryInterface{}},"./libs/feature/editor/src/lib/components/import-record/import-record.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/feature/editor/src/lib/components/import-record/import-record.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>import_record_component_stories});var dist=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var _staticBlock,import_record_componentngResource=__webpack_require__("./libs/feature/editor/src/lib/components/import-record/import-record.component.css?ngResource"),import_record_componentngResource_default=__webpack_require__.n(import_record_componentngResource),root_effect_scheduler=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),debug_node=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs"),src=__webpack_require__("./libs/ui/inputs/src/index.ts"),ngx_translate_core=__webpack_require__("./node_modules/@ngx-translate/core/fesm2022/ngx-translate-core.mjs"),notifications_src=__webpack_require__("./libs/feature/notifications/src/index.ts"),records_repository_interface=__webpack_require__("./libs/common/domain/src/lib/repository/records-repository.interface.ts"),router2=__webpack_require__("./node_modules/@angular/router/fesm2022/router2.mjs"),ng_icons_core=__webpack_require__("./node_modules/@ng-icons/core/fesm2022/ng-icons-core.mjs"),ng_icons_iconoir=__webpack_require__("./node_modules/@ng-icons/iconoir/fesm2022/ng-icons-iconoir.mjs");let ImportRecordComponent=(class ImportRecordComponent{constructor(){this.router=(0,root_effect_scheduler.WQX)(router2.Ix),this.translateService=(0,root_effect_scheduler.WQX)(ngx_translate_core.c$),this.cdr=(0,root_effect_scheduler.WQX)(core.ChangeDetectorRef),this.notificationsService=(0,root_effect_scheduler.WQX)(notifications_src.I),this.recordsRepository=(0,root_effect_scheduler.WQX)(records_repository_interface.w),this.closeImportMenu=new debug_node.bkB,this.importMenuItems=[{label:this.translateService.instant("dashboard.importRecord.importExternal"),icon:"iconoirImport",action:this.displayImportExternal.bind(this),dataTest:"importFromUrlButton"}],this.isRecordImportInProgress=!1,this.sectionDisplayed="mainMenu"}displayMainMenu(){this.sectionDisplayed="mainMenu",this.cdr.markForCheck()}displayImportExternal(){this.sectionDisplayed="importExternalFile",this.cdr.markForCheck()}importRecord(url){this.isRecordImportInProgress=!0,this.recordsRepository.duplicateExternalRecord(url).subscribe({next:uuid=>{uuid&&(this.notificationsService.showNotification({type:"success",title:this.translateService.instant("editor.record.importFromExternalFile.success.title"),text:`${this.translateService.instant("editor.record.importFromExternalFile.success.body")}`},2500),this.router.navigate(["/edit",uuid]).catch(err=>console.error(err))),this.closeImportMenu.next()},error:error=>{this.notificationsService.showNotification({type:"error",title:this.translateService.instant("editor.record.importFromExternalFile.failure.title"),text:`${this.translateService.instant("editor.record.importFromExternalFile.failure.body")} ${error.message??""}`},2500,error),this.isRecordImportInProgress=!1,this.cdr.markForCheck()}})}static#_=_staticBlock=()=>(this.propDecorators={closeImportMenu:[{type:debug_node.k7i}]},this)},_staticBlock());ImportRecordComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"gn-ui-import-record",template:'@switch (sectionDisplayed) {\n  @case (\'mainMenu\') {\n    <div\n      data-test="importMenuMainSection"\n      class="mt-2 border border-gray-100 p-2 flex items-center bg-white shadow-2xl rounded-2xl"\n    >\n      <ul class="flex flex-col gap-2 w-full">\n        @for (menuItem of importMenuItems; track menuItem) {\n          <li>\n            <gn-ui-button\n              [attr.data-test]="menuItem.dataTest"\n              type="light"\n              extraClass="flex flex-row items-center gap-2 w-full justify-start"\n              (buttonClick)="menuItem.action()"\n              [disabled]="menuItem.disabled"\n              [title]="\n                (menuItem.disabled ? \'editor.temporary.disabled\' : \'\')\n                  | translate\n              "\n              ><ng-icon [name]="menuItem.icon"></ng-icon\n              ><span>{{ menuItem.label }}</span></gn-ui-button\n            >\n          </li>\n        }\n      </ul>\n    </div>\n  }\n  @case (\'importExternalFile\') {\n    <div\n      data-test="importMenuImportExternalFileSection"\n      class="p-6 flex flex-col gap-2 mt-2 border border-gray-100 bg-white shadow-2xl rounded-2xl"\n    >\n      <div class="flex flex-row items-center gap-2">\n        <gn-ui-button\n          data-test="importMenuImportExternalFileSectionBackButton"\n          type="light"\n          (buttonClick)="displayMainMenu()"\n        >\n          <ng-icon name="iconoirArrowLeft"></ng-icon>\n        </gn-ui-button>\n        <span class="font-bold" translate\n          >dashboard.importRecord.importExternal.title</span\n        >\n        <span translate>dashboard.importRecord.importExternal.subtitle</span>\n      </div>\n      <gn-ui-url-input\n        (uploadClick)="importRecord($event)"\n        [disabled]="isRecordImportInProgress"\n      ></gn-ui-url-input>\n    </div>\n  }\n}\n',changeDetection:debug_node.Ngq.OnPush,standalone:!0,imports:[src.Qp,src.$1,ngx_translate_core.Mm,ngx_translate_core.D9,ng_icons_core.Uq],providers:[(0,ng_icons_core.EB)({iconoirImport:ng_icons_iconoir.fiC,iconoirLightBulbOn:ng_icons_iconoir.OWN,iconoirArrowLeft:ng_icons_iconoir.M_c}),(0,ng_icons_core.PG)({size:"1.5em"})],styles:[import_record_componentngResource_default()]})],ImportRecordComponent);var animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs"),common_module=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module.mjs"),elements_src=__webpack_require__("./libs/ui/elements/src/index.ts"),i18n_src=__webpack_require__("./libs/util/i18n/src/index.ts"),of=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/of.js");const import_record_component_stories={title:"Elements/ImportRecordComponent",component:ImportRecordComponent,decorators:[(0,dist.Iz)({imports:[common_module.MD,src.Qp,elements_src.Yg,src.$1],providers:[{provide:records_repository_interface.w,useClass:class MockRecordsRepository{importRecordFromExternalFileUrlAsDraft(url){return(0,of.of)("mockedRecordTempId")}}}]}),(0,dist.L4)({providers:[(0,root_effect_scheduler.oKB)(animations.BrowserAnimationsModule),(0,i18n_src.GN)()]}),(0,dist.Ap)(story=>`<div style="max-width: 500px; margin: auto;">${story}</div>`)]},Primary={args:{}},__namedExportsOrder=["Primary"]},"./libs/feature/notifications/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>NotificationsService});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),debug_node=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");let NotificationsService=class NotificationsService{constructor(){this.notifications$=new BehaviorSubject.t([])}showNotification(content,timeoutMs,error){error&&console.error(error);const id=Math.floor(1e6*Math.random());this.notifications$.next([...this.notifications$.value,{...content,id}]),void 0!==timeoutMs&&setTimeout(()=>{this.removeNotificationById(id)},timeoutMs)}removeNotificationById(id){this.notifications$.next(this.notifications$.value.filter(n=>n.id!==id))}};NotificationsService=(0,tslib_es6.Cg)([(0,debug_node._qm)({providedIn:"root"})],NotificationsService);var notifications_container_componentngResource=__webpack_require__("./libs/feature/notifications/src/lib/notifications-container/notifications-container.component.css?ngResource"),notifications_container_componentngResource_default=__webpack_require__.n(notifications_container_componentngResource),root_effect_scheduler=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),common_module=__webpack_require__("./node_modules/@angular/common/fesm2022/common_module.mjs"),src=__webpack_require__("./libs/ui/elements/src/index.ts"),private_export=__webpack_require__("./node_modules/@angular/animations/fesm2022/private_export.mjs");let NotificationsContainerComponent=class NotificationsContainerComponent{constructor(){this.notificationsService=(0,root_effect_scheduler.WQX)(NotificationsService)}trackById(index,notification){return notification.id}};NotificationsContainerComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"gn-ui-notifications-container",standalone:!0,imports:[common_module.MD,src.zP],template:'<div class="flex flex-col gap-6 p-6 items-start pointer-events-none">\n  @for (\n    notification of notificationsService.notifications$ | async;\n    track trackById($index, notification)\n  ) {\n    <gn-ui-notification\n      class="max-w-full pointer-events-auto"\n      [text]="notification.text"\n      [type]="notification.type"\n      [title]="notification.title"\n      [closeMessage]="notification.closeMessage"\n      (notificationClose)="\n        notificationsService.removeNotificationById(notification.id)\n      "\n      [@enterExit]\n    ></gn-ui-notification>\n  }\n</div>\n',changeDetection:debug_node.Ngq.OnPush,animations:[(0,private_export.hZ)("enterExit",[(0,private_export.kY)(":enter",[(0,private_export.i0)("150ms",(0,private_export.i7)([(0,private_export.iF)({transform:"scale(1)",opacity:0}),(0,private_export.iF)({transform:"scale(1.03)",opacity:.5}),(0,private_export.iF)({transform:"scale(1)",opacity:1})]))]),(0,private_export.kY)(":leave",[(0,private_export.i0)("200ms",(0,private_export.iF)({transform:"translateX(50px)",opacity:0}))])])],styles:[notifications_container_componentngResource_default()]})],NotificationsContainerComponent)},"./libs/feature/notifications/src/lib/notifications-container/notifications-container.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./node_modules/basiclightbox/dist/basicLightbox.min.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=function e(n,t,o){function r(c,u){if(!t[c]){if(!n[c]){if(!u&&__webpack_require__("./node_modules/basiclightbox/dist sync recursive"))return require(c,!0);if(i)return i(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var l=t[c]={exports:{}};n[c][0].call(l.exports,function(e){return r(n[c][1][e]||e)},l,l.exports,e,n,t,o)}return t[c].exports}for(var i=void 0,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.visible=void 0;var o=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=document.createElement("div");return t.innerHTML=e.trim(),!0===n?t.children:t.firstChild},r=function(e,n){var t=e.children;return 1===t.length&&t[0].tagName===n},i=function(e){return null!=(e=e||document.querySelector(".basicLightbox"))&&!0===e.ownerDocument.body.contains(e)};t.visible=i,t.create=function(e,n){var t=function(e,n){var t=o('\n\t\t<div class="basicLightbox '.concat(n.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),i=t.querySelector(".basicLightbox__placeholder");e.forEach(function(e){return i.appendChild(e)});var c=r(i,"IMG"),u=r(i,"VIDEO"),s=r(i,"IFRAME");return!0===c&&t.classList.add("basicLightbox--img"),!0===u&&t.classList.add("basicLightbox--video"),!0===s&&t.classList.add("basicLightbox--iframe"),t}(e=function(e){var n="string"==typeof e,t=e instanceof HTMLElement==1;if(!1===n&&!1===t)throw new Error("Content must be a DOM element/node or string");return!0===n?Array.from(o(e,!0)):"TEMPLATE"===e.tagName?[e.content.cloneNode(!0)]:Array.from(e.children)}(e),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(e=Object.assign({},e)).closable&&(e.closable=!0),null==e.className&&(e.className=""),null==e.onShow&&(e.onShow=function(){}),null==e.onClose&&(e.onClose=function(){}),"boolean"!=typeof e.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof e.className)throw new Error("Property `className` must be a string");if("function"!=typeof e.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof e.onClose)throw new Error("Property `onClose` must be a function");return e}(n)),c=function(e){return!1!==n.onClose(u)&&function(e,n){return e.classList.remove("basicLightbox--visible"),setTimeout(function(){return!1===i(e)||e.parentElement.removeChild(e),n()},410),!0}(t,function(){if("function"==typeof e)return e(u)})};!0===n.closable&&t.addEventListener("click",function(e){e.target===t&&c()});var u={element:function(){return t},visible:function(){return i(t)},show:function(e){return!1!==n.onShow(u)&&function(e,n){return document.body.appendChild(e),setTimeout(function(){requestAnimationFrame(function(){return e.classList.add("basicLightbox--visible"),n()})},10),!0}(t,function(){if("function"==typeof e)return e(u)})},close:c};return u}},{}]},{},[1])(1)}}]);