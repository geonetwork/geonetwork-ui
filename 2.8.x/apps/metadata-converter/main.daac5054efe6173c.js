(self.webpackChunkmetadata_converter=self.webpackChunkmetadata_converter||[]).push([[792],{79:(En,ot,xe)=>{"use strict";function le(st){return"string"==typeof st?st:st.value}xe.d(ot,{E:()=>le})},351:(En,ot)=>{ot.read=function(xe,le,st,qe,ut){var je,z,fe=8*ut-qe-1,f=(1<<fe)-1,De=f>>1,Xe=-7,he=st?ut-1:0,Se=st?-1:1,$=xe[le+he];for(he+=Se,je=$&(1<<-Xe)-1,$>>=-Xe,Xe+=fe;Xe>0;je=256*je+xe[le+he],he+=Se,Xe-=8);for(z=je&(1<<-Xe)-1,je>>=-Xe,Xe+=qe;Xe>0;z=256*z+xe[le+he],he+=Se,Xe-=8);if(0===je)je=1-De;else{if(je===f)return z?NaN:1/0*($?-1:1);z+=Math.pow(2,qe),je-=De}return($?-1:1)*z*Math.pow(2,je-qe)},ot.write=function(xe,le,st,qe,ut,je){var z,fe,f,De=8*je-ut-1,Xe=(1<<De)-1,he=Xe>>1,Se=23===ut?Math.pow(2,-24)-Math.pow(2,-77):0,$=qe?0:je-1,q=qe?1:-1,oe=le<0||0===le&&1/le<0?1:0;for(le=Math.abs(le),isNaN(le)||le===1/0?(fe=isNaN(le)?1:0,z=Xe):(z=Math.floor(Math.log(le)/Math.LN2),le*(f=Math.pow(2,-z))<1&&(z--,f*=2),(le+=z+he>=1?Se/f:Se*Math.pow(2,1-he))*f>=2&&(z++,f/=2),z+he>=Xe?(fe=0,z=Xe):z+he>=1?(fe=(le*f-1)*Math.pow(2,ut),z+=he):(fe=le*Math.pow(2,he-1)*Math.pow(2,ut),z=0));ut>=8;xe[st+$]=255&fe,$+=q,fe/=256,ut-=8);for(z=z<<ut|fe,De+=ut;De>0;xe[st+$]=255&z,$+=q,z/=256,De-=8);xe[st+$-q]|=128*oe}},517:function(En){En.exports=function(){"use strict";var ot=function(){return ot=Object.assign||function(C){for(var I,A=1,_=arguments.length;A<_;A++)for(var E in I=arguments[A])Object.prototype.hasOwnProperty.call(I,E)&&(C[E]=I[E]);return C},ot.apply(this,arguments)};function xe(g){var C="function"==typeof Symbol&&Symbol.iterator,I=C&&g[C],A=0;if(I)return I.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&A>=g.length&&(g=void 0),{value:g&&g[A++],done:!g}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(g,C){var I="function"==typeof Symbol&&g[Symbol.iterator];if(!I)return g;var _,G,A=I.call(g),E=[];try{for(;(void 0===C||C-- >0)&&!(_=A.next()).done;)E.push(_.value)}catch(se){G={error:se}}finally{try{_&&!_.done&&(I=A.return)&&I.call(A)}finally{if(G)throw G.error}}return E}function st(g,C,I){if(I||2===arguments.length)for(var E,A=0,_=C.length;A<_;A++)(E||!(A in C))&&(E||(E=Array.prototype.slice.call(C,0,A)),E[A]=C[A]);return g.concat(E||Array.prototype.slice.call(C))}"function"==typeof SuppressedError&&SuppressedError;class qe extends Error{constructor(C,I,A){super(C),this.token=I,this.type=A||"error"}}const ut=g=>g<4?"short":4===g?"long":"narrow",je=g=>g%2==0?"2-digit":"numeric";function fe(g,C){switch(g.width){case 1:return"numeric";case 2:return"2-digit";case 3:return"short";case 4:return"long";case 5:return"narrow";default:return void C(`${g.desc} is not supported with width ${g.width}`)}}function f(g,C){const{char:I,desc:A,width:_}=g;if("d"===I)return je(_);C(`${A} is not supported`)}function De(g,C){const{char:I,desc:A,width:_}=g;return("c"===I||"e"===I)&&_<3&&C(`Numeric value is not supported for ${A}; falling back to weekday:short`,qe.WARNING),ut(_)}function he(g,C){const{char:I,desc:A,width:_}=g;switch(I){case"v":case"z":return 4===_?"long":"short";case"V":return 4===_?"long":void C(`${A} is not supported with width ${_}`);case"X":return void C(`${A} is not supported`)}return"short"}function Se(g,C){switch(g.field){case"era":return{era:ut(g.width)};case"year":return function z(g,C){switch(g.char){case"y":return{year:je(g.width)};case"r":return{calendar:"gregory",year:"numeric"};default:return C(`${g.desc} is not supported; falling back to year:numeric`,qe.WARNING),{year:"numeric"}}}(g,C);case"month":return{month:fe(g,C)};case"day":return{day:f(g,C)};case"weekday":return{weekday:De(g,C)};case"period":return;case"hour":return function Xe(g){const C=je(g.width);let I;switch(g.char){case"h":I="h12";break;case"H":I="h23";break;case"k":I="h24";break;case"K":I="h11"}return I?{hour:C,hourCycle:I}:{hour:C}}(g);case"min":return{minute:je(g.width)};case"sec":return{second:je(g.width)};case"tz":return{timeZoneName:he(g,C)};case"quarter":case"week":case"sec-frac":case"ms":C(`${g.desc} is not supported`)}}function $(g,C){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E=>{throw E};const A={timeZone:C},_=[];for(const E of g){const{error:G,field:se,str:Le}=E;if(G){const ln=new qe(G.message,E);ln.stack=G.stack,I(ln)}Le&&I(new qe(`Ignoring string part: ${Le}`,E,qe.WARNING)),se&&(-1===_.indexOf(se)?_.push(se):I(new qe(`Duplicate ${se} token`,E)));const wt=Se(E,(ln,xn)=>I(new qe(ln,E,xn)));wt&&Object.assign(A,wt)}return A}const q={G:{field:"era",desc:"Era"},y:{field:"year",desc:"Year"},Y:{field:"year",desc:'Year of "Week of Year"'},u:{field:"year",desc:"Extended year"},U:{field:"year",desc:"Cyclic year name"},r:{field:"year",desc:"Related Gregorian year"},Q:{field:"quarter",desc:"Quarter"},q:{field:"quarter",desc:"Stand-alone quarter"},M:{field:"month",desc:"Month in year"},L:{field:"month",desc:"Stand-alone month in year"},w:{field:"week",desc:"Week of year"},W:{field:"week",desc:"Week of month"},d:{field:"day",desc:"Day in month"},D:{field:"day",desc:"Day of year"},F:{field:"day",desc:"Day of week in month"},g:{field:"day",desc:"Modified julian day"},E:{field:"weekday",desc:"Day of week"},e:{field:"weekday",desc:"Local day of week"},c:{field:"weekday",desc:"Stand-alone local day of week"},a:{field:"period",desc:"AM/PM marker"},b:{field:"period",desc:"AM/PM/noon/midnight marker"},B:{field:"period",desc:"Flexible day period"},h:{field:"hour",desc:"Hour in AM/PM (1~12)"},H:{field:"hour",desc:"Hour in day (0~23)"},k:{field:"hour",desc:"Hour in day (1~24)"},K:{field:"hour",desc:"Hour in AM/PM (0~11)"},j:{field:"hour",desc:"Hour in preferred cycle"},J:{field:"hour",desc:"Hour in preferred cycle without marker"},C:{field:"hour",desc:"Hour in preferred cycle with flexible marker"},m:{field:"min",desc:"Minute in hour"},s:{field:"sec",desc:"Second in minute"},S:{field:"sec-frac",desc:"Fractional second"},A:{field:"ms",desc:"Milliseconds in day"},z:{field:"tz",desc:"Time Zone: specific non-location"},Z:{field:"tz",desc:"Time Zone"},O:{field:"tz",desc:"Time Zone: localized"},v:{field:"tz",desc:"Time Zone: generic non-location"},V:{field:"tz",desc:"Time Zone: ID"},X:{field:"tz",desc:"Time Zone: ISO8601 with Z"},x:{field:"tz",desc:"Time Zone: ISO8601"}},oe=g=>g>="A"&&g<="Z"||g>="a"&&g<="z";function Q(g,C){const I=g[C];if(!I)return null;if(oe(I))return function be(g,C){const I=g[C];let A=1;for(;g[++C]===I;)++A;const _=q[I];return _?{char:I,field:_.field,desc:_.desc,width:A}:{char:I,error:new Error(`The letter ${I} is not a valid field identifier`),width:A}}(g,C);if("'"===I)return function yt(g,C){let I=g[++C],A=2;if("'"===I)return{char:"'",str:I,width:A};for(;;){const _=g[++C];if(++A,void 0===_)return{char:"'",error:new Error(`Unterminated quoted literal in pattern: ${I||g}`),str:I,width:A};if("'"===_){if("'"!==g[++C])return{char:"'",str:I,width:A};++A}I+=_}}(g,C);let A=I,_=1;for(;;){const E=g[++C];if(!E||oe(E)||"'"===E)return{char:I,str:A,width:_};A+=E,_+=1}}function we(g){const C=[];let I=0;for(;;){const A=Q(g,I);if(!A)return C;C.push(A),I+=A.width}}class tt extends Error{constructor(C,I){super(I),this.code=C}}class xt extends tt{constructor(C,I){super("BAD_OPTION",`Unknown ${C} option: ${I}`),this.stem=C,this.option=I}}class mt extends tt{constructor(C){super("BAD_STEM",`Unknown stem: ${C}`),this.stem=C}}class Nt extends tt{constructor(C,I){super("MASKED_VALUE",`Value for ${C} is set multiple times`),this.type=C,this.prev=I}}class Be extends tt{constructor(C){super("MISSING_OPTION",`Required option missing for ${C}`),this.stem=C}}class Ze extends tt{constructor(C,I){super("BAD_PATTERN",I),this.char=C}}class Ye extends tt{constructor(C,I,A){super("TOO_MANY_OPTIONS",`Token ${C} only supports ${A>1?`${A} options`:"one option"} (got ${I.length})`),this.stem=C,this.options=I}}class $t extends tt{constructor(C,I){super("UNSUPPORTED",`The stem ${C} is not supported`),this.stem=C,I&&(this.message+=` with value ${I}`,this.source=I)}}function te(g,C){let{numberingSystem:I}=C;return Array.isArray(g)||(g=[g]),I?g.map(A=>{const _=-1===A.indexOf("-u-")?"u-nu":"nu";return`${A}-${_}-${I}`}).concat(g):g}function vt(g){let{scale:C,unit:I}=g,A="number"==typeof C&&C>=0?C:1;return I&&"percent"===I.style&&(A*=.01),A}function P(g,C){const{decimal:I,group:A,integerWidth:_,notation:E,precision:G,roundingMode:se,sign:Le,unit:wt,unitPer:ln,unitWidth:xn}=g,Bn=(Lr,Yr)=>{C&&C(new $t(Lr,Yr))},Bt={};if(wt)switch(wt.style){case"base-unit":Bt.style="decimal";break;case"currency":Bt.style="currency",Bt.currency=wt.currency;break;case"measure-unit":Bt.style="unit",Bt.unit=wt.unit.replace(/.*-/,""),ln&&(Bt.unit+="-per-"+ln.replace(/.*-/,""));break;case"percent":Bt.style="percent";break;case"permille":Bn("permille")}switch(xn){case"unit-width-full-name":Bt.currencyDisplay="name",Bt.unitDisplay="long";break;case"unit-width-hidden":Bn(xn);break;case"unit-width-iso-code":Bt.currencyDisplay="code";break;case"unit-width-narrow":Bt.currencyDisplay="narrowSymbol",Bt.unitDisplay="narrow";break;case"unit-width-short":Bt.currencyDisplay="symbol",Bt.unitDisplay="short"}switch(A){case"group-off":Bt.useGrouping=!1;break;case"group-auto":Bt.useGrouping=!0;break;case"group-min2":case"group-on-aligned":case"group-thousands":Bn(A),Bt.useGrouping=!0}if(G)switch(G.style){case"precision-fraction":{const{minFraction:Lr,maxFraction:Yr,minSignificant:ss,maxSignificant:mi,source:to}=G;"number"==typeof Lr&&(Bt.minimumFractionDigits=Lr,"number"==typeof ss&&Bn("precision-fraction",to)),"number"==typeof Yr&&(Bt.maximumFractionDigits=Yr),"number"==typeof ss&&(Bt.minimumSignificantDigits=ss),"number"==typeof mi&&(Bt.maximumSignificantDigits=mi);break}case"precision-integer":Bt.maximumFractionDigits=0;break;case"precision-unlimited":Bt.maximumFractionDigits=20;break;case"precision-increment":break;case"precision-currency-standard":Bt.trailingZeroDisplay=G.trailingZero;break;case"precision-currency-cash":Bn(G.style)}if(E)switch(E.style){case"compact-short":Bt.notation="compact",Bt.compactDisplay="short";break;case"compact-long":Bt.notation="compact",Bt.compactDisplay="long";break;case"notation-simple":Bt.notation="standard";break;case"scientific":case"engineering":{const{expDigits:Lr,expSign:Yr,source:ss,style:mi}=E;Bt.notation=mi,(Lr&&Lr>1||Yr&&"sign-auto"!==Yr)&&Bn(mi,ss);break}}if(_){const{min:Lr,max:Yr,source:ss}=_;Lr>0&&(Bt.minimumIntegerDigits=Lr),Number(Yr)>0&&(3!==Yr||"engineering"!==Bt.notation&&"scientific"!==Bt.notation?Bn("integer-width",ss):Bt.notation="engineering")}switch(Le){case"sign-auto":Bt.signDisplay="auto";break;case"sign-always":Bt.signDisplay="always";break;case"sign-except-zero":Bt.signDisplay="exceptZero";break;case"sign-never":Bt.signDisplay="never";break;case"sign-accounting":Bt.currencySign="accounting";break;case"sign-accounting-always":Bt.currencySign="accounting",Bt.signDisplay="always";break;case"sign-accounting-except-zero":Bt.currencySign="accounting",Bt.signDisplay="exceptZero"}return"decimal-always"===I&&Bn(I),se&&Bn(se),Bt}function U(g,C,I){const A=g[C];switch(A){case"%":return{char:"%",style:"percent",width:1};case"\u2030":return{char:"%",style:"permille",width:1};case"\xa4":{let _=1;for(;"\xa4"===g[++C];)++_;switch(_){case 1:return{char:A,currency:"default",width:_};case 2:return{char:A,currency:"iso-code",width:_};case 3:return{char:A,currency:"full-name",width:_};case 5:return{char:A,currency:"narrow",width:_};default:return I(new Ze("\xa4",`Invalid number (${_}) of \xa4 chars in pattern`)),null}}case"*":{const _=g[C+1];if(_)return{char:A,pad:_,width:2};break}case"+":case"-":return{char:A,width:1};case"'":{let _=g[++C],E=2;if("'"===_)return{char:A,str:_,width:E};for(;;){const G=g[++C];if(++E,void 0===G)return I(new Ze("'",`Unterminated quoted literal in pattern: ${_}`)),{char:A,str:_,width:E};if("'"===G){if("'"!==g[++C])return{char:A,str:_,width:E};++E}_+=G}}}return null}const Ve=g=>g>="0"&&g<="9";function Je(g,C){const I=g[C];if(Ve(I)){let A=I;for(;;){const _=g[++C];if(!Ve(_))return{char:"0",digits:A,width:A.length};A+=_}}switch(I){case"#":{let A=1;for(;"#"===g[++C];)++A;return{char:I,width:A}}case"@":{let A=1;for(;"@"===g[++C];)++A;let _=A;for(C-=1;"#"===g[++C];)++_;return{char:I,min:A,width:_}}case"E":{const A="+"===g[C+1];A&&++C;let _=0;for(;"0"===g[++C];)++_;if(_)return{char:I,expDigits:_,plus:A,width:(A?2:1)+_};break}case".":case",":return{char:I,width:1}}return null}function et(g,C,I){let A;var wt;(wt=A||(A={}))[wt.Prefix=0]="Prefix",wt[wt.Number=1]="Number",wt[wt.Suffix=2]="Suffix";const _=[],E=[],G=[];let se=A.Prefix,Le="";for(;C<g.length;){const wt=g[C];if(";"===wt){C+=1;break}switch(se){case A.Prefix:{const ln=U(g,C,I);if(ln)Le&&(_.push({char:"'",str:Le,width:Le.length}),Le=""),_.push(ln),C+=ln.width;else{const xn=Je(g,C);xn?(Le&&(_.push({char:"'",str:Le,width:Le.length}),Le=""),se=A.Number,E.push(xn),C+=xn.width):(Le+=wt,C+=1)}break}case A.Number:{const ln=Je(g,C);ln?(E.push(ln),C+=ln.width):se=A.Suffix;break}case A.Suffix:{const ln=U(g,C,I);ln?(Le&&(G.push({char:"'",str:Le,width:Le.length}),Le=""),G.push(ln),C+=ln.width):(Le+=wt,C+=1);break}}}return Le&&G.push({char:"'",str:Le,width:Le.length}),{pattern:{prefix:_,number:E,suffix:G},pos:C}}function fn(g,C,I,A,_){let E=!1,G="";for(const se of g)switch(se.char){case"%":C.unit={style:se.style},_?E=!0:G="";break;case"\xa4":if(!I){A(new Ze("\xa4","The \xa4 pattern requires a currency"));break}switch(C.unit={style:"currency",currency:I},se.currency){case"iso-code":C.unitWidth="unit-width-iso-code";break;case"full-name":C.unitWidth="unit-width-full-name";break;case"narrow":C.unitWidth="unit-width-narrow"}_?E=!0:G="";break;case"*":break;case"+":E||(G+="+");break;case"'":E||(G+=se.str)}return G}function jr(g,C){let I=!1,A="";for(const _ of g)switch(_.char){case"%":case"\xa4":C?I=!0:A="";break;case"-":I||(A+="-");break;case"'":I||(A+=_.str)}return A}function _s(g,C){let I=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le=>{throw Le};const{tokens:A,negative:_}=function sn(g,C){const{pattern:I,pos:A}=et(g,0,C);if(A<g.length){const{pattern:_}=et(g,A,C);return{tokens:I,negative:_}}return{tokens:I}}(g,I),E=function jt(g,C){const I={};let A=!1,_=!1,E=0,G="",se=-1,Le="",wt=0;for(let xn=0;xn<g.length;++xn){const Bn=g[xn];switch(Bn.char){case"#":-1===se?(G&&C(new Ze("#","Pattern has # after integer digits")),E+=Bn.width):wt+=Bn.width;break;case"0":-1===se?G+=Bn.digits:(wt&&C(new Ze("0","Pattern has digits after # in fraction")),Le+=Bn.digits);break;case"@":I.precision&&C(new Nt("precision",I.precision)),I.precision={style:"precision-fraction",minSignificant:Bn.min,maxSignificant:Bn.width};break;case",":A=!0;break;case".":1===se&&C(new Ze(".","Pattern has more than one decimal separator")),se=xn;break;case"E":_&&C(new Nt("exponent",I.notation)),A&&C(new Ze("E","Exponential patterns may not contain grouping separators")),I.notation={style:"scientific"},Bn.expDigits>1&&(I.notation.expDigits=Bn.expDigits),Bn.plus&&(I.notation.expSign="sign-always"),_=!0}}A?I.group="group-auto":E+G.length>3&&(I.group="group-off");const ln=+`${G||"0"}.${Le}`;if(ln&&(I.precision={style:"precision-increment",increment:ln}),_)if((!I.precision||ln)&&(I.integerWidth=E?{min:1,max:E+G.length}:{min:Math.max(1,G.length)}),I.precision)ln||(I.integerWidth={min:1,max:1});else{const xn=G.length+Le.length;-1===se?xn>0&&(I.precision={style:"precision-fraction",maxSignificant:xn}):(I.precision={style:"precision-fraction",maxSignificant:Math.max(1,xn)+wt},xn>1&&(I.precision.minSignificant=xn))}else G.length>1&&(I.integerWidth={min:G.length}),!I.precision&&(Le.length||wt)&&(I.precision={style:"precision-fraction",minFraction:Le.length,maxFraction:Le.length+wt});return I}(A.number,I),G=fn(A.prefix,E,C,I,!0),se=fn(A.suffix,E,C,I,!1);if(_){const Le=jr(_.prefix,!0),wt=jr(_.suffix,!1);E.affix={pos:[G,se],neg:[Le,wt]},E.sign="sign-never"}else(G||se)&&(E.affix={pos:[G,se]});return E}function xs(g){const[I]=g.split("-",1);return-1!==["acceleration","angle","area","concentr","consumption","digital","duration","electric","energy","force","frequency","graphics","length","light","mass","power","pressure","speed","temperature","torque","volume"].indexOf(I)}const Ss={"compact-short":0,"compact-long":0,"notation-simple":0,scientific:2,engineering:2,percent:0,permille:0,"base-unit":0,currency:1,"measure-unit":1,"per-measure-unit":1,"unit-width-narrow":0,"unit-width-short":0,"unit-width-full-name":0,"unit-width-iso-code":0,"unit-width-hidden":0,"precision-integer":0,"precision-unlimited":0,"precision-currency-standard":1,"precision-currency-cash":0,"precision-increment":1,"rounding-mode-ceiling":0,"rounding-mode-floor":0,"rounding-mode-down":0,"rounding-mode-up":0,"rounding-mode-half-even":0,"rounding-mode-half-down":0,"rounding-mode-half-up":0,"rounding-mode-unnecessary":0,"integer-width":1,scale:1,"group-off":0,"group-min2":0,"group-auto":0,"group-on-aligned":0,"group-thousands":0,latin:0,"numbering-system":1,"sign-auto":0,"sign-always":0,"sign-never":0,"sign-accounting":0,"sign-accounting-always":0,"sign-except-zero":0,"sign-accounting-except-zero":0,"decimal-auto":0,"decimal-always":0},Vi={currency:1,"integer-width":1,"measure-unit":1,"numbering-system":1,"per-measure-unit":1,"precision-increment":1,scale:1};function k(g,C,I){if(function lo(g){return g in Ss}(g)){const A=Ss[g];if(C.length>A){if(0===A)for(const _ of C)I(new xt(g,_));else I(new Ye(g,C,A));return!1}if(function zn(g){return g in Vi}(g)&&C.length<Vi[g])return I(new Be(g)),!1}return!0}function ce(g,C){const A=g&&g.match("fraction"===C?/^\.(0*)(\+|#*)$/:/^(@+)(\+|#*)$/);if(A){const _=A[1].length;switch(A[2].charAt(0)){case"":return{min:_,max:_};case"+":return{min:_,max:null};case"#":return{min:_,max:_+A[2].length}}}return null}class St{constructor(C){this.skeleton={},this.onError=C}badOption(C,I){this.onError(new xt(C,I))}assertEmpty(C){const I=this.skeleton[C];I&&this.onError(new Nt(C,I))}parseToken(C,I){if(!k(C,I,this.onError))return;const A=I[0],_=this.skeleton;switch(C){case"compact-short":case"compact-long":case"notation-simple":this.assertEmpty("notation"),_.notation={style:C};break;case"scientific":case"engineering":{let G,E=null;for(const Le of I)switch(Le){case"sign-auto":case"sign-always":case"sign-never":case"sign-accounting":case"sign-accounting-always":case"sign-except-zero":case"sign-accounting-except-zero":G=Le;break;default:/^\+e+$/.test(Le)?E=Le.length-1:this.badOption(C,Le)}this.assertEmpty("notation");const se=I.join("/");_.notation=E&&G?{style:C,source:se,expDigits:E,expSign:G}:E?{style:C,source:se,expDigits:E}:G?{style:C,source:se,expSign:G}:{style:C,source:se};break}case"percent":case"permille":case"base-unit":this.assertEmpty("unit"),_.unit={style:C};break;case"currency":/^[A-Z]{3}$/.test(A)?(this.assertEmpty("unit"),_.unit={style:C,currency:A}):this.badOption(C,A);break;case"measure-unit":xs(A)?(this.assertEmpty("unit"),_.unit={style:C,unit:A}):this.badOption(C,A);break;case"per-measure-unit":xs(A)?(this.assertEmpty("unitPer"),_.unitPer=A):this.badOption(C,A);break;case"unit-width-narrow":case"unit-width-short":case"unit-width-full-name":case"unit-width-iso-code":case"unit-width-hidden":this.assertEmpty("unitWidth"),_.unitWidth=C;break;case"precision-integer":case"precision-unlimited":case"precision-currency-cash":this.assertEmpty("precision"),_.precision={style:C};break;case"precision-currency-standard":this.assertEmpty("precision"),_.precision="w"===A?{style:C,trailingZero:"stripIfInteger"}:{style:C};break;case"precision-increment":{const E=Number(A);E>0?(this.assertEmpty("precision"),_.precision={style:C,increment:E}):this.badOption(C,A);break}case"rounding-mode-ceiling":case"rounding-mode-floor":case"rounding-mode-down":case"rounding-mode-up":case"rounding-mode-half-even":case"rounding-mode-half-odd":case"rounding-mode-half-ceiling":case"rounding-mode-half-floor":case"rounding-mode-half-down":case"rounding-mode-half-up":case"rounding-mode-unnecessary":this.assertEmpty("roundingMode"),_.roundingMode=C;break;case"integer-width":if(/^\+0*$/.test(A))this.assertEmpty("integerWidth"),_.integerWidth={source:A,min:A.length-1};else{const E=A.match(/^#*(0*)$/);E?(this.assertEmpty("integerWidth"),_.integerWidth={source:A,min:E[1].length,max:E[0].length}):this.badOption(C,A)}break;case"scale":{const E=Number(A);E>0?(this.assertEmpty("scale"),_.scale=E):this.badOption(C,A);break}case"group-off":case"group-min2":case"group-auto":case"group-on-aligned":case"group-thousands":this.assertEmpty("group"),_.group=C;break;case"latin":this.assertEmpty("numberingSystem"),_.numberingSystem="latn";break;case"numbering-system":!function Fn(g){return-1!==["arab","arabext","bali","beng","deva","fullwide","gujr","guru","hanidec","khmr","knda","laoo","latn","limb","mlym","mong","mymr","orya","tamldec","telu","thai","tibt"].indexOf(g)}(A)?this.badOption(C,A):(this.assertEmpty("numberingSystem"),_.numberingSystem=A);break;case"sign-auto":case"sign-always":case"sign-never":case"sign-accounting":case"sign-accounting-always":case"sign-except-zero":case"sign-accounting-except-zero":this.assertEmpty("sign"),_.sign=C;break;case"decimal-auto":case"decimal-always":this.assertEmpty("decimal"),_.decimal=C;break;default:{const E=function Re(g,C,I){const A=ce(g,"fraction");if(A){C.length>1&&I(new Ye(g,C,1));const E={style:"precision-fraction",source:g,minFraction:A.min};null!=A.max&&(E.maxFraction=A.max);const G=C[0],se=ce(G,"significant");return se?(E.source=`${g}/${G}`,E.minSignificant=se.min,null!=se.max&&(E.maxSignificant=se.max)):G&&I(new xt(g,G)),E}const _=ce(g,"significant");if(_){for(const G of C)I(new xt(g,G));const E={style:"precision-fraction",source:g,minSignificant:_.min};return null!=_.max&&(E.maxSignificant=_.max),E}return null}(C,I,this.onError);E?(this.assertEmpty("precision"),_.precision=E):this.onError(new mt(C))}}}}function cn(g){let C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_=>{throw _};const I=[];for(const _ of g.split(" "))if(_){const E=_.split("/"),G=E.shift()||"";I.push({stem:G,options:E})}const A=new St(C);for(const{stem:_,options:E}of I)A.parseToken(_,E);return A.skeleton}function Jt(g,C,I,A){"string"==typeof C&&(C=0===C.indexOf("::")?cn(C.slice(2),A):_s(C,I,A));const _=te(g,C),E=P(C,A),G=function kt(g){const C=vt(g),{precision:I}=g;return I&&"precision-increment"===I.style?A=>function Ne(g,C){const I=+g+C/2;return I-I%+C}(A,I.increment)*C:A=>A*C}(C),se=new Intl.NumberFormat(_,E);if(C.affix){const[Le,wt]=C.affix.pos,[ln,xn]=C.affix.neg||["",""];return Bn=>{const Bt=se.format(G(Bn));return Bn<0?`${ln}${Bt}${xn}`:`${Le}${Bt}${wt}`}}return Le=>se.format(G(Le))}function er(g,C,I,A){"string"==typeof C&&(C=0===C.indexOf("::")?cn(C.slice(2),A):_s(C,I,A));const _=te(g,C),E=P(C,A),G=function Ft(g){const C=vt(g),{precision:I}=g;if(I&&"precision-increment"===I.style){let _=`x - (x % +${I.increment})`;return 1!==C&&(_=`(${_}) * ${C}`),`function(n) { var x = ${"+n + "+I.increment/2}; return ${_}; }`}return 1!==C?`function(n) { return n * ${C}; }`:null}(C),se=["(function() {",`var opt = ${JSON.stringify(E)};`,`var nf = new Intl.NumberFormat(${JSON.stringify(_)}, opt);`];let Le="nf.format(value)";if(G&&(se.push(`var mod = ${G};`),Le="nf.format(mod(value))"),C.affix){const[wt,ln]=C.affix.pos.map(xn=>JSON.stringify(xn));if(C.affix.neg){const[xn,Bn]=C.affix.neg.map(Bt=>JSON.stringify(Bt));Le=`value < 0 ? ${xn} + ${Le} + ${Bn} : ${wt} + ${Le} + ${ln}`}else Le=`${wt} + ${Le} + ${ln}`}return se.push(`return function(value) { return ${Le}; }`),se.join("\n  ")+"\n})()"}var nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kt(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var g,C,I,gn={},Tn={},Mr={exports:{}};C=nn,I=function(){var C=Object.prototype.hasOwnProperty,I=Object.prototype.toString,A="boolean"==typeof(new RegExp).sticky;function _(ke){return ke&&"[object RegExp]"===I.call(ke)}function E(ke){return ke&&"object"==typeof ke&&!_(ke)&&!Array.isArray(ke)}function se(ke){return new RegExp("|"+ke).exec("").length-1}function Le(ke){return"("+ke+")"}function wt(ke){return ke.length?"(?:"+ke.map(function(on){return"(?:"+on+")"}).join("|")+")":"(?!)"}function ln(ke){if("string"==typeof ke)return"(?:"+function G(ke){return ke.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}(ke)+")";if(_(ke)){if(ke.ignoreCase)throw new Error("RegExp /i flag not allowed");if(ke.global)throw new Error("RegExp /g flag is implied");if(ke.sticky)throw new Error("RegExp /y flag is implied");if(ke.multiline)throw new Error("RegExp /m flag is implied");return ke.source}throw new Error("Not a pattern: "+ke)}function xn(ke,Tt){return ke.length>Tt?ke:Array(Tt-ke.length+1).join(" ")+ke}function Yr(ke,Tt){if(E(Tt)||(Tt={match:Tt}),Tt.include)throw new Error("Matching rules cannot also include states");var on={defaultType:ke,lineBreaks:!!Tt.error||!!Tt.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var yn in Tt)C.call(Tt,yn)&&(on[yn]=Tt[yn]);if("string"==typeof on.type&&ke!==on.type)throw new Error("Type transform cannot be a string (type '"+on.type+"' for token '"+ke+"')");var Zn=on.match;return on.match=Array.isArray(Zn)?Zn:Zn?[Zn]:[],on.match.sort(function(Nn,ar){return _(Nn)&&_(ar)?0:_(ar)?-1:_(Nn)?1:ar.length-Nn.length}),on}function ss(ke){return Array.isArray(ke)?function Lr(ke){for(var Tt=[],on=0;on<ke.length;on++){var yn=ke[on];if(yn.include)for(var Zn=[].concat(yn.include),Nn=0;Nn<Zn.length;Nn++)Tt.push({include:Zn[Nn]});else{if(!yn.type)throw new Error("Rule has no type: "+JSON.stringify(yn));Tt.push(Yr(yn.type,yn))}}return Tt}(ke):function Bt(ke){for(var Tt=Object.getOwnPropertyNames(ke),on=[],yn=0;yn<Tt.length;yn++){var Zn=Tt[yn],ar=[].concat(ke[Zn]);if("include"!==Zn){var xr=[];ar.forEach(function($n){E($n)?(xr.length&&on.push(Yr(Zn,xr)),on.push(Yr(Zn,$n)),xr=[]):xr.push($n)}),xr.length&&on.push(Yr(Zn,xr))}else for(var ds=0;ds<ar.length;ds++)on.push({include:ar[ds]})}return on}(ke)}var mi=Yr("error",{lineBreaks:!0,shouldThrow:!0});function to(ke,Tt){for(var on=null,yn=Object.create(null),Zn=!0,Nn=null,ar=[],ds=[],xr=0;xr<ke.length;xr++)ke[xr].fallback&&(Zn=!1);for(xr=0;xr<ke.length;xr++){var $n=ke[xr];if($n.include)throw new Error("Inheritance is not allowed in stateless lexers");if($n.error||$n.fallback){if(on)throw!$n.fallback==!on.fallback?new Error("Multiple "+($n.fallback?"fallback":"error")+" rules not allowed (for token '"+$n.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+$n.defaultType+"')");on=$n}var Cs=$n.match.slice();if(Zn)for(;Cs.length&&"string"==typeof Cs[0]&&1===Cs[0].length;)yn[Cs.shift().charCodeAt(0)]=$n;if($n.pop||$n.push||$n.next){if(!Tt)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+$n.defaultType+"')");if($n.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+$n.defaultType+"')")}if(0!==Cs.length){Zn=!1,ar.push($n);for(var ia=0;ia<Cs.length;ia++){var Pl=Cs[ia];if(_(Pl))if(null===Nn)Nn=Pl.unicode;else if(Nn!==Pl.unicode&&!1===$n.fallback)throw new Error("If one rule is /u then all must be")}var xc=wt(Cs.map(ln)),Vo=new RegExp(xc);if(Vo.test(""))throw new Error("RegExp matches empty string: "+Vo);if(se(xc)>0)throw new Error("RegExp has capture groups: "+Vo+"\nUse (?: \u2026 ) instead");if(!$n.lineBreaks&&Vo.test("\n"))throw new Error("Rule should declare lineBreaks: "+Vo);ds.push(Le(xc))}}var Sc=on&&on.fallback,kl=A&&!Sc?"ym":"gm",e2=A||Sc?"":"|";return!0===Nn&&(kl+="u"),{regexp:new RegExp(wt(ds)+e2,kl),groups:ar,fast:yn,error:on||mi}}function sa(ke,Tt,on){var yn=ke&&(ke.push||ke.next);if(yn&&!on[yn])throw new Error("Missing state '"+yn+"' (in token '"+ke.defaultType+"' of state '"+Tt+"')");if(ke&&ke.pop&&1!=+ke.pop)throw new Error("pop must be 1 (in token '"+ke.defaultType+"' of state '"+Tt+"')")}var ws=function(ke,Tt){this.startState=Tt,this.states=ke,this.buffer="",this.stack=[],this.reset()};ws.prototype.reset=function(ke,Tt){return this.buffer=ke||"",this.index=0,this.line=Tt?Tt.line:1,this.col=Tt?Tt.col:1,this.queuedToken=Tt?Tt.queuedToken:null,this.queuedText=Tt?Tt.queuedText:"",this.queuedThrow=Tt?Tt.queuedThrow:null,this.setState(Tt?Tt.state:this.startState),this.stack=Tt&&Tt.stack?Tt.stack.slice():[],this},ws.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},ws.prototype.setState=function(ke){if(ke&&this.state!==ke){this.state=ke;var Tt=this.states[ke];this.groups=Tt.groups,this.error=Tt.error,this.re=Tt.regexp,this.fast=Tt.fast}},ws.prototype.popState=function(){this.setState(this.stack.pop())},ws.prototype.pushState=function(ke){this.stack.push(this.state),this.setState(ke)};var Qh=A?function(ke,Tt){return ke.exec(Tt)}:function(ke,Tt){var on=ke.exec(Tt);return 0===on[0].length?null:on};function ed(){return this.value}if(ws.prototype._getGroup=function(ke){for(var Tt=this.groups.length,on=0;on<Tt;on++)if(void 0!==ke[on+1])return this.groups[on];throw new Error("Cannot find token type for matched text")},ws.prototype.next=function(){var ke=this.index;if(this.queuedGroup){var Tt=this._token(this.queuedGroup,this.queuedText,ke);return this.queuedGroup=null,this.queuedText="",Tt}var on=this.buffer;if(ke!==on.length){if(ar=this.fast[on.charCodeAt(ke)])return this._token(ar,on.charAt(ke),ke);var yn=this.re;yn.lastIndex=ke;var Zn=Qh(yn,on),Nn=this.error;if(null==Zn)return this._token(Nn,on.slice(ke,on.length),ke);var ar=this._getGroup(Zn),ds=Zn[0];return Nn.fallback&&Zn.index!==ke?(this.queuedGroup=ar,this.queuedText=ds,this._token(Nn,on.slice(ke,Zn.index),ke)):this._token(ar,ds,ke)}},ws.prototype._token=function(ke,Tt,on){var yn=0;if(ke.lineBreaks){var Zn=/\n/g,Nn=1;if("\n"===Tt)yn=1;else for(;Zn.exec(Tt);)yn++,Nn=Zn.lastIndex}var ar={type:"function"==typeof ke.type&&ke.type(Tt)||ke.defaultType,value:"function"==typeof ke.value?ke.value(Tt):Tt,text:Tt,toString:ed,offset:on,lineBreaks:yn,line:this.line,col:this.col},ds=Tt.length;if(this.index+=ds,this.line+=yn,0!==yn?this.col=ds-Nn+1:this.col+=ds,ke.shouldThrow)throw new Error(this.formatError(ar,"invalid syntax"));return ke.pop?this.popState():ke.push?this.pushState(ke.push):ke.next&&this.setState(ke.next),ar},typeof Symbol<"u"&&Symbol.iterator){var Ta=function(ke){this.lexer=ke};Ta.prototype.next=function(){var ke=this.lexer.next();return{value:ke,done:!ke}},Ta.prototype[Symbol.iterator]=function(){return this},ws.prototype[Symbol.iterator]=function(){return new Ta(this)}}return ws.prototype.formatError=function(ke,Tt){if(null==ke){var on=this.buffer.slice(this.index);ke={text:on,offset:this.index,lineBreaks:-1===on.indexOf("\n")?0:1,line:this.line,col:this.col}}var Zn=Math.max(ke.line-2,1),ar=String(ke.line+2).length,ds=function Bn(ke,Tt){for(var on=ke.length,yn=0;;){var Zn=ke.lastIndexOf("\n",on-1);if(-1===Zn||(on=Zn,++yn===Tt)||0===on)break}return ke.substring(yn<Tt?0:on+1).split("\n")}(this.buffer,this.line-ke.line+2+1).slice(0,5),xr=[];xr.push(Tt+" at line "+ke.line+" col "+ke.col+":"),xr.push("");for(var $n=0;$n<ds.length;$n++){var Cs=ds[$n],_c=Zn+$n;xr.push(xn(String(_c),ar)+"  "+Cs),_c===ke.line&&xr.push(xn("",ar+ke.col+1)+"^")}return xr.join("\n")},ws.prototype.clone=function(){return new ws(this.states,this.state)},ws.prototype.has=function(ke){return!0},{compile:function za(ke){var Tt=to(ss(ke));return new ws({start:Tt},"start")},states:function Va(ke,Tt){var on=ke.$all?ss(ke.$all):[];delete ke.$all;var yn=Object.getOwnPropertyNames(ke);Tt||(Tt=yn[0]);for(var Zn=Object.create(null),Nn=0;Nn<yn.length;Nn++)Zn[ar=yn[Nn]]=ss(ke[ar]).concat(on);for(Nn=0;Nn<yn.length;Nn++)for(var ds=Zn[ar=yn[Nn]],xr=Object.create(null),$n=0;$n<ds.length;$n++){var Cs=ds[$n];if(Cs.include){var _c=[$n,1];if(Cs.include!==ar&&!xr[Cs.include]){xr[Cs.include]=!0;var ia=Zn[Cs.include];if(!ia)throw new Error("Cannot include nonexistent state '"+Cs.include+"' (in state '"+ar+"')");for(var Pl=0;Pl<ia.length;Pl++){var xc=ia[Pl];-1===ds.indexOf(xc)&&_c.push(xc)}}ds.splice.apply(ds,_c),$n--}}var Vo=Object.create(null);for(Nn=0;Nn<yn.length;Nn++){var ar;Vo[ar=yn[Nn]]=to(Zn[ar],!0)}for(Nn=0;Nn<yn.length;Nn++){var hl=yn[Nn],Sc=Vo[hl],kl=Sc.groups;for($n=0;$n<kl.length;$n++)sa(kl[$n],hl,Vo);var e2=Object.getOwnPropertyNames(Sc.fast);for($n=0;$n<e2.length;$n++)sa(Sc.fast[e2[$n]],hl,Vo)}return new ws(Vo,Tt)},error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:function Ea(ke){for(var Tt=typeof Map<"u",on=Tt?new Map:Object.create(null),yn=Object.getOwnPropertyNames(ke),Zn=0;Zn<yn.length;Zn++){var Nn=yn[Zn],ar=ke[Nn];(Array.isArray(ar)?ar:[ar]).forEach(function(xr){if("string"!=typeof xr)throw new Error("keyword must be string (in keyword '"+Nn+"')");Tt?on.set(xr,Nn):on[xr]=Nn})}return function(xr){return Tt?on.get(xr):on[xr]}}}},(g=Mr).exports?g.exports=I():C.moo=I();var hs=Mr.exports;(function(g){var C=nn&&nn.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(g,"__esModule",{value:!0}),g.lexer=g.states=void 0;const I=C(hs);g.states={body:{doubleapos:{match:"''",value:()=>"'"},quoted:{lineBreaks:!0,match:/'[{}#](?:[^]*?[^'])?'(?!')/u,value:A=>A.slice(1,-1).replace(/''/g,"'")},argument:{lineBreaks:!0,match:/\{\s*[^\p{Pat_Syn}\p{Pat_WS}]+\s*/u,push:"arg",value:A=>A.substring(1).trim()},octothorpe:"#",end:{match:"}",pop:1},content:{lineBreaks:!0,match:/[^][^{}#']*/u}},arg:{select:{lineBreaks:!0,match:/,\s*(?:plural|select|selectordinal)\s*,\s*/u,next:"select",value:A=>A.split(",")[1].trim()},"func-args":{lineBreaks:!0,match:/,\s*[^\p{Pat_Syn}\p{Pat_WS}]+\s*,/u,next:"body",value:A=>A.split(",")[1].trim()},"func-simple":{lineBreaks:!0,match:/,\s*[^\p{Pat_Syn}\p{Pat_WS}]+\s*/u,value:A=>A.substring(1).trim()},end:{match:"}",pop:1}},select:{offset:{lineBreaks:!0,match:/\s*offset\s*:\s*\d+\s*/u,value:A=>A.split(":")[1].trim()},case:{lineBreaks:!0,match:/\s*(?:=\d+|[^\p{Pat_Syn}\p{Pat_WS}]+)\s*\{/u,push:"body",value:A=>A.substring(0,A.indexOf("{")).trim()},end:{match:/\s*\}/u,pop:1}}},g.lexer=I.default.states(g.states)})(Tn),Object.defineProperty(gn,"__esModule",{value:!0});var R=gn.parse=gn.ParseError=void 0;const b=Tn,x=g=>({offset:g.offset,line:g.line,col:g.col,text:g.text,lineBreaks:g.lineBreaks}),O=g=>"plural"===g||"select"===g||"selectordinal"===g;const _e=["number","date","time","spellout","ordinal","duration"],Oe=["zero","one","two","few","many","other"];class Yt extends Error{constructor(C,I){super(b.lexer.formatError(C,I))}}gn.ParseError=Yt;class Kn{constructor(C,I){var A,_,E,G;this.lexer=b.lexer.reset(C),this.cardinalKeys=null!==(A=I?.cardinal)&&void 0!==A?A:Oe,this.ordinalKeys=null!==(_=I?.ordinal)&&void 0!==_?_:Oe,this.strict=null!==(E=I?.strict)&&void 0!==E&&E,this.strictPluralKeys=null===(G=I?.strictPluralKeys)||void 0===G||G}parse(){return this.parseBody(!1,!0)}checkSelectKey(C,I,A){if("="===A[0]){if("select"===I)throw new Yt(C,`The case ${A} is not valid with select`)}else if("select"!==I){const _="plural"===I?this.cardinalKeys:this.ordinalKeys;if(this.strictPluralKeys&&_.length>0&&!_.includes(A))throw new Yt(C,`The ${I} case ${A} is not valid in this locale`)}}parseSelect(C,I,A,_){let{value:E}=C;const G={type:_,arg:E,cases:[],ctx:A};"plural"===_||"selectordinal"===_?I=!0:this.strict&&(I=!1);for(const se of this.lexer)switch(se.type){case"offset":if("select"===_)throw new Yt(se,"Unexpected plural offset for select");if(G.cases.length>0)throw new Yt(se,"Plural offset must be set before cases");G.pluralOffset=Number(se.value),A.text+=se.text,A.lineBreaks+=se.lineBreaks;break;case"case":this.checkSelectKey(se,_,se.value),G.cases.push({key:se.value,tokens:this.parseBody(I),ctx:x(se)});break;case"end":return G;default:throw new Yt(se,`Unexpected lexer token: ${se.type}`)}throw new Yt(null,"Unexpected message end")}parseArgToken(C,I){const A=x(C),_=this.lexer.next();if(!_)throw new Yt(null,"Unexpected message end");if(A.text+=_.text,A.lineBreaks+=_.lineBreaks,this.strict&&("func-simple"===_.type||"func-args"===_.type)&&!_e.includes(_.value))throw new Yt(C,`Invalid strict mode function arg type: ${_.value}`);switch(_.type){case"end":return{type:"argument",arg:C.value,ctx:A};case"func-simple":{const E=this.lexer.next();if(!E)throw new Yt(null,"Unexpected message end");if("end"!==E.type)throw new Yt(E,`Unexpected lexer token: ${E.type}`);if(A.text+=E.text,O(_.value.toLowerCase()))throw new Yt(_,`Invalid type identifier: ${_.value}`);return{type:"function",arg:C.value,key:_.value,ctx:A}}case"func-args":{if(O(_.value.toLowerCase()))throw new Yt(_,`Invalid type identifier: ${_.value}`);let E=this.parseBody(!this.strict&&I);return this.strict&&E.length>0&&(E=function ne(g,C){let I="",A="";for(const E of C){const G=E.ctx.text;switch(A+=G,E.type){case"content":I+=E.value;break;case"argument":case"function":case"octothorpe":I+=G;break;default:throw new Yt(g,`Unsupported part in strict mode function arg style: ${G}`)}}return[{type:"content",value:I.trim(),ctx:Object.assign({},C[0].ctx,{text:A})}]}(C,E)),{type:"function",arg:C.value,key:_.value,param:E,ctx:A}}case"select":if(O(_.value))return this.parseSelect(C,I,A,_.value);throw new Yt(_,`Unexpected select type ${_.value}`);default:throw new Yt(_,`Unexpected lexer token: ${_.type}`)}}parseBody(C,I){const A=[];let _=null;for(const E of this.lexer)if("argument"===E.type)_&&(_=null),A.push(this.parseArgToken(E,C));else if("octothorpe"===E.type&&C)_&&(_=null),A.push({type:"octothorpe",ctx:x(E)});else{if("end"===E.type&&!I)return A;{let G=E.value;if(!C&&"quoted"===E.type&&"#"===G[0]){if(G.includes("{"))throw new Yt(E,`Unsupported escape pattern: ${G}`);G=E.text}_?(_.value+=G,_.ctx.text+=E.text,_.ctx.lineBreaks+=E.lineBreaks):(_={type:"content",value:G,ctx:x(E)},A.push(_))}}if(I)return A;throw new Yt(null,"Unexpected message end")}}function ee(g){return ee[g]||(ee[g]=new Intl.NumberFormat(g))}R=gn.parse=function or(g){return new Kn(g,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).parse()};var rr=Object.freeze({__proto__:null,_nf:ee,number:function pe(g,C,I){return ee(g).format(C-I)},plural:function lt(g,C,I,A,_){if({}.hasOwnProperty.call(A,g))return A[g];C&&(g-=C);var E=I(g,_);return E in A?A[E]:A.other},reqArgs:function Cn(g,C){for(var I=0;I<g.length;++I)if(!C||void 0===C[g[I]])throw new Error("Message requires argument '".concat(g[I],"'"))},select:function tn(g,C){return{}.hasOwnProperty.call(C,g)?C[g]:C.other},strictNumber:function Qe(g,C,I,A){var _=C-I;if(isNaN(_))throw new Error("`"+A+"` or its offset is not a number");return ee(g).format(_)}});var zr={};function Fs(g,C){var I=String(g)+JSON.stringify(C);return zr[I]||(zr[I]=new Intl.NumberFormat(g,C)),zr[I]}var oc=Object.freeze({__proto__:null,date:function Gr(g,C,I){var A={day:"numeric",month:"short",year:"numeric"};switch(I){case"full":A.weekday="long";case"long":A.month="long";break;case"short":A.month="numeric"}return new Date(g).toLocaleDateString(C,A)},duration:function dr(g){if("number"!=typeof g&&(g=Number(g)),!isFinite(g))return String(g);var C="";g<0?(C="-",g=Math.abs(g)):g=Number(g);var I=g%60,A=[Math.round(I)===I?I:I.toFixed(3)];return g<60?A.unshift(0):(g=Math.round((g-Number(A[0]))/60),A.unshift(g%60),g>=60&&(g=Math.round((g-Number(A[0]))/60),A.unshift(g))),C+A.shift()+":"+A.map(function(E){return Number(E)<10?"0"+String(E):String(E)}).join(":")},numberCurrency:function(g,C,I){return Fs(C,{style:"currency",currency:I,minimumFractionDigits:2,maximumFractionDigits:2}).format(g)},numberFmt:function di(g,C,I,A){var _=I&&I.split(":")||[],E=_[0],G=_[1];return Fs(C,{integer:{maximumFractionDigits:0},percent:{style:"percent"},currency:{style:"currency",currency:G&&G.trim()||A,minimumFractionDigits:2,maximumFractionDigits:2}}[E]||{}).format(g)},numberInteger:function(g,C){return Fs(C,{maximumFractionDigits:0}).format(g)},numberPercent:function(g,C){return Fs(C,{style:"percent"}).format(g)},time:function Ua(g,C,I){var A={second:"numeric",minute:"numeric",hour:"numeric"};switch(I){case"full":case"long":A.timeZoneName="short";break;case"short":delete A.second}return new Date(g).toLocaleTimeString(C,A)}}),Ie=Kt({ES3:{break:!0,continue:!0,delete:!0,else:!0,for:!0,function:!0,if:!0,in:!0,new:!0,return:!0,this:!0,typeof:!0,var:!0,void:!0,while:!0,with:!0,case:!0,catch:!0,default:!0,do:!0,finally:!0,instanceof:!0,switch:!0,throw:!0,try:!0},ESnext:{await:!0,debugger:!0,class:!0,enum:!0,extends:!0,super:!0,const:!0,export:!0,import:!0,null:!0,true:!0,false:!0,implements:!0,let:!0,private:!0,public:!0,yield:!0,interface:!0,package:!0,protected:!0,static:!0}});function un(g,C){C&&(g+=" "+function It(g){let C=0;for(let I=0;I<g.length;++I)C=(C<<5)-C+g.charCodeAt(I),C|=0;return C}(g).toString(36));const I=g.trim().replace(/\W+/g,"_");return Ie.ES3[I]||Ie.ESnext[I]||/^\d/.test(I)?"_"+I:I}function _r(g,C){if(/^[A-Z_$][0-9A-Z_$]*$/i.test(C)&&!Ie.ES3[C])return g?g+"."+C:C;{const I=JSON.stringify(C);return g?g+"["+I+"]":I}}var Xi=new RegExp("^"+["ar","ckb","fa","he","ks($|[^bfh])","lrc","mzn","pa-Arab","ps","ug","ur","uz-Arab","yi"].join("|^"));var wr="@messageformat/runtime/lib/plurals",Yi=function(){function g(C){this.arguments=[],this.runtime={},this.options=C}return g.prototype.compile=function(C,I,A){var _,E,G=this,se=this.options,Le=se.localeCodeFromKey,wt=se.requireAllArguments,ln=se.strict,xn=se.strictPluralKeys;if("object"==typeof C){var Bn={};try{for(var Bt=xe(Object.keys(C)),Lr=Bt.next();!Lr.done;Lr=Bt.next()){var Yr=Lr.value,ss=Le?Le(Yr):Yr;Bn[Yr]=this.compile(C[Yr],A&&ss&&A[ss]||I,A)}}catch(ws){_={error:ws}}finally{try{Lr&&!Lr.done&&(E=Bt.return)&&E.call(Bt)}finally{if(_)throw _.error}}return Bn}this.plural=I;var to={cardinal:I.cardinals,ordinal:I.ordinals,strict:ln,strictPluralKeys:xn};this.arguments=[];var za=R(C,to).map(function(ws){return G.token(ws,null)}),sa=this.arguments.length>0,Va=this.concatenate(za,!0);if(wt&&sa){this.setRuntimeFn("reqArgs");var Ea=JSON.stringify(this.arguments);return"(d) => { reqArgs(".concat(Ea,", d); return ").concat(Va,"; }")}return"(".concat(sa?"d":"",") => ").concat(Va)},g.prototype.cases=function(C,I){var A=this,_=!0,E=C.cases.map(function(ln){var xn=ln.key;"other"===xn&&(_=!1);var Bt=ln.tokens.map(function(Lr){return A.token(Lr,I)});return"".concat(_r(null,xn.replace(/^=/,"")),": ").concat(A.concatenate(Bt,!1))});if(_){var G=C.type,se=this.plural,wt=se.ordinals;if("select"===G||"plural"===G&&se.cardinals.includes("other")||"selectordinal"===G&&wt.includes("other"))throw new Error("No 'other' form found in ".concat(JSON.stringify(C)))}return"{ ".concat(E.join(", ")," }")},g.prototype.concatenate=function(C,I){return"values"===this.options.returnType&&(I||C.length>1)?"["+C.join(", ")+"]":C.join(" + ")||'""'},g.prototype.token=function(C,I){if("content"===C.type)return JSON.stringify(C.value);var G,se,A=this.plural,_=A.id,E=A.lc;switch("arg"in C?(this.arguments.push(C.arg),G=[_r("d",C.arg)]):G=[],C.type){case"argument":return this.options.biDiSupport?function Te(g,C){var I=Xi.test(C),A=JSON.stringify(I?"\u200f":"\u200e");return"".concat(A," + ").concat(g," + ").concat(A)}(String(G[0]),E):String(G[0]);case"select":se="select",I&&this.options.strict&&(I=null),G.push(this.cases(C,I)),this.setRuntimeFn("select");break;case"selectordinal":se="plural",G.push(C.pluralOffset||0,_,this.cases(C,C),1),this.setLocale(_,!0),this.setRuntimeFn("plural");break;case"plural":se="plural",G.push(C.pluralOffset||0,_,this.cases(C,C)),this.setLocale(_,!1),this.setRuntimeFn("plural");break;case"function":var Le=this.options.customFormatters[C.key],wt=Le&&"module"in Le&&"function"==typeof Le.module;if(!Le){if("date"===C.key){se=this.setDateFormatter(C,G,I);break}if("number"===C.key){se=this.setNumberFormatter(C,G,I);break}}if(G.push(JSON.stringify(this.plural.locale)),C.param){I&&this.options.strict&&(I=null);var ln=this.getFormatterArg(C,I);ln&&G.push(ln)}se=wt?un("".concat(C.key,"__").concat(this.plural.locale)):C.key,this.setFormatter(se,C.key);break;case"octothorpe":if(!I)return'"#"';G=[JSON.stringify(this.plural.locale),_r("d",I.arg),I.pluralOffset||0],this.options.strict?(se="strictNumber",G.push(JSON.stringify(I.arg)),this.setRuntimeFn("strictNumber")):(se="number",this.setRuntimeFn("number"))}if(!se)throw new Error("Parser error for token "+JSON.stringify(C));return"".concat(se,"(").concat(G.join(", "),")")},g.prototype.runtimeIncludes=function(C,I){if(un(C)!==C)throw new SyntaxError("Reserved word used as ".concat(I," identifier: ").concat(C));var A=this.runtime[C];if(!A||A.type===I)return A;throw new TypeError("Cannot override ".concat(A.type," runtime function as ").concat(I,": ").concat(C))},g.prototype.setLocale=function(C,I){var Le,wt,ln,A=this.runtimeIncludes(C,"locale"),_=this.plural,E=_.getCardinal,G=_.getPlural,se=_.isDefault;if(!I&&se&&E){if(A)return;Le=function(xn){return E(xn)},wt="@messageformat/runtime/lib/cardinals",ln=function(){return String(E)}}else{if(A&&(!se||A.module===wr))return;Le=function(xn,Bn){return G(xn,Bn)},wt=se?wr:G.module||null,ln=function(){return String(G)}}this.runtime[C]=Object.assign(Le,{id:C,module:wt,toString:ln,type:"locale"})},g.prototype.setRuntimeFn=function(C){this.runtimeIncludes(C,"runtime")||(this.runtime[C]=Object.assign(rr[C],{id:C,module:"@messageformat/runtime",type:"runtime"}))},g.prototype.getFormatterArg=function(C,I){var A,_,E,G,se=this,Le=C.key,wt=C.param,ln=this.options.customFormatters[Le]||Pn(Le)&&oc[Le];if(!ln||!wt)return null;var xn="arg"in ln&&ln.arg||"string";if("options"===xn){var Bn="";try{for(var Bt=xe(wt),Lr=Bt.next();!Lr.done;Lr=Bt.next()){var Yr=Lr.value;if("content"!==Yr.type)throw new SyntaxError("Expected literal options for ".concat(Le," formatter"));Bn+=Yr.value}}catch(Ta){A={error:Ta}}finally{try{Lr&&!Lr.done&&(_=Bt.return)&&_.call(Bt)}finally{if(A)throw A.error}}var ss={};try{for(var mi=xe(Bn.split(",")),to=mi.next();!to.done;to=mi.next()){var za=to.value,sa=za.indexOf(":");if(-1===sa)ss[za.trim()]=null;else{var Va=za.substring(0,sa).trim(),Ea=za.substring(sa+1).trim();if("true"===Ea)ss[Va]=!0;else if("false"===Ea)ss[Va]=!1;else if("null"===Ea)ss[Va]=null;else{var ws=Number(Ea);ss[Va]=Number.isFinite(ws)?ws:Ea}}}}catch(Ta){E={error:Ta}}finally{try{to&&!to.done&&(G=mi.return)&&G.call(mi)}finally{if(E)throw E.error}}return JSON.stringify(ss)}var Qh=wt.map(function(Ta){return se.token(Ta,I)});if("raw"===xn)return"[".concat(Qh.join(", "),"]");var ed=Qh.join(" + ");return ed?"(".concat(ed,").trim()"):'""'},g.prototype.setFormatter=function(C,I){if(!this.runtimeIncludes(C,"formatter")){var A=this.options.customFormatters[I||C];if(A){var _="function"==typeof A?{formatter:A}:A;this.runtime[C]=Object.assign(_.formatter.bind({}),ot(ot({},_.formatter.prototype),{toString:function(){return String(_.formatter)}}),{type:"formatter"},"module"in A&&A.module&&A.id?{id:un(A.id),module:"function"==typeof A.module?A.module(this.plural.locale):A.module}:{id:null,module:null})}else{if(!Pn(C))throw new Error("Formatting function not found: ".concat(C));this.runtime[C]=Object.assign(oc[C],{type:"formatter"},{id:C,module:"@messageformat/runtime/lib/formatters"})}}},g.prototype.setDateFormatter=function(C,I,A){var _=this,E=C.param,G=this.plural.locale,se=E&&1===E.length&&E[0];if(se&&"content"===se.type&&/^\s*::/.test(se.value)){var Le=se.value.trim().substr(2),wt=un("date_".concat(G,"_").concat(Le),!0);if(!this.runtimeIncludes(wt,"formatter")){var ln=function ye(g,C,I,A){"string"==typeof C&&(C=we(C)),"function"==typeof I&&(A=I,I=void 0);const _=$(C,I,A),E=new Intl.DateTimeFormat(g,_);return G=>E.format(G)}(G,Le,this.options.timeZone);this.runtime[wt]=Object.assign(ln,{id:wt,module:null,toString:function(){return function Ee(g,C,I,A){"string"==typeof C&&(C=we(C)),"function"==typeof I&&(A=I,I=void 0);const _=$(C,I,A);return["(function() {",`var opt = ${JSON.stringify(_)};`,`var dtf = new Intl.DateTimeFormat(${JSON.stringify(g)}, opt);`,"return function(value) { return dtf.format(value); }"].join("\n  ")+"\n})()"}(G,Le,_.options.timeZone)},type:"formatter"})}return wt}if(I.push(JSON.stringify(G)),E&&E.length>0){A&&this.options.strict&&(A=null);var xn=E.map(function(Bn){return _.token(Bn,A)});I.push("("+(xn.join(" + ")||'""')+").trim()")}return this.setFormatter("date"),"date"},g.prototype.setNumberFormatter=function(C,I,A){var _=this,E=C.param,G=this.plural.locale;if(!E||0===E.length)return I.unshift(JSON.stringify(G)),I.push("0"),this.setRuntimeFn("number"),"number";if(I.push(JSON.stringify(G)),1===E.length&&"content"===E[0].type){var se=E[0].value.trim();switch(se){case"currency":return I.push(JSON.stringify(this.options.currency)),this.setFormatter("numberCurrency"),"numberCurrency";case"integer":return this.setFormatter("numberInteger"),"numberInteger";case"percent":return this.setFormatter("numberPercent"),"numberPercent"}var Le=se.match(/^currency:([A-Z]+)$/);if(Le)return I.push(JSON.stringify(Le[1])),this.setFormatter("numberCurrency"),"numberCurrency";var wt=un("number_".concat(G,"_").concat(se),!0);if(!this.runtimeIncludes(wt,"formatter")){var ln=this.options.currency,xn=Jt(G,se,ln);this.runtime[wt]=Object.assign(xn,{id:null,module:null,toString:function(){return er(G,se,ln)},type:"formatter"})}return wt}A&&this.options.strict&&(A=null);var Bn=E.map(function(Bt){return _.token(Bt,A)});return I.push("("+(Bn.join(" + ")||'""')+").trim()"),I.push(JSON.stringify(this.options.currency)),this.setFormatter("numberFmt"),"numberFmt"},g}();function Pn(g){return g in oc}const ct=g=>1==g?"one":"other",kn=g=>0==g||1==g?"one":"other",Js=g=>g>=0&&g<=1?"one":"other",ns=g=>{const C=String(g).split(".");return 1!=g||C[1]?"other":"one"},tr=g=>"other",nr=g=>1==g?"one":2==g?"two":"other";var gi=Object.freeze({__proto__:null,af:ct,ak:kn,am:Js,an:ct,ar:g=>{const C=String(g).split("."),A=Number(C[0])==g&&C[0].slice(-2);return 0==g?"zero":1==g?"one":2==g?"two":A>=3&&A<=10?"few":A>=11&&A<=99?"many":"other"},ars:g=>{const C=String(g).split("."),A=Number(C[0])==g&&C[0].slice(-2);return 0==g?"zero":1==g?"one":2==g?"two":A>=3&&A<=10?"few":A>=11&&A<=99?"many":"other"},as:Js,asa:ct,ast:ns,az:ct,bal:ct,be:g=>{const C=String(g).split("."),I=Number(C[0])==g,A=I&&C[0].slice(-1),_=I&&C[0].slice(-2);return 1==A&&11!=_?"one":A>=2&&A<=4&&(_<12||_>14)?"few":I&&0==A||A>=5&&A<=9||_>=11&&_<=14?"many":"other"},bem:ct,bez:ct,bg:ct,bho:kn,bm:tr,bn:Js,bo:tr,br:g=>{const C=String(g).split("."),I=Number(C[0])==g,A=I&&C[0].slice(-1),_=I&&C[0].slice(-2),E=I&&C[0].slice(-6);return 1==A&&11!=_&&71!=_&&91!=_?"one":2==A&&12!=_&&72!=_&&92!=_?"two":(3==A||4==A||9==A)&&(_<10||_>19)&&(_<70||_>79)&&(_<90||_>99)?"few":0!=g&&I&&0==E?"many":"other"},brx:ct,bs:g=>{const C=String(g).split("."),I=C[0],A=C[1]||"",_=!C[1],E=I.slice(-1),G=I.slice(-2),se=A.slice(-1),Le=A.slice(-2);return _&&1==E&&11!=G||1==se&&11!=Le?"one":_&&E>=2&&E<=4&&(G<12||G>14)||se>=2&&se<=4&&(Le<12||Le>14)?"few":"other"},ca:g=>{const C=String(g).split("."),I=C[0],A=!C[1],_=I.slice(-6);return 1==g&&A?"one":0!=I&&0==_&&A?"many":"other"},ce:ct,ceb:g=>{const C=String(g).split("."),I=C[0],A=C[1]||"",_=!C[1],E=I.slice(-1),G=A.slice(-1);return _&&(1==I||2==I||3==I)||_&&4!=E&&6!=E&&9!=E||!_&&4!=G&&6!=G&&9!=G?"one":"other"},cgg:ct,chr:ct,ckb:ct,cs:g=>{const C=String(g).split("."),I=C[0],A=!C[1];return 1==g&&A?"one":I>=2&&I<=4&&A?"few":A?"other":"many"},cy:g=>0==g?"zero":1==g?"one":2==g?"two":3==g?"few":6==g?"many":"other",da:g=>{const C=String(g).split("."),I=C[0],A=Number(C[0])==g;return 1!=g&&(A||0!=I&&1!=I)?"other":"one"},de:ns,doi:Js,dsb:g=>{const C=String(g).split("."),A=C[1]||"",_=!C[1],E=C[0].slice(-2),G=A.slice(-2);return _&&1==E||1==G?"one":_&&2==E||2==G?"two":_&&(3==E||4==E)||3==G||4==G?"few":"other"},dv:ct,dz:tr,ee:ct,el:ct,en:ns,eo:ct,es:g=>{const C=String(g).split("."),I=C[0],A=!C[1],_=I.slice(-6);return 1==g?"one":0!=I&&0==_&&A?"many":"other"},et:ns,eu:ct,fa:Js,ff:g=>g>=0&&g<2?"one":"other",fi:ns,fil:g=>{const C=String(g).split("."),I=C[0],A=C[1]||"",_=!C[1],E=I.slice(-1),G=A.slice(-1);return _&&(1==I||2==I||3==I)||_&&4!=E&&6!=E&&9!=E||!_&&4!=G&&6!=G&&9!=G?"one":"other"},fo:ct,fr:g=>{const C=String(g).split("."),I=C[0],A=!C[1],_=I.slice(-6);return g>=0&&g<2?"one":0!=I&&0==_&&A?"many":"other"},fur:ct,fy:ns,ga:g=>{const C=String(g).split("."),I=Number(C[0])==g;return 1==g?"one":2==g?"two":I&&g>=3&&g<=6?"few":I&&g>=7&&g<=10?"many":"other"},gd:g=>{const C=String(g).split("."),I=Number(C[0])==g;return 1==g||11==g?"one":2==g||12==g?"two":I&&g>=3&&g<=10||I&&g>=13&&g<=19?"few":"other"},gl:ns,gsw:ct,gu:Js,guw:kn,gv:g=>{const C=String(g).split("."),I=C[0],A=!C[1],_=I.slice(-1),E=I.slice(-2);return A&&1==_?"one":A&&2==_?"two":!A||0!=E&&20!=E&&40!=E&&60!=E&&80!=E?A?"other":"many":"few"},ha:ct,haw:ct,he:g=>{const C=String(g).split("."),I=C[0],A=!C[1];return 1==I&&A||0==I&&!A?"one":2==I&&A?"two":"other"},hi:Js,hnj:tr,hr:g=>{const C=String(g).split("."),I=C[0],A=C[1]||"",_=!C[1],E=I.slice(-1),G=I.slice(-2),se=A.slice(-1),Le=A.slice(-2);return _&&1==E&&11!=G||1==se&&11!=Le?"one":_&&E>=2&&E<=4&&(G<12||G>14)||se>=2&&se<=4&&(Le<12||Le>14)?"few":"other"},hsb:g=>{const C=String(g).split("."),A=C[1]||"",_=!C[1],E=C[0].slice(-2),G=A.slice(-2);return _&&1==E||1==G?"one":_&&2==E||2==G?"two":_&&(3==E||4==E)||3==G||4==G?"few":"other"},hu:ct,hy:g=>g>=0&&g<2?"one":"other",ia:ns,id:tr,ig:tr,ii:tr,io:ns,is:g=>{const C=String(g).split("."),I=C[0],A=(C[1]||"").replace(/0+$/,""),_=Number(C[0])==g,E=I.slice(-1),G=I.slice(-2);return _&&1==E&&11!=G||A%10==1&&A%100!=11?"one":"other"},it:g=>{const C=String(g).split("."),I=C[0],A=!C[1],_=I.slice(-6);return 1==g&&A?"one":0!=I&&0==_&&A?"many":"other"},iu:nr,ja:tr,jbo:tr,jgo:ct,jmc:ct,jv:tr,jw:tr,ka:ct,kab:g=>g>=0&&g<2?"one":"other",kaj:ct,kcg:ct,kde:tr,kea:tr,kk:ct,kkj:ct,kl:ct,km:tr,kn:Js,ko:tr,ks:ct,ksb:ct,ksh:g=>0==g?"zero":1==g?"one":"other",ku:ct,kw:g=>{const C=String(g).split("."),I=Number(C[0])==g,A=I&&C[0].slice(-2),_=I&&C[0].slice(-3),E=I&&C[0].slice(-5),G=I&&C[0].slice(-6);return 0==g?"zero":1==g?"one":2==A||22==A||42==A||62==A||82==A||I&&0==_&&(E>=1e3&&E<=2e4||4e4==E||6e4==E||8e4==E)||0!=g&&1e5==G?"two":3==A||23==A||43==A||63==A||83==A?"few":1==g||1!=A&&21!=A&&41!=A&&61!=A&&81!=A?"other":"many"},ky:ct,lag:g=>{const I=String(g).split(".")[0];return 0==g?"zero":0!=I&&1!=I||0==g?"other":"one"},lb:ct,lg:ct,lij:ns,lkt:tr,ln:kn,lo:tr,lt:g=>{const C=String(g).split("."),I=C[1]||"",A=Number(C[0])==g,_=A&&C[0].slice(-1),E=A&&C[0].slice(-2);return 1==_&&(E<11||E>19)?"one":_>=2&&_<=9&&(E<11||E>19)?"few":0!=I?"many":"other"},lv:g=>{const C=String(g).split("."),I=C[1]||"",A=I.length,_=Number(C[0])==g,E=_&&C[0].slice(-1),G=_&&C[0].slice(-2),se=I.slice(-2),Le=I.slice(-1);return _&&0==E||G>=11&&G<=19||2==A&&se>=11&&se<=19?"zero":1==E&&11!=G||2==A&&1==Le&&11!=se||2!=A&&1==Le?"one":"other"},mas:ct,mg:kn,mgo:ct,mk:g=>{const C=String(g).split("."),I=C[0],A=C[1]||"",_=!C[1],E=I.slice(-1),G=I.slice(-2),se=A.slice(-1),Le=A.slice(-2);return _&&1==E&&11!=G||1==se&&11!=Le?"one":"other"},ml:ct,mn:ct,mo:g=>{const C=String(g).split("."),I=!C[1],_=Number(C[0])==g&&C[0].slice(-2);return 1==g&&I?"one":!I||0==g||1!=g&&_>=1&&_<=19?"few":"other"},mr:ct,ms:tr,mt:g=>{const C=String(g).split("."),A=Number(C[0])==g&&C[0].slice(-2);return 1==g?"one":2==g?"two":0==g||A>=3&&A<=10?"few":A>=11&&A<=19?"many":"other"},my:tr,nah:ct,naq:nr,nb:ct,nd:ct,ne:ct,nl:ns,nn:ct,nnh:ct,no:ct,nqo:tr,nr:ct,nso:kn,ny:ct,nyn:ct,om:ct,or:ct,os:ct,osa:tr,pa:kn,pap:ct,pcm:Js,pl:g=>{const C=String(g).split("."),I=C[0],A=!C[1],_=I.slice(-1),E=I.slice(-2);return 1==g&&A?"one":A&&_>=2&&_<=4&&(E<12||E>14)?"few":A&&1!=I&&(0==_||1==_)||A&&_>=5&&_<=9||A&&E>=12&&E<=14?"many":"other"},prg:g=>{const C=String(g).split("."),I=C[1]||"",A=I.length,_=Number(C[0])==g,E=_&&C[0].slice(-1),G=_&&C[0].slice(-2),se=I.slice(-2),Le=I.slice(-1);return _&&0==E||G>=11&&G<=19||2==A&&se>=11&&se<=19?"zero":1==E&&11!=G||2==A&&1==Le&&11!=se||2!=A&&1==Le?"one":"other"},ps:ct,pt:g=>{const C=String(g).split("."),I=C[0],A=!C[1],_=I.slice(-6);return 0==I||1==I?"one":0!=I&&0==_&&A?"many":"other"},pt_PT:g=>{const C=String(g).split("."),I=C[0],A=!C[1],_=I.slice(-6);return 1==g&&A?"one":0!=I&&0==_&&A?"many":"other"},rm:ct,ro:g=>{const C=String(g).split("."),I=!C[1],_=Number(C[0])==g&&C[0].slice(-2);return 1==g&&I?"one":!I||0==g||1!=g&&_>=1&&_<=19?"few":"other"},rof:ct,ru:g=>{const C=String(g).split("."),I=C[0],A=!C[1],_=I.slice(-1),E=I.slice(-2);return A&&1==_&&11!=E?"one":A&&_>=2&&_<=4&&(E<12||E>14)?"few":A&&0==_||A&&_>=5&&_<=9||A&&E>=11&&E<=14?"many":"other"},rwk:ct,sah:tr,saq:ct,sat:nr,sc:ns,scn:ns,sd:ct,sdh:ct,se:nr,seh:ct,ses:tr,sg:tr,sh:g=>{const C=String(g).split("."),I=C[0],A=C[1]||"",_=!C[1],E=I.slice(-1),G=I.slice(-2),se=A.slice(-1),Le=A.slice(-2);return _&&1==E&&11!=G||1==se&&11!=Le?"one":_&&E>=2&&E<=4&&(G<12||G>14)||se>=2&&se<=4&&(Le<12||Le>14)?"few":"other"},shi:g=>{const C=String(g).split("."),I=Number(C[0])==g;return g>=0&&g<=1?"one":I&&g>=2&&g<=10?"few":"other"},si:g=>{const C=String(g).split(".");return 0==g||1==g||0==C[0]&&1==(C[1]||"")?"one":"other"},sk:g=>{const C=String(g).split("."),I=C[0],A=!C[1];return 1==g&&A?"one":I>=2&&I<=4&&A?"few":A?"other":"many"},sl:g=>{const C=String(g).split("."),A=!C[1],_=C[0].slice(-2);return A&&1==_?"one":A&&2==_?"two":A&&(3==_||4==_)||!A?"few":"other"},sma:nr,smi:nr,smj:nr,smn:nr,sms:nr,sn:ct,so:ct,sq:ct,sr:g=>{const C=String(g).split("."),I=C[0],A=C[1]||"",_=!C[1],E=I.slice(-1),G=I.slice(-2),se=A.slice(-1),Le=A.slice(-2);return _&&1==E&&11!=G||1==se&&11!=Le?"one":_&&E>=2&&E<=4&&(G<12||G>14)||se>=2&&se<=4&&(Le<12||Le>14)?"few":"other"},ss:ct,ssy:ct,st:ct,su:tr,sv:ns,sw:ns,syr:ct,ta:ct,te:ct,teo:ct,th:tr,ti:kn,tig:ct,tk:ct,tl:g=>{const C=String(g).split("."),I=C[0],A=C[1]||"",_=!C[1],E=I.slice(-1),G=A.slice(-1);return _&&(1==I||2==I||3==I)||_&&4!=E&&6!=E&&9!=E||!_&&4!=G&&6!=G&&9!=G?"one":"other"},tn:ct,to:tr,tpi:tr,tr:ct,ts:ct,tzm:g=>{const C=String(g).split("."),I=Number(C[0])==g;return 0==g||1==g||I&&g>=11&&g<=99?"one":"other"},ug:ct,uk:g=>{const C=String(g).split("."),I=C[0],A=!C[1],_=I.slice(-1),E=I.slice(-2);return A&&1==_&&11!=E?"one":A&&_>=2&&_<=4&&(E<12||E>14)?"few":A&&0==_||A&&_>=5&&_<=9||A&&E>=11&&E<=14?"many":"other"},und:tr,ur:ns,uz:ct,ve:ct,vec:g=>{const C=String(g).split("."),I=C[0],A=!C[1],_=I.slice(-6);return 1==g&&A?"one":0!=I&&0==_&&A?"many":"other"},vi:tr,vo:ct,vun:ct,wa:kn,wae:ct,wo:tr,xh:ct,xog:ct,yi:ns,yo:tr,yue:tr,zh:tr,zu:Js});const ba="zero",Vt="one",Gn="two",qn="few",On="many",We="other",Ke={cardinal:[Vt,We],ordinal:[We]},Xs={cardinal:[Vt,We],ordinal:[Vt,We]},Tr={cardinal:[We],ordinal:[We]},zo={cardinal:[Vt,Gn,We],ordinal:[We]};var tm=Object.freeze({__proto__:null,af:Ke,ak:Ke,am:Ke,an:Ke,ar:{cardinal:[ba,Vt,Gn,qn,On,We],ordinal:[We]},ars:{cardinal:[ba,Vt,Gn,qn,On,We],ordinal:[We]},as:{cardinal:[Vt,We],ordinal:[Vt,Gn,qn,On,We]},asa:Ke,ast:Ke,az:{cardinal:[Vt,We],ordinal:[Vt,qn,On,We]},bal:Xs,be:{cardinal:[Vt,qn,On,We],ordinal:[qn,We]},bem:Ke,bez:Ke,bg:Ke,bho:Ke,bm:Tr,bn:{cardinal:[Vt,We],ordinal:[Vt,Gn,qn,On,We]},bo:Tr,br:{cardinal:[Vt,Gn,qn,On,We],ordinal:[We]},brx:Ke,bs:{cardinal:[Vt,qn,We],ordinal:[We]},ca:{cardinal:[Vt,On,We],ordinal:[Vt,Gn,qn,We]},ce:Ke,ceb:Ke,cgg:Ke,chr:Ke,ckb:Ke,cs:{cardinal:[Vt,qn,On,We],ordinal:[We]},cy:{cardinal:[ba,Vt,Gn,qn,On,We],ordinal:[ba,Vt,Gn,qn,On,We]},da:Ke,de:Ke,doi:Ke,dsb:{cardinal:[Vt,Gn,qn,We],ordinal:[We]},dv:Ke,dz:Tr,ee:Ke,el:Ke,en:{cardinal:[Vt,We],ordinal:[Vt,Gn,qn,We]},eo:Ke,es:{cardinal:[Vt,On,We],ordinal:[We]},et:Ke,eu:Ke,fa:Ke,ff:Ke,fi:Ke,fil:Xs,fo:Ke,fr:{cardinal:[Vt,On,We],ordinal:[Vt,We]},fur:Ke,fy:Ke,ga:{cardinal:[Vt,Gn,qn,On,We],ordinal:[Vt,We]},gd:{cardinal:[Vt,Gn,qn,We],ordinal:[Vt,Gn,qn,We]},gl:Ke,gsw:Ke,gu:{cardinal:[Vt,We],ordinal:[Vt,Gn,qn,On,We]},guw:Ke,gv:{cardinal:[Vt,Gn,qn,On,We],ordinal:[We]},ha:Ke,haw:Ke,he:zo,hi:{cardinal:[Vt,We],ordinal:[Vt,Gn,qn,On,We]},hnj:Tr,hr:{cardinal:[Vt,qn,We],ordinal:[We]},hsb:{cardinal:[Vt,Gn,qn,We],ordinal:[We]},hu:Xs,hy:Xs,ia:Ke,id:Tr,ig:Tr,ii:Tr,io:Ke,is:Ke,it:{cardinal:[Vt,On,We],ordinal:[On,We]},iu:zo,ja:Tr,jbo:Tr,jgo:Ke,jmc:Ke,jv:Tr,jw:Tr,ka:{cardinal:[Vt,We],ordinal:[Vt,On,We]},kab:Ke,kaj:Ke,kcg:Ke,kde:Tr,kea:Tr,kk:{cardinal:[Vt,We],ordinal:[On,We]},kkj:Ke,kl:Ke,km:Tr,kn:Ke,ko:Tr,ks:Ke,ksb:Ke,ksh:{cardinal:[ba,Vt,We],ordinal:[We]},ku:Ke,kw:{cardinal:[ba,Vt,Gn,qn,On,We],ordinal:[Vt,On,We]},ky:Ke,lag:{cardinal:[ba,Vt,We],ordinal:[We]},lb:Ke,lg:Ke,lij:{cardinal:[Vt,We],ordinal:[On,We]},lkt:Tr,ln:Ke,lo:{cardinal:[We],ordinal:[Vt,We]},lt:{cardinal:[Vt,qn,On,We],ordinal:[We]},lv:{cardinal:[ba,Vt,We],ordinal:[We]},mas:Ke,mg:Ke,mgo:Ke,mk:{cardinal:[Vt,We],ordinal:[Vt,Gn,On,We]},ml:Ke,mn:Ke,mo:{cardinal:[Vt,qn,We],ordinal:[Vt,We]},mr:{cardinal:[Vt,We],ordinal:[Vt,Gn,qn,We]},ms:{cardinal:[We],ordinal:[Vt,We]},mt:{cardinal:[Vt,Gn,qn,On,We],ordinal:[We]},my:Tr,nah:Ke,naq:zo,nb:Ke,nd:Ke,ne:Xs,nl:Ke,nn:Ke,nnh:Ke,no:Ke,nqo:Tr,nr:Ke,nso:Ke,ny:Ke,nyn:Ke,om:Ke,or:{cardinal:[Vt,We],ordinal:[Vt,Gn,qn,On,We]},os:Ke,osa:Tr,pa:Ke,pap:Ke,pcm:Ke,pl:{cardinal:[Vt,qn,On,We],ordinal:[We]},prg:{cardinal:[ba,Vt,We],ordinal:[We]},ps:Ke,pt:{cardinal:[Vt,On,We],ordinal:[We]},pt_PT:{cardinal:[Vt,On,We],ordinal:[We]},rm:Ke,ro:{cardinal:[Vt,qn,We],ordinal:[Vt,We]},rof:Ke,ru:{cardinal:[Vt,qn,On,We],ordinal:[We]},rwk:Ke,sah:Tr,saq:Ke,sat:zo,sc:{cardinal:[Vt,We],ordinal:[On,We]},scn:{cardinal:[Vt,We],ordinal:[On,We]},sd:Ke,sdh:Ke,se:zo,seh:Ke,ses:Tr,sg:Tr,sh:{cardinal:[Vt,qn,We],ordinal:[We]},shi:{cardinal:[Vt,qn,We],ordinal:[We]},si:Ke,sk:{cardinal:[Vt,qn,On,We],ordinal:[We]},sl:{cardinal:[Vt,Gn,qn,We],ordinal:[We]},sma:zo,smi:zo,smj:zo,smn:zo,sms:zo,sn:Ke,so:Ke,sq:{cardinal:[Vt,We],ordinal:[Vt,On,We]},sr:{cardinal:[Vt,qn,We],ordinal:[We]},ss:Ke,ssy:Ke,st:Ke,su:Tr,sv:Xs,sw:Ke,syr:Ke,ta:Ke,te:Ke,teo:Ke,th:Tr,ti:Ke,tig:Ke,tk:{cardinal:[Vt,We],ordinal:[qn,We]},tl:Xs,tn:Ke,to:Tr,tpi:Tr,tr:Ke,ts:Ke,tzm:Ke,ug:Ke,uk:{cardinal:[Vt,qn,On,We],ordinal:[qn,We]},und:Tr,ur:Ke,uz:Ke,ve:Ke,vec:{cardinal:[Vt,On,We],ordinal:[On,We]},vi:{cardinal:[We],ordinal:[Vt,We]},vo:Ke,vun:Ke,wa:Ke,wae:Ke,wo:Tr,xh:Ke,xog:Ke,yi:Ke,yo:Tr,yue:Tr,zh:Tr,zu:Ke});const Pt=(g,C)=>C?"other":1==g?"one":"other",ll=(g,C)=>C?"other":0==g||1==g?"one":"other",b1=(g,C)=>C?"other":g>=0&&g<=1?"one":"other",Zo=(g,C)=>{const I=String(g).split(".");return C||1!=g||I[1]?"other":"one"},Nr=(g,C)=>"other",cl=(g,C)=>C?"other":1==g?"one":2==g?"two":"other";var Ju=Object.freeze({__proto__:null,af:Pt,ak:ll,am:b1,an:Pt,ar:(g,C)=>{const I=String(g).split("."),_=Number(I[0])==g&&I[0].slice(-2);return C?"other":0==g?"zero":1==g?"one":2==g?"two":_>=3&&_<=10?"few":_>=11&&_<=99?"many":"other"},ars:(g,C)=>{const I=String(g).split("."),_=Number(I[0])==g&&I[0].slice(-2);return C?"other":0==g?"zero":1==g?"one":2==g?"two":_>=3&&_<=10?"few":_>=11&&_<=99?"many":"other"},as:(g,C)=>C?1==g||5==g||7==g||8==g||9==g||10==g?"one":2==g||3==g?"two":4==g?"few":6==g?"many":"other":g>=0&&g<=1?"one":"other",asa:Pt,ast:Zo,az:(g,C)=>{const A=String(g).split(".")[0],_=A.slice(-1),E=A.slice(-2),G=A.slice(-3);return C?1==_||2==_||5==_||7==_||8==_||20==E||50==E||70==E||80==E?"one":3==_||4==_||100==G||200==G||300==G||400==G||500==G||600==G||700==G||800==G||900==G?"few":0==A||6==_||40==E||60==E||90==E?"many":"other":1==g?"one":"other"},bal:(g,C)=>1==g?"one":"other",be:(g,C)=>{const I=String(g).split("."),A=Number(I[0])==g,_=A&&I[0].slice(-1),E=A&&I[0].slice(-2);return C?2!=_&&3!=_||12==E||13==E?"other":"few":1==_&&11!=E?"one":_>=2&&_<=4&&(E<12||E>14)?"few":A&&0==_||_>=5&&_<=9||E>=11&&E<=14?"many":"other"},bem:Pt,bez:Pt,bg:Pt,bho:ll,bm:Nr,bn:(g,C)=>C?1==g||5==g||7==g||8==g||9==g||10==g?"one":2==g||3==g?"two":4==g?"few":6==g?"many":"other":g>=0&&g<=1?"one":"other",bo:Nr,br:(g,C)=>{const I=String(g).split("."),A=Number(I[0])==g,_=A&&I[0].slice(-1),E=A&&I[0].slice(-2),G=A&&I[0].slice(-6);return C?"other":1==_&&11!=E&&71!=E&&91!=E?"one":2==_&&12!=E&&72!=E&&92!=E?"two":(3==_||4==_||9==_)&&(E<10||E>19)&&(E<70||E>79)&&(E<90||E>99)?"few":0!=g&&A&&0==G?"many":"other"},brx:Pt,bs:(g,C)=>{const I=String(g).split("."),A=I[0],_=I[1]||"",E=!I[1],G=A.slice(-1),se=A.slice(-2),Le=_.slice(-1),wt=_.slice(-2);return C?"other":E&&1==G&&11!=se||1==Le&&11!=wt?"one":E&&G>=2&&G<=4&&(se<12||se>14)||Le>=2&&Le<=4&&(wt<12||wt>14)?"few":"other"},ca:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1],E=A.slice(-6);return C?1==g||3==g?"one":2==g?"two":4==g?"few":"other":1==g&&_?"one":0!=A&&0==E&&_?"many":"other"},ce:Pt,ceb:(g,C)=>{const I=String(g).split("."),A=I[0],_=I[1]||"",E=!I[1],G=A.slice(-1),se=_.slice(-1);return C?"other":E&&(1==A||2==A||3==A)||E&&4!=G&&6!=G&&9!=G||!E&&4!=se&&6!=se&&9!=se?"one":"other"},cgg:Pt,chr:Pt,ckb:Pt,cs:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1];return C?"other":1==g&&_?"one":A>=2&&A<=4&&_?"few":_?"other":"many"},cy:(g,C)=>C?0==g||7==g||8==g||9==g?"zero":1==g?"one":2==g?"two":3==g||4==g?"few":5==g||6==g?"many":"other":0==g?"zero":1==g?"one":2==g?"two":3==g?"few":6==g?"many":"other",da:(g,C)=>{const I=String(g).split("."),A=I[0],_=Number(I[0])==g;return C||1!=g&&(_||0!=A&&1!=A)?"other":"one"},de:Zo,doi:b1,dsb:(g,C)=>{const I=String(g).split("."),_=I[1]||"",E=!I[1],G=I[0].slice(-2),se=_.slice(-2);return C?"other":E&&1==G||1==se?"one":E&&2==G||2==se?"two":E&&(3==G||4==G)||3==se||4==se?"few":"other"},dv:Pt,dz:Nr,ee:Pt,el:Pt,en:(g,C)=>{const I=String(g).split("."),A=!I[1],_=Number(I[0])==g,E=_&&I[0].slice(-1),G=_&&I[0].slice(-2);return C?1==E&&11!=G?"one":2==E&&12!=G?"two":3==E&&13!=G?"few":"other":1==g&&A?"one":"other"},eo:Pt,es:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1],E=A.slice(-6);return C?"other":1==g?"one":0!=A&&0==E&&_?"many":"other"},et:Zo,eu:Pt,fa:b1,ff:(g,C)=>C?"other":g>=0&&g<2?"one":"other",fi:Zo,fil:(g,C)=>{const I=String(g).split("."),A=I[0],_=I[1]||"",E=!I[1],G=A.slice(-1),se=_.slice(-1);return C?1==g?"one":"other":E&&(1==A||2==A||3==A)||E&&4!=G&&6!=G&&9!=G||!E&&4!=se&&6!=se&&9!=se?"one":"other"},fo:Pt,fr:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1],E=A.slice(-6);return C?1==g?"one":"other":g>=0&&g<2?"one":0!=A&&0==E&&_?"many":"other"},fur:Pt,fy:Zo,ga:(g,C)=>{const I=String(g).split("."),A=Number(I[0])==g;return C?1==g?"one":"other":1==g?"one":2==g?"two":A&&g>=3&&g<=6?"few":A&&g>=7&&g<=10?"many":"other"},gd:(g,C)=>{const I=String(g).split("."),A=Number(I[0])==g;return C?1==g||11==g?"one":2==g||12==g?"two":3==g||13==g?"few":"other":1==g||11==g?"one":2==g||12==g?"two":A&&g>=3&&g<=10||A&&g>=13&&g<=19?"few":"other"},gl:Zo,gsw:Pt,gu:(g,C)=>C?1==g?"one":2==g||3==g?"two":4==g?"few":6==g?"many":"other":g>=0&&g<=1?"one":"other",guw:ll,gv:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1],E=A.slice(-1),G=A.slice(-2);return C?"other":_&&1==E?"one":_&&2==E?"two":!_||0!=G&&20!=G&&40!=G&&60!=G&&80!=G?_?"other":"many":"few"},ha:Pt,haw:Pt,he:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1];return C?"other":1==A&&_||0==A&&!_?"one":2==A&&_?"two":"other"},hi:(g,C)=>C?1==g?"one":2==g||3==g?"two":4==g?"few":6==g?"many":"other":g>=0&&g<=1?"one":"other",hnj:Nr,hr:(g,C)=>{const I=String(g).split("."),A=I[0],_=I[1]||"",E=!I[1],G=A.slice(-1),se=A.slice(-2),Le=_.slice(-1),wt=_.slice(-2);return C?"other":E&&1==G&&11!=se||1==Le&&11!=wt?"one":E&&G>=2&&G<=4&&(se<12||se>14)||Le>=2&&Le<=4&&(wt<12||wt>14)?"few":"other"},hsb:(g,C)=>{const I=String(g).split("."),_=I[1]||"",E=!I[1],G=I[0].slice(-2),se=_.slice(-2);return C?"other":E&&1==G||1==se?"one":E&&2==G||2==se?"two":E&&(3==G||4==G)||3==se||4==se?"few":"other"},hu:(g,C)=>C?1==g||5==g?"one":"other":1==g?"one":"other",hy:(g,C)=>C?1==g?"one":"other":g>=0&&g<2?"one":"other",ia:Zo,id:Nr,ig:Nr,ii:Nr,io:Zo,is:(g,C)=>{const I=String(g).split("."),A=I[0],_=(I[1]||"").replace(/0+$/,""),E=Number(I[0])==g,G=A.slice(-1),se=A.slice(-2);return C?"other":E&&1==G&&11!=se||_%10==1&&_%100!=11?"one":"other"},it:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1],E=A.slice(-6);return C?11==g||8==g||80==g||800==g?"many":"other":1==g&&_?"one":0!=A&&0==E&&_?"many":"other"},iu:cl,ja:Nr,jbo:Nr,jgo:Pt,jmc:Pt,jv:Nr,jw:Nr,ka:(g,C)=>{const A=String(g).split(".")[0],_=A.slice(-2);return C?1==A?"one":0==A||_>=2&&_<=20||40==_||60==_||80==_?"many":"other":1==g?"one":"other"},kab:(g,C)=>C?"other":g>=0&&g<2?"one":"other",kaj:Pt,kcg:Pt,kde:Nr,kea:Nr,kk:(g,C)=>{const I=String(g).split("."),A=Number(I[0])==g,_=A&&I[0].slice(-1);return C?6==_||9==_||A&&0==_&&0!=g?"many":"other":1==g?"one":"other"},kkj:Pt,kl:Pt,km:Nr,kn:b1,ko:Nr,ks:Pt,ksb:Pt,ksh:(g,C)=>C?"other":0==g?"zero":1==g?"one":"other",ku:Pt,kw:(g,C)=>{const I=String(g).split("."),A=Number(I[0])==g,_=A&&I[0].slice(-2),E=A&&I[0].slice(-3),G=A&&I[0].slice(-5),se=A&&I[0].slice(-6);return C?A&&g>=1&&g<=4||_>=1&&_<=4||_>=21&&_<=24||_>=41&&_<=44||_>=61&&_<=64||_>=81&&_<=84?"one":5==g||5==_?"many":"other":0==g?"zero":1==g?"one":2==_||22==_||42==_||62==_||82==_||A&&0==E&&(G>=1e3&&G<=2e4||4e4==G||6e4==G||8e4==G)||0!=g&&1e5==se?"two":3==_||23==_||43==_||63==_||83==_?"few":1==g||1!=_&&21!=_&&41!=_&&61!=_&&81!=_?"other":"many"},ky:Pt,lag:(g,C)=>{const A=String(g).split(".")[0];return C?"other":0==g?"zero":0!=A&&1!=A||0==g?"other":"one"},lb:Pt,lg:Pt,lij:(g,C)=>{const I=String(g).split("."),A=!I[1],_=Number(I[0])==g;return C?11==g||8==g||_&&g>=80&&g<=89||_&&g>=800&&g<=899?"many":"other":1==g&&A?"one":"other"},lkt:Nr,ln:ll,lo:(g,C)=>C&&1==g?"one":"other",lt:(g,C)=>{const I=String(g).split("."),A=I[1]||"",_=Number(I[0])==g,E=_&&I[0].slice(-1),G=_&&I[0].slice(-2);return C?"other":1==E&&(G<11||G>19)?"one":E>=2&&E<=9&&(G<11||G>19)?"few":0!=A?"many":"other"},lv:(g,C)=>{const I=String(g).split("."),A=I[1]||"",_=A.length,E=Number(I[0])==g,G=E&&I[0].slice(-1),se=E&&I[0].slice(-2),Le=A.slice(-2),wt=A.slice(-1);return C?"other":E&&0==G||se>=11&&se<=19||2==_&&Le>=11&&Le<=19?"zero":1==G&&11!=se||2==_&&1==wt&&11!=Le||2!=_&&1==wt?"one":"other"},mas:Pt,mg:ll,mgo:Pt,mk:(g,C)=>{const I=String(g).split("."),A=I[0],_=I[1]||"",E=!I[1],G=A.slice(-1),se=A.slice(-2),Le=_.slice(-1),wt=_.slice(-2);return C?1==G&&11!=se?"one":2==G&&12!=se?"two":7!=G&&8!=G||17==se||18==se?"other":"many":E&&1==G&&11!=se||1==Le&&11!=wt?"one":"other"},ml:Pt,mn:Pt,mo:(g,C)=>{const I=String(g).split("."),A=!I[1],E=Number(I[0])==g&&I[0].slice(-2);return C?1==g?"one":"other":1==g&&A?"one":!A||0==g||1!=g&&E>=1&&E<=19?"few":"other"},mr:(g,C)=>C?1==g?"one":2==g||3==g?"two":4==g?"few":"other":1==g?"one":"other",ms:(g,C)=>C&&1==g?"one":"other",mt:(g,C)=>{const I=String(g).split("."),_=Number(I[0])==g&&I[0].slice(-2);return C?"other":1==g?"one":2==g?"two":0==g||_>=3&&_<=10?"few":_>=11&&_<=19?"many":"other"},my:Nr,nah:Pt,naq:cl,nb:Pt,nd:Pt,ne:(g,C)=>{const I=String(g).split("."),A=Number(I[0])==g;return C?A&&g>=1&&g<=4?"one":"other":1==g?"one":"other"},nl:Zo,nn:Pt,nnh:Pt,no:Pt,nqo:Nr,nr:Pt,nso:ll,ny:Pt,nyn:Pt,om:Pt,or:(g,C)=>{const I=String(g).split("."),A=Number(I[0])==g;return C?1==g||5==g||A&&g>=7&&g<=9?"one":2==g||3==g?"two":4==g?"few":6==g?"many":"other":1==g?"one":"other"},os:Pt,osa:Nr,pa:ll,pap:Pt,pcm:b1,pl:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1],E=A.slice(-1),G=A.slice(-2);return C?"other":1==g&&_?"one":_&&E>=2&&E<=4&&(G<12||G>14)?"few":_&&1!=A&&(0==E||1==E)||_&&E>=5&&E<=9||_&&G>=12&&G<=14?"many":"other"},prg:(g,C)=>{const I=String(g).split("."),A=I[1]||"",_=A.length,E=Number(I[0])==g,G=E&&I[0].slice(-1),se=E&&I[0].slice(-2),Le=A.slice(-2),wt=A.slice(-1);return C?"other":E&&0==G||se>=11&&se<=19||2==_&&Le>=11&&Le<=19?"zero":1==G&&11!=se||2==_&&1==wt&&11!=Le||2!=_&&1==wt?"one":"other"},ps:Pt,pt:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1],E=A.slice(-6);return C?"other":0==A||1==A?"one":0!=A&&0==E&&_?"many":"other"},pt_PT:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1],E=A.slice(-6);return C?"other":1==g&&_?"one":0!=A&&0==E&&_?"many":"other"},rm:Pt,ro:(g,C)=>{const I=String(g).split("."),A=!I[1],E=Number(I[0])==g&&I[0].slice(-2);return C?1==g?"one":"other":1==g&&A?"one":!A||0==g||1!=g&&E>=1&&E<=19?"few":"other"},rof:Pt,ru:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1],E=A.slice(-1),G=A.slice(-2);return C?"other":_&&1==E&&11!=G?"one":_&&E>=2&&E<=4&&(G<12||G>14)?"few":_&&0==E||_&&E>=5&&E<=9||_&&G>=11&&G<=14?"many":"other"},rwk:Pt,sah:Nr,saq:Pt,sat:cl,sc:(g,C)=>{const I=String(g).split(".");return C?11==g||8==g||80==g||800==g?"many":"other":1!=g||I[1]?"other":"one"},scn:(g,C)=>{const I=String(g).split(".");return C?11==g||8==g||80==g||800==g?"many":"other":1!=g||I[1]?"other":"one"},sd:Pt,sdh:Pt,se:cl,seh:Pt,ses:Nr,sg:Nr,sh:(g,C)=>{const I=String(g).split("."),A=I[0],_=I[1]||"",E=!I[1],G=A.slice(-1),se=A.slice(-2),Le=_.slice(-1),wt=_.slice(-2);return C?"other":E&&1==G&&11!=se||1==Le&&11!=wt?"one":E&&G>=2&&G<=4&&(se<12||se>14)||Le>=2&&Le<=4&&(wt<12||wt>14)?"few":"other"},shi:(g,C)=>{const I=String(g).split("."),A=Number(I[0])==g;return C?"other":g>=0&&g<=1?"one":A&&g>=2&&g<=10?"few":"other"},si:(g,C)=>{const I=String(g).split(".");return C?"other":0==g||1==g||0==I[0]&&1==(I[1]||"")?"one":"other"},sk:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1];return C?"other":1==g&&_?"one":A>=2&&A<=4&&_?"few":_?"other":"many"},sl:(g,C)=>{const I=String(g).split("."),_=!I[1],E=I[0].slice(-2);return C?"other":_&&1==E?"one":_&&2==E?"two":_&&(3==E||4==E)||!_?"few":"other"},sma:cl,smi:cl,smj:cl,smn:cl,sms:cl,sn:Pt,so:Pt,sq:(g,C)=>{const I=String(g).split("."),A=Number(I[0])==g,_=A&&I[0].slice(-1),E=A&&I[0].slice(-2);return C?1==g?"one":4==_&&14!=E?"many":"other":1==g?"one":"other"},sr:(g,C)=>{const I=String(g).split("."),A=I[0],_=I[1]||"",E=!I[1],G=A.slice(-1),se=A.slice(-2),Le=_.slice(-1),wt=_.slice(-2);return C?"other":E&&1==G&&11!=se||1==Le&&11!=wt?"one":E&&G>=2&&G<=4&&(se<12||se>14)||Le>=2&&Le<=4&&(wt<12||wt>14)?"few":"other"},ss:Pt,ssy:Pt,st:Pt,su:Nr,sv:(g,C)=>{const I=String(g).split("."),A=!I[1],_=Number(I[0])==g,E=_&&I[0].slice(-1),G=_&&I[0].slice(-2);return C?1!=E&&2!=E||11==G||12==G?"other":"one":1==g&&A?"one":"other"},sw:Zo,syr:Pt,ta:Pt,te:Pt,teo:Pt,th:Nr,ti:ll,tig:Pt,tk:(g,C)=>{const I=String(g).split("."),_=Number(I[0])==g&&I[0].slice(-1);return C?6==_||9==_||10==g?"few":"other":1==g?"one":"other"},tl:(g,C)=>{const I=String(g).split("."),A=I[0],_=I[1]||"",E=!I[1],G=A.slice(-1),se=_.slice(-1);return C?1==g?"one":"other":E&&(1==A||2==A||3==A)||E&&4!=G&&6!=G&&9!=G||!E&&4!=se&&6!=se&&9!=se?"one":"other"},tn:Pt,to:Nr,tpi:Nr,tr:Pt,ts:Pt,tzm:(g,C)=>{const I=String(g).split("."),A=Number(I[0])==g;return C?"other":0==g||1==g||A&&g>=11&&g<=99?"one":"other"},ug:Pt,uk:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1],E=Number(I[0])==g,G=E&&I[0].slice(-1),se=E&&I[0].slice(-2),Le=A.slice(-1),wt=A.slice(-2);return C?3==G&&13!=se?"few":"other":_&&1==Le&&11!=wt?"one":_&&Le>=2&&Le<=4&&(wt<12||wt>14)?"few":_&&0==Le||_&&Le>=5&&Le<=9||_&&wt>=11&&wt<=14?"many":"other"},und:Nr,ur:Zo,uz:Pt,ve:Pt,vec:(g,C)=>{const I=String(g).split("."),A=I[0],_=!I[1],E=A.slice(-6);return C?11==g||8==g||80==g||800==g?"many":"other":1==g&&_?"one":0!=A&&0==E&&_?"many":"other"},vi:(g,C)=>C&&1==g?"one":"other",vo:Pt,vun:Pt,wa:ll,wae:Pt,wo:Nr,xh:Pt,xog:Pt,yi:Zo,yo:Nr,yue:Nr,zh:Nr,zu:b1});function Qu(g){if("string"!=typeof g||g.length<2)throw new RangeError("Invalid language tag: ".concat(g));if(g.startsWith("pt-PT"))return"pt-PT";var C=g.match(/.+?(?=[-_])/);return C?C[0]:g}function L1(g){if("function"==typeof g){var C=Qu(g.name);return{isDefault:!1,id:un(C),lc:C,locale:g.name,getPlural:g,cardinals:g.cardinals||[],ordinals:g.ordinals||[]}}var I=Qu(g),A=un(I);return function hf(g){return g in Ju}(A)?{isDefault:!0,id:A,lc:I,locale:g,getCardinal:gi[A],getPlural:Ju[A],cardinals:tm[A].cardinal,ordinals:tm[A].ordinal}:null}function uf(g){return un(Qu(g))in Ju}var rv=function(){function g(C,I){if(this.plurals=[],this.options=Object.assign({biDiSupport:!1,currency:"USD",customFormatters:{},localeCodeFromKey:null,requireAllArguments:!1,returnType:"string",strict:I&&I.strictNumberSign||!1,strictPluralKeys:!0},I),"*"===C?this.plurals=function nv(g){var C=Object.keys(Ju).filter(function(I){return I!==g});return C.unshift(g),C.map(L1)}(g.defaultLocale):Array.isArray(C)?this.plurals=C.map(L1).filter(Boolean):C&&(A=L1(C))&&(this.plurals=[A]),0===this.plurals.length){var A=L1(g.defaultLocale);this.plurals=[A]}}return g.escape=function(C,I){var A=I?/[#{}]/g:/[{}]/g;return String(C).replace(A,"'$&'")},g.supportedLocalesOf=function(C){return(Array.isArray(C)?C:[C]).filter(uf)},g.prototype.resolvedOptions=function(){return ot(ot({},this.options),{locale:this.plurals[0].locale,plurals:this.plurals})},g.prototype.compile=function(C){var I,A,_=new Yi(this.options),E="return "+_.compile(C,this.plurals[0]),G=[],se=[];try{for(var Le=xe(Object.entries(_.runtime)),wt=Le.next();!wt.done;wt=Le.next()){var ln=le(wt.value,2),Bn=ln[1];G.push(ln[0]),se.push(Bn)}}catch(Lr){I={error:Lr}}finally{try{wt&&!wt.done&&(A=Le.return)&&A.call(Le)}finally{if(I)throw I.error}}return(new(Function.bind.apply(Function,st(st([void 0],le(G),!1),[E],!1)))).apply(void 0,st([],le(se),!1))},g.defaultLocale="en",g}();return rv}()},974:En=>{const ot={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",bookmark:"http://www.w3.org/2002/01/bookmark#",cal:"http://www.w3.org/2002/12/cal/ical#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",gr:"http://purl.org/goodrelations/v1#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",pto:"http://www.productontology.org/id/",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#"};En.exports=function xe(le={namedNode:st=>st}){const st={};for(const qe in ot){const ut=ot[qe];st[qe]=function(je=""){return le.namedNode(ut+je)}}return st}},1382:(En,ot,xe)=>{"use strict";let le;function st(){return le}function qe(t){const e=le;return le=t,e}const je=Symbol("NotFound");function fe(t){return t===je||"\u0275NotFound"===t?.name}Error;let f=null,De=!1,Xe=1;const Se=Symbol("SIGNAL");function $(t){const e=f;return f=t,e}const yt={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Q(t){if(De)throw new Error("");if(null===f)return;f.consumerOnSignalRead(t);const e=f.producersTail;if(void 0!==e&&e.producer===t)return;let n;const r=f.recomputing;if(r&&(n=void 0!==e?e.nextProducer:f.producers,void 0!==n&&n.producer===t))return f.producersTail=n,void(n.lastReadVersion=t.version);const s=t.consumersTail;if(void 0!==s&&s.consumer===f&&(!r||function U(t,e){const n=e.producersTail;if(void 0!==n){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(void 0!==r)}return!1}(s,f)))return;const i=kt(f),o={producer:t,consumer:f,nextProducer:n,prevConsumer:s,lastReadVersion:t.version,nextConsumer:void 0};f.producersTail=o,void 0!==e?e.nextProducer=o:f.producers=o,i&&Ne(t,o)}function ye(t){if((!kt(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Xe)){if(!t.producerMustRecompute(t)&&!$t(t))return void mt(t);t.producerRecomputeValue(t),mt(t)}}function Ee(t){if(void 0===t.consumers)return;const e=De;De=!0;try{for(let n=t.consumers;void 0!==n;n=n.nextConsumer){const r=n.consumer;r.dirty||xt(r)}}finally{De=e}}function tt(){return!1!==f?.consumerAllowSignalWrites}function xt(t){t.dirty=!0,Ee(t),t.consumerMarkedDirty?.(t)}function mt(t){t.dirty=!1,t.lastCleanEpoch=Xe}function Nt(t){return t&&function Be(t){t.producersTail=void 0,t.recomputing=!0}(t),$(t)}function Ze(t,e){$(e),t&&function Ye(t){t.recomputing=!1;const e=t.producersTail;let n=void 0!==e?e.nextProducer:t.producers;if(void 0!==n){if(kt(t))do{n=vt(n)}while(void 0!==n);void 0!==e?e.nextProducer=void 0:t.producers=void 0}}(t)}function $t(t){for(let e=t.producers;void 0!==e;e=e.nextProducer){const n=e.producer,r=e.lastReadVersion;if(r!==n.version||(ye(n),r!==n.version))return!0}return!1}function te(t){if(kt(t)){let e=t.producers;for(;void 0!==e;)e=vt(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Ne(t,e){const n=t.consumersTail,r=kt(t);if(void 0!==n?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let s=t.producers;void 0!==s;s=s.nextProducer)Ne(s.producer,s)}function vt(t){const e=t.producer,n=t.nextProducer,r=t.nextConsumer,s=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,void 0!==r?r.prevConsumer=s:e.consumersTail=s,void 0!==s)s.nextConsumer=r;else if(e.consumers=r,!kt(e)){let i=e.producers;for(;void 0!==i;)i=vt(i)}return n}function kt(t){return t.consumerIsAlwaysLive||void 0!==t.consumers}function Ve(t,e){return Object.is(t,e)}const et=Symbol("UNSET"),sn=Symbol("COMPUTING"),jt=Symbol("ERRORED"),fn={...yt,value:et,dirty:!0,error:null,equal:Ve,kind:"computed",producerMustRecompute:t=>t.value===et||t.value===sn,producerRecomputeValue(t){if(t.value===sn)throw new Error("");const e=t.value;t.value=sn;const n=Nt(t);let r,s=!1;try{r=t.computation(),$(null),s=e!==et&&e!==jt&&r!==jt&&t.equal(e,r)}catch(i){r=jt,t.error=i}finally{Ze(t,n)}s?t.value=e:(t.value=r,t.version++)}};let _s=function jr(){throw new Error};function Fn(t){_s(t)}function Vi(t,e){const n=Object.create(St);n.value=t,void 0!==e&&(n.equal=e);const r=()=>function zn(t){return Q(t),t.value}(n);return r[Se]=n,[r,o=>k(n,o),o=>function ce(t,e){tt()||Fn(t),k(t,e(t.value))}(n,o)]}function k(t,e){tt()||Fn(t),t.equal(t.value,e)||(t.value=e,function cn(t){t.version++,function we(){Xe++}(),Ee(t)}(t))}const St={...yt,equal:Ve,value:void 0,kind:"signal"};function Jt(t){return"function"==typeof t}function er(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const nn=er(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,s)=>`${s+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Kt(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class gn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const i of n)i.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Jt(r))try{r()}catch(i){e=i instanceof nn?i.errors:[i]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const i of s)try{hs(i)}catch(o){e=e??[],o instanceof nn?e=[...e,...o.errors]:e.push(o)}}if(e)throw new nn(e)}}add(e){var n;if(e&&e!==this)if(this.closed)hs(e);else{if(e instanceof gn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Kt(n,e)}remove(e){const{_finalizers:n}=this;n&&Kt(n,e),e instanceof gn&&e._removeParent(this)}}gn.EMPTY=(()=>{const t=new gn;return t.closed=!0,t})();const Tn=gn.EMPTY;function Mr(t){return t instanceof gn||t&&"closed"in t&&Jt(t.remove)&&Jt(t.add)&&Jt(t.unsubscribe)}function hs(t){Jt(t)?t():t.unsubscribe()}const R={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},b={setTimeout(t,e,...n){const{delegate:r}=b;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=b;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function x(t){b.setTimeout(()=>{const{onUnhandledError:e}=R;if(!e)throw t;e(t)})}function O(){}const ne=Yt("C",void 0,void 0);function Yt(t,e,n){return{kind:t,value:e,error:n}}let Kn=null;function or(t){if(R.useDeprecatedSynchronousErrorHandling){const e=!Kn;if(e&&(Kn={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Kn;if(Kn=null,n)throw r}}else t()}class pe extends gn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Mr(e)&&e.add(this)):this.destination=zr}static create(e,n,r){return new Cn(e,n,r)}next(e){this.isStopped?dr(function Oe(t){return Yt("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?dr(function _e(t){return Yt("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dr(ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qe=Function.prototype.bind;function lt(t,e){return Qe.call(t,e)}class tn{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){rr(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){rr(r)}else rr(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){rr(n)}}}class Cn extends pe{constructor(e,n,r){let s;if(super(),Jt(e)||!e)s={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&R.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),s={next:e.next&&lt(e.next,i),error:e.error&&lt(e.error,i),complete:e.complete&&lt(e.complete,i)}):s=e}this.destination=new tn(s)}}function rr(t){R.useDeprecatedSynchronousErrorHandling?function ee(t){R.useDeprecatedSynchronousErrorHandling&&Kn&&(Kn.errorThrown=!0,Kn.error=t)}(t):x(t)}function dr(t,e){const{onStoppedNotification:n}=R;n&&b.setTimeout(()=>n(t,e))}const zr={closed:!0,next:O,error:function Gr(t){throw t},complete:O},Fs="function"==typeof Symbol&&Symbol.observable||"@@observable";function di(t){return t}let Br=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,s){const i=function L(t){return t&&t instanceof pe||function oc(t){return t&&Jt(t.next)&&Jt(t.error)&&Jt(t.complete)}(t)&&Mr(t)}(n)?n:new Cn(n,r,s);return or(()=>{const{operator:o,source:a}=this;i.add(o?o.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Ua(r))((s,i)=>{const o=new Cn({next:a=>{try{n(a)}catch(l){i(l),o.unsubscribe()}},error:i,complete:s});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Fs](){return this}pipe(...n){return function xo(t){return 0===t.length?di:1===t.length?t[0]:function(n){return t.reduce((r,s)=>s(r),n)}}(n)(this)}toPromise(n){return new(n=Ua(n))((r,s)=>{let i;this.subscribe(o=>i=o,o=>s(o),()=>r(i))})}}return t.create=e=>new t(e),t})();function Ua(t){var e;return null!==(e=t??R.Promise)&&void 0!==e?e:Promise}const N=er(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let X=(()=>{class t extends Br{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Ie(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new N}next(n){or(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){or(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){or(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:s,observers:i}=this;return r||s?Tn:(this.currentObservers=null,i.push(n),new gn(()=>{this.currentObservers=null,Kt(i,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:s,isStopped:i}=this;r?n.error(s):i&&n.complete()}asObservable(){const n=new Br;return n.source=this,n}}return t.create=(e,n)=>new Ie(e,n),t})();class Ie extends X{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Tn}}class It extends X{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}class Te extends Error{code;constructor(e,n){super(function Ps(t,e){return`${function Vr(t){return`NG0${Math.abs(t)}`}(t)}${e?": "+e:""}`}(e,n)),this.code=e}}const wr=globalThis;function Pn(t){for(let e in t)if(t[e]===Pn)return e;throw Error("")}function ct(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function kn(t){if("string"==typeof t)return t;if(Array.isArray(t))return`[${t.map(kn).join(", ")}]`;if(null==t)return""+t;const e=t.overriddenName||t.name;if(e)return`${e}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return r>=0?n.slice(0,r):n}function Js(t,e){return t?e?`${t} ${e}`:t:e||""}const tr=Pn({__forward_ref__:Pn});function nr(t){return t.__forward_ref__=nr,t.toString=function(){return kn(this())},t}function Sn(t){return r1(t)?t():t}function r1(t){return"function"==typeof t&&t.hasOwnProperty(tr)&&t.__forward_ref__===nr}function Mt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Oo(t){return{providers:t.providers||[],imports:t.imports||[]}}function qi(t){return function a1(t,e){return t.hasOwnProperty(e)&&t[e]||null}(t,lc)}function ac(t){return t&&t.hasOwnProperty(l1)?t[l1]:null}const lc=Pn({\u0275prov:Pn}),l1=Pn({\u0275inj:Pn});class at{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Mt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function _u(t){return t&&!!t.\u0275providers}const xu=Pn({\u0275cmp:Pn}),gh=Pn({\u0275dir:Pn}),cp=Pn({\u0275pipe:Pn}),mh=Pn({\u0275mod:Pn}),wa=Pn({\u0275fac:Pn}),cc=Pn({__NG_ELEMENT_ID__:Pn}),vh=Pn({__NG_ENV_ID__:Pn});function Hn(t){return"string"==typeof t?t:null==t?"":String(t)}const Su=Pn({ngErrorCode:Pn}),Ch=Pn({ngErrorMessage:Pn}),uc=Pn({ngTokenPath:Pn});function Hu(t,e){return yh("",-200,e)}function Mu(t,e){throw new Te(-201,!1)}function yh(t,e,n){const r=new Te(e,t);return r[Su]=e,r[Ch]=t,n&&(r[uc]=n),r}let zu;function Ih(){return zu}function Pi(t){const e=zu;return zu=t,e}function Ah(t,e,n){const r=qi(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:8&n?null:void 0!==e?e:void Mu()}const Xa={};class fp{injector;constructor(e){this.injector=e}retrieve(e,n){const r=hc(n)||0;try{return this.injector.get(e,8&r?null:Xa,r)}catch(s){if(fe(s))return s;throw s}}}function gp(t,e=0){const n=st();if(void 0===n)throw new Te(-203,!1);if(null===n)return Ah(t,void 0,e);{const r=function mp(t){return{optional:!!(8&t),host:!!(1&t),self:!!(2&t),skipSelf:!!(4&t)}}(e),s=n.retrieve(t,r);if(fe(s)){if(r.optional)return null;throw s}return s}}function mn(t,e=0){return(Ih()||gp)(Sn(t),e)}function ae(t,e){return mn(t,hc(e))}function hc(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Vu(t){const e=[];for(let n=0;n<t.length;n++){const r=Sn(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Te(900,!1);let s,i=0;for(let o=0;o<r.length;o++){const a=r[o],l=w(a);"number"==typeof l?-1===l?s=a.token:i|=l:s=a}e.push(mn(s,i))}else e.push(mn(r))}return e}function w(t){return t.__NG_DI_FLAG__}function At(t,e){return t.hasOwnProperty(wa)?t[wa]:null}function Ca(t,e){t.forEach(n=>Array.isArray(n)?Ca(n,e):e(n))}function ve(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ya(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function zl(t,e,n){let r=Cr(t,e);return r>=0?t[1|r]=n:(r=~r,function wp(t,e,n,r){let s=t.length;if(s==e)t.push(n,r);else if(1===s)t.push(r,t[0]),t[0]=n;else{for(s--,t.push(t[s-1],t[s]);s>e;)t[s]=t[s-2],s--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Ln(t,e){const n=Cr(t,e);if(n>=0)return t[1|n]}function Cr(t,e){return function n3(t,e,n){let r=0,s=t.length>>n;for(;s!==r;){const i=r+(s-r>>1),o=t[i<<n];if(e===o)return i<<n;o>e?s=i:r=i+1}return~(s<<n)}(t,e,1)}const Go={},Ur=[],ya=new at(""),Vl=new at("",-1),me=new at("");class d1{get(e,n=Xa){if(n===Xa){const s=yh("",-201);throw s.name="\u0275NotFound",s}return n}}function Er(t){return t[xu]||null}function Ti(t){return t[gh]||null}function bt(t){return t[cp]||null}function fc(t){return{\u0275providers:t}}function Ip(...t){return{\u0275providers:Tu(0,t),\u0275fromNgModule:!0}}function Tu(t,...e){const n=[],r=new Set;let s;const i=o=>{n.push(o)};return Ca(e,o=>{const a=o;El(a,i,[],r)&&(s||=[],s.push(a))}),void 0!==s&&_h(s,i),n}function _h(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:s}=t[n];gc(s,i=>{e(i,r)})}}function El(t,e,n,r){if(!(t=Sn(t)))return!1;let s=null,i=ac(t);const o=!i&&Er(t);if(i||o){if(o&&!o.standalone)return!1;s=t}else{const l=t.ngModule;if(i=ac(l),!i)return!1;s=l}const a=r.has(s);if(o){if(a)return!1;if(r.add(s),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)El(c,e,n,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let c;r.add(s);try{Ca(i.imports,u=>{El(u,e,n,r)&&(c||=[],c.push(u))})}finally{}void 0!==c&&_h(c,e)}if(!a){const c=At(s)||(()=>new s);e({provide:s,useFactory:c,deps:Ur},s),e({provide:me,useValue:s,multi:!0},s),e({provide:ya,useValue:()=>mn(s),multi:!0},s)}const l=i.providers;if(null!=l&&!a){const c=t;gc(l,u=>{e(u,c)})}}}return s!==t&&void 0!==t.providers}function gc(t,e){for(let n of t)_u(n)&&(n=n.\u0275providers),Array.isArray(n)?gc(n,e):e(n)}const Ap=Pn({provide:String,useValue:Pn});function Lu(t){return null!==t&&"object"==typeof t&&Ap in t}function Wo(t){return"function"==typeof t}const Du=new at(""),f1={},Hh={};let mc;function Ll(){return void 0===mc&&(mc=new d1),mc}class Ji{}class Ia extends Ji{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,s){super(),this.parent=n,this.source=r,this.scopes=s,wc(e,o=>this.processProvider(o)),this.records.set(Vl,Rl(void 0,this)),s.has("environment")&&this.records.set(Ji,Rl(void 0,this));const i=this.records.get(Du);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(me,Ur,{self:!0}))}retrieve(e,n){const r=hc(n)||0;try{return this.get(e,Xa,r)}catch(s){if(fe(s))return s;throw s}}destroy(){vc(this),this._destroyed=!0;const e=$(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),$(e)}}onDestroy(e){return vc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){vc(this);const n=qe(this),r=Pi(void 0);try{return e()}finally{qe(n),Pi(r)}}get(e,n=Xa,r){if(vc(this),e.hasOwnProperty(vh))return e[vh](this);const s=hc(r),o=qe(this),a=Pi(void 0);try{if(!(4&s)){let c=this.records.get(e);if(void 0===c){const u=function xp(t){return"function"==typeof t||"object"==typeof t&&"InjectionToken"===t.ngMetadataName}(e)&&qi(e);c=u&&this.injectableDefInScope(u)?Rl(Ka(e),f1):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c,s)}return(2&s?Ll():this.parent).get(e,n=8&s&&n===Xa?null:n)}catch(l){const c=function dp(t){return t[Su]}(l);throw-200===c||-201===c?new Te(c,null):l}finally{Pi(a),qe(o)}}resolveInjectorInitializers(){const e=$(null),n=qe(this),r=Pi(void 0);try{const i=this.get(ya,Ur,{self:!0});for(const o of i)o()}finally{qe(n),Pi(r),$(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(kn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){let n=Wo(e=Sn(e))?e:Sn(e&&e.provide);const r=function zh(t){return Lu(t)?Rl(void 0,t.useValue):Rl(Vh(t),f1)}(e);if(!Wo(e)&&!0===e.multi){let s=this.records.get(n);s||(s=Rl(void 0,f1,!0),s.factory=()=>Vu(s.multi),this.records.set(n,s)),n=e,s.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){const s=$(null);try{if(n.value===Hh)throw Hu(kn(e));return n.value===f1&&(n.value=Hh,n.value=n.factory(void 0,r)),"object"==typeof n.value&&n.value&&function _p(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{$(s)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Sn(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Ka(t){const e=qi(t),n=null!==e?e.factory:At(t);if(null!==n)return n;if(t instanceof at)throw new Te(204,!1);if(t instanceof Function)return function Mh(t){if(t.length>0)throw new Te(204,!1);const n=function ph(t){return(t?.[lc]??null)||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Te(204,!1)}function Vh(t,e,n){let r;if(Wo(t)){const s=Sn(t);return At(s)||Ka(s)}if(Lu(t))r=()=>Sn(t.useValue);else if(function Sh(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Vu(t.deps||[]));else if(function Tl(t){return!(!t||!t.useExisting)}(t))r=(s,i)=>mn(Sn(t.useExisting),void 0!==i&&8&i?8:void 0);else{const s=Sn(t&&(t.useClass||t.provide));if(!function bp(t){return!!t.deps}(t))return At(s)||Ka(s);r=()=>new s(...Vu(t.deps))}return r}function vc(t){if(t.destroyed)throw new Te(205,!1)}function Rl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function wc(t,e){for(const n of t)Array.isArray(n)?wc(n,e):n&&_u(n)?wc(n.\u0275providers,e):e(n)}function g1(t,e){let n;t instanceof Ia?(vc(t),n=t):n=new fp(t);const s=qe(n),i=Pi(void 0);try{return e()}finally{qe(s),Pi(i)}}function Bu(){return void 0!==Ih()||null!=st()}const v=18,B=21,Y=23,K=24,Z=25;function Gs(t){return Array.isArray(t)&&"object"==typeof t[1]}function Qi(t){return Array.isArray(t)&&!0===t[1]}function s3(t){return!!(4&t.flags)}function Qa(t){return t.componentOffset>-1}function w1(t){return!(1&~t.flags)}function Mo(t){return!!t.template}function Dl(t){return!!(512&t[2])}function el(t){return!(256&~t[2])}function gi(t){for(;Array.isArray(t);)t=t[0];return t}function Vt(t,e){return gi(e[t])}function Gn(t,e){return gi(e[t.index])}function On(t,e){return t.data[e]}function We(t,e){return t[e]}function Xs(t,e){const n=e[t];return Gs(n)?n:n[0]}function zo(t){return!(128&~t[2])}function Oi(t,e){return null==e?null:t[e]}function u3(t){t[17]=0}function h3(t){1024&t[2]||(t[2]|=1024,zo(t)&&C1(t))}function Lh(t){return!!(9216&t[2]||t[K]?.dirty)}function Sp(t){t[10].changeDetectionScheduler?.notify(8),64&t[2]&&(t[2]|=1024),Lh(t)&&C1(t)}function C1(t){t[10].changeDetectionScheduler?.notify(0);let e=tl(t);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,zo(e));)e=tl(e)}function Rh(t,e){if(el(t))throw new Te(911,!1);null===t[B]&&(t[B]=[]),t[B].push(e)}function tl(t){const e=t[3];return Qi(e)?e[3]:e}function p3(t){return t[7]??=[]}function f3(t){return t.cleanup??=[]}const Vn={lFrame:z3(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let zp=!1;function g3(){Vn.lFrame.elementDepthCount--}function Vp(){return Vn.bindingsEnabled}function m3(){return null!==Vn.skipHydrationRootTNode}function v3(t){return Vn.skipHydrationRootTNode===t}function w3(){Vn.skipHydrationRootTNode=null}function Ue(){return Vn.lFrame.lView}function Wn(){return Vn.lFrame.tView}function Fe(t){return Vn.lFrame.contextLView=t,t[8]}function Pe(t){return Vn.lFrame.contextLView=null,t}function Dn(){let t=C3();for(;null!==t&&64===t.type;)t=t.parent;return t}function C3(){return Vn.lFrame.currentTNode}function rl(t,e){const n=Vn.lFrame;n.currentTNode=t,n.isParent=e}function y3(){return Vn.lFrame.isParent}function I3(){Vn.lFrame.isParent=!1}function _3(){return zp}function Dh(t){const e=zp;return zp=t,e}function eo(){const t=Vn.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function co(){return Vn.lFrame.bindingIndex++}function il(t){const e=Vn.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function L7(t,e){const n=Vn.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ep(e)}function Ep(t){Vn.lFrame.currentDirectiveIndex=t}function Lp(){return Vn.lFrame.currentQueryIndex}function Bh(t){Vn.lFrame.currentQueryIndex=t}function D7(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[5]:null}function H3(t,e,n){if(4&n){let s=e,i=t;for(;!(s=s.parent,null!==s||1&n||(s=D7(i),null===s||(i=i[14],10&s.type))););if(null===s)return!1;e=s,t=i}const r=Vn.lFrame=M3();return r.currentTNode=e,r.lView=t,!0}function Rp(t){const e=M3(),n=t[1];Vn.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function M3(){const t=Vn.lFrame,e=null===t?null:t.child;return null===e?z3(t):e}function z3(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function V3(){const t=Vn.lFrame;return Vn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const E3=V3;function Dp(){const t=V3();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Li(){return Vn.lFrame.selectedIndex}function Cc(t){Vn.lFrame.selectedIndex=t}function _a(){const t=Vn.lFrame;return On(t.tView,t.selectedIndex)}let T3=!0;function Nh(){return T3}function Fu(t){T3=t}function L3(t,e=null,n=null,r){const s=R3(t,e,n,r);return s.resolveInjectorInitializers(),s}function R3(t,e=null,n=null,r,s=new Set){const i=[n||Ur,Ip(t)];return r=r||("object"==typeof t?void 0:kn(t)),new Ia(i,e||Ll(),r||null,s)}class uo{static THROW_IF_NOT_FOUND=Xa;static NULL=new d1;static create(e,n){if(Array.isArray(e))return L3({name:""},n,e,"");{const r=e.name??"";return L3({name:r},e.parent,e.providers,r)}}static \u0275prov=Mt({token:uo,providedIn:"any",factory:()=>mn(Vl)});static __NG_ELEMENT_ID__=-1}const ol=new at("");let xa=(()=>class t{static __NG_ELEMENT_ID__=G7;static __NG_ENV_ID__=n=>n})();class D3 extends xa{_lView;constructor(e){super(),this._lView=e}get destroyed(){return el(this._lView)}onDestroy(e){const n=this._lView;return Rh(n,e),()=>function Hp(t,e){if(null===t[B])return;const n=t[B].indexOf(e);-1!==n&&t[B].splice(n,1)}(n,e)}}function G7(){return new D3(Ue())}class I1{_console=console;handleError(e){this._console.error("ERROR",e)}}const al=new at("",{providedIn:"root",factory:()=>{const t=ae(Ji);let e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(I1),e.handleError(n))}}}),W7={provide:ya,useValue:()=>{ae(I1)},multi:!0};function yc(t,e){const[n,r,s]=Vi(t,e?.equal),i=n;return i.set=r,i.update=s,i.asReadonly=Bp.bind(i),i}function Bp(){const t=this[Se];if(void 0===t.readonlyFn){const e=()=>this();e[Se]=t,t.readonlyFn=e}return t.readonlyFn}function N3(t){return function B3(t){return"function"==typeof t&&void 0!==t[Se]}(t)&&"function"==typeof t.set}let Np=(()=>class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=j7})();function j7(){return new Np(Ue(),Dn())}class A1{}const F3=new at("",{providedIn:"root",factory:()=>!1}),P3=new at(""),k3=new at("");let Ic=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new It(!1);get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Br(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Mt({token:t,providedIn:"root",factory:()=>new t})}return t})(),Fh=(()=>{class t{internalPendingTasks=ae(Ic);scheduler=ae(A1);errorHandler=ae(al);add(){const n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){const r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=Mt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Pu(...t){}let O3=(()=>{class t{static \u0275prov=Mt({token:t,providedIn:"root",factory:()=>new U7})}return t})();class U7{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){const r=this.queues.get(e.zone);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){const n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);const r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(const[n,r]of this.queues)e||=null===n?this.flushQueue(r):n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(const r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}}let G3=null;function ku(){return G3}class X7{}function W3(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[s,i]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(s.trim()===e)return decodeURIComponent(i)}return null}class Z3{}var ei=xe(3308);function Sa(t){return e=>{if(function Hy(t){return Jt(t?.lift)}(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ha(t,e,n,r,s){return new My(t,e,n,r,s)}class My extends pe{constructor(e,n,r,s,i,o){super(e),this.onFinalize=i,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=s?function(a){try{s(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function jo(t,e){return Sa((n,r)=>{let s=0;n.subscribe(Ha(r,i=>{r.next(t.call(e,i,s++))}))})}function ul(t){return{toString:t}.toString()}class Oy{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function im(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}const Bl=(()=>{const t=()=>om;return t.ngInherit=!0,t})();function om(t){return t.type.prototype.ngOnChanges&&(t.setInput=Wy),Gy}function Gy(){const t=lm(this),e=t?.current;if(e){const n=t.previous;if(n===Go)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Wy(t,e,n,r,s){const i=this.declaredInputs[r],o=lm(t)||function Zy(t,e){return t[am]=e}(t,{previous:Go,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[i];a[i]=new Oy(c&&c.currentValue,n,l===Go),im(t,e,s,n)}const am="__ngSimpleChanges__";function lm(t){return t[am]||null}const Ac=[],Xr=function(t,e=null,n){for(let r=0;r<Ac.length;r++)(0,Ac[r])(t,e,n)};function cm(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const i=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),null!=u&&(t.destroyHooks??=[]).push(n,u)}}function Wh(t,e,n){um(t,e,3,n)}function Zh(t,e,n,r){(3&t[2])===n&&um(t,e,n,r)}function Wp(t,e){let n=t[2];(3&n)===e&&(n&=16383,n+=1,t[2]=n)}function um(t,e,n,r){const i=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&t[17]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[17]+=65536),(a<i||-1==i)&&(Yy(t,n,e,l),t[17]=(4294901760&t[17])+l+2),l++}function hm(t,e){Xr(4,t,e);const n=$(null);try{e.call(t)}finally{$(n),Xr(5,t,e)}}function Yy(t,e,n,r){const s=n[r]<0,i=n[r+1],a=t[s?-n[r]:n[r]];s?t[2]>>14<t[17]>>16&&(3&t[2])===e&&(t[2]+=16384,hm(a,i)):hm(a,i)}class ju{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,s){this.factory=e,this.name=s,this.canSeeViewProviders=n,this.injectImpl=r}}function pm(t){return 3===t||4===t||6===t}function fm(t){return 64===t.charCodeAt(0)}function z1(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const s=e[r];"number"==typeof s?n=s:0===n||gm(t,n,s,0,-1===n||2===n?e[++r]:null)}}return t}function gm(t,e,n,r,s){let i=0,o=t.length;if(-1===e)o=-1;else for(;i<t.length;){const a=t[i++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=i-1;break}}}for(;i<t.length;){const a=t[i];if("number"==typeof a)break;if(a===n)return void(null!==s&&(t[i+1]=s));i++,null!==s&&i++}-1!==o&&(t.splice(o,0,e),i=o+1),t.splice(i++,0,n),null!==s&&t.splice(i++,0,s)}function jp(t){return-1!==t}function Uu(t){return 32767&t}function $u(t,e){let n=function Qy(t){return t>>16}(t),r=e;for(;n>0;)r=r[14],n--;return r}let Up=!0;function jh(t){const e=Up;return Up=t,e}let eI=0;const Ma={};function Uh(t,e){const n=wm(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,$p(r.data,t),$p(e,null),$p(r.blueprint,null));const s=$h(t,e),i=t.injectorIndex;if(jp(s)){const o=Uu(s),a=$u(s,e),l=a[1].data;for(let c=0;c<8;c++)e[i+c]=a[o+c]|l[o+c]}return e[i+8]=s,i}function $p(t,e){t.push(0,0,0,0,0,0,0,0,e)}function wm(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function $h(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,s=e;for(;null!==s;){if(r=xm(s),null===r)return-1;if(n++,s=s[14],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Xp(t,e,n){!function tI(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(cc)&&(r=n[cc]),null==r&&(r=n[cc]=eI++);const s=255&r;e.data[t+(s>>5)]|=1<<s}(t,e,n)}function Cm(t,e,n){if(8&n||void 0!==t)return t;Mu()}function ym(t,e,n,r){if(8&n&&void 0===r&&(r=null),!(3&n)){const s=t[9],i=Pi(void 0);try{return s?s.get(e,r,8&n):Ah(e,r,8&n)}finally{Pi(i)}}return Cm(r,0,n)}function Im(t,e,n,r=0,s){if(null!==t){if(2048&e[2]&&!(2&r)){const o=function oI(t,e,n,r,s){let i=t,o=e;for(;null!==i&&null!==o&&2048&o[2]&&!Dl(o);){const a=Am(i,o,n,2|r,Ma);if(a!==Ma)return a;let l=i.parent;if(!l){const c=o[20];if(c){const u=c.get(n,Ma,r);if(u!==Ma)return u}l=xm(o),o=o[14]}i=l}return s}(t,e,n,r,Ma);if(o!==Ma)return o}const i=Am(t,e,n,r,Ma);if(i!==Ma)return i}return ym(e,n,r,s)}function Am(t,e,n,r,s){const i=function sI(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(cc)?t[cc]:void 0;return"number"==typeof e?e>=0?255&e:iI:e}(n);if("function"==typeof i){if(!H3(e,t,r))return 1&r?Cm(s,0,r):ym(e,n,r,s);try{let o;if(o=i(r),null!=o||8&r)return o;Mu()}finally{E3()}}else if("number"==typeof i){let o=null,a=wm(t,e),l=-1,c=1&r?e[15][5]:null;for((-1===a||4&r)&&(l=-1===a?$h(t,e):e[a+8],-1!==l&&_m(r,!1)?(o=e[1],a=Uu(l),e=$u(l,e)):a=-1);-1!==a;){const u=e[1];if(bm(i,a,u.data)){const h=rI(a,e,n,o,r,c);if(h!==Ma)return h}l=e[a+8],-1!==l&&_m(r,e[1].data[a+8]===c)&&bm(i,a,e)?(o=u,a=Uu(l),e=$u(l,e)):a=-1}}return s}function rI(t,e,n,r,s,i){const o=e[1],a=o.data[t+8],u=Xh(a,o,n,null==r?Qa(a)&&Up:r!=o&&!!(3&a.type),1&s&&i===a);return null!==u?Xu(e,o,u,a,s):Ma}function Xh(t,e,n,r,s){const i=t.providerIndexes,o=e.data,a=1048575&i,l=t.directiveStart,u=i>>20,d=s?a+u:t.directiveEnd;for(let p=r?a:a+u;p<d;p++){const m=o[p];if(p<l&&n===m||p>=l&&m.type===n)return p}if(s){const p=o[l];if(p&&Mo(p)&&p.type===n)return l}return null}function Xu(t,e,n,r,s){let i=t[n];const o=e.data;if(i instanceof ju){const a=i;if(a.resolving)throw function pr(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Hn(t)}(o[n]),Hu();const l=jh(a.canSeeViewProviders);a.resolving=!0;const h=a.injectImpl?Pi(a.injectImpl):null;H3(t,r,0);try{i=t[n]=a.factory(void 0,s,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function Xy(t,e,n){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=e.type.prototype;if(r){const o=om(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}s&&(n.preOrderHooks??=[]).push(0-t,s),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}(n,o[n],e)}finally{null!==h&&Pi(h),jh(l),a.resolving=!1,E3()}}return i}function bm(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function _m(t,e){return!(2&t||1&t&&e)}class Ys{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Im(this._tNode,this._lView,e,hc(r),n)}}function iI(){return new Ys(Dn(),Ue())}function oi(t){return ul(()=>{const e=t.prototype.constructor,n=e[wa]||Yp(e),r=Object.prototype;let s=Object.getPrototypeOf(t.prototype).constructor;for(;s&&s!==r;){const i=s[wa]||Yp(s);if(i&&i!==n)return i;s=Object.getPrototypeOf(s)}return i=>new i})}function Yp(t){return r1(t)?()=>{const e=Yp(Sn(t));return e&&e()}:At(t)}function xm(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[5]:null}function fI(){return V1(Dn(),Ue())}function V1(t,e){return new $o(Gn(t,e))}let $o=(()=>class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=fI})();function Vm(t){return t instanceof $o?t.nativeElement:t}function gI(){return this._results[Symbol.iterator]()}class mI{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new X}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;const r=function ks(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function h1(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let s=t[r],i=e[r];if(n&&(s=n(s),i=n(i)),i!==s)return!1}return!0}(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=gI}function Yu(t){return!(128&~t.flags)}var Kh=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Kh||{});const qh=new Map;let CI=0;function Qp(t){qh.delete(t[19])}const tf="__ngContext__";function po(t,e){Gs(e)?(t[tf]=e[19],function II(t){qh.set(t[19],t)}(e)):t[tf]=e}function Om(t){return Wm(t[12])}function Gm(t){return Wm(t[4])}function Wm(t){for(;null!==t&&!Qi(t);)t=t[4];return t}let nf;const qu=new at("",{providedIn:"root",factory:()=>WI}),WI="ng",Km=new at(""),rf=new at("",{providedIn:"platform",factory:()=>"unknown"}),qm=new at("",{providedIn:"root",factory:()=>function Fl(){if(void 0!==nf)return nf;if(typeof document<"u")return document;throw new Te(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),I=!1,A=new at("",{providedIn:"root",factory:()=>I});function ia(t){return!(32&~t.flags)}function nA(t,e){const n=t.contentQueries;if(null!==n){const r=$(null);try{for(let s=0;s<n.length;s+=2){const o=n[s+1];if(-1!==o){const a=t.data[o];Bh(n[s]),a.contentQueries(2,e[o],o)}}}finally{$(r)}}}function uv(t,e,n){Bh(0);const r=$(null);try{e(t,n)}finally{$(r)}}function hv(t,e,n){if(s3(e)){const r=$(null);try{const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{$(r)}}}var Ol=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ol||{});class uA{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss)`}}function Hc(t){return t instanceof uA?t.changingThisBreaksApplicationSecurity:t}const fN=/^>|^->|<!--|-->|--!>|<!-$/g,gN=/(<|>)/g;function yv(t,e){return t.createComment(function CA(t){return t.replace(fN,e=>e.replace(gN,"\u200b$1\u200b"))}(e))}function If(t,e,n){return t.createElement(e,n)}function R1(t,e,n,r,s){t.insertBefore(e,n,r,s)}function IA(t,e,n){t.appendChild(e,n)}function AA(t,e,n,r,s){null!==r?R1(t,e,n,r,s):IA(t,e,n)}function id(t,e,n,r){t.removeChild(null,e,n,r)}function _A(t,e,n){const{mergedAttrs:r,classes:s,styles:i}=n;null!==r&&function Jy(t,e,n){let r=0;for(;r<n.length;){const s=n[r];if("number"==typeof s){if(0!==s)break;r++;const i=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,i)}else{const i=s,o=n[++r];fm(i)?t.setProperty(e,i,o):t.setAttribute(e,i,o),r++}}}(t,e,r),null!==s&&function wN(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}(t,e,s),null!==i&&function vN(t,e,n){t.setAttribute(e,"style",n)}(t,e,i)}function NN(t,e,n){let r=t.length;for(;;){const s=t.indexOf(e,n);if(-1===s)return s;if(0===s||t.charCodeAt(s-1)<=32){const i=e.length;if(s+i===r||t.charCodeAt(s+i)<=32)return s}n=s+1}}const EA="ng-template";function FN(t,e,n,r){let s=0;if(r){for(;s<e.length&&"string"==typeof e[s];s+=2)if("class"===e[s]&&-1!==NN(e[s+1].toLowerCase(),n,0))return!0}else if(Iv(t))return!1;if(s=e.indexOf(1,s),s>-1){let i;for(;++s<e.length&&"string"==typeof(i=e[s]);)if(i.toLowerCase()===n)return!0}return!1}function Iv(t){return 4===t.type&&t.value!==EA}function PN(t,e,n){return e===(4!==t.type||n?t.value:EA)}function kN(t,e,n){let r=4;const s=t.attrs,i=null!==s?function WN(t){for(let e=0;e<t.length;e++)if(pm(t[e]))return e;return t.length}(s):0;let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!PN(t,l,n)||""===l&&1===e.length){if(La(r))return!1;o=!0}}else if(8&r){if(null===s||!FN(t,s,l,n)){if(La(r))return!1;o=!0}}else{const c=e[++a],u=ON(l,s,Iv(t),n);if(-1===u){if(La(r))return!1;o=!0;continue}if(""!==c){let h;if(h=u>i?"":s[u+1].toLowerCase(),2&r&&c!==h){if(La(r))return!1;o=!0}}}}else{if(!o&&!La(r)&&!La(l))return!1;if(o&&La(l))continue;o=!1,r=l|1&r}}return La(r)||o}function La(t){return!(1&t)}function ON(t,e,n,r){if(null===e)return-1;let s=0;if(r||!n){let i=!1;for(;s<e.length;){const o=e[s];if(o===t)return s;if(3===o||6===o)i=!0;else{if(1===o||2===o){let a=e[++s];for(;"string"==typeof a;)a=e[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=i?1:2}return-1}return function ZN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function TA(t,e,n=!1){for(let r=0;r<e.length;r++)if(kN(t,e[r],n))return!0;return!1}function jN(t,e){e:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let s=0;s<t.length;s++)if(t[s]!==r[s])continue e;return!0}}return!1}function LA(t,e){return t?":not("+e.trim()+")":e}function UN(t){let e=t[0],n=1,r=2,s="",i=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?s+="."+o:4&r&&(s+=" "+o);else""!==s&&!La(o)&&(e+=LA(i,s),s=""),r=o,i=i||!La(r);n++}return""!==s&&(e+=LA(i,s)),e}const Kr={};function Av(t,e,n,r,s,i,o,a,l,c,u){const h=27+r,d=h+s,p=function YN(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Kr);return n}(h,d),m="function"==typeof c?c():c;return p[1]={type:t,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:u}}function bf(t,e,n,r,s,i,o,a,l,c,u){const h=e.blueprint.slice();return h[0]=s,h[2]=1228|r,(null!==c||t&&2048&t[2])&&(h[2]|=2048),u3(h),h[3]=h[14]=t,h[8]=n,h[10]=o||t&&t[10],h[11]=a||t&&t[11],h[9]=l||t&&t[9]||null,h[5]=i,h[19]=function yI(){return CI++}(),h[6]=u,h[20]=c,h[15]=2==e.type?t[15]:h,h}function bv(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function ad(t,e,n,r){if(0===n)return-1;const s=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return s}function _v(t,e){return t[12]?t[13][4]=e:t[12]=e,t[13]=e,e}function Ht(t=1){DA(Wn(),Ue(),Li()+t,!1)}function DA(t,e,n,r){if(!r)if(3&~e[2]){const i=t.preOrderHooks;null!==i&&Zh(e,i,0,n)}else{const i=t.preOrderCheckHooks;null!==i&&Wh(e,i,n)}Cc(n)}var _f=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(_f||{});function ld(t,e,n,r){const s=$(null);try{const[i,o,a]=t.inputs[n];let l=null;0!==(o&_f.SignalBased)&&(l=e[i][Se]),null!==l&&void 0!==l.transformFn?r=l.transformFn(r):null!==a&&(r=a.call(e,r)),null!==t.setInput?t.setInput(e,l,r,n,i):im(e,l,i,r)}finally{$(s)}}var Mc=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Mc||{});function Sv(t,e){return undefined(t,e)}const D1=new Set;var Hv=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Hv||{});const cd=new at(""),PA=new Set;function no(t){PA.has(t)||(PA.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}const kA=!1,ps=class nF extends X{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Bu()&&(this.destroyRef=ae(xa,{optional:!0})??void 0,this.pendingTasks=ae(Ic,{optional:!0})??void 0)}emit(e){const n=$(null);try{super.next(e)}finally{$(n)}}subscribe(e,n,r){let s=e,i=n||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;s=l.next?.bind(l),i=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(i=this.wrapInTimeout(i),s&&(s=this.wrapInTimeout(s)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:s,error:i,complete:o});return e instanceof gn&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function OA(t){let e,n;function r(){t=Pu;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function GA(t){return queueMicrotask(()=>t()),()=>{t=Pu}}const Mv="isAngularZone",Sf=Mv+"_ID";let rF=0;class Fr{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ps(!1);onMicrotaskEmpty=new ps(!1);onStable=new ps(!1);onError=new ps(!1);constructor(e){const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:s=!1,scheduleInRootZone:i=kA}=e;if(typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!s&&r,o.shouldCoalesceRunChangeDetection=s,o.callbackScheduled=!1,o.scheduleInRootZone=i,function oF(t){const e=()=>{!function iF(t){function e(){OA(()=>{t.callbackScheduled=!1,Vv(t),t.isCheckStableRunning=!0,zv(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Vv(t))}(t)},n=rF++;t._inner=t._inner.fork({name:"angular",properties:{[Mv]:!0,[Sf]:n,[Sf+n]:!0},onInvokeTask:(r,s,i,o,a,l)=>{if(function aF(t){return jA(t,"__ignore_ng_zone__")}(l))return r.invokeTask(i,o,a,l);try{return WA(t),r.invokeTask(i,o,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),ZA(t)}},onInvoke:(r,s,i,o,a,l,c)=>{try{return WA(t),r.invoke(i,o,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function lF(t){return jA(t,"__scheduler_tick__")}(l)&&e(),ZA(t)}},onHasTask:(r,s,i,o)=>{r.hasTask(i,o),s===i&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,Vv(t),zv(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,s,i,o)=>(r.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(Mv)}static assertInAngularZone(){if(!Fr.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(Fr.isInAngularZone())throw new Te(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,s){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+s,e,sF,Pu,Pu);try{return i.runTask(o,n,r)}finally{i.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const sF={};function zv(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Vv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function WA(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ZA(t){t._nesting--,zv(t)}class Ev{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ps;onMicrotaskEmpty=new ps;onStable=new ps;onError=new ps;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,s){return e.apply(n,r)}}function jA(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}let UA=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=Mt({token:t,providedIn:"root",factory:()=>new t})}return t})();const $A=[0,1,2,3];let uF=(()=>{class t{ngZone=ae(Fr);scheduler=ae(A1);errorHandler=ae(I1,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){ae(cd,{optional:!0})}execute(){const n=this.sequences.size>0;n&&Xr(16),this.executing=!0;for(const r of $A)for(const s of this.sequences)if(!s.erroredOrDestroyed&&s.hooks[r])try{s.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>(0,s.hooks[r])(s.pipelinedValue),s.snapshot))}catch(i){s.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(const r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(const r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Xr(17)}register(n){const{view:r}=n;void 0!==r?((r[Z]??=[]).push(n),C1(r),r[2]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Hv.AFTER_NEXT_RENDER,n):n()}static \u0275prov=Mt({token:t,providedIn:"root",factory:()=>new t})}return t})();class XA{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,s,i,o=null){this.impl=e,this.hooks=n,this.view=r,this.once=s,this.snapshot=o,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();const e=this.view?.[Z];e&&(this.view[Z]=e.filter(n=>n!==this))}}function Tv(t,e){const n=e?.injector??ae(uo);return no("NgAfterNextRender"),function YA(t,e,n,r){const s=e.get(UA);s.impl??=e.get(uF);const i=e.get(cd,null,{optional:!0}),o=!0!==n?.manualCleanup?e.get(xa):null,a=e.get(Np,null,{optional:!0}),l=new XA(s.impl,function dF(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}(t),a?.view,r,o,i?.snapshot(null));return s.impl.register(l),l}(t,n,e,!0)}const Hf=new at("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function KA(t,e,n){const r=t.get(Hf);if(Array.isArray(e))for(const s of e)r.queue.add(s),n?.detachedLeaveAnimationFns?.push(s);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function qA(t,e,n,r){const s=t?.[26]?.enter;null!==e&&s&&s.has(n.index)&&function Lv(t,e){for(const[n,r]of e)KA(t,r.animateFns)}(r,s)}function o2(t,e,n,r,s,i,o,a){if(null!=s){let l,c=!1;Qi(s)?l=s:Gs(s)&&(c=!0,s=s[0]);const u=gi(s);0===t&&null!==r?(qA(a,r,i,n),null==o?IA(e,r,u):R1(e,r,u,o||null,!0)):1===t&&null!==r?(qA(a,r,i,n),R1(e,r,u,o||null,!0)):2===t?eb(a,i,n,h=>{id(e,u,c,h)}):3===t&&eb(a,i,n,()=>{e.destroyNode(u)}),null!=l&&function IF(t,e,n,r,s,i,o){const a=r[7];a!==gi(r)&&o2(e,t,n,i,a,s,o);for(let c=10;c<r.length;c++){const u=r[c];Vf(u[1],u,t,e,i,a)}}(e,t,n,l,i,r,o)}}function QA(t,e){e[10].changeDetectionScheduler?.notify(9),Vf(t,e,e[11],2,null,null)}function Rv(t,e){const n=t[9],r=n.indexOf(e);n.splice(r,1)}function ud(t,e){if(el(e))return;const n=e[11];n.destroyNode&&Vf(t,e,n,3,null,null),function mF(t){let e=t[12];if(!e)return Dv(t[1],t);for(;e;){let n=null;if(Gs(e))n=e[12];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Gs(e)&&Dv(e[1],e),e=e[3];null===e&&(e=t),Gs(e)&&Dv(e[1],e),n=e&&e[4]}e=n}}(e)}function Dv(t,e){if(el(e))return;const n=$(null);try{e[2]&=-129,e[2]|=256,e[K]&&te(e[K]),function CF(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const s=e[n[r]];if(!(s instanceof ju)){const i=n[r+1];if(Array.isArray(i))for(let o=0;o<i.length;o+=2){const a=s[i[o]],l=i[o+1];Xr(4,a,l);try{l.call(a)}finally{Xr(5,a,l)}}else{Xr(4,s,i);try{i.call(s)}finally{Xr(5,s,i)}}}}}(t,e),function wF(t,e){const n=t.cleanup,r=e[7];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const a=n[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(e[7]=null);const s=e[B];if(null!==s){e[B]=null;for(let o=0;o<s.length;o++)(0,s[o])()}const i=e[Y];if(null!==i){e[Y]=null;for(const o of i)o.destroy()}}(t,e),1===e[1].type&&e[11].destroy();const r=e[16];if(null!==r&&Qi(e[3])){r!==e[3]&&Rv(r,e);const s=e[v];null!==s&&s.detachView(t)}Qp(e)}finally{$(n)}}function eb(t,e,n,r){const s=t?.[26];if(null==s||null==s.leave||!s.leave.has(e.index))return r(!1);t&&D1.add(t),KA(n,()=>{if(s.leave&&s.leave.has(e.index)){const o=s.leave.get(e.index),a=[];if(o){for(let l=0;l<o.animateFns.length;l++){const c=o.animateFns[l],{promise:u}=c();a.push(u)}s.detachedLeaveAnimationFns=void 0}s.running=Promise.allSettled(a),function vF(t,e){const n=t[26]?.running;n?n.then(()=>{t[26].running=void 0,D1.delete(t),e(!0)}):e(!1)}(t,r)}else t&&D1.delete(t),r(!1)},s)}function Bv(t,e,n){return function tb(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[0];if(Qa(r)){const{encapsulation:s}=t.data[r.directiveStart+r.componentOffset];if(s===Ol.None||s===Ol.Emulated)return null}return Gn(r,n)}(t,e.parent,n)}function nb(t,e,n){return sb(t,e,n)}let sb=function rb(t,e,n){return 40&t.type?Gn(t,n):null};function Fv(t,e,n,r){const s=Bv(t,r,e),i=e[11],a=nb(r.parent||e[5],r,e);if(null!=s)if(Array.isArray(n))for(let l=0;l<n.length;l++)AA(i,s,n[l],a,!1);else AA(i,s,n,a,!1)}function B1(t,e){if(null!==e){const n=e.type;if(3&n)return Gn(e,t);if(4&n)return zf(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return B1(t,r);{const s=t[e.index];return Qi(s)?zf(-1,s):gi(s)}}if(128&n)return B1(t,e.next);if(32&n)return Sv(e,t)()||gi(t[e.index]);{const r=ob(t,e);return null!==r?Array.isArray(r)?r[0]:B1(tl(t[15]),r):B1(t,e.next)}}return null}function ob(t,e){return null!==e?t[15][5].projection[e.projection]:null}function zf(t,e){const n=10+t+1;if(n<e.length){const r=e[n],s=r[1].firstChild;if(null!==s)return B1(r,s)}return e[7]}function Pv(t,e,n,r,s,i,o){for(;null!=n;){const a=r[9];if(128===n.type){n=n.next;continue}const l=r[n.index],c=n.type;if(o&&0===e&&(l&&po(gi(l),r),n.flags|=2),!ia(n))if(8&c)Pv(t,e,n.child,r,s,i,!1),o2(e,t,a,s,l,n,i,r);else if(32&c){const u=Sv(n,r);let h;for(;h=u();)o2(e,t,a,s,h,n,i,r);o2(e,t,a,s,l,n,i,r)}else 16&c?ab(t,e,r,n,s,i):o2(e,t,a,s,l,n,i,r);n=o?n.projectionNext:n.next}}function Vf(t,e,n,r,s,i){Pv(n,r,t.firstChild,e,s,i,!1)}function ab(t,e,n,r,s,i){const o=n[15],l=o[5].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)o2(e,t,n[9],s,l[c],r,i,n);else{let c=l;const u=o[3];Yu(r)&&(c.flags|=128),Pv(t,e,c,u,s,i,!0)}}function lb(t,e,n,r,s){const i=Li(),o=2&r;try{Cc(-1),o&&e.length>27&&DA(t,e,27,!1),Xr(o?2:0,s,n),n(r,s)}finally{Cc(i),Xr(o?3:1,s,n)}}function Ef(t,e,n){(function HF(t,e,n){const r=n.directiveStart,s=n.directiveEnd;Qa(n)&&function KN(t,e,n){const r=Gn(e,t),s=function RA(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Av(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}(n),i=t[10].rendererFactory,o=_v(t,bf(t,s,null,bv(n),r,e,null,i.createRenderer(r,n),null,null,null));t[e.index]=o}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Uh(n,e);const i=n.initialInputs;for(let o=r;o<s;o++){const a=t.data[o],l=Xu(e,t,o,n);po(l,e),null!==i&&EF(0,o-r,l,a,0,i),Mo(a)&&(Xs(n.index,e)[8]=Xu(e,t,o,n))}})(t,e,n),!(64&~n.flags)&&function MF(t,e,n){const r=n.directiveStart,s=n.directiveEnd,i=n.index,o=function R7(){return Vn.lFrame.currentDirectiveIndex}();try{Cc(i);for(let a=r;a<s;a++){const l=t.data[a],c=e[a];Ep(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&zF(l,c)}}finally{Cc(-1),Ep(o)}}(t,e,n)}function a2(t,e,n=Gn){const r=e.localNames;if(null!==r){let s=e.index+1;for(let i=0;i<r.length;i+=2){const o=r[i+1],a=-1===o?n(e,t):t[o];t[s++]=a}}}let cb=()=>null;function kv(t,e,n,r,s,i){Df(t,e[1],e,n,r)?Qa(t)&&function ub(t,e){const n=Xs(e,t);16&n[2]||(n[2]|=64)}(e,t.index):(3&t.type&&(n=function SF(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n)),Ov(t,e,n,r,s,i))}function Ov(t,e,n,r,s,i){if(3&t.type){const o=Gn(t,e);r=null!=i?i(r,t.value||"",n):r,s.setProperty(o,n,r)}}function zF(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Gv(t,e){const n=t.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const i=n[s];TA(e,i.selectors,!1)&&(r??=[],Mo(i)?r.unshift(i):r.push(i))}return r}function EF(t,e,n,r,s,i){const o=i[e];if(null!==o)for(let a=0;a<o.length;a+=2)ld(r,n,o[a],o[a+1])}function Lf(t,e,n,r,s){const i=27+n,o=e[1],a=s(o,e,t,r,n);e[i]=a,rl(t,!0);const l=2===t.type;return l?(_A(e[11],a,t),(0===function M7(){return Vn.lFrame.elementDepthCount}()||w1(t))&&po(a,e),function z7(){Vn.lFrame.elementDepthCount++}()):po(a,e),Nh()&&(!l||!ia(t))&&Fv(o,e,a,t),t}function Rf(t){let e=t;return y3()?I3():(e=e.parent,rl(e,!1)),e}function Df(t,e,n,r,s){const i=t.inputs?.[r],o=t.hostDirectiveInputs?.[r];let a=!1;if(o)for(let l=0;l<o.length;l+=2){const c=o[l];ld(e.data[c],n[c],o[l+1],s),a=!0}if(i)for(const l of i)ld(e.data[l],n[l],r,s),a=!0;return a}function LF(t,e){const n=Xs(e,t),r=n[1];!function RF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const s=n[0];null!==s&&null===n[6]&&(n[6]=null),Xr(18),Bf(r,n,n[8]),Xr(19,n[8])}function Bf(t,e,n){Rp(e);try{const r=t.viewQuery;null!==r&&uv(1,r,n);const s=t.template;null!==s&&lb(t,e,s,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[v]?.finishViewCreation(t),t.staticContentQueries&&nA(t,e),t.staticViewQueries&&uv(2,t.viewQuery,n);const i=t.components;null!==i&&function DF(t,e){for(let n=0;n<e.length;n++)LF(t,e[n])}(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,Dp()}}function l2(t,e,n,r){const s=$(null);try{const i=e.tView,l=bf(t,i,n,4096&t[2]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);l[16]=t[e.index];const u=t[v];return null!==u&&(l[v]=u.createEmbeddedView(i)),Bf(i,l,n),l}finally{$(s)}}function N1(t,e){return!e||null===e.firstChild||Yu(t)}function hd(t,e,n,r,s=!1){for(;null!==n;){if(128===n.type){n=s?n.projectionNext:n.next;continue}const i=e[n.index];null!==i&&r.push(gi(i)),Qi(i)&&BF(i,r);const o=n.type;if(8&o)hd(t,e,n.child,r);else if(32&o){const a=Sv(n,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=ob(e,n);if(Array.isArray(a))r.push(...a);else{const l=tl(e[15]);hd(l[1],l,a,r,!0)}}n=s?n.projectionNext:n.next}return r}function BF(t,e){for(let n=10;n<t.length;n++){const r=t[n],s=r[1].firstChild;null!==s&&hd(r[1],r,s,e)}t[7]!==t[0]&&e.push(t[7])}function pb(t){if(null!==t[Z]){for(const e of t[Z])e.impl.addSequence(e);t[Z].length=0}}let fb=[];const kF={...yt,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{C1(t.lView)},consumerOnSignalRead(){this.lView[K]=this}},GF={...yt,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=tl(t.lView);for(;e&&!gb(e[1]);)e=tl(e);e&&h3(e)},consumerOnSignalRead(){this.lView[K]=this}};function gb(t){return 2!==t.type}function mb(t){if(null===t[Y])return;let e=!0;for(;e;){let n=!1;for(const r of t[Y])r.dirty&&(n=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(8192&t[2])}}function Nf(t,e=0){const r=t[10].rendererFactory;r.begin?.();try{!function ZF(t,e){const n=_3();try{Dh(!0),Zv(t,e);let r=0;for(;Lh(t);){if(100===r)throw new Te(103,!1);r++,Zv(t,1)}}finally{Dh(n)}}(t,e)}finally{r.end?.()}}function vb(t,e,n,r){if(el(e))return;const s=e[2];Rp(e);let a=!0,l=null,c=null;gb(t)?(c=function NF(t){return t[K]??function FF(t){const e=fb.pop()??Object.create(kF);return e.lView=t,e}(t)}(e),l=Nt(c)):null===function q(){return f}()?(a=!1,c=function OF(t){const e=t[K]??Object.create(GF);return e.lView=t,e}(e),l=Nt(c)):e[K]&&(te(e[K]),e[K]=null);try{u3(e),function x3(t){return Vn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&lb(t,e,n,2,r);const u=!(3&~s);if(u){const p=t.preOrderCheckHooks;null!==p&&Wh(e,p,null)}else{const p=t.preOrderHooks;null!==p&&Zh(e,p,0,null),Wp(e,0)}if(function jF(t){for(let e=Om(t);null!==e;e=Gm(e)){if(!(2&e[2]))continue;const n=e[9];for(let r=0;r<n.length;r++)h3(n[r])}}(e),mb(e),wb(e,0),null!==t.contentQueries&&nA(t,e),u){const p=t.contentCheckHooks;null!==p&&Wh(e,p)}else{const p=t.contentHooks;null!==p&&Zh(e,p,1),Wp(e,1)}!function $F(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const s=n[r];if(s<0)Cc(~s);else{const i=s,o=n[++r],a=n[++r];L7(o,i);const l=e[i];Xr(24,l),a(2,l),Xr(25,l)}}}finally{Cc(-1)}}(t,e);const h=t.components;null!==h&&yb(e,h,0);const d=t.viewQuery;if(null!==d&&uv(2,d,r),u){const p=t.viewCheckHooks;null!==p&&Wh(e,p)}else{const p=t.viewHooks;null!==p&&Zh(e,p,2),Wp(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[22]){for(const p of e[22])p();e[22]=null}pb(e),e[2]&=-73}catch(u){throw C1(e),u}finally{null!==c&&(Ze(c,l),a&&function PF(t){t.lView[K]!==t&&(t.lView=null,fb.push(t))}(c)),Dp()}}function wb(t,e){for(let n=Om(t);null!==n;n=Gm(n))for(let r=10;r<n.length;r++)Cb(n[r],e)}function UF(t,e,n){Xr(18);const r=Xs(e,t);Cb(r,n),Xr(19,r[8])}function Cb(t,e){zo(t)&&Zv(t,e)}function Zv(t,e){const r=t[1],s=t[2],i=t[K];let o=!!(0===e&&16&s);if(o||=!!(64&s&&0===e),o||=!!(1024&s),o||=!(!i?.dirty||!$t(i)),o||=!1,i&&(i.dirty=!1),t[2]&=-9217,o)vb(r,t,r.template,t[8]);else if(8192&s){const a=$(null);try{mb(t),wb(t,1);const l=r.components;null!==l&&yb(t,l,1),pb(t)}finally{$(a)}}}function yb(t,e,n){for(let r=0;r<e.length;r++)UF(t,e[r],n)}function c2(t,e){const n=_3()?64:1088;for(t[10].changeDetectionScheduler?.notify(e);t;){t[2]|=n;const r=tl(t);if(Dl(t)&&!r)return t;t=r}return null}function Ib(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Ab(t,e){const n=10+e;if(n<t.length)return t[n]}function u2(t,e,n,r=!0){const s=e[1];if(function XF(t,e,n,r){const s=10+r,i=n.length;r>0&&(n[s-1][4]=e),r<i-10?(e[4]=n[s],ve(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[16];null!==o&&n!==o&&bb(o,e);const a=e[v];null!==a&&a.insertView(t),Sp(e),e[2]|=128}(s,e,t,n),r){const o=zf(n,t),a=e[11],l=a.parentNode(t[7]);null!==l&&function gF(t,e,n,r,s,i){r[0]=s,r[5]=e,Vf(t,r,n,1,s,i)}(s,t[5],a,e,l,o)}const i=e[6];null!==i&&null!==i.firstChild&&(i.firstChild=null)}function jv(t,e){const n=dd(t,e);return void 0!==n&&ud(n[1],n),n}function dd(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const s=r[16];null!==s&&s!==t&&Rv(s,r),e>0&&(t[n-1][4]=r[4]);const i=Ya(t,10+e);!function JA(t,e){QA(t,e),e[0]=null,e[5]=null}(r[1],r);const o=i[v];null!==o&&o.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function bb(t,e){const n=t[9],r=e[3];(Gs(r)||e[15]!==r[3][15])&&(t[2]|=2),null===n?t[9]=[e]:n.push(e)}class pd{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const e=this._lView,n=e[1];return hd(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return el(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Qi(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(dd(e,r),Ya(n,r))}this._attachedToViewContainer=!1}ud(this._lView[1],this._lView)}onDestroy(e){Rh(this._lView,e)}markForCheck(){c2(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){Sp(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,Nf(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Dl(this._lView),n=this._lView[16];null!==n&&!e&&Rv(n,this._lView),QA(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=e;const n=Dl(this._lView),r=this._lView[16];null!==r&&!n&&bb(r,this._lView),Sp(this._lView)}}let Wl=(()=>class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=YF;constructor(n,r,s){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=s}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,s){const i=l2(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:s});return new pd(i)}})();function YF(){return Ff(Dn(),Ue())}function Ff(t,e){return 4&t.type?new Wl(e,t,V1(t,e)):null}function F1(t,e,n,r,s){let i=t.data[e];if(null===i)i=function Yv(t,e,n,r,s){const i=C3(),o=y3(),l=t.data[e]=function sP(t,e,n,r,s,i){let o=e?e.injectorIndex:-1,a=0;return m3()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?i:i&&i.parent,n,e,r,s);return function rP(t,e,n,r){null===t.firstChild&&(t.firstChild=e),null!==n&&(r?null==n.child&&null!==e.parent&&(n.child=e):null===n.next&&(n.next=e,e.prev=n))}(t,l,i,o),l}(t,e,n,r,s),function T7(){return Vn.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=n,i.value=r,i.attrs=s;const o=function Nu(){const t=Vn.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();i.injectorIndex=null===o?-1:o.injectorIndex}return rl(i,!0),i}function Gb(t,e){let n=0,r=t.firstChild;if(r){const s=t.data.r;for(;n<s;){const i=r.nextSibling;id(e,r,!1),r=i,n++}}}let kP=class{},Xb=class{};class OP{resolveComponentFactory(e){throw new Te(917,!1)}}let Uf=class{static NULL=new OP};class nw{}let zc=(()=>class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>function GP(){const t=Ue(),n=Xs(Dn().index,t);return(Gs(n)?n:t)[11]}()})(),WP=(()=>{class t{static \u0275prov=Mt({token:t,providedIn:"root",factory:()=>null})}return t})();const sw={};class p2{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const s=this.injector.get(e,sw,r);return s!==sw||n===sw?s:this.parentInjector.get(e,n,r)}}function Xf(t,e,n){let r=n?t.styles:null,s=n?t.classes:null,i=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?i=a:1==i?s=Js(s,a):2==i&&(r=Js(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=s:t.classesWithoutHost=s}function Et(t,e=0){const n=Ue();return null===n?mn(t,e):Im(Dn(),n,Sn(t),e)}function Kb(t,e,n,r,s){const i=null===r?null:{"":-1},o=s(t,n);if(null!==o){let a=o,l=null,c=null;for(const u of o)if(null!==u.resolveHostDirectives){[a,l,c]=u.resolveHostDirectives(o);break}!function KP(t,e,n,r,s,i,o){const a=r.length;let l=!1;for(let d=0;d<a;d++){const p=r[d];!l&&Mo(p)&&(l=!0,YP(t,n,d)),Xp(Uh(n,e),t,p.type)}!function nk(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,a);for(let d=0;d<a;d++){const p=r[d];p.providersResolver&&p.providersResolver(p)}let c=!1,u=!1,h=ad(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let d=0;d<a;d++){const p=r[d];if(n.mergedAttrs=z1(n.mergedAttrs,p.hostAttrs),JP(t,n,e,h,p),tk(h,p,s),null!==o&&o.has(p)){const[y,H]=o.get(p);n.directiveToIndex.set(p.type,[h,y+n.directiveStart,H+n.directiveStart])}else(null===i||!i.has(p))&&n.directiveToIndex.set(p.type,h);null!==p.contentQueries&&(n.flags|=4),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(n.flags|=64);const m=p.type.prototype;!c&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),c=!0),!u&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),u=!0),h++}!function qP(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){const s=t.data[r];if(null!==n&&n.has(s)){const i=n.get(s);Jb(0,e,i,r),Jb(1,e,i,r),e_(e,r,!0)}else qb(0,e,s,r),qb(1,e,s,r),e_(e,r,!1)}}(t,n,i)}(t,e,n,a,i,l,c)}null!==i&&null!==r&&function XP(t,e,n){const r=t.localNames=[];for(let s=0;s<e.length;s+=2){const i=n[e[s+1]];if(null==i)throw new Te(-301,!1);r.push(e[s],i)}}(n,r,i)}function YP(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function qb(t,e,n,r){const s=0===t?n.inputs:n.outputs;for(const i in s)if(s.hasOwnProperty(i)){let o;o=0===t?e.inputs??={}:e.outputs??={},o[i]??=[],o[i].push(r),Qb(e,i)}}function Jb(t,e,n,r){const s=0===t?n.inputs:n.outputs;for(const i in s)if(s.hasOwnProperty(i)){const o=s[i];let a;a=0===t?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,i),Qb(e,o)}}function Qb(t,e){"class"===e?t.flags|=8:"style"===e&&(t.flags|=16)}function e_(t,e,n){const{attrs:r,inputs:s,hostDirectiveInputs:i}=t;if(null===r||!n&&null===s||n&&null===i||Iv(t))return t.initialInputs??=[],void t.initialInputs.push(null);let o=null,a=0;for(;a<r.length;){const l=r[a];if(0!==l)if(5!==l){if("number"==typeof l)break;if(!n&&s.hasOwnProperty(l)){const c=s[l];for(const u of c)if(u===e){o??=[],o.push(l,r[a+1]);break}}else if(n&&i.hasOwnProperty(l)){const c=i[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){o??=[],o.push(c[u+1],r[a+1]);break}}a+=2}else a+=2;else a+=4}t.initialInputs??=[],t.initialInputs.push(o)}function JP(t,e,n,r,s){t.data[r]=s;const i=s.factory||(s.factory=At(s.type)),o=new ju(i,Mo(s),Et,null);t.blueprint[r]=o,n[r]=o,function QP(t,e,n,r,s){const i=s.hostBindings;if(i){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function ek(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,i)}}(t,e,r,ad(t,n,s.hostVars,Kr),s)}function tk(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Mo(e)&&(n[""]=t)}}function iw(t,e,n,r,s,i,o,a){const l=e[1],c=l.consts,h=F1(l,t,n,r,Oi(c,o));return i&&Kb(l,e,h,Oi(c,a),s),h.mergedAttrs=z1(h.mergedAttrs,h.attrs),null!==h.attrs&&Xf(h,h.attrs,!1),null!==h.mergedAttrs&&Xf(h,h.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,h),h}function ow(t,e){cm(t,e),s3(e)&&t.queries.elementEnd(e)}function aw(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function pl(t,e,n){return t[e]=n}function zs(t,e,n){return n!==Kr&&(!Object.is(t[e],n)&&(t[e]=n,!0))}function _d(t,e,n){return function r(s){c2(Qa(t)?Xs(t.index,e):e,5);const o=e[8];let a=n_(e,o,n,s),l=r.__ngNextListenerFn__;for(;l;)a=n_(e,o,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function n_(t,e,n,r){const s=$(null);try{return Xr(6,e,n),!1!==n(r)}catch(i){return function Wv(t,e){const n=t[9];if(!n)return;let r;try{r=n.get(al,null)}catch{r=null}r?.(e)}(t,i),!1}finally{Xr(7,e,n),$(s)}}function r_(t,e,n,r,s,i,o,a){const l=w1(t);let c=!1,u=null;if(!r&&l&&(u=function lk(t,e,n,r){const s=t.cleanup;if(null!=s)for(let i=0;i<s.length-1;i+=2){const o=s[i];if(o===n&&s[i+1]===r){const a=e[7],l=s[i+2];return a&&a.length>l?a[l]:null}"string"==typeof o&&(i+=2)}return null}(e,n,i,t.index)),null!==u)(u.__ngLastListenerFn__||u).__ngNextListenerFn__=o,u.__ngLastListenerFn__=o,c=!0;else{const h=Gn(t,n),d=r?r(h):h,p=s.listen(d,i,a);(function ak(t){return t.startsWith("animation")||t.startsWith("transition")})(i)||s_(r?y=>r(gi(y[t.index])):t.index,e,n,i,a,p,!1)}return c}function s_(t,e,n,r,s,i,o){const a=e.firstCreatePass?f3(e):null,l=p3(n),c=l.length;l.push(s,i),a&&a.push(r,t,c,(c+1)*(o?-1:1))}function qf(t,e,n,r,s,i){const a=e[1],h=e[n][a.data[n].outputs[r]].subscribe(i);s_(t.index,a,e,s,i,h,!0)}const Ec=Symbol("BINDING");class i_ extends Uf{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Er(e);return new lw(n,this.ngModule)}}class lw extends Xb{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function mk(t){return Object.keys(t).map(e=>{const[n,r,s]=t[e],i={propName:n,templateName:e,isSignal:0!==(r&_f.SignalBased)};return s&&(i.transform=s),i})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function vk(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function $N(t){return t.map(UN).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,s,i,o){Xr(22);const a=$(null);try{const l=this.componentDef,c=function Ak(t,e,n,r){const s=t?["ng-version","20.3.15"]:function XN(t){const e=[],n=[];let r=1,s=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===s?""!==i&&e.push(i,t[++r]):8===s&&n.push(i);else{if(!La(s))break;s=i}r++}return n.length&&e.push(1,...n),e}(e.selectors[0]);let i=null,o=null,a=0;if(n)for(const u of n)a+=u[Ec].requiredVars,u.create&&(u.targetIdx=0,(i??=[]).push(u)),u.update&&(u.targetIdx=0,(o??=[]).push(u));if(r)for(let u=0;u<r.length;u++){const h=r[u];if("function"!=typeof h)for(const d of h.bindings){a+=d[Ec].requiredVars;const p=u+1;d.create&&(d.targetIdx=p,(i??=[]).push(d)),d.update&&(d.targetIdx=p,(o??=[]).push(d))}}const l=[e];if(r)for(const u of r){const d=Ti("function"==typeof u?u:u.type);l.push(d)}return Av(0,null,function bk(t,e){return t||e?n=>{if(1&n&&t)for(const r of t)r.create();if(2&n&&e)for(const r of e)r.update()}:null}(i,o),1,a,l,null,null,null,[s],null)}(r,l,o,i),u=function wk(t,e,n){let r=e instanceof Ji?e:e?.injector;return r&&null!==t.getStandaloneInjector&&(r=t.getStandaloneInjector(r)||r),r?new p2(n,r):n}(l,s||this.ngModule,e),h=function Ck(t){const e=t.get(nw,null);if(null===e)throw new Te(407,!1);return{rendererFactory:e,sanitizer:t.get(WP,null),changeDetectionScheduler:t.get(A1,null),ngReflect:!1}}(u),d=h.rendererFactory.createRenderer(null,l),p=r?function bF(t,e,n,r){const i=r.get(A,I)||n===Ol.ShadowDom,o=t.selectRootElement(e,i);return function _F(t){cb(t)}(o),o}(d,r,l.encapsulation,u):function yk(t,e){const n=function Ik(t){return(t.selectors[0][0]||"div").toLowerCase()}(t);return If(e,n,"svg"===n?"svg":"math"===n?"math":null)}(l,d),m=o?.some(o_)||i?.some(T=>"function"!=typeof T&&T.bindings.some(o_)),y=bf(null,c,null,512|bv(l),null,null,h,d,u,null,null);y[27]=p,Rp(y);let H=null;try{const T=iw(27,y,2,"#host",()=>c.directiveRegistry,!0,0);_A(d,p,T),po(p,y),Ef(c,y,T),hv(c,T,y),ow(c,T),void 0!==n&&function xk(t,e,n){const r=t.projection=[];for(let s=0;s<e.length;s++){const i=n[s];r.push(null!=i&&i.length?Array.from(i):null)}}(T,this.ngContentSelectors,n),H=Xs(T.index,y),y[8]=H[8],Bf(c,y,null)}catch(T){throw null!==H&&Qp(H),Qp(y),T}finally{Xr(23),Dp()}return new _k(this.componentType,y,!!m)}finally{$(a)}}}function o_(t){const e=t[Ec].kind;return"input"===e||"twoWay"===e}class _k extends kP{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=On(n[1],27),this.location=V1(this._tNode,n),this.instance=Xs(this._tNode.index,n)[8],this.hostView=this.changeDetectorRef=new pd(n,void 0),this.componentType=e}setInput(e,n){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;Df(r,s[1],s,e,n),this.previousInputValues.set(e,n),c2(Xs(r.index,s),1)}get injector(){return new Ys(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let fl=(()=>class t{static __NG_ELEMENT_ID__=Sk})();function Sk(){return c_(Dn(),Ue())}const Hk=fl,a_=class extends Hk{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return V1(this._hostTNode,this._hostLView)}get injector(){return new Ys(this._hostTNode,this._hostLView)}get parentInjector(){const e=$h(this._hostTNode,this._hostLView);if(jp(e)){const n=$u(e,this._hostLView),r=Uu(e);return new Ys(n[1].data[r+8],n)}return new Ys(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=l_(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let s,i;"number"==typeof r?s=r:null!=r&&(s=r.index,i=r.injector);const a=e.createEmbeddedViewImpl(n||{},i,null);return this.insertImpl(a,s,N1(this._hostTNode,null)),a}createComponent(e,n,r,s,i,o,a){const l=e&&!function Zu(t){return"function"==typeof t}(e);let c;if(l)c=n;else{const H=n||{};c=H.index,r=H.injector,s=H.projectableNodes,i=H.environmentInjector||H.ngModuleRef,o=H.directives,a=H.bindings}const u=l?e:new lw(Er(e)),h=r||this.parentInjector;if(!i&&null==u.ngModule){const T=(l?h:this.parentInjector).get(Ji,null);T&&(i=T)}Er(u.componentType??{});const y=u.create(h,s,null,i,o,a);return this.insertImpl(y.hostView,c,N1(this._hostTNode,null)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const s=e._lView;if(function S7(t){return Qi(t[3])}(s)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const l=s[3],c=new a_(l,l[5],l[3]);c.detach(c.indexOf(e))}}const i=this._adjustIndex(n),o=this._lContainer;return u2(o,s,i,r),e.attachToViewContainerRef(),ve(cw(o),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=l_(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=dd(this._lContainer,n);r&&(Ya(cw(this._lContainer),n),ud(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=dd(this._lContainer,n);return r&&null!=Ya(cw(this._lContainer),n)?new pd(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function l_(t){return t[8]}function cw(t){return t[8]||(t[8]=[])}function c_(t,e){let n;const r=e[t.index];return Qi(r)?n=r:(n=Ib(r,e,null,t),e[t.index]=n,_v(e,n)),u_(n,e,t,r),new a_(n,t,e)}let u_=function d_(t,e,n,r){if(t[7])return;let s;s=8&n.type?gi(r):function Mk(t,e){const n=t[11],r=n.createComment(""),s=Gn(e,t),i=n.parentNode(s);return R1(n,i,r,n.nextSibling(s),!1),r}(e,n),t[7]=s};class hw{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new hw(this.queryList)}setDirty(){this.queryList.setDirty()}}class dw{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,s=[];for(let i=0;i<r;i++){const o=n.getByIndex(i);s.push(this.queries[o.indexInDeclarationView].clone())}return new dw(s)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==vw(e,n).matches&&this.queries[n].setDirty()}}class p_{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,this.predicate="string"==typeof e?function Dk(t){return t.split(",").map(e=>e.trim())}(e):e}}class pw{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const s=null!==n?n.length:0,i=this.getByIndex(r).embeddedTView(e,s);i&&(i.indexInDeclarationView=r,null!==n?n.push(i):n=[i])}return null!==n?new pw(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class fw{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new fw(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let s=0;s<r.length;s++){const i=r[s];this.matchTNodeWithReadOption(e,n,Ek(n,i)),this.matchTNodeWithReadOption(e,n,Xh(n,e,i,!1,!1))}else r===Wl?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Xh(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const s=this.metadata.read;if(null!==s)if(s===$o||s===fl||s===Wl&&4&n.type)this.addMatch(n.index,-2);else{const i=Xh(n,e,s,!1,!1);null!==i&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function Ek(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Lk(t,e,n,r){return-1===n?function Tk(t,e){return 11&t.type?V1(t,e):4&t.type?Ff(t,e):null}(e,t):-2===n?function Rk(t,e,n){return n===$o?V1(e,t):n===Wl?Ff(e,t):n===fl?c_(e,t):void 0}(t,e,r):Xu(t,t[1],n,e)}function f_(t,e,n,r){const s=e[v].queries[r];if(null===s.matches){const i=t.data,o=n.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:Lk(e,i[c],o[l+1],n.metadata.read))}s.matches=a}return s.matches}function gw(t,e,n,r){const s=t.queries.getByIndex(n),i=s.matches;if(null!==i){const o=f_(t,e,s,n);for(let a=0;a<i.length;a+=2){const l=i[a];if(l>0)r.push(o[a/2]);else{const c=i[a+1],u=e[-l];for(let h=10;h<u.length;h++){const d=u[h];d[16]===d[3]&&gw(d[1],d,c,r)}if(null!==u[9]){const h=u[9];for(let d=0;d<h.length;d++){const p=h[d];gw(p[1],p,c,r)}}}}}return r}function m_(t,e,n){const r=Wn();return r.firstCreatePass&&(function w_(t,e,n){null===t.queries&&(t.queries=new pw),t.queries.track(new fw(e,n))}(r,new p_(t,e,n),-1),!(2&~e)&&(r.staticViewQueries=!0)),function g_(t,e,n){const r=new mI(!(4&~n));return function H7(t,e,n,r){const s=p3(e);s.push(n),t.firstCreatePass&&f3(t).push(r,s.length-1)}(t,e,r,r.destroy),(e[v]??=new dw).queries.push(new hw(r))-1}(r,Ue(),e)}function vw(t,e){return t.queries.getByIndex(e)}function C_(t,e){const n=t[1],r=vw(n,e);return r.crossesNgTemplate?gw(n,t,e,[]):f_(n,t,r,e)}let O1=class{},jk=class{};class yw extends O1{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new i_(this);constructor(e,n,r,s=!0){super(),this.ngModuleType=e,this._parent=n;const i=function Ho(t){return t[mh]||null}(e);this._bootstrapComponents=function dl(t){return t instanceof Function?t():t}(i.bootstrap),this._r3Injector=R3(e,n,[{provide:O1,useValue:this},{provide:Uf,useValue:this.componentFactoryResolver},...r],kn(e),new Set(["environment"])),s&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class __ extends jk{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new yw(this.moduleType,e,[])}}class Xk extends O1{injector;componentFactoryResolver=new i_(this);instance=null;constructor(e){super();const n=new Ia([...e.providers,{provide:O1,useValue:this},{provide:Uf,useValue:this.componentFactoryResolver}],e.parent||Ll(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}let Yk=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=Tu(0,n.type),s=r.length>0?function x_(t,e,n=null){return new Xk({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,s)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Mt({token:t,providedIn:"environment",factory:()=>new t(mn(Ji))})}return t})();function Ra(t){return ul(()=>{const e=H_(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Kh.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?s=>s.get(Yk).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ol.Emulated,styles:t.styles||Ur,_:null,schemas:t.schemas||null,tView:null,id:""};e.standalone&&no("NgStandalone"),M_(n);const r=t.dependencies;return n.directiveDefs=Jf(r,S_),n.pipeDefs=Jf(r,bt),n.id=function Qk(t){let e=0;const r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,"function"==typeof t.consts?"":t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(const i of r.join("|"))e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function S_(t){return Er(t)||Ti(t)}function Tc(t){return ul(()=>({type:t.type,bootstrap:t.bootstrap||Ur,declarations:t.declarations||Ur,imports:t.imports||Ur,exports:t.exports||Ur,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Kk(t,e){if(null==t)return Go;const n={};for(const r in t)if(t.hasOwnProperty(r)){const s=t[r];let i,o,a,l;Array.isArray(s)?(a=s[0],i=s[1],o=s[2]??i,l=s[3]||null):(i=s,o=s,a=_f.None,l=null),n[i]=[r,a,l],e[i]=o}return n}function qk(t){if(null==t)return Go;const e={};for(const n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function jn(t){return ul(()=>{const e=H_(t);return M_(e),e})}function Eo(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function H_(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Go,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:!0===t.signals,selectors:t.selectors||Ur,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Kk(t.inputs,e),outputs:qk(t.outputs),debugInfo:null}}function M_(t){t.features?.forEach(e=>e(t))}function Jf(t,e){return t?()=>{const n="function"==typeof t?t():t,r=[];for(const s of n){const i=e(s);null!==i&&r.push(i)}return r}:null}function qr(t){let e=function z_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let s;if(Mo(t))s=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Te(903,!1);s=e.\u0275dir}if(s){if(n){r.push(s);const o=t;o.inputs=Iw(t.inputs),o.declaredInputs=Iw(t.declaredInputs),o.outputs=Iw(t.outputs);const a=s.hostBindings;a&&sO(t,a);const l=s.viewQuery,c=s.contentQueries;if(l&&nO(t,l),c&&rO(t,c),eO(t,s),ct(t.outputs,s.outputs),Mo(s)&&s.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(s.data.animation)}}const i=s.features;if(i)for(let o=0;o<i.length;o++){const a=i[o];a&&a.ngInherit&&a(t),a===qr&&(n=!1)}}e=Object.getPrototypeOf(e)}!function tO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const s=t[r];s.hostVars=e+=s.hostVars,s.hostAttrs=z1(s.hostAttrs,n=z1(n,s.hostAttrs))}}(r)}function eO(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function Iw(t){return t===Go?{}:t===Ur?[]:t}function nO(t,e){const n=t.viewQuery;t.viewQuery=n?(r,s)=>{e(r,s),n(r,s)}:e}function rO(t,e){const n=t.contentQueries;t.contentQueries=n?(r,s,i)=>{e(r,s,i),n(r,s,i)}:e}function sO(t,e){const n=t.hostBindings;t.hostBindings=n?(r,s)=>{e(r,s),n(r,s)}:e}function R_(t,e,n,r,s,i,o,a){if(n.firstCreatePass){t.mergedAttrs=z1(t.mergedAttrs,t.attrs);const u=t.tView=Av(2,t,s,i,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);null!==n.queries&&(n.queries.template(n,t),u.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),rl(t,!1);const l=B_(n,e,t,r);Nh()&&Fv(n,e,l,t),po(l,e);const c=Ib(l,e,l,t);e[r+27]=c,_v(e,c)}function G1(t,e,n,r,s,i,o,a,l,c,u){const h=n+27;let d;if(e.firstCreatePass){if(d=F1(e,h,4,o||null,a||null),null!=c){const p=Oi(e.consts,c);d.localNames=[];for(let m=0;m<p.length;m+=2)d.localNames.push(p[m],-1)}}else d=e.data[h];return R_(d,t,e,n,r,s,i,l),null!=c&&a2(t,d,u),d}function W1(t,e,n,r,s,i,o,a){const l=Ue(),c=Wn();return function hO(t,e,n,r,s,i,o,a,l,c,u){const h=n+27;let d;e.firstCreatePass?(d=F1(e,h,4,o||null,a||null),Vp()&&Kb(e,t,d,Oi(e.consts,c),Gv),cm(e,d)):d=e.data[h],R_(d,t,e,n,r,s,i,l),w1(d)&&Ef(e,t,d),null!=c&&a2(t,d,u)}(l,c,t,e,n,r,s,Oi(c.consts,i),void 0,o,a),W1}let B_=function N_(t,e,n,r){return Fu(!0),e[11].createComment("")};const ux=new at(""),og=new at("");let Ew,zw=(()=>{class t{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(n,r,s){this._ngZone=n,this.registry=r,Bu()&&(this._destroyRef=ae(xa,{optional:!0})??void 0),Ew||(function yG(t){Ew=t}(s),s.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){const n=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Fr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{n.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,s){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==i),n()},r)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:s})}whenStable(n,r,s){if(s&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,s),this._runCallbacksIfReady()}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,s){return[]}static \u0275fac=function(r){return new(r||t)(mn(Fr),mn(Vw),mn(og))};static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})(),Vw=(()=>{class t{_applications=new Map;registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Ew?.findTestabilityInTree(this,n,r)??null}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Mt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function ag(t){return!!t&&"function"==typeof t.then}function hx(t){return!!t&&"function"==typeof t.subscribe}const Tw=new at("");let dx=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=ae(Tw,{optional:!0})??[];injector=ae(uo);constructor(){}runInitializers(){if(this.initialized)return;const n=[];for(const s of this.appInits){const i=g1(this.injector,s);if(ag(i))n.push(i);else if(hx(i)){const o=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(s=>{this.reject(s)}),0===n.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Mt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const IG=new at("");function px(t,e){return Array.isArray(e)?e.reduce(px,t):{...t,...e}}let Rc=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=ae(al);afterRenderManager=ae(UA);zonelessEnabled=ae(F3);rootEffectScheduler=ae(O3);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new X;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=ae(Ic);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(jo(n=>!n))}constructor(){ae(cd,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:s=>{s&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=ae(Ji);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,s=uo.NULL){return this._injector.get(Fr).run(()=>{Xr(10);const o=n instanceof Xb;if(!this._injector.get(dx).done)throw new Te(405,"");let l;l=o?n:this._injector.get(Uf).resolveComponentFactory(n),this.componentTypes.push(l.componentType);const c=function bG(t){return t.isBoundToModule}(l)?void 0:this._injector.get(O1),h=l.create(s,[],r||l.selector,c),d=h.location.nativeElement,p=h.injector.get(ux,null);return p?.registerApplication(d),h.onDestroy(()=>{this.detachView(h.hostView),lg(this.components,h),p?.unregisterApplication(d)}),this._loadComponent(h),Xr(11,h),h})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Xr(12),null!==this.tracingSnapshot?this.tracingSnapshot.run(Hv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Te(101,!1);const n=$(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,$(n),this.afterTick.next(),Xr(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(nw,null,{optional:!0}));let n=0;for(;0!==this.dirtyFlags&&n++<10;)Xr(14),this.synchronizeOnce(),Xr(15)}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:s}of this.allViews)(r||Lh(s))&&(Nf(s,r&&!this.zonelessEnabled?0:1),n=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>Lh(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;lg(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(s){this.internalErrorHandler(s)}this.components.push(n),this._injector.get(IG,[]).forEach(s=>s(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>lg(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Te(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Mt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}typeof document<"u"&&document;class yW{destroy(e){}updateValue(e,n){}swap(e,n){const r=Math.min(e,n),s=Math.max(e,n),i=this.detach(s);if(s-r>1){const o=this.detach(r);this.attach(r,i),this.attach(s,o)}else this.attach(r,i)}move(e,n){this.attach(n,this.detach(e))}}function Ww(t,e,n,r,s){return t===n&&Object.is(e,r)?1:Object.is(s(t,e),s(n,r))?-1:0}function Zw(t,e,n,r){return!(void 0===e||!e.has(r)||(t.attach(n,e.get(r)),e.delete(r),0))}function Sx(t,e,n,r,s){if(Zw(t,e,r,n(r,s)))t.updateValue(r,s);else{const i=t.create(r,s);t.attach(r,i)}}function Hx(t,e,n,r){const s=new Set;for(let i=e;i<=n;i++)s.add(r(i,t.at(i)));return s}class Mx{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;const n=this.kvMap.get(e);return void 0!==this._vMap&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);void 0===this._vMap&&(this._vMap=new Map);const s=this._vMap;for(;s.has(r);)r=s.get(r);s.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),void 0!==this._vMap){const s=this._vMap;for(;s.has(r);)r=s.get(r),e(r,n)}}}function os(t,e,n,r,s,i,o,a){no("NgControlFlow");const l=Ue(),c=Wn();return G1(l,c,t,e,n,r,s,Oi(c.consts,i),256,o,a),jw}function jw(t,e,n,r,s,i,o,a){no("NgControlFlow");const l=Ue(),c=Wn();return G1(l,c,t,e,n,r,s,Oi(c.consts,i),512,o,a),jw}function as(t,e){no("NgControlFlow");const n=Ue(),r=co(),s=n[r]!==Kr?n[r]:-1,i=-1!==s?Cg(n,27+s):void 0;if(zs(n,r,t)){const a=$(null);try{if(void 0!==i&&jv(i,0),-1!==t){const l=27+t,c=Cg(n,l),u=$w(n[1],l),h=null;u2(c,l2(n,u,e,{dehydratedView:h}),0,N1(u,h))}}finally{$(a)}}else if(void 0!==i){const a=Ab(i,0);void 0!==a&&(a[8]=e)}}class AW{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-10}}function Uw(t,e){return e}class _W{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}}function vg(t,e,n,r,s,i,o,a,l,c,u,h,d){no("NgControlFlow");const p=Ue(),m=Wn(),y=void 0!==l,H=Ue(),T=a?o.bind(H[15][8]):o,V=new _W(y,T);H[27+t]=V,G1(p,m,t+1,e,n,r,s,Oi(m.consts,i),256),y&&G1(p,m,t+2,l,c,u,h,Oi(m.consts,d),512)}class xW extends yW{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-10}at(e){return this.getLView(e)[8].$implicit}attach(e,n){const r=n[6];this.needsIndexUpdate||=e!==this.length,u2(this.lContainer,n,e,N1(this.templateTNode,r)),function SW(t,e){if(t.length<=10)return;const r=t[10+e],s=r?r[26]:void 0;r&&s&&s.detachedLeaveAnimationFns&&s.detachedLeaveAnimationFns.length>0&&(function pF(t,e){const n=t.get(Hf);if(e.detachedLeaveAnimationFns){for(const r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}(r[9],s),D1.delete(r),s.detachedLeaveAnimationFns=void 0)}(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,function HW(t,e){if(t.length<=10)return;const r=t[10+e],s=r?r[26]:void 0;s&&s.leave&&s.leave.size>0&&(s.detachedLeaveAnimationFns=[])}(this.lContainer,e),function MW(t,e){return dd(t,e)}(this.lContainer,e)}create(e,n){const s=l2(this.hostLView,this.templateTNode,new AW(this.lContainer,n,e),{dehydratedView:null});return this.operationsCounter?.recordCreate(),s}destroy(e){ud(e[1],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[8].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[8].$index=e}getLView(e){return function zW(t,e){return Ab(t,e)}(this.lContainer,e)}}function wg(t){const e=$(null),n=Li();try{const r=Ue(),s=r[1],i=r[n],o=n+1,a=Cg(r,o);if(void 0===i.liveCollection){const c=$w(s,o);i.liveCollection=new xW(a,r,c)}else i.liveCollection.reset();const l=i.liveCollection;if(function IW(t,e,n){let r,s,i=0,o=t.length-1;if(Array.isArray(e)){let l=e.length-1;for(;i<=o&&i<=l;){const c=t.at(i),u=e[i],h=Ww(i,c,i,u,n);if(0!==h){h<0&&t.updateValue(i,u),i++;continue}const d=t.at(o),p=e[l],m=Ww(o,d,l,p,n);if(0!==m){m<0&&t.updateValue(o,p),o--,l--;continue}const y=n(i,c),H=n(o,d),T=n(i,u);if(Object.is(T,H)){const V=n(l,p);Object.is(V,y)?(t.swap(i,o),t.updateValue(o,p),l--,o--):t.move(o,i),t.updateValue(i,u),i++;continue}if(r??=new Mx,s??=Hx(t,i,o,n),Zw(t,r,i,T))t.updateValue(i,u),i++,o++;else if(s.has(T))r.set(y,t.detach(i)),o--;else{const V=t.create(i,e[i]);t.attach(i,V),i++,o++}}for(;i<=l;)Sx(t,r,n,i,e[i]),i++}else if(null!=e){const l=e[Symbol.iterator]();let c=l.next();for(;!c.done&&i<=o;){const u=t.at(i),h=c.value,d=Ww(i,u,i,h,n);if(0!==d)d<0&&t.updateValue(i,h),i++,c=l.next();else{r??=new Mx,s??=Hx(t,i,o,n);const p=n(i,h);if(Zw(t,r,i,p))t.updateValue(i,h),i++,o++,c=l.next();else if(s.has(p)){const m=n(i,u);r.set(m,t.detach(i)),o--}else t.attach(i,t.create(i,h)),i++,o++,c=l.next()}}for(;!c.done;)Sx(t,r,n,t.length,c.value),c=l.next()}for(;i<=o;)t.destroy(t.detach(o--));r?.forEach(l=>{t.destroy(l)})}(l,t,i.trackByFn),l.updateIndexes(),i.hasEmptyBlock){const c=co(),u=0===l.length;if(zs(r,c,u)){const h=n+2,d=Cg(r,h);if(u){const p=$w(s,h),m=null;u2(d,l2(r,p,void 0,{dehydratedView:m}),0,N1(p,m))}else s.firstUpdatePass&&function Wf(t){const e=t[6]??[],r=t[3][11],s=[];for(const i of e)void 0!==i.data.di?s.push(i):Gb(i,r);t[6]=s}(d),jv(d,0)}}}finally{$(e)}}function Cg(t,e){return t[e]}function $w(t,e){return On(t,e)}function Ot(t,e,n){const r=Ue();return zs(r,co(),e)&&(Wn(),kv(_a(),r,t,e,r[11],n)),Ot}function Xw(t,e,n,r,s){Df(e,t,n,s?"class":"style",r)}function gt(t,e,n,r){const s=Ue(),i=s[1],o=t+27,a=i.firstCreatePass?iw(o,s,2,e,Gv,Vp(),n,r):i.data[o];if(Lf(a,s,t,e,Yw),w1(a)){const l=s[1];Ef(l,s,a),hv(l,a,s)}return null!=r&&a2(s,a),gt}function ht(){const t=Wn(),n=Rf(Dn());return t.firstCreatePass&&ow(t,n),v3(n)&&w3(),g3(),null!=n.classesWithoutHost&&function Ky(t){return!!(8&t.flags)}(n)&&Xw(t,n,Ue(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function qy(t){return!!(16&t.flags)}(n)&&Xw(t,n,Ue(),n.stylesWithoutHost,!1),ht}function b2(t,e,n,r){return gt(t,e,n,r),ht(),b2}function yg(t,e,n,r){const s=Ue(),i=s[1],o=t+27,a=i.firstCreatePass?function t_(t,e,n,r,s,i){const o=e.consts,l=F1(e,t,n,r,Oi(o,s));if(l.mergedAttrs=z1(l.mergedAttrs,l.attrs),null!=i){const c=Oi(o,i);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return null!==l.attrs&&Xf(l,l.attrs,!1),null!==l.mergedAttrs&&Xf(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,i,2,e,n,r):i.data[o];return Lf(a,s,t,e,Yw),null!=r&&a2(s,a),yg}function Ig(){return v3(Rf(Dn()))&&w3(),g3(),Ig}let Yw=(t,e,n,r,s)=>(Fu(!0),If(e[11],r,function O7(){return Vn.lFrame.currentNamespace}()));function Kw(t,e,n){const r=Ue(),s=r[1],i=t+27,o=s.firstCreatePass?iw(i,r,8,"ng-container",Gv,Vp(),e,n):s.data[i];if(Lf(o,r,t,"ng-container",Jw),w1(o)){const a=r[1];Ef(a,r,o),hv(a,o,r)}return null!=n&&a2(r,o),Kw}function Ag(){const t=Wn(),n=Rf(Dn());return t.firstCreatePass&&ow(t,n),Ag}function bg(t,e,n){return Kw(t,e,n),Ag(),bg}let Jw=(t,e,n,r,s)=>(Fu(!0),yv(e[11],""));function mr(){return Ue()}function Qw(t,e,n){const r=Ue();return zs(r,co(),e)&&(Wn(),Ov(_a(),r,t,e,r[11],n)),Qw}const xg="en-US";let Dx=xg;function zt(t,e,n){const r=Ue(),s=Wn(),i=Dn();return r6(s,r,r[11],i,t,e,n),zt}function n6(t,e,n){const r=Ue(),s=Wn(),i=Dn();return(3&i.type||n)&&r_(i,s,r,n,r[11],t,e,_d(i,r,e)),n6}function r6(t,e,n,r,s,i,o){let a=!0,l=null;if((3&r.type||o)&&(l??=_d(r,e,i),r_(r,t,e,o,n,s,i,l)&&(a=!1)),a){const c=r.outputs?.[s],u=r.hostDirectiveOutputs?.[s];if(u&&u.length)for(let h=0;h<u.length;h+=2){const d=u[h],p=u[h+1];l??=_d(r,e,i),qf(r,e,d,p,s,l)}if(c&&c.length)for(const h of c)l??=_d(r,e,i),qf(r,e,h,s,s,l)}}function nt(t=1){return function B7(t){return(Vn.lFrame.contextLView=function d3(t,e){for(;t>0;)e=e[14],t--;return e}(t,Vn.lFrame.contextLView))[8]}(t)}function IZ(t,e){let n=null;const r=function GN(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let s=0;s<e.length;s++){const i=e[s];if("*"!==i){if(null===r?TA(t,i,!0):jN(r,i))return s}else n=s}return n}function s6(t){const e=Ue()[15][5];if(!e.projection){const r=e.projection=function Eu(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(t?t.length:1,null),s=r.slice();let i=e.child;for(;null!==i;){if(128!==i.type){const o=t?IZ(i,t):0;null!==o&&(s[o]?s[o].projectionNext=i:r[o]=i,s[o]=i)}i=i.next}}}function i6(t,e=0,n,r,s,i){const o=Ue(),a=Wn(),l=r?t+1:null;null!==l&&G1(o,a,l,r,s,i,null,n);const c=F1(a,27+t,16,null,n||null);null===c.projection&&(c.projection=e),I3();const h=!o[6]||m3();null===o[15][5].projection[c.projection]&&null!==l?function AZ(t,e,n){const r=27+n,s=e.data[r],i=t[r];u2(i,l2(t,s,void 0,{dehydratedView:null}),0,N1(s,null))}(o,a,l):h&&!ia(c)&&function yF(t,e,n){ab(e[11],0,e,n,Bv(t,n,e),nb(n.parent||e[5],n,e))}(a,o,c)}function Bd(t,e,n){m_(t,e,n)}function Nd(t){const e=Ue(),n=Wn(),r=Lp();Bh(r+1);const s=vw(n,r);if(t.dirty&&function Tr(t){return!(4&~t[2])}(e)===!(2&~s.metadata.flags)){if(null===s.matches)t.reset([]);else{const i=C_(e,r);t.reset(i,Vm),t.notifyOnChanges()}return!0}return!1}function Fd(){return function mw(t,e){return t[v].queries[e].queryList}(Ue(),Lp())}function Bc(t){return We(function A3(){return Vn.lFrame.contextLView}(),27+t)}function zg(t,e){return t<<17|e<<2}function q1(t){return t>>17&32767}function o6(t){return 2|t}function x2(t){return(131068&t)>>2}function a6(t,e){return-131069&t|e<<2}function l6(t){return 1|t}function eS(t,e,n,r){const s=t[n+1],i=null===e;let o=r?q1(s):x2(s),a=!1;for(;0!==o&&(!1===a||i);){const c=t[o+1];TZ(t[o],e)&&(a=!0,t[o+1]=r?l6(c):o6(c)),o=r?q1(c):x2(c)}a&&(t[n+1]=r?o6(s):l6(s))}function TZ(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Cr(t,e)>=0}const Mi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tS(t){return t.substring(Mi.key,Mi.keyEnd)}function nS(t,e){const n=Mi.textEnd;return n===e?-1:(e=Mi.keyEnd=function BZ(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Mi.key=e,n),S2(t,e,n))}function S2(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function c6(t,e,n){return lS(t,e,n,!1),c6}function Vg(t,e){return lS(t,e,null,!0),Vg}function aS(t){!function cS(t,e,n,r){const s=Wn(),i=il(2);s.firstUpdatePass&&hS(s,null,i,r);const o=Ue();if(n!==Kr&&zs(o,i,n)){const a=s.data[Li()];if(gS(a,r)&&!uS(s,i)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(n=Js(l,n||"")),Xw(s,a,o,n,r)}else!function XZ(t,e,n,r,s,i,o,a){s===Kr&&(s=Ur);let l=0,c=0,u=0<s.length?s[0]:null,h=0<i.length?i[0]:null;for(;null!==u||null!==h;){const d=l<s.length?s[l+1]:void 0,p=c<i.length?i[c+1]:void 0;let y,m=null;u===h?(l+=2,c+=2,d!==p&&(m=h,y=p)):null===h||null!==u&&u<h?(l+=2,m=u):(c+=2,m=h,y=p),null!==m&&pS(t,e,n,r,m,y,o,a),u=l<s.length?s[l]:null,h=c<i.length?i[c]:null}}(s,a,o,o[11],o[i+1],o[i+1]=function UZ(t,e,n){if(null==n||""===n)return Ur;const r=[],s=Hc(n);if(Array.isArray(s))for(let i=0;i<s.length;i++)t(r,s[i],!0);else if("object"==typeof s)for(const i in s)s.hasOwnProperty(i)&&t(r,i,s[i]);else"string"==typeof s&&e(r,s);return r}(t,e,n),r,i)}}($Z,OZ,t,!0)}function OZ(t,e){for(let n=function RZ(t){return function sS(t){Mi.key=0,Mi.keyEnd=0,Mi.value=0,Mi.valueEnd=0,Mi.textEnd=t.length}(t),nS(t,S2(t,0,Mi.textEnd))}(e);n>=0;n=nS(e,n))zl(t,tS(e),!0)}function lS(t,e,n,r){const s=Ue(),i=Wn(),o=il(2);i.firstUpdatePass&&hS(i,t,o,r),e!==Kr&&zs(s,o,e)&&pS(i,i.data[Li()],s,s[11],t,s[o+1]=function YZ(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=kn(Hc(t)))),t}(e,n),r,o)}function uS(t,e){return e>=t.expandoStartIndex}function hS(t,e,n,r){const s=t.data;if(null===s[n+1]){const i=s[Li()],o=uS(t,n);gS(i,r)&&null===e&&!o&&(e=!1),e=function GZ(t,e,n,r){const s=function Tp(t){const e=Vn.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let i=r?e.residualClasses:e.residualStyles;if(null===s)0===(r?e.classBindings:e.styleBindings)&&(n=Pd(n=u6(null,t,e,n,r),e.attrs,r),i=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==s)if(n=u6(s,t,e,n,r),null===i){let l=function WZ(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==x2(r))return t[q1(r)]}(t,e,r);void 0!==l&&Array.isArray(l)&&(l=u6(null,t,e,l[1],r),l=Pd(l,e.attrs,r),function ZZ(t,e,n,r){t[q1(n?e.classBindings:e.styleBindings)]=r}(t,e,r,l))}else i=function jZ(t,e,n){let r;const s=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<s;i++)r=Pd(r,t[i].hostAttrs,n);return Pd(r,e.attrs,n)}(t,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),n}(s,i,e,r),function VZ(t,e,n,r,s,i){let o=i?e.classBindings:e.styleBindings,a=q1(o),l=x2(o);t[r]=n;let u,c=!1;if(Array.isArray(n)?(u=n[1],(null===u||Cr(n,u)>0)&&(c=!0)):u=n,s)if(0!==l){const d=q1(t[a+1]);t[r+1]=zg(d,a),0!==d&&(t[d+1]=a6(t[d+1],r)),t[a+1]=function MZ(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=zg(a,0),0!==a&&(t[a+1]=a6(t[a+1],r)),a=r;else t[r+1]=zg(l,0),0===a?a=r:t[l+1]=a6(t[l+1],r),l=r;c&&(t[r+1]=o6(t[r+1])),eS(t,u,r,!0),eS(t,u,r,!1),function EZ(t,e,n,r,s){const i=s?t.residualClasses:t.residualStyles;null!=i&&"string"==typeof e&&Cr(i,e)>=0&&(n[r+1]=l6(n[r+1]))}(e,u,t,r,i),o=zg(a,l),i?e.classBindings=o:e.styleBindings=o}(s,i,e,n,o,r)}}function u6(t,e,n,r,s){let i=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(i=e[a],r=Pd(r,i.hostAttrs,s),i!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Pd(t,e,n){const r=n?1:2;let s=-1;if(null!==e)for(let i=0;i<e.length;i++){const o=e[i];"number"==typeof o?s=o:s===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),zl(t,o,!!n||e[++i]))}return void 0===t?null:t}function $Z(t,e,n){const r=String(e);""!==r&&!r.includes(" ")&&zl(t,r,n)}function pS(t,e,n,r,s,i,o,a){if(!(3&e.type))return;const l=t.data,c=l[a+1],u=function zZ(t){return!(1&~t)}(c)?fS(l,e,n,s,x2(c),o):void 0;Eg(u)||(Eg(i)||function HZ(t){return!(2&~t)}(c)&&(i=fS(l,null,n,s,a,o)),function AF(t,e,n,r,s){if(e)s?t.addClass(n,r):t.removeClass(n,r);else{let i=-1===r.indexOf("-")?void 0:Mc.DashCase;null==s?t.removeStyle(n,r,i):("string"==typeof s&&s.endsWith("!important")&&(s=s.slice(0,-10),i|=Mc.Important),t.setStyle(n,r,s,i))}}(r,o,Vt(Li(),n),s,i))}function fS(t,e,n,r,s,i){const o=null===e;let a;for(;s>0;){const l=t[s],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let d=n[s+1];d===Kr&&(d=h?Ur:void 0);let p=h?Ln(d,r):u===r?d:void 0;if(c&&!Eg(p)&&(p=Ln(l,r)),Eg(p)&&(a=p,o))return a;const m=t[s+1];s=o?q1(m):x2(m)}if(null!==e){let l=i?e.residualClasses:e.residualStyles;null!=l&&(a=Ln(l,r))}return a}function Eg(t){return void 0!==t}function gS(t,e){return!!(t.flags&(e?8:16))}function go(t,e=""){const n=Ue(),r=Wn(),s=t+27,i=r.firstCreatePass?F1(r,s,1,e,null):r.data[s],o=mS(r,n,i,e,t);n[s]=o,Nh()&&Fv(r,n,o,i),rl(i,!1)}let mS=(t,e,n,r,s)=>(Fu(!0),function Cv(t,e){return t.createText(e)}(e[11],r));function h6(t){return Nc("",t),h6}function Nc(t,e,n){const r=Ue(),s=function wS(t,e,n,r=""){return zs(t,co(),n)?e+Hn(n)+r:Kr}(r,t,e,n);return s!==Kr&&function jl(t,e,n){const r=Vt(e,t);!function yA(t,e,n){t.setValue(e,n)}(t[11],r,n)}(r,Li(),s),Nc}function ls(t,e,n){N3(e)&&(e=e());const r=Ue();return zs(r,co(),e)&&(Wn(),kv(_a(),r,t,e,r[11],n)),ls}function fs(t,e){const n=N3(t);return n&&t.set(e),n}function cs(t,e){const n=Ue(),r=Wn(),s=Dn();return r6(r,n,n[11],s,t,e),cs}function d6(t,e,n,r,s){if(t=Sn(t),Array.isArray(t))for(let i=0;i<t.length;i++)d6(t[i],e,n,r,s);else{const i=Wn(),o=Ue(),a=Dn();let l=Wo(t)?t:Sn(t.provide);const c=Vh(t),u=1048575&a.providerIndexes,h=a.directiveStart,d=a.providerIndexes>>20;if(Wo(t)||!t.multi){const p=new ju(c,s,Et,null),m=f6(l,e,s?u:u+d,h);-1===m?(Xp(Uh(a,o),i,l),p6(i,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(p),o.push(p)):(n[m]=p,o[m]=p)}else{const p=f6(l,e,u+d,h),m=f6(l,e,u,u+d),H=m>=0&&n[m];if(s&&!H||!s&&!(p>=0&&n[p])){Xp(Uh(a,o),i,l);const T=function pj(t,e,n,r,s){const o=new ju(t,n,Et,null);return o.multi=[],o.index=e,o.componentProviders=0,BS(o,s,r&&!n),o}(s?dj:hj,n.length,s,r,c);!s&&H&&(n[m].providerFactory=T),p6(i,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(T),o.push(T)}else p6(i,t,p>-1?p:m,BS(n[s?m:p],c,!s&&r));!s&&r&&H&&n[m].componentProviders++}}}function p6(t,e,n,r){const s=Wo(e),i=function Ru(t){return!!t.useClass}(e);if(s||i){const l=(i?Sn(e.useClass):e).prototype.ngOnDestroy;if(l){const c=t.destroyHooks||(t.destroyHooks=[]);if(!s&&e.multi){const u=c.indexOf(n);-1===u?c.push(n,[r,l]):c[u+1].push(r,l)}else c.push(n,l)}}}function BS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function f6(t,e,n,r){for(let s=n;s<r;s++)if(e[s]===t)return s;return-1}function hj(t,e,n,r,s){return g6(this.multi,[])}function dj(t,e,n,r,s){const i=this.multi;let o;if(this.providerFactory){const a=this.providerFactory.componentProviders,l=Xu(r,r[1],this.providerFactory.index,s);o=l.slice(0,a),g6(i,o);for(let c=a;c<l.length;c++)o.push(l[c])}else o=[],g6(i,o);return o}function g6(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ws(t,e=[]){return n=>{n.providersResolver=(r,s)=>function uj(t,e,n){const r=Wn();if(r.firstCreatePass){const s=Mo(t);d6(n,r.data,r.blueprint,s,!0),d6(e,r.data,r.blueprint,s,!1)}}(r,s?s(t):t,e)}}function Do(t,e,n){const r=eo()+t,s=Ue();return s[r]===Kr?pl(s,r,n?e.call(n):e()):function bd(t,e){return t[e]}(s,r)}function Lg(t,e,n,r){return FS(Ue(),eo(),t,e,n,r)}function m6(t,e,n,r,s){return function PS(t,e,n,r,s,i,o){const a=e+n;return function k1(t,e,n,r){const s=zs(t,e,n);return zs(t,e+1,r)||s}(t,a,s,i)?pl(t,a+2,o?r.call(o,s,i):r(s,i)):kd(t,a+2)}(Ue(),eo(),t,e,n,r,s)}function kd(t,e){const n=t[e];return n===Kr?void 0:n}function FS(t,e,n,r,s,i){const o=e+n;return zs(t,o,s)?pl(t,o+1,i?r.call(i,s):r(s)):kd(t,o+1)}function Fc(t,e){return Ff(t,e)}let sU=(()=>{class t{zone=ae(Fr);changeDetectionScheduler=ae(A1);applicationRef=ae(Rc);applicationErrorHandler=ae(al);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Mt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lH({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Fr({...I6(),scheduleInRootZone:n}),[{provide:Fr,useFactory:t},{provide:ya,multi:!0,useFactory:()=>{const r=ae(sU,{optional:!0});return()=>r.initialize()}},{provide:ya,multi:!0,useFactory:()=>{const r=ae(oU);return()=>{r.initialize()}}},!0===e?{provide:P3,useValue:!0}:[],{provide:k3,useValue:n??kA},{provide:al,useFactory:()=>{const r=ae(Fr),s=ae(Ji);let i;return o=>{r.runOutsideAngular(()=>{s.destroyed&&!i?setTimeout(()=>{throw o}):(i??=s.get(I1),i.handleError(o))})}}}]}function I6(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let oU=(()=>{class t{subscription=new gn;initialized=!1;zone=ae(Fr);pendingTasks=ae(Ic);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Fr.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Fr.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Mt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hH=(()=>{class t{applicationErrorHandler=ae(al);appRef=ae(Rc);taskService=ae(Ic);ngZone=ae(Fr);zonelessEnabled=ae(F3);tracing=ae(cd,{optional:!0});disableScheduling=ae(P3,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new gn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Sf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ae(k3,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ev||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;let r=!1;switch(n){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const s=this.useMicrotaskScheduler?GA:OA;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>s(()=>this.tick())):this.ngZone.runOutsideAngular(()=>s(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Sf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,GA(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Mt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const kc=new at("",{providedIn:"root",factory:()=>ae(kc,{optional:!0,skipSelf:!0})||function aU(){return typeof $localize<"u"&&$localize.locale||xg}()}),Fg=Symbol("InputSignalNode#UNSET"),gH={...St,transformFn:void 0,applyValueToInputSignal(t,e){k(t,e)}};function mH(t,e){const n=Object.create(gH);function r(){if(Q(n),n.value===Fg)throw new Te(-950,null);return n.value}return n.value=t,n.transformFn=e?.transform,r[Se]=n,r}function vH(t,e){return mH(t,e)}new at("").__NG_ELEMENT_ID__=t=>{const e=Dn();if(null===e)throw new Te(204,!1);if(2&e.type)return e.value;if(8&t)return null;throw new Te(204,!1)};const Wd=(vH.required=function mU(t){return mH(Fg,t)},vH),Pg=new at(""),IU=new at("");function Zd(t){return!t.moduleRef}let bH;function _H(){bH=AU}function AU(t,e){const n=t.injector.get(Rc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new Te(-403,!1);t.instance.ngDoBootstrap(n)}e.push(t)}let xH=(()=>{class t{_injector;_modules=[];_destroyListeners=[];_destroyed=!1;constructor(n){this._injector=n}bootstrapModuleFactory(n,r){const s=r?.scheduleInRootZone,o=r?.ignoreChangesOutsideZone,a=[lH({ngZoneFactory:()=>function cF(t="zone.js",e){return"noop"===t?new Ev:"zone.js"===t?new Fr(e):t}(r?.ngZone,{...I6({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}),scheduleInRootZone:s}),ignoreChangesOutsideZone:o}),{provide:A1,useExisting:hH},W7],l=function $k(t,e,n){return new yw(t,e,n,!1)}(n.moduleType,this.injector,a);return _H(),function AH(t){const e=Zd(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Fr);return n.run(()=>{Zd(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const r=e.get(al);let s;if(n.runOutsideAngular(()=>{s=n.onError.subscribe({next:r})}),Zd(t)){const i=()=>e.destroy(),o=t.platformInjector.get(Pg);o.add(i),e.onDestroy(()=>{s.unsubscribe(),o.delete(i)})}else{const i=()=>t.moduleRef.destroy(),o=t.platformInjector.get(Pg);o.add(i),t.moduleRef.onDestroy(()=>{lg(t.allPlatformModules,t.moduleRef),s.unsubscribe(),o.delete(i)})}return function bU(t,e,n){try{const r=n();return ag(r)?r.catch(s=>{throw e.runOutsideAngular(()=>t(s)),s}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}(r,n,()=>{const i=e.get(Ic),o=i.add(),a=e.get(dx);return a.runInitializers(),a.donePromise.then(()=>{if(function FW(t){"string"==typeof t&&(Dx=t.toLowerCase().replace(/_/g,"-"))}(e.get(kc,xg)||xg),!e.get(IU,!0))return Zd(t)?e.get(Rc):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Zd(t)){const u=e.get(Rc);return void 0!==t.rootComponent&&u.bootstrap(t.rootComponent),u}return bH?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>{i.remove(o)})})})}({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(n,r=[]){const s=px({},r);return _H(),function vU(t,e,n){const r=new __(n);return Promise.resolve(r)}(0,0,n).then(i=>this.bootstrapModuleFactory(i,s))}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Te(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Pg,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static \u0275fac=function(r){return new(r||t)(mn(uo))};static \u0275prov=Mt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),z2=null;function SH(t,e,n=[]){const r=`Platform: ${e}`,s=new at(r);return(i=[])=>{let o=kg();if(!o){const a=[...n,...i,{provide:s,useValue:!0}];o=t?.(a)??function _U(t){if(kg())throw new Te(400,!1);(function AG(){!function xs(t){_s=t}(()=>{throw new Te(600,"")})})(),z2=t;const e=t.get(xH);return function MH(t){const e=t.get(Km,null);g1(t,()=>{e?.forEach(n=>n())})}(t),e}(function HH(t=[],e){return uo.create({name:e,providers:[{provide:Du,useValue:"platform"},{provide:Pg,useValue:new Set([()=>z2=null])},...t]})}(a,r))}return function xU(){const e=kg();if(!e)throw new Te(-401,!1);return e}()}}function kg(){return z2?.get(xH)??null}let S6=(()=>class t{static __NG_ELEMENT_ID__=HU})();function HU(t){return function MU(t,e,n){if(Qa(t)&&!n){const r=Xs(t.index,e);return new pd(r,r)}return 175&t.type?new pd(e[15],e):null}(Dn(),Ue(),!(16&~t))}class LH{constructor(){}supports(e){return e instanceof Map||aw(e)}create(){return new LU}}class LU{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||aw(e)))throw new Te(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,s)=>{if(n&&n.key===s)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const i=this._getOrCreateRecordForKey(s,r);n=this._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const s=this._records.get(e);this._maybeAddToChanges(s,n);const i=s._prev,o=s._next;return i&&(i._next=o),o&&(o._prev=i),s._next=null,s._prev=null,s}const r=new RU(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class RU{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(e){this.key=e}}function DH(){return new Og([new LH])}let Og=(()=>{class t{static \u0275prov=Mt({token:t,providedIn:"root",factory:DH});factories;constructor(n){this.factories=n}static create(n,r){if(r){const s=r.factories.slice();n=n.concat(s)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{const r=ae(t,{optional:!0,skipSelf:!0});return t.create(n,r||DH())}}}find(n){const r=this.factories.find(s=>s.supports(n));if(r)return r;throw new Te(901,!1)}}return t})();const NU=SH(null,"core",[]);let FU=(()=>{class t{constructor(n){}static \u0275fac=function(r){return new(r||t)(mn(Rc))};static \u0275mod=Tc({type:t});static \u0275inj=Oo({})}return t})();const g$={...yt,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"};function vi(t){return function f$(t){const e=$(null);try{return t()}finally{$(e)}}(t)}function Da(t,e){return function Je(t,e){const n=Object.create(fn);n.computation=t,void 0!==e&&(n.equal=e);const r=()=>{if(ye(n),Q(n),n.value===jt)throw n.error;return n.value};return r[Se]=n,r}(t,e?.equal)}class v${[Se];constructor(e){this[Se]=e}destroy(){this[Se].destroy()}}const JH={...g$,cleanupFns:void 0,zone:null,onDestroyFn:Pu,run(){const t=Dh(!1);try{!function m$(t){if(t.dirty=!1,t.version>0&&!$t(t))return;t.version++;const e=Nt(t);try{t.cleanup(),t.fn()}finally{Ze(t,e)}}(this)}finally{Dh(t)}},cleanup(){if(!this.cleanupFns?.length)return;const t=$(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],$(t)}}},w$={...JH,consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){te(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}},C$={...JH,consumerMarkedDirty(){this.view[2]|=8192,C1(this.view),this.notifier.notify(13)},destroy(){te(this),this.onDestroyFn(),this.cleanup(),this.view[Y]?.delete(this)}};function QH(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}Error,Error;const O6=/\s+/,dM=[];let pM=(()=>{class t{_ngEl;_renderer;initialClasses=dM;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=null!=n?n.trim().split(O6):dM}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(O6):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){const s=this.stateMap.get(n);void 0!==s?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],s=n[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(O6).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}static \u0275fac=function(r){return new(r||t)(Et($o),Et(zc))};static \u0275dir=jn({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})(),Z6=(()=>{class t{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(n){this._viewContainerRef=n}ngOnChanges(n){if(this._shouldRecreateView(n)){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const s=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(n){return!!n.ngTemplateOutlet||!!n.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(n,r,s)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,r,s),get:(n,r,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,s)}})}static \u0275fac=function(r){return new(r||t)(Et(fl))};static \u0275dir=jn({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Bl]})}return t})(),wM=(()=>{class t{differs;constructor(n){this.differs=n}differ;keyValues=[];compareFn=CM;transform(n,r=CM){if(!n||!(n instanceof Map)&&"object"!=typeof n)return null;this.differ??=this.differs.find(n).create();const s=this.differ.diff(n),i=r!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(o=>{this.keyValues.push(function PX(t,e){return{key:t,value:e}}(o.key,o.currentValue))})),(s||i)&&(r&&this.keyValues.sort(r),this.compareFn=r),this.keyValues}static \u0275fac=function(r){return new(r||t)(Et(Og,16))};static \u0275pipe=Eo({name:"keyvalue",type:t,pure:!1})}return t})();function CM(t,e){const n=t.key,r=e.key;if(n===r)return 0;if(null==n)return 1;if(null==r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;const s=String(n),i=String(r);return s==i?0:s<i?-1:1}let WX=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Tc({type:t});static \u0275inj=Oo({})}return t})();class yM{_doc;constructor(e){this._doc=e}manager}let $6=(()=>{class t extends yM{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,s,i){return n.addEventListener(r,s,i),()=>this.removeEventListener(n,r,s,i)}removeEventListener(n,r,s,i){return n.removeEventListener(r,s,i)}static \u0275fac=function(r){return new(r||t)(mn(ol))};static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();const X6=new at("");let IM=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(o=>{o.manager=this});const s=n.filter(o=>!(o instanceof $6));this._plugins=s.slice().reverse();const i=n.find(o=>o instanceof $6);i&&this._plugins.push(i)}addEventListener(n,r,s,i){return this._findPluginFor(r).addEventListener(n,r,s,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new Te(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(mn(X6),mn(Fr))};static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();const Y6="ng-app-id";function AM(t){for(const e of t)e.remove()}function bM(t,e){const n=e.createElement("style");return n.textContent=t,n}function K6(t,e){const n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}let _M=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,s,i={}){this.doc=n,this.appId=r,this.nonce=s,function ZX(t,e,n,r){const s=t.head?.querySelectorAll(`style[${Y6}="${e}"],link[${Y6}="${e}"]`);if(s)for(const i of s)i.removeAttribute(Y6),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(const s of n)this.addUsage(s,this.inline,bM);r?.forEach(s=>this.addUsage(s,this.external,K6))}removeStyles(n,r){for(const s of n)this.removeUsage(s,this.inline);r?.forEach(s=>this.removeUsage(s,this.external))}addUsage(n,r,s){const i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,s(n,this.doc)))})}removeUsage(n,r){const s=r.get(n);s&&(s.usage--,s.usage<=0&&(AM(s.elements),r.delete(n)))}ngOnDestroy(){for(const[,{elements:n}]of[...this.inline,...this.external])AM(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(const[r,{elements:s}]of this.inline)s.push(this.addElement(n,bM(r,this.doc)));for(const[r,{elements:s}]of this.external)s.push(this.addElement(n,K6(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(mn(ol),mn(qu),mn(qm,8),mn(rf))};static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();const q6={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},J6=/%COMP%/g,KX=new at("",{providedIn:"root",factory:()=>!0});function SM(t,e){return e.map(n=>n.replace(J6,t))}let HM=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,s,i,o,a,l=null,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=i,this.doc=o,this.ngZone=a,this.nonce=l,this.tracingService=c,this.platformIsServer=!1,this.defaultRenderer=new Q6(n,o,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const s=this.getOrCreateRenderer(n,r);return s instanceof zM?s.applyToHost(n):s instanceof e9&&s.applyStyles(),s}getOrCreateRenderer(n,r){const s=this.rendererByCompId;let i=s.get(r.id);if(!i){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer,d=this.tracingService;switch(r.encapsulation){case Ol.Emulated:i=new zM(l,c,r,this.appId,u,o,a,h,d);break;case Ol.ShadowDom:return new eY(l,c,n,r,o,a,this.nonce,h,d);default:i=new e9(l,c,r,u,o,a,h,d)}s.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(mn(IM),mn(_M),mn(qu),mn(KX),mn(ol),mn(Fr),mn(qm),mn(cd,8))};static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();class Q6{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,s,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=s,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(q6[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(MM(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(MM(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new Te(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,s){if(s){n=s+":"+n;const i=q6[s];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const s=q6[r];s?e.removeAttributeNS(s,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,s){s&(Mc.DashCase|Mc.Important)?e.style.setProperty(n,r,s&Mc.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Mc.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,s){if("string"==typeof e&&!(e=ku().getGlobalEventTarget(this.doc,e)))throw new Te(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(e,n,i)),this.eventManager.addEventListener(e,n,i,s)}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&n.preventDefault()}}}function MM(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class eY extends Q6{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,s,i,o,a,l,c){super(e,i,o,l,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=s.styles;u=SM(s.id,u);for(const d of u){const p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=d,this.shadowRoot.appendChild(p)}const h=s.getExternalStyles?.();if(h)for(const d of h){const p=K6(d,i);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class e9 extends Q6{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,s,i,o,a,l,c){super(e,i,o,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=s;let u=r.styles;this.styles=c?SM(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&0===D1.size&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class zM extends e9{contentAttr;hostAttr;constructor(e,n,r,s,i,o,a,l,c){const u=s+"-"+r.id;super(e,n,r,i,o,a,l,c,u),this.contentAttr=function qX(t){return"_ngcontent-%COMP%".replace(J6,t)}(u),this.hostAttr=function JX(t){return"_nghost-%COMP%".replace(J6,t)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class t9 extends X7{supportsDOMEvents=!0;static makeCurrent(){!function $7(t){G3??=t}(new t9)}onAndCancel(e,n,r,s){return e.addEventListener(n,r,s),()=>{e.removeEventListener(n,r,s)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function tY(){return $d=$d||document.head.querySelector("base"),$d?$d.getAttribute("href"):null}();return null==n?null:function nY(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){$d=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return W3(document.cookie,e)}}let $d=null,sY=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();const VM=["alt","control","meta","shift"],iY={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oY={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let aY=(()=>{class t extends yM{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,s,i){const o=t.parseEventName(r),a=t.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ku().onAndCancel(n,o.domEventName,a,i))}static parseEventName(n){const r=n.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const i=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),VM.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=i,0!=r.length||0===i.length)return null;const l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(n,r){let s=iY[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(s=n.code,i="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),VM.forEach(o=>{o!==s&&(0,oY[o])(n)&&(i+=o+".")}),i+=s,i===r)}static eventCallback(n,r,s){return i=>{t.matchEventFullKeyCode(i,n)&&s.runGuarded(()=>r(i))}}static _normalizeKey(n){return"esc"===n?"escape":n}static \u0275fac=function(r){return new(r||t)(mn(ol))};static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();const hY=SH(NU,"browser",[{provide:rf,useValue:"browser"},{provide:Km,useValue:function lY(){t9.makeCurrent()},multi:!0},{provide:ol,useFactory:function uY(){return function GI(t){nf=t}(document),document}}]),LM=[{provide:og,useClass:class rY{addToWindow(e){wr.getAngularTestability=(r,s=!0)=>{const i=e.findTestabilityInTree(r,s);if(null==i)throw new Te(5103,!1);return i},wr.getAllAngularTestabilities=()=>e.getAllTestabilities(),wr.getAllAngularRootElements=()=>e.getAllRootElements(),wr.frameworkStabilizers||(wr.frameworkStabilizers=[]),wr.frameworkStabilizers.push(r=>{const s=wr.getAllAngularTestabilities();let i=s.length;const o=function(){i--,0==i&&r()};s.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?ku().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}}},{provide:ux,useClass:zw,deps:[Fr,Vw,og]},{provide:zw,useClass:zw,deps:[Fr,Vw,og]}],RM=[{provide:Du,useValue:"root"},{provide:I1,useFactory:function cY(){return new I1}},{provide:X6,useClass:$6,multi:!0,deps:[ol]},{provide:X6,useClass:aY,multi:!0,deps:[ol]},HM,_M,IM,{provide:nw,useExisting:HM},{provide:Z3,useClass:sY},[]];let dY=(()=>{class t{constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Tc({type:t});static \u0275inj=Oo({providers:[...RM,...LM],imports:[WX,FU]})}return t})();class DM{}class BM{constructor(e=new DM){this.ctx=e}readRecords(e){return Promise.all(e.map(n=>this.readRecord(n)))}writeRecords(e){return Promise.all(e.map(n=>this.writeRecord(n)))}}function r4(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every((n,r)=>r4(n,e[r]));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(t instanceof URL&&e instanceof URL)return t.toString()===e.toString();if(t instanceof Object&&e instanceof Object){const n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(s=>r4(t[s],e[s]))}return t===e}const pY=["abstract","constraint","keywords","lineage","onlineResources","spatialExtents","title"];function NM(t){return pY.includes(t)}var yi=xe(7059);function F(...t){return e=>t.reduce((n,r)=>r(n),e)}function vn(t){return e=>t(e)}function Mn(t){return e=>e.map(t)}function vo(t){return e=>e.filter(t)}function Oc(t){return e=>e.length>t?e[t]:null}function Gc(...t){return e=>{for(let n=0;n<t.length;n++){const r=t[n](e);if(null!==r)return r}return null}}function Jr(...t){return e=>t.map(n=>n(e))}function Q1(t){return e=>(t(e),e)}const li=t=>t;class fY extends Error{constructor(e){super(e)}}function n9(t){let e=null;try{e=(0,yi.parseXml)(t)}catch(n){throw new fY(n instanceof Error?n.message:n)}return e}function r9(t){function e(r){const s=function mY(t){const e=t.indexOf(":");return e>-1?t.substring(0,e):null}(r);"xmlns"===s||null===s||t.attributes[`xmlns:${s}`]||Yd[s]&&(t.attributes[`xmlns:${s}`]=Yd[s])}return t.attributes=t.attributes||{},function n(r){e(r.name);for(const i in r.attributes)e(i);i4(r).forEach(n)}(t),new yi.XmlDocument([t])}function $l(t){const e=t.indexOf(":");return e>-1?t.substring(e+1):t}function FM(t){const e=t.indexOf(":");return e>-1?t.substring(0,e):""}function s4(t){return t.name||""}function s9(t){return t.children.find(e=>e instanceof yi.XmlElement)}function yr(t,e=!0){return n=>{const r=$l(t);return n&&Array.isArray(n.children)?n.children.reduce(function s(i,o){return $l(s4(o))===r&&i.push(o),e&&Array.isArray(o.children)?[...i,...o.children.reduce(s,[])]:i},[]):[]}}function Gt(t,e=!0){return n=>yr(t,e)(n)[0]||null}function i4(t){return t&&Array.isArray(t.children)?[...t.children.filter(e=>e instanceof yi.XmlElement)]:[]}function gY(t){return i4(t)[0]??null}function Wr(...t){return e=>e&&Array.isArray(e.children)?e.children.reduce(function n(r){const s=$l(t[r]);return(i,o)=>$l(s4(o))!==s?i:r===t.length-1?[...i,o]:Array.isArray(o.children)?[...i,...o.children.reduce(n(r+1),[])]:i}(0),[]):[]}function Rr(...t){return e=>{const n=Wr(...t)(e);return n.length?n[0]:null}}function PM(t){return e=>{let n=e.parent;for(;n&&n instanceof yi.XmlElement;){if($l(s4(n))===$l(t))return n;n=n.parent}return null}}function ca(){return t=>{if(!t)return null;const e=Array.isArray(t.children)?t.children.find(n=>"text"===n.type):null;return e?e.text:""}}function Es(t){return e=>e&&e.attributes[t]||null}function Xd(t,e=0){const n=a=>a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(t instanceof yi.XmlDocument)return`<?xml version="1.0" encoding="UTF-8"?>${Xd(t.children[0])}`;if(t instanceof yi.XmlText){const a=t.text;return a&&""!==a.replace(/^\s+|\s+$/g,"")?n(a):""}if(!(t instanceof yi.XmlElement))return"\x3c!-- unknown --\x3e";const r="    ".repeat(e),s=Array.isArray(t.children)?t.children.map(a=>Xd(a,e+1)).filter(a=>""!==a).map((a,l,c)=>l<c.length-1?a.replace(/\n\s*$/g,""):a).join(""):"",i=Object.keys(t.attributes).reduce((a,l)=>a+` ${l}="${n(t.attributes[l])}"`,""),o="    ".repeat(Math.max(0,e-1));return""===s?`\n${r}<${t.name}${i}/>\n${o}`:`\n${r}<${t.name}${i}>${s}</${t.name}>\n${o}`}const Yd={gmd:"http://www.isotc211.org/2005/gmd",gco:"http://www.isotc211.org/2005/gco",gfc:"http://www.isotc211.org/2005/gfc",gml:"http://www.opengis.net/gml/3.2",xsi:"http://www.w3.org/2001/XMLSchema-instance",srv:"http://www.isotc211.org/2005/srv",gmx:"http://www.isotc211.org/2005/gmx",gts:"http://www.isotc211.org/2005/gts",gsr:"http://www.isotc211.org/2005/gsr",gmi:"http://www.isotc211.org/2005/gmi",xlink:"http://www.w3.org/1999/xlink",mdb:"http://standards.iso.org/iso/19115/-3/mdb/2.0",mdq:"http://standards.iso.org/iso/19157/-2/mdq/1.0",msr:"http://standards.iso.org/iso/19115/-3/msr/2.0",mrs:"http://standards.iso.org/iso/19115/-3/mrs/1.0",mmi:"http://standards.iso.org/iso/19115/-3/mmi/1.0",mrl:"http://standards.iso.org/iso/19115/-3/mrl/2.0",mdt:"http://standards.iso.org/iso/19115/-3/mdt/2.0",mrd:"http://standards.iso.org/iso/19115/-3/mrd/1.0",mds:"http://standards.iso.org/iso/19115/-3/mds/2.0",mpc:"http://standards.iso.org/iso/19115/-3/mpc/1.0",mcc:"http://standards.iso.org/iso/19115/-3/mcc/1.0",mac:"http://standards.iso.org/iso/19115/-3/mac/2.0",mco:"http://standards.iso.org/iso/19115/-3/mco/1.0",mda:"http://standards.iso.org/iso/19115/-3/mda/1.0",mex:"http://standards.iso.org/iso/19115/-3/mex/1.0",gex:"http://standards.iso.org/iso/19115/-3/gex/1.0",gcx:"http://standards.iso.org/iso/19115/-3/gcx/1.0",mas:"http://standards.iso.org/iso/19115/-3/mas/1.0",mri:"http://standards.iso.org/iso/19115/-3/mri/1.0",cit:"http://standards.iso.org/iso/19115/-3/cit/2.0",cat:"http://standards.iso.org/iso/19115/-3/cat/1.0",lan:"http://standards.iso.org/iso/19115/-3/lan/1.0",mrc:"http://standards.iso.org/iso/19115/-3/mrc/2.0",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",foaf:"http://xmlns.com/foaf/0.1/",xsd:"http://www.w3.org/2001/XMLSchema#",dcat:"http://www.w3.org/ns/dcat#",dct:"http://purl.org/dc/terms/",skos:"http://www.w3.org/2004/02/skos/core#",schema_org:"http://schema.org/",spdx:"https://spdx.org/rdf/terms/#",adms:"http://www.w3.org/ns/adms#",dqv:"http://www.w3.org/ns/dqv#",owl:"http://www.w3.org/2002/07/owl#",vcard:"http://www.w3.org/2006/vcard/ns#",time:"http://www.w3.org/2006/time#",locn:"http://www.w3.org/ns/locn#",mdcat:"https://data.vlaanderen.be/ns/metadata-dcat#"};function an(t){return()=>new yi.XmlElement(t,{},[])}function Dr(...t){return()=>{let e=null;for(const n of t)e=e?Ks(n)(e):an(n)();return e}}function bn(t,e){return n=>(n.attributes[t]=e,n)}function kM(t){return e=>{if(!e)return null;const n=t(),r=function vY(t){let e=t;for(;e.parent instanceof yi.XmlElement;)e=e.parent;return e}(n);return e.children.push(r),r.parent=e,n}}function Ut(...t){return e=>e?(t.filter(n=>n).forEach(n=>kM(n)(e)),e):null}function Ks(t){return e=>{if(!e)return null;const n=an(t)();return e.children.push(n),n.parent=e,n}}function Kd(...t){return e=>{let n=e;for(const r of t)n=Ks(r)(n);return n}}function ua(t){return Gc(Gt(t,!1),Ks(t))}function ni(...t){return e=>{let n=e;for(const r of t)n=ua(r)(n);return n}}function Wi(t){return e=>{if(!e)return null;const n=e.children.find(r=>r instanceof yi.XmlText);return n?n.text=t:e.children.push(new yi.XmlText(t)),e}}function Ri(t){return e=>{if(!e)return null;const n=$l(t),r=e.children.filter(s=>s instanceof yi.XmlElement&&$l(s4(s))===n);return r.forEach(s=>s.parent=null),e.children=e.children.filter(s=>-1===r.indexOf(s)),e}}function ha(t){return e=>{const n=t(e);return n.forEach(r=>r.parent=null),e.children=e.children.filter(r=>r instanceof yi.XmlElement&&-1===n.indexOf(r)),e}}function i9(t){return/wms/i.test(t)?"wms":/wfs/i.test(t)?"wfs":/wmts/i.test(t)?"wmts":/tms/i.test(t)?"tms":/wps/i.test(t)?"wps":/ogc\W*api\W*features/i.test(t)?"ogcFeatures":/esri/i.test(t)?"esriRest":/DOWNLOAD-1/i.test(t)?"GPFDL":/DB:POSTGIS/i.test(t)?"postgis":/stac\W*items/i.test(t)?"stac":"other"}function GM(t){return/shp|shapefile/i.test(t)?"x-gis/x-shapefile":t||null}const WM=class CY{constructor(e){this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},AY=class IY{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};var Zi=xe(2058);function ZM(){}function jM(t){let n,r,s,e=!1;return function(){const i=Array.prototype.slice.call(arguments);return(!e||this!==s||!(0,Zi.aI)(i,r))&&(e=!0,s=this,r=i,n=t.apply(this,arguments)),n}}function UM(t){for(const e in t)delete t[e]}function $M(t){let e;for(e in t)return!1;return!e}const _Y=class bY extends AY{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const r=this.listeners_||(this.listeners_={}),s=r[e]||(r[e]=[]);s.includes(n)||s.push(n)}dispatchEvent(e){const n="string"==typeof e,r=n?e:e.type,s=this.listeners_&&this.listeners_[r];if(!s)return;const i=n?new WM(e):e;i.target||(i.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let l;r in o||(o[r]=0,a[r]=0),++o[r];for(let c=0,u=s.length;c<u;++c)if(l="handleEvent"in s[c]?s[c].handleEvent(i):s[c].call(this,i),!1===l||i.propagationStopped){l=!1;break}if(0===--o[r]){let c=a[r];for(delete a[r];c--;)this.removeEventListener(r,ZM);delete o[r]}return l}disposeInternal(){this.listeners_&&UM(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return!!this.listeners_&&(e?e in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(e,n){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const s=r.indexOf(n);-1!==s&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[s]=ZM,++this.pendingRemovals_[e]):(r.splice(s,1),0===r.length&&delete this.listeners_[e]))}};function qd(t,e,n,r,s){if(r&&r!==t&&(n=n.bind(r)),s){const o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}const i={target:t,type:e,listener:n};return t.addEventListener(e,n),i}function XM(t,e,n,r){return qd(t,e,n,r,!0)}function o4(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),UM(t))}const SY=class a4 extends _Y{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const r=e.length,s=new Array(r);for(let i=0;i<r;++i)s[i]=qd(this,e[i],n);return s}return qd(this,e,n)}onceInternal(e,n){let r;if(Array.isArray(e)){const s=e.length;r=new Array(s);for(let i=0;i<s;++i)r[i]=XM(this,e[i],n)}else r=XM(this,e,n);return n.ol_key=r,r}unInternal(e,n){const r=n.ol_key;if(r)!function xY(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)o4(t[e]);else o4(t)}(r);else if(Array.isArray(e))for(let s=0,i=e.length;s<i;++s)this.removeEventListener(e[s],n);else this.removeEventListener(e,n)}};function us(){throw new Error("Unimplemented abstract method.")}let HY=0;class YM extends WM{constructor(e,n,r){super(e),this.key=n,this.oldValue=r}}const KM=class zY extends SY{constructor(e){super(),function MY(t){t.ol_uid||(t.ol_uid=String(++HY))}(this),this.values_=null,void 0!==e&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new YM(r,e,n)),r="propertychange",this.hasListener(r)&&this.dispatchEvent(new YM(r,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,r){const s=this.values_||(this.values_={});if(r)s[e]=n;else{const i=s[e];s[e]=n,i!==n&&this.notify(e,i)}}setProperties(e,n){for(const r in e)this.set(r,e[r],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],$M(this.values_)&&(this.values_=null),n||this.notify(e,r)}}};var VY=xe(5940);class a9 extends KM{constructor(e){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e&&("function"==typeof e.getSimplifiedGeometry?this.setGeometry(e):this.setProperties(e))}clone(){const e=new a9(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(o4(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=qd(e,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?function EY(t){if("function"==typeof t)return t;let e;return Array.isArray(t)?e=t:((0,VY.v)("function"==typeof t.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const l9=a9;function d9(t,e,n,r,s,i,o,a){const l=Math.sin(i),c=Math.cos(i);return t[0]=r*c,t[1]=s*l,t[2]=-r*l,t[3]=s*c,t[4]=o*r*c-a*r*l+e,t[5]=o*s*l+a*s*c+n,t}new Array(6);var Zr=xe(3467),Ts=xe(6016);function JM(t,e,n,r,s,i){i=i||[];let o=0;for(let a=e;a<n;a+=r){const l=t[a],c=t[a+1];i[o++]=s[0]*l+s[2]*c+s[4],i[o++]=s[1]*l+s[3]*c+s[5]}return i&&i.length!=o&&(i.length=o),i}const QM=[1,0,0,1,0,0],p9=class FY extends KM{constructor(){super(),this.extent_=(0,Zr.S5)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=jM((e,n,r)=>{if(!r)return this.getSimplifiedGeometry(n);const s=this.clone();return s.applyTransform(r),s.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return us()}closestPointXY(e,n,r,s){return us()}containsXY(e,n){const r=this.getClosestPoint([e,n]);return r[0]===e&&r[1]===n}getClosestPoint(e,n){return this.closestPointXY(e[0],e[1],n=n||[NaN,NaN],1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return us()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&(0,Zr.aZ)(n),this.extentRevision_=this.getRevision()}return(0,Zr.$u)(this.extent_,e)}rotate(e,n){us()}scale(e,n,r){us()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return us()}getType(){return us()}applyTransform(e){us()}intersectsExtent(e){return us()}translate(e,n){us()}transform(e,n){const r=(0,Ts.Jt)(e),s="tile-pixels"==r.getUnits()?function(i,o,a){const l=r.getExtent(),c=r.getWorldExtent(),u=(0,Zr.Oq)(c)/(0,Zr.Oq)(l);return d9(QM,c[0],c[3],u,-u,0,0,0),JM(i,0,i.length,a,QM,o),(0,Ts.RG)(r,n)(i,o,a)}:(0,Ts.RG)(r,n);return this.applyTransform(s),this}};function eu(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function ez(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}const tu=class PY extends p9{constructor(){super(),this.layout="XY",this.stride=2}computeExtent(e){return(0,Zr.Vy)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return us()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=ez(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){us()}setLayout(e,n,r){let s;if(e)s=ez(e);else{for(let i=0;i<r;++i){if(0===n.length)return this.layout="XY",void(this.stride=2);n=n[0]}s=n.length,e=eu(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,n){const r=this.getFlatCoordinates();if(r){const s=this.getStride();(function DY(t,e,n,r,s,i,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=i[0],u=i[1];let h=0;for(let d=e;d<n;d+=r){const p=t[d]-c,m=t[d+1]-u;o[h++]=c+p*a-m*l,o[h++]=u+p*l+m*a;for(let y=d+2;y<d+r;++y)o[h++]=t[y]}o&&o.length!=h&&(o.length=h)})(r,0,r.length,s,e,n,r),this.changed()}}scale(e,n,r){void 0===n&&(n=e),r||(r=(0,Zr.q1)(this.getExtent()));const s=this.getFlatCoordinates();if(s){const i=this.getStride();(function BY(t,e,n,r,s,i,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=e;h<n;h+=r){const p=t[h+1]-c;a[u++]=l+s*(t[h]-l),a[u++]=c+i*p;for(let m=h+2;m<h+r;++m)a[u++]=t[m]}a&&a.length!=u&&(a.length=u)})(s,0,s.length,i,e,n,r,s),this.changed()}}translate(e,n){const r=this.getFlatCoordinates();if(r){const s=this.getStride();(function NY(t,e,n,r,s,i,o){o=o||[];let a=0;for(let l=e;l<n;l+=r){o[a++]=t[l]+s,o[a++]=t[l+1]+i;for(let c=l+2;c<l+r;++c)o[a++]=t[c]}o&&o.length!=a&&(o.length=a)})(r,0,r.length,s,e,n,r),this.changed()}}};var gl=xe(9973);function tz(t,e,n,r,s,i,o){const a=t[e],l=t[e+1],c=t[n]-a,u=t[n+1]-l;let h;if(0===c&&0===u)h=e;else{const d=((s-a)*c+(i-l)*u)/(c*c+u*u);if(d>1)h=n;else{if(d>0){for(let p=0;p<r;++p)o[p]=(0,gl.Cc)(t[e+p],t[n+p],d);return void(o.length=r)}h=e}}for(let d=0;d<r;++d)o[d]=t[h+d];o.length=r}function f9(t,e,n,r,s){let i=t[e],o=t[e+1];for(e+=r;e<n;e+=r){const a=t[e],l=t[e+1],c=(0,gl.hG)(i,o,a,l);c>s&&(s=c),i=a,o=l}return s}function g9(t,e,n,r,s){for(let i=0,o=n.length;i<o;++i){const a=n[i];s=f9(t,e,a,r,s),e=a}return s}function m9(t,e,n,r,s,i,o,a,l,c,u){if(e==n)return c;let h,d;if(0===s){if(d=(0,gl.hG)(o,a,t[e],t[e+1]),d<c){for(h=0;h<r;++h)l[h]=t[e+h];return l.length=r,d}return c}u=u||[NaN,NaN];let p=e+r;for(;p<n;)if(tz(t,p-r,p,r,o,a,u),d=(0,gl.hG)(o,a,u[0],u[1]),d<c){for(c=d,h=0;h<r;++h)l[h]=u[h];l.length=r,p+=r}else p+=r*Math.max((Math.sqrt(d)-Math.sqrt(c))/s|0,1);if(i&&(tz(t,n-r,e,r,o,a,u),d=(0,gl.hG)(o,a,u[0],u[1]),d<c)){for(c=d,h=0;h<r;++h)l[h]=u[h];l.length=r}return c}function v9(t,e,n,r,s,i,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=n.length;h<d;++h){const p=n[h];c=m9(t,e,p,r,s,i,o,a,l,c,u),e=p}return c}function l4(t,e,n,r){for(let s=0,i=n.length;s<i;++s){const o=n[s];for(let a=0;a<r;++a)t[e++]=o[a]}return e}function Qd(t,e,n,r,s){s=s||[];let i=0;for(let o=0,a=n.length;o<a;++o){const l=l4(t,e,n[o],r);s[i++]=l,e=l}return s.length=i,s}function nz(t,e,n,r,s){s=s||[];let i=0;for(let o=0,a=n.length;o<a;++o){const l=Qd(t,e,n[o],r,s[i]);0===l.length&&(l[0]=e),s[i++]=l,e=l[l.length-1]}return s.length=i,s}function e0(t,e,n,r,s,i,o){const a=(n-e)/r;if(a<3){for(;e<n;e+=r)i[o++]=t[e],i[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,n-r];let u=0;for(;c.length>0;){const h=c.pop(),d=c.pop();let p=0;const m=t[d],y=t[d+1],H=t[h],T=t[h+1];for(let V=d+r;V<h;V+=r){const D=(0,gl.Q1)(t[V],t[V+1],m,y,H,T);D>p&&(u=V,p=D)}p>s&&(l[(u-e)/r]=1,d+r<u&&c.push(d,u),u+r<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(i[o++]=t[e+h*r],i[o++]=t[e+h*r+1]);return o}function w9(t,e,n,r,s,i,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=e0(t,e,u,r,s,i,o),a.push(o),e=u}return o}function E2(t,e){return e*Math.round(t/e)}function ZY(t,e,n,r,s,i,o){if(e==n)return o;let c,u,a=E2(t[e],s),l=E2(t[e+1],s);e+=r,i[o++]=a,i[o++]=l;do{if(c=E2(t[e],s),u=E2(t[e+1],s),(e+=r)==n)return i[o++]=c,i[o++]=u,o}while(c==a&&u==l);for(;e<n;){const h=E2(t[e],s),d=E2(t[e+1],s);if(e+=r,h==c&&d==u)continue;const p=c-a,m=u-l,y=h-a,H=d-l;p*H==m*y&&(p<0&&y<p||p==y||p>0&&y>p)&&(m<0&&H<m||m==H||m>0&&H>m)?(c=h,u=d):(i[o++]=c,i[o++]=u,a=c,l=u,c=h,u=d)}return i[o++]=c,i[o++]=u,o}function C9(t,e,n,r,s,i,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=ZY(t,e,u,r,s,i,o),a.push(o),e=u}return o}var UY=xe(3846);function c4(t,e,n,r,s){s=void 0!==s?s:[];let i=0;for(let o=e;o<n;o+=r)s[i++]=t.slice(o,o+r);return s.length=i,s}function y9(t,e,n,r,s){s=void 0!==s?s:[];let i=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];s[i++]=c4(t,e,l,r,s[i]),e=l}return s.length=i,s}function u4(t,e,n,r,s,i,o){let a,l;const c=(n-e)/r;if(1===c)a=e;else if(2===c)a=e,l=s;else if(0!==c){let u=t[e],h=t[e+1],d=0;const p=[0];for(let H=e+r;H<n;H+=r){const T=t[H],V=t[H+1];d+=Math.sqrt((T-u)*(T-u)+(V-h)*(V-h)),p.push(d),u=T,h=V}const m=s*d,y=(0,Zi.El)(p,m);y<0?(l=(m-p[-y-2])/(p[-y-1]-p[-y-2]),a=e+(-y-2)*r):a=e+y*r}o=o>1?o:2,i=i||new Array(o);for(let u=0;u<o;++u)i[u]=void 0===a?NaN:void 0===l?t[a+u]:(0,gl.Cc)(t[a+u],t[a+r+u],l);return i}function I9(t,e,n,r,s,i){if(n==e)return null;let o;if(s<t[e+r-1])return i?(o=t.slice(e,e+r),o[r-1]=s,o):null;if(t[n-1]<s)return i?(o=t.slice(n-r,n),o[r-1]=s,o):null;if(s==t[e+r-1])return t.slice(e,e+r);let a=e/r,l=n/r;for(;a<l;){const d=a+l>>1;s<t[(d+1)*r-1]?l=d:a=d+1}const c=t[a*r-1];if(s==c)return t.slice((a-1)*r,(a-1)*r+r);const h=(s-c)/(t[(a+1)*r-1]-c);o=[];for(let d=0;d<r-1;++d)o.push((0,gl.Cc)(t[(a-1)*r+d],t[a*r+d],h));return o.push(s),o}var h4=xe(9542);class d4 extends tu{constructor(e,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?this.setCoordinates(e,n):this.setFlatCoordinates(n,e)}appendCoordinate(e){(0,Zi.X$)(this.flatCoordinates,e),this.changed()}clone(){const e=new d4(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,s){return s<(0,Zr.Ld)(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(f9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),m9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,r,s))}forEachSegment(e){return(0,UY.j)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,n){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:I9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n=void 0!==n&&n)}getCoordinates(){return c4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,n){return u4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)}getLength(){return function rz(t,e,n,r){let s=t[e],i=t[e+1],o=0;for(let a=e+r;a<n;a+=r){const l=t[a],c=t[a+1];o+=Math.sqrt((l-s)*(l-s)+(c-i)*(c-i)),s=l,i=c}return o}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const n=[];return n.length=e0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new d4(n,"XY")}getType(){return"LineString"}intersectsExtent(e){return(0,h4.gp)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=l4(this.flatCoordinates,0,e,this.stride),this.changed()}}const t0=d4;function sz(t,e,n,r){let s=0,i=t[n-r],o=t[n-r+1];for(;e<n;e+=r){const a=t[e],l=t[e+1];s+=o*a-i*l,i=a,o=l}return s/2}function iz(t,e,n,r){let s=0;for(let i=0,o=n.length;i<o;++i){const a=n[i];s+=sz(t,e,a,r),e=a}return s}class p4 extends tu{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?this.setCoordinates(e,n):this.setFlatCoordinates(n,e)}clone(){return new p4(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,r,s){return s<(0,Zr.Ld)(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(f9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),m9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,r,s))}getArea(){return sz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return c4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=e0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new p4(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=l4(this.flatCoordinates,0,e,this.stride),this.changed()}}const A9=p4;class f4 extends tu{constructor(e,n,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(void 0!==n&&r)this.setFlatCoordinates(n,e),this.ends_=r;else{const s=e,i=[],o=[];for(let l=0,c=s.length;l<c;++l)(0,Zi.X$)(i,s[l].getFlatCoordinates()),o.push(i.length);const a=0===s.length?this.getLayout():s[0].getLayout();this.setFlatCoordinates(a,i),this.ends_=o}}appendLineString(e){(0,Zi.X$)(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new f4(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,s){return s<(0,Zr.Ld)(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(g9(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),v9(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,n,r,s))}getCoordinateAtM(e,n,r){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function XY(t,e,n,r,s,i,o){if(o)return I9(t,e,n[n.length-1],r,s,i);let a;if(s<t[r-1])return i?(a=t.slice(0,r),a[r-1]=s,a):null;if(t[t.length-1]<s)return i?(a=t.slice(t.length-r),a[r-1]=s,a):null;for(let l=0,c=n.length;l<c;++l){const u=n[l];if(e!=u){if(s<t[e+r-1])return null;if(s<=t[u-1])return I9(t,e,u,r,s,!1);e=u}}return null}(this.flatCoordinates,0,this.ends_,this.stride,e,n=void 0!==n&&n,r=void 0!==r&&r)}getCoordinates(){return y9(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new t0(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,n=this.ends_,r=this.layout,s=[];let i=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new t0(e.slice(i,l),r);s.push(c),i=l}return s}getFlatMidpoints(){const e=[],n=this.flatCoordinates;let r=0;const s=this.ends_,i=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o],c=u4(n,r,l,i,.5);(0,Zi.X$)(e,c),r=l}return e}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=w9(this.flatCoordinates,0,this.ends_,this.stride,e,n,0,r),new f4(n,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return(0,h4.fB)(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Qd(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}}const b9=f4;class _9 extends tu{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new _9(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,s){const i=this.flatCoordinates,o=(0,gl.hG)(e,n,i[0],i[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)r[l]=i[l];return r.length=a,o}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return(0,Zr.dP)(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return(0,Zr.Rj)(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function GY(t,e,n){for(let s=0,i=n.length;s<i;++s)t[e++]=n[s];return e}(this.flatCoordinates,0,e),this.changed()}}const n0=_9;class x9 extends tu{constructor(e,n){super(),n&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendPoint(e){(0,Zi.X$)(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new x9(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,s){if(s<(0,Zr.Ld)(this.getExtent(),e,n))return s;const i=this.flatCoordinates,o=this.stride;for(let a=0,l=i.length;a<l;a+=o){const c=(0,gl.hG)(e,n,i[a],i[a+1]);if(c<s){s=c;for(let u=0;u<o;++u)r[u]=i[a+u];r.length=o}}return s}getCoordinates(){return c4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){return e<0||this.flatCoordinates.length/this.stride<=e?null:new n0(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,n=this.layout,r=this.stride,s=[];for(let i=0,o=e.length;i<o;i+=r){const a=new n0(e.slice(i,i+r),n);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(e){const n=this.flatCoordinates,r=this.stride;for(let s=0,i=n.length;s<i;s+=r)if((0,Zr.Rj)(e,n[s],n[s+1]))return!0;return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=l4(this.flatCoordinates,0,e,this.stride),this.changed()}}const S9=x9;var H9=xe(9749);function M9(t,e,n,r,s,i,o){let a,l,c,u,h,d,p;const m=s[i+1],y=[];for(let V=0,J=n.length;V<J;++V){const ie=n[V];for(u=t[ie-r],d=t[ie-r+1],a=e;a<ie;a+=r)h=t[a],p=t[a+1],(m<=d&&p<=m||d<=m&&m<=p)&&(c=(m-d)/(p-d)*(h-u)+u,y.push(c)),u=h,d=p}let H=NaN,T=-1/0;for(y.sort(Zi.V_),u=y[0],a=1,l=y.length;a<l;++a){h=y[a];const V=Math.abs(h-u);V>T&&(c=(u+h)/2,(0,H9.zb)(t,e,n,r,c,m)&&(H=c,T=V)),u=h}return isNaN(H)&&(H=s[i]),o?(o.push(H,m,T),o):[H,m,T]}function oz(t,e,n,r,s){let i=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];i=M9(t,e,l,r,s,2*o,i),e=l[l.length-1]}return i}function KY(t,e,n,r){for(;e<n-r;){for(let s=0;s<r;++s){const i=t[e+s];t[e+s]=t[n-r+s],t[n-r+s]=i}e+=r,n-=r}}function z9(t,e,n,r){let s=0,i=t[n-r],o=t[n-r+1];for(;e<n;e+=r){const a=t[e],l=t[e+1];s+=(a-i)*(l+o),i=a,o=l}return 0===s?void 0:s>0}function V9(t,e,n,r,s){s=void 0!==s&&s;for(let i=0,o=n.length;i<o;++i){const a=n[i],l=z9(t,e,a,r);if(0===i){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;e=a}return!0}function az(t,e,n,r,s){for(let i=0,o=n.length;i<o;++i){const a=n[i];if(!V9(t,e,a,r,s))return!1;a.length&&(e=a[a.length-1])}return!0}function g4(t,e,n,r,s){s=void 0!==s&&s;for(let i=0,o=n.length;i<o;++i){const a=n[i],l=z9(t,e,a,r);(0===i?s&&l||!s&&!l:s&&!l||!s&&l)&&KY(t,e,a,r),e=a}return e}function E9(t,e,n,r,s){for(let i=0,o=n.length;i<o;++i)e=g4(t,e,n[i],r,s);return e}class nu extends tu{constructor(e,n,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==n&&r?(this.setFlatCoordinates(n,e),this.ends_=r):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?(0,Zi.X$)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new nu(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,s){return s<(0,Zr.Ld)(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(g9(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),v9(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,r,s))}containsXY(e,n){return(0,H9.zb)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return iz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return void 0!==e?(n=this.getOrientedFlatCoordinates().slice(),g4(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,y9(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=(0,Zr.q1)(this.getExtent());this.flatInteriorPoint_=M9(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new n0(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new A9(this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,r=this.ends_,s=[];let i=0;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=new A9(n.slice(i,l),e);s.push(c),i=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;V9(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=g4(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=C9(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,r),new nu(n,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return(0,h4.HT)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Qd(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}}const r0=nu;function lz(t,e,n,r){const s=[];let i=(0,Zr.S5)();for(let o=0,a=n.length;o<a;++o){const l=n[o];i=(0,Zr.Vy)(t,e,l[0],r),s.push((i[0]+i[2])/2,(i[1]+i[3])/2),e=l[l.length-1]}return s}class m4 extends tu{constructor(e,n,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const s=e,i=[],o=[];for(let a=0,l=s.length;a<l;++a){const c=s[a],u=i.length,h=c.getEnds();for(let d=0,p=h.length;d<p;++d)h[d]+=u;(0,Zi.X$)(i,c.getFlatCoordinates()),o.push(h)}n=0===s.length?this.getLayout():s[0].getLayout(),e=i,r=o}void 0!==n&&r?(this.setFlatCoordinates(n,e),this.endss_=r):this.setCoordinates(e,n)}appendPolygon(e){let n;if(this.flatCoordinates){const r=this.flatCoordinates.length;(0,Zi.X$)(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let s=0,i=n.length;s<i;++s)n[s]+=r}else this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();this.endss_.push(n),this.changed()}clone(){const e=this.endss_.length,n=new Array(e);for(let s=0;s<e;++s)n[s]=this.endss_[s].slice();const r=new m4(this.flatCoordinates.slice(),this.layout,n);return r.applyProperties(this),r}closestPointXY(e,n,r,s){return s<(0,Zr.Ld)(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function kY(t,e,n,r,s){for(let i=0,o=n.length;i<o;++i){const a=n[i];s=g9(t,e,a,r,s),e=a[a.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function OY(t,e,n,r,s,i,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=n.length;h<d;++h){const p=n[h];c=v9(t,e,p,r,s,i,o,a,l,c,u),e=p[p.length-1]}return c}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,n,r,s))}containsXY(e,n){return(0,H9.Gd)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,n)}getArea(){return function YY(t,e,n,r){let s=0;for(let i=0,o=n.length;i<o;++i){const a=n[i];s+=iz(t,e,a,r),e=a[a.length-1]}return s}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let n;return void 0!==e?(n=this.getOrientedFlatCoordinates().slice(),E9(n,0,this.endss_,this.stride,e)):n=this.flatCoordinates,function $Y(t,e,n,r,s){s=void 0!==s?s:[];let i=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];s[i++]=1===l.length&&l[0]===e?[]:y9(t,e,l,r,s[i]),e=l[l.length-1]}return s.length=i,s}(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=lz(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=oz(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new S9(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;az(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=E9(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=function jY(t,e,n,r,s,i,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l],h=[];o=C9(t,e,u,r,s,i,o,h),a.push(h),e=u[u.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),n,0,r),new m4(n,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let n;if(0===e)n=0;else{const i=this.endss_[e-1];n=i[i.length-1]}const r=this.endss_[e].slice(),s=r[r.length-1];if(0!==n)for(let i=0,o=r.length;i<o;++i)r[i]-=n;return new r0(this.flatCoordinates.slice(n,s),this.layout,r)}getPolygons(){const e=this.layout,n=this.flatCoordinates,r=this.endss_,s=[];let i=0;for(let o=0,a=r.length;o<a;++o){const l=r[o].slice(),c=l[l.length-1];if(0!==i)for(let h=0,d=l.length;h<d;++h)l[h]-=i;const u=new r0(n.slice(i,c),e,l);s.push(u),i=c}return s}getType(){return"MultiPolygon"}intersectsExtent(e){return(0,h4.Wp)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=nz(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{const s=r[r.length-1];this.flatCoordinates.length=0===s.length?0:s[s.length-1]}this.changed()}}const T9=m4,cz=[1,0,0,1,0,0];class T2{constructor(e,n,r,s,i,o){this.id_=o,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=i,this.stride_=s}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,Zr.dP)(this.flatCoordinates_):(0,Zr.Vy)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=(0,Zr.q1)(this.getExtent());this.flatInteriorPoints_=M9(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=function qY(t,e){const n=[];let i,r=0,s=0;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=z9(t,r,l,2);if(void 0===i&&(i=c),c===i)n.push(e.slice(s,o+1));else{if(0===n.length)continue;n[n.length-1].push(e[s])}s=o+1,r=l}return n}(this.flatCoordinates_,this.ends_),n=lz(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=oz(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=u4(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const r=this.ends_;for(let s=0,i=r.length;s<i;++s){const o=r[s],a=u4(e,n,o,2,.5);(0,Zi.X$)(this.flatMidpoints_,a),n=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){const n=(e=(0,Ts.Jt)(e)).getExtent(),r=e.getWorldExtent();if(n&&r){const s=(0,Zr.Oq)(r)/(0,Zr.Oq)(n);d9(cz,r[0],r[3],s,-s,0,0,0),JM(this.flatCoordinates_,0,this.flatCoordinates_.length,2,cz,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new T2(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=jM((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const r=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":r.length=e0(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),s=[r.length];break;case"MultiLineString":s=[],r.length=w9(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,s);break;case"Polygon":s=[],r.length=C9(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,s)}return s&&(this.simplifiedGeometry_=new T2(this.type_,r,s,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}T2.prototype.getFlatCoordinates=T2.prototype.getOrientedFlatCoordinates;const uz=T2;class v4 extends p9{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(o4),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,n=this.geometries_.length;e<n;++e)this.changeEventsKeys_.push(qd(this.geometries_[e],"change",this.changed,this))}clone(){const e=new v4(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,n,r,s){if(s<(0,Zr.Ld)(this.getExtent(),e,n))return s;const i=this.geometries_;for(let o=0,a=i.length;o<a;++o)s=i[o].closestPointXY(e,n,r,s);return s}containsXY(e,n){const r=this.geometries_;for(let s=0,i=r.length;s<i;++s)if(r[s].containsXY(e,n))return!0;return!1}computeExtent(e){(0,Zr.aZ)(e);const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)(0,Zr.X$)(e,n[r].getExtent());return e}getGeometries(){return hz(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].getType()===this.getType()?e=e.concat(n[r].getGeometriesArrayRecursive()):e.push(n[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],r=this.geometries_;let s=!1;for(let i=0,o=r.length;i<o;++i){const a=r[i],l=a.getSimplifiedGeometry(e);n.push(l),l!==a&&(s=!0)}if(s){const i=new v4(null);return i.setGeometriesArray(n),i}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)if(n[r].intersectsExtent(e))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(e,n){const r=this.geometries_;for(let s=0,i=r.length;s<i;++s)r[s].rotate(e,n);this.changed()}scale(e,n,r){r||(r=(0,Zr.q1)(this.getExtent()));const s=this.geometries_;for(let i=0,o=s.length;i<o;++i)s[i].scale(e,n,r);this.changed()}setGeometries(e){this.setGeometriesArray(hz(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].applyTransform(e);this.changed()}translate(e,n){const r=this.geometries_;for(let s=0,i=r.length;s<i;++s)r[s].translate(e,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function hz(t){const e=[];for(let n=0,r=t.length;n<r;++n)e.push(t[n].clone());return e}const eK=v4,dz=class tK{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=l9,this.supportedMediaTypes=null}getReadOptions(e,n){if(n){let r=n.dataProjection?(0,Ts.Jt)(n.dataProjection):this.readProjection(e);n.extent&&r&&"tile-pixels"===r.getUnits()&&(r=(0,Ts.Jt)(r),r.setWorldExtent(n.extent)),n={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return us()}readFeature(e,n){return us()}readFeatures(e,n){return us()}readGeometry(e,n){return us()}readProjection(e){return us()}writeFeature(e,n){return us()}writeFeatures(e,n){return us()}writeGeometry(e,n){return us()}};function L2(t,e,n){const r=n?(0,Ts.Jt)(n.featureProjection):null,s=n?(0,Ts.Jt)(n.dataProjection):null;let i=t;if(r&&s&&!(0,Ts.tI)(r,s)){e&&(i=t.clone());const o=e?r:s,a=e?s:r;"tile-pixels"===o.getUnits()?i.transform(o,a):i.applyTransform((0,Ts.RG)(o,a))}if(e&&n&&void 0!==n.decimals){const o=Math.pow(10,n.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};i===t&&(i=t.clone()),i.applyTransform(a)}return i}function L9(t,e){const n=e?(0,Ts.Jt)(e.featureProjection):null,r=e?(0,Ts.Jt)(e.dataProjection):null;return n&&r&&!(0,Ts.tI)(n,r)?(0,Ts.DI)(t,r,n):t}const nK={Point:n0,LineString:t0,Polygon:r0,MultiPoint:S9,MultiLineString:b9,MultiPolygon:T9};function pz(t,e){const n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map(i=>pz({...t,geometry:i})).flat();const r="MultiPolygon"===n.type?"Polygon":n.type;if("GeometryCollection"===r||"Circle"===r)throw new Error("Unsupported geometry type: "+r);const s=n.layout.length;return L2(new uz(r,"Polygon"===r?function rK(t,e,n){return Array.isArray(e[0])?(az(t,0,e,n)||E9(t=t.slice(),0,e,n),t):(V9(t,0,e,n)||g4(t=t.slice(),0,e,n),t)}(n.flatCoordinates,n.ends,s):n.flatCoordinates,n.ends?.flat(),s,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function R9(t,e){if(!t)return null;if(Array.isArray(t)){const r=t.map(s=>R9(s,e));return new eK(r)}return L2(new(0,nK[t.type])(t.flatCoordinates,t.layout,t.ends),!1,e)}function Ls(t,e){return wz().createElementNS(t,e)}function w4(t,e){return fz(t,e,[]).join("")}function fz(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n.push(e?String(t.nodeValue).replace(/(\r\n|\r|\n)/g,""):t.nodeValue);else{let r;for(r=t.firstChild;r;r=r.nextSibling)fz(r,e,n)}return n}function C4(t){return"documentElement"in t}function s0(t){return(new DOMParser).parseFromString(t,"application/xml")}function gz(t,e){return function(n,r){const s=t.call(void 0!==e?e:this,n,r);void 0!==s&&(0,Zi.X$)(r[r.length-1],s)}}function Jn(t,e){return function(n,r){const s=t.call(void 0!==e?e:this,n,r);void 0!==s&&r[r.length-1].push(s)}}function In(t,e){return function(n,r){const s=t.call(void 0!==e?e:this,n,r);void 0!==s&&(r[r.length-1]=s)}}function qt(t,e){return function(n,r,s){t.call(void 0!==e?e:this,n,r,s),s[s.length-1].node.appendChild(n)}}function ru(t,e){return function(n,r,s){let a=t;return void 0===a&&(a=s),Ls(void 0!==e?e:r[r.length-1].node.namespaceURI,a)}}const mz=ru();function R2(t,e,n,r){let s;for(s=e.firstElementChild;s;s=s.nextElementSibling){const i=t[s.namespaceURI];if(void 0!==i){const o=i[s.localName];void 0!==o&&o.call(r,s,n)}}}function Rs(t,e,n,r,s){return r.push(t),R2(e,n,r,s),r.pop()}function wo(t,e,n,r,s,i,o){return s.push(t),function vz(t,e,n,r,s,i){const o=(void 0!==s?s:n).length;let a,l;for(let c=0;c<o;++c)a=n[c],void 0!==a&&(l=e.call(void 0!==i?i:this,a,r,void 0!==s?s[c]:void 0),void 0!==l&&t[l.namespaceURI][l.localName].call(i,l,a,r))}(e,n,r,s,i,o),s.pop()}let y4,I4;function wz(){return void 0===I4&&typeof document<"u"&&(I4=document.implementation.createDocument("","",null)),I4}const lK=class aK extends dz{constructor(){super(),this.xmlSerializer_=function oK(){return void 0===y4&&typeof XMLSerializer<"u"&&(y4=new XMLSerializer),y4}()}getType(){return"xml"}readFeature(e,n){if(!e)return null;if("string"==typeof e){const r=s0(e);return this.readFeatureFromDocument(r,n)}return C4(e)?this.readFeatureFromDocument(e,n):this.readFeatureFromNode(e,n)}readFeatureFromDocument(e,n){const r=this.readFeaturesFromDocument(e,n);return r.length>0?r[0]:null}readFeatureFromNode(e,n){return null}readFeatures(e,n){if(!e)return[];if("string"==typeof e){const r=s0(e);return this.readFeaturesFromDocument(r,n)}return C4(e)?this.readFeaturesFromDocument(e,n):this.readFeaturesFromNode(e,n)}readFeaturesFromDocument(e,n){const r=[];for(let s=e.firstChild;s;s=s.nextSibling)s.nodeType==Node.ELEMENT_NODE&&(0,Zi.X$)(r,this.readFeaturesFromNode(s,n));return r}readFeaturesFromNode(e,n){return us()}readGeometry(e,n){if(!e)return null;if("string"==typeof e){const r=s0(e);return this.readGeometryFromDocument(r,n)}return C4(e)?this.readGeometryFromDocument(e,n):this.readGeometryFromNode(e,n)}readGeometryFromDocument(e,n){return null}readGeometryFromNode(e,n){return null}readProjection(e){if(!e)return null;if("string"==typeof e){const n=s0(e);return this.readProjectionFromDocument(n)}return C4(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,n){const r=this.writeFeatureNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,n){return null}writeFeatures(e,n){const r=this.writeFeaturesNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,n){return null}writeGeometry(e,n){const r=this.writeGeometryNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,n){return null}},A4="http://www.opengis.net/gml",cK=/^\s*$/;class ri extends lK{constructor(e){super(),this.featureType=(e=e||{}).featureType,this.featureNS=e.featureNS,this.srsName=e.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:Jn(this.readFeaturesInternal),featureMembers:In(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(e,n){const r=e.localName;let s=null;if("FeatureCollection"==r)s=Rs([],this.FEATURE_COLLECTION_PARSERS,e,n,this);else if("featureMembers"==r||"featureMember"==r||"member"==r){const i=n[0];let o=i.featureType,a=i.featureNS;const l="p",c="p0";if(!o&&e.childNodes){o=[],a={};for(let d=0,p=e.childNodes.length;d<p;++d){const m=e.childNodes[d];if(1===m.nodeType){const y=m.nodeName.split(":").pop();if(!o.includes(y)){let H="",T=0;const V=m.namespaceURI;for(const J in a){if(a[J]===V){H=J;break}++T}H||(H=l+T,a[H]=V),o.push(H+":"+y)}}}"featureMember"!=r&&(i.featureType=o,i.featureNS=a)}if("string"==typeof a){const d=a;a={},a[c]=d}const u={},h=Array.isArray(o)?o:[o];for(const d in a){const p={};for(let m=0,y=h.length;m<y;++m)(h[m].includes(":")?h[m].split(":")[0]:c)===d&&(p[h[m].split(":").pop()]="featureMembers"==r?Jn(this.readFeatureElement,this):In(this.readFeatureElement,this));u[a[d]]=p}s=Rs("featureMember"==r||"member"==r?void 0:[],u,e,n)}return null===s&&(s=[]),s}readGeometryOrExtent(e,n){const r=n[0];return r.srsName=e.firstElementChild.getAttribute("srsName"),r.srsDimension=e.firstElementChild.getAttribute("srsDimension"),Rs(null,this.GEOMETRY_PARSERS,e,n,this)}readExtentElement(e,n){const r=n[0],s=this.readGeometryOrExtent(e,n);return s?L9(s,r):void 0}readGeometryElement(e,n){const r=n[0],s=this.readGeometryOrExtent(e,n);return s?L2(s,!1,r):void 0}readFeatureElementInternal(e,n,r){let s;const i={};for(let l=e.firstElementChild;l;l=l.nextElementSibling){let c;const u=l.localName;0===l.childNodes.length||1===l.childNodes.length&&(3===l.firstChild.nodeType||4===l.firstChild.nodeType)?(c=w4(l,!1),cK.test(c)&&(c=void 0)):(r&&(c="boundedBy"===u?this.readExtentElement(l,n):this.readGeometryElement(l,n)),c?"boundedBy"!==u&&(s=u):c=this.readFeatureElementInternal(l,n,!1));const h=l.attributes.length;if(h>0&&!(c instanceof p9)){c={_content_:c};for(let d=0;d<h;d++)c[l.attributes[d].name]=l.attributes[d].value}i[u]?(i[u]instanceof Array||(i[u]=[i[u]]),i[u].push(c)):i[u]=c}if(!r)return i;const o=new l9(i);s&&o.setGeometryName(s);const a=e.getAttribute("fid")||function iK(t,e,n){return t.getAttributeNS(e,n)||""}(e,this.namespace,"id");return a&&o.setId(a),o}readFeatureElement(e,n){return this.readFeatureElementInternal(e,n,!0)}readPoint(e,n){const r=this.readFlatCoordinatesFromNode(e,n);if(r)return new n0(r,"XYZ")}readMultiPoint(e,n){const r=Rs([],this.MULTIPOINT_PARSERS,e,n,this);if(r)return new S9(r)}readMultiLineString(e,n){const r=Rs([],this.MULTILINESTRING_PARSERS,e,n,this);if(r)return new b9(r)}readMultiPolygon(e,n){const r=Rs([],this.MULTIPOLYGON_PARSERS,e,n,this);if(r)return new T9(r)}pointMemberParser(e,n){R2(this.POINTMEMBER_PARSERS,e,n,this)}lineStringMemberParser(e,n){R2(this.LINESTRINGMEMBER_PARSERS,e,n,this)}polygonMemberParser(e,n){R2(this.POLYGONMEMBER_PARSERS,e,n,this)}readLineString(e,n){const r=this.readFlatCoordinatesFromNode(e,n);if(r)return new t0(r,"XYZ")}readFlatLinearRing(e,n){const r=Rs(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,n,this);if(r)return r}readLinearRing(e,n){const r=this.readFlatCoordinatesFromNode(e,n);if(r)return new A9(r,"XYZ")}readPolygon(e,n){const r=Rs([null],this.FLAT_LINEAR_RINGS_PARSERS,e,n,this);if(r&&r[0]){const s=r[0],i=[s.length];let o,a;for(o=1,a=r.length;o<a;++o)(0,Zi.X$)(s,r[o]),i.push(s.length);return new r0(s,"XYZ",i)}}readFlatCoordinatesFromNode(e,n){return Rs(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,n,this)}readGeometryFromNode(e,n){return this.readGeometryElement(e,[this.getReadOptions(e,n||{})])||null}readFeaturesFromNode(e,n){const r={featureType:this.featureType,featureNS:this.featureNS};return r&&Object.assign(r,this.getReadOptions(e,n)),this.readFeaturesInternal(e,[r])||[]}readProjectionFromNode(e){return(0,Ts.Jt)(this.srsName?this.srsName:e.firstElementChild.getAttribute("srsName"))}}ri.prototype.namespace=A4,ri.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},ri.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},ri.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},ri.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:Jn(ri.prototype.pointMemberParser),pointMembers:Jn(ri.prototype.pointMemberParser)}},ri.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:Jn(ri.prototype.lineStringMemberParser),lineStringMembers:Jn(ri.prototype.lineStringMemberParser)}},ri.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:Jn(ri.prototype.polygonMemberParser),polygonMembers:Jn(ri.prototype.polygonMemberParser)}},ri.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:Jn(ri.prototype.readFlatCoordinatesFromNode)}},ri.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Jn(ri.prototype.readLineString)}},ri.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Jn(ri.prototype.readPolygon)}},ri.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:In(ri.prototype.readFlatLinearRing)}};const lr=ri;function o0(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function Yo(t,e){t.appendChild(wz().createTextNode(e))}const dK=A4+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",pK={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class Ir extends lr{constructor(e){super(e=e||{}),this.FEATURE_COLLECTION_PARSERS[A4].featureMember=Jn(this.readFeaturesInternal),this.schemaLocation=e.schemaLocation?e.schemaLocation:dK}readFlatCoordinates(e,n){const r=w4(e,!1).replace(/^\s*|\s*$/g,""),i=n[0].srsName;let o="enu";if(i){const c=(0,Ts.Jt)(i);c&&(o=c.getAxisOrientation())}const a=r.trim().split(/\s+/),l=[];for(let c=0,u=a.length;c<u;c++){const h=a[c].split(/,+/),d=parseFloat(h[0]),p=parseFloat(h[1]),m=3===h.length?parseFloat(h[2]):0;"en"===o.substr(0,2)?l.push(d,p,m):l.push(p,d,m)}return l}readBox(e,n){const r=Rs([null],this.BOX_PARSERS_,e,n,this);return(0,Zr.N)(r[1][0],r[1][1],r[1][3],r[1][4])}innerBoundaryIsParser(e,n){const r=Rs(void 0,this.RING_PARSERS,e,n,this);r&&n[n.length-1].push(r)}outerBoundaryIsParser(e,n){const r=Rs(void 0,this.RING_PARSERS,e,n,this);r&&(n[n.length-1][0]=r)}GEOMETRY_NODE_FACTORY_(e,n,r){const s=n[n.length-1],i=s.multiSurface,o=s.surface,a=s.multiCurve;return Array.isArray(e)?r="Envelope":"MultiPolygon"===(r=e.getType())&&!0===i?r="MultiSurface":"Polygon"===r&&!0===o?r="Surface":"MultiLineString"===r&&!0===a&&(r="MultiCurve"),Ls("http://www.opengis.net/gml",r)}writeFeatureElement(e,n,r){const s=n.getId();s&&e.setAttribute("fid",s);const i=r[r.length-1],o=i.featureNS,a=n.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});const l=[],c=[];if(n.hasProperties()){const h=n.getProperties();for(const d in h){const p=h[d];null!==p&&(l.push(d),c.push(p),d==a||"function"==typeof p.getSimplifiedGeometry?d in i.serializers[o]||(i.serializers[o][d]=qt(this.writeGeometryElement,this)):d in i.serializers[o]||(i.serializers[o][d]=qt(Yo)))}}const u=Object.assign({},i);u.node=e,wo(u,i.serializers,ru(void 0,o),c,r,l)}writeCurveOrLineString(e,n,r){const i=r[r.length-1].srsName;if("LineStringSegment"!==e.nodeName&&i&&e.setAttribute("srsName",i),"LineString"===e.nodeName||"LineStringSegment"===e.nodeName){const o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o),this.writeCoordinates_(o,n,r)}else if("Curve"===e.nodeName){const o=Ls(e.namespaceURI,"segments");e.appendChild(o),this.writeCurveSegments_(o,n,r)}}writeLineStringOrCurveMember(e,n,r){const s=this.GEOMETRY_NODE_FACTORY_(n,r);s&&(e.appendChild(s),this.writeCurveOrLineString(s,n,r))}writeMultiCurveOrLineString(e,n,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName,a=s.curve;o&&e.setAttribute("srsName",o);const l=n.getLineStrings();wo({node:e,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeGeometryElement(e,n,r){const s=r[r.length-1],i=Object.assign({},s);let o;i.node=e,o=Array.isArray(n)?L9(n,s):L2(n,!0,s),wo(i,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}createCoordinatesNode_(e){const n=Ls(e,"coordinates");return n.setAttribute("decimal","."),n.setAttribute("cs",","),n.setAttribute("ts"," "),n}writeCoordinates_(e,n,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName,a=n.getCoordinates(),l=a.length,c=new Array(l);for(let u=0;u<l;++u)c[u]=this.getCoords_(a[u],o,i);Yo(e,c.join(" "))}writeCurveSegments_(e,n,r){const s=Ls(e.namespaceURI,"LineStringSegment");e.appendChild(s),this.writeCurveOrLineString(s,n,r)}writeSurfaceOrPolygon(e,n,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName;if("PolygonPatch"!==e.nodeName&&o&&e.setAttribute("srsName",o),"Polygon"===e.nodeName||"PolygonPatch"===e.nodeName){const a=n.getLinearRings();wo({node:e,hasZ:i,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===e.nodeName){const a=Ls(e.namespaceURI,"patches");e.appendChild(a),this.writeSurfacePatches_(a,n,r)}}RING_NODE_FACTORY_(e,n,r){const s=n[n.length-1],i=s.node,o=s.exteriorWritten;return void 0===o&&(s.exteriorWritten=!0),Ls(i.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(e,n,r){const s=Ls(e.namespaceURI,"PolygonPatch");e.appendChild(s),this.writeSurfaceOrPolygon(s,n,r)}writeRing(e,n,r){const s=Ls(e.namespaceURI,"LinearRing");e.appendChild(s),this.writeLinearRing(s,n,r)}getCoords_(e,n,r){let s="enu";n&&(s=(0,Ts.Jt)(n).getAxisOrientation());let i="en"===s.substr(0,2)?e[0]+","+e[1]:e[1]+","+e[0];return r&&(i+=","+(e[2]||0)),i}writePoint(e,n,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName;o&&e.setAttribute("srsName",o);const a=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(a);const l=n.getCoordinates();Yo(a,this.getCoords_(l,o,i))}writeMultiPoint(e,n,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName;o&&e.setAttribute("srsName",o);const a=n.getPoints();wo({node:e,hasZ:i,srsName:o},this.POINTMEMBER_SERIALIZERS,ru("pointMember"),a,r,void 0,this)}writePointMember(e,n,r){const s=Ls(e.namespaceURI,"Point");e.appendChild(s),this.writePoint(s,n,r)}writeLinearRing(e,n,r){const i=r[r.length-1].srsName;i&&e.setAttribute("srsName",i);const o=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(o),this.writeCoordinates_(o,n,r)}writeMultiSurfaceOrPolygon(e,n,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName,a=s.surface;o&&e.setAttribute("srsName",o);const l=n.getPolygons();wo({node:e,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeSurfaceOrPolygonMember(e,n,r){const s=this.GEOMETRY_NODE_FACTORY_(n,r);s&&(e.appendChild(s),this.writeSurfaceOrPolygon(s,n,r))}writeEnvelope(e,n,r){const i=r[r.length-1].srsName;i&&e.setAttribute("srsName",i),wo({node:e},this.ENVELOPE_SERIALIZERS,mz,[n[0]+" "+n[1],n[2]+" "+n[3]],r,["lowerCorner","upperCorner"],this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,n,r){return Ls("http://www.opengis.net/gml",pK[n[n.length-1].node.nodeName])}}Ir.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:In(Ir.prototype.readFlatCoordinates)}},Ir.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:Ir.prototype.innerBoundaryIsParser,outerBoundaryIs:Ir.prototype.outerBoundaryIsParser}},Ir.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Jn(Ir.prototype.readFlatCoordinates)}},Ir.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:In(lr.prototype.readPoint),MultiPoint:In(lr.prototype.readMultiPoint),LineString:In(lr.prototype.readLineString),MultiLineString:In(lr.prototype.readMultiLineString),LinearRing:In(lr.prototype.readLinearRing),Polygon:In(lr.prototype.readPolygon),MultiPolygon:In(lr.prototype.readMultiPolygon),Box:In(Ir.prototype.readBox)}},Ir.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:qt(Ir.prototype.writeCurveOrLineString),MultiCurve:qt(Ir.prototype.writeMultiCurveOrLineString),Point:qt(Ir.prototype.writePoint),MultiPoint:qt(Ir.prototype.writeMultiPoint),LineString:qt(Ir.prototype.writeCurveOrLineString),MultiLineString:qt(Ir.prototype.writeMultiCurveOrLineString),LinearRing:qt(Ir.prototype.writeLinearRing),Polygon:qt(Ir.prototype.writeSurfaceOrPolygon),MultiPolygon:qt(Ir.prototype.writeMultiSurfaceOrPolygon),Surface:qt(Ir.prototype.writeSurfaceOrPolygon),MultiSurface:qt(Ir.prototype.writeMultiSurfaceOrPolygon),Envelope:qt(Ir.prototype.writeEnvelope)}},Ir.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:qt(Ir.prototype.writeLineStringOrCurveMember),curveMember:qt(Ir.prototype.writeLineStringOrCurveMember)}},Ir.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:qt(Ir.prototype.writeRing),innerBoundaryIs:qt(Ir.prototype.writeRing)}},Ir.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:qt(Ir.prototype.writePointMember)}},Ir.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:qt(Ir.prototype.writeSurfaceOrPolygonMember),polygonMember:qt(Ir.prototype.writeSurfaceOrPolygonMember)}},Ir.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:qt(Yo),upperCorner:qt(Yo)}};const Cz=Ir,fK=A4+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",gK={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class hn extends lr{constructor(e){super(e=e||{}),this.surface_=void 0!==e.surface&&e.surface,this.curve_=void 0!==e.curve&&e.curve,this.multiCurve_=void 0===e.multiCurve||e.multiCurve,this.multiSurface_=void 0===e.multiSurface||e.multiSurface,this.schemaLocation=e.schemaLocation?e.schemaLocation:fK,this.hasZ=void 0!==e.hasZ&&e.hasZ}readMultiCurve(e,n){const r=Rs([],this.MULTICURVE_PARSERS,e,n,this);if(r)return new b9(r)}readFlatCurveRing(e,n){const r=Rs([],this.MULTICURVE_PARSERS,e,n,this),s=[];for(let i=0,o=r.length;i<o;++i)(0,Zi.X$)(s,r[i].getFlatCoordinates());return s}readMultiSurface(e,n){const r=Rs([],this.MULTISURFACE_PARSERS,e,n,this);if(r)return new T9(r)}curveMemberParser(e,n){R2(this.CURVEMEMBER_PARSERS,e,n,this)}surfaceMemberParser(e,n){R2(this.SURFACEMEMBER_PARSERS,e,n,this)}readPatch(e,n){return Rs([null],this.PATCHES_PARSERS,e,n,this)}readSegment(e,n){return Rs([],this.SEGMENTS_PARSERS,e,n,this)}readPolygonPatch(e,n){return Rs([null],this.FLAT_LINEAR_RINGS_PARSERS,e,n,this)}readLineStringSegment(e,n){return Rs([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,e,n,this)}interiorParser(e,n){const r=Rs(void 0,this.RING_PARSERS,e,n,this);r&&n[n.length-1].push(r)}exteriorParser(e,n){const r=Rs(void 0,this.RING_PARSERS,e,n,this);r&&(n[n.length-1][0]=r)}readSurface(e,n){const r=Rs([null],this.SURFACE_PARSERS,e,n,this);if(r&&r[0]){const s=r[0],i=[s.length];let o,a;for(o=1,a=r.length;o<a;++o)(0,Zi.X$)(s,r[o]),i.push(s.length);return new r0(s,"XYZ",i)}}readCurve(e,n){const r=Rs([null],this.CURVE_PARSERS,e,n,this);if(r)return new t0(r,"XYZ")}readEnvelope(e,n){const r=Rs([null],this.ENVELOPE_PARSERS,e,n,this);return(0,Zr.N)(r[1][0],r[1][1],r[2][0],r[2][1])}readFlatPos(e,n){let r=w4(e,!1);const s=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,i=[];let o;for(;o=s.exec(r);)i.push(parseFloat(o[1])),r=r.substr(o[0].length);if(""!==r)return;const l=n[0].srsName;let c="enu";if(l&&(c=(0,Ts.Jt)(l).getAxisOrientation()),"neu"===c){let h,d;for(h=0,d=i.length;h<d;h+=3){const p=i[h];i[h]=i[h+1],i[h+1]=p}}const u=i.length;return 2==u&&i.push(0),0!==u?i:void 0}readFlatPosList(e,n){const r=w4(e,!1).replace(/^\s*|\s*$/g,""),s=n[0],i=s.srsName,o=s.srsDimension;let a="enu";i&&(a=(0,Ts.Jt)(i).getAxisOrientation());const l=r.split(/\s+/);let u,h,d,c=2;e.getAttribute("srsDimension")?c=o0(e.getAttribute("srsDimension")):e.getAttribute("dimension")?c=o0(e.getAttribute("dimension")):e.parentNode.getAttribute("srsDimension")?c=o0(e.parentNode.getAttribute("srsDimension")):o&&(c=o0(o));const p=[];for(let m=0,y=l.length;m<y;m+=c)u=parseFloat(l[m]),h=parseFloat(l[m+1]),d=3===c?parseFloat(l[m+2]):0,"en"===a.substr(0,2)?p.push(u,h,d):p.push(h,u,d);return p}writePos_(e,n,r){const s=r[r.length-1],i=s.hasZ;e.setAttribute("srsDimension",i?"3":"2");const a=s.srsName;let l="enu";a&&(l=(0,Ts.Jt)(a).getAxisOrientation());const c=n.getCoordinates();let u;u="en"===l.substr(0,2)?c[0]+" "+c[1]:c[1]+" "+c[0],i&&(u+=" "+(c[2]||0)),Yo(e,u)}getCoords_(e,n,r){let s="enu";n&&(s=(0,Ts.Jt)(n).getAxisOrientation());let i="en"===s.substr(0,2)?e[0]+" "+e[1]:e[1]+" "+e[0];return r&&(i+=" "+(e[2]||0)),i}writePosList_(e,n,r){const s=r[r.length-1],i=s.hasZ;e.setAttribute("srsDimension",i?"3":"2");const a=s.srsName,l=n.getCoordinates(),c=l.length,u=new Array(c);let h;for(let d=0;d<c;++d)h=l[d],u[d]=this.getCoords_(h,a,i);Yo(e,u.join(" "))}writePoint(e,n,r){const i=r[r.length-1].srsName;i&&e.setAttribute("srsName",i);const o=Ls(e.namespaceURI,"pos");e.appendChild(o),this.writePos_(o,n,r)}writeEnvelope(e,n,r){const i=r[r.length-1].srsName;i&&e.setAttribute("srsName",i),wo({node:e},this.ENVELOPE_SERIALIZERS,mz,[n[0]+" "+n[1],n[2]+" "+n[3]],r,["lowerCorner","upperCorner"],this)}writeLinearRing(e,n,r){const i=r[r.length-1].srsName;i&&e.setAttribute("srsName",i);const o=Ls(e.namespaceURI,"posList");e.appendChild(o),this.writePosList_(o,n,r)}RING_NODE_FACTORY_(e,n,r){const s=n[n.length-1],i=s.node,o=s.exteriorWritten;return void 0===o&&(s.exteriorWritten=!0),Ls(i.namespaceURI,void 0!==o?"interior":"exterior")}writeSurfaceOrPolygon(e,n,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName;if("PolygonPatch"!==e.nodeName&&o&&e.setAttribute("srsName",o),"Polygon"===e.nodeName||"PolygonPatch"===e.nodeName){const a=n.getLinearRings();wo({node:e,hasZ:i,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===e.nodeName){const a=Ls(e.namespaceURI,"patches");e.appendChild(a),this.writeSurfacePatches_(a,n,r)}}writeCurveOrLineString(e,n,r){const i=r[r.length-1].srsName;if("LineStringSegment"!==e.nodeName&&i&&e.setAttribute("srsName",i),"LineString"===e.nodeName||"LineStringSegment"===e.nodeName){const o=Ls(e.namespaceURI,"posList");e.appendChild(o),this.writePosList_(o,n,r)}else if("Curve"===e.nodeName){const o=Ls(e.namespaceURI,"segments");e.appendChild(o),this.writeCurveSegments_(o,n,r)}}writeMultiSurfaceOrPolygon(e,n,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName,a=s.surface;o&&e.setAttribute("srsName",o);const l=n.getPolygons();wo({node:e,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeMultiPoint(e,n,r){const s=r[r.length-1],i=s.srsName,o=s.hasZ;i&&e.setAttribute("srsName",i);const a=n.getPoints();wo({node:e,hasZ:o,srsName:i},this.POINTMEMBER_SERIALIZERS,ru("pointMember"),a,r,void 0,this)}writeMultiCurveOrLineString(e,n,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName,a=s.curve;o&&e.setAttribute("srsName",o);const l=n.getLineStrings();wo({node:e,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeRing(e,n,r){const s=Ls(e.namespaceURI,"LinearRing");e.appendChild(s),this.writeLinearRing(s,n,r)}writeSurfaceOrPolygonMember(e,n,r){const s=this.GEOMETRY_NODE_FACTORY_(n,r);s&&(e.appendChild(s),this.writeSurfaceOrPolygon(s,n,r))}writePointMember(e,n,r){const s=Ls(e.namespaceURI,"Point");e.appendChild(s),this.writePoint(s,n,r)}writeLineStringOrCurveMember(e,n,r){const s=this.GEOMETRY_NODE_FACTORY_(n,r);s&&(e.appendChild(s),this.writeCurveOrLineString(s,n,r))}writeSurfacePatches_(e,n,r){const s=Ls(e.namespaceURI,"PolygonPatch");e.appendChild(s),this.writeSurfaceOrPolygon(s,n,r)}writeCurveSegments_(e,n,r){const s=Ls(e.namespaceURI,"LineStringSegment");e.appendChild(s),this.writeCurveOrLineString(s,n,r)}writeGeometryElement(e,n,r){const s=r[r.length-1],i=Object.assign({},s);let o;i.node=e,o=Array.isArray(n)?L9(n,s):L2(n,!0,s),wo(i,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}writeFeatureElement(e,n,r){const s=n.getId();s&&e.setAttribute("fid",s);const i=r[r.length-1],o=i.featureNS,a=n.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});const l=[],c=[];if(n.hasProperties()){const h=n.getProperties();for(const d in h){const p=h[d];null!==p&&(l.push(d),c.push(p),d==a||"function"==typeof p.getSimplifiedGeometry?d in i.serializers[o]||(i.serializers[o][d]=qt(this.writeGeometryElement,this)):d in i.serializers[o]||(i.serializers[o][d]=qt(Yo)))}}const u=Object.assign({},i);u.node=e,wo(u,i.serializers,ru(void 0,o),c,r,l)}writeFeatureMembers_(e,n,r){const s=r[r.length-1],i=s.featureType,o=s.featureNS,a={};a[o]={},a[o][i]=qt(this.writeFeatureElement,this);const l=Object.assign({},s);l.node=e,wo(l,a,ru(i,o),n,r)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(e,n,r){return Ls(this.namespace,gK[n[n.length-1].node.nodeName])}GEOMETRY_NODE_FACTORY_(e,n,r){const s=n[n.length-1],i=s.multiSurface,o=s.surface,a=s.curve,l=s.multiCurve;return Array.isArray(e)?r="Envelope":"MultiPolygon"===(r=e.getType())&&!0===i?r="MultiSurface":"Polygon"===r&&!0===o?r="Surface":"LineString"===r&&!0===a?r="Curve":"MultiLineString"===r&&!0===l&&(r="MultiCurve"),Ls(this.namespace,r)}writeGeometryNode(e,n){n=this.adaptOptions(n);const r=Ls(this.namespace,"geom"),s={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return n&&Object.assign(s,n),this.writeGeometryElement(r,e,[s]),r}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=Ls(this.namespace,"featureMembers");r.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);const s={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return n&&Object.assign(s,n),this.writeFeatureMembers_(r,e,[s]),r}}hn.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:In(hn.prototype.readFlatPos),posList:In(hn.prototype.readFlatPosList),coordinates:In(Cz.prototype.readFlatCoordinates)}},hn.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:hn.prototype.interiorParser,exterior:hn.prototype.exteriorParser}},hn.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:In(lr.prototype.readPoint),MultiPoint:In(lr.prototype.readMultiPoint),LineString:In(lr.prototype.readLineString),MultiLineString:In(lr.prototype.readMultiLineString),LinearRing:In(lr.prototype.readLinearRing),Polygon:In(lr.prototype.readPolygon),MultiPolygon:In(lr.prototype.readMultiPolygon),Surface:In(hn.prototype.readSurface),MultiSurface:In(hn.prototype.readMultiSurface),Curve:In(hn.prototype.readCurve),MultiCurve:In(hn.prototype.readMultiCurve),Envelope:In(hn.prototype.readEnvelope)}},hn.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:Jn(hn.prototype.curveMemberParser),curveMembers:Jn(hn.prototype.curveMemberParser)}},hn.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:Jn(hn.prototype.surfaceMemberParser),surfaceMembers:Jn(hn.prototype.surfaceMemberParser)}},hn.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Jn(lr.prototype.readLineString),Curve:Jn(hn.prototype.readCurve)}},hn.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Jn(lr.prototype.readPolygon),Surface:Jn(hn.prototype.readSurface)}},hn.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:In(hn.prototype.readPatch)}},hn.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:In(hn.prototype.readSegment)}},hn.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:Jn(hn.prototype.readFlatPosList),upperCorner:Jn(hn.prototype.readFlatPosList)}},hn.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:In(hn.prototype.readPolygonPatch)}},hn.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:gz(hn.prototype.readLineStringSegment)}},lr.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:In(lr.prototype.readFlatLinearRing),Ring:In(hn.prototype.readFlatCurveRing)}},hn.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:qt(hn.prototype.writeRing),interior:qt(hn.prototype.writeRing)}},hn.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:qt(Yo),upperCorner:qt(Yo)}},hn.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:qt(hn.prototype.writeSurfaceOrPolygonMember),polygonMember:qt(hn.prototype.writeSurfaceOrPolygonMember)}},hn.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:qt(hn.prototype.writePointMember)}},hn.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:qt(hn.prototype.writeLineStringOrCurveMember),curveMember:qt(hn.prototype.writeLineStringOrCurveMember)}},hn.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:qt(hn.prototype.writeCurveOrLineString),MultiCurve:qt(hn.prototype.writeMultiCurveOrLineString),Point:qt(hn.prototype.writePoint),MultiPoint:qt(hn.prototype.writeMultiPoint),LineString:qt(hn.prototype.writeCurveOrLineString),MultiLineString:qt(hn.prototype.writeMultiCurveOrLineString),LinearRing:qt(hn.prototype.writeLinearRing),Polygon:qt(hn.prototype.writeSurfaceOrPolygon),MultiPolygon:qt(hn.prototype.writeMultiSurfaceOrPolygon),Surface:qt(hn.prototype.writeSurfaceOrPolygon),MultiSurface:qt(hn.prototype.writeMultiSurfaceOrPolygon),Envelope:qt(hn.prototype.writeEnvelope)}};const hr=hn;class Pr extends hr{constructor(e){super(e=e||{}),this.schemaLocation=e.schemaLocation?e.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(e,n,r){r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},r[r.length-1]),super.writeGeometryElement(e,n,r)}}Pr.prototype.namespace="http://www.opengis.net/gml/3.2",Pr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:In(hr.prototype.readFlatPos),posList:In(hr.prototype.readFlatPosList),coordinates:In(Cz.prototype.readFlatCoordinates)}},Pr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:hr.prototype.interiorParser,exterior:hr.prototype.exteriorParser}},Pr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:In(lr.prototype.readPoint),MultiPoint:In(lr.prototype.readMultiPoint),LineString:In(lr.prototype.readLineString),MultiLineString:In(lr.prototype.readMultiLineString),LinearRing:In(lr.prototype.readLinearRing),Polygon:In(lr.prototype.readPolygon),MultiPolygon:In(lr.prototype.readMultiPolygon),Surface:In(Pr.prototype.readSurface),MultiSurface:In(hr.prototype.readMultiSurface),Curve:In(Pr.prototype.readCurve),MultiCurve:In(hr.prototype.readMultiCurve),Envelope:In(Pr.prototype.readEnvelope)}},Pr.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:Jn(hr.prototype.curveMemberParser),curveMembers:Jn(hr.prototype.curveMemberParser)}},Pr.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Jn(hr.prototype.surfaceMemberParser),surfaceMembers:Jn(hr.prototype.surfaceMemberParser)}},Pr.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Jn(lr.prototype.readLineString),Curve:Jn(hr.prototype.readCurve)}},Pr.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Jn(lr.prototype.readPolygon),Surface:Jn(hr.prototype.readSurface)}},Pr.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:In(hr.prototype.readPatch)}},Pr.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:In(hr.prototype.readSegment)}},Pr.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Jn(hr.prototype.readFlatPosList),upperCorner:Jn(hr.prototype.readFlatPosList)}},Pr.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:In(hr.prototype.readPolygonPatch)}},Pr.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:gz(hr.prototype.readLineStringSegment)}},Pr.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:Jn(lr.prototype.pointMemberParser),pointMembers:Jn(lr.prototype.pointMemberParser)}},Pr.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Jn(lr.prototype.lineStringMemberParser),lineStringMembers:Jn(lr.prototype.lineStringMemberParser)}},Pr.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:Jn(lr.prototype.polygonMemberParser),polygonMembers:Jn(lr.prototype.polygonMemberParser)}},Pr.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Jn(lr.prototype.readFlatCoordinatesFromNode)}},Pr.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Jn(lr.prototype.readLineString)}},Pr.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Jn(lr.prototype.readPolygon)}},Pr.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:In(lr.prototype.readFlatLinearRing),Ring:In(Pr.prototype.readFlatCurveRing)}},Pr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:qt(hr.prototype.writeRing),interior:qt(hr.prototype.writeRing)}},Pr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:qt(Yo),upperCorner:qt(Yo)}},Pr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:qt(hr.prototype.writeSurfaceOrPolygonMember),polygonMember:qt(hr.prototype.writeSurfaceOrPolygonMember)}},Pr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:qt(hr.prototype.writePointMember)}},Pr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:qt(hr.prototype.writeLineStringOrCurveMember),curveMember:qt(hr.prototype.writeLineStringOrCurveMember)}},Pr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:qt(hr.prototype.writeCurveOrLineString),MultiCurve:qt(hr.prototype.writeMultiCurveOrLineString),Point:qt(Pr.prototype.writePoint),MultiPoint:qt(hr.prototype.writeMultiPoint),LineString:qt(hr.prototype.writeCurveOrLineString),MultiLineString:qt(hr.prototype.writeMultiCurveOrLineString),LinearRing:qt(hr.prototype.writeLinearRing),Polygon:qt(hr.prototype.writeSurfaceOrPolygon),MultiPolygon:qt(hr.prototype.writeMultiSurfaceOrPolygon),Surface:qt(hr.prototype.writeSurfaceOrPolygon),MultiSurface:qt(hr.prototype.writeMultiSurfaceOrPolygon),Envelope:qt(hr.prototype.writeEnvelope)}};const yz=Pr;function b4(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}const vK=class mK extends dz{constructor(){super()}getType(){return"json"}readFeature(e,n){return this.readFeatureFromObject(b4(e),this.getReadOptions(e,n))}readFeatures(e,n){return this.readFeaturesFromObject(b4(e),this.getReadOptions(e,n))}readFeatureFromObject(e,n){return us()}readFeaturesFromObject(e,n){return us()}readGeometry(e,n){return this.readGeometryFromObject(b4(e),this.getReadOptions(e,n))}readGeometryFromObject(e,n){return us()}readProjection(e){return this.readProjectionFromObject(b4(e))}readProjectionFromObject(e){return us()}writeFeature(e,n){return JSON.stringify(this.writeFeatureObject(e,n))}writeFeatureObject(e,n){return us()}writeFeatures(e,n){return JSON.stringify(this.writeFeaturesObject(e,n))}writeFeaturesObject(e,n){return us()}writeGeometry(e,n){return JSON.stringify(this.writeGeometryObject(e,n))}writeGeometryObject(e,n){return us()}};function D9(t,e){if(!t)return null;let n;switch(t.type){case"Point":n=function IK(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:eu(e.length)}}(t);break;case"LineString":n=function AK(t){const e=t.coordinates,n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:eu(e[0].length)}}(t);break;case"Polygon":n=function SK(t){const e=t.coordinates,n=[],r=e[0][0].length;return{type:"Polygon",flatCoordinates:n,ends:Qd(n,0,e,r),layout:eu(r)}}(t);break;case"MultiPoint":n=function _K(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:eu(e[0].length)}}(t);break;case"MultiLineString":n=function bK(t){const e=t.coordinates,n=e[0][0].length,r=[];return{type:"MultiLineString",flatCoordinates:r,ends:Qd(r,0,e,n),layout:eu(n)}}(t);break;case"MultiPolygon":n=function xK(t){const e=t.coordinates,n=[],r=e[0][0][0].length;return{type:"MultiPolygon",flatCoordinates:n,ends:nz(n,0,e,r),layout:eu(r)}}(t);break;case"GeometryCollection":n=function yK(t){return t.geometries.map(function(r){return D9(r)})}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function B9(t,e){const n=(t=L2(t,!0,e)).getType();let r;switch(n){case"Point":r=function TK(t){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":r=function MK(t){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":r=function LK(t,e){let n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case"MultiPoint":r=function VK(t){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":r=function zK(t){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":r=function EK(t,e){let n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case"GeometryCollection":r=function HK(t,e){return delete(e=Object.assign({},e)).featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(r){return B9(r,e)})}}(t,e);break;case"Circle":r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return r}const Iz=class wK extends vK{constructor(e){e=e||{},super(),this.dataProjection=(0,Ts.Jt)(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=(0,Ts.Jt)(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,n){let r=null;r="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null};const s=D9(r.geometry);if(this.featureClass===uz)return pz({geometry:s,id:r.id,properties:r.properties},n);const i=new l9;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&i.setGeometryName(r.geometry_name),i.setGeometry(R9(s,n)),"id"in r&&i.setId(r.id),r.properties&&i.setProperties(r.properties,!0),i}readFeaturesFromObject(e,n){let s=null;if("FeatureCollection"===e.type){s=[];const o=e.features;for(let a=0,l=o.length;a<l;++a){const c=this.readFeatureFromObject(o[a],n);c&&s.push(c)}}else s=[this.readFeatureFromObject(e,n)];return s.flat()}readGeometryFromObject(e,n){return function CK(t,e){return R9(D9(t),e)}(e,n)}readProjectionFromObject(e){const n=e.crs;let r;if(n)if("name"==n.type)r=(0,Ts.Jt)(n.properties.name);else{if("EPSG"!==n.type)throw new Error("Unknown SRS type");r=(0,Ts.Jt)("EPSG:"+n.properties.code)}else r=this.dataProjection;return r}writeFeatureObject(e,n){n=this.adaptOptions(n);const r={type:"Feature",geometry:null,properties:null},s=e.getId();if(void 0!==s&&(r.id=s),!e.hasProperties())return r;const i=e.getProperties(),o=e.getGeometry();return o&&(r.geometry=B9(o,n),delete i[e.getGeometryName()]),$M(i)||(r.properties=i),r}writeFeaturesObject(e,n){n=this.adaptOptions(n);const r=[];for(let s=0,i=e.length;s<i;++s)r.push(this.writeFeatureObject(e[s],n));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,n){return B9(e,this.adaptOptions(n))}};function N9(t){const e=t.trim().split(/\s+/);return[e.shift(),e.join(" ").trim()||null]}function Az(t,e){const n=t?.trim(),r=e?.trim();return n||r?r&&n?`${n} ${r}`:r||n:null}function NK(t){if(!t)return"unspecified";switch(t){case"author":case"coAuthor":return"author";case"originator":return"originator";case"principalInvestigator":return"principal_investigator";case"resourceProvider":return"resource_provider";case"processor":return"processor";case"custodian":return"custodian";case"owner":return"owner";case"pointOfContact":return"point_of_contact";case"publisher":return"publisher";case"distributor":return"distributor";case"user":return"user";case"collaborator":return"collaborator";case"editor":return"editor";case"contributor":return"contributor";case"stakeholder":return"stakeholder";case"sponsor":return"sponsor";case"funder":return"funder";case"rightsHolder":return"rights_holder";case"mediator":return"mediator";default:return"other"}}function FK(t){switch(t){case"completed":return"completed";case"historicalArchive":return"removed";case"obsolete":return"deprecated";case"onGoing":return"ongoing";case"planned":return"planned";case"required":return"required";default:return"under_development"}}const PK=["unspecified","other","author","collaborator","contributor","custodian","distributor","editor","funder","mediator","originator","owner","point_of_contact","principal_investigator","processor","publisher","resource_provider","rights_holder","sponsor","stakeholder","user"],kK=["unknown","notPlanned","asNeeded","irregular","continual","periodic","daily","weekly","fortnightly","semimonthly","monthly","quarterly","biannually","annually","biennially"],OK=["completed","ongoing","under_development","deprecated","removed","planned","required"];function GK(t){return t&&kK.includes(t)?t:null}const F9={eng:"en",nld:"nl",dut:"nl",fra:"fr",fre:"fr",deu:"de",ger:"de",kor:"ko",spa:"es",ces:"cs",cze:"cs",cat:"ca",fin:"fi",isl:"is",ice:"is",ita:"it",por:"pt",rus:"ru",zho:"zh",chi:"zh",slk:"sk",slo:"sk",roh:"rm",ara:"ar",dan:"da",nor:"no",pol:"pl",swe:"sv",tur:"tr",arm:"hy",aze:"az",kat:"ka",geo:"ka",ukr:"uk",cym:"cy",wel:"cy"},P9=Object.entries(F9).reduce((t,e)=>({...t,[e[1]]:e[0]}),{});function k9(t){if(!t)return t;if(3===t.length)return P9[F9[t.toLowerCase()]]??t;const e=t.toLowerCase().substring(0,2);return P9[e]??t}function _4(t){if(!t)return t;if(3===t.length)return F9[t.toLowerCase()]??t;const e=t.toLowerCase().substring(0,2);return e in P9||t.match(/[a-z]{2}_[A-Z]{2}/)?e:t}const bz={application:"reuse",dataset:"dataset",interactiveMap:"reuse",map:"reuse","map/static":"reuse","map/interactive":"reuse","map-interactive":"reuse","map-static":"reuse",mapDigital:"reuse",mapHardcopy:"reuse",series:"dataset",service:"service",staticMap:"reuse"};function O9(t){return bz[t]||"dataset"}function _z(t){return"reuse"===O9(t)?{application:"application",map:"map","map/static":"map","map/interactive":"map","map-interactive":"map","map-static":"map",mapDigital:"map",interactiveMap:"map",staticMap:"map"}[t]||"other":void 0}function xz(t){return"reuse"===t.kind?t.reuseType:t.kind}function Is(){return F(Gc(Gt("gco:CharacterString",!1),Gt("gmx:Anchor",!1),Gt("gmx:MimeFileType",!1)),ca())}function Di(t,e){return Jr(F(Gc(Gt("gco:CharacterString",!1),Gt("gmx:Anchor",!1)),ca()),n=>{const r=Wr("gmd:PT_FreeText","gmd:textGroup","gmd:LocalisedCharacterString")(n),s=e??{};if(!r.length)return s;const i=r.reduce((o,a)=>{const l=Es("locale")(a).toLowerCase().replace(/^#/,""),c=ca()(a);return l?{...o,[l]:c}:o},{});return s[t]={...s[t],...i},s})}function G9(){return F(Gc(Gt("gco:DateTime",!1),Gt("gco:Date",!1)),ca(),vn(t=>t?new Date(t):null))}function x4(){return F(Gt("gco:Decimal",!1),ca(),vn(t=>t?Number(t):null))}function Xl(){const t=F(Gt("gmd:URL",!1),ca()),e=F(Gt("gco:CharacterString",!1),ca()),n=F(Gt("gmx:Anchor",!1),Es("xlink:href"));return F(Gc(t,n,e),vn(r=>{try{return new URL(r)}catch{return null}}))}function S4(){return Gc(Xl(),()=>new URL("http://missing"))}function Sz(){return F(Gt("gmd:CI_RoleCode"),Es("codeListValue"),vn(NK))}function Hz(){const t=F(Wr("gmd:contactInfo","gmd:CI_Contact","gmd:onlineResource","gmd:CI_OnlineResource","gmd:linkage"),Oc(0),Xl());return F(Jr(F(Gt("gmd:organisationName",!1),Di("name")),t),vn(([[e,n],r])=>({name:e,...r&&{website:r},translations:n})))}function Mz(){const t=F(Gt("gmd:role"),Sz()),e=F(Gt("gmd:positionName"),Is()),n=F(Gt("gmd:individualName"),Is(),vn(l=>l?N9(l):[])),r=Hz(),s=Rr("gmd:contactInfo","gmd:CI_Contact"),i=F(s,Gt("gmd:electronicMailAddress"),Is(),vn(l=>null===l?"missing@missing.com":l)),o=F(s,Rr("gmd:address","gmd:CI_Address"),Jr(F(Gt("gmd:deliveryPoint",!1),Is()),F(Gt("gmd:city",!1),Is()),F(Gt("gmd:postalCode",!1),Is()),F(Gt("gmd:country",!1),Is())),vn(l=>l.filter(c=>!!c).join(", "))),a=F(s,Rr("gmd:phone","gmd:CI_Telephone","gmd:voice"),Is());return F(Jr(t,e,n,r,i,o,a),vn(([l,c,[u,h],d,p,m,y])=>({email:p,role:l,organization:d,...c&&{position:c},...u&&{firstName:u},...h&&{lastName:h},...m&&{address:m},...y&&{phone:y}})))}Object.entries(bz).reduce((t,[e,n])=>((t[n]??=[]).push(e),t),{});const YK=F(PM("gmd:MD_Distribution"),Rr("gmd:distributionFormat","gmd:MD_Format","gmd:name"),Is(),vn(GM));function zz(t){const e=F(Gt("gmd:linkage"),S4()),n=F(Gt("gmd:protocol"),Is()),r=F(n,vn(i9)),s=F(Rr("gmd:function","gmd:CI_OnLineFunctionCode"),Es("codeListValue")),i=F(r,vn(c=>"other"!==c)),o=F(Jr(i,s,n),vn(([c,u,h])=>!c&&"download"===u||/download/i.test(h))),a=F(Gt("gmd:name"),Di("name")),l=F(Gt("gmd:description"),Di("description"));return F(Wr("gmd:transferOptions","gmd:MD_DigitalTransferOptions","gmd:onLine","gmd:CI_OnlineResource"),Mn(Jr(i,o,r,e,a,l,t)),Mn(([c,u,h,d,[p,m],[y,H],T])=>{const V={...m,...H};return c?{type:"service",url:d,accessServiceProtocol:h,...p&&{identifierInService:p},...p&&{name:p},...y&&{description:y},translations:V}:u?{type:"download",url:d,...p&&{name:p},...y&&{description:y},...T&&{mimeType:T},translations:V}:{type:"link",url:d,...p&&{name:p},...y&&{description:y},translations:V}}))}function KK(t){if(!t)return null;const e=t.match(/^-?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?T?(?:([0-9]+)H)?/);if(!e)return null;const n=parseInt(e[1],10)||0,r=parseInt(e[2],10)||0,s=parseInt(e[3],10)||0,i=parseInt(e[4],10)||0;return n?{per:"year",updatedTimes:1}:1===r?{per:"month",updatedTimes:1}:r?{per:"year",updatedTimes:Math.round(12/r)}:1===s?{per:"day",updatedTimes:1}:s>=1&&s<=7?{per:"week",updatedTimes:Math.round(7/s-1e-4)}:s?{per:"month",updatedTimes:Math.round(30/s)}:i?{per:"day",updatedTimes:Math.round(24/i)}:null}function ji(){return F(Gt("gmd:identificationInfo",!1),Jr(Gt("gmd:MD_DataIdentification",!1),Gt("srv:SV_ServiceIdentification",!1)),vo(t=>null!==t),Oc(0))}function W9(t){return F(ji(),Wr("gmd:citation","gmd:CI_Citation","gmd:date"),vo(F(Wr("gmd:CI_Date","gmd:dateType","gmd:CI_DateTypeCode"),Oc(0),Es("codeListValue"),vn(e=>e===t))),Oc(0),Wr("gmd:CI_Date","gmd:date"),Oc(0),G9())}function JK(t){switch(t){case"grid":case"vector":case"tin":case"table":case"point":return t;default:return null}}function QK(t){return F(Gt("gmd:fileIdentifier",!1),Is())(t)}function H4(t){return F(Rr("gmd:hierarchyLevel","gmd:MD_ScopeCode"),Es("codeListValue"),vn(e=>O9(e)))(t)}function eq(t){return F(Rr("gmd:contact","gmd:CI_ResponsibleParty"),Hz())(t)}function tq(t){return W9("revision")(t)}function nq(t){return W9("creation")(t)}function rq(t){return W9("publication")(t)}function sq(t){return F(Gt("gmd:dateStamp"),G9())(t)}function iq(t){return F(Rr("gmd:hierarchyLevel","gmd:MD_ScopeCode"),Es("codeListValue"),vn(e=>_z(e)))(t)}function oq(t,e){return F(ji(),Rr("gmd:citation","gmd:CI_Citation","gmd:title"),Di("title",e),vn(([n])=>n))(t)}function aq(t,e){return F(ji(),Gt("gmd:abstract",!1),Di("abstract",e),vn(([n])=>n))(t)}function lq(t){return F(yr("gmd:contact",!1),Mn(Gt("gmd:CI_ResponsibleParty",!1)),Mn(Mz()))(t)}function cq(t){return F(ji(),Jr(yr("gmd:contact",!1),yr("gmd:pointOfContact",!1)),t=>t.flat(),Mn(Gt("gmd:CI_ResponsibleParty",!1)),Mn(Mz()))(t)}function uq(t){if(!t)return null;const e=Rr("gmd:CI_Citation","gmd:identifier","gmd:MD_Identifier","gmd:code"),n=F(e,Is())(t),r=F(e,Xl())(t),s=F(Rr("gmd:CI_Citation","gmd:title"),Is())(t);return{id:n,...s&&{name:s},...r&&{url:r}}}function hq(t){const e=F(yr("gmd:MD_KeywordTypeCode"),Mn(Es("codeListValue")),vn(r=>function BK(t){if(!t)return"other";switch(t){case"theme":case"place":case"temporal":case"other":return t;default:return"other"}}(r[0])))(t),n=F(Rr("gmd:thesaurusName"),uq)(t);return F(yr("gmd:keyword"),Mn(r=>{const[s,i]=Di("label")(r);return{...n?{thesaurus:n}:{},label:s,type:e,translations:i}}))(t)}function dq(t){return F(ji(),Wr("gmd:descriptiveKeywords","gmd:MD_Keywords"),Mn(hq),t=>t.flat())(t)}function pq(t){return F(ji(),Gt("gmd:status",!1),function ZK(){return F(Gt("gmd:MD_ProgressCode"),Es("codeListValue"),vn(FK))}())(t)}const M4=F(ji(),yr("gmd:resourceConstraints",!1));function fq(t){return F(M4,Mn(function jK(){return F(yr("gmd:MD_LegalConstraints",!1),vo(F(yr("gmd:MD_RestrictionCode"),Mn(Es("codeListValue")),vn(t=>-1===t.indexOf("license")))),Mn(Jr(yr("gmd:otherConstraints"),yr("gmd:useLimitation"))),t=>t.flat(),t=>t.flat(),Mn(Jr(Di("text"),Xl())),Mn(([[t,e],n])=>({...n&&{url:n},text:t,translations:e})))}()),t=>t.flat(),t=>t.flat())(t)}function gq(t){return F(M4,Mn(function UK(){return F(Wr("gmd:MD_SecurityConstraints","gmd:useLimitation"),t=>t.flat(),Mn(Jr(Di("text"),Xl())),Mn(([[t,e],n])=>({...n&&{url:n},text:t,translations:e})))}()),t=>t.flat())(t)}function mq(t){return F(M4,Mn(function $K(){return F(Wr("gmd:MD_Constraints","gmd:useLimitation"),t=>t.flat(),Mn(Jr(Di("text"),Xl())),Mn(([[t,e],n])=>({...n&&{url:n},text:t,translations:e})))}()),t=>t.flat())(t)}function vq(t){return F(M4,Mn(function XK(){return F(yr("gmd:MD_LegalConstraints",!1),vo(F(yr("gmd:MD_RestrictionCode"),Mn(Es("codeListValue")),vn(t=>t.indexOf("license")>-1))),Mn(Jr(yr("gmd:otherConstraints"),yr("gmd:useLimitation"))),t=>t.flat(),t=>t.flat(),Mn(Jr(Di("text"),Xl())),Mn(([[t,e],n])=>({...n&&{url:n},text:t,translations:e})))}()),t=>t.flat())(t)}function wq(t){return F(ji(),yr("gmd:MD_TopicCategoryCode",!0),Mn(ca()))(t)}function Cq(t){return F(ji(),Rr("gmd:spatialRepresentationType","gmd:MD_SpatialRepresentationTypeCode"),Es("codeListValue"),vn(JK))(t)}function yq(t){return F(ji(),yr("gmd:graphicOverview",!1),Mn(Jr(F(Gt("gmd:fileName"),S4()),F(Gt("gmd:fileDescription"),Is()))),Mn(([e,n])=>({url:e,...n&&{description:n}})))(t)}function Iq(t,e){return F(Rr("gmd:dataQualityInfo","gmd:DQ_DataQuality","gmd:lineage","gmd:LI_Lineage","gmd:statement"),Di("lineage",e),vn(([n])=>n))(t)}function Aq(t){return F(ji(),Rr("gmd:resourceMaintenance","gmd:MD_MaintenanceInformation"),function qK(){return Gc(F(Gt("gmd:MD_MaintenanceFrequencyCode"),Es("codeListValue"),vn(GK)),F(Rr("gmd:userDefinedMaintenanceFrequency","gts:TM_PeriodDuration"),ca(),vn(KK)),vn(()=>"unknown"))}(),vn(e=>e||"unknown"))(t)}function Vz(){const t=F(Gt("gmd:linkage"),S4()),e=F(Gt("gmd:protocol"),Is()),n=F(e,vn(i9)),r=F(Rr("gmd:function","gmd:CI_OnLineFunctionCode"),Es("codeListValue")),s=F(r,vn(a=>"information"===a)),i=F(Gt("gmd:name"),Di("name")),o=F(Gt("gmd:description"),Di("description",{}));return F(Wr("gmd:transferOptions","gmd:MD_DigitalTransferOptions","gmd:onLine","gmd:CI_OnlineResource"),Mn(Jr(s,n,t,i,o)),Mn(([a,l,c,[u,h],[d,p]])=>{const m={...h,...p};return a?{type:"link",url:c,...u&&{name:u},...d&&{description:d},translations:m}:{type:"endpoint",url:c,accessServiceProtocol:l,...d&&{description:d},translations:m}}))}function Ez(){const t=F(Gt("gmd:linkage"),S4()),e=F(Gt("gmd:name"),Di("name")),n=F(Gt("gmd:description"),Di("description",{}));return F(Wr("gmd:transferOptions","gmd:MD_DigitalTransferOptions","gmd:onLine","gmd:CI_OnlineResource"),Mn(Jr(t,e,n)),Mn(([r,[s,i],[o,a]])=>({type:"link",url:r,...s&&{name:s},...o&&{description:o},translations:{...i,...a}})))}function bq(t){let e;return e="dataset"===H4(t)?n=>zz(YK)(n):"service"===H4(t)?Vz():Ez(),F(Wr("gmd:distributionInfo","gmd:MD_Distribution"),Mn(e),t=>t.flat())(t)}function _q(t){return F(ji(),Wr("gmd:extent","gmd:EX_Extent","gmd:temporalElement"),Mn(Jr(Rr("gmd:EX_TemporalExtent","gmd:extent","gml:TimePeriod"),Rr("gmd:EX_TemporalExtent","gmd:extent","gml:TimeInstant"))),Mn(([e,n])=>e?F(Jr(F(Gt("gml:beginPosition",!1),ca(),vn(r=>r?new Date(r):null)),F(Gt("gml:endPosition",!1),ca(),vn(r=>r?new Date(r):null))),vn(([r,s])=>({start:r,end:s})))(e):F(Gt("gml:timePosition",!1),ca(),vn(r=>r?new Date(r):null),vn(r=>({start:r})))(n)))(t)}function xq(t){return F(ji(),Wr("gmd:extent","gmd:EX_Extent","gmd:geographicElement"),Mn(Jr(F(Gt("gmd:EX_BoundingPolygon"),s=>s?F(Gt("gmd:polygon",!1),gY,vn(i=>i?function RK(t){const e=r9(t);e.root.attributes.xmlns="http://www.opengis.net/gml/3.2";const r=s0(Xd(e)),s=document.createElement("pre");s.appendChild(r.documentElement);const o=(new yz).readGeometryFromNode(s);return(new Iz).writeGeometryObject(o)}(i):null))(s):null),F(Gt("gmd:EX_GeographicBoundingBox"),s=>s?F(Jr(F(Gt("gmd:westBoundLongitude"),x4()),F(Gt("gmd:southBoundLatitude"),x4()),F(Gt("gmd:eastBoundLongitude"),x4()),F(Gt("gmd:northBoundLatitude"),x4())))(s):null),F(Gt("gmd:EX_GeographicDescription"),s=>s?F(Rr("gmd:geographicIdentifier","gmd:MD_Identifier","gmd:code"),Di("description"))(s):[null,{}]))),vo(([s,i,[o]])=>!!s||!!i||!!o),Mn(([s,i,[o,a]])=>({...s&&{geometry:s},...i&&{bbox:i},...o&&{description:o},translations:a})))(t)}function Sq(t){const e=Tz(t);return F(yr("gmd:locale",!1),Mn(F(Gt("lan:LanguageCode"),Es("codeListValue"),vn(n=>_4(n?.toLowerCase())??n))),vn(n=>n.filter(r=>null!==r)),vn(n=>n.length?n:[e]))(t)}function Tz(t){return F(Gt("gmd:language",!1),Gt("lan:LanguageCode"),Es("codeListValue"),vn(e=>e?_4(e.toLowerCase()):null))(t)}function Hq(t){const e=F(ji(),Rr("gmd:citation","gmd:CI_Citation","gmd:identifier","gmd:MD_Identifier","gmd:code"),Is())(t);return e?[{code:e}]:[]}const Mq={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Z9(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Lq={date:Z9({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Z9({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Z9({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Rq={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function a0(t){return(e,n)=>{let s;if("formatting"===(n?.context?String(n.context):"standalone")&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n?.width?String(n.width):o;s=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n?.width?String(n.width):t.defaultWidth;s=t.values[a]||t.values[o]}return s[t.argumentCallback?t.argumentCallback(e):e]}}function l0(t){return(e,n={})=>{const r=n.width,i=e.match(r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth]);if(!i)return null;const o=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?function Zq(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}(a,h=>h.test(o)):function Wq(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}(a,h=>h.test(o));let c;return c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c,{value:c,rest:e.slice(o.length)}}}const iJ={code:"en-US",formatDistance:(t,e,n)=>{let r;const s=Mq[t];return r="string"==typeof s?s:1===e?s.one:s.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Lq,formatRelative:(t,e,n,r)=>Rq[t],localize:{ordinalNumber:(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:a0({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:a0({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:t=>t-1}),month:a0({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:a0({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:a0({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function jq(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];return o=n.valueCallback?n.valueCallback(o):o,{value:o,rest:e.slice(s.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:t=>parseInt(t,10)}),era:l0({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:l0({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:t=>t+1}),month:l0({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:l0({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:l0({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let Lz={};function z4(){return Lz}Math.pow(10,8);const Rz=6048e5,Bz=Symbol.for("constructDateFrom");function Wc(t,e){return"function"==typeof t?t(e):t&&"object"==typeof t&&Bz in t?t[Bz](e):t instanceof Date?new t.constructor(e):new Date(e)}function Fa(t,e){return Wc(e||t,t)}function Nz(t){const e=Fa(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Fz(t,e){const n=Fa(t,e?.in);return n.setHours(0,0,0,0),n}function dJ(t,e){const n=Fa(t,e?.in);return function uJ(t,e,n){const[r,s]=function cJ(t,...e){const n=Wc.bind(null,t||e.find(r=>"object"==typeof r));return e.map(n)}(n?.in,t,e),i=Fz(r),o=Fz(s),a=+i-Nz(i),l=+o-Nz(o);return Math.round((a-l)/864e5)}(n,function hJ(t,e){const n=Fa(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n))+1}function c0(t,e){const n=z4(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=Fa(t,e?.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function V4(t,e){return c0(t,{...e,weekStartsOn:1})}function Pz(t,e){const n=Fa(t,e?.in),r=n.getFullYear(),s=Wc(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=V4(s),o=Wc(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=V4(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function kz(t,e){const n=Fa(t,e?.in),r=n.getFullYear(),s=z4(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=Wc(e?.in||t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=c0(o,e),l=Wc(e?.in||t,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=c0(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function Qr(t,e){return(t<0?"-":"")+Math.abs(t).toString().padStart(e,"0")}const Zc={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Qr("yy"===e?r%100:r,e.length)},M(t,e){const n=t.getMonth();return"M"===e?String(n+1):Qr(n+1,2)},d:(t,e)=>Qr(t.getDate(),e.length),a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(t,e)=>Qr(t.getHours()%12||12,e.length),H:(t,e)=>Qr(t.getHours(),e.length),m:(t,e)=>Qr(t.getMinutes(),e.length),s:(t,e)=>Qr(t.getSeconds(),e.length),S(t,e){const n=e.length,r=t.getMilliseconds();return Qr(Math.trunc(r*Math.pow(10,n-3)),e.length)}},Oz={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if("yo"===e){const r=t.getFullYear();return n.ordinalNumber(r>0?r:1-r,{unit:"year"})}return Zc.y(t,e)},Y:function(t,e,n,r){const s=kz(t,r),i=s>0?s:1-s;return"YY"===e?Qr(i%100,2):"Yo"===e?n.ordinalNumber(i,{unit:"year"}):Qr(i,e.length)},R:function(t,e){return Qr(Pz(t),e.length)},u:function(t,e){return Qr(t.getFullYear(),e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Qr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Qr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Zc.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Qr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=function mJ(t,e){const n=Fa(t,e?.in),r=+c0(n,e)-+function gJ(t,e){const n=z4(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=kz(t,e),i=Wc(e?.in||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),c0(i,e)}(n,e);return Math.round(r/Rz)+1}(t,r);return"wo"===e?n.ordinalNumber(s,{unit:"week"}):Qr(s,e.length)},I:function(t,e,n){const r=function fJ(t,e){const n=Fa(t,e?.in),r=+V4(n)-+function pJ(t,e){const n=Pz(t,e),r=Wc(e?.in||t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),V4(r)}(n);return Math.round(r/Rz)+1}(t);return"Io"===e?n.ordinalNumber(r,{unit:"week"}):Qr(r,e.length)},d:function(t,e,n){return"do"===e?n.ordinalNumber(t.getDate(),{unit:"date"}):Zc.d(t,e)},D:function(t,e,n){const r=dJ(t);return"Do"===e?n.ordinalNumber(r,{unit:"dayOfYear"}):Qr(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Qr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Qr(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=0===r?7:r;switch(e){case"i":return String(s);case"ii":return Qr(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(s=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(s=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if("ho"===e){let r=t.getHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Zc.h(t,e)},H:function(t,e,n){return"Ho"===e?n.ordinalNumber(t.getHours(),{unit:"hour"}):Zc.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return"Ko"===e?n.ordinalNumber(r,{unit:"hour"}):Qr(r,e.length)},k:function(t,e,n){let r=t.getHours();return 0===r&&(r=24),"ko"===e?n.ordinalNumber(r,{unit:"hour"}):Qr(r,e.length)},m:function(t,e,n){return"mo"===e?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Zc.m(t,e)},s:function(t,e,n){return"so"===e?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Zc.s(t,e)},S:function(t,e){return Zc.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(0===r)return"Z";switch(e){case"X":return Wz(r);case"XXXX":case"XX":return su(r);default:return su(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Wz(r);case"xxxx":case"xx":return su(r);default:return su(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Gz(r,":");default:return"GMT"+su(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Gz(r,":");default:return"GMT"+su(r,":")}},t:function(t,e,n){return Qr(Math.trunc(+t/1e3),e.length)},T:function(t,e,n){return Qr(+t,e.length)}};function Gz(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return 0===i?n+String(s):n+String(s)+e+Qr(i,2)}function Wz(t,e){return t%60==0?(t>0?"-":"+")+Qr(Math.abs(t)/60,2):su(t,e)}function su(t,e=""){const n=t>0?"-":"+",r=Math.abs(t);return n+Qr(Math.trunc(r/60),2)+e+Qr(r%60,2)}const Zz=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},jz=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},vJ={p:jz,P:(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return Zz(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;default:i=e.dateTime({width:"full"})}return i.replace("{{date}}",Zz(r,e)).replace("{{time}}",jz(s,e))}},wJ=/^D+$/,CJ=/^Y+$/,yJ=["D","DD","YY","YYYY"];const HJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,MJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zJ=/^'([^]*?)'?$/,VJ=/''/g,EJ=/[a-zA-Z]/;function E4(t,e,n){const r=z4(),s=n?.locale??r.locale??iJ,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Fa(t,n?.in);if(!function SJ(t){return!(!function xJ(t){return t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)}(t)&&"number"!=typeof t||isNaN(+Fa(t)))}(a))throw new RangeError("Invalid time value");let l=e.match(MJ).map(u=>{const h=u[0];return"p"===h||"P"===h?(0,vJ[h])(u,s.formatLong):u}).join("").match(HJ).map(u=>{if("''"===u)return{isToken:!1,value:"'"};const h=u[0];if("'"===h)return{isToken:!1,value:TJ(u)};if(Oz[h])return{isToken:!0,value:u};if(h.match(EJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(u=>{if(!u.isToken)return u.value;const h=u.value;return(!n?.useAdditionalWeekYearTokens&&function AJ(t){return CJ.test(t)}(h)||!n?.useAdditionalDayOfYearTokens&&function IJ(t){return wJ.test(t)}(h))&&function bJ(t,e,n){const r=function _J(t,e,n){const r="Y"===t[0]?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(t,e,n);if(console.warn(r),yJ.includes(t))throw new RangeError(r)}(h,e,String(t)),(0,Oz[h[0]])(a,h,s.localize,c)}).join("")}function TJ(t){const e=t.match(zJ);return e?e[1].replace(VJ,"'"):t}function Uz(t,e,n,r){if(!n)return F(t,Ri("gmd:PT_FreeText"));function s(i,o){return F(Dr("gmd:textGroup","gmd:LocalisedCharacterString"),bn("locale",`#${i.toUpperCase()}`),Wi(o))}return F(t,Ri("gmd:PT_FreeText"),Ks("gmd:PT_FreeText"),Ut(s(r,e),...Object.entries(n).map(([i,o])=>s(i,o))))}function ms(t){return Q1(F(ua("gco:CharacterString"),Wi(t)))}function Ko(t,e,n){return Uz(ms(t),t,e,n)}function T4(t){return Q1(F(ni("gmd:linkage","gmd:URL"),Wi(t.toString())))}function j9(t,e){return Q1(F(ua("gmx:Anchor"),bn("xlink:href",t.toString()),e?Wi(e):li))}function U9(t,e,n,r){return Uz(j9(t,e),e,n,r)}function L4(t){return F(ua("gco:DateTime"),Wi(E4(t,"yyyy-MM-dd'T'HH:mm:ss")))}function R4(t){return Q1(F(ua("gco:Decimal"),Wi(t.toString())))}function $z(t){switch(t){case"completed":return"completed";case"deprecated":return"deprecated";case"ongoing":return"onGoing";case"removed":return"removed";case"under_development":return"underDevelopment";case"planned":return"planned";case"required":return"required";default:throw new Error(`Could not determine progress code from status: ${t}`)}}function $9(t){switch(t){case"author":return"author";case"collaborator":return"collaborator";case"contributor":return"contributor";case"custodian":return"custodian";case"distributor":return"distributor";case"editor":return"editor";case"funder":return"funder";case"mediator":return"mediator";case"originator":return"originator";case"other":return"other";case"owner":return"owner";case"point_of_contact":return"pointOfContact";case"principal_investigator":return"principalInvestigator";case"processor":return"processor";case"publisher":return"publisher";case"resource_provider":return"resourceProvider";case"rights_holder":return"rightsHolder";case"sponsor":return"sponsor";case"stakeholder":return"stakeholder";case"unspecified":return"unspecified";case"user":return"user";default:throw new Error(`Could not determine role code from role: ${t}`)}}function Xz(t,e,n){const r=Az(t.firstName,t.lastName),s=F(Dr("gmd:address","gmd:CI_Address"),Ut(F(an("gmd:electronicMailAddress"),ms(t.email))),t.address?Ut(F(an("gmd:deliveryPoint"),ms(t.address))):li),i=F(Dr("gmd:contactInfo","gmd:CI_Contact"),t.phone?Ut(F(Dr("gmd:phone","gmd:CI_Telephone","gmd:voice"),ms(t.phone))):li,Ut(s),t.organization?.website?Ut(F(Dr("gmd:onlineResource","gmd:CI_OnlineResource"),T4(t.organization.website))):li);return Ut(F(an("gmd:CI_ResponsibleParty"),r?Ut(F(an("gmd:individualName"),ms(r))):li,t.position?Ut(F(an("gmd:positionName"),ms(t.position))):li,t.organization?.name?Ut(F(an("gmd:organisationName"),ms(t.organization.name))):li,Ut(i,F(Dr("gmd:role","gmd:CI_RoleCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_RoleCode"),bn("codeListValue",$9(t.role))))))}function X9(t,e,n){return"security"===e?F(Dr("gmd:resourceConstraints","gmd:MD_SecurityConstraints"),Ut(F(Dr("gmd:classification","gmd:MD_ClassificationCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_ClassificationCode"),bn("codeListValue","restricted")),F(an("gmd:useLimitation"),"url"in t?U9(t.url,t.text,t.translations?.text,n):Ko(t.text,t.translations?.text,n)))):"legal"===e?F(Dr("gmd:resourceConstraints","gmd:MD_LegalConstraints"),Ut(F(Dr("gmd:accessConstraints","gmd:MD_RestrictionCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_RestrictionCode"),bn("codeListValue","otherRestrictions")),F(an("gmd:otherConstraints"),"url"in t?U9(t.url,t.text,t.translations?.text,n):Ko(t.text,t.translations?.text,n)))):F(Dr("gmd:resourceConstraints","gmd:MD_Constraints","gmd:useLimitation"),"url"in t?U9(t.url,t.text,t.translations?.text,n):Ko(t.text,t.translations?.text,n))}function Y9(){return ha(F(yr("gmd:resourceConstraints"),vo(F(i4,t=>0===t.length))))}function jJ(t){return Ut(F(Dr("gmd:distributionFormat","gmd:MD_Format"),Ut(F(an("gmd:name"),ms(t)),F(an("gmd:version"),ms("1.0")))))}function Yz(){return Dr("gmd:distributionInfo","gmd:MD_Distribution")}function Kz(t,e,n,r){let s,i,o;"service"===t.type?(s=t.identifierInService,i="download",o=function LJ(t){switch(t.accessServiceProtocol.toLowerCase()){case"ogcfeatures":return"OGC API Features";case"wfs":return"OGC:WFS";case"wms":return"OGC:WMS";case"wps":return"OGC:WPS";default:return t.accessServiceProtocol}}(t)):"download"===t.type?(s=t.name,i="download",o="WWW:DOWNLOAD"):(s=t.name,i="information",o="WWW:LINK");const a=Ut(F(Dr("gmd:transferOptions","gmd:MD_DigitalTransferOptions","gmd:onLine","gmd:CI_OnlineResource"),T4(t.url),"description"in t?Ut(F(an("gmd:description"),Ko(t.description,t.translations?.description,r))):li,void 0!==s?Ut(F(an("gmd:name"),Ko(s,t.translations?.name,r))):li,Ut(F(an("gmd:protocol"),ms(o)),F(Dr("gmd:function","gmd:CI_OnLineFunctionCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_OnLineFunctionCode"),bn("codeListValue",i)))));return F("mimeType"in t?e(t.mimeType):li,a)}function Zs(){return t=>{let n="gmd:MD_DataIdentification";return"service"===H4(t)&&(n="srv:SV_ServiceIdentification"),ni("gmd:identificationInfo",n)(t)}}function $J(t,e){F(ua("gmd:fileIdentifier"),ms(t.uniqueIdentifier))(e)}function qz(t,e){F(ni("gmd:hierarchyLevel","gmd:MD_ScopeCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_ScopeCode"),bn("codeListValue",xz(t)))(e)}function XJ(t,e){F(Zs(),ni("gmd:citation","gmd:CI_Citation","gmd:title"),Ko(t.title,t.translations?.title,t.defaultLanguage))(e)}function YJ(t,e){F(Zs(),ua("gmd:abstract"),Ko(t.abstract,t.translations?.abstract,t.defaultLanguage))(e)}function KJ(t,e){F(Zs(),ni("gmd:status","gmd:MD_ProgressCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_ProgressCode"),bn("codeListValue",$z(t.status)))(e)}function qJ(t,e){F(Ri("gmd:contact"),Ut(...t.contacts.map(n=>F(an("gmd:contact"),Xz(n)))))(e)}function JJ(t,e){F(Zs(),Ri("gmd:pointOfContact"),Ri("gmd:contact"),Ut(...t.contactsForResource.map(n=>F(an("gmd:pointOfContact"),Xz(n)))))(e)}function QJ(t,e){F(Zs(),function BJ(){return ha(F(Wr("gmd:descriptiveKeywords")))}(),function FJ(t,e){return Ut(...t.reduce((r,s)=>{const i=s.thesaurus?.id,o=s.type;let a=r.find(l=>i?l[0].thesaurus?.id===i:l[0].type===o&&!l[0].thesaurus);return a||(a=[],r.push(a)),a.push(s),r},[]).map(r=>F(Dr("gmd:descriptiveKeywords","gmd:MD_Keywords"),Ut(F(Dr("gmd:type","gmd:MD_KeywordTypeCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_KeywordTypeCode"),bn("codeListValue",r[0].type))),r[0].thesaurus?Ut(function NJ(t){return F(Dr("gmd:thesaurusName","gmd:CI_Citation"),Ut(F(an("gmd:title"),ms(t.name||t.id)),F(Dr("gmd:identifier","gmd:MD_Identifier"),Ut(F(an("gmd:code"),t.url?j9(t.url,t.id):ms(t.id))))))}(r[0].thesaurus)):li,Ut(...r.map(s=>F(an("gmd:keyword"),Ko(s.label,s.translations?.label,e)))))))}(t.keywords,t.defaultLanguage))(e)}function eQ(t,e){F(Zs(),Ri("gmd:topicCategory"),Ut(...t.topics.map(n=>F(Dr("gmd:topicCategory","gmd:MD_TopicCategoryCode"),Wi(n)))))(e)}function tQ(t,e){F(Zs(),function GJ(){return ha(F(yr("gmd:resourceConstraints"),vo(F(Wr("gmd:MD_LegalConstraints","gmd:accessConstraints","gmd:MD_RestrictionCode"),Mn(Es("codeListValue")),t=>t.some(e=>"license"===e)))))}(),Ut(...t.licenses.map(n=>function WJ(t,e){return F(Dr("gmd:resourceConstraints","gmd:MD_LegalConstraints"),Ut(F(Dr("gmd:accessConstraints","gmd:MD_RestrictionCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_RestrictionCode"),bn("codeListValue","license")),F(Dr("gmd:accessConstraints","gmd:MD_RestrictionCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_RestrictionCode"),bn("codeListValue","otherRestrictions")),F(an("gmd:otherConstraints"),"url"in t?j9(t.url,t.text):Ko(t.text,t.translations?.text,e))))}(n,t.defaultLanguage))))(e)}function nQ(t,e){F(Zs(),function OJ(){return Q1(F(yr("gmd:resourceConstraints"),Mn(ha(F(yr("gmd:MD_LegalConstraints"),vo(F(Wr("gmd:accessConstraints","gmd:MD_RestrictionCode"),Mn(Es("codeListValue")),t=>t.every(e=>"license"!==e))))))))}(),Y9(),Ut(...t.legalConstraints.map(n=>X9(n,"legal",t.defaultLanguage))))(e)}function rQ(t,e){F(Zs(),function kJ(){return Q1(F(yr("gmd:resourceConstraints"),Mn(ha(F(yr("gmd:MD_SecurityConstraints"),vo(F(Wr("gmd:useLimitation"),t=>t.length>0)))))))}(),Y9(),Ut(...t.securityConstraints.map(n=>X9(n,"security",t.defaultLanguage))))(e)}function sQ(t,e){F(Zs(),function PJ(){return Q1(F(yr("gmd:resourceConstraints"),Mn(ha(F(yr("gmd:MD_Constraints"),vo(F(Wr("gmd:useLimitation"),t=>t.length>0)))))))}(),Y9(),Ut(...t.otherConstraints.map(n=>X9(n,"other",t.defaultLanguage))))(e)}function iQ(t,e){F(Zs(),ua("gmd:resourceMaintenance"),t=>t?(t.children.forEach(e=>e.parent=null),t.children=[],t):null,ua("gmd:MD_MaintenanceInformation"),"object"==typeof t.updateFrequency?F(Kd("gmd:userDefinedMaintenanceFrequency","gts:TM_PeriodDuration"),Wi(function DJ(t){const e={years:0,months:0,weeks:0,days:0,hours:0};switch(t.per){case"day":t.updatedTimes<=1?e.days=1:e.hours=Math.round(24/t.updatedTimes);break;case"week":e.days=Math.round(7/t.updatedTimes-1e-4);break;case"month":t.updatedTimes<=1?e.months=1:e.days=Math.round(30/t.updatedTimes);break;case"year":t.updatedTimes<=1?e.years=1:e.months=Math.round(12/t.updatedTimes)}return`P${e.years}Y${e.months}M${e.days}D${e.hours>0?`T${e.hours}H`:""}`}(t.updateFrequency))):F(Kd("gmd:maintenanceAndUpdateFrequency","gmd:MD_MaintenanceFrequencyCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_MaintenanceFrequencyCode"),bn("codeListValue",function RJ(t){switch(t){case"asNeeded":return"asNeeded";case"unknown":return"unknown";case"irregular":return"irregular";case"notPlanned":return"notPlanned";case"continual":return"continual";case"periodic":return"periodic";case"daily":return"daily";case"weekly":return"weekly";case"fortnightly":return"fortnightly";case"monthly":return"monthly";case"quarterly":return"quarterly";case"biannually":return"biannually";case"annually":return"annually";case"semimonthly":return"semimonthly";case"biennially":return"biennially"}}(t.updateFrequency))))(e)}function oQ(t,e){F(ua("gmd:dateStamp"),t=>t?(t.children.forEach(e=>e.parent=null),t.children=[],t):null,L4(t.recordUpdated))(e)}function K9(t){return F(Zs(),ni("gmd:citation","gmd:CI_Citation"),ha(F(Wr("gmd:date"),vo(F(Rr("gmd:CI_Date","gmd:dateType","gmd:CI_DateTypeCode"),Es("codeListValue"),vn(e=>e===t))))))}function q9(t,e){return F(Zs(),ni("gmd:citation","gmd:CI_Citation"),Ut(F(Dr("gmd:date","gmd:CI_Date"),Ut(F(an("gmd:date"),L4(t)),F(Dr("gmd:dateType","gmd:CI_DateTypeCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode"),bn("codeListValue",e))))))}function aQ(t,e){K9("creation")(e),t.resourceCreated&&q9(t.resourceCreated,"creation")(e)}function lQ(t,e){K9("revision")(e),t.resourceUpdated&&q9(t.resourceUpdated,"revision")(e)}function cQ(t,e){K9("publication")(e),t.resourcePublished&&q9(t.resourcePublished,"publication")(e)}function uQ(t,e){qz(t,e)}function hQ(t,e){t.spatialRepresentation?F(Zs(),ni("gmd:spatialRepresentationType","gmd:MD_SpatialRepresentationTypeCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_SpatialRepresentationTypeCode"),bn("codeListValue",t.spatialRepresentation))(e):F(Zs(),Ri("gmd:spatialRepresentationType"))(e)}function dQ(t,e){F(Zs(),Ri("gmd:graphicOverview"),Ut(...t.overviews.filter(n=>n.url).map(n=>F(Dr("gmd:graphicOverview","gmd:MD_BrowseGraphic"),Ut(F(an("gmd:fileName"),ms(n.url.toString()))),"description"in n?Ut(F(an("gmd:fileDescription"),ms(n.description))):li))))(e)}function pQ(t,e){F(ni("gmd:dataQualityInfo","gmd:DQ_DataQuality","gmd:lineage","gmd:LI_Lineage","gmd:statement"),Ko(t.lineage,t.translations?.lineage,t.defaultLanguage))(e)}function gQ(t){let e,n,r;"endpoint"===t.type?(e=t.url.toString(),r=function fQ(t){switch(t.accessServiceProtocol.toLowerCase()){case"wfs":return"OGC:WFS";case"wms":return"OGC:WMS";case"wps":return"OGC:WPS";default:return t.accessServiceProtocol}}(t),n="download"):(e=t.url.toString(),n="information",r="WWW:LINK");const s=Ut(F(an("gmd:transferOptions"),Kd("gmd:MD_DigitalTransferOptions","gmd:onLine","gmd:CI_OnlineResource"),T4(e),"description"in t?Ut(F(an("gmd:description"),ms(t.description))):li,"name"in t?Ut(F(an("gmd:name"),ms(t.name))):li,Ut(F(an("gmd:protocol"),ms(r)),F(Dr("gmd:function","gmd:CI_OnLineFunctionCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_OnLineFunctionCode"),bn("codeListValue",n)))));return F(Dr("gmd:distributionInfo","gmd:MD_Distribution"),s)}function Jz(t,e){Ut(...t.onlineResources.map(gQ))(e)}function vQ(t,e){(function ZJ(){return Ri("gmd:distributionInfo")})()(e),"dataset"!==t.kind&&"reuse"!==t.kind?Jz(t,e):function mQ(t,e){Ut(...t.onlineResources.map(n=>F(Yz(),Kz(n,jJ,0,t.defaultLanguage))))(e)}(t,e)}function wQ(t,e){F(Zs(),ni("gmd:extent","gmd:EX_Extent"),Ri("gmd:temporalElement"),Ut(...t.temporalExtents.map(n=>F(Dr("gmd:temporalElement","gmd:EX_TemporalExtent"),Ut("start"in n&&"end"in n?F(Dr("gmd:extent","gml:TimePeriod"),Ut(F(an("gml:beginPosition"),F(n.start?Wi(E4(n.start,"yyyy-MM-dd")):bn("indeterminatePosition","unknown"))),F(an("gml:endPosition"),F(n.end?Wi(E4(n.end,"yyyy-MM-dd")):bn("indeterminatePosition","unknown"))))):F(Dr("gmd:extent","gml:TimeInstant","gml:timePosition"),n.start?Wi(E4(n.start,"yyyy-MM-dd")):bn("indeterminatePosition","unknown")))))))(e)}function CQ(t,e){F(Zs(),ni("gmd:extent","gmd:EX_Extent"),Ri("gmd:geographicElement"),Ut(...t.spatialExtents.map(i=>F(an("gmd:geographicElement"),Ut((i=>i?F(an("gmd:EX_BoundingPolygon"),Ut(F(an("gmd:polygon"),Ut(()=>function DK(t){const n=(new Iz).readGeometry(t),i=(new yz).writeGeometryNode(n).firstElementChild;return s9(n9((new XMLSerializer).serializeToString(i)))}(i))))):null)(i.geometry),(i=>i?F(an("gmd:EX_GeographicBoundingBox"),Ut(F(an("gmd:westBoundLongitude"),R4(i[0])),F(an("gmd:eastBoundLongitude"),R4(i[2])),F(an("gmd:southBoundLatitude"),R4(i[1])),F(an("gmd:northBoundLatitude"),R4(i[3])))):null)(i.bbox),((i,o)=>i?F(Dr("gmd:EX_GeographicDescription","gmd:geographicIdentifier","gmd:MD_Identifier","gmd:code"),Ko(i,o,t.defaultLanguage)):null)(i.description,i.translations?.description))))))(e)}function yQ(t,e){if(Ri("gmd:locale")(e),!t.otherLanguages?.length)return;const n=r=>F(Dr("gmd:locale","gmd:PT_Locale"),bn("id",r.toUpperCase()),Kd("gmd:languageCode","gmd:LanguageCode"),bn("codeList","http://www.loc.gov/standards/iso639-2/"),bn("codeListValue",k9(r)??r));Ut(n(t.defaultLanguage),...t.otherLanguages.map(n))(e)}function IQ(t,e){const n=k9(t.defaultLanguage.toLowerCase());return F(ni("gmd:language","gmd:LanguageCode"),bn("codeList","http://www.loc.gov/standards/iso639-2/"),bn("codeListValue",n))(e)}function AQ(t,e){const n=t.resourceIdentifiers?.[0]?.code;F(Zs(),ni("gmd:citation","gmd:CI_Citation"),Ri("gmd:identifier"),n?F(Kd("gmd:identifier","gmd:MD_Identifier","gmd:code"),ms(n)):li)(e)}class J9 extends BM{constructor(){super(...arguments),this.readers={uniqueIdentifier:QK,kind:H4,ownerOrganization:eq,recordUpdated:sq,recordCreated:()=>{},recordPublished:()=>{},resourceIdentifiers:Hq,resourceUpdated:tq,resourceCreated:nq,resourcePublished:rq,reuseType:iq,title:oq,abstract:aq,contacts:lq,contactsForResource:cq,keywords:dq,topics:wq,licenses:vq,legalConstraints:fq,securityConstraints:gq,otherConstraints:mq,status:pq,updateFrequency:Aq,spatialRepresentation:Cq,overviews:yq,lineage:Iq,onlineResources:bq,temporalExtents:_q,spatialExtents:xq,otherLanguages:Sq,defaultLanguage:Tz,extras:()=>{},landingPage:()=>{},translations:()=>{}},this.writers={uniqueIdentifier:$J,kind:qz,ownerOrganization:()=>{},recordUpdated:oQ,recordCreated:()=>{},recordPublished:()=>{},resourceIdentifiers:AQ,resourceUpdated:lQ,resourceCreated:aQ,resourcePublished:cQ,reuseType:uQ,title:XJ,abstract:YJ,contacts:qJ,contactsForResource:JJ,keywords:QJ,topics:eQ,licenses:tQ,legalConstraints:nQ,securityConstraints:rQ,otherConstraints:sQ,status:KJ,updateFrequency:iQ,spatialRepresentation:hQ,overviews:dQ,lineage:pQ,onlineResources:vQ,temporalExtents:wQ,spatialExtents:CQ,otherLanguages:yQ,defaultLanguage:IQ,extras:()=>{},landingPage:()=>{},translations:()=>{}}}beforeDocumentCreation(e){}afterRecordRead(e){function n(r){if("translations"in r)for(const s in r.translations){const i=r.translations[s]??{};if(e.defaultLanguage in i&&delete i[e.defaultLanguage],0!==Object.keys(i).length)for(const o in i)e.otherLanguages.includes(o)||e.otherLanguages.push(o);else delete r.translations[s]}}return n(e),e.keywords.map(n),e.onlineResources.map(n),e.licenses.map(n),e.legalConstraints.map(n),e.securityConstraints.map(n),e.otherConstraints.map(n),e.contacts.map(r=>n(r.organization)),e.contactsForResource.map(r=>n(r.organization)),n(e.ownerOrganization),"dataset"===e.kind&&e.spatialExtents.map(n),e.otherLanguages.includes(e.defaultLanguage)&&(e.otherLanguages=e.otherLanguages.filter(r=>r!==e.defaultLanguage)),e}readBaseRecord(e,n){const r=this.readers.uniqueIdentifier(e,n),s=this.readers.kind(e,n),i=this.readers.ownerOrganization(e,n),o=this.readers.title(e,n),a=this.readers.abstract(e,n),l=this.readers.contacts(e,n),c=this.readers.contactsForResource(e,n),u=this.readers.recordUpdated(e,n),h=this.readers.recordCreated(e,n),d=this.readers.recordPublished(e,n),p=this.readers.resourceCreated(e,n),m=this.readers.resourceUpdated(e,n),y=this.readers.resourcePublished(e,n),H=this.readers.keywords(e,n),T=this.readers.topics(e,n),V=this.readers.legalConstraints(e,n),J=this.readers.otherConstraints(e,n),ie=this.readers.securityConstraints(e,n),D=this.readers.licenses(e,n),re=this.readers.overviews(e,n),j=this.readers.landingPage(e,n),ue=this.readers.onlineResources(e,n),Me=this.readers.otherLanguages(e,n),Ce=this.readers.defaultLanguage(e,n),ze=this.readers.resourceIdentifiers(e,n),Ae=this.readers.spatialExtents(e,n);return{uniqueIdentifier:r,...ze?.length>0&&{resourceIdentifiers:ze},kind:s,otherLanguages:Me,defaultLanguage:Ce,...h&&{recordCreated:h},...d&&{recordPublished:d},recordUpdated:u,...p&&{resourceCreated:p},...m&&{resourceUpdated:m},...y&&{resourcePublished:y},title:o,abstract:a,ownerOrganization:i,contacts:l,contactsForResource:c,keywords:H,topics:T,licenses:D,legalConstraints:V,securityConstraints:ie,otherConstraints:J,overviews:re,spatialExtents:Ae,onlineResources:ue,translations:n,...j&&{landingPage:j}}}readRecord(e){var n=this;return(0,ei.A)(function*(){const s=s9(n9(e)),i={},o=n.readers.kind(s,i);if("dataset"===o){const a=n.readers.status(s,i),l=n.readers.spatialRepresentation(s,i),c=n.readers.temporalExtents(s,i),u=n.readers.lineage(s,i),h=n.readers.updateFrequency(s,i);return n.afterRecordRead({...n.readBaseRecord(s,i),kind:o,status:a,lineage:u,...l&&{spatialRepresentation:l},temporalExtents:c,updateFrequency:h,translations:i})}if("reuse"===o){const a=n.readers.lineage(s,i),l=n.readers.temporalExtents(s,i),c=n.readers.reuseType(s,i);return n.afterRecordRead({...n.readBaseRecord(s,i),kind:o,lineage:a,temporalExtents:l,reuseType:c})}return n.afterRecordRead({...n.readBaseRecord(s,i),kind:o})})()}writeRecord(e,n){var r=this;return(0,ei.A)(function*(){let s,i;if(n){let a;const l=n9(n),c=yield r.readRecord(n);s=s9(l),i=u=>null===c||!r4(e[u],c[u])||a&&NM(u),a=i("otherLanguages")}else s=an("gmd:MD_Metadata")(),i=()=>!0;return i("uniqueIdentifier")&&r.writers.uniqueIdentifier(e,s),i("reuseType")&&r.writers.reuseType(e,s),i("kind")&&r.writers.kind(e,s),i("defaultLanguage")&&r.writers.defaultLanguage(e,s),i("contacts")&&r.writers.contacts(e,s),i("ownerOrganization")&&r.writers.ownerOrganization(e,s),i("recordUpdated")&&r.writers.recordUpdated(e,s),i("recordCreated")&&r.writers.recordCreated(e,s),i("recordPublished")&&r.writers.recordPublished(e,s),(i("title")||i("translations"))&&r.writers.title(e,s),(i("abstract")||i("translations"))&&r.writers.abstract(e,s),i("resourceCreated")&&r.writers.resourceCreated(e,s),i("resourcePublished")&&r.writers.resourcePublished(e,s),i("resourceUpdated")&&r.writers.resourceUpdated(e,s),i("contactsForResource")&&r.writers.contactsForResource(e,s),i("keywords")&&r.writers.keywords(e,s),i("topics")&&r.writers.topics(e,s),i("legalConstraints")&&r.writers.legalConstraints(e,s),i("securityConstraints")&&r.writers.securityConstraints(e,s),i("licenses")&&r.writers.licenses(e,s),i("otherConstraints")&&r.writers.otherConstraints(e,s),i("onlineResources")&&r.writers.onlineResources(e,s),i("resourceIdentifiers")&&r.writers.resourceIdentifiers(e,s),"dataset"===e.kind&&(i("status")&&r.writers.status(e,s),i("updateFrequency")&&r.writers.updateFrequency(e,s),i("spatialRepresentation")&&r.writers.spatialRepresentation(e,s),i("overviews")&&r.writers.overviews(e,s),i("temporalExtents")&&r.writers.temporalExtents(e,s),i("spatialExtents")&&r.writers.spatialExtents(e,s),(i("lineage")||i("translations"))&&r.writers.lineage(e,s)),i("otherLanguages")&&r.writers.otherLanguages(e,s),r.beforeDocumentCreation(s),Xd(r9(s))})()}}function Q9(t){return F(Rr("mdb:metadataScope","mdb:MD_MetadataScope","mdb:resourceScope","mcc:MD_ScopeCode"),Es("codeListValue"),vn(e=>O9(e)))(t)}function eC(t,e,n){const r=F(Gt("cit:positionName"),Is()),s=F(Gt("cit:name"),Is(),vn(d=>d?N9(d):[])),i=Rr("cit:contactInfo","cit:CI_Contact"),o=F(i,Rr("cit:address","cit:CI_Address")),a=F(o,Jr(F(Gt("cit:deliveryPoint",!1),Is()),F(Gt("cit:city",!1),Is()),F(Gt("cit:postalCode",!1),Is()),F(Gt("cit:country",!1),Is())),vn(d=>d.filter(p=>!!p).join(", "))),l=F(i,Rr("cit:phone","cit:CI_Telephone","cit:number"),Is()),c=F(o,Gt("cit:electronicMailAddress",!1),Is()),u={name:"Missing Organization",translations:{}};let h={};return n&&(h={email:n.email,...n.address&&{address:n.address},...n.phone&&{phone:n.phone},...n.position&&{position:n.position},organization:e}),F(Jr(r,s,c,a,l),vn(([d,[p,m],y,H,T])=>({...h,email:y||h.email||"missing@missing.com",role:t,organization:e||u,...d&&{position:d},...p&&{firstName:p},...m&&{lastName:m},...H&&{address:H},...T&&{phone:T}})))}function Qz(){const t=F(Gt("cit:role"),Sz()),e=F(Jr(t,Wr("cit:party","cit:CI_Individual")),([r,s])=>s.map(eC(r))),n=F(Jr(t,Wr("cit:party","cit:CI_Organisation")),vn(([r,s])=>s.map(function xQ(t){return F(Jr(function _Q(){const t=F(Wr("cit:contactInfo","cit:CI_Contact","cit:onlineResource","cit:CI_OnlineResource","cit:linkage"),Oc(0),Xl());return F(Jr(F(Gt("cit:name",!1),Di("name")),t),vn(([[e,n],r])=>({name:e,...r&&{website:r},translations:n})))}(),eC(t),Wr("cit:individual","cit:CI_Individual")),vn(([e,n,r])=>r.length?r.map(s=>eC(t,e,n)(s)):[{email:n.email,...n.address&&{address:n.address},...n.phone&&{phone:n.phone},...n.position&&{position:n.position},organization:e,role:t}]))}(r))),t=>t.flat());return F(Jr(e,n),t=>t.flat())}function SQ(t){return F(Rr("mdb:metadataIdentifier","mcc:MD_Identifier","mcc:code"),Is())(t)}function HQ(t){const e=eV(t),n=tV(t);return(e.filter(s=>"point_of_contact"===s.role)[0]||e[0]||n[0]).organization}function eV(t){return F(Wr("mdb:contact","cit:CI_Responsibility"),Mn(Qz()),t=>t.flat())(t)}function tV(t){return F(Jr(F(ji(),Wr("mri:citation","cit:CI_Citation","cit:citedResponsibleParty")),F(ji(),yr("mri:pointOfContact",!1)),F(function bQ(){return Rr("mdb:distributionInfo","mrd:MD_Distribution")}(),yr("mrd:distributorContact"))),t=>t.flat(),Mn(Gt("cit:CI_Responsibility",!1)),Mn(Qz()),t=>t.flat())(t)}function MQ(t){return F(Rr("mdb:metadataLinkage","cit:CI_OnlineResource","cit:linkage"),Xl())(t)}function zQ(t,e){return F(Rr("mdb:resourceLineage","mrl:LI_Lineage","mrl:statement"),Di("lineage",e),vn(([n])=>n))(t)}function tC(t){return F(yr("mdb:dateInfo",!1),vo(e=>F(Gt("cit:CI_DateTypeCode"),Es("codeListValue"))(e)===t),Oc(0),Gt("cit:date"),G9())}function VQ(t){return tC("revision")(t)}function EQ(t){return tC("creation")(t)}function TQ(t){return tC("publication")(t)}function LQ(t){return F(Rr("mdb:metadataScope","mdb:MD_MetadataScope","mdb:resourceScope","mcc:MD_ScopeCode"),Es("codeListValue"),vn(e=>_z(e)))(t)}const RQ=F(PM("mrd:MD_Distribution"),Rr("mrd:distributionFormat","mrd:MD_Format","mrd:formatSpecificationCitation","cit:CI_Citation","cit:title"),Is(),vn(GM));function DQ(t){let e;return e="dataset"===Q9(t)?zz(RQ):"service"===Q9(t)?Vz():Ez(),F(Wr("mrd:distributionInfo","mrd:MD_Distribution"),Mn(e),t=>t.flat())(t)}function nV(){return F(Gt("lan:LanguageCode"),Es("codeListValue"),vn(t=>_4(t?.toLowerCase())??t))}function BQ(t){return F(Gt("mdb:defaultLocale",!1),nV())(t)}function NQ(t){return F(yr("mdb:otherLocale",!1),Mn(nV()),vn(e=>e.filter(n=>null!==n)))(t)}function FQ(t,e){F(ni("mdb:metadataIdentifier","mcc:MD_Identifier","mcc:code"),ms(t.uniqueIdentifier))(e)}function rV(t,e){const n=xz(t);F(ni("mdb:metadataScope","mdb:MD_MetadataScope","mdb:resourceScope","mcc:MD_ScopeCode"),bn("codeList","https://standards.iso.org/iso/19115/resources/Codelists/cat/codelists.xml#MD_ScopeCode"),bn("codeListValue",n),Wi(n))(e)}function nC(t){return ha(F(yr("mdb:dateInfo",!1),vo(F(Gt("cit:CI_DateTypeCode"),Es("codeListValue"),vn(e=>e===t)))))}function rC(t,e){return Ut(F(an("mdb:dateInfo"),Ks("cit:CI_Date"),Ut(F(an("cit:date"),L4(t)),F(an("cit:dateType"),Ks("cit:CI_DateTypeCode"),bn("codeList","https://standards.iso.org/iso/19115/resources/Codelists/cat/codelists.xml#CI_DateTypeCode"),bn("codeListValue",e),Wi(e)))))}function PQ(t,e){nC("revision")(e),rC(t.recordUpdated,"revision")(e)}function kQ(t,e){nC("creation")(e),t.recordCreated&&rC(t.recordCreated,"creation")(e)}function OQ(t,e){nC("publication")(e),t.recordPublished&&rC(t.recordPublished,"publication")(e)}function sC(t){return F(Zs(),ni("mri:citation","cit:CI_Citation"),ha(F(yr("cit:date",!1),vo(F(Gt("cit:CI_DateTypeCode"),Es("codeListValue"),vn(e=>e===t))))))}function iC(t,e){return F(ji(),Rr("mri:citation","cit:CI_Citation"),Ut(F(an("cit:date"),Ks("cit:CI_Date"),Ut(F(an("cit:date"),L4(t)),F(an("cit:dateType"),Ks("cit:CI_DateTypeCode"),bn("codeList","https://standards.iso.org/iso/19115/resources/Codelists/cat/codelists.xml#CI_DateTypeCode"),bn("codeListValue",e),Wi(e))))))}function GQ(t,e){sC("revision")(e),t.resourceUpdated&&iC(t.resourceUpdated,"revision")(e)}function WQ(t,e){sC("creation")(e),t.resourceCreated&&iC(t.resourceCreated,"creation")(e)}function ZQ(t,e){sC("publication")(e),t.resourcePublished&&iC(t.resourcePublished,"publication")(e)}function jQ(t,e){rV(t,e)}function oC(t,e){const n=Az(t.firstName,t.lastName),r=F(an("cit:individual"),Ks("cit:CI_Individual"),n?Ut(F(an("cit:name"),ms(n))):li,t.position?Ut(F(an("cit:positionName"),ms(t.position))):li),s=F(an("cit:contactInfo"),Ks("cit:CI_Contact"),Ut(F(an("cit:address"),Ks("cit:CI_Address"),Ut(F(an("cit:electronicMailAddress"),ms(t.email))),t.address?Ut(F(an("cit:deliveryPoint"),ms(t.address))):li)),t.organization?.website?Ut(F(an("cit:onlineResource"),Ks("cit:CI_OnlineResource"),Ks("cit:linkage"),ms(t.organization.website.toString()))):li,t.phone?Ut(F(an("cit:phone"),Ks("cit:CI_Telephone"),Ks("cit:number"),ms(t.phone))):li),i=F(an("cit:role"),Ks("cit:CI_RoleCode"),bn("codeList","https://standards.iso.org/iso/19115/resources/Codelists/cat/codelists.xml#CI_RoleCode"),bn("codeListValue",$9(t.role)),Wi($9(t.role))),o=F(an("cit:party"),Ks("cit:CI_Organisation"),t.organization?.name?Ut(F(an("cit:name"),Ko(t.organization?.name,t.organization?.translations?.name,e))):li,Ut(s,r));return Ut(F(an("cit:CI_Responsibility"),Ut(i,o)))}function UQ(t,e){F(Ri("mdb:contact"),Ut(...t.contacts.map(n=>F(an("gmd:contact"),oC(n,t.defaultLanguage)))))(e)}function $Q(t,e){const n=t.contactsForResource.filter(s=>"distributor"!==s.role),r=t.contactsForResource.filter(s=>"distributor"===s.role);F(Zs(),Ri("mri:pointOfContact"),Ut(...n.map(s=>F(an("mri:pointOfContact"),oC(s,t.defaultLanguage)))))(e),r.length&&F(function UJ(){return t=>ni("gmd:distributionInfo","gmd:MD_Distribution")(t)}(),Ri("mrd:distributor"),Ks("mrd:distributor"),Ks("mrd:MD_Distributor"),Ut(...r.map(s=>F(an("mrd:distributorContact"),oC(s,t.defaultLanguage)))))(e)}function XQ(t,e){F(ni("mdb:metadataLinkage","cit:CI_OnlineResource","cit:linkage"),T4(t.landingPage))(e)}function YQ(t,e){F(ni("mdb:resourceLineage","mrl:LI_Lineage","mrl:statement"),Ko(t.lineage,t.translations?.lineage,t.defaultLanguage))(e)}function KQ(t,e){const n=$z(t.status);F(Zs(),ni("mri:status","mcc:MD_ProgressCode"),bn("codeList","https://standards.iso.org/iso/19115/resources/Codelists/cat/codelists.xml#MD_ProgressCode"),bn("codeListValue",n),Wi(n))(e)}function qQ(t,e){t.spatialRepresentation?F(Zs(),ni("mri:spatialRepresentationType","mcc:MD_SpatialRepresentationTypeCode"),bn("codeList","https://standards.iso.org/iso/19115/resources/Codelists/cat/codelists.xml#MD_SpatialRepresentationTypeCode"),bn("codeListValue",t.spatialRepresentation),Wi(t.spatialRepresentation))(e):F(Zs(),Ri("mri:spatialRepresentationType"))(e)}function QQ(t){return Ut(F(an("mrd:distributionFormat"),Ks("mrd:MD_Format"),Ks("mrd:formatSpecificationCitation"),Ks("cit:CI_Citation"),Ks("cit:title"),ms(t)))}function eee(t,e){(function JQ(t){F(Wr("mdb:distributionInfo","mrd:MD_Distribution"),Mn(F(ha(yr("mrd:distributionFormat",!1)),ha(yr("mrd:transferOptions",!1)))))(t),ha(F(yr("mdb:distributionInfo",!1),vo(F(Gt("mrd:MD_Distribution"),i4,vn(e=>0===e.length)))))(t)})(e),"service"!==t.kind?t.onlineResources.forEach((n,r)=>{F(Gc(F(Wr("gmd:distributionInfo","gmd:MD_Distribution"),Oc(r)),kM(Yz())),Kz(n,QQ,0,t.defaultLanguage))(e)}):Jz(t,e)}function sV(t){const e=k9(t.toLowerCase())??t;return F(ua("lan:PT_Locale"),bn("id",t.toUpperCase()),ni("lan:language","gmd:LanguageCode"),bn("codeList","http://www.loc.gov/standards/iso639-2/"),bn("codeListValue",e))}function tee(t,e){F(ua("mdb:defaultLocale"),sV(t.defaultLanguage))(e)}function nee(t,e){Ri("mdb:otherLocale")(e),t.otherLanguages?.length&&Ut(...t.otherLanguages.map(n=>F(an("mdb:otherLocale"),sV(n))))(e)}class aC extends J9{constructor(){super(),this.readers.uniqueIdentifier=SQ,this.readers.kind=Q9,this.readers.recordUpdated=VQ,this.readers.recordCreated=EQ,this.readers.recordPublished=TQ,this.readers.contacts=eV,this.readers.contactsForResource=tV,this.readers.ownerOrganization=HQ,this.readers.landingPage=MQ,this.readers.lineage=zQ,this.readers.onlineResources=DQ,this.readers.defaultLanguage=BQ,this.readers.otherLanguages=NQ,this.readers.reuseType=LQ,this.writers.uniqueIdentifier=FQ,this.writers.kind=rV,this.writers.recordUpdated=PQ,this.writers.recordCreated=kQ,this.writers.recordPublished=OQ,this.writers.resourceUpdated=GQ,this.writers.resourceCreated=WQ,this.writers.resourcePublished=ZQ,this.writers.reuseType=jQ,this.writers.contacts=UQ,this.writers.contactsForResource=$Q,this.writers.ownerOrganization=()=>{},this.writers.landingPage=XQ,this.writers.lineage=YQ,this.writers.onlineResources=eee,this.writers.status=KQ,this.writers.spatialRepresentation=qQ,this.writers.defaultLanguage=tee,this.writers.otherLanguages=nee}beforeDocumentCreation(e){!function wY(t,e){(function n(r){r.name in e?r.name=e[r.name]:r.name&&FM(r.name)in e&&(r.name=`${e[FM(r.name)]}:${$l(r.name)}`),r.children&&r.children.forEach(n)})(t)}(e,{gmd:"mdb","gmd:characterEncoding":"lan:characterEncoding","gmd:MD_CharacterSetCode":"lan:MD_CharacterSetCode","gmd:MD_DataIdentification":"mri:MD_DataIdentification","gmd:citation":"mri:citation","gmd:abstract":"mri:abstract","gmd:title":"cit:title","gmd:CI_Citation":"cit:CI_Citation","gmx:Anchor":"gcx:Anchor","gmd:PT_Locale":"lan:PT_Locale","gmd:PT_FreeText":"lan:PT_FreeText","gmd:LanguageCode":"lan:LanguageCode","gmd:status":"mri:status","gmd:MD_ProgressCode":"mri:MD_ProgressCode","gmd:date":"cit:date","gmd:CI_Date":"cit:CI_Date","gmd:dateType":"cit:dateType","gmd:CI_DateTypeCode":"cit:CI_DateTypeCode","gmd:CI_Responsibility":"cit:CI_Responsibility","gmd:role":"cit:role","gmd:CI_RoleCode":"cit:CI_RoleCode","gmd:descriptiveKeywords":"mri:descriptiveKeywords","gmd:MD_Keywords":"mri:MD_Keywords","gmd:type":"mri:type","gmd:MD_KeywordTypeCode":"mri:MD_KeywordTypeCode","gmd:thesaurusName":"mri:thesaurusName","gmd:keyword":"mri:keyword","gmd:identifier":"cit:identifier","gmd:MD_Identifier":"mcc:MD_Identifier","gmd:code":"mcc:code","gmd:MD_Distribution":"mrd:MD_Distribution","gmd:transferOptions":"mrd:transferOptions","gmd:MD_DigitalTransferOptions":"mrd:MD_DigitalTransferOptions","gmd:onLine":"mrd:onLine","gmd:distributionFormat":"mrd:distributionFormat","gmd:MD_Format":"mrd:MD_Format","gmd:CI_OnlineResource":"cit:CI_OnlineResource","gmd:linkage":"cit:linkage","gmd:name":"cit:name","gmd:description":"cit:description","gmd:CI_OnLineFunctionCode":"cit:CI_OnLineFunctionCode","gmd:function":"cit:function","gmd:protocol":"cit:protocol","gmd:topicCategory":"mri:topicCategory","gmd:MD_TopicCategoryCode":"mri:MD_TopicCategoryCode","gmd:resourceMaintenance":"mri:resourceMaintenance","gmd:MD_MaintenanceInformation":"mmi:MD_MaintenanceInformation","gmd:userDefinedMaintenanceFrequency":"mmi:userDefinedMaintenanceFrequency","gts:TM_PeriodDuration":"gco:TM_PeriodDuration","gmd:resourceConstraints":"mri:resourceConstraints","gmd:MD_Constraints":"mco:MD_Constraints","gmd:MD_LegalConstraints":"mco:MD_LegalConstraints","gmd:MD_SecurityConstraints":"mco:MD_SecurityConstraints","gmd:useLimitation":"mco:useLimitation","gmd:useConstraints":"mco:useConstraints","gmd:accessConstraints":"mco:accessConstraints","gmd:otherConstraints":"mco:otherConstraints","gmd:MD_RestrictionCode":"mco:MD_RestrictionCode","gmd:classification":"mco:classification","gmd:MD_ClassificationCode":"mco:MD_ClassificationCode","gmd:graphicOverview":"mri:graphicOverview","gmd:MD_BrowseGraphic":"mcc:MD_BrowseGraphic","gmd:fileName":"mcc:fileName","gmd:fileDescription":"mcc:fileDescription","gmd:URL":"gco:CharacterString"})}writeRecord(e,n){var r=()=>super.writeRecord,s=this;return(0,ei.A)(function*(){let i=yield r().call(s,e,n);return i=i.replace('"http://www.isotc211.org/2005/gco"','"http://standards.iso.org/iso/19115/-3/gco/1.0"'),i})()}}var ro=xe(1752);function Sr(t,e){const n=e||{namedNode:r=>new ro.A(r)};return function(r){return n.namedNode(t+(r||""))}}const Co=Sr("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),u0=(Sr("http://www.w3.org/2000/01/rdf-schema#"),Sr("http://xmlns.com/foaf/0.1/")),vr=(Sr("http://www.w3.org/2001/XMLSchema#"),Sr("http://www.w3.org/ns/dcat#")),js=Sr("http://purl.org/dc/terms/"),ree=Sr("http://www.w3.org/2004/02/skos/core#"),h0=(Sr("http://schema.org/"),Sr("https://spdx.org/rdf/terms/#"),Sr("http://www.w3.org/ns/adms#"),Sr("http://www.w3.org/ns/dqv#"),Sr("http://www.w3.org/2002/07/owl#"),Sr("http://www.w3.org/2006/vcard/ns#")),see=(Sr("http://www.w3.org/2006/time#"),Sr("http://www.w3.org/ns/locn#"));var _t=xe(1423),Yl=xe(9423),yo=xe(9788),dn=xe(9535),vs=xe(1551);const Kl={boolean:new ro.A("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:new ro.A("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:new ro.A("http://www.w3.org/2001/XMLSchema#decimal"),double:new ro.A("http://www.w3.org/2001/XMLSchema#double"),integer:new ro.A("http://www.w3.org/2001/XMLSchema#integer"),langString:new ro.A("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:new ro.A("http://www.w3.org/2001/XMLSchema#string")};class qs extends yo.A{constructor(e,n,r){super(e),(0,_t.A)(this,"termType",dn.QW),(0,_t.A)(this,"classOrder",Yl.A.Literal),(0,_t.A)(this,"datatype",Kl.string),(0,_t.A)(this,"isVar",0),(0,_t.A)(this,"language",""),n?(this.language=n,this.datatype=Kl.langString):this.datatype=r?ro.A.fromValue(r):Kl.string}copy(){return new qs(this.value,this.lang,this.datatype)}equals(e){return!!e&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&(!this.datatype&&!e.datatype||this.datatype&&this.datatype.equals(e.datatype))}get lang(){return this.language}set lang(e){this.language=e||""}toNT(){return qs.toNT(this)}static toNT(e){if("number"==typeof e.value)return""+e.value;if("string"!=typeof e.value)throw new Error("Value of RDF literal is not string or number: "+e.value);var n=e.value;return n='"'+(n=(n=(n=(n=n.replace(/\\/g,"\\\\")).replace(/\"/g,'\\"')).replace(/\n/g,"\\n")).replace(/\r/g,"\\r"))+'"',e.language?n+="@"+e.language:e.datatype.equals(Kl.string)||(n+="^^"+e.datatype.toCanonical()),n}toString(){return""+this.value}static fromBoolean(e){return new qs(e?"1":"0",null,Kl.boolean)}static fromDate(e){if(!(e instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");let n=function(s){return(""+(100+s)).slice(1,3)},r=e.getUTCFullYear()+"-"+n(e.getUTCMonth()+1)+"-"+n(e.getUTCDate())+"T"+n(e.getUTCHours())+":"+n(e.getUTCMinutes())+":"+n(e.getUTCSeconds())+"Z";return new qs(r,null,Kl.dateTime)}static fromNumber(e){if("number"!=typeof e)throw new TypeError("Invalid argument to Literal.fromNumber()");let n;const r=e.toString();return n=r.indexOf("e")<0&&Math.abs(e)<=Number.MAX_SAFE_INTEGER?Number.isInteger(e)?Kl.integer:Kl.decimal:Kl.double,new qs(r,null,n)}static fromValue(e){if((0,vs.c$)(e))return e;switch(typeof e){case"object":if(e instanceof Date)return qs.fromDate(e);case"boolean":return qs.fromBoolean(e);case"number":return qs.fromNumber(e);case"string":return new qs(e)}throw new Error("Can't make literal from "+e+" of type "+typeof e)}}class Ui extends yo.A{static getId(e){if(e){if("string"!=typeof e)throw new Error("Bad id argument to new blank node: "+e);if(e.includes("#")){let n=e.split("#");return n[n.length-1]}return e}return"n"+Ui.nextId++}constructor(e){super(Ui.getId(e)),(0,_t.A)(this,"termType",dn.$Q),(0,_t.A)(this,"classOrder",Yl.A.BlankNode),(0,_t.A)(this,"isBlank",1),(0,_t.A)(this,"isVar",1)}get id(){return this.value}set id(e){this.value=e}compareTerm(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.id<e.id?-1:this.id>e.id?1:0}copy(e){var n=new Ui;return e.copyTo(this,n),n}toCanonical(){return Ui.NTAnonymousNodePrefix+this.value}toString(){return Ui.NTAnonymousNodePrefix+this.id}}(0,_t.A)(Ui,"nextId",0),(0,_t.A)(Ui,"NTAnonymousNodePrefix","_:");const d0="chrome:theSession";function iV(t){return typeof t>"u"||null===t||(0,vs.D0)(t)?t:Array.isArray(t)?new Pa(t):qs.fromValue(t)}new ro.A(d0);class Pa extends yo.A{constructor(e){super((Ui.nextId++).toString()),(0,_t.A)(this,"termType",dn.r0),(0,_t.A)(this,"classOrder",Yl.A.Collection),(0,_t.A)(this,"closed",!1),(0,_t.A)(this,"compareTerm",Ui.prototype.compareTerm),(0,_t.A)(this,"elements",[]),(0,_t.A)(this,"isVar",0),e&&e.length>0&&e.forEach(n=>{this.elements.push(iV(n))})}get id(){return this.value}set id(e){this.value=e}append(e){return this.elements.push(e)}close(){return this.closed=!0,this.closed}shift(){return this.elements.shift()}substitute(e){const n=this.elements.map(r=>r.substitute(e));return new Pa(n)}toNT(){return Pa.toNT(this)}static toNT(e){return Ui.NTAnonymousNodePrefix+e.id}toString(){return"("+this.elements.join(" ")+")"}unshift(e){return this.elements.unshift(e)}}(0,_t.A)(Pa,"termType",dn.r0);class lC extends yo.A{constructor(){super(""),(0,_t.A)(this,"value",""),(0,_t.A)(this,"termType",dn.ic),(0,_t.A)(this,"uri",d0)}toCanonical(){return this.value}toString(){return"DefaultGraph"}}function oV(t){return!!t&&t.termType===dn.ic}const iee=new lC;class ql{constructor(e,n,r,s){(0,_t.A)(this,"subject",void 0),(0,_t.A)(this,"predicate",void 0),(0,_t.A)(this,"object",void 0),(0,_t.A)(this,"graph",void 0),this.subject=yo.A.fromValue(e),this.predicate=yo.A.fromValue(n),this.object=yo.A.fromValue(r),this.graph=null==s?iee:yo.A.fromValue(s)}get why(){return this.graph}set why(e){this.graph=e}equals(e){return e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}substitute(e){return new ql(this.subject.substitute(e),this.predicate.substitute(e),this.object.substitute(e),oV(this.graph)?this.graph:this.graph.substitute(e))}toCanonical(){let e=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&this.graph.termType!==dn.ic&&e.push(this.graph.toCanonical()),e.join(" ")+" ."}toNT(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}toNQ(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT(),oV(this.graph)?"":this.graph.toNT()].join(" ")+" ."}toString(){return this.toNT()}}var aV=aV||console.log;function jc(t){var e;return(e=t.indexOf("#"))<0?t:t.slice(0,e)}function oee(t){var e=/[^\/]*\/\/([^\/]*)\//.exec(t);return e?e[1]:""}function Bo(t,e){var n,r,s,o,a,l=e.indexOf("#");if(l>0&&(e=e.slice(0,l)),0===t.length)return e;if(0===t.indexOf("#"))return e+t;if(t.indexOf(":")>=0||(n=e.indexOf(":"),0===e.length))return t;if(n<0)return aV("Invalid base: "+e+" in join with given: "+t),t;if(r=e.slice(0,+n+1||9e9),0===t.indexOf("//"))return r+t;if(e.indexOf("//",n)===n+1){if((s=e.indexOf("/",n+3))<0)return e.length-n-3>0?e+"/"+t:r+t}else if((s=e.indexOf("/",n+1))<0)return e.length-n-1>0?e+"/"+t:r+t;if(0===t.indexOf("/"))return e.slice(0,s)+t;if((o=(a=e.slice(s)).lastIndexOf("/"))<0)return r+t;for(o>=0&&o<a.length-1&&(a=a.slice(0,+o+1||9e9)),a+=t;a.match(/[^\/]*\/\.\.\//);)a=a.replace(/[^\/]*\/\.\.\//,"");return a=(a=a.replace(/\.\//g,"")).replace(/\/\.$/,"/"),e.slice(0,s)+a}function lV(t){const e=t.indexOf(":");return e<0?null:t.slice(0,e)}function cC(t,e){var r,s,i,o,a,l,c,u,h,d,p,m,y=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!t)return e;if(t===e)return"";for(r=c=0,o=e.length;c<o&&e[r]===t[r];r=++c);if(t.slice(0,r).match(y)&&((s=e.indexOf("//"))<0&&(s=-2),i=e.indexOf("/",s+2),"/"!==e[i+1]&&"/"!==t[i+1]&&e.slice(0,i)===t.slice(0,i)))return e.slice(i);if("#"===e[r]&&t.length===r)return e.slice(r);for(;r>0&&"/"!==e[r-1];)r--;if(r<3||t.indexOf("//",r-2)>0||e.indexOf("//",r-2)>0||t.indexOf(":",r)>0)return e;for(l=0,u=0,a=(d=t.slice(r)).length;u<a;u++)"/"===d[u]&&l++;if(0===l&&r<e.length&&"#"===e[r])return"./"+e.slice(r);if(0===l&&r===e.length)return"./";if(m="",l>0)for(h=1,p=l;p>=1?h<=p:h>=p;p>=1?++h:--h)m+="../";return m+e.slice(r)}class Jl extends yo.A{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";super(e),(0,_t.A)(this,"termType",dn.P2),(0,_t.A)(this,"base","varid:"),(0,_t.A)(this,"classOrder",Yl.A.Variable),(0,_t.A)(this,"isVar",1),(0,_t.A)(this,"uri",void 0),this.base="varid:",this.uri=Bo(e,this.base)}equals(e){return!!e&&this.termType===e.termType&&this.value===e.value}hashString(){return this.toString()}substitute(e){var n;return null!=(n=e[this.toNT()])?n:this}toString(){return Jl.toString(this)}static toString(e){return e.uri.slice(0,e.base.length)===e.base?`?${e.uri.slice(e.base.length)}`:`?${e.uri}`}}let No=function(t){return t.collections="COLLECTIONS",t.defaultGraphType="DEFAULT_GRAPH_TYPE",t.equalsMethod="EQUALS_METHOD",t.id="ID",t.identity="IDENTITY",t.reversibleId="REVERSIBLE_ID",t.variableType="VARIABLE_TYPE",t}({});const cV=new lC,ka={supports:{[No.collections]:!1,[No.defaultGraphType]:!1,[No.equalsMethod]:!0,[No.identity]:!1,[No.id]:!0,[No.reversibleId]:!1,[No.variableType]:!0},blankNode:t=>new Ui(t),defaultGraph:()=>cV,equals(t,e){return t===e||!t||!e||((0,vs.aF)(t)||(0,vs.aF)(e)?!(!(0,vs.aF)(t)||!(0,vs.aF)(e))&&this.equals(t.subject,e.subject)&&this.equals(t.predicate,e.predicate)&&this.equals(t.object,e.object)&&this.equals(t.graph,e.graph):!(!(0,vs.D0)(t)||!(0,vs.D0)(e))&&this.id(t)===this.id(e))},id(t){if(!t)return"undefined";if((0,vs.aF)(t))return this.quadToNQ(t);switch(t.termType){case dn.ic:return"defaultGraph";case dn.P2:return Jl.toString(t);default:const e=this.termToNQ(t);if(e)return e;throw new Error(`Can't id term with type '${t.termType}'`)}},isQuad:t=>t instanceof ql,literal(t,e){if("string"!=typeof t&&!e)return qs.fromValue(t);const n="string"==typeof t?t:""+t;return"string"==typeof e?-1===e.indexOf(":")?new qs(n,e):new qs(n,null,this.namedNode(e)):new qs(n,null,e)},namedNode:t=>new ro.A(t),quad:(t,e,n,r)=>new ql(t,e,n,r||cV),triple(t,e,n,r){return this.quad(t,e,n,r)},quadToNQ(t){return`${this.termToNQ(t.subject)} ${this.termToNQ(t.predicate)} ${this.termToNQ(t.object)} ${this.termToNQ(t.graph)} .`},termToNQ(t){switch(t.termType){case dn.$Q:return"_:"+t.value;case dn.ic:return"";case dn.S:return"<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>";case dn.QW:return qs.toNT(t);case dn.bD:case dn.Kk:return"<"+t.value+">";case dn.r0:return"("+t.elements.map(e=>this.termToNQ(e)).join(" ")+")";default:throw new Error(`Can't serialize nonstandard term type (was '${t.termType}')`)}},toNQ(t){return this.isQuad(t)?this.quadToNQ(t):this.termToNQ(t)},variable:t=>new Jl(t)},Bi={debug(t){},warn(t){},info(t){},error(t){},success(t){},msg(t){}};var Fo=xe(9223);function uV(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;return{boolean:t.namedNode("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:t.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:t.namedNode("http://www.w3.org/2001/XMLSchema#decimal"),double:t.namedNode("http://www.w3.org/2001/XMLSchema#double"),integer:t.namedNode("http://www.w3.org/2001/XMLSchema#integer"),langString:t.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:t.namedNode("http://www.w3.org/2001/XMLSchema#string")}}uV(ka);var aee=xe(974),hV=xe.n(aee),lee=xe(6998);class uC{constructor(e){(0,_t.A)(this,"_notQNameChars","\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~"),(0,_t.A)(this,"_notNameChars",this._notQNameChars+":"),(0,_t.A)(this,"validPrefix",new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)),(0,_t.A)(this,"forbidden1",new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm)),(0,_t.A)(this,"forbidden3",new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm)),this.flags="",this.base=null,this.prefixes=[],this.namespaces=[];const n=Object.keys(hV()());for(const r in n){const s=hV()()[n[r]](""),i=n[r];this.prefixes[s]=i,this.namespaces[i]=s}this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=e,this.rdfFactory=e.rdfFactory||ka,this.xsd=uV(this.rdfFactory)}setBase(e){return this.base=e,this}setFlags(e){return this.flags=e||"",this}toStr(e){var n=e.toNT();return"Graph"===e.termType&&(this.formulas[n]=e),n}fromStr(e){if("{"===e[0]){var n=this.formulas[e];return n||console.log("No formula object for "+e),n}return this.store.fromNT(e)}setNamespaces(e){for(var n in e)this.setPrefix(n,e[n]);return this}setPrefix(e,n){if("default"!==e.slice(0,7)&&"ns"!==e.slice(0,2)&&e&&n){for(let r in this.prefixes)this.prefixes[r]==e&&delete this.prefixes[r];this.prefixes[n]=e,this.namespaces[e]=n}}suggestPrefix(e,n){"default"!==e.slice(0,7)&&"ns"!==e.slice(0,2)&&(!e||!n||e in this.namespaces||n in this.prefixes||(this.prefixes[n]=e,this.namespaces[e]=n))}suggestNamespaces(e){for(var n in e)this.suggestPrefix(n,e[n]);return this}checkIntegrity(){var e,n;for(e in this.namespaces)if(this.prefixes[this.namespaces[e]]!==e)throw new Error("Serializer integity error 1: "+e+", "+this.namespaces[e]+", "+this.prefixes[this.namespaces[e]]+"!");for(n in this.prefixes)if(this.namespaces[this.prefixes[n]]!==n)throw new Error("Serializer integity error 2: "+n+", "+this.prefixs[n]+", "+this.namespaces[this.prefixes[n]]+"!")}makeUpPrefix(e){var n=e,s=function r(l){return!(!this.validPrefix.test(l)||"ns"===l||l in this.namespaces)&&(this.prefixes[e]=l,this.namespaces[l]=e,l)}.bind(this);"#/".indexOf(n[n.length-1])>=0&&(n=n.slice(0,-1));var i=n.lastIndexOf("/");i>=0&&(n=n.slice(i+1));for(var o=0;o<n.length&&this.prefixchars.indexOf(n[o]);)o++;if((n=n.slice(0,o)).length<6&&s(n))return n;if(s(n.slice(0,3)))return n.slice(0,3);if(s(n.slice(0,2)))return n.slice(0,2);if(s(n.slice(0,4)))return n.slice(0,4);if(s(n.slice(0,1)))return n.slice(0,1);if(s(n.slice(0,5)))return n.slice(0,5);this.validPrefix.test(n)||(n="n");for(var a=0;;a++)if(s(n.slice(0,3)+a))return n.slice(0,3)+a}rootSubjects(e){for(var n={},r={},s={},i=0;i<e.length;i++){var o=e[i],a=function(y){n.hasOwnProperty(y)||(n[y]=[]),n[y].push(o.subject)};[o.subject,o.predicate,o.object].map(function(y){"BlankNode"===y.termType?s[y.toNT()]=!0:"Collection"===y.termType&&y.elements.forEach(function(H){a(H)})}),a(e[i].object);var c=r[this.toStr(o.subject)];c||(c=[]),c.push(o),r[this.toStr(o.subject)]=c}var u=[];for(var h in r)if(r.hasOwnProperty(h)){var d=this.fromStr(h);if("BlankNode"!==d.termType||!n[d]||1!==n[d].length){u.push(d);continue}}this.incoming=n;for(var p={},m=0;m<u.length;m++)p[u[m].toNT()]=!0;return{roots:u,subjects:r,rootsHash:p,incoming:n}}toN3(e){return this.statementsToN3(e.statements)}explicitURI(e){return"<"+(e=this.flags.indexOf("r")<0&&this.base?cC(this.base,e):this.flags.indexOf("u")>=0?function uee(t){for(var n,e="",r=0;r<t.length;r++)(n=t.charCodeAt(r))>65535?e+="\\U"+("00000000"+n.toString(16)).slice(-8):e+=n>126?"\\u"+("0000"+n.toString(16)).slice(-4):t[r];return e}(e):function cee(t){return encodeURI(t)}(decodeURI(e)))+">"}statementsToNTriples(e){var n=e.slice();n.sort();for(var r="",s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i=this,o=this.store,a=this.rdfFactory,l=function(d){if("Collection"!==d.termType)return i.atomicTermToN3(d);for(var p=d.elements,m=o.sym(s+"nill"),y=p.length-1;y>=0;y--){var H=a.blankNode();r+=l(H)+" "+l(o.sym(s+"first"))+" "+l(p[y])+".\n",r+=l(H)+" "+l(o.sym(s+"rest"))+" "+l(m)+".\n",m=H}return i.atomicTermToN3(m)},c=0;c<n.length;c++){var u=n[c],h="";h+=l(u.subject)+" ",h+=l(u.predicate)+" ",h+=l(u.object)+" ",this.flags.indexOf("q")>=0&&(h+=l(u.why)+" "),r+=h+=".\n"}return r}statementsToN3(e){var s=this.store,i={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"};e.sort(function(j,ue){return Fo.VQ(j,ue,s,i)}),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var a={};this.flags.indexOf("s")<0&&(a["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(a["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(a["http://www.w3.org/2000/10/swap/log#implies"]="=>");var l=function(j){for(var ue="",Me=0;Me<j;Me++)ue+=" ";return ue},c=function(j){for(var ue="",Me=0;Me<j.length;Me++){var Ce=j[Me],ze="string"==typeof Ce?Ce:c(Ce);if(0!==Me){var Ae=ue.slice(-1)||" ";","===ze||";"===ze||"."===ze&&!"0123456789.:".includes(Ae)||(ue+=" ")}ue+=ze}return ue},u=function(j,ue){var Me="",Ce=1e5;void 0===ue&&(ue=-1);for(var ze=0;ze<j.length;ze++){var Ae=j[ze];if("string"!=typeof Ae){var dt=u(Ae,ue+1);if(dt.length<10*(80-4*ue)&&dt.indexOf('"""')<0){var ft=c(Ae);ft.length<80-4*ue&&(Ae=ft,dt="")}dt&&(Ce=1e4),Me+=dt}if("string"==typeof Ae){if(1===Ae.length&&"\n"===Me.slice(-1)&&",.;".indexOf(Ae)>=0){Me=Me.slice(0,-1),"."==Ae&&"0123456789.:".includes(Me.charAt(Me.length-1))&&(Me+=" ",Ce+=1),Me+=Ae+"\n",Ce+=1;continue}if(Ce<4*ue+4||Ce+Ae.length+1<80&&";.".indexOf(Me[Me.length-2])<0)Me=Me.slice(0,-1)+" "+Ae+"\n",Ce+=Ae.length+1;else{let $e=l(4*ue)+Ae;Me+=$e+"\n",Ce=$e.length,ue<0&&(Me+="\n",Ce=1e5)}}}return Me},d=function h(j){for(var ue=this.rootSubjects(j),Me=ue.roots,Ce=[],ze=0;ze<Me.length;ze++)Ce.push(p(Me[ze],ue));return Ce}.bind(this);function p(j,ue){return"BlankNode"!==j.termType||ue.incoming[j]?[J(j,ue)].concat([y(j,ue)]).concat(["."]):T(j,ue,!0).concat(["."])}var y=function m(j,ue){var Me=[],Ce=null,ze=ue.subjects[this.toStr(j)]||[];if(typeof ze>"u")throw new Error("Cant find statements for "+j);for(var Ae=[],dt=0;dt<ze.length;dt++){var ft=ze[dt];ft.predicate.uri===Ce?Ae.push(","):(Ce&&(Me=Me.concat([Ae]).concat([";"]),Ae=[]),Me.push(a[ft.predicate.uri]?a[ft.predicate.uri]:J(ft.predicate,ue))),Ce=ft.predicate.uri,Ae.push(T(ft.object,ue))}return Me.concat([Ae])}.bind(this),T=function H(j,ue,Me){return"BlankNode"!==j.termType||!Me&&void 0!==ue.rootsHash[j.toNT()]?J(j,ue):ue.subjects[this.toStr(j)]?["[",y(j,ue),"]"]:"[]"}.bind(this);uC.prototype.termToN3=J;var J=function V(j,ue){var Me,Ce;switch(j.termType){case"Graph":return(Ce=(Ce=["{"]).concat(d(j.statements))).concat(["}"]);case"Collection":for(Ce=["("],Me=0;Me<j.elements.length;Me++)Ce.push([T(j.elements[Me],ue)]);return Ce.push(")"),Ce;default:return this.atomicTermToN3(j)}}.bind(this),D=function ie(){var j="";for(var ue in this.flags.indexOf("d")<0&&this.defaultNamespace&&(j+="@prefix : "+this.explicitURI(this.defaultNamespace)+".\n"),this.prefixes)this.prefixes.hasOwnProperty(ue)&&this.namespacesUsed[ue]&&(j+="@prefix "+this.prefixes[ue]+": "+this.explicitURI(ue)+".\n");return j+"\n"}.bind(this),re=d(e);return D()+u(re)}atomicTermToN3(e,n){switch(e.termType){case"BlankNode":case"Variable":return e.toNT();case"Literal":var r=e.value;if("string"!=typeof r)throw new TypeError("Value of RDF literal node must be a string");if(e.datatype&&this.flags.indexOf("x")<0)switch(e.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return r;case"http://www.w3.org/2001/XMLSchema#decimal":return r.indexOf(".")<0&&(r+=".0"),r;case"http://www.w3.org/2001/XMLSchema#double":{const i=r.toLowerCase().indexOf("e")>0;return r.indexOf(".")<0&&!i&&(r+=".0"),i||(r+="e0"),r}case"http://www.w3.org/2001/XMLSchema#boolean":return"1"===e.value?"true":"false"}var s=this.stringToN3(e.value,this.flags);return e.language?s+="@"+e.language:e.datatype.equals(this.xsd.string)||(s+="^^"+this.atomicTermToN3(e.datatype,n)),s;case"NamedNode":return this.symbolToN3(e);case"DefaultGraph":return"";default:throw new Error("Internal: atomicTermToN3 cannot handle "+e+" of termType: "+e.termType)}}stringToN3(e,n){n||(n="e");var s,i,o,a,l,r="";for(e.length>20&&'"'!==e.slice(-1)&&n.indexOf("n")<0&&(e.indexOf("\n")>0||e.indexOf('"')>0)?(a='"""',l=this.forbidden3):(a='"',l=this.forbidden1),s=0;s<e.length&&(l.lastIndex=0,null!=l.exec(e.slice(s)));){r+=e.slice(s,i=s+l.lastIndex-1);var u=e[i];'"'===u&&'"""'===a&&'"""'!==e.slice(i,i+3)?r+=u:(o='\b\f\r\t\v\n\\"'.indexOf(u))>=0?r+="\\"+'bfrtvn\\"'[o]:n.indexOf("e")>=0?r+="\\u"+("000"+u.charCodeAt(0).toString(16).toLowerCase()).slice(-4):r+=u,s=i+1}return a+r+e.slice(s)+a}symbolToN3(e){var n=e.uri,r=n.indexOf("#");if(r<0&&this.flags.indexOf("/")<0&&(r=n.lastIndexOf("/")),r>=0&&this.flags.indexOf("p")<0&&(0===n.indexOf("http")||0===n.indexOf("ws")||0===n.indexOf("file"))){for(var s=!0,i=r+1;i<n.length;i++)if(this._notNameChars.indexOf(n[i])>=0){s=!1;break}if(s){var o=n.slice(r+1),a=n.slice(0,r+1);if(this.defaultNamespace&&this.defaultNamespace===a&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(o)<0?o:":"+o;var l=this.prefixes[a];if(l||(l=this.makeUpPrefix(a)),l)return this.namespacesUsed[a]=!0,l+":"+o}}return this.explicitURI(n)}writeStore(e){var n=this.store,r=n.fetcher,s=r&&r.appNode,i=this.store.index[3];for(var o in i){var a=n.fromNT(o);s&&a.equals(s)||e("\n"+this.atomicTermToN3(a)+" "+this.atomicTermToN3(n.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(n.statementsMatching(void 0,void 0,void 0,a))+" }.\n")}n.statementsMatching(void 0,n.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(u){e("\n<"+u.object.value+"> log:metadata {\n");var h=n.statementsMatching(void 0,void 0,void 0,u.subject);e(this.statementsToN3(this.statementsToN3(h))),e("}.\n")});var l=[];s&&l.push(s);var c=[];l.map(function(u){c=c.concat(n.statementsMatching(void 0,void 0,void 0,u))}),e(this.statementsToN3(c))}statementsToXML(e){var s=[];s["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var i="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",o=function(Ce){for(var ze="",Ae=0;Ae<Ce;Ae++)ze+=" ";return ze},a=function(Ce){for(var ze="",Ae=0;Ae<Ce.length;Ae++){var dt=Ce[Ae];ze+="string"==typeof dt?dt:a(dt)}return ze},l=function(Ce,ze){var dt,Ae="",ft=1e5;ze||(ze=0);for(var $e=0;$e<Ce.length;$e++){var Xt=Ce[$e];if("string"!=typeof Xt){var pn=l(Xt,ze+1);pn.length<10*(80-4*ze)&&pn.indexOf('"""')<0&&(dt=a(Xt)).length<80-4*ze&&(Xt="   "+dt,pn=""),pn&&(ft=1e4),Ae+=pn}"string"==typeof Xt&&(ft<4*ze+4?(Ae=Ae.slice(0,-1)+" "+Xt+"\n",ft+=Xt.length+1):(Ae+=(dt=o(4*ze)+Xt)+"\n",ft=dt.length))}return Ae},u=function c(Ce){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var ze=this.rootSubjects(Ce),Ae=ze.roots,dt=[],ft=0;ft<Ae.length;ft++)dt.push(y(Ae[ft],ze));return dt}.bind(this);function h(Ce){return typeof Ce>"u"?"@@@undefined@@@@":Ce.replace(/[&<"]/g,function(ze){switch(ze[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}var p=function d(Ce){return h(this.base?cC(this.base,Ce.uri):Ce.uri)}.bind(this),y=function m(Ce,ze){var dt,ft,$e,Xt,Ae=[],pn=ze.subjects[this.toStr(Ce)];if(typeof pn>"u")return V(Ce,ze);pn.sort(function(Si,Fi){var oo=Si.predicate.uri,ui=Fi.predicate.uri;if(oo.substring(0,44)===i||ui.substring(0,44)===i)return oo.localeCompare(ui);var xl=oo.substring(44),_o=ui.substring(44),Sl=parseInt(xl,10),uh=parseInt(_o,10);return isNaN(Sl)||isNaN(uh)||Sl!==xl||uh!==_o?oo.localeCompare(ui):Sl-uh});for(var bs=0;bs<pn.length;bs++)if("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"!==($e=pn[bs]).predicate.uri||dt||"NamedNode"!==$e.object.termType){if((Xt=$e.predicate).uri.substr(0,44)===i){var Ds=Xt.uri.substr(44);Ds===parseInt(Ds,10).toString()&&(Xt=this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(ft=ie(Xt),$e.object.termType){case"BlankNode":Ae=Ae.concat(1===ze.incoming[$e.object].length?["<"+ft+' rdf:parseType="Resource">',y($e.object,ze),"</"+ft+">"]:["<"+ft+' rdf:nodeID="'+$e.object.toNT().slice(2)+'"/>']);break;case"NamedNode":Ae=Ae.concat(["<"+ft+' rdf:resource="'+p($e.object)+'"/>']);break;case"Literal":Ae=Ae.concat(["<"+ft+($e.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+h($e.object.datatype.uri)+'"')+($e.object.language?' xml:lang="'+$e.object.language+'"':"")+">"+h($e.object.value)+"</"+ft+">"]);break;case"Collection":Ae=Ae.concat(["<"+ft+' rdf:parseType="Collection">',H($e.object,ze),"</"+ft+">"]);break;default:throw new Error("Can't serialize object of type "+$e.object.termType+" into XML")}}else dt=$e.object;var Ns=dt?ie(dt):"rdf:Description",xi="";return"BlankNode"===Ce.termType?(!ze.incoming[Ce]||1!==ze.incoming[Ce].length)&&(xi=' rdf:nodeID="'+Ce.toNT().slice(2)+'"'):xi=' rdf:about="'+p(Ce)+'"',["<"+Ns+xi+">"].concat([Ae]).concat(["</"+Ns+">"])}.bind(this);function H(Ce,ze){for(var Ae=[],dt=0;dt<Ce.elements.length;dt++)Ae.push(y(Ce.elements[dt],ze));return Ae}var V=function T(Ce,ze){var Ae=[],dt=ze.subjects[this.toStr(Ce)];if(!dt)return Ae;dt.sort();for(var ft=0;ft<dt.length;ft++){var $e=dt[ft];switch($e.object.termType){case"BlankNode":Ae=ze.rootsHash[$e.object.toNT()]?Ae.concat(["<"+ie($e.predicate)+' rdf:nodeID="'+$e.object.toNT().slice(2)+'">',"</"+ie($e.predicate)+">"]):Ae.concat(["<"+ie($e.predicate)+' rdf:parseType="Resource">',V($e.object,ze),"</"+ie($e.predicate)+">"]);break;case"NamedNode":Ae=Ae.concat(["<"+ie($e.predicate)+' rdf:resource="'+p($e.object)+'"/>']);break;case"Literal":Ae=Ae.concat(["<"+ie($e.predicate)+($e.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+h($e.object.datatype.value)+'"')+($e.object.language?' xml:lang="'+$e.object.language+'"':"")+">"+h($e.object.value)+"</"+ie($e.predicate)+">"]);break;case"Collection":Ae=Ae.concat(["<"+ie($e.predicate)+' rdf:parseType="Collection">',H($e.object,ze),"</"+ie($e.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+$e.object.termType+" into XML")}}return Ae}.bind(this),ie=function J(Ce){var ze=Ce.uri,Ae=ze.indexOf("#");if(Ae<0&&this.flags.indexOf("/")<0&&(Ae=ze.lastIndexOf("/")),Ae<0)throw new Error("Cannot make qname out of <"+ze+">");for(var dt=Ae+1;dt<ze.length;dt++)if(this._notNameChars.indexOf(ze[dt])>=0)throw new Error('Invalid character "'+ze[dt]+'" cannot be in XML qname for URI: '+ze);var ft=ze.slice(Ae+1),$e=ze.slice(0,Ae+1);if(this.defaultNamespace&&this.defaultNamespace===$e&&this.flags.indexOf("d")<0)return ft;var Xt=this.prefixes[$e];return Xt||(Xt=this.makeUpPrefix($e)),s[$e]=!0,Xt+":"+ft}.bind(this),D=u(e),re="<rdf:RDF";for(var j in this.defaultNamespace&&(re+=' xmlns="'+h(this.defaultNamespace)+'"'),s)if(s.hasOwnProperty(j)){var ue=this.base&&this.flags.includes("z")?cC(this.base,j):j;re+="\n xmlns:"+this.prefixes[j]+'="'+h(ue)+'"'}return l([re+=">",D,"</rdf:RDF>"],-1)}statementsToJsonld(e){const n=this.statementsToN3(e),r=lee.parse(n);return JSON.stringify(r,null,2)}}function D4(t,e,n,r,s,i){n=n||t?.value;const o=i||{};r=r||dn.sT;try{var l=function dV(t){return new uC(t)}(e);o.flags&&l.setFlags(o.flags);var c=e.statementsMatching(void 0,void 0,void 0,t);switch("namespaces"in e&&l.suggestNamespaces(e.namespaces),o.namespaces&&l.setNamespaces(o.namespaces),l.setBase(n),r){case dn.JG:return u(null,l.statementsToXML(c));case dn.ny:case dn.MG:return u(null,l.statementsToN3(c));case dn.sT:case dn.hu:return l.setFlags("si"),u(null,l.statementsToN3(c));case dn.bM:return l.setFlags("deinprstux"),u(null,l.statementsToNTriples(c));case dn.i2:return l.setFlags("si dr"),u(null,l.statementsToJsonld(c));case dn._0:case dn.BR:return l.setFlags("deinprstux q"),u(null,l.statementsToNTriples(c));default:throw new Error("Serialize: Content-type "+r+" not supported for data write.")}}catch(h){if(s)return s(h,void 0);throw h}function u(h,d){return s?void s(h,d):d}}const hee=["blankNode","defaultGraph","literal","namedNode","quad","variable","supports"],B4_rest="http://www.w3.org/1999/02/22-rdf-syntax-ns#rest";function pV(t,e,n){const r=[];return n.reduce((s,i,o,a)=>{let l;return r.push(t.quad(s,t.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),a[o])),o<a.length-1?(l=t.blankNode(),r.push(t.quad(s,t.namedNode(B4_rest),l))):r.push(t.quad(s,t.namedNode(B4_rest),t.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"))),l},e),r}function da(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var r=t.length;for(n<0&&(n=r+n);n<r;n++)if(t[n]===e)return n;return-1}class p0 extends yo.A{constructor(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};super(""),e=this,this.statements=n,this.constraints=r,this.initBindings=s,this.optional=i,(0,_t.A)(this,"termType",dn.bD),(0,_t.A)(this,"classOrder",Yl.A.Graph),(0,_t.A)(this,"fetcher",void 0),(0,_t.A)(this,"isVar",0),(0,_t.A)(this,"ns",Sr),(0,_t.A)(this,"rdfFactory",void 0),this.rdfFactory=o&&o.rdfFactory||ka;for(const a of hee)this[a]=function(){return e.rdfFactory[a](...arguments)}}add(e,n,r,s){return 1===arguments.length&&e.forEach(i=>this.add(i.subject,i.predicate,i.object,i.graph)),this.statements.push(this.rdfFactory.quad(e,n,r,s))}addStatement(e){return this.add(e)}bnode(e){return this.rdfFactory.blankNode(e)}addAll(e){e.forEach(n=>{this.add(n.subject,n.predicate,n.object,n.graph)})}any(e,n,r,s){const i=this.anyStatementMatching(e,n,r,s);return null==i?null:null==e?i.subject:null==n?i.predicate:null==r?i.object:null}anyValue(e,n,r,s){const i=this.any(e,n,r,s);return i?i.value:void 0}anyJS(e,n,r,s){const i=this.any(e,n,r,s);return i?yo.A.toJS(i):void 0}anyStatementMatching(e,n,r,s){let i=this.statementsMatching(e,n,r,s,!0);if(i&&0!==i.length)return i[0]}id(e){return this.rdfFactory.id(e)}statementsMatching(e,n,r,s,i){const o=this.statements.filter(a=>(!e||e.equals(a.subject))&&(!n||n.equals(a.predicate))&&(!r||r.equals(a.object))&&(!s||s.equals(a.graph)));return i?0===o.length?[]:[o[0]]:o}bottomTypeURIs(e){let n,r,s,i,o,a,l,c;n=[];for(let u in e)if(e.hasOwnProperty(u)){for(c=e[u],l=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.rdfFactory.namedNode(u)),r=!0,i=0,o=l.length;i<o;i++)if(s=l[i],a=s.uri,a in e){r=!1;break}r&&(n[u]=c)}return n}collection(){return new Pa}each(e,n,r,s){const i=[];let o=this.statementsMatching(e,n,r,s,!1);if(null==e)for(let a=0,l=o.length;a<l;a++)i.push(o[a].subject);else if(null==n)for(let a=0,l=o.length;a<l;a++)i.push(o[a].predicate);else if(null==r)for(let a=0,l=o.length;a<l;a++)i.push(o[a].object);else if(null==s)for(let a=0,l=o.length;a<l;a++)i.push(new ro.A(o[a].graph.value));return i}equals(e){return!!e&&this.hashString()===e.hashString()}findMembersNT(e){let n,r,s,i,o,a,l,c,u,h,d,p,m,y;p={},p[e.toNT()]=!0,i={},a=this.transitiveClosure(p,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(let H in a)if(a.hasOwnProperty(H)){l=this.statementsMatching(void 0,this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(H));for(let T=0,V=l.length;T<V;T++)m=l[T],i[m.subject.toNT()]=m;c=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(H));for(let T=0,V=c.length;T<V;T++)for(o=c[T],u=this.statementsMatching(void 0,o),s=0,n=u.length;s<n;s++)m=u[s],i[m.subject.toNT()]=m;h=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(H));for(let T=0,V=h.length;T<V;T++)for(o=h[T],d=this.statementsMatching(void 0,o),y=0,r=d.length;y<r;y++)m=d[y],i[m.object.toNT()]=m}return i}findMemberURIs(e){return this.NTtoURI(this.findMembersNT(e))}findSubClassesNT(e){let n={};return n[e.toNT()]=!0,this.transitiveClosure(n,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}findSuperClassesNT(e){let n={};return n[e.toNT()]=!0,this.transitiveClosure(n,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}findTypesNT(e){let n,r,s,i,o,a,l,c,u;s="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",u=[],i=this.statementsMatching(e,void 0,void 0);for(let h=0,d=i.length;h<d;h++)if(c=i[h],"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===c.predicate.uri)u[c.object.toNT()]=c;else{o=this.each(c.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"));for(let p=0,m=o.length;p<m;p++)r=o[p],u[r.toNT()]=c}a=this.statementsMatching(void 0,void 0,e);for(let h=0,d=a.length;h<d;h++){c=a[h],l=this.each(c.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"));for(let p=0,m=l.length;p<m;p++)n=l[p],u[n.toNT()]=c}return this.transitiveClosure(u,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}findTypeURIs(e){return this.NTtoURI(this.findTypesNT(e))}connectedStatements(e,n,r){r=r||[];let s=[e],i={},o={},a=[],l=this,c=function(u){let h=function(p){"BlankNode"===p.termType&&!i[p.value]&&(i[p.value]=!0,s.push(p))},d=l.statementsMatching(null,null,u,n).concat(l.statementsMatching(u,null,null,n));d=d.filter(function(p){if(r[p.predicate.value])return!1;let m=p.toNT();return!o[m]&&(o[m]=!0,!0)}),d.forEach(function(p){h(p.subject),h(p.object)}),a=a.concat(d)};for(;s.length;)c(s.shift());return a}formula(e){return new p0}fromNT(e){let n,r,s;switch(e[0]){case"<":return this.sym(e.slice(1,-1));case'"':if(s=void 0,n=void 0,r=e.lastIndexOf('"'),r<e.length-1)if("@"===e[r+1])s=e.slice(r+2);else{if("^^"!==e.slice(r+1,r+3))throw new Error("Can't convert string from NT: "+e);n=this.fromNT(e.slice(r+3))}return e=(e=(e=(e=e.slice(1,r)).replace(/\\"/g,'"')).replace(/\\n/g,"\n")).replace(/\\\\/g,"\\"),this.rdfFactory.literal(e,s||n);case"_":return this.rdfFactory.blankNode(e.slice(2));case"?":return new Jl(e.slice(1))}throw new Error("Can't convert from NT: "+e)}holds(e,n,r,s){let i;if(1===arguments.length){if(!e)return!0;if(e instanceof Array){for(i=0;i<e.length;i++)if(!this.holds(e[i]))return!1;return!0}if((0,vs.SH)(e))return this.holds(e.subject,e.predicate,e.object,e.graph);if(e.statements)return this.holds(e.statements)}return null!=this.anyStatementMatching(e,n,r,s)}holdsStatement(e){return this.holds(e.subject,e.predicate,e.object,e.graph)}list(e,n){if(n.rdfFactory.supports.COLLECTIONS){const r=n.rdfFactory.collection();return e.forEach(function(s){r.append(s)}),r}{const r=n.rdfFactory.blankNode(),s=pV(n.rdfFactory,r,e);return n.addAll(s),r}}NTtoURI(e){let n,r,s={};for(n in e)e.hasOwnProperty(n)&&(r=e[n],"<"===n[0]&&(s[n.slice(1,-1)]=r));return s}serialize(e,n,r,s){return D4(r,this,e,n,void 0,s)}substitute(e){let n=this.statements.map(function(s){return s.substitute(e)});const r=new p0;return r.addAll(n),r}sym(e,n){if(n)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return this.rdfFactory.namedNode(e)}the(e,n,r,s){let i=this.any(e,n,r,s);return null==i&&Bi.error("No value found for the() {"+e+" "+n+" "+r+"}."),i}transitiveClosure(e,n,r){let s,i,o,a,l,c,u={};Object.assign(u,e);let h={};for(;;){if(c=function(){for(let d in u)if(u.hasOwnProperty(d))return d}(),null==c)return h;for(l=r?this.each(void 0,n,this.fromNT(c)):this.each(this.fromNT(c),n),i=0,o=l.length;i<o;i++)s=l[i],a=s.toNT(),!(a in h)&&(a in u||(u[a]=u[c]));h[c]=u[c],delete u[c]}}topTypeURIs(e){let n,r,s,i,o,a,l,c;for(s in l=[],e)if(e.hasOwnProperty(s)){for(c=e[s],o=0,a=this.each(this.rdfFactory.namedNode(s),this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf")),n=0,i=a.length;n<i;n++)if(r=a[n],"http://www.w3.org/2000/01/rdf-schema#Resource"!==r.uri){o++;break}o||(l[s]=c)}return l["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete l["http://www.w3.org/2000/01/rdf-schema#Resource"],l["http://www.w3.org/2002/07/owl#Thing"]&&delete l["http://www.w3.org/2002/07/owl#Thing"],l}toString(){return"{"+this.statements.join("\n")+"}"}variable(e){return new Jl(e)}whether(e,n,r,s){return this.statementsMatching(e,n,r,s,!1).length}}yo.A.fromValue=iV;const Ql=yo.A,B2={xsd:Sr("http://www.w3.org/2001/XMLSchema#")};yo.A.toJS=function(t){return(0,vs.P3)(t)?t.elements.map(yo.A.toJS):(0,vs.c$)(t)?t.datatype.equals(B2.xsd("boolean"))?"1"===t.value||"true"===t.value:t.datatype.equals(B2.xsd("dateTime"))||t.datatype.equals(B2.xsd("date"))?new Date(t.value):t.datatype.equals(B2.xsd("integer"))||t.datatype.equals(B2.xsd("float"))||t.datatype.equals(B2.xsd("decimal"))?Number(t.value):t.value:t};class dee{constructor(e,n){this.pat=new ml,this.vars=[],this.name=e,this.id=n}}function fV(t,e,n,r){function s(D){var j,re="";for(j in D)D.hasOwnProperty(j)&&(re+="    "+j+" -> "+D[j]);return re}function i(D){var j,re="Bindings: ",ue=D.length;for(j=0;j<ue;j++)re+=s(D[j][0])+";\n\t";return re}function a(D,re,j,ue){var Me;if(D.length!==re.length)return[];if(!D.length)return[[[],null]];var Ce=function o(D,re,j,ue){var Me=j[D];if(void 0===Me){if(D.isVar){var Ce=[];return Ce[D]=re,[[Ce,null]]}Me=D}if(!Me.complexType)return ue.redirections[Me]&&(Me=ue.redirections[Me]),ue.redirections[re]&&(re=ue.redirections[re]),Me.equals(re)||Me.uri&&Me.uri===d0?[[[],null]]:[];if(D instanceof Array)return re instanceof Array?a(D,re,j):[];throw new Error("query.js: oops - code not written yet")}(D[0],re[0],j,ue);if(0===Ce.length)return Ce;var Ae,ft,$e,Xt,pn,bs,Ds,ze=[],dt=Ce.length;for(Ae=0;Ae<dt;Ae++){for(pn in Ds=[],ft=Ce[Ae][0])ft.hasOwnProperty(pn)&&(Ds[pn]=ft[pn]);for(pn in j)j.hasOwnProperty(pn)&&(Ds[pn]=j[pn]);for(Xt=(Me=a(D.slice(1),re.slice(1),Ds,ue)).length,$e=0;$e<Xt;$e++){for(pn in bs=Me[$e][0],ft)ft.hasOwnProperty(pn)&&(bs[pn]=ft[pn]);ze.push([bs,null])}}return ze}function l(D,re){var j=re[D];return void 0===j?D:j}function c(D,re){var ue,j={};for(ue in D)D.hasOwnProperty(ue)&&(j[ue]=D[ue]);for(ue in re)re.hasOwnProperty(ue)&&(j[ue]=re[ue]);return j}function u(D,re){return this.trunkBindings=re,this.originalCallback=D,this.branches=[],this}function h(D,re){return this.count=0,this.success=!1,this.done=!1,this.callback=D,this.onDone=re,this}u.prototype.checkAllDone=function(){var D;for(D=0;D<this.branches.length;D++)if(!this.branches[D].done)return;Bi.debug("OPTIONAL BIDNINGS ALL DONE:"),this.doCallBacks(this.branches.length-1,this.trunkBindings)},u.prototype.doCallBacks=function(D,re){var j;if(D<0)return this.originalCallback(re);for(j=0;j<this.branches[D].results.length;j++)this.doCallBacks(D-1,c(re,this.branches[D].results[j]))},h.prototype.reportMatch=function(D){this.callback(D),this.success=!0},h.prototype.reportDone=function(){this.done=!0,Bi.info("Mandatory query branch finished.***"),void 0!==this.onDone&&this.onDone()};var d=function(D){return this.count=0,this.done=!1,this.results=[],this.junction=D,D.branches.push(this),this};function p(D,re,j){var ue,Me,Ce,ze;for(re.nvars=0,re.index=null,ue=[re.subject,re.predicate,re.object,re.why],ze=[D.subjectIndex,D.predicateIndex,D.objectIndex,D.whyIndex],Ce=0;Ce<4;Ce++){let Ae=ue[Ce];if(!Ae.uri||Ae.uri!==d0)if(Ae.isVar&&void 0===j[Ae])re.nvars++;else{if(Ae=l(ue[Ce],j),D.redirections[D.id(Ae)]&&(Ae=D.redirections[D.id(Ae)]),!(Me=ze[Ce][D.id(Ae)]))return re.index=[],!1;(null===re.index||re.index.length>Me.length)&&(re.index=Me)}}return null===re.index&&(re.index=D.statements),!0}function m(D,re){return D.nvars!==re.nvars?D.nvars-re.nvars:D.index.length-re.index.length}d.prototype.reportMatch=function(D){this.results.push(D)},d.prototype.reportDone=function(){Bi.debug("Optional branch finished - results.length = "+this.results.length),0===this.results.length&&(this.results.push({}),Bi.debug("Optional branch FAILED - that's OK.")),this.done=!0,this.junction.checkAllDone()};var H=function(D,re,j,ue,Me,Ce,ze){Bi.debug("Match begins, Branch count now: "+ze.count+" for "+ze.pattern_debug);var Ae=re.statements;if(0===Ae.length){if(Bi.debug("FOUND MATCH WITH BINDINGS:"+s(j)),0===re.optional.length)ze.reportMatch(j);else{Bi.debug("OPTIONAL: "+re.optional);var $e,dt=new u(e,j),ft=[];for($e=0;$e<re.optional.length;$e++)ft[$e]=new d(dt),ft[$e].pattern_debug=re.optional[$e];for($e=0;$e<re.optional.length;$e++)ft[$e].count=ft[$e].count+1,H(D,re.optional[$e],j,"",Me,e,ft[$e])}return ze.count--,void Bi.debug("Match ends -- success , Branch count now: "+ze.count+" for "+ze.pattern_debug)}var Xt,pn,bs=Ae.length;if(Me){var Bs=function(Ns,xi){var Si=Ns.uri.split("#")[0];Me.nowOrWhenFetched(Si,void 0,function(Fi,oo,ui){Fi||console.log("Error following link to <"+Ns.uri+"> in query: "+oo),H(D,re,j,ue,Me,Ce,ze)})};for(pn=0;pn<bs;pn++){if(void 0!==j[(Xt=Ae[pn]).subject]&&j[Xt.subject].uri&&Me&&"unrequested"===Me.getState(jc(j[Xt.subject].uri)))return void Bs(j[Xt.subject]);if(void 0!==j[Xt.object]&&j[Xt.object].uri&&Me&&"unrequested"===Me.getState(jc(j[Xt.object].uri)))return void Bs(j[Xt.object])}}V(D,re,j,ue,Me,Ce,ze)},T=function(D,re){var ue,Me,j=!0;for(ue in D)D.hasOwnProperty(ue)&&re[ue]&&(Me=re[ue].test)&&!Me(D[ue])&&(j=!1);return j},V=function(D,re,j,ue,Me,Ce,ze){var ft,$e,Xt,pn,bs,Ds,Bs,Ae=re.statements,dt=Ae.length;for(ft=0;ft<dt;ft++)p(D,Bs=Ae[ft],j);Ae.sort(m),Bs=Ae[0];var Ns=D.formula();Ns.optional=re.optional,Ns.constraints=re.constraints,Ns.statements=Ae.slice(1),Bi.debug(ue+"match2 searching "+Bs.index.length+" for "+Bs+"; bindings so far="+s(j));var xi,Fi,oo,Si=Bs.index.length,ui=0;for(xi=0;xi<Si;xi++)for(Fi=a([Bs.subject,Bs.predicate,Bs.object,Bs.why],[(oo=Bs.index[xi]).subject,oo.predicate,oo.object,oo.why],j,D),Bi.info(ue+" From first: "+Fi.length+": "+i(Fi)),Xt=Fi.length,$e=0;$e<Xt;$e++)if(bs=[],T(Ds=Fi[$e][0],re.constraints)){for(pn in Ds)Ds.hasOwnProperty(pn)&&(bs[pn]=Ds[pn]);for(pn in j)j.hasOwnProperty(pn)&&(bs[pn]=j[pn]);ze.count++,ui++,H(D,Ns,bs,ue+"  ",Me,Ce,ze)}else Bi.debug("Branch count CS: "+ze.count);ze.count--,0===ui&&Bi.debug("Match2 fails completely on "+Bs),Bi.debug("Match2 ends, Branch count: "+ze.count+" for "+ze.pattern_debug),0===ze.count&&(Bi.debug("Branch finished."),ze.reportDone())},J=this;Bi.debug("Query on "+this.statements.length);var ie=new h(e,r);ie.count++,t.sync?H(J,t.pat,t.pat.initBindings,"",n,e,ie):setTimeout(function(){H(J,t.pat,t.pat.initBindings,"",n,e,ie)},0)}const hC="http://www.w3.org/2002/07/owl#";function pee(t,e,n,r){var s=t.any(e,n,void 0);return!!s&&(t.equate(s,r),!0)}function fee(t,e,n,r){var s=t.any(void 0,n,r);return!!s&&(t.equate(s,e),!0)}function gV(t,e,n,r,s){t.typeCallback&&t.typeCallback(t,r,s);var i=t.classActions[t.id(r)],o=!1;if(i)for(var a=0;a<i.length;a++)o=o||i[a](t,e,n,r,s);return o}class ml extends p0{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(void 0,void 0,void 0,void 0,n),(0,_t.A)(this,"updater",void 0),(0,_t.A)(this,"namespaces",void 0),(0,_t.A)(this,"classActions",void 0),(0,_t.A)(this,"propertyActions",void 0),(0,_t.A)(this,"redirections",void 0),(0,_t.A)(this,"aliases",void 0),(0,_t.A)(this,"HTTPRedirects",void 0),(0,_t.A)(this,"subjectIndex",void 0),(0,_t.A)(this,"predicateIndex",void 0),(0,_t.A)(this,"objectIndex",void 0),(0,_t.A)(this,"whyIndex",void 0),(0,_t.A)(this,"index",void 0),(0,_t.A)(this,"features",void 0),(0,_t.A)(this,"_universalVariables",void 0),(0,_t.A)(this,"_existentialVariables",void 0),(0,_t.A)(this,"rdfArrayRemove",void 0),(0,_t.A)(this,"dataCallbacks",[]),(0,_t.A)(this,"dataRemovalCallbacks",[]),this.propertyActions={},this.classActions={},this.redirections=[],this.aliases=[],this.HTTPRedirects=[],this.subjectIndex=[],this.predicateIndex=[],this.objectIndex=[],this.whyIndex=[],this.index=[this.subjectIndex,this.predicateIndex,this.objectIndex,this.whyIndex],this.namespaces={},this.features=e||[],this.rdfArrayRemove=n.rdfArrayRemove||Fo.Uz,n.dataCallback&&(this.dataCallbacks=[n.dataCallback]),n.dataRemovalCallback&&(this.dataRemovalCallbacks=[n.dataRemovalCallback]),this.initPropertyActions(this.features)}static get defaultGraphURI(){return d0}substitute(e){var n=this.statements.map(function(s){return s.substitute(e)}),r=new ml;return r.add(n),r}addDataCallback(e){this.dataCallbacks.push(e)}addDataRemovalCallback(e){this.dataRemovalCallbacks.push(e)}applyPatch(e,n,r){var i,s=this,o=null;function a(u){if(e.delete){i=e.delete,o&&(i=i.substitute(o));var h=[],d=(i=i.statements).map(function(p){var m=s.statementsMatching(p.subject,p.predicate,p.object,n);return 0===m.length?(h.push(p),null):m[0]});if(h.length)return r("Could not find to delete: "+h.join("\n or "));d.map(function(p){s.remove(p)})}e.insert&&(i=e.insert,o&&(i=i.substitute(o)),(i=i.statements).map(function(p){p.graph=n,s.add(p.subject,p.predicate,p.object,p.graph)})),u()}if(e.where){var l=new dee("patch");l.pat=e.where,l.pat.statements.map(function(u){u.graph=C0(n.value)}),l.sync=!0;var c=[];s.query(l,function(h){c.push(h)},s.fetcher,function(){return 0===c.length?r("No match found to be patched:"+e.where):c.length>1?r("Patch ambiguous. No patch done."):(o=c[0],void a(r))})}else a(r)}declareExistential(e){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(e),e}initPropertyActions(e){this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))]=[gV],da(e,"sameAs")>=0&&(this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${hC}sameAs`))]=[function(n,r,s,i,o){return n.equate(r,i),!0}]),da(e,"InverseFunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${hC}InverseFunctionalProperty`))]=[function(n,r,s,i,o){return n.newPropertyAction(r,fee)}]),da(e,"FunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${hC}FunctionalProperty`))]=[function(n,r,s,i,o){return n.newPropertyAction(r,pee)}])}addStatement(e){return this.add(e.subject,e.predicate,e.object,e.graph),this.statements.length}add(e,n,r,s){var i,o,a;if(1===arguments.length){if(e instanceof Array)for(i=0;i<e.length;i++)this.add(e[i]);else(0,vs.aF)(e)?this.add(e.subject,e.predicate,e.object,e.graph):(0,vs.ok)(e)&&this.add(e.statements);return this}s||(s=this.fetcher?this.fetcher.appNode:this.rdfFactory.defaultGraph()),"string"==typeof e&&(e=this.rdfFactory.namedNode(e)),n=Ql.fromValue(n);const l=Ql.fromValue(r);if(s=Ql.fromValue(s),!(0,vs.CZ)(e))throw new Error("Subject is not a subject type");if(!(0,vs.fY)(n))throw new Error(`Predicate ${n} is not a predicate type`);if(!(0,vs.DJ)(l))throw new Error(`Object ${l} is not an object type`);if(!(0,vs.RN)(s))throw new Error("Why is not a graph type");this.predicateCallback&&this.predicateCallback(this,n,s);var c=this.id(this.canon(n)),u=!1;if(o=this.propertyActions[c])for(i=0;i<o.length;i++)u=u||o[i](this,e,n,l,s);if(this.holds(e,n,l,s))return null;var h=[this.id(this.canon(e)),c,this.id(this.canon(l)),this.id(this.canon(s))];for(a=this.rdfFactory.quad(e,n,l,s),i=0;i<4;i++){var d=this.index[i],p=h[i];d[p]||(d[p]=[]),d[p].push(a)}this.statements.push(a);for(const m of this.dataCallbacks)m(a);return a}canon(e){if(!e)return e;const n=this.redirections[this.id(e)];if(n)return n;switch(e.termType){case dn.$Q:return new Ui(e.value);case dn.r0:return e;case dn.ic:return new lC;case dn.S:case dn.bD:return e;case dn.QW:return new qs(e.value,e.language,e.datatype);case dn.Kk:return new ro.A(e.value);case dn.P2:return new Jl(e.value);default:throw new Error(`Term Type not recognized for canonization: ${e.termType}`)}}check(){this.checkStatementList(this.statements);for(var e=0;e<4;e++){var n=this.index[e];for(var r in n)n.hasOwnProperty(r)&&this.checkStatementList(n[r],e)}}checkStatementList(e,n){void 0===n&&(n=0);for(var i,s=" found in "+["subject","predicate","object","why"][n]+" index.",o=0;o<e.length;o++){for(var a=[(i=e[o]).subject,i.predicate,i.object,i.graph],l=function(d,p){for(var m=0;m<d.length;m++)if(d[m].subject.equals(p.subject)&&d[m].predicate.equals(p.predicate)&&d[m].object.equals(p.object)&&d[m].why.equals(p.graph))return!0},c=0;c<4;c++){var u=this.canon(a[c]),h=this.id(u);this.index[c][h]&&l(this.index[c][h],i)}if(!l(this.statements,i))throw new Error("Statement list does not statement "+i+"@"+i.graph+s)}}close(){return this}compareTerms(e,n){return Object.prototype.hasOwnProperty.call(e,"compareTerm")?e.compareTerm(n):Yl.A[e.termType]<Yl.A[n.termType]?-1:Yl.A[e.termType]>Yl.A[n.termType]?1:e.value<n.value?-1:e.value>n.value?1:0}copyTo(e,n,r){r||(r=[]);var s=this.statementsMatching(e);-1!==da(r,"two-direction")&&s.concat(this.statementsMatching(void 0,void 0,e));for(var i=0;i<s.length;i++){var o=s[i];switch(o.object.termType){case"NamedNode":this.add(n,o.predicate,o.object);break;case"Literal":case"BlankNode":case"Collection":this.add(n,o.predicate,o.object.copy(this))}-1!==da(r,"delete")&&this.remove(o)}}equate(e,n){const r=this.canon(e),s=this.canon(n);var i=this.compareTerms(r,s);return!i||(i<0?this.replaceWith(s,r):this.replaceWith(r,s))}formula(e){return new ml(e)}get length(){return this.statements.length}match(e,n,r,s){return this.statementsMatching(Ql.fromValue(e),Ql.fromValue(n),Ql.fromValue(r),Ql.fromValue(s))}mentionsURI(e){var n="<"+e+">";return!!this.subjectIndex[n]||!!this.objectIndex[n]||!!this.predicateIndex[n]}newExistential(e){if(!e)return this.bnode();var n=this.sym(e);return this.declareExistential(n)}newPropertyAction(e,n){var r=this.id(e);this.propertyActions[r]||(this.propertyActions[r]=[]),this.propertyActions[r].push(n);for(var s=this.statementsMatching(void 0,e,void 0),i=!1,o=0;o<s.length;o++)i=i||n(this,s[o].subject,e,s[o].object);return i}newUniversal(e){var n=this.sym(e);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(n),n}variable(e){return new Jl(e)}nextSymbol(e){for(var n=0;;n++){var r=e.value+"#n"+n;if(!this.mentionsURI(r))return this.sym(r)}}query(e,n,r,s){return fV.call(this,e,n,r,s)}querySync(e){var n=[],i=!1;if(e.sync=!0,fV.call(this,e,function r(o){n.push(o)},null,function s(){i=!0}),!i)throw new Error("Sync query should have called done function");return n}remove(e){if(e instanceof Array){for(var n=0;n<e.length;n++)this.remove(e[n]);return this}if((0,vs.ok)(e))return this.remove(e.statements);var r=this.statementsMatching(e.subject,e.predicate,e.object,e.graph);if(!r.length)throw new Error("Statement to be removed is not on store: "+e);return this.removeStatement(r[0]),this}removeDocument(e){this.removeMetadata(e);for(var n=this.statementsMatching(void 0,void 0,void 0,e).slice(),r=0;r<n.length;r++)this.removeStatement(n[r]);return this.removeMatches(e,null,null),this}removeMetadata(e){const n=this.sym("chrome://TheCurrentSession"),r="http://www.w3.org/2007/ont/link#",s=this.statementsMatching(void 0,this.sym(`${r}requestedURI`),this.rdfFactory.literal(e.value),n).map(a=>a.subject);for(var i=0;i<s.length;i++){const a=s[i];if(null!=a){let l;const c=this.any(a,this.sym(`${r}status`),null,n);if(null!=c){l=this.statementsMatching(c,this.sym(`${r}status`),null,n).slice();for(var o=0;o<l.length;o++)this.removeStatement(l[o])}const u=this.any(a,this.sym(`${r}response`),null,n);if(null!=u)for(l=this.statementsMatching(u,null,null,n).slice(),o=0;o<l.length;o++)this.removeStatement(l[o]);for(l=this.statementsMatching(a,null,null,n).slice(),o=0;o<l.length;o++)this.removeStatement(l[o])}}return this.removeMatches(this.sym(e.value),null,null,n),this}removeMany(e,n,r,s,i){for(var o=this.statementsMatching(e,n,r,s,!1),a=[],l=0;l<o.length;l++)a.push(o[l]);for(i&&(a=a.slice(0,i)),l=0;l<a.length;l++)this.remove(a[l])}removeMatches(e,n,r,s){return this.removeMany(e,n,r,s),this}removeStatement(e){for(var n=[e.subject,e.predicate,e.object,e.graph],r=0;r<4;r++){var s=this.canon(n[r]),i=this.id(s);this.index[r][i]&&this.rdfArrayRemove(this.index[r][i],e)}this.rdfArrayRemove(this.statements,e);for(const o of this.dataRemovalCallbacks)o(e);return this}removeStatements(e){for(var n=0;n<e.length;n++)this.remove(e[n]);return this}replaceWith(e,n){for(var r=this.id(e),s=this.id(n),i=function(a){var l=a[r];if(l){var c=a[s];a[s]=c?l.concat(c):l,delete a[r]}},o=0;o<4;o++)i(this.index[o]);if(this.redirections[r]=n,e.value){if(this.aliases[s]||(this.aliases[s]=[]),this.aliases[s].push(e),this.aliases[r])for(o=0;o<this.aliases[r].length;o++)this.redirections[this.id(this.aliases[r][o])]=n,this.aliases[s].push(this.aliases[r][o]);this.add(n,this.sym("http://www.w3.org/2007/ont/link#uri"),e),this.fetcher&&this.fetcher.nowKnownAs(e,n)}return i(this.classActions),i(this.propertyActions),!0}allAliases(e){var n=this.aliases[this.id(this.canon(e))]||[];return n.push(this.canon(e)),n}sameThings(e,n){if(e.equals(n))return!0;var r=this.canon(e);if(!r)return!1;var s=this.canon(n);return!!s&&r.value===s.value}setPrefixForURI(e,n){if(("tab"!==e||!this.namespaces.tab)&&"ns"!==e.slice(0,2)&&"default"!==e.slice(0,7)){for(let r in this.namespaces)this.namespaces[r]==n&&delete this.namespaces[r];this.namespaces[e]=n}}statementsMatching(e,n,r,s,i){var h,d,o=[e,n,r,s],a=[],l=[],c=[],u=[];for(h=0;h<4;h++)a[h]=this.canon(Ql.fromValue(o[h])),a[h]?(u.push(h),l[h]=this.id(a[h])):c.push(h);if(0===u.length)return this.statements;if(1===u.length)return(d=this.index[h=u[0]][l[h]])&&i&&d.length>1&&(d=d.slice(0,1)),d||[];var m,y,p=1e10;for(y=0;y<u.length;y++){if(!(d=this.index[h=u[y]][l[h]]))return[];d.length<p&&(p=d.length,m=y)}for(var H=u[m],T=this.index[H][l[H]],V=u.slice(0,m).concat(u.slice(m+1)),J=[],ie=["subject","predicate","object","why"],D=0;D<T.length;D++){var re=T[D];for(y=0;y<V.length;y++)if(!this.canon(re[ie[h=V[y]]]).equals(a[h])){re=null;break}if(null!=re&&(J.push(re),i))break}return J}uris(e){var n=this.canon(e),r=this.aliases[this.id(n)];if(!n.value)return[];var s=[n.value];if(r)for(var i=0;i<r.length;i++)s.push(r[i].uri);return s}serialize(e,n,r,s){return D4(r,this,e,n,void 0,s={...s||{},namespaces:s?.namespaces?{...this.namespaces,...s.namespaces}:{...this.namespaces}})}}(0,_t.A)(ml,"handleRDFType",void 0),ml.handleRDFType=gV;const iu=Sr("http://www.w3.org/1999/02/22-rdf-syntax-ns#");function vee(t,e){function n(s,i,o){const a=t.statementsMatching(s,iu("rest"),null,e);if(1!==a.length)throw new Error(`Bad list structure: no rest at ${s}`);const l=t.statementsMatching(s,iu("first"),null,e);if(1!==l.length)throw new Error(`Bad list structure: rest but ${l.length} firsts at ${s}`);const u=[l[0].object].concat(i),h=o.concat(a).concat(l),d=t.statementsMatching(null,iu("rest"),s,e);if(0===d.length){const m=new Pa(u);return t.remove(h),void function gee(t,e,n,r){for(const s of t.statementsMatching(n,null,null,r)){const i=new ql(e,s.predicate,s.object,r);t.remove(s),t.add(i)}for(const s of t.statementsMatching(null,n,null,r))t.remove(s),t.add(new ql(s.subject,e,s.object,r));for(const s of t.statementsMatching(null,null,n,r))t.remove(s),t.add(new ql(s.subject,s.predicate,e,r))}(t,m,s,e)}if(1!==d.length)throw new Error(`Bad list structure: ${d.length} pres at ${s}`);const p=d[0].subject;if("BlankNode"!==p.termType)throw new Error(`Bad list element node ${p} type: ${p.termType} `);n(p,u,h)}(function mee(t,e){const n=iu("nil");for(const r of t.statementsMatching(n,null,null,e)){t.remove(r);const s=new Pa;t.add(new ql(s,r.predicate,r.object,e))}for(const r of t.statementsMatching(null,null,n,e))if(!r.predicate.sameTerm(iu("rest"))){t.remove(r);const s=new Pa;t.add(new ql(r.subject,r.predicate,s,e))}})(t,e),t.statementsMatching(null,iu("rest"),iu("nil"),e).forEach(s=>{if("BlankNode"!==s.subject.termType)throw new Error(`Bad list element node ${s.subject} type: ${s.subject.termType} `);n(s.subject,[],[])})}var dC="http://www.w3.org/2000/10/swap/log#",zi=function(t){return t},Ni=function(t){return t},f0=function(t){if(t.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},qo=function(t){return t.length},pC=function(t,e,n){if(typeof t.slice>"u")throw"@@ mising.js: No .slice function for "+t+" of type "+typeof t;return typeof n>"u"||null==n?t.slice(e):t.slice(e,n)},N2=Error("dummy error stop iteration"),g0=function(t){return this.last=0,this.li=t,this.next=function(){if(this.last==this.li.length)throw N2;return this.li[this.last++]},this},fC=function(t,e){return t.indexOf(e)},ou=function(t,e){if(!t)throw e?"python Assertion failed: "+e:"(python) Assertion failed."};String.prototype.encode=function(t){if("utf-8"!=t)throw"UTF8_converter: can only do utf-8";return function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(this)},String.prototype.decode=function(t){if("utf-8"!=t)throw"UTF8_converter: can only do utf-8";return this};var gC=function(t,e){return Bo(e,t)},vV="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",wV="http://www.w3.org/2002/07/owl#sameAs",CV="\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~",au=CV+":",mC=new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?([eE][-+]?[0-9]+)?","g"),yV=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),vC=new RegExp('[\\\\\\r\\n\\"]',"g"),wC=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");const CC=function Eee(t,e,n,r,s,i,o,a){return new Tee(t,e,n,r,s,i,o,a)};class Tee{constructor(e,n,r,s,i,o,a,l){typeof n>"u"&&(n=null),typeof r>"u"&&(r=""),typeof s>"u"&&(s=null),typeof i>"u"&&(i=""),typeof o>"u"&&(o=null),typeof a>"u"&&(a=""),typeof l>"u"&&(l=null),this._bindings=new f0([]),this._flags=a,""!=r&&(ou(r.indexOf(":")>=0,"Document URI not absolute: "+r),this._bindings[""]=r+"#"),this._store=e,i&&e.setGenPrefix(i),this._thisDoc=r,this.source=e.sym(r),this.lines=0,this.statementCount=0,this.hasNil=!1,this.startOfLine=0,this.previousLine=0,this._genPrefix=i,this.keywords=new Ni(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new f0([]),this._variables=new f0([]),this._parentVariables=new f0([]),this._reason=l,this._reason2=null,this._baseURI=s||r||null,ou(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._genPrefix=this._thisDoc?this._thisDoc+"#_g":RDFSink_uniqueURI()),this._formula=null==n?this._thisDoc?e.formula(r+"#_formula"):e.formula():n,this._context=this._formula,this._parentContext=null}here(e){return this._genPrefix+"_L"+this.lines+"C"+(e-this.startOfLine+1)}formula(){return this._formula}loadStream(e){return this.loadBuf(e.read())}loadBuf(e){return this.startDoc(),this.feed(e),this.endDoc()}feed(e){for(var n=e.decode("utf-8"),r=0;r>=0;){var s=this.skipSpace(n,r);if(s<0)return;if((r=this.directiveOrStatement(n,s))<0)throw wn(this._thisDoc,this.lines,n,s,"expected directive or statement")}}directiveOrStatement(e,n){var s,r=this.skipSpace(e,n);return r<0?r:(s=this.directive(e,r))>=0||(s=this.statement(e,r))>=0?this.checkDot(e,s):s}tok(e,n,r){if("@"==n.slice(r,r+1))r+=1;else if(da(this.keywords,e)<0)return-1;var i=r+qo(e);return n.slice(r,i)==e&&CV.indexOf(n.charAt(i))>=0?i:-1}directive(e,n){if((l=this.skipSpace(e,n))<0)return l;var r=new Ni([]);if((l=this.tok("bind",e,n))>0)throw wn(this._thisDoc,this.lines,e,n,"keyword bind is obsolete: use @prefix");if((l=this.tok("keywords",e,n))>0){if((n=this.commaSeparatedList(e,l,r,!1))<0)throw wn(this._thisDoc,this.lines,e,n,"'@keywords' needs comma separated list of words");return this.setKeywords(pC(r,null,null)),n}if((l=this.tok("forAll",e,n))>0){if((n=this.commaSeparatedList(e,l,r,!0))<0)throw wn(this._thisDoc,this.lines,e,n,"Bad variable list after @forAll");var s=new g0(r);try{for(;;){var i=s.next();(da(this._variables,i)<0||da(this._parentVariables,i)>=0)&&(this._variables[i]=this._context.newUniversal(i))}}catch(u){if(u!=N2)throw u}return n}if((l=this.tok("forSome",e,n))>0){if((n=this.commaSeparatedList(e,l,r,this.uri_ref2))<0)throw wn(this._thisDoc,this.lines,e,n,"Bad variable list after @forSome");s=new g0(r);try{for(;;)i=s.next(),this._context.declareExistential(i)}catch(h){if(h!=N2)throw h}return n}if((l=this.tok("prefix",e,n))>=0){var l,o=new Ni([]);if((n=this.qname(e,l,o))<0)throw wn(this._thisDoc,this.lines,e,l,"expected qname after @prefix");if((l=this.uri_ref2(e,n,o))<0)throw wn(this._thisDoc,this.lines,e,n,"expected <uriref> after @prefix _qname_");var a=o[1].uri;return this._baseURI?a=gC(this._baseURI,a):ou(a.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS"),ou(a.indexOf(":")>=0),this._bindings[o[0][0]]=a,this.bind(o[0][0],function wee(t){return encodeURI(t)}(a)),l}if((l=this.tok("base",e,n))>=0){if(o=new Ni([]),(n=this.uri_ref2(e,l,o))<0)throw wn(this._thisDoc,this.lines,e,l,"expected <uri> after @base ");if(a=o[0].uri,!this._baseURI)throw wn(this._thisDoc,this.lines,e,l,"With no previous base URI, cannot use relative URI in @base  <"+a+">");return a=gC(this._baseURI,a),ou(a.indexOf(":")>=0),this._baseURI=a,n}return-1}bind(e,n){""==e||this._store.setPrefixForURI(e,n)}setKeywords(e){null==e?this.keywordsSet=0:(this.keywords=e,this.keywordsSet=1)}startDoc(){}endDoc(){return this.hasNil&&this._store.rdfFactory.supports.COLLECTIONS&&vee(this._store,this.source),this._formula}makeStatement(e){e[0].add(e[2],e[1],e[3],this.source),(e[2].uri&&e[2].uri===vV||e[3].uri&&e[3].uri===vV)&&(this.hasNil=!0),this.statementCount+=1}statement(e,s){var r=new Ni([]);if((s=this.object(e,s,r))<0)return s;var i=this.property_list(e,s,r[0]);if(i<0)throw wn(this._thisDoc,this.lines,e,s,"expected propertylist");return i}subject(e,n,r){return this.item(e,n,r)}verb(e,n,r){if((i=this.skipSpace(e,n))<0)return i;var s=new Ni([]);if((i=this.tok("has",e,n))>=0){if((n=this.prop(e,i,s))<0)throw wn(this._thisDoc,this.lines,e,i,"expected property after 'has'");return r.push(new zi(["->",s[0]])),n}if((i=this.tok("is",e,n))>=0){var i;if((n=this.prop(e,i,s))<0)throw wn(this._thisDoc,this.lines,e,i,"expected <property> after 'is'");if((i=this.skipSpace(e,n))<0)throw wn(this._thisDoc,this.lines,e,n,"End of file found, expected property after 'is'");if((i=this.tok("of",e,n=i))<0)throw wn(this._thisDoc,this.lines,e,n,"expected 'of' after 'is' <prop>");return r.push(new zi(["<-",s[0]])),i}if((i=this.tok("a",e,n))>=0)return r.push(new zi(["->",this._store.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")])),i;if("<="==e.slice(n,n+2))return r.push(new zi(["<-",this._store.sym(dC+"implies")])),n+2;if("="==e.slice(n,n+1))return">"==e.slice(n+1,n+2)?(r.push(new zi(["->",this._store.sym(dC+"implies")])),n+2):(r.push(new zi(["->",this._store.sym(wV)])),n+1);if(":="==e.slice(n,n+2))return r.push(new zi(["->",dC+"becomes"])),n+2;if((i=this.prop(e,n,s))>=0)return r.push(new zi(["->",s[0]])),i;if(">-"==e.slice(n,n+2)||"<-"==e.slice(n,n+2))throw wn(this._thisDoc,this.lines,e,i,">- ... -> syntax is obsolete.");return-1}prop(e,n,r){return this.item(e,n,r)}item(e,n,r){return this.path(e,n,r)}blankNode(e){return this._context.bnode(e,this._reason2)}path(e,n,r){if((s=this.nodeOrLiteral(e,n,r))<0)return s;for(;"!^.".indexOf(e.slice(s,s+1))>=0;){var i=e.slice(s,s+1);if("."==i){var o=e.slice(s+1,s+2);if(!o||au.indexOf(o)>=0&&":?<[{(".indexOf(o)<0)break}var s,a=r.pop(),l=this.blankNode(this.here(s));if((s=this.node(e,s+1,r))<0)throw wn(this._thisDoc,this.lines,e,s,"EOF found in middle of path syntax");var c=r.pop();this.makeStatement(new zi("^"==i?[this._context,c,l,a]:[this._context,c,a,l])),r.push(l)}return s}anonymousNode(e){if(n=this._anonymousNodes[e])return n;var n=this._store.bnode(e);return this._anonymousNodes[e]=n,n}node(e,o,r,s){typeof s>"u"&&(s=null);var i=s;if((D=this.skipSpace(e,o))<0)return D;var a=e.slice(o=D,o+1);if("["==a){var l=this.here(o);if((D=this.skipSpace(e,o+1))<0)throw wn(this._thisDoc,this.lines,e,o,"EOF after '['");if("="==e.slice(D,D+1)){o=D+1;var c=new Ni([]);if(!((D=this.objectList(e,o,c))>=0))throw wn(this._thisDoc,this.lines,e,o,"objectList expected after [= ");if(i=c[0],qo(c)>1){var u=new g0(c);try{for(;;){var h=u.next();this.makeStatement(new zi([this._context,this._store.sym(wV),i,h]))}}catch(Ae){if(Ae!=N2)throw Ae}}if((D=this.skipSpace(e,D))<0)throw wn(this._thisDoc,this.lines,e,o,"EOF when objectList expected after [ = ");if(";"==e.slice(D,D+1))var D=D+1}if(null==i&&(i=this.blankNode(l)),(o=this.property_list(e,D,i))<0)throw wn(this._thisDoc,this.lines,e,D,"property_list expected");if((D=this.skipSpace(e,o))<0)throw wn(this._thisDoc,this.lines,e,o,"EOF when ']' expected after [ <propertyList>");if("]"!=e.slice(D,D+1))throw wn(this._thisDoc,this.lines,e,D,"']' expected");return r.push(i),D+1}if("{"==a){if("$"==e.slice(o+1,o+2)){D=(o+=1)+1;for(var p=new Ni([]),m=!0;;){if((o=this.skipSpace(e,D))<0)throw wn(this._thisDoc,this.lines,e,o,"needed '$}', found end.");if("$}"==e.slice(o,o+2)){D=o+2;break}if(m)m=!1;else{if(","!=e.slice(o,o+1))throw wn(this._thisDoc,this.lines,e,o,"expected: ','");o+=1}var y=new Ni([]);if((D=this.item(e,o,y))<0)throw wn(this._thisDoc,this.lines,e,o,"expected item in set or '$}'");p.push(y[0])}return r.push(this._store.newSet(p,this._context)),D}D=o+1;var H=this._parentContext;this._parentContext=this._context;var T=this._anonymousNodes,V=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new f0([]),this._variables=this._variables.slice();var J=this._reason2;for(this._reason2=null,null==i&&(i=this._store.formula()),this._context=i;;){if((o=this.skipSpace(e,D))<0)throw wn(this._thisDoc,this.lines,e,o,"needed '}', found end.");if("}"==e.slice(o,o+1)){D=o+1;break}if((D=this.directiveOrStatement(e,o))<0)throw wn(this._thisDoc,this.lines,e,o,"expected statement or '}'")}return this._anonymousNodes=T,this._variables=this._parentVariables,this._parentVariables=V,this._context=this._parentContext,this._reason2=J,this._parentContext=H,r.push(i.close()),D}if("("==a){var ie=this._store.list;for("$"==e.slice(o+1,o+2)&&(ie=this._store.newSet,o+=1),D=o+1,p=new Ni([]);;){if((o=this.skipSpace(e,D))<0)throw wn(this._thisDoc,this.lines,e,o,"needed ')', found end.");if(")"==e.slice(o,o+1)){D=o+1;break}if(y=new Ni([]),(D=this.item(e,o,y))<0)throw wn(this._thisDoc,this.lines,e,o,"expected item in list or ')'");p.push(y[0])}return r.push(ie(p,this._context)),D}if((D=this.tok("this",e,o))>=0)throw wn(this._thisDoc,this.lines,e,o,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");return(D=this.tok("true",e,o))>=0?(r.push(!0),D):(D=this.tok("false",e,o))>=0?(r.push(!1),D):null==i&&(D=this.uri_ref2(e,o,r))>=0?D:-1}property_list(e,n,r){for(;;){if((d=this.skipSpace(e,n))<0)throw wn(this._thisDoc,this.lines,e,n,"EOF found when expected verb in property list");if(":-"!=e.slice(d,d+2)){n=d;var i=new Ni([]);if((d=this.verb(e,n,i))<=0)return n;var o=new Ni([]);if((n=this.objectList(e,d,o))<0)throw wn(this._thisDoc,this.lines,e,d,"objectList expected");var a=new g0(o);try{for(;;){var l=a.next(),c=i[0],h=c[1];this.makeStatement(new zi("->"==c[0]?[this._context,h,r,l]:[this._context,h,l,r]))}}catch(m){if(m!=N2)throw m}if((d=this.skipSpace(e,n))<0)throw wn(this._thisDoc,this.lines,e,d,"EOF found in list of objects");if(";"!=e.slice(n,n+1))return n;n+=1}else{n=d+2;var d,s=new Ni([]);if((d=this.node(e,n,s,r))<0)throw wn(this._thisDoc,this.lines,e,n,"bad {} or () or [] node after :- ");n=d}}}commaSeparatedList(e,n,r,s){if((i=this.skipSpace(e,n))<0)throw wn(this._thisDoc,this.lines,e,i,"EOF found expecting comma sep list");if("."==e.charAt(i))return n;if(s)var i=this.uri_ref2(e,i,r);else i=this.bareWord(e,i,r);if(i<0)return-1;for(;;){if((n=this.skipSpace(e,i))<0)return n;var o=e.slice(n,n+1);if(","!=o)return"."!=o?-1:n;if((i=s?this.uri_ref2(e,n+1,r):this.bareWord(e,n+1,r))<0)throw wn(this._thisDoc,this.lines,e,i,"bad list content")}}objectList(e,s,r){if((s=this.object(e,s,r))<0)return-1;for(;;){var i=this.skipSpace(e,s);if(i<0)throw wn(this._thisDoc,this.lines,e,i,"EOF found after object");if(","!=e.slice(i,i+1))return i;if((s=this.object(e,i+1,r))<0)return s}}checkDot(e,n){var r=this.skipSpace(e,n);if(r<0)return r;if("."==e.slice(r,r+1))return r+1;if("}"==e.slice(r,r+1)||"]"==e.slice(r,r+1))return r;throw wn(this._thisDoc,this.lines,e,r,"expected '.' or '}' or ']' at end of statement")}uri_ref2(e,h,r){var s=new Ni([]);if((i=this.qname(e,h,s))>=0){var o=s[0],a=o[0],l=o[1];if(null==a){ou(0,"not used?");var c=this._baseURI+"#"}else if(!(c=this._bindings[a])){if("_"==a)return r.push(this.anonymousNode(l)),i;throw wn(this._thisDoc,this.lines,e,h,"Prefix "+a+" not bound.")}var u=this._store.sym(c+l);return da(this._variables,u)>=0?r.push(this._variables[u]):r.push(u),i}if((h=this.skipSpace(e,h))<0)return-1;if("?"==e.charAt(h)){var d=new Ni([]);return(i=this.variable(e,h,d))>0?(r.push(d[0]),i):-1}if("<"==e.charAt(h)){for(var p=h+=1;h<qo(e);){if(">"==e.charAt(h)){var m=e.slice(p,h);return this._baseURI?m=gC(this._baseURI,m):ou(m.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs"),"#"==e.slice(h-1,h)&&"#"!=pC(m,-1,null)&&(m+="#"),u=this._store.sym(m),da(this._variables,u)>=0?r.push(this._variables[u]):r.push(u),h+1}h+=1}throw wn(this._thisDoc,this.lines,e,i,"unterminated URI reference")}if(this.keywordsSet){var i;if(d=new Ni([]),(i=this.bareWord(e,h,d))<0)return-1;if(da(this.keywords,d[0])>=0)throw wn(this._thisDoc,this.lines,e,h,'Keyword "'+d[0]+'" not allowed here.');return r.push(this._store.sym(this._bindings[""]+d[0])),i}return-1}skipSpace(e,n){for(var s=n||0;s<e.length;s++){var i=e.charAt(s);if(" \n\r\t\f\v\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000".indexOf(i)<0){if("#"!==e.charAt(s))return s;for(;;s++){if(s===e.length)return-1;if("\n"===e.charAt(s)){this.lines=this.lines+1;break}}}else"\n"===e.charAt(s)&&(this.lines=this.lines+1)}return-1}variable(e,i,r){if((s=this.skipSpace(e,i))<0||"?"!=e.slice(s,s+1))return-1;var s;if(i=s+=1,"0123456789-".indexOf(e.charAt(s))>=0)throw wn(this._thisDoc,this.lines,e,s,"Varible name can't start with '"+e.charAt(s)+"s'");for(;i<qo(e)&&au.indexOf(e.charAt(i))<0;)i+=1;if(null==this._parentContext)throw wn(this._thisDoc,this.lines,e,s,"Can't use ?xxx syntax for variable in outermost level: "+e.slice(s-1,i));return r.push(this._store.variable(e.slice(s,i))),i}bareWord(e,o,r){var s=this.skipSpace(e,o);if(s<0)return-1;var i=e.charAt(s);if("0123456789-".indexOf(i)>=0||au.indexOf(i)>=0)return-1;for(o=s;o<qo(e)&&au.indexOf(e.charAt(o))<0;)o+=1;return r.push(e.slice(s,o)),o}qname(e,s,r){if((s=this.skipSpace(e,s))<0)return-1;var i=e.charAt(s);if("0123456789-+".indexOf(i)>=0)return-1;if(au.indexOf(i)<0){var o=i;for(s+=1;s<qo(e)&&(i=e.charAt(s),au.indexOf(i)<0);)o+=i,s+=1}else o="";if(s<qo(e)&&":"==e.charAt(s)){var a=o;for(s+=1,o="";s<qo(e)&&(i=e.charAt(s),au.indexOf(i)<0);)o+=i,s+=1;return r.push(new zi([a,o])),s}return o&&this.keywordsSet&&da(this.keywords,o)<0?(r.push(new zi(["",o])),s):-1}object(e,n,r){if((s=this.subject(e,n,r))>=0)return s;{if((s=this.skipSpace(e,n))<0)return-1;var i=null;let c=e.charAt(n=s);if('"'==c||"'"==c){i=e.slice(n,n+3==c+c)?c+c+c:c,n+=qo(i);var o=this.strconst(e,n,i),s=o[0];return r.push(this._store.literal(o[1])),s}return-1}}nodeOrLiteral(e,n,r){if((s=this.node(e,n,r))>=0)return s;if((s=this.skipSpace(e,n))<0)return-1;var i=e.charAt(n=s);if("-+0987654321".indexOf(i)>=0){if(yV.lastIndex=0,null!=(o=yV.exec(e.slice(n))))s=n+(a=o[0]).length,a.indexOf("T")>=0?r.push(this._store.literal(a,this._store.sym("http://www.w3.org/2001/XMLSchema#dateTime"))):r.push(this._store.literal(a,this._store.sym("http://www.w3.org/2001/XMLSchema#date")));else{var a;if(mC.lastIndex=0,null==(o=mC.exec(e.slice(n))))throw wn(this._thisDoc,this.lines,e,n,"Bad number or date syntax");(a=e.slice(n,s=n+mC.lastIndex)).indexOf("e")>=0?r.push(this._store.literal(parseFloat(a),this._store.sym("http://www.w3.org/2001/XMLSchema#double"))):e.slice(n,s).indexOf(".")>=0?r.push(this._store.literal(parseFloat(a),this._store.sym("http://www.w3.org/2001/XMLSchema#decimal"))):r.push(this._store.literal(parseInt(a),this._store.sym("http://www.w3.org/2001/XMLSchema#integer")))}return s}if('"'==e.charAt(n)){if('"""'==e.slice(n,n+3))var l='"""';else l='"';n+=qo(l);var c=null,u=this.strconst(e,n,l),h=u[1],d=null;if("@"==e.slice(s=u[0],s+1)){var o;if(wC.lastIndex=0,null==(o=wC.exec(e.slice(s+1))))throw wn(this._thisDoc,startline,e,n,"Bad language code syntax on string literal, after @");d=e.slice(s+1,n=wC.lastIndex+s+1);var s=n}if("^^"==e.slice(s,s+2)){var p=new Ni([]);s=this.uri_ref2(e,s+2,p),c=p[0]}return r.push(this._store.literal(h,d||c)),s}return-1}strconst(e,n,r){for(var s=n,i="",o=this.lines;s<qo(e);){if(n=s+qo(r),e.slice(s,n)==r)return new zi([n,i]);if('"'!=e.charAt(s)){if(vC.lastIndex=0,!vC.exec(e.slice(s)))throw wn(this._thisDoc,o,e,s,"Closing quote missing in string at ^ in "+e.slice(s-20,s)+"^"+e.slice(s,s+20));if(i+=e.slice(s,n=s+vC.lastIndex-1),'"'!=(l=e.charAt(n)))if("\r"!=l){if("\n"==l){if('"'==r)throw wn(this._thisDoc,o,e,n,"newline found in string literal");this.lines=this.lines+1,i+=l,s=n+1,this.previousLine=this.startOfLine,this.startOfLine=s}else if("\\"==l){if(!(l=e.slice(s=n+1,s+1)))throw wn(this._thisDoc,o,e,n,"unterminated string literal (2)");var c=fC('abfrtvn\\"',l);if(c>=0)i+='a\b\f\r\t\v\n\\"'.charAt(c),s+=1;else if("u"==l)s=(h=this.uEscape(e,s+1,o))[0],i+=l=h[1];else{if("U"!=l)throw wn(this._thisDoc,this.lines,e,n,"bad escape");var h,l;s=(h=this.UEscape(e,s+1,o))[0],i+=l=h[1]}}}else s=n+1;else s=n}else i=i+'"',s=s+1}throw wn(this._thisDoc,this.lines,e,n,"unterminated string literal")}uEscape(e,n,r){for(var s=n,i=0,o=0;i<4;){var l=e.slice(s,s+1).toLowerCase();if(s+=1,""==l)throw wn(this._thisDoc,r,e,n,"unterminated string literal(3)");var c=fC("0123456789abcdef",l);if(c<0)throw wn(this._thisDoc,r,e,n,"bad string literal hex escape");o=16*o+c,i+=1}var u=String.fromCharCode(o);return new zi([s,u])}UEscape(e,n,r){for(var s=n,i=0,o="\\U";i<8;){var l=e.slice(s,s+1).toLowerCase();if(s+=1,""==l)throw wn(this._thisDoc,r,e,n,"unterminated string literal(3)");if(fC("0123456789abcdef",l)<0)throw wn(this._thisDoc,r,e,n,"bad string literal hex escape");o+=l,i+=1}var t,u=(t="0x"+pC(o,2,10)-0,String.fromCharCode(t));return new zi([s,u])}}function wn(t,e,n,r,s){let i=e+1,o="Line "+i+" of <"+t+">: Bad syntax: "+s+'\nat: "'+n.slice(r,r+30)+'"',a=new SyntaxError(o,t,i);return a.lineNo=i,a.characterInFile=r,a.syntaxProblem=s,a}const yC={...ka,supports:{[No.collections]:!0,[No.defaultGraphType]:!1,[No.equalsMethod]:!0,[No.identity]:!1,[No.id]:!0,[No.reversibleId]:!1,[No.variableType]:!0},collection:t=>new Pa(t),id(t){return(0,vs.P3)(t)?`( ${t.elements.map(e=>this.id(e)).join(", ")} )`:(0,vs.DZ)(t)?Jl.toString(t):ka.id(t)},termToNQ:t=>t.termType===dn.r0?Pa.toNT(t):ka.termToNQ(t)};function IC(t,e){return"string"==typeof e?t.rdfFactory.literal(e):Object.prototype.hasOwnProperty.call(e,"@list")?!0===t.rdfFactory.supports.COLLECTIONS?function Ree(t,e){if(!Array.isArray(e))throw new TypeError("Object must be an array");return t.rdfFactory.collection(e.map(n=>IC(t,n)))}(t,e["@list"]):function Lee(t,e){const n=e["@id"]?bC(t,e):t.rdfFactory.blankNode(),r=e["@list"].map(i=>IC(t,i)),s=pV(t.rdfFactory,n,r);return t.addAll(s),n}(t,e):Object.prototype.hasOwnProperty.call(e,"@id")?bC(t,e):Object.prototype.hasOwnProperty.call(e,"@language")?t.rdfFactory.literal(e["@value"],e["@language"]):Object.prototype.hasOwnProperty.call(e,"@type")?t.rdfFactory.literal(e["@value"],t.rdfFactory.namedNode(e["@type"])):Object.prototype.hasOwnProperty.call(e,"@value")?t.rdfFactory.literal(e["@value"]):t.rdfFactory.literal(e)}function AV(t,e,n){return AC.apply(this,arguments)}function AC(){return(AC=(0,ei.A)(function*(t,e,n){const r=n&&Object.prototype.hasOwnProperty.call(n,"termType")?n.value:n;return(yield(yield xe.e(45).then(xe.t.bind(xe,1045,23))).default.flatten(JSON.parse(t),null,{base:r})).reduce((o,a)=>bV(o,n,a),e)})).apply(this,arguments)}function bC(t,e){return e["@id"].startsWith("_:")?t.rdfFactory.blankNode(e["@id"].substring(2)):t.rdfFactory.namedNode(e["@id"])}function bV(t,e,n){const r=n["@id"]?bC(t,n):t.rdfFactory.blankNode();for(const s of Object.keys(n)){if("@id"===s)continue;if("@graph"==s){const o=r,a=n[s];for(let l=0;l<a.length;l++)t=bV(t,o,a[l])}const i=n[s];if(Array.isArray(i))for(let o=0;o<i.length;o++)t.addStatement(_V(t,r,s,i[o],e));else t.addStatement(_V(t,r,s,i,e))}return t}function _V(t,e,n,r,s){let i,o;return"@type"===n?(i=t.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),o=t.rdfFactory.namedNode(r)):(i=t.rdfFactory.namedNode(n),o=IC(t,r)),t.rdfFactory.quad(e,i,o,t.rdfFactory.namedNode(s))}var Dee=xe(6148),Bee=xe(4416),Nee=xe.n(Bee);const m0="http://www.w3.org/1999/02/22-rdf-syntax-ns#",v0="http://www.w3.org/2001/XMLSchema#",_C="http://www.w3.org/2000/10/swap/",vl={xsd:{decimal:`${v0}decimal`,boolean:`${v0}boolean`,double:`${v0}double`,integer:`${v0}integer`,string:`${v0}string`},rdf:{type:`${m0}type`,nil:`${m0}nil`,first:`${m0}first`,rest:`${m0}rest`,langString:`${m0}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${_C}reify#forSome`,forAll:`${_C}reify#forAll`},log:{implies:`${_C}log#implies`}},{xsd:N4}=vl,Fee=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,xV={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Pee=/[\x00-\x20<>\\"\{\}\|\^\`]/,kee={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Oee=/$0^/;class Gee{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const n in this)!(n in kee)&&this[n]instanceof RegExp&&(this[n]=Oee)}else this._n3Mode=!1!==e.n3;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let r=this._input,s=r.length;for(;;){let a,l;for(;a=this._newline.exec(r);)this.comments&&(l=this._comment.exec(a[0]))&&i("comment",l[1],"",this._line,a[0].length),r=r.substr(a[0].length,r.length),s=r.length,this._line++;if(!a&&(a=this._whitespace.exec(r))&&(r=r.substr(a[0].length,r.length)),this._endOfFile.test(r))return n&&(this.comments&&(l=this._comment.exec(r))&&i("comment",l[1],"",this._line,r.length),r=null,i("eof","","",this._line,0)),this._input=r;const c=this._line,u=r[0];let h="",d="",p="",m=null,y=0,H=!1;switch(u){case"^":if(r.length<3)break;if("^"!==r[1]){this._n3Mode&&(y=1,h="^");break}if(this._previousMarker="^^",r=r.substr(2),"<"!==r[0]){H=!0;break}case"<":if(m=this._unescapedIri.exec(r))h="IRI",d=m[1];else if(m=this._iri.exec(r)){if(d=this._unescape(m[1]),null===d||Pee.test(d))return o(this);h="IRI"}else r.length>1&&"<"===r[1]?(h="<<",y=2):this._n3Mode&&r.length>1&&"="===r[1]&&(h="inverse",y=2,d=">");break;case">":r.length>1&&">"===r[1]&&(h=">>",y=2);break;case"_":((m=this._blank.exec(r))||n&&(m=this._blank.exec(`${r} `)))&&(h="blank",p="_",d=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(r))d=m[1];else if(({value:d,matchLength:y}=this._parseLiteral(r)),null===d)return o(this);(null!==m||0!==y)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(r))d=m[1];else if(({value:d,matchLength:y}=this._parseLiteral(r)),null===d)return o(this);(null!==m||0!==y)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(r))&&(h="var",d=m[0]);break;case"@":"literal"===this._previousMarker&&(m=this._langcode.exec(r))?(h="langcode",d=m[1]):(m=this._keyword.exec(r))&&(h=m[0]);break;case".":if(1===r.length?n:r[1]<"0"||r[1]>"9"){h=".",y=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(r)||n&&(m=this._number.exec(`${r} `)))&&(h="literal",d=m[0],p="string"==typeof m[1]?N4.double:"string"==typeof m[2]?N4.decimal:N4.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(r))?h=m[0].toUpperCase():H=!0;break;case"f":case"t":(m=this._boolean.exec(r))?(h="literal",d=m[0],p=N4.boolean):H=!0;break;case"a":(m=this._shortPredicates.exec(r))?(h="abbreviation",d="a"):H=!0;break;case"=":this._n3Mode&&r.length>1&&(h="abbreviation",">"!==r[1]?(y=1,d="="):(y=2,d=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(y=1,h=u);break;case"{":!this._lineMode&&r.length>=2&&("|"===r[1]?(h="{|",y=2):(h=u,y=1));break;case"|":r.length>=2&&"}"===r[1]&&(h="|}",y=2);break;default:H=!0}if(H&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(m=this._prefix.exec(r))?((m=this._prefixed.exec(r))||n&&(m=this._prefixed.exec(`${r} `)))&&(h="prefixed",p=m[1]||"",d=this._unescape(m[2])):(h="prefix",d=m[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return n||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?o(this):this._input=r;const T=y||m[0].length,V=i(h,d,p,c,T);this.previousToken=V,this._previousMarker=h,r=r.substr(T,r.length)}function i(a,l,c,u,h){const d=r?s-r.length:s,m={type:a,value:l,prefix:c,line:u,start:d,end:d+h};return e(null,m),m}function o(a){e(a._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(e){let n=!1;const r=e.replace(Fee,(s,i,o,a)=>{if("string"==typeof i)return String.fromCharCode(Number.parseInt(i,16));if("string"==typeof o){let l=Number.parseInt(o,16);return l<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(1023&l))}return a in xV?xV[a]:(n=!0,"")});return n?null:r}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],r=n.length;let s=Math.max(this._literalClosingPos,r);for(;(s=e.indexOf(n,s))>0;){let i=0;for(;"\\"===e[s-i-1];)i++;if(i%2==0){const o=e.substring(r,s),a=o.split(/\r\n|\r|\n/).length-1,l=s+r;if(1===r&&0!==a||3===r&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:l}}s++}this._literalClosingPos=e.length-r+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,n){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof n){const r=[];let s;if(this._tokenizeToEnd((i,o)=>i?s=i:r.push(o),!0),s)throw s;return r}Nee()(()=>this._tokenizeToEnd(n,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",r=>{null!==this._input&&0!==r.length&&(this._pendingBuffer&&(r=Dee.hp.concat([this._pendingBuffer,r]),this._pendingBuffer=null),128&r[r.length-1]?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof r?r:r.toString()):this._input+=r,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}const{rdf:Wee,xsd:lu}=vl;let F2,Zee=0;const jee={namedNode:zV,blankNode:VV,variable:TV,literal:EV,defaultGraph:function Yee(){return F2},quad:SC,triple:SC,fromTerm:w0,fromQuad:LV};class wl{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof wl?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class HV extends wl{get termType(){return"NamedNode"}}class P2 extends wl{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&"@"===e[n++]?e.substr(n).toLowerCase():""}get datatype(){return new HV(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,r=n<e.length?e[n]:"";return"^"===r?e.substr(n+2):"@"!==r?lu.string:Wee.langString}equals(e){return e instanceof P2?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Uee extends wl{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class $ee extends wl{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}F2=new class Xee extends wl{constructor(){return super(""),F2||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class MV extends wl{constructor(e,n,r,s){super(""),this._subject=e,this._predicate=n,this._object=r,this._graph=s||F2}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function zV(t){return new HV(t)}function VV(t){return new Uee(t||"n3-"+Zee++)}function EV(t,e){if("string"==typeof e)return new P2(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return""===n&&("boolean"==typeof t?n=lu.boolean:"number"==typeof t&&(Number.isFinite(t)?n=Number.isInteger(t)?lu.integer:lu.double:(n=lu.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),new P2(""===n||n===lu.string?`"${t}"`:`"${t}"^^${n}`)}function TV(t){return new $ee(t)}function SC(t,e,n,r){return new MV(t,e,n,r)}function w0(t){if(t instanceof wl)return t;switch(t.termType){case"NamedNode":return zV(t.value);case"BlankNode":return VV(t.value);case"Variable":return TV(t.value);case"DefaultGraph":return F2;case"Literal":return EV(t.value,t.language||t.datatype);case"Quad":return LV(t);default:throw new Error(`Unexpected termType: ${t.termType}`)}}function LV(t){if(t instanceof MV)return t;if("Quad"!==t.termType)throw new Error(`Unexpected termType: ${t.termType}`);return SC(w0(t.subject),w0(t.predicate),w0(t.object),w0(t.graph))}let RV=0;class DV{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&BV(this,e.factory);const n="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(n),s=/trig/.test(n),i=/triple/.test(n),o=/quad/.test(n),a=this._n3Mode=/n3/.test(n),l=i||o;(this._supportsNamedGraphs=!(r||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||s||i||a),this._supportsRDFStar=""===n||/star|\*$/.test(n),l&&(this._resolveRelativeIRI=c=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new Gee({lineMode:l,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){RV=0}_setBase(e){if(e){const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,n,r,s,i){const o=this._n3Mode;this._contextStack.push({type:e,subject:r,predicate:s,object:i,graph:n,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const r=this._contextStack.pop();if(!r||r.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let r;switch(e.type){case"IRI":case"typeIRI":const s=this._resolveIRI(e.value);if(null===s)return this._error("Invalid IRI",e);r=this._factory.namedNode(s);break;case"type":case"prefixed":const i=this._prefixes[e.prefix];if(void 0===i)return this._error(`Undefined prefix "${e.prefix}:"`,e);r=this._factory.namedNode(i+e.value);break;case"blank":r=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":r=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${n}`,e):(this._subject=null,"]"===n?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,r=null,s=this._readListItem;const i=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=n=this._factory.blankNode()),s=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(s=this._readPredicate,this._subject===this.RDF_NIL)return s}else if(s=this._getContextEndReader(),this._object===this.RDF_NIL)return s;r=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,s=this._readListItemDataTypeOrLang):(n=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),s=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(n=this._readEntity(e)))return}if(null===r&&(this._subject=r=this._factory.blankNode()),null===i?null===a.predicate?a.subject=r:a.object=r:this._emit(i,this.RDF_REST,r,this._graph),null!==n){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,r,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,n,this._graph)}return s}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const r=this._readEntity(e);if(void 0===r)return;n=this._factory.literal(this._literalValue,r),e=null;break;case"langcode":n=this._factory.literal(this._literalValue,e.value),e=null}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const r=this._completeLiteral(e);if(r)return this._object=r.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===r.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,r=this._graph;const s=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);this._subject=this._factory.quad(s,this._predicate,this._object,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(r=this._readEntity(e))){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==s){const o=this._predicate,a=this._object;i?this._emit(a,o,s,r):this._emit(s,o,a,r)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n="IRI"===e.type&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if(void 0!==(n=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,r=n.length&&n[n.length-1];if(r&&"item"===r.type){const s=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,s,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,r;const s=this._factory.blankNode();if(void 0!==(r=this._readEntity(e)))return null===this._predicate?(n=this._subject,this._subject=s):(n=this._object,this._object=s),this._emit(n,r,s,this._graph),this._readPath}_readBackwardPath(e){const n=this._factory.blankNode();let r,s;if(void 0!==(r=this._readEntity(e)))return null===this._predicate?(s=this._subject,this._subject=n):(s=this._object,this._object=n),this._emit(n,r,s,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const n=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,r,s){this._callback(null,this._factory.quad(e,n,r,s||this.DEFAULTGRAPH))}_error(e,n){const r=new Error(`${e} on line ${n.line}.`);r.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=k4}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let r="",s=-1,i=-1,o=0,a="/";for(;s<n;){switch(a){case":":if(i<0&&"/"===e[++s]&&"/"===e[++s])for(;(i=s+1)<n&&"/"!==e[i];)s=i;break;case"?":case"#":s=n;break;case"/":if("."===e[s+1])switch(a=e[1+ ++s],a){case"/":r+=e.substring(o,s-1),o=s+1;break;case void 0:case"?":case"#":return r+e.substring(o,s)+e.substr(s+1);case".":if(a=e[1+ ++s],void 0===a||"/"===a||"?"===a||"#"===a){if(r+=e.substring(o,s-2),(o=r.lastIndexOf("/"))>=i&&(r=r.substr(0,o)),"/"!==a)return`${r}/${e.substr(s+1)}`;o=s+1}}}a=e[++s]}return r+e.substring(o)}parse(e,n,r){let s,i,o;if(n&&(n.onQuad||n.onPrefix||n.onComment)?(s=n.onQuad,i=n.onPrefix,o=n.onComment):(s=n,i=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${RV++}_`,this._prefixCallback=i||k4,this._inversePredicate=!1,this._quantified=Object.create(null),!s){const l=[];let c;if(this._callback=(u,h)=>{u?c=u:h&&l.push(h)},this._lexer.tokenize(e).every(u=>this._readCallback=this._readCallback(u)),c)throw c;return l}let a=(l,c)=>{null!==l?(this._callback(l),this._callback=k4):this._readCallback&&(this._readCallback=this._readCallback(c))};o&&(this._lexer.comments=!0,a=(l,c)=>{null!==l?(this._callback(l),this._callback=k4):this._readCallback&&("comment"===c.type?o(c.value):this._readCallback=this._readCallback(c))}),this._callback=s,this._lexer.tokenize(e,a)}}function k4(){}function BV(t,e){t._factory=e,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=e.namedNode(vl.rdf.first),t.RDF_REST=e.namedNode(vl.rdf.rest),t.RDF_NIL=e.namedNode(vl.rdf.nil),t.N3_FORALL=e.namedNode(vl.r.forAll),t.N3_FORSOME=e.namedNode(vl.r.forSome),t.ABBREVIATIONS={a:e.namedNode(vl.rdf.type),"=":e.namedNode(vl.owl.sameAs),">":e.namedNode(vl.log.implies)},t.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}if(BV(DV.prototype,jee),typeof Uc>"u")var Uc={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};class An{constructor(e,n){this.options=n||{},this.kb=e,this.target=n.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+(new Date).getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}addTriple(e,n,r,s){var i,o,a,l;i=typeof n>"u"?ka.namedNode(this.options.base):this.toRDFNodeObject(n),a=this.toRDFNodeObject(r),o=this.toRDFNodeObject(s),l=ka.namedNode(this.options.base),this.kb.add(i,a,o,l)}ancestorPath(e){for(var n="";e&&e.nodeType!==Uc.DOCUMENT_NODE;)n="/"+e.localName+n,e=e.parentNode;return n}copyMappings(e){var n={};for(var r in e)n[r]=e[r];return n}copyProperties(){}deriveDateTimeType(e){for(var n=0;n<An.dateTimeTypes.length;n++){var r=An.dateTimeTypes[n].pattern.exec(e);if(r&&r[0].length===e.length)return An.dateTimeTypes[n].type}return null}init(){}newBlankNode(){return this.blankCounter++,"_:"+this.blankCounter}newSubjectOrigin(e,n){}parseCURIE(e,n,r){var i,s=e.indexOf(":");if(s>=0){var o=e.substring(0,s);if(""===o)return(i=n[""])?i+e.substring(s+1):null;if("_"===o)return"_:"+e.substring(s+1);if(An.NCNAME.test(o)&&(i=n[o]))return i+e.substring(s+1)}return null}parseCURIEOrURI(e,n,r){return this.parseCURIE(e,n,r)||this.resolveAndNormalize(r,e)}parsePredicate(e,n,r,s,i,o){if(""===e)return null;var a=this.parseTermOrCURIEOrAbsURI(e,n,o?null:r,s,i);return a&&0===a.indexOf("_:")?null:a}parsePrefixMappings(e,n){for(var r=this.tokenize(e),s=null,i=0;i<r.length;i++)":"===r[i][r[i].length-1]?s=r[i].substring(0,r[i].length-1):s&&(n[s]=this.options.base?Bo(r[i],this.options.base):r[i],s=null)}static parseRDFaDOM(e,n,r){var s=new An(n,{base:r});e.baseURI||(e.baseURI=r),s.process(e,{baseURI:r})}parseSafeCURIEOrCURIEOrURI(e,n,r){return"["===(e=this.trim(e)).charAt(0)&&"]"===e.charAt(e.length-1)?0===(e=(e=e.substring(1,e.length-1)).trim(e)).length?null:"_:"===e?this.theOne:this.parseCURIE(e,n,r):this.parseCURIEOrURI(e,n,r)}parseTermOrCURIEOrAbsURI(e,n,r,s,i){e=this.trim(e);var o=this.parseCURIE(e,s,i);if(o)return o;if(r){if(n&&!this.absURIRE.exec(e))return n+e;var a=r[e];if(a)return a;if(a=r[e.toLowerCase()])return a}return this.absURIRE.exec(e)?this.resolveAndNormalize(i,e):null}parseTermOrCURIEOrURI(e,n,r,s,i){e=this.trim(e);var o=this.parseCURIE(e,s,i);if(o)return o;var a=r[e];return a||(a=r[e.toLowerCase()])||(n&&!this.absURIRE.exec(e)?n+e:this.resolveAndNormalize(i,e))}parseURI(e){return e}process(e,n){var r;n=n||{},e.nodeType===Uc.DOCUMENT_NODE?(e.baseURI&&!n.baseURI&&(n.baseURI=e.baseURI),r=e.baseURI,(e=e.documentElement).baseURI||(e.baseURI=r),this.setContext(e)):e.parentNode.nodeType===Uc.DOCUMENT_NODE&&this.setContext(e);var s=[],i=function(Wt){if(!Wt&&n&&n.baseURI)return n.baseURI;var ts=Wt.indexOf("#");return ts>=0&&(Wt=Wt.substring(0,ts)),n&&n.baseURIMap&&(Wt=n.baseURIMap(Wt)),Wt};for(s.push({current:e,context:this.push(null,i(e.baseURI))});s.length>0;){var o=s.shift();if(o.parent){if(o.context.parent&&o.context.parent.listMapping===o.listMapping)continue;for(let Wt in o.listMapping){var a=o.listMapping[Wt];if(0!==a.length){var l=[];for(let ts=0;ts<a.length;ts++)l.push(this.newBlankNode());for(let ts=0;ts<l.length;ts++)this.addTriple(o.parent,l[ts],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",a[ts]),this.addTriple(o.parent,l[ts],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:An.objectURI,value:ts+1<l.length?l[ts+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(o.parent,o.subject,Wt,{type:An.objectURI,value:l[0]})}else this.addTriple(o.parent,o.subject,Wt,{type:An.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"})}}else{var c=o.current,u=o.context,h=!1,d=null,p=null,m=null,y=u.prefixes,H=!1,T=[],V=u.listMapping,J=!u.parent,ie=u.language,D=u.vocabulary;r=this.parseURI(i(c.baseURI)),c.item=null;var re=c.getAttributeNode("vocab");if(re){let Wt=this.trim(re.value);Wt.length>0?this.addTriple(c,r.spec,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:An.objectURI,value:D=Wt}):D=this.vocabulary}for(var ue=0;ue<c.attributes.length;ue++){var Me=c.attributes[ue];if("x"===Me.nodeName.charAt(0)&&0===Me.nodeName.indexOf("xmlns:")){H||(y=this.copyMappings(y),H=!0);var Ce=Me.nodeName.substring(6),ze=An.trim(Me.value);y[Ce]=this.options.base?Bo(ze,this.options.base):ze}}var Ae=c.getAttributeNode("prefix");Ae&&(H||(y=this.copyMappings(y),H=!0),this.parsePrefixMappings(Ae.value,y));var dt=null;for(let Wt=0;!dt&&Wt<this.langAttributes.length;Wt++)dt=c.getAttributeNodeNS(this.langAttributes[Wt].namespaceURI,this.langAttributes[Wt].localName);if(dt){let Wt=An.trim(dt.value);ie=Wt.length>0?Wt:null}var xl,_o,ft=c.getAttributeNode("rel"),$e=c.getAttributeNode("rev"),Xt=c.getAttributeNode("typeof"),pn=c.getAttributeNode("property"),bs=c.getAttributeNode("datatype"),Ds=this.inHTMLMode?c.getAttributeNode("datetime"):null,Bs=c.getAttributeNode("content"),Ns=c.getAttributeNode("about"),xi=c.getAttributeNode("src"),Si=c.getAttributeNode("resource"),Fi=c.getAttributeNode("href"),oo=c.getAttributeNode("inlist"),ui=[];if(ft){_o=this.tokenize(ft.value);for(let Wt=0;Wt<_o.length;Wt++)(xl=this.parsePredicate(_o[Wt],D,u.terms,y,r,this.inHTMLMode&&null!==pn))&&ui.push(xl)}var Sl=[];if($e){_o=this.tokenize($e.value);for(let Wt=0;Wt<_o.length;Wt++)(xl=this.parsePredicate(_o[Wt],D,u.terms,y,r,this.inHTMLMode&&pn))&&Sl.push(xl)}if(this.inHTMLMode&&(ft||$e)&&pn&&(0===ui.length&&(ft=null),0===Sl.length&&($e=null)),ft||$e?(Ns&&(d=this.parseSafeCURIEOrCURIEOrURI(Ns.value,y,r)),Xt&&(m=d),d||(c.parentNode.nodeType===Uc.DOCUMENT_NODE?d=i(c.baseURI):u.parentObject&&(d=i(c.parentNode.baseURI)===u.parentObject?i(c.baseURI):u.parentObject)),Si&&(p=this.parseSafeCURIEOrCURIEOrURI(Si.value,y,r)),p||(Fi?p=this.resolveAndNormalize(r,encodeURI(Fi.value)):xi?p=this.resolveAndNormalize(r,encodeURI(xi.value)):Xt&&!Ns&&!(this.inXHTMLMode&&("head"===c.localName||"body"===c.localName))&&(p=this.newBlankNode())),!Xt||Ns||!this.inXHTMLMode||"head"!==c.localName&&"body"!==c.localName?Xt&&!Ns&&(m=p):m=d):!pn||Bs||bs?(Ns&&(d=this.parseSafeCURIEOrCURIEOrURI(Ns.value,y,r)),!d&&Si&&(d=this.parseSafeCURIEOrCURIEOrURI(Si.value,y,r)),!d&&Fi&&(d=this.resolveAndNormalize(r,encodeURI(Fi.value))),!d&&xi&&(d=this.resolveAndNormalize(r,encodeURI(xi.value))),d||(c.parentNode.nodeType===Uc.DOCUMENT_NODE?d=i(c.baseURI):!this.inXHTMLMode&&!this.inHTMLMode||"head"!==c.localName&&"body"!==c.localName?Xt?d=this.newBlankNode():u.parentObject&&(d=i(c.parentNode.baseURI)===u.parentObject?i(c.baseURI):u.parentObject,pn||(h=!0)):d=i(c.parentNode.baseURI)===u.parentObject?i(c.baseURI):u.parentObject),Xt&&(m=d)):(Ns&&(d=this.parseSafeCURIEOrCURIEOrURI(Ns.value,y,r),Xt&&(m=d)),d||c.parentNode.nodeType!==Uc.DOCUMENT_NODE?!d&&u.parentObject&&(d=i(c.parentNode.baseURI)===u.parentObject?i(c.baseURI):u.parentObject):(d=i(c.baseURI),Xt&&(m=d)),Xt&&!m&&(Si&&(m=this.parseSafeCURIEOrCURIEOrURI(Si.value,y,r)),!m&&Fi&&(m=this.resolveAndNormalize(r,encodeURI(Fi.value))),!m&&xi&&(m=this.resolveAndNormalize(r,encodeURI(xi.value))),!m&&(this.inXHTMLMode||this.inHTMLMode)&&("head"===c.localName||"body"===c.localName)&&(m=d),m||(m=this.newBlankNode()),p=m)),d&&(Ns||Si||m)){var uh=d;Xt&&!Ns&&!Si&&p&&(uh=p),this.newSubjectOrigin(c,uh)}if(m){_o=this.tokenize(Xt.value);for(let Wt=0;Wt<_o.length;Wt++){var kR=this.parseTermOrCURIEOrAbsURI(_o[Wt],D,u.terms,y,r);kR&&this.addTriple(c,m,An.typeURI,{type:An.objectURI,value:kR})}}if(d&&d!==u.parentObject&&(V={},J=!0),p){if(ft&&oo)for(let Wt=0;Wt<ui.length;Wt++){let ts=V[ui[Wt]];ts||(ts=[],V[ui[Wt]]=ts),ts.push({type:An.objectURI,value:p})}else if(ft)for(let Wt=0;Wt<ui.length;Wt++)this.addTriple(c,d,ui[Wt],{type:An.objectURI,value:p});if($e)for(let Wt=0;Wt<Sl.length;Wt++)this.addTriple(c,p,Sl[Wt],{type:An.objectURI,value:d})}else{if(d&&!p&&(ft||$e)&&(p=this.newBlankNode()),ft&&oo)for(let Wt=0;Wt<ui.length;Wt++){let ts=V[ui[Wt]];ts||(ts=[],V[xl]=ts),T.push({predicate:ui[Wt],list:ts})}else if(ft)for(let Wt=0;Wt<ui.length;Wt++)T.push({predicate:ui[Wt],forward:!0});if($e)for(let Wt=0;Wt<Sl.length;Wt++)T.push({predicate:Sl[Wt],forward:!1})}if(pn){var hi=null,ao=null;bs?(hi=""===bs.value?An.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(bs.value,D,u.terms,y,r),ao=Ds&&!Bs?Ds.value:hi===An.XMLLiteralURI||hi===An.HTMLLiteralURI?null:Bs?Bs.value:c.textContent):Bs?(hi=An.PlainLiteralURI,ao=Bs.value):Ds?(hi=An.deriveDateTimeType(ao=Ds.value))||(hi=An.PlainLiteralURI):!ft&&!$e&&(Si&&(ao=this.parseSafeCURIEOrCURIEOrURI(Si.value,y,r)),!ao&&Fi?ao=this.resolveAndNormalize(r,encodeURI(Fi.value)):!ao&&xi&&(ao=this.resolveAndNormalize(r,encodeURI(xi.value))),ao&&(hi=An.objectURI)),hi||(Xt&&!Ns?(hi=An.objectURI,ao=m):(ao=c.textContent,this.inHTMLMode&&"time"===c.localName&&(hi=An.deriveDateTimeType(ao)),hi||(hi=An.PlainLiteralURI))),_o=this.tokenize(pn.value);for(let Wt=0;Wt<_o.length;Wt++){let ts=this.parsePredicate(_o[Wt],D,u.terms,y,r);if(ts)if(oo){let Z5=V[ts];Z5||(Z5=[],V[ts]=Z5),Z5.push(hi===An.XMLLiteralURI||hi===An.HTMLLiteralURI?{type:hi,value:c.childNodes}:{type:hi||An.PlainLiteralURI,value:ao,language:ie})}else this.addTriple(c,d,ts,hi===An.XMLLiteralURI||hi===An.HTMLLiteralURI?{type:hi,value:c.childNodes}:{type:hi||An.PlainLiteralURI,value:ao,language:ie})}}if(d&&!h)for(let Wt=0;Wt<u.incomplete.length;Wt++)u.incomplete[Wt].list?u.incomplete[Wt].list.push({type:An.objectURI,value:d}):u.incomplete[Wt].forward?this.addTriple(c,u.subject,u.incomplete[Wt].predicate,{type:An.objectURI,value:d}):this.addTriple(c,d,u.incomplete[Wt].predicate,{type:An.objectURI,value:u.subject});var Po=null,OR=d;h?((Po=this.push(u,u.subject)).parentObject=i(c.parentNode.baseURI)===u.parentObject?i(c.baseURI):u.parentObject,Po.incomplete=u.incomplete,Po.language=ie,Po.prefixes=y,Po.vocabulary=D):((Po=this.push(u,d)).parentObject=p||d||u.subject,Po.prefixes=y,Po.incomplete=T,p&&(OR=p,V={},J=!0),Po.listMapping=V,Po.language=ie,Po.vocabulary=D),J&&s.unshift({parent:c,context:u,subject:OR,listMapping:V});for(var q0=c.lastChild;q0;q0=q0.previousSibling)q0.nodeType===Uc.ELEMENT_NODE&&s.unshift({current:q0,context:Po})}}this.inHTMLMode&&this.copyProperties();for(let Wt=0;Wt<this.finishedHandlers.length;Wt++)this.finishedHandlers[Wt](e)}push(e,n){return{parent:e,subject:n||(e?e.subject:null),parentObject:null,incomplete:[],listMapping:e?e.listMapping:{},language:e?e.language:this.language,prefixes:e?e.prefixes:this.target.graph.prefixes,terms:e?e.terms:this.target.graph.terms,vocabulary:e?e.vocabulary:this.vocabulary}}resolveAndNormalize(e,n){return Bo(n,e)}setContext(e){"html"===e.localName&&"XHTML+RDFa 1.1"===e.getAttribute("version")?this.setXHTMLContext():"html"===e.localName||"http://www.w3.org/1999/xhtml"===e.namespaceURI?typeof document<"u"&&document.doctype?"-//W3C//DTD XHTML+RDFa 1.0//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"===document.doctype.systemId?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):"-//W3C//DTD XHTML+RDFa 1.1//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"===document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}setHTMLContext(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}setInitialContext(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}setXHTMLContext(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}setXMLContext(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}tokenize(e){return this.trim(e).split(/\s+/)}static tokenize(e){return this.trim(e).split(/\s+/)}toRDFNodeObject(e){if(!(typeof e>"u")){if("string"==typeof e)return"_:"===e.substring(0,2)?(typeof this.blankNodes[e.substring(2)]>"u"&&(this.blankNodes[e.substring(2)]=new Ui(e.substring(2))),this.blankNodes[e.substring(2)]):ka.namedNode(e);switch(e.type){case An.objectURI:return"_:"===e.value.substring(0,2)?(typeof this.blankNodes[e.value.substring(2)]>"u"&&(this.blankNodes[e.value.substring(2)]=new Ui(e.value.substring(2))),this.blankNodes[e.value.substring(2)]):ka.namedNode(e.value);case An.PlainLiteralURI:return new qs(e.value,e.language||"");case An.XMLLiteralURI:case An.HTMLLiteralURI:var n="";return Object.keys(e.value).forEach(r=>{n+=Fo.jI(e.value[r],this.htmlOptions)}),new qs(n,"",new ro.A(e.type));default:return new qs(e.value,"",new ro.A(e.type))}}}trim(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}static trim(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}An.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral",An.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML",An.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",An.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object",An.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",An.nameChar="[-A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u10000-\uefffF.0-9\xb7\u0300-\u036f\u203f-\u2040]",An.nameStartChar="[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3\u4e00-\u9fa5\u3007\u3021-\u3029_]",An.NCNAME=new RegExp("^"+An.nameStartChar+An.nameChar+"*$"),An.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];const O4=An.parseRDFaDOM;class ir{constructor(e){this.store=e,this.bnodes={},this.why=null,this.reify=!1}frameFactory(e,n,r){return{NODE:1,ARC:2,parent:n,parser:e,store:e.store,element:r,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(s,i){i=Bo(i,this.base),this.node=this.store.sym(i),this.nodeType=s},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),null!=this.parent.rdfid){var s=this.store.sym(Bo("#"+this.parent.rdfid,this.base));this.store.add(s,this.store.sym(ir.ns.RDF+"type"),this.store.sym(ir.ns.RDF+"Statement"),this.parser.why),this.store.add(s,this.store.sym(ir.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(s,this.store.sym(ir.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(s,this.store.sym(ir.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return null!=this.parent&&null!=this.parent.parent&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(s){this.addSymbol(this.NODE,s),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(s){this.node=null!=s?null!=this.parser.bnodes[s]?this.parser.bnodes[s]:this.parser.bnodes[s]=this.store.bnode():this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(s){s===ir.ns.RDF+"li"&&(s=ir.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,s)},addLiteral:function(s){this.node=this.store.literal(s,this.parent.datatype&&this.parent.datatype!==ir.ns.RDF+"langString"?this.store.sym(this.parent.datatype):this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}}getAttributeNodeNS(e,n,r){var s=null;if(e.getAttributeNodeNS)s=e.getAttributeNodeNS(n,r);else for(var o,i=e.attributes,l=0;l<i.length;++l)if((o=i[l]).namespaceURI===n&&(o.prefix?o.prefix+":"+r:r)===o.nodeName){s=o;break}return s}parse(e,n,r){var i,s=e.childNodes;if(this.cleanParser(),e.nodeType===ir.nodeType.DOCUMENT){for(var o=0;o<s.length;o++)if(s[o].nodeType===ir.nodeType.ELEMENT){i=s[o];break}}else{if(e.nodeType!==ir.nodeType.ELEMENT)throw new Error("RDFParser: can't find root in "+n+". Halting. ");i=e}this.why=r;var a=this.frameFactory(this);return this.base=n,a.base=n,a.lang=null,this.parseDOM(this.buildFrame(a,i)),!0}parseDOM(e){for(var n,r=function(ie){var D="";if(null==ie.namespaceURI)throw new Error("RDF/XML syntax error: No namespace for "+ie.localName+" in "+this.base);return ie.namespaceURI&&(D+=ie.namespaceURI),ie.localName?D+=ie.localName:ie.nodeName&&(ie.nodeName.indexOf(":")>=0?D+=ie.nodeName.split(":")[1]:D+=ie.nodeName),D}.bind(this),s=!0;e.parent;){var i=e.element,o=i.attributes;if(i.nodeType===ir.nodeType.TEXT||i.nodeType===ir.nodeType.CDATA_SECTION)e.parent.nodeType===e.NODE&&(e.addArc(ir.ns.RDF+"value"),e=this.buildFrame(e)),e.addLiteral(i.nodeValue);else if(r(i)!==ir.ns.RDF+"RDF")if(e.parent&&e.parent.collection&&(e.addCollectionArc(),(e=this.buildFrame(e,e.element)).parent.element=null),e.parent&&e.parent.nodeType&&e.parent.nodeType!==e.ARC){e.addArc(r(i)),this.reify&&(n=this.getAttributeNodeNS(i,ir.ns.RDF,"ID"))&&(e.rdfid=n.nodeValue,i.removeAttributeNode(n));var h=this.getAttributeNodeNS(i,ir.ns.RDF,"parseType"),d=this.getAttributeNodeNS(i,ir.ns.RDF,"datatype");if(d&&(e.datatype=d.nodeValue,i.removeAttributeNode(d)),h){var p=h.nodeValue;"Literal"===p?(e.datatype=ir.ns.RDF+"XMLLiteral",(e=this.buildFrame(e)).addLiteral(i.innerHTML||i.childNodes),s=!1):"Resource"===p?((e=this.buildFrame(e,e.element)).parent.element=null,e.addBNode()):"Collection"===p&&((e=this.buildFrame(e,e.element)).parent.element=null,e.addCollection()),i.removeAttributeNode(h)}if(0!==o.length){var m=this.getAttributeNodeNS(i,ir.ns.RDF,"resource"),y=this.getAttributeNodeNS(i,ir.ns.RDF,"nodeID");e=this.buildFrame(e),m?(e.addNode(m.nodeValue),i.removeAttributeNode(m)):y?(e.addBNode(y.nodeValue),i.removeAttributeNode(y)):e.addBNode();for(var H=o.length-1;H>=0;H--){var T=this.buildFrame(e);T.addArc(r(o[H])),r(o[H])===ir.ns.RDF+"type"?this.buildFrame(T).addNode(o[H].nodeValue):this.buildFrame(T).addLiteral(o[H].nodeValue)}}else 0===i.childNodes.length&&this.buildFrame(e).addLiteral("")}else{var a=this.getAttributeNodeNS(i,ir.ns.RDF,"about");if(n=this.getAttributeNodeNS(i,ir.ns.RDF,"ID"),a&&n)throw new Error("RDFParser: "+i.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!a&&n)e.addNode("#"+n.nodeValue),i.removeAttributeNode(n);else if(null==a&&null==n){var l=this.getAttributeNodeNS(i,ir.ns.RDF,"nodeID");l?(e.addBNode(l.nodeValue),i.removeAttributeNode(l)):e.addBNode()}else e.addNode(a.nodeValue),i.removeAttributeNode(a);var c=this.getAttributeNodeNS(i,ir.ns.RDF,"type");ir.ns.RDF+"Description"!==r(i)&&(c={nodeValue:r(i)}),null!=c&&(this.store.add(e.node,this.store.sym(ir.ns.RDF+"type"),this.store.sym(Bo(c.nodeValue,e.base)),this.why),c.nodeName&&i.removeAttributeNode(c));for(var u=o.length-1;u>=0;u--)this.store.add(e.node,this.store.sym(r(o[u])),this.store.literal(o[u].nodeValue,e.lang),this.why)}for(i=e.element;e.parent;){for(var V=e;null==i;)i=(e=e.parent).element;var J=i.childNodes&&i.childNodes[e.lastChild];if(J&&s){if((J.nodeType===ir.nodeType.ELEMENT||J.nodeType===ir.nodeType.TEXT||J.nodeType===ir.nodeType.CDATA_SECTION)&&(J.nodeType!==ir.nodeType.TEXT&&J.nodeType!==ir.nodeType.CDATA_SECTION||1===i.childNodes.length)){e.lastChild++,e=this.buildFrame(V,i.childNodes[e.lastChild-1]);break}e.lastChild++}else{if(e.terminateFrame(),!(e=e.parent))break;i=e.element,s=!0}}}}cleanParser(){this.bnodes={},this.why=null}buildFrame(e,n){var r=this.frameFactory(this,e,n);if(e&&(r.base=e.base,r.lang=e.lang),!n||n.nodeType===ir.nodeType.TEXT||n.nodeType===ir.nodeType.CDATA_SECTION)return r;var s=n.attributes,i=n.getAttributeNode("xml:base");null!=i&&(r.base=i.nodeValue,n.removeAttribute("xml:base"));var o=n.getAttributeNode("xml:lang");null!=o&&(r.lang=o.nodeValue,n.removeAttribute("xml:lang"));for(var a=s.length-1;a>=0;a--)if("xml"===s[a].nodeName.substr(0,3)){if("xmlns:"===s[a].name.slice(0,6)){var l=s[a].nodeValue;this.base&&(l=Bo(l,this.base)),this.store.setPrefixForURI(s[a].name.slice(6),l)}n.removeAttributeNode(s[a])}return r}}function G4(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text/turtle",s=arguments.length>4?arguments[4]:void 0;r=r||dn.sT,r=r.split(";")[0];try{if(r===dn.ny||r===dn.sT)CC(e,e,n,n,null,null,"",null).loadBuf(t),l();else if(r===dn.JG)new ir(e).parse(Fo.h4(t),n,e.sym(n)),l();else if(r===dn.H)O4(Fo.h4(t,{contentType:dn.H}),e,n),l();else if(r===dn.lc)O4(Fo.h4(t,{contentType:dn.lc}),e,n),l();else if(r===dn.K9||r===dn.Fn)(function Kee(t,e,n){var r,s,i,o=["INSERT","DELETE","WHERE"],a=Sr("http://www.w3.org/ns/pim/patch#"),l=CC(e,e,n,n,null,null,"",null),c={},u=function(y,H,T,V,J){return"Line "+(H+1)+" of <"+y+">: Bad syntax:\n   "+J+'\n   at: "'+T.slice(V,V+30)+'"'};r=0;var h=e.sym(n+"#query");for(c.query=h;;){if((s=l.skipSpace(t,r))<0)return c;if(";"===t[s]){if((r=l.skipSpace(t,s+1))<0)return c;s=r}var d=!1;for(i=0;i<o.length;i++){var p=o[i];if(t.slice(s,s+p.length)===p){if((r=l.skipSpace(t,s+p.length))<0)throw u(l._thisDoc,l.lines,t,s+p.length,"found EOF, needed {...} after "+p);if(("INSERT"===p||"DELETE"===p)&&"DATA"===t.slice(r,r+4)){if((s=l.skipSpace(t,r+4))<0)throw u(l._thisDoc,l.lines,t,r+4,"needed {...} after INSERT DATA "+p);r=s}var m=[];if((s=l.node(t,r,m))<0)throw u(l._thisDoc,l.lines,t,r,"bad syntax or EOF in {...} after "+p);c[p.toLowerCase()]=m[0],e.add(h,a(p.toLowerCase()),m[0]),d=!0,r=s}}if(!d&&"@prefix"===t.slice(s,s+7)){if((r=l.directive(t,s))<0)throw u(l._thisDoc,l.lines,t,r,"bad syntax or EOF after @prefix ");r=l.checkDot(t,r),d=!0}if(!d)throw u(l._thisDoc,l.lines,t,s,"Unknown syntax at start of statememt: '"+t.slice(s).slice(0,20)+"'")}})(t,e,n),l();else if(r===dn.i2)AV(t,e,n).then(l).catch(c);else{if(r!==dn._0&&r!==dn.BR)throw void 0===r?new Error("contentType is undefined"):new Error("Don't know how to parse "+r+" yet");var a=new DV({factory:yC});!function u(d,p){d&&s(d,e);try{a.parse(p,h)}catch(m){s(m,e)}}(null,t)}}catch(d){c(d)}function l(){s&&s(null,e)}function c(d){if(r!==dn.i2||r!==dn._0||r!==dn.BR){if(!s){let p=new Error(d+" while trying to parse <"+n+"> as "+r);throw p.cause=d,p}s(d,e)}}function h(d,p){p?e.add(p.subject,p.predicate,p.object,p.graph):s(d,e)}G4.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/sparql-update-single-match":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0}}(0,_t.A)(ir,"ns",{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"}),(0,_t.A)(ir,"nodeType",{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12});var HC=xe(8868),qee=xe.n(HC),k2=xe(79);const Jee={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},NV={rdf:dn.JG,owl:dn.JG,n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},FV=t=>({link:Sr("http://www.w3.org/2007/ont/link#",t),http:Sr("http://www.w3.org/2007/ont/http#",t),httph:Sr("http://www.w3.org/2007/ont/httph#",t),rdf:Sr("http://www.w3.org/1999/02/22-rdf-syntax-ns#",t),rdfs:Sr("http://www.w3.org/2000/01/rdf-schema#",t),dc:Sr("http://purl.org/dc/elements/1.1/",t),ldp:Sr("http://www.w3.org/ns/ldp#",t)}),pa=FV();class $c{constructor(e,n){(0,_t.A)(this,"response",void 0),(0,_t.A)(this,"dom",void 0),this.response=e,this.dom=n}}(0,_t.A)($c,"pattern",void 0);class MC extends $c{static toString(){return"RDFXMLHandler"}static register(e){e.mediatypes[dn.JG]={q:.9}}parse(e,n,r){let s=e.store;if(this.dom||(this.dom=Fo.h4(n)),"parsererror"===this.dom.documentElement.nodeName)return e.failFetch(r,"Badly formed XML in "+r.resource.value,"parse_error");let o=new ir(s);try{o.parse(this.dom,r.original.value,r.original)}catch(a){return e.failFetch(r,"Syntax error parsing RDF/XML! "+a,"parse_error")}return r.noMeta||s.add(r.original,pa.rdf("type"),pa.link("RDFDocument"),e.appNode),e.doneFetch(r,this.response)}}MC.pattern=new RegExp("application/rdf\\+xml");class cu extends $c{static toString(){return"XHTMLHandler"}static register(e){e.mediatypes[dn.H]={q:.8}}parse(e,n,r){let s,i;this.dom||(this.dom=Fo.h4(n));let o=e.store,a=this.dom.getElementsByTagName("title");a.length>0&&o.add(r.resource,pa.dc("title"),o.rdfFactory.literal(a[0].textContent),r.resource);let l=this.dom.getElementsByTagName("link");for(let u=l.length-1;u>=0;u--)s=l[u].getAttribute("rel"),i=!1,s||(s=l[u].getAttribute("rev"),i=!0),s&&e.linkData(r.original,s,l[u].getAttribute("href"),r.resource,i);let c=this.dom.getElementsByTagName("script");for(let u=0;u<c.length;u++){let h=c[u].getAttribute("type");Jee[h]&&(G4(c[u].textContent,o,r.original.value,h),G4(c[u].textContent,o,r.original.value,h))}if(r.noMeta||o.add(r.resource,pa.rdf("type"),pa.link("WebPage"),e.appNode),!r.noRDFa&&O4)try{O4(this.dom,o,r.original.value)}catch(u){return e.failFetch(r,"Error trying to parse "+r.resource+" as RDFa:\n"+u+":\n"+u.stack,"parse_error")}return e.doneFetch(r,this.response)}}cu.pattern=new RegExp("application/xhtml");class O2 extends $c{static toString(){return"XMLHandler"}static register(e){e.mediatypes["text/xml"]={q:.5},e.mediatypes["application/xml"]={q:.5}}static isElement(e){return e.nodeType===Node.ELEMENT_NODE}parse(e,n,r){let s=Fo.h4(n);for(let o=0;o<s.childNodes.length;o++){const a=s.childNodes[o];if(O2.isElement(a)){let l=a.namespaceURI;if(l&&l===l.rdf)return e.addStatus(r.req,"Has XML root element in the RDF namespace, so assume RDF/XML."),new MC(this.response,s).parse(e,n,r);break}}if(s.doctype&&"html"===s.doctype.name&&s.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&s.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/))return e.addStatus(r.req,"Has XHTML DOCTYPE. Switching to XHTML Handler.\n"),new cu(this.response,s).parse(e,n,r);let i=s.getElementsByTagName("html")[0];if(i){let o=i.getAttribute("xmlns");if(o&&o.match(/^http:\/\/www.w3.org\/1999\/xhtml/))return e.addStatus(r.req,"Has a default namespace for XHTML. Switching to XHTMLHandler.\n"),new cu(this.response,s).parse(e,n,r)}return e.failFetch(r,"Unsupported dialect of XML: not RDF or XHTML namespace, etc.\n"+n.slice(0,80),901)}}O2.pattern=new RegExp("(text|application)/(.*)xml");class PV extends $c{static toString(){return"HTMLHandler"}static register(e){e.mediatypes["text/html"]={q:.8}}parse(e,n,r){let s=e.store;if(GV(n))return e.addStatus(r.req,"Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.\n"),new cu(this.response).parse(e,n,r);if(function ete(t){const e=t.indexOf("<!DOCTYPE html"),n=t.indexOf(">");return!(-1===e||-1===n||e>n)&&-1!==t.substr(e,n-e).indexOf("XHTML")}(n))return e.addStatus(r.req,"Has XHTML DOCTYPE. Switching to XHTMLHandler.\n"),new cu(this.response).parse(e,n,r);if(function tte(t){return!!t.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/)}(n))return e.addStatus(r.req,"Has default namespace for XHTML, so switching to XHTMLHandler.\n"),new cu(this.response).parse(e,n,r);let i=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(n);return i&&s.add(r.resource,pa.dc("title"),s.rdfFactory.literal(i[1]),r.resource),s.add(r.resource,pa.rdf("type"),pa.link("WebPage"),e.appNode),e.addStatus(r.req,"non-XML HTML document, not parsed for data."),e.doneFetch(r,this.response)}}PV.pattern=new RegExp("text/html");let Qee=(()=>{class t extends $c{static toString(){return"JsonLdHandler"}static register(n){n.mediatypes["application/ld+json"]={q:.9}}parse(n,r,s,i){return(0,ei.A)(function*(){const o=n.store;try{return yield AV(r,o,s.original.value),n.store.add(s.original,pa.rdf("type"),pa.link("RDFDocument"),n.appNode),n.doneFetch(s,i)}catch(a){return n.failFetch(s,"Error trying to parse "+s.resource+" as JSON-LD:\n"+a,"parse_error",i)}})()}}return t.pattern=/application\/(ld\+json|activity\+json)/,t})();class kV extends $c{static toString(){return"TextHandler"}static register(e){e.mediatypes["text/plain"]={q:.5}}parse(e,n,r){return GV(n)?(e.addStatus(r.req,"Warning: "+r.resource+" has an XML declaration. We'll assume it's XML but its content-type wasn't XML.\n"),new O2(this.response).parse(e,n,r)):n.slice(0,500).match(/xmlns:/)?(e.addStatus(r.req,"May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.\n"),new O2(this.response).parse(e,n,r)):(e.addStatus(r.req,"Plain text document, no known RDF semantics."),e.doneFetch(r,this.response))}}kV.pattern=new RegExp("text/plain");class OV extends $c{static toString(){return"N3Handler"}static register(e){e.mediatypes["text/n3"]={},e.mediatypes["text/turtle"]={}}parse(e,n,r,s){let i=e.store,o=CC(i,i,r.original.value,r.original.value,null,null,"",null);try{o.loadBuf(n)}catch(a){return e.failFetch(r,"Error trying to parse "+r.resource+" as Notation3:\n"+a,"parse_error",s)}return e.addStatus(r.req,"N3 parsed: "+o.statementCount+" triples in "+o.lines+" lines."),e.store.add(r.original,pa.rdf("type"),pa.link("RDFDocument"),e.appNode),e.doneFetch(r,this.response)}}OV.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");const zC={RDFXMLHandler:MC,XHTMLHandler:cu,XMLHandler:O2,HTMLHandler:PV,TextHandler:kV,N3Handler:OV,JsonLdHandler:Qee};function GV(t){return!!t.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/)}class Ai{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,_t.A)(this,"store",void 0),(0,_t.A)(this,"timeout",void 0),(0,_t.A)(this,"_fetch",void 0),(0,_t.A)(this,"mediatypes",void 0),(0,_t.A)(this,"appNode",void 0),(0,_t.A)(this,"requested",void 0),(0,_t.A)(this,"timeouts",void 0),(0,_t.A)(this,"redirectedTo",void 0),(0,_t.A)(this,"fetchQueue",void 0),(0,_t.A)(this,"fetchCallbacks",void 0),(0,_t.A)(this,"nonexistent",void 0),(0,_t.A)(this,"lookedUp",void 0),(0,_t.A)(this,"handlers",void 0),(0,_t.A)(this,"ns",void 0),(0,_t.A)(this,"fireCallbacks",void 0),this.store=e||new ml,this.ns=FV(this.store.rdfFactory),this.timeout=n.timeout||3e4,this._fetch=n.fetch||typeof global<"u"&&(global.solidFetcher||global.solidFetch)||typeof window<"u"&&(window.solidFetcher||window.solidFetch)||qee(),!this._fetch)throw new Error("No _fetch function available for Fetcher");this.appNode=this.store.sym("chrome://TheCurrentSession"),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},Fo.Kw(this,["request","fail","refresh","retract","done"]),Object.keys(n.handlers||zC).map(r=>this.addHandler(zC[r]))}static crossSiteProxy(e){if(Ai.crossSiteProxyTemplate)return Ai.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e))}static offlineOverride(e){let n=e;var r;return typeof window<"u"&&window.panes&&(r=window.panes.UI)&&r.preferences&&r.preferences.get("offlineModeUsingLocalhost")&&"http://"===n.slice(0,7)&&"localhost/"!==n.slice(7,17)&&(n="http://localhost/"+n.slice(7),Bi.warn("Localhost kludge for offline use: actually getting <"+n+">")),n}static proxyIfNecessary(e){var n;if(typeof window<"u"&&window.panes&&(n=window.panes.UI)&&n.isExtension)return e;if(typeof $SolidTestEnvironment<"u"&&$SolidTestEnvironment.localSiteMap){let r=e.split("/").slice(2);const s=(o,a)=>{let l=a[o.shift()];return l?"string"==typeof l?l+o.join("/"):o?s(o,l):null:null},i=s(r,$SolidTestEnvironment.localSiteMap);if(i)return i}return Ai.crossSiteProxyTemplate&&typeof document<"u"&&document.location&&"https:"===(""+document.location).slice(0,6)&&"http:"===e.slice(0,5)?Ai.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(e)):e}static unsupportedProtocol(e){let n=lV(e);return"tel"===n||"mailto"===n||"urn"===n}static setCredentials(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0===n.credentials&&(n.credentials=void 0!==n.withCredentials?n.withCredentials?"include":"omit":"include")}load(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n=Object.assign({},n),e instanceof Array)return Promise.all(e.map(c=>this.load(c,Object.assign({},n))));let s=(0,k2.E)(e);s=s.split("#")[0],n=this.initFetchOptions(s,n);const i=this.appNode,o=this.store,a=o.statementsMatching(void 0,this.ns.link("requestedURI"),o.sym(s),i).map(c=>c.subject);for(const c of a){const u=o.any(c,this.ns.link("response"),null,i);if(null!=u){const h=o.statementsMatching(u,this.ns.link("outOfDate"),!0,i);o.remove(h),n.force=!0,n.clearPreviousData=!0}}const l=this.initFetchOptions(s,n);return this.pendingFetchPromise(s,l.baseURI,l)}pendingFetchPromise(e,n,r){var s=this;return(0,ei.A)(function*(){let i;return!r.force&&(yield s.fetchQueue[n])?i=s.fetchQueue[n]:(i=Promise.race([s.setRequestTimeout(e,r),s.fetchUri(e,r)]),s.fetchQueue[n]=i,s.cleanupFetchRequest(n,void 0,s.timeout)),i.then(o=>(e in s.timeouts&&(s.timeouts[e].forEach(clearTimeout),delete s.timeouts[e]),o))})()}cleanupFetchRequest(e,n,r){void 0!==n&&console.warn("_options is deprecated"),this.timeouts[e]=(this.timeouts[e]||[]).concat(setTimeout(()=>{this.isPending(e)||delete this.fetchQueue[e]},r))}initFetchOptions(e,n){let r=this.store;!n.method||"GET"===n.method.toUpperCase()||(n.force=!0),n.resource=r.rdfFactory.namedNode(e),n.baseURI=n.baseURI||e,n.original=r.rdfFactory.namedNode(n.baseURI),n.req=r.bnode(),n.headers=n.headers||{},n.contentType&&(n.headers["content-type"]=n.contentType),n.force&&(n.cache="no-cache");let i=this.acceptString();n.headers.accept=i;let o=Ai.offlineOverride(e);n.requestedURI=o,Ai.setCredentials(o,n);let a=Ai.proxyIfNecessary(o);return o!==a&&(n.proxyUsed=!0),n.actualProxyURI=a,n}fetchUri(e,n){if(!e)return Promise.reject(new Error("Cannot fetch an empty uri"));if(Ai.unsupportedProtocol(e))return this.failFetch(n,"fetcher: Unsupported protocol","unsupported_protocol");let r=this.getState(e);if(n.force)delete this.nonexistent[e];else{if("fetched"===r)return Promise.resolve(this.doneFetch(n,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if("failed"===r&&404===this.requested[e]){let i="Previously failed: "+this.requested[e],o={url:e,status:this.requested[e],statusText:i,responseText:i,headers:new HC.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(n,i,this.requested[e],o)}}this.fireCallbacks("request",[e]),this.requested[e]=!0,n.noMeta||this.saveRequestMetadata(e,n);let{actualProxyURI:s}=n;return this._fetch(s,n).then(i=>this.handleResponse(i,e,n),i=>{let o={url:s,status:999,statusText:(i.name||"network failure")+": "+(i.errno||i.code||i.type),responseText:i.message,headers:new HC.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.handleError(o,e,n)})}nowOrWhenFetched(e,n,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=(0,k2.E)(e);"function"==typeof n?r=n:typeof n>"u"||((0,vs.Y2)(n)?s.referringTerm=n:s=n),this.load(i,s).then(o=>{if(r)if(o)if(o.ok)r(!0,"OK",o);else{let a="HTTP error: Status "+o.status+" ("+o.statusText+")";o.responseText&&(a+=" "+o.responseText),r(!1,a,o)}else r(!1,"@@ nowOrWhenFetched:  no response object!")},function(o){var a=o.message||o.statusText;a="Failed to load  <"+i+"> "+a,o.response&&o.response.status&&(a+=" status: "+o.response.status),r(!1,a,o.response)})}addStatus(e,n){let r=new Date;n="["+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+"."+r.getMilliseconds()+"] "+n;let s=this.store;const i=s.the(e,this.ns.link("status"));(0,vs.P3)(i)?i.append(s.rdfFactory.literal(n)):Bi.warn("web.js: No list to add to: "+i+","+n)}failFetch(e,n,r,s){this.addStatus(e.req,n),e.noMeta||this.store.add(e.original,this.ns.link("error"),this.store.rdfFactory.literal(n));let i=(e.method||"GET").toUpperCase();("GET"===i||"HEAD"===i)&&(e.resource.equals(e.original),this.requested[jc(e.original.value)]=r,this.fireCallbacks("fail",[e.original.value,n]));var a=new Error("Fetcher: "+n);return a.status=r,a.statusText=n,a.response=s,Promise.reject(a)}linkData(e,n,r,s,i){if(!r)return;let a,o=this.store,l=o.rdfFactory.namedNode(Bo(r,e.value));if("alternate"===n||"seeAlso"===n||"meta"===n||"describedby"===n){if(l.value===e.value)return;a=this.ns.rdfs("seeAlso")}else a=o.rdfFactory.namedNode("type"===n?"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":Bo(encodeURIComponent(n),"http://www.iana.org/assignments/link-relations/"));i?o.add(l,a,e,s):o.add(e,a,l,s)}parseLinkHeader(e,n,r){if(!e)return;const i=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,o=e.match(/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g);if(null!=o)for(let a=0;a<o.length;a++){let l=o[a].split(">"),c=l[0].substring(1),h=l[1].match(i);if(null==h)return;for(let d=0;d<h.length;d++){let y=h[d].split("=")[1].replace(/["']/g,"");this.linkData(n,y,c,r)}}}doneFetch(e,n){return this.addStatus(e.req,"Done."),this.requested[e.original.value]="done",this.fireCallbacks("done",[e.original.value]),n.req=e.req,n}nowKnownAs(e,n){this.lookedUp[e.value]?this.lookedUp[n.value]||this.lookUpThing(n,e):this.lookedUp[n.value]&&(this.lookedUp[e.value]||this.lookUpThing(e,n))}putBack(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(0,k2.E)(e);let s=new ro.A(r).doc();return n.contentType=n["content-type"]||n["Content-Type"]||n.contentType||dn.sT,"application/ld+json"===n.contentType?new Promise((i,o)=>{D4(s,this.store,s.uri,n.contentType,(a,l)=>{a?o(a):(n.data=l,this.webOperation("PUT",e,n).then(c=>i(c)).catch(c=>o(c)))})}):(n.data=D4(s,this.store,s.value,n.contentType),this.webOperation("PUT",r,n))}webCopy(e,n,r){return this.webOperation("GET",e).then(s=>this.webOperation("PUT",n,{data:s.responseText,contentType:r}))}delete(e,n){return this.webOperation("DELETE",e,n).then(r=>(this.requested[e]=404,this.nonexistent[e]=!0,this.unload(this.store.rdfFactory.namedNode(e)),r))}createIfNotExists(e){var n=arguments,r=this;return(0,ei.A)(function*(){let s=n.length>1&&void 0!==n[1]?n[1]:dn.sT,i=n.length>2&&void 0!==n[2]?n[2]:"";const o=r;try{var a=yield o.load(e)}catch(l){if(404===l.response.status){try{a=yield o.webOperation("PUT",e.value,{data:i,contentType:s})}catch(c){throw c}return delete o.requested[e.value],a}throw l}return a})()}createContainer(e,n,r){let s={"content-type":dn.sT,link:this.ns.ldp("BasicContainer")+'; rel="type"'};n&&(s.slug=n);let i={headers:s};return r&&(i.body=r),this.webOperation("POST",e,i)}invalidateCache(e){const n=(0,k2.E)(e),r=this;r.fetchQueue&&r.fetchQueue[n]&&delete r.fetchQueue[n],r.requested[n]&&"done"!==r.requested[n]&&"failed"!==r.requested[n]&&404!==r.requested[n]?console.error(`Rdflib: fetcher: Destructive operation on <${r.requested[n]}> file being fetched! `+n):(delete r.requested[n],delete r.nonexistent[n])}webOperation(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(0,k2.E)(n);r.method=e,r.body=r.data||r.body,r.force=!0;const i=this;if(r.body&&!r.contentType)throw new Error("Web operation sending data must have a defined contentType.");return r.contentType&&(r.headers=r.headers||{},r.headers["content-type"]=r.contentType),Ai.setCredentials(s,r),new Promise(function(o,a){i._fetch(s,r).then(l=>{if(l.ok)("PUT"===e||"PATCH"===e||"POST"===e||"DELETE"===e)&&i.invalidateCache(s),l.text?l.text().then(c=>{l.responseText=c,o(l)}):o(l);else{let c="Web error: "+l.status;l.statusText&&(c+=" ("+l.statusText+")"),c+=" on "+e+" of <"+s+">",l.responseText&&(c+=": "+l.responseText);let u=new Error(c);u.response=l,a(u)}},l=>{a(new Error("Fetch error for "+e+" of <"+s+">:"+l))})})}lookUpThing(e,n){let r=this.store.uris(e);return r=r.map(s=>jc(s)),r.forEach(s=>{this.lookedUp[s]=!0}),this.load(r,{referringTerm:n})}getHeader(e,n){const r=this.store,s=e.value,i=r.each(void 0,this.ns.link("requestedURI"),r.rdfFactory.literal(s));for(let o=0;o<i.length;o++){let a=i[o];if(void 0!==a){let l=r.any(a,this.ns.link("response"));if(void 0!==l&&r.anyValue(l,this.ns.http("status"))&&r.anyValue(l,this.ns.http("status")).startsWith("2")){let c=r.each(l,this.ns.httph(n.toLowerCase()));return c.length?c.map(u=>u.value):[]}}}}saveRequestMetadata(e,n){let r=n.req,s=this.store,i=n.referringTerm;this.addStatus(n.req,"Accept: "+n.headers.accept),(0,vs.Y2)(i)&&s.add(s.rdfFactory.namedNode(e),this.ns.link("requestedBy"),i,this.appNode),n.original&&n.original.value!==e&&s.add(r,this.ns.link("orginalURI"),s.rdfFactory.literal(n.original.value),this.appNode);const o=new Date,a="["+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()+"] ";s.add(r,this.ns.rdfs("label"),s.rdfFactory.literal(a+" Request for "+e),this.appNode),s.add(r,this.ns.link("requestedURI"),s.rdfFactory.literal(e),this.appNode),s.add(r,this.ns.link("status"),s.collection(),this.appNode)}saveResponseMetadata(e,n){const r=this.store;let s=r.bnode();return r.add(n.req,this.ns.link("response"),s,this.appNode),r.add(s,this.ns.http("status"),r.rdfFactory.literal(e.status),this.appNode),r.add(s,this.ns.http("statusText"),r.rdfFactory.literal(e.statusText),this.appNode),e.headers.forEach((i,o)=>{r.add(s,this.ns.httph(o),this.store.rdfFactory.literal(i),this.appNode),"content-type"===o&&r.add(n.resource,this.ns.rdf("type"),r.rdfFactory.namedNode(Fo.tE(i).value),this.appNode)}),s}objectRefresh(e){let n=this.store.uris(e);if(typeof n<"u")for(let r=0;r<n.length;r++)this.refresh(this.store.rdfFactory.namedNode(jc(n[r])))}refresh(e,n){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(e,{force:!0,clearPreviousData:!0},n)}refreshIfExpired(e,n){let r=this.getHeader(e,"Expires");!r||new Date(r[0]).getTime()<=(new Date).getTime()?this.refresh(e,n):n(!0,"Not expired",{})}retract(e){this.store.removeMany(void 0,void 0,void 0,e),e.value&&delete this.requested[jc(e.value)],this.fireCallbacks("retract",arguments)}getState(e){return typeof this.requested[e]>"u"?"unrequested":!0===this.requested[e]?"requested":"done"===this.requested[e]?"fetched":"redirected"===this.requested[e]?this.getState(this.redirectedTo[e]):"failed"}isPending(e){return!0===this.requested[e]}unload(e){this.store.removeDocument(e),delete this.requested[e.value]}addHandler(e){this.handlers.push(e),e.register(this)}retryNoCredentials(e,n){n.retriedWithNoCredentials=!0,delete this.requested[e],delete this.fetchQueue[e];let r=Object.assign({},n,{credentials:"omit"});return this.addStatus(n.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(e,r)}isCrossSite(e){if(typeof document>"u"||!document.location)return!1;const n=oee,r=""+document.location;return(n(r)&&n(e)&&n(r))!==n(e)}handleError(e,n,r){if(this.isCrossSite(n)){if(r.credentials&&"include"===r.credentials&&!r.retriedWithNoCredentials)return this.retryNoCredentials(n,r);let i=Ai.crossSiteProxy(n);if(i&&!r.proxyUsed)return this.redirectToProxy(i,r)}var s;return e instanceof Error?s="Fetch error: "+e.message:(s=e.statusText,e.responseText&&(s+=` ${e.responseText}`)),this.failFetch(r,s,e.status||998,e)}addType(e,n,r,s){let i=n;if(s){var o=r.any(i,this.ns.link("requestedURI"));o&&o.value!==s&&r.add(r.rdfFactory.namedNode(s),this.ns.rdf("type"),e,this.appNode)}for(;;){const c=r.any(i,this.ns.link("requestedURI"));if(c&&c.value&&r.add(r.rdfFactory.namedNode(c.value),this.ns.rdf("type"),e,this.appNode),i=r.any(void 0,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#redirectedRequest"),i),!i)break;var a=r.any(i,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#response"));if(!a)break;var l=r.any(a,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/http#status"));if(!l||"301"!==l&&"302"!==l)break}}handleResponse(e,n,r){const s=this.store,i=e.headers,o=r.req,a=this.saveResponseMetadata(e,r),l=this.normalizedContentType(r,i)||"";let c=i.get("content-location");if(0===e.status)return this.handleError(e,n,r);if(e.status>=400)return 404===e.status&&(this.nonexistent[r.original.value]=!0,this.nonexistent[n]=!0),this.saveErrorResponse(e,a).then(()=>this.failFetch(r,r.resource+" "+e.statusText,e.status,e));var u=null,h=null;if(c&&(h=Bo(c,n))!==n&&(u=h),200===e.status){if(this.addType(this.ns.link("Document"),o,s,n),u&&this.addType(this.ns.link("Document"),o,s,u),r.clearPreviousData){const m=s.statementsMatching(void 0,void 0,void 0,r.resource).slice();for(let y=0;y<m.length;y++)s.removeStatement(m[y])}let p=l.includes("image/")||l.includes("application/pdf");l&&p&&(this.addType(s.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),o,s,n),u&&this.addType(s.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),o,s,u))}if(c){if(!r.force&&u&&"done"===this.requested[h])return this.doneFetch(r,e);this.requested[h]=!0}this.parseLinkHeader(i.get("link"),r.original,o);let d=this.handlerForContentType(l,e);return d?e.text().then(p=>(e.responseText=p,d.parse(this,p,r,e))):(this.addStatus(o,"Fetch over. No data handled."),this.doneFetch(r,e))}saveErrorResponse(e,n){let r=this.store;return e.text().then(s=>{s.length>10&&r.add(n,this.ns.http("content"),r.rdfFactory.literal(s),n)})}handlerForContentType(e,n){if(!e)return null;let r=this.handlers.find(s=>e.match(s.pattern));return r?new r(n):null}guessContentType(e){return NV[e.split(".").pop()]}normalizedContentType(e,n){if(e.forceContentType)return e.forceContentType;let r=n.get("content-type");if(!r||r.includes("application/octet-stream")){let i=this.guessContentType(e.resource.value);if(i)return i}let s=lV(e.resource.value);return!r&&["file","chrome"].includes(s)?"text/xml":r}redirectToProxy(e,n){this.addStatus(n.req,"BLOCKED -> Cross-site Proxy to <"+e+">"),n.proxyUsed=!0;const r=this.store,s=n.req;n.noMeta||(r.add(s,this.ns.link("redirectedTo"),r.rdfFactory.namedNode(e),s),this.addStatus(s,"redirected to new request")),this.requested[n.resource.value]="redirected",this.redirectedTo[n.resource.value]=e;let i=Object.assign({},n);return i.baseURI=n.resource.value,this.fetchUri(e,i).then(o=>(i.noMeta||r.add(s,this.ns.link("redirectedRequest"),i.req,this.appNode),o))}setRequestTimeout(e,n){return new Promise(r=>{this.timeouts[e]=(this.timeouts[e]||[]).concat(setTimeout(()=>{this.isPending(e)&&!n.retriedWithNoCredentials&&!n.proxyUsed&&r(this.failFetch(n,`Request to ${e} timed out`,"timeout"))},this.timeout))})}addFetchCallback(e,n){this.fetchCallbacks[e]?this.fetchCallbacks[e].push(n):this.fetchCallbacks[e]=[n]}acceptString(){let e="";for(let n in this.mediatypes){""!==e&&(e+=", "),e+=n;for(let r in this.mediatypes[n])e+=";"+r+"="+this.mediatypes[n][r]}return e}}(0,_t.A)(Ai,"HANDLERS",void 0),(0,_t.A)(Ai,"CONTENT_TYPE_BY_EXT",void 0),(0,_t.A)(Ai,"crossSiteProxyTemplate",void 0),Ai.HANDLERS=zC,Ai.CONTENT_TYPE_BY_EXT=NV;const W4={...yC,fetcher:(t,e)=>new Ai(t,e),graph(){return new ml(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)||{rdfFactory:yC})},lit(t,e,n){return this.literal(""+t,e||n)},st(t,e,n,r){return this.quad(t,e,n,r)}},WV={};for(const t in W4)"function"==typeof W4[t]&&(WV[t]=W4[t].bind(W4));const{graph:ZV,lit:VC,namedNode:C0}=WV;new p0;const y0="http://geonetwork-ui/";function Xc(t,e,n,r,s,i,o){function a(p){return p.language.toLowerCase().substring(0,2)}const l=t.each(e,n,r).filter(p=>p instanceof qs);if(!l.length)return[null,i];const c=l.find(p=>a(p)===o),u=l.find(p=>!p.language),h=c?.value??u?.value??"(value not found)",d=i??{};for(const p of l){const m=a(p);m===o||!m||(d[s]={...d[s],[m]:p.value})}return[h,d]}function jV(t,e,n,r,s,i){if(t.removeStatements(t.statementsMatching(e,n,null)),t.add(e,n,VC(r,i)),s)for(const o in s)t.add(e,n,VC(s[o],o))}function UV(t,e,n,r=y0){return new Promise(s=>G4(e,t,r,n,s))}function Z4(t,e=window.location.toString()){try{return new URL(t,e)}catch{return null}}function fa(t,e){return t.the(e,u0("primaryTopic"),null)||t.the(null,Co("type"),vr("Dataset"))}function lte(t,e){return t.the(e,js("identifier"),null)?.value}function cte(t,e,n,r){const s=fa(t,e),[i]=Xc(t,s,js("title"),null,"title",n,r);return i}function ute(t,e,n,r){const s=fa(t,e),[i]=Xc(t,s,js("description"),null,"abstract",n,r);return i}function $V(t,e){const n=e.object,r=t.the(n,h0("fn"),null)??t.the(n,h0("title"),null)??t.the(n,h0("organisation-name"),null);let s,i;if(r){const c=N9(r.value);s=c[0],i=c[1]}const o=t.the(n,h0("role"),null),a=t.the(n,h0("hasEmail"),null),l=a?a.value.replace(/^mailto:/,""):"missing@missing.com";return{role:o?.value??"point_of_contact",email:l,...s&&{firstName:s},...i&&{lastName:i}}}function hte(t,e){return t.statementsMatching(e,vr("contactPoint"),null).map(r=>$V(t,r))}function dte(t,e){const n=fa(t,e);return t.statementsMatching(n,vr("contactPoint"),null).map(s=>$V(t,s))}function pte(t,e){const n=fa(t,e),r=t.the(n,vr("landingPage"),null);return null!==r?Z4(r.value):void 0}function wte(t,e,n,r){const s=fa(t,e);return t.statementsMatching(s,vr("distribution"),null).map(o=>function vte(t,e,n){if(t.holds(e,vr("accessService"),null)){const r=t.the(e,vr("accessService"),null);if(t.the(r,js("conformsTo"),null))return function mte(t,e,n){const r=t.the(e,vr("accessService"),null),s=t.the(r,js("conformsTo"),null),i=t.the(e,vr("accessURL"),null),o={},[a]=Xc(t,e,js("description"),null,"description",o,n),[l]=Xc(t,e,js("title"),null,"name",o,n);return{url:Z4(i?.value),type:"service",accessServiceProtocol:i9(s?.value),...null!==l&&{name:l},...null!==a&&{description:a},translations:o}}(t,e,n)}return t.holds(e,vr("downloadURL"),null)?function gte(t,e,n){const r=t.the(e,vr("downloadURL"),null),s={},[i]=Xc(t,e,js("description"),null,"description",s,n),[o]=Xc(t,e,js("title"),null,"name",s,n);return{url:Z4(r?.value),type:"download",...null!==o&&{name:o},...null!==i&&{description:i},translations:s}}(t,e,n):function fte(t,e,n){const r=t.the(e,vr("accessURL"),null),s={},[i]=Xc(t,e,js("description"),null,"description",s,n),[o]=Xc(t,e,js("title"),null,"name",s,n);return{url:Z4(r?.value),type:"link",...null!==o&&{name:o},...null!==i&&{description:i},translations:s}}(t,e,n)}(t,o.object,r))}function Cte(t,e){const n=fa(t,e);return t.statementsMatching(n,js("spatial"),null).map(s=>{const i=t.the(s.object,see("geometry"),null);return i?{geometry:JSON.parse(i.value)}:{description:s.object.value}}).filter(s=>!!s)}function yte(t,e){const n=fa(t,e);return t.statementsMatching(n,vr("keyword"),null).map(s=>({label:s.object.value,type:"theme"}))}function Ite(t,e){const n=fa(t,e);return t.statementsMatching(n,vr("theme"),null).map(s=>t.the(s.object,ree("prefLabel"),null)?.value??s.object.value)}function Ate(t,e){const n=t.the(e,js("issued"),null)?.value;return n?new Date(n):null}function bte(t,e){const n=t.the(e,js("modified"),null)?.value;return n?new Date(n):new Date}function _te(t,e){const n=fa(t,e),r=t.the(n,js("issued"),null)?.value;return r?new Date(r):null}function xte(t,e){const n=fa(t,e),r=t.the(n,js("modified"),null)?.value;return r?new Date(r):null}function Ste(t){const e=t.statementsMatching(null,js("publisher"),null);if(!e.length)return null;const n=e[0].object,r=t.the(n,u0("name"),null);return{name:r?r.value:n.value}}function Hte(t,e){const n=fa(t,e);return t.statementsMatching(n,vr("distribution"),null).map(s=>t.the(s.object,js("license"),null)).filter(s=>!!s).map(s=>function ote(t){const e=/pddl|public domain dedication and licence/i.test(t),n=/odbl|open database license/i.test(t),r=/odc-by|opendatacommons.org\/licenses\/by/i.test(t),s=/cc-by-sa|creative.*commons.*(by-sa|attribution.*share-alike)/i.test(t),i=/cc-by|cc by|creative.*commons.*(by|attribution)/i.test(t),o=/cc.?0|creative.*commons.*(zero|0)/i.test(t),a=/etalab/i.test(t)&&/v2|2\.0/i.test(t),l=/etalab|open.?licence|licence.?ouverte/i.test(t);if(e)return{text:"Open Data Commons PDDL",url:new URL("https://opendatacommons.org/licenses/pddl/")};if(n)return{text:"Open Data Commons ODbL",url:new URL("https://opendatacommons.org/licenses/odbl/")};if(r)return{text:"Open Data Commons ODC-By",url:new URL("https://opendatacommons.org/licenses/by/")};if(s)return{text:"Creative Commons CC-BY-SA",url:new URL("https://creativecommons.org/licenses/by-sa/4.0/legalcode")};if(i)return{text:"Creative Commons CC-BY",url:new URL("https://creativecommons.org/licenses/by/4.0/legalcode")};if(o)return{text:"Creative Commons CC-0",url:new URL("https://creativecommons.org/publicdomain/zero/1.0/legalcode")};if(a)return{text:"Open Licence v2.0 (Etalab)",url:new URL("https://www.etalab.gouv.fr/wp-content/uploads/2017/04/ETALAB-Licence-Ouverte-v2.0.pdf")};if(l)return{text:"Open Licence (Etalab)",url:new URL("https://www.etalab.gouv.fr/wp-content/uploads/2014/05/Licence_Ouverte.pdf")};const c=/^https?:\/\//.test(t)?new URL(t):void 0;return{text:t,...c&&{url:c}}}(s.value)).filter((s,i,o)=>o.findIndex(a=>a.url?.toString()===s.url?.toString()&&a.text===s.text)===i)}function Mte(t,e){const n=fa(t,e),r=function ate(t,e){return t.the(null,vr("record"),e)||t.the(null,Co("type"),vr("Catalog"))}(t,e);let s=t.statementsMatching(e,js("language"),null);if(!s.length&&n&&(s=t.statementsMatching(n,js("language"),null)),!s.length&&r&&(s=t.statementsMatching(r,js("language"),null)),!s.length)return null;const o=s[0].object.value.split("/").pop().toLowerCase();return _4(o)??o}function XV(t,e,n){let r=e.the(null,Co("type"),vr("Dataset"));r||(r=C0(`${y0}dataset/${t.uniqueIdentifier}`),e.add(r,Co("type"),vr("Dataset")),e.add(n,u0("primaryTopic"),r));const s=function zte(t,e){if(t.holds(null,Co("type"),vr("Catalog")))return t.the(null,Co("type"),vr("Catalog"));const r=t.add(C0(`${y0}catalog`),Co("type"),vr("Catalog")).subject;return t.add(r,vr("record"),e),r}(e,n);return e.holds(s,vr("dataset"),r)||e.add(s,vr("dataset"),r),r}function Vte(t,e,n){!function ite(t,e,n,r){t.removeStatements(t.statementsMatching(e,n,null)),t.add(e,n,VC(r))}(e,n,js("identifier"),t.uniqueIdentifier)}function Ete(t,e,n){jV(e,XV(t,e,n),js("title"),t.title,t.translations?.title,t.defaultLanguage)}function Tte(t,e,n){jV(e,XV(t,e,n),js("description"),t.abstract,t.translations?.abstract,t.defaultLanguage)}function EC(t,e){for(const n in Yd)if(e.startsWith(Yd[n]))return[n,e.replace(Yd[n],"")];for(const n in t.namespaces)if(e.startsWith(t.namespaces[n]))return[n,e.replace(t.namespaces[n],"")];return[null,e]}function YV(t,e){if(e instanceof qs)return new yi.XmlText(e.value);const n=t.the(e,Co("type"));if(!n)return null;const s=t.statementsMatching(e,null,null).filter(l=>l.predicate.value!==Co("type").value).map(l=>{if(l.object.toString()===l.subject.toString())return null;if(l.predicate.value===u0("primaryTopic").value||l.predicate.value===u0("topic").value||l.predicate.value===vr("servesDataset").value){const[p,m]=EC(t,l.predicate.value);return new yi.XmlElement(`${p}:${m}`,{"rdf:resource":l.object.value})}const[c,u]=EC(t,l.predicate.value),h=YV(t,l.object);if(!h)return new yi.XmlElement(`${c}:${u}`,{"rdf:resource":l.object.value},[]);const d=new yi.XmlElement(`${c}:${u}`,{},[h]);return l.object instanceof qs&&l.object.language&&(d.attributes["xml:lang"]=l.object.language),d}).filter(l=>!!l),[i,o]=EC(t,n.value);return new yi.XmlElement(`${i}:${o}`,e instanceof Ui?{}:{"rdf:about":e.value},s)}class j4 extends BM{constructor(e="application/rdf+xml",n=new DM){super(n),this.contentType=e,this.readers={uniqueIdentifier:lte,title:cte,abstract:ute,contacts:hte,contactsForResource:dte,landingPage:pte,onlineResources:wte,spatialExtents:Cte,keywords:yte,topics:Ite,resourceIdentifiers:()=>{},recordUpdated:bte,recordCreated:Ate,resourceUpdated:xte,resourceCreated:_te,ownerOrganization:Ste,licenses:Hte,defaultLanguage:Mte,otherLanguages:()=>[],kind:()=>"dataset",recordPublished:()=>{},resourcePublished:()=>{},reuseType:()=>{},legalConstraints:()=>[],securityConstraints:()=>[],otherConstraints:()=>[],status:()=>"completed",updateFrequency:()=>"unknown",overviews:()=>[],lineage:()=>"",temporalExtents:()=>[],spatialRepresentation:()=>{},extras:()=>{},translations:()=>{}},this.writers={uniqueIdentifier:Vte,title:Ete,abstract:Tte,kind:()=>{},ownerOrganization:()=>{},recordUpdated:()=>{},recordCreated:()=>{},recordPublished:()=>{},resourceIdentifiers:()=>{},resourceUpdated:()=>{},resourceCreated:()=>{},resourcePublished:()=>{},reuseType:()=>{},contacts:()=>{},contactsForResource:()=>{},keywords:()=>{},topics:()=>{},licenses:()=>{},legalConstraints:()=>{},securityConstraints:()=>{},otherConstraints:()=>{},status:()=>{},updateFrequency:()=>{},spatialRepresentation:()=>{},overviews:()=>{},lineage:()=>{},onlineResources:()=>{},temporalExtents:()=>{},spatialExtents:()=>{},extras:()=>{},landingPage:()=>{},defaultLanguage:()=>{},otherLanguages:()=>{},translations:()=>{}}}readRecord(e){var n=this;return(0,ei.A)(function*(){const r=ZV();yield UV(r,e,n.contentType);const s=r.the(null,null,vr("CatalogRecord")),i={},o=n.readers.defaultLanguage(r,s,i,null),a=n.readers.uniqueIdentifier(r,s,i,o),l=n.readers.kind(r,s,i,o),c=n.readers.ownerOrganization(r,s,i,o),u=n.readers.title(r,s,i,o),h=n.readers.abstract(r,s,i,o),d=n.readers.contacts(r,s,i,o),p=n.readers.contactsForResource(r,s,i,o),m=n.readers.recordUpdated(r,s,i,o),y=n.readers.recordCreated(r,s,i,o),H=n.readers.recordPublished(r,s,i,o),T=n.readers.resourceCreated(r,s,i,o),V=n.readers.resourceUpdated(r,s,i,o),J=n.readers.resourcePublished(r,s,i,o),ie=n.readers.keywords(r,s,i,o),D=n.readers.topics(r,s,i,o),re=n.readers.legalConstraints(r,s,i,o),j=n.readers.otherConstraints(r,s,i,o),ue=n.readers.securityConstraints(r,s,i,o),Me=n.readers.licenses(r,s,i,o),Ce=n.readers.overviews(r,s,i,o),ze=n.readers.landingPage(r,s,i,o),Ae=n.readers.otherLanguages(r,s,i,o);if("dataset"===l){const dt=n.readers.status(r,s,i,o),ft=n.readers.spatialRepresentation(r,s,i,o),$e=n.readers.spatialExtents(r,s,i,o),Xt=n.readers.temporalExtents(r,s,i,o);return{uniqueIdentifier:a,kind:l,defaultLanguage:o,otherLanguages:Ae,...y&&{recordCreated:y},...H&&{recordPublished:H},recordUpdated:m,...T&&{resourceCreated:T},...V&&{resourceUpdated:V},...J&&{resourcePublished:J},status:dt,title:u,abstract:h,ownerOrganization:c,contacts:d,contactsForResource:p,keywords:ie,topics:D,licenses:Me,legalConstraints:re,securityConstraints:ue,otherConstraints:j,lineage:n.readers.lineage(r,s,i,o),...ft&&{spatialRepresentation:ft},overviews:Ce,spatialExtents:$e,temporalExtents:Xt,onlineResources:n.readers.onlineResources(r,s,i,o),updateFrequency:n.readers.updateFrequency(r,s,i,o),...ze&&{landingPage:ze},translations:i}}return{uniqueIdentifier:a,kind:l,defaultLanguage:o,otherLanguages:Ae,...y&&{recordCreated:y},...H&&{recordPublished:H},recordUpdated:m,...T&&{resourceCreated:T},...V&&{resourceUpdated:V},...J&&{resourcePublished:J},title:u,abstract:h,ownerOrganization:c,contacts:d,contactsForResource:p,keywords:ie,topics:D,licenses:Me,legalConstraints:re,securityConstraints:ue,otherConstraints:j,overviews:Ce,onlineResources:n.readers.onlineResources(r,s,i,o),...ze&&{landingPage:ze},translations:i}})()}writeRecord(e,n){var r=this;return(0,ei.A)(function*(){const s=ZV();let i;if(n){const a=yield r.readRecord(n);let l;yield UV(s,n,r.contentType,vr("CatalogRecord").value),i=c=>null===a||!r4(e[c],a[c])||l&&NM(c),l=i("otherLanguages")}else i=()=>!0;let o=s.the(null,Co("type"),vr("CatalogRecord"));return o||(o=s.add(C0(`${y0}record/${e.uniqueIdentifier}`),Co("type"),vr("CatalogRecord")).subject),i("uniqueIdentifier")&&r.writers.uniqueIdentifier(e,s,o),i("kind")&&r.writers.kind(e,s,o),i("defaultLanguage")&&r.writers.defaultLanguage(e,s,o),i("contacts")&&r.writers.contacts(e,s,o),i("ownerOrganization")&&r.writers.ownerOrganization(e,s,o),i("recordUpdated")&&r.writers.recordUpdated(e,s,o),i("recordCreated")&&r.writers.recordCreated(e,s,o),i("recordPublished")&&r.writers.recordPublished(e,s,o),i("title")&&r.writers.title(e,s,o),i("abstract")&&r.writers.abstract(e,s,o),i("resourceCreated")&&r.writers.resourceCreated(e,s,o),i("resourcePublished")&&r.writers.resourcePublished(e,s,o),i("resourceUpdated")&&r.writers.resourceUpdated(e,s,o),i("contactsForResource")&&r.writers.contactsForResource(e,s,o),i("keywords")&&r.writers.keywords(e,s,o),i("topics")&&r.writers.topics(e,s,o),i("legalConstraints")&&r.writers.legalConstraints(e,s,o),i("securityConstraints")&&r.writers.securityConstraints(e,s,o),i("licenses")&&r.writers.licenses(e,s,o),i("otherConstraints")&&r.writers.otherConstraints(e,s,o),i("onlineResources")&&r.writers.onlineResources(e,s,o),"dataset"===e.kind&&(i("status")&&r.writers.status(e,s,o),i("updateFrequency")&&r.writers.updateFrequency(e,s,o),i("spatialRepresentation")&&r.writers.spatialRepresentation(e,s,o),i("overviews")&&r.writers.overviews(e,s,o),i("temporalExtents")&&r.writers.temporalExtents(e,s,o),i("lineage")&&r.writers.lineage(e,s,o)),i("otherLanguages")&&r.writers.otherLanguages(e,s,o),r.contentType.includes("xml")?function Lte(t){let e=t.statementsMatching(null,Co("type"),vr("Catalog"))[0]?.subject;if(!e){const r=t.the(null,Co("type"),vr("CatalogRecord")),s=t.the(null,Co("type"),vr("Dataset"));e=t.add(C0(`${y0}catalog`),Co("type"),vr("Catalog")).subject,t.add(e,vr("record"),r),t.add(e,vr("dataset"),s)}const n=new yi.XmlElement("rdf:RDF",{},[YV(t,e)]);for(const r in t.namespaces)n.attributes[`xmlns:${r}`]=t.namespaces[r];return Xd(r9(n))}(s):s.serialize(void 0,r.contentType,null,{})})()}}function KV(t){if(t.indexOf("mdb:MD_Metadata")>0)return new aC;if(t.indexOf("gmd:MD_Metadata")>0)return new J9;if(/@prefix\s*[a-z]+\s*:\s*<http:\/\/www\.w3\.org\/ns\/dcat#>\s*\./.test(t))return new j4("text/turtle");if(/xmlns:[a-z]+="http:\/\/www\.w3\.org\/ns\/dcat#"/.test(t))return new j4("application/rdf+xml");if(/"[a-zA-Z]+"\s*:\s*"http:\/\/www\.w3\.org\/ns\/dcat#/.test(t))return new j4("application/ld+json");throw new Error(`No suitable converter found for the following document:\n${t.substring(0,400)}...`)}function Yc(t){return this instanceof Yc?(this.v=t,this):new Yc(t)}function eE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function DC(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){!function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}(a,l,(o=t[i](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const tE=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function nE(t){return Jt(t?.then)}function rE(t){return Jt(t[Fs])}function sE(t){return Symbol.asyncIterator&&Jt(t?.[Symbol.asyncIterator])}function iE(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const oE=function one(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function aE(t){return Jt(t?.[oE])}function lE(t){return function QV(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=n.apply(t,e||[]),i=[];return s=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(p){return function(m){return Promise.resolve(m).then(p,h)}}),s[Symbol.asyncIterator]=function(){return this},s;function a(p,m){r[p]&&(s[p]=function(y){return new Promise(function(H,T){i.push([p,y,H,T])>1||l(p,y)})},m&&(s[p]=m(s[p])))}function l(p,m){try{!function c(p){p.value instanceof Yc?Promise.resolve(p.value.v).then(u,h):d(i[0][2],p)}(r[p](m))}catch(y){d(i[0][3],y)}}function u(p){l("next",p)}function h(p){l("throw",p)}function d(p,m){p(m),i.shift(),i.length&&l(i[0][0],i[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:s}=yield Yc(n.read());if(s)return yield Yc(void 0);yield yield Yc(r)}}finally{n.releaseLock()}})}function cE(t){return Jt(t?.getReader)}function Cl(t){if(t instanceof Br)return t;if(null!=t){if(rE(t))return function ane(t){return new Br(e=>{const n=t[Fs]();if(Jt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(tE(t))return function lne(t){return new Br(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(nE(t))return function cne(t){return new Br(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,x)})}(t);if(sE(t))return uE(t);if(aE(t))return function une(t){return new Br(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(cE(t))return function hne(t){return uE(lE(t))}(t)}throw iE(t)}function uE(t){return new Br(e=>{(function dne(t,e){var n,r,s,i;return function qV(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):function s(i){return i instanceof n?i:new n(function(o){o(i)})}(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=eE(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){s={error:o}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(s)throw s.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Kc(t,e,n,r=0,s=!1){const i=e.schedule(function(){n(),s?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!s)return i}function U4(t,e,n=1/0){return Jt(e)?U4((r,s)=>jo((i,o)=>e(r,i,s,o))(Cl(t(r,s))),n):("number"==typeof e&&(n=e),Sa((r,s)=>function pne(t,e,n,r,s,i,o,a){const l=[];let c=0,u=0,h=!1;const d=()=>{h&&!l.length&&!c&&e.complete()},p=y=>c<r?m(y):l.push(y),m=y=>{i&&e.next(y),c++;let H=!1;Cl(n(y,u++)).subscribe(Ha(e,T=>{s?.(T),i?p(T):e.next(T)},()=>{H=!0},void 0,()=>{if(H)try{for(c--;l.length&&c<r;){const T=l.shift();o?Kc(e,o,()=>m(T)):m(T)}d()}catch(T){e.error(T)}}))};return t.subscribe(Ha(e,p,()=>{h=!0,d()})),()=>{a?.()}}(r,s,t,n)))}function hE(t,e){return Jt(e)?U4(t,e,1):U4(t,1)}function dE(t){return Sa((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function NC(t,e){return Sa((n,r)=>{let s=null,i=0,o=!1;const a=()=>o&&!s&&r.complete();n.subscribe(Ha(r,l=>{s?.unsubscribe();let c=0;const u=i++;Cl(t(l,u)).subscribe(s=Ha(r,h=>r.next(e?e(l,h,u,c++):h),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function FC(t){return t[t.length-1]}function pE(t){return function gne(t){return t&&Jt(t.schedule)}(FC(t))?t.pop():void 0}function fE(t,e=0){return Sa((n,r)=>{n.subscribe(Ha(r,s=>Kc(r,t,()=>r.next(s),e),()=>Kc(r,t,()=>r.complete(),e),s=>Kc(r,t,()=>r.error(s),e)))})}function gE(t,e=0){return Sa((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function mE(t,e){if(!t)throw new Error("Iterable cannot be null");return new Br(n=>{Kc(n,e,()=>{const r=t[Symbol.asyncIterator]();Kc(n,e,()=>{r.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function PC(t,e){return e?function Ane(t,e){if(null!=t){if(rE(t))return function vne(t,e){return Cl(t).pipe(gE(e),fE(e))}(t,e);if(tE(t))return function Cne(t,e){return new Br(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(nE(t))return function wne(t,e){return Cl(t).pipe(gE(e),fE(e))}(t,e);if(sE(t))return mE(t,e);if(aE(t))return function yne(t,e){return new Br(n=>{let r;return Kc(n,e,()=>{r=t[oE](),Kc(n,e,()=>{let s,i;try{({value:s,done:i}=r.next())}catch(o){return void n.error(o)}i?n.complete():n.next(s)},0,!0)}),()=>Jt(r?.return)&&r.return()})}(t,e);if(cE(t))return function Ine(t,e){return mE(lE(t),e)}(t,e)}throw iE(t)}(t,e):Cl(t)}function G2(...t){return PC(t,pE(t))}class $4{}class X4{}class Xn{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const s=n.slice(0,r),i=n.slice(r+1).trim();this.addHeaderEntry(s,i)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Xn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Xn;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Xn?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const s=("a"===e.op?this.headers.get(n):void 0)||[];s.push(...r),this.headers.set(n,s);break;case"d":const i=e.value;if(i){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===i.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}addHeaderEntry(e,n){const r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(i=>i.toString()),s=e.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(e,s)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class bne{encodeKey(e){return vE(e)}encodeValue(e){return vE(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const xne=/%(\d[a-f0-9])/gi,Sne={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function vE(t){return encodeURIComponent(t).replace(xne,(e,n)=>Sne[n]??e)}function Y4(t){return`${t}`}class He{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new bne,e.fromString){if(e.fromObject)throw new Te(2805,!1);this.map=function _ne(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(s=>{const i=s.indexOf("="),[o,a]=-1==i?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,i)),e.decodeValue(s.slice(i+1))],l=n.get(o)||[];l.push(a),n.set(o,l)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],s=Array.isArray(r)?r.map(Y4):[Y4(r)];this.map.set(n,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:s,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new He({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(Y4(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(Y4(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Hne{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function wE(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function CE(t){return typeof Blob<"u"&&t instanceof Blob}function yE(t){return typeof FormData<"u"&&t instanceof FormData}const I0="Content-Type",kC="X-Request-URL",IE="text/plain",AE="application/json",bE=`${AE}, ${IE}, */*`;class A0{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,s){let i;if(this.url=n,this.method=e.toUpperCase(),function Mne(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,i=s):i=r,i){if(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),i.priority&&(this.priority=i.priority),i.cache&&(this.cache=i.cache),i.credentials&&(this.credentials=i.credentials),"number"==typeof i.timeout){if(i.timeout<1||!Number.isInteger(i.timeout))throw new Te(2822,"");this.timeout=i.timeout}i.mode&&(this.mode=i.mode),i.redirect&&(this.redirect=i.redirect),i.integrity&&(this.integrity=i.integrity),i.referrer&&(this.referrer=i.referrer),this.transferCache=i.transferCache}if(this.headers??=new Xn,this.context??=new Hne,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new He,this.urlWithParams=n}serializeBody(){return null===this.body?null:"string"==typeof this.body||wE(this.body)||CE(this.body)||yE(this.body)||function zne(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof He?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||yE(this.body)?null:CE(this.body)?this.body.type||null:wE(this.body)?null:"string"==typeof this.body?IE:this.body instanceof He?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?AE:null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,i=e.keepalive??this.keepalive,o=e.priority||this.priority,a=e.cache||this.cache,l=e.mode||this.mode,c=e.redirect||this.redirect,u=e.credentials||this.credentials,h=e.referrer||this.referrer,d=e.integrity||this.integrity,p=e.transferCache??this.transferCache,m=e.timeout??this.timeout,y=void 0!==e.body?e.body:this.body,H=e.withCredentials??this.withCredentials,T=e.reportProgress??this.reportProgress;let V=e.headers||this.headers,J=e.params||this.params;const ie=e.context??this.context;return void 0!==e.setHeaders&&(V=Object.keys(e.setHeaders).reduce((D,re)=>D.set(re,e.setHeaders[re]),V)),e.setParams&&(J=Object.keys(e.setParams).reduce((D,re)=>D.set(re,e.setParams[re]),J)),new A0(n,r,y,{params:J,headers:V,context:ie,reportProgress:T,responseType:s,withCredentials:H,transferCache:p,keepalive:i,cache:a,priority:o,timeout:m,mode:l,redirect:c,credentials:u,referrer:h,integrity:d})}}var qc=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(qc||{});class OC{headers;status;statusText;url;ok;type;redirected;constructor(e,n=200,r="OK"){this.headers=e.headers||new Xn,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}}class q4 extends OC{constructor(e={}){super(e)}type=qc.ResponseHeader;clone(e={}){return new q4({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class b0 extends OC{body;constructor(e={}){super(e),this.body=void 0!==e.body?e.body:null}type=qc.Response;clone(e={}){return new b0({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}}class uu extends OC{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function GC(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer}}let Ar=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,s={}){let i;if(n instanceof A0)i=n;else{let l,c;l=s.headers instanceof Xn?s.headers:new Xn(s.headers),s.params&&(c=s.params instanceof He?s.params:new He({fromObject:s.params})),i=new A0(n,r,void 0!==s.body?s.body:null,{headers:l,context:s.context,params:c,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache,keepalive:s.keepalive,priority:s.priority,cache:s.cache,mode:s.mode,redirect:s.redirect,credentials:s.credentials,referrer:s.referrer,integrity:s.integrity,timeout:s.timeout})}const o=G2(i).pipe(hE(l=>this.handler.handle(l)));if(n instanceof A0||"events"===s.observe)return o;const a=o.pipe(function fne(t,e){return Sa((n,r)=>{let s=0;n.subscribe(Ha(r,i=>t.call(e,i,s++)&&r.next(i)))})}(l=>l instanceof b0));switch(s.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(jo(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Te(2806,!1);return l.body}));case"blob":return a.pipe(jo(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Te(2807,!1);return l.body}));case"text":return a.pipe(jo(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Te(2808,!1);return l.body}));default:return a.pipe(jo(l=>l.body))}case"response":return a;default:throw new Te(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new He).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,s={}){return this.request("PATCH",n,GC(s,r))}post(n,r,s={}){return this.request("POST",n,GC(s,r))}put(n,r,s={}){return this.request("PUT",n,GC(s,r))}static \u0275fac=function(r){return new(r||t)(mn($4))};static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();const SE=new at("");function HE(t,e){return e(t)}function Dne(t,e){return(n,r)=>e.intercept(n,{handle:s=>t(s,r)})}const ME=new at(""),_0=new at(""),Nne=new at(""),zE=new at("",{providedIn:"root",factory:()=>!0});function Fne(){let t=null;return(e,n)=>{null===t&&(t=(ae(ME,{optional:!0})??[]).reduceRight(Dne,HE));const r=ae(Fh);if(ae(zE)){const i=r.add();return t(e,n).pipe(dE(i))}return t(e,n)}}let VE=(()=>{class t extends $4{backend;injector;chain=null;pendingTasks=ae(Fh);contributeToStability=ae(zE);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(_0),...this.injector.get(Nne,[])]));this.chain=r.reduceRight((s,i)=>function Bne(t,e,n){return(r,s)=>g1(n,()=>e(r,i=>t(i,s)))}(s,i,this.injector),HE)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(n,s=>this.backend.handle(s)).pipe(dE(r))}return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(mn(X4),mn(Ji))};static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();const Gne=/^\)\]\}',?\n/,Wne=RegExp(`^${kC}:`,"m");let TE=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Te(-2800,!1);const r=this.xhrFactory;return G2(null).pipe(NC(()=>new Br(i=>{const o=r.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((H,T)=>o.setRequestHeader(H,T.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept",bE),!n.headers.has(I0)){const H=n.detectContentTypeHeader();null!==H&&o.setRequestHeader(I0,H)}if(n.timeout&&(o.timeout=n.timeout),n.responseType){const H=n.responseType.toLowerCase();o.responseType="json"!==H?H:"text"}const a=n.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const H=o.statusText||"OK",T=new Xn(o.getAllResponseHeaders()),V=function Zne(t){return"responseURL"in t&&t.responseURL?t.responseURL:Wne.test(t.getAllResponseHeaders())?t.getResponseHeader(kC):null}(o)||n.url;return l=new q4({headers:T,status:o.status,statusText:H,url:V}),l},u=()=>{let{headers:H,status:T,statusText:V,url:J}=c(),ie=null;204!==T&&(ie=typeof o.response>"u"?o.responseText:o.response),0===T&&(T=ie?200:0);let D=T>=200&&T<300;if("json"===n.responseType&&"string"==typeof ie){const re=ie;ie=ie.replace(Gne,"");try{ie=""!==ie?JSON.parse(ie):null}catch(j){ie=re,D&&(D=!1,ie={error:j,text:ie})}}D?(i.next(new b0({body:ie,headers:H,status:T,statusText:V,url:J||void 0})),i.complete()):i.error(new uu({error:ie,headers:H,status:T,statusText:V,url:J||void 0}))},h=H=>{const{url:T}=c(),V=new uu({error:H,status:o.status||0,statusText:o.statusText||"Unknown Error",url:T||void 0});i.error(V)};let d=h;n.timeout&&(d=H=>{const{url:T}=c(),V=new uu({error:new DOMException("Request timed out","TimeoutError"),status:o.status||0,statusText:o.statusText||"Request timeout",url:T||void 0});i.error(V)});let p=!1;const m=H=>{p||(i.next(c()),p=!0);let T={type:qc.DownloadProgress,loaded:H.loaded};H.lengthComputable&&(T.total=H.total),"text"===n.responseType&&o.responseText&&(T.partialText=o.responseText),i.next(T)},y=H=>{let T={type:qc.UploadProgress,loaded:H.loaded};H.lengthComputable&&(T.total=H.total),i.next(T)};return o.addEventListener("load",u),o.addEventListener("error",h),o.addEventListener("timeout",d),o.addEventListener("abort",h),n.reportProgress&&(o.addEventListener("progress",m),null!==a&&o.upload&&o.upload.addEventListener("progress",y)),o.send(a),i.next({type:qc.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",u),o.removeEventListener("timeout",d),n.reportProgress&&(o.removeEventListener("progress",m),null!==a&&o.upload&&o.upload.removeEventListener("progress",y)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||t)(mn(Z3))};static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();const jC=new at(""),LE=new at("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),RE=new at("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class DE{}let $ne=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=W3(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(mn(ol),mn(LE))};static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();const Xne=/^(?:https?:)?\/\//i;function Yne(t,e){if(!ae(jC)||"GET"===t.method||"HEAD"===t.method||Xne.test(t.url))return e(t);const n=ae(DE).getToken(),r=ae(RE);return null!=n&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,n)})),e(t)}var Jc=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Jc||{});function hu(t,e){return{\u0275kind:t,\u0275providers:e}}function Kne(...t){const e=[Ar,TE,VE,{provide:$4,useExisting:VE},{provide:X4,useFactory:()=>ae(SE,{optional:!0})??ae(TE)},{provide:_0,useValue:Yne,multi:!0},{provide:jC,useValue:!0},{provide:DE,useClass:$ne}];for(const n of t)e.push(...n.\u0275providers);return fc(e)}const BE=new at("");function x0(t){return!!t&&(t instanceof Br||Jt(t.lift)&&Jt(t.subscribe))}const{isArray:fre}=Array,{getPrototypeOf:gre,prototype:mre,keys:vre}=Object;const{isArray:yre}=Array;function bre(t,e){return t.reduce((n,r,s)=>(n[r]=e[s],n),{})}function NE(...t){const e=function mne(t){return Jt(FC(t))?t.pop():void 0}(t),{args:n,keys:r}=function wre(t){if(1===t.length){const e=t[0];if(fre(e))return{args:e,keys:null};if(function Cre(t){return t&&"object"==typeof t&&gre(t)===mre}(e)){const n=vre(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t),s=new Br(i=>{const{length:o}=n;if(!o)return void i.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let h=!1;Cl(n[u]).subscribe(Ha(i,d=>{h||(h=!0,c--),a[u]=d},()=>l--,void 0,()=>{(!l||!h)&&(c||i.next(r?bre(r,a):a),i.complete())}))}});return e?s.pipe(function Are(t){return jo(e=>function Ire(t,e){return yre(e)?t(...e):t(e)}(t,e))}(e)):s}function FE(...t){return function xre(){return function _re(t=1/0){return U4(di,t)}(1)}()(PC(t,pE(t)))}function PE(t){return new Br(e=>{Cl(t()).subscribe(e)})}const kE=new Br(t=>t.complete());function J4(t){return t<=0?()=>kE:Sa((e,n)=>{let r=0;e.subscribe(Ha(n,s=>{++r<=t&&(n.next(s),t<=r&&n.complete())}))})}const UC={now:()=>(UC.delegate||Date).now(),delegate:void 0};class Hre extends X{constructor(e=1/0,n=1/0,r=UC){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:i,_windowTime:o}=this;n||(r.push(e),!s&&r.push(i.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,i=s.slice();for(let o=0;o<i.length&&!e.closed;o+=r?1:2)e.next(i[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:s}=this,i=(s?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!s){const o=n.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function $C(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new Cn({next:()=>{r.unsubscribe(),t()}});return Cl(e(...n)).subscribe(r)}function OE(t,e,n){let r,s=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:n}=t):r=t??1/0,function Mre(t={}){const{connector:e=()=>new X,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:s=!0}=t;return i=>{let o,a,l,c=0,u=!1,h=!1;const d=()=>{a?.unsubscribe(),a=void 0},p=()=>{d(),o=l=void 0,u=h=!1},m=()=>{const y=o;p(),y?.unsubscribe()};return Sa((y,H)=>{c++,!h&&!u&&d();const T=l=l??e();H.add(()=>{c--,0===c&&!h&&!u&&(a=$C(m,s))}),T.subscribe(H),!o&&c>0&&(o=new Cn({next:V=>T.next(V),error:V=>{h=!0,d(),a=$C(p,n,V),T.error(V)},complete:()=>{u=!0,d(),a=$C(p,r),T.complete()}}),Cl(y).subscribe(o))})(i)}}({connector:()=>new Hre(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}class Q4{}let zre=(()=>{class t extends Q4{getTranslation(n){return G2({})}static \u0275fac=(()=>{let n;return function(s){return(n||(n=oi(t)))(s||t)}})();static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();class GE{}let Vre=(()=>{class t{handle(n){return n.key}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();function du(t){return typeof t<"u"&&null!==t}function e5(t){return t5(t)&&!XC(t)&&null!==t}function t5(t){return"object"==typeof t}function XC(t){return Array.isArray(t)}function ZE(t){return"string"==typeof t}function YC(t,e){const n=Object.assign({},t);return t5(t)?(t5(t)&&t5(e)&&Object.keys(e).forEach(r=>{e5(e[r])?r in t?n[r]=YC(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n):YC({},e)}function KC(t,e){const n=e.split(".");e="";do{e+=n.shift(),du(t)&&du(t[e])&&(e5(t[e])||XC(t[e])||!n.length)?(t=t[e],e=""):n.length?e+=".":t=void 0}while(n.length);return t}class n5{}let jE=(()=>{class t extends n5{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(n,r){return ZE(n)?this.interpolateString(n,r):function Ere(t){return"function"==typeof t}(n)?this.interpolateFunction(n,r):void 0}interpolateFunction(n,r){return n(r)}interpolateString(n,r){return r?n.replace(this.templateMatcher,(s,i)=>{const o=KC(r,i);return du(o)?o:s}):n}static \u0275fac=(()=>{let n;return function(s){return(n||(n=oi(t)))(s||t)}})();static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();class W2{}let Lre=(()=>{class t extends W2{compile(n,r){return n}compileTranslations(n,r){return n}static \u0275fac=(()=>{let n;return function(s){return(n||(n=oi(t)))(s||t)}})();static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();class qC{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new ps;onLangChange=new ps;onDefaultLangChange=new ps}const UE=new at("ISOLATE_TRANSLATE_SERVICE"),$E=new at("USE_DEFAULT_LANG"),XE=new at("DEFAULT_LANGUAGE"),YE=new at("USE_EXTEND"),S0=t=>x0(t)?t:G2(t);let JC=(()=>{class t{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(n){this.store.defaultLang=n}get currentLang(){return this.store.currentLang}set currentLang(n){this.store.currentLang=n}get langs(){return this.store.langs}set langs(n){this.store.langs=n}get translations(){return this.store.translations}set translations(n){this.store.translations=n}constructor(n,r,s,i,o,a=!0,l=!1,c=!1,u){this.store=n,this.currentLoader=r,this.compiler=s,this.parser=i,this.missingTranslationHandler=o,this.useDefaultLang=a,this.extend=c,l&&(this.store=new qC),u&&this.setDefaultLang(u)}setDefaultLang(n){if(n===this.defaultLang)return;const r=this.retrieveTranslations(n);typeof r<"u"?(null==this.defaultLang&&(this.defaultLang=n),r.pipe(J4(1)).subscribe(()=>{this.changeDefaultLang(n)})):this.changeDefaultLang(n)}getDefaultLang(){return this.defaultLang}use(n){if(this.lastUseLanguage=n,n===this.currentLang)return G2(this.translations[n]);this.currentLang||(this.currentLang=n);const r=this.retrieveTranslations(n);return x0(r)?(r.pipe(J4(1)).subscribe(()=>{this.changeLang(n)}),r):(this.changeLang(n),G2(this.translations[n]))}changeLang(n){n===this.lastUseLanguage&&(this.currentLang=n,this.onLangChange.emit({lang:n,translations:this.translations[n]}),null==this.defaultLang&&this.changeDefaultLang(n))}retrieveTranslations(n){if(typeof this.translations[n]>"u"||this.extend)return this._translationRequests[n]=this._translationRequests[n]||this.loadAndCompileTranslations(n),this._translationRequests[n]}getTranslation(n){return this.loadAndCompileTranslations(n)}loadAndCompileTranslations(n){this.pending=!0;const r=this.currentLoader.getTranslation(n).pipe(OE(1),J4(1));return this.loadingTranslations=r.pipe(jo(s=>this.compiler.compileTranslations(s,n)),OE(1),J4(1)),this.loadingTranslations.subscribe({next:s=>{this.translations[n]=this.extend&&this.translations[n]?{...s,...this.translations[n]}:s,this.updateLangs(),this.pending=!1},error:s=>{this.pending=!1}}),r}setTranslation(n,r,s=!1){const i=this.compiler.compileTranslations(r,n);this.translations[n]=(s||this.extend)&&this.translations[n]?YC(this.translations[n],i):i,this.updateLangs(),this.onTranslationChange.emit({lang:n,translations:this.translations[n]})}getLangs(){return this.langs}addLangs(n){const r=n.filter(s=>!this.langs.includes(s));r.length>0&&(this.langs=[...this.langs,...r])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(n,r,s){let i;if(n&&(i=this.runInterpolation(KC(n,r),s)),void 0===i&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(i=this.runInterpolation(KC(this.translations[this.defaultLang],r),s)),void 0===i){const o={key:r,translateService:this};typeof s<"u"&&(o.interpolateParams=s),i=this.missingTranslationHandler.handle(o)}return void 0!==i?i:r}runInterpolation(n,r){if(XC(n))return n.map(s=>this.runInterpolation(s,r));if(e5(n)){const s={};for(const i in n){const o=this.runInterpolation(n[i],r);void 0!==o&&(s[i]=o)}return s}return this.parser.interpolate(n,r)}getParsedResult(n,r,s){if(r instanceof Array){const i={};let o=!1;for(const l of r)i[l]=this.getParsedResultForKey(n,l,s),o=o||x0(i[l]);return o?NE(r.map(l=>S0(i[l]))).pipe(jo(l=>{const c={};return l.forEach((u,h)=>{c[r[h]]=u}),c})):i}return this.getParsedResultForKey(n,r,s)}get(n,r){if(!du(n)||!n.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(hE(s=>S0(this.getParsedResult(s,n,r)))):S0(this.getParsedResult(this.translations[this.currentLang],n,r))}getStreamOnTranslationChange(n,r){if(!du(n)||!n.length)throw new Error('Parameter "key" is required and cannot be empty');return FE(PE(()=>this.get(n,r)),this.onTranslationChange.pipe(NC(s=>{const i=this.getParsedResult(s.translations,n,r);return S0(i)})))}stream(n,r){if(!du(n)||!n.length)throw new Error('Parameter "key" required');return FE(PE(()=>this.get(n,r)),this.onLangChange.pipe(NC(s=>{const i=this.getParsedResult(s.translations,n,r);return S0(i)})))}instant(n,r){if(!du(n)||0===n.length)throw new Error('Parameter "key" is required and cannot be empty');const s=this.getParsedResult(this.translations[this.currentLang],n,r);return x0(s)?Array.isArray(n)?n.reduce((i,o)=>(i[o]=o,i),{}):n:s}set(n,r,s=this.currentLang){(function Tre(t,e,n){const r=e.split(".");let s=t;for(let i=0;i<r.length;i++){const o=r[i];i===r.length-1?s[o]=n:((!s[o]||!e5(s[o]))&&(s[o]={}),s=s[o])}})(this.translations[s],n,ZE(r)?this.compiler.compile(r,s):this.compiler.compileTranslations(r,s)),this.updateLangs(),this.onTranslationChange.emit({lang:s,translations:this.translations[s]})}changeDefaultLang(n){this.defaultLang=n,this.onDefaultLangChange.emit({lang:n,translations:this.translations[n]})}reloadLang(n){return this.resetLang(n),this.loadAndCompileTranslations(n)}resetLang(n){delete this._translationRequests[n],delete this.translations[n]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;const n=this.getBrowserCultureLang();return n?n.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(r){return new(r||t)(mn(qC),mn(Q4),mn(W2),mn(n5),mn(GE),mn($E),mn(UE),mn(YE),mn(XE))};static \u0275prov=Mt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Rre=(t={})=>fc([t.loader||{provide:Q4,useClass:zre},t.compiler||{provide:W2,useClass:Lre},t.parser||{provide:n5,useClass:jE},t.missingTranslationHandler||{provide:GE,useClass:Vre},qC,{provide:UE,useValue:t.isolate},{provide:$E,useValue:t.useDefaultLang},{provide:YE,useValue:t.extend},{provide:XE,useValue:t.defaultLanguage},JC]);var Dre=xe(517);const Bre=new at("MESSAGE_FORMAT_CONFIG"),Nre={biDiSupport:!1,formatters:{},strictNumberSign:!1,currency:"USD",strictPluralKeys:!0,throwOnError:!1,fallbackPrefix:void 0};let KE=(()=>{var t;class e extends W2{constructor(r){super(),this.mfCache=new Map;const{formatters:s,biDiSupport:i,strictNumberSign:o,currency:a,strictPluralKeys:l,throwOnError:c,fallbackPrefix:u}={...Nre,...r};this.messageFormatOptions={customFormatters:s,biDiSupport:i,strict:o,currency:a,strictPluralKeys:l},this.throwOnError=!!c,this.fallbackPrefix=u}compile(r,s){if(this.fallbackPrefix&&r.startsWith(this.fallbackPrefix))return r.slice(this.fallbackPrefix.length);let i;try{i=this.getMessageFormatInstance(s).compile(r)}catch(o){if(this.throwOnError)throw o;console.error(o),console.error(`[ngx-translate-messageformat-compiler] Could not compile message for lang '${s}': '${r}'`),i=function Pre(t,e){return()=>(console.warn(`[ngx-translate-messageformat-compiler] Falling back to original invalid message: '${t}' ('${e}')`),String(t))}(r,s)}return this.throwOnError||(i=function Fre(t,e){return n=>{let r=e;try{r=t(n)}catch(s){console.error(s),console.error(`[ngx-translate-messageformat-compiler] Could not interpolate '${e}' with params '${n}'`)}return r}}(i,r)),i}compileTranslations(r,s){return"string"==typeof r?this.compile(r,s):Object.keys(r).reduce((i,o)=>(i[o]=this.compileTranslations(r[o],s),i),{})}getMessageFormatInstance(r){return this.mfCache.has(r)||this.mfCache.set(r,new Dre(r,this.messageFormatOptions)),this.mfCache.get(r)}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)(mn(Bre,8))},this.\u0275prov=Mt({token:e,factory:e.\u0275fac}))}return t(),e})(),Ore=(()=>{class t{http;prefix;suffix;constructor(n,r="/assets/i18n/",s=".json"){this.http=n,this.prefix=r,this.suffix=s}getTranslation(n){return this.http.get(`${this.prefix}${n}${this.suffix}`)}static \u0275fac=function(r){return new(r||t)(mn(Ar),mn(String),mn(String))};static \u0275prov=Mt({token:t,factory:t.\u0275fac})}return t})();function Gre(t){return Object.keys(t).reduce((e,n)=>t[n].trim().length?{...e,[n]:t[n]}:e,{})}class Wre extends Ore{getTranslation(e){const n=e.substring(0,2);return super.getTranslation(n).pipe(jo(Gre))}}const Ure={compiler:{provide:W2,useClass:KE},loader:{provide:Q4,useFactory:function jre(t){return new Wre(t,"./assets/i18n/")},deps:[Ar]}},$re={compiler:{provide:W2,useClass:KE},parser:{provide:n5,useClass:(()=>{var t;class e extends jE{interpolate(r,s){return s?`${r} {{${Object.keys(s).map(o=>`${o}=${s[o]}`).join(", ")}}}`:r?.toString()}static#e=t=()=>(this.\u0275fac=(()=>{let r;return function(i){return(r||(r=oi(e)))(i||e)}})(),this.\u0275prov=Mt({token:e,factory:e.\u0275fac}))}return t(),e})()}};let Xre=(()=>{var t;class e{constructor(){this.injector=ae(uo)}intercept(r,s){const i=this.injector.get(JC);return r=r.clone({setHeaders:{"Accept-Language":i.currentLang||"en"}}),s.handle(r)}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)},this.\u0275prov=Mt({token:e,factory:e.\u0275fac}))}return t(),e})();function Yre(t){return()=>{t.setDefaultLang("en");let e=null;try{e=localStorage.getItem("geonetwork-ui-language")}catch(n){console.warn(n)}t.use(e||t.getBrowserLang()||"en")}}function Kre(t,e=!0){let n=t??Ure;"true"===new URL(window.location.toString()).searchParams.get("debugTranslations")&&(n=$re);const r=[Kne(hu(Jc.LegacyInterceptors,[{provide:BE,useFactory:Fne},{provide:_0,useExisting:BE,multi:!0}])),{provide:ME,useClass:Xre,multi:!0},Rre(n)];return e&&r.push({provide:Tw,useFactory:Yre,deps:[JC],multi:!0}),fc(r)}const r5={"ISO 19139":J9,"ISO 19115-3":aC,"DCAT-AP":j4};function qE(t){return Object.keys(r5).reduce((e,n)=>t instanceof r5[n]?n:e)}let Jre=(()=>{var t;class e{constructor(){this.newRecordNative=new ps,this.newMetadata=new ps,this.currentConverter=null,this.status="Standing by."}set recordNative(r){this._currentRecord=r,this.convertRecordToXml(r)}set currentMetadata(r){const s=performance.now();this.status="Converting to CatalogRecord...",this.xmlToRecord(r).then(i=>{this._currentRecord=i,this.newRecordNative.emit(i),this.newMetadata.emit(r);const o=Math.round(performance.now()-s);this.status=`Converting to CatalogRecord... Done (${o} ms).`}).catch(i=>{this.status=`Converting to CatalogRecord... Failed: ${i instanceof Error?i.message:i}`,console.error(i)})}startLoadingFile(){this.status="Loading file from url..."}errorLoadingFile(r){this.status=`Loading file from url... Failed: ${r}`,console.error(r)}startReadingFile(){this.status="Reading file..."}errorReadingFile(){this.status="Reading file... Failed"}changeFormat(r){const s=r5[r];if(!s)throw new Error(`Metadata format ${r} not supported`);this.referenceMetadata="",this.convertRecordToXml(this._currentRecord,new s)}convertRecordToXml(r,s){const i=performance.now(),a=qE(s??this.currentConverter);this.status=`Converting to ${a}...`,this.newMetadata.emit(""),this.recordToXml(r,s).then(l=>{this.newMetadata.emit(l);const c=Math.round(performance.now()-i);this.status=`Converting to ${a}... Done (${c} ms).`}).catch(l=>{this.status=`Converting to ${a}... Failed: ${l instanceof Error?l.message:l}`,console.error(l)})}recordToXml(r,s){try{return this.currentConverter=s||(this.referenceMetadata?KV(this.referenceMetadata):new aC),this.currentConverter.writeRecord(r,this.referenceMetadata)}catch(i){return Promise.reject(i)}}xmlToRecord(r){try{return this.currentConverter=KV(r),this.currentConverter.readRecord(r)}catch(s){return Promise.reject(s)}}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)},this.\u0275cmp=Ra({type:e,selectors:[["gn-ui-status"]],inputs:{recordNative:"recordNative",currentMetadata:"currentMetadata",referenceMetadata:"referenceMetadata"},outputs:{newRecordNative:"newRecordNative",newMetadata:"newMetadata"},standalone:!1,decls:2,vars:1,consts:[[1,"font-mono"]],template:function(s,i){1&s&&(gt(0,"div",0),go(1),ht()),2&s&&(Ht(),Nc("> ",i.status))},encapsulation:2}))}return t(),e})();const{min:Qre,max:ese}=Math,pu=(t,e=0,n=1)=>Qre(ese(e,t),n),e8=t=>{t._clipped=!1,t._unclipped=t.slice(0);for(let e=0;e<=3;e++)e<3?((t[e]<0||t[e]>255)&&(t._clipped=!0),t[e]=pu(t[e],0,255)):3===e&&(t[e]=pu(t[e],0,1));return t},JE={};for(let t of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])JE[`[object ${t}]`]=t.toLowerCase();function ur(t){return JE[Object.prototype.toString.call(t)]||"object"}const Qn=(t,e=null)=>t.length>=3?Array.prototype.slice.call(t):"object"==ur(t[0])&&e?e.split("").filter(n=>void 0!==t[0][n]).map(n=>t[0][n]):t[0].slice(0),Z2=t=>{if(t.length<2)return null;const e=t.length-1;return"string"==ur(t[e])?t[e].toLowerCase():null},{PI:s5,min:QE,max:eT}=Math,ga=t=>Math.round(100*t)/100,t8=t=>Math.round(100*t)/100,ec=2*s5,n8=s5/3,tse=s5/180,nse=180/s5;function tT(t){return[...t.slice(0,3).reverse(),...t.slice(3)]}const Yn={format:{},autodetect:[]},Ct=class rse{constructor(...e){const n=this;if("object"===ur(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let r=Z2(e),s=!1;if(!r){s=!0,Yn.sorted||(Yn.autodetect=Yn.autodetect.sort((i,o)=>o.p-i.p),Yn.sorted=!0);for(let i of Yn.autodetect)if(r=i.test(...e),r)break}if(!Yn.format[r])throw new Error("unknown format: "+e);{const i=Yn.format[r].apply(null,s?e:e.slice(0,-1));n._rgb=e8(i)}3===n._rgb.length&&n._rgb.push(1)}toString(){return"function"==ur(this.hex)?this.hex():`[${this._rgb.join(",")}]`}},nT=(...t)=>new Ct(...t);nT.version="3.1.2";const br=nT,j2={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},ise=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,ose=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,rT=t=>{if(t.match(ise)){(4===t.length||7===t.length)&&(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);const e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(ose)){(5===t.length||9===t.length)&&(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=parseInt(t,16);return[e>>24&255,e>>16&255,e>>8&255,Math.round((255&e)/255*100)/100]}throw new Error(`unknown hex color: ${t}`)},{round:i5}=Math,sT=(...t)=>{let[e,n,r,s]=Qn(t,"rgba"),i=Z2(t)||"auto";void 0===s&&(s=1),"auto"===i&&(i=s<1?"rgba":"rgb"),e=i5(e),n=i5(n),r=i5(r);let a="000000"+(e<<16|n<<8|r).toString(16);a=a.substr(a.length-6);let l="0"+i5(255*s).toString(16);switch(l=l.substr(l.length-2),i.toLowerCase()){case"rgba":return`#${a}${l}`;case"argb":return`#${l}${a}`;default:return`#${a}`}};Ct.prototype.name=function(){const t=sT(this._rgb,"rgb");for(let e of Object.keys(j2))if(j2[e]===t)return e.toLowerCase();return t},Yn.format.named=t=>{if(t=t.toLowerCase(),j2[t])return rT(j2[t]);throw new Error("unknown color name: "+t)},Yn.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&"string"===ur(t)&&j2[t.toLowerCase()])return"named"}}),Ct.prototype.alpha=function(t,e=!1){return void 0!==t&&"number"===ur(t)?e?(this._rgb[3]=t,this):new Ct([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},Ct.prototype.clipped=function(){return this._rgb._clipped||!1};const H0={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},U2=H0,ase=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function tc(t){const e=ase.get(String(t).toLowerCase());if(!e)throw new Error("unknown Lab illuminant "+t);H0.labWhitePoint=t,H0.Xn=e[0],H0.Zn=e[1]}function M0(){return H0.labWhitePoint}const r8=t=>{const e=Math.sign(t);return((t=Math.abs(t))<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)*e},iT=(t,e,n)=>{const{MtxAdaptMa:r,MtxAdaptMaI:s,MtxXYZ2RGB:i,RefWhiteRGB:o,Xn:a,Yn:l,Zn:c}=U2,H=(o.X*r.m00+o.Y*r.m10+o.Z*r.m20)/(a*r.m00+l*r.m10+c*r.m20)*(t*r.m00+e*r.m10+n*r.m20),T=(o.X*r.m01+o.Y*r.m11+o.Z*r.m21)/(a*r.m01+l*r.m11+c*r.m21)*(t*r.m01+e*r.m11+n*r.m21),V=(o.X*r.m02+o.Y*r.m12+o.Z*r.m22)/(a*r.m02+l*r.m12+c*r.m22)*(t*r.m02+e*r.m12+n*r.m22),J=H*s.m00+T*s.m10+V*s.m20,ie=H*s.m01+T*s.m11+V*s.m21,D=H*s.m02+T*s.m12+V*s.m22;return[255*r8(J*i.m00+ie*i.m10+D*i.m20),255*r8(J*i.m01+ie*i.m11+D*i.m21),255*r8(J*i.m02+ie*i.m12+D*i.m22)]},s8=(...t)=>{t=Qn(t,"lab");const[e,n,r]=t,[s,i,o]=((t,e,n)=>{const{kE:r,kK:s,kKE:i,Xn:o,Yn:a,Zn:l}=U2,c=(t+16)/116,u=.002*e+c,h=c-.005*n,d=u*u*u,p=h*h*h;return[(d>r?d:(116*u-16)/s)*o,(t>i?Math.pow((t+16)/116,3):t/s)*a,(p>r?p:(116*h-16)/s)*l]})(e,n,r),[a,l,c]=iT(s,i,o);return[a,l,c,t.length>3?t[3]:1]};function i8(t){const e=Math.sign(t);return((t=Math.abs(t))<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4))*e}const oT=(t,e,n)=>{t=i8(t/255),e=i8(e/255),n=i8(n/255);const{MtxRGB2XYZ:r,MtxAdaptMa:s,MtxAdaptMaI:i,Xn:o,Yn:a,Zn:l,As:c,Bs:u,Cs:h}=U2;let d=t*r.m00+e*r.m10+n*r.m20,p=t*r.m01+e*r.m11+n*r.m21,m=t*r.m02+e*r.m12+n*r.m22,V=d*s.m00+p*s.m10+m*s.m20,J=d*s.m01+p*s.m11+m*s.m21,ie=d*s.m02+p*s.m12+m*s.m22;return V*=(o*s.m00+a*s.m10+l*s.m20)/c,J*=(o*s.m01+a*s.m11+l*s.m21)/u,ie*=(o*s.m02+a*s.m12+l*s.m22)/h,d=V*i.m00+J*i.m10+ie*i.m20,p=V*i.m01+J*i.m11+ie*i.m21,m=V*i.m02+J*i.m12+ie*i.m22,[d,p,m]},o8=(...t)=>{const[e,n,r,...s]=Qn(t,"rgb"),[i,o,a]=oT(e,n,r),[l,c,u]=function hse(t,e,n){const{Xn:r,Yn:s,Zn:i,kE:o,kK:a}=U2,l=t/r,c=e/s,u=n/i,h=l>o?Math.pow(l,1/3):(a*l+16)/116,d=c>o?Math.pow(c,1/3):(a*c+16)/116;return[116*d-16,500*(h-d),200*(d-(u>o?Math.pow(u,1/3):(a*u+16)/116))]}(i,o,a);return[l,c,u,...s.length>0&&s[0]<1?[s[0]]:[]]};Ct.prototype.lab=function(){return o8(this._rgb)},Object.assign(br,{lab:(...t)=>new Ct(...t,"lab"),getLabWhitePoint:M0,setLabWhitePoint:tc}),Yn.format.lab=s8,Yn.autodetect.push({p:2,test:(...t)=>{if("array"===ur(t=Qn(t,"lab"))&&3===t.length)return"lab"}}),Ct.prototype.darken=function(t=1){const n=this.lab();return n[0]-=U2.Kn*t,new Ct(n,"lab").alpha(this.alpha(),!0)},Ct.prototype.brighten=function(t=1){return this.darken(-t)},Ct.prototype.darker=Ct.prototype.darken,Ct.prototype.brighter=Ct.prototype.brighten,Ct.prototype.get=function(t){const[e,n]=t.split("."),r=this[e]();if(n){const s=e.indexOf(n)-("ok"===e.substr(0,2)?2:0);if(s>-1)return r[s];throw new Error(`unknown channel ${n} in mode ${e}`)}return r};const{pow:dse}=Math;Ct.prototype.luminance=function(t,e="rgb"){if(void 0!==t&&"number"===ur(t)){if(0===t)return new Ct([0,0,0,this._rgb[3]],"rgb");if(1===t)return new Ct([255,255,255,this._rgb[3]],"rgb");let n=this.luminance(),r=20;const s=(o,a)=>{const l=o.interpolate(a,.5,e),c=l.luminance();return Math.abs(t-c)<1e-7||!r--?l:c>t?s(o,l):s(l,a)},i=(n>t?s(new Ct([0,0,0]),this):s(this,new Ct([255,255,255]))).rgb();return new Ct([...i,this._rgb[3]])}return gse(...this._rgb.slice(0,3))};const gse=(t,e,n)=>.2126*(t=a8(t))+.7152*(e=a8(e))+.0722*a8(n),a8=t=>(t/=255)<=.03928?t/12.92:dse((t+.055)/1.055,2.4),so={},$2=(t,e,n=.5,...r)=>{let s=r[0]||"lrgb";if(!so[s]&&!r.length&&(s=Object.keys(so)[0]),!so[s])throw new Error(`interpolation mode ${s} is not defined`);return"object"!==ur(t)&&(t=new Ct(t)),"object"!==ur(e)&&(e=new Ct(e)),so[s](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))};Ct.prototype.mix=Ct.prototype.interpolate=function(t,e=.5,...n){return $2(this,t,e,...n)},Ct.prototype.premultiply=function(t=!1){const e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new Ct([e[0]*n,e[1]*n,e[2]*n,n],"rgb")};const{sin:mse,cos:vse}=Math,aT=(...t)=>{let[e,n,r]=Qn(t,"lch");return isNaN(r)&&(r=0),r*=tse,[e,vse(r)*n,mse(r)*n]},l8=(...t)=>{t=Qn(t,"lch");const[e,n,r]=t,[s,i,o]=aT(e,n,r),[a,l,c]=s8(s,i,o);return[a,l,c,t.length>3?t[3]:1]},{sqrt:Cse,atan2:yse,round:Ise}=Math,lT=(...t)=>{const[e,n,r]=Qn(t,"lab"),s=Cse(n*n+r*r);let i=(yse(r,n)*nse+360)%360;return 0===Ise(1e4*s)&&(i=Number.NaN),[e,s,i]},c8=(...t)=>{const[e,n,r,...s]=Qn(t,"rgb"),[i,o,a]=o8(e,n,r),[l,c,u]=lT(i,o,a);return[l,c,u,...s.length>0&&s[0]<1?[s[0]]:[]]};Ct.prototype.lch=function(){return c8(this._rgb)},Ct.prototype.hcl=function(){return tT(c8(this._rgb))},Object.assign(br,{lch:(...t)=>new Ct(...t,"lch"),hcl:(...t)=>new Ct(...t,"hcl")}),Yn.format.lch=l8,Yn.format.hcl=(...t)=>{const e=tT(Qn(t,"hcl"));return l8(...e)},["lch","hcl"].forEach(t=>Yn.autodetect.push({p:2,test:(...e)=>{if("array"===ur(e=Qn(e,t))&&3===e.length)return t}})),Ct.prototype.saturate=function(t=1){const n=this.lch();return n[1]+=U2.Kn*t,n[1]<0&&(n[1]=0),new Ct(n,"lch").alpha(this.alpha(),!0)},Ct.prototype.desaturate=function(t=1){return this.saturate(-t)},Ct.prototype.set=function(t,e,n=!1){const[r,s]=t.split("."),i=this[r]();if(s){const o=r.indexOf(s)-("ok"===r.substr(0,2)?2:0);if(o>-1){if("string"==ur(e))switch(e.charAt(0)){case"+":case"-":i[o]+=+e;break;case"*":i[o]*=+e.substr(1);break;case"/":i[o]/=+e.substr(1);break;default:i[o]=+e}else{if("number"!==ur(e))throw new Error("unsupported value for Color.set");i[o]=e}const a=new Ct(i,r);return n?(this._rgb=a._rgb,this):a}throw new Error(`unknown channel ${s} in mode ${r}`)}return i},Ct.prototype.tint=function(t=.5,...e){return $2(this,"white",t,...e)},Ct.prototype.shade=function(t=.5,...e){return $2(this,"black",t,...e)},so.rgb=(t,e,n)=>{const r=t._rgb,s=e._rgb;return new Ct(r[0]+n*(s[0]-r[0]),r[1]+n*(s[1]-r[1]),r[2]+n*(s[2]-r[2]),"rgb")};const{sqrt:u8,pow:X2}=Math;so.lrgb=(t,e,n)=>{const[r,s,i]=t._rgb,[o,a,l]=e._rgb;return new Ct(u8(X2(r,2)*(1-n)+X2(o,2)*n),u8(X2(s,2)*(1-n)+X2(a,2)*n),u8(X2(i,2)*(1-n)+X2(l,2)*n),"rgb")},so.lab=(t,e,n)=>{const r=t.lab(),s=e.lab();return new Ct(r[0]+n*(s[0]-r[0]),r[1]+n*(s[1]-r[1]),r[2]+n*(s[2]-r[2]),"lab")};const Y2=(t,e,n,r)=>{let s,i,o,a,l,c,u,h,d,p,m,y;return"hsl"===r?(s=t.hsl(),i=e.hsl()):"hsv"===r?(s=t.hsv(),i=e.hsv()):"hcg"===r?(s=t.hcg(),i=e.hcg()):"hsi"===r?(s=t.hsi(),i=e.hsi()):"lch"===r||"hcl"===r?(r="hcl",s=t.hcl(),i=e.hcl()):"oklch"===r&&(s=t.oklch().reverse(),i=e.oklch().reverse()),("h"===r.substr(0,1)||"oklch"===r)&&([o,l,u]=s,[a,c,h]=i),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?p=Number.NaN:(p=a,(1==u||0==u)&&"hsv"!=r&&(d=c)):(p=o,(1==h||0==h)&&"hsv"!=r&&(d=l)):(y=a>o&&a-o>180?a-(o+360):a<o&&o-a>180?a+360-o:a-o,p=o+n*y),void 0===d&&(d=l+n*(c-l)),m=u+n*(h-u),new Ct("oklch"===r?[m,d,p]:[p,d,m],r)},cT=(t,e,n)=>Y2(t,e,n,"lch");so.lch=cT,so.hcl=cT,Ct.prototype.num=function(){return((...t)=>{const[e,n,r]=Qn(t,"rgb");return(e<<16)+(n<<8)+r})(this._rgb)},Object.assign(br,{num:(...t)=>new Ct(...t,"num")}),Yn.format.num=t=>{if("number"==ur(t)&&t>=0&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw new Error("unknown num color: "+t)},Yn.autodetect.push({p:5,test:(...t)=>{if(1===t.length&&"number"===ur(t[0])&&t[0]>=0&&t[0]<=16777215)return"num"}}),so.num=(t,e,n)=>{const r=t.num(),s=e.num();return new Ct(r+n*(s-r),"num")};const{floor:Mse}=Math;Ct.prototype.hcg=function(){return((...t)=>{const[e,n,r]=Qn(t,"rgb"),s=QE(e,n,r),i=eT(e,n,r),o=i-s;let c;return 0===o?c=Number.NaN:(e===i&&(c=(n-r)/o),n===i&&(c=2+(r-e)/o),r===i&&(c=4+(e-n)/o),c*=60,c<0&&(c+=360)),[c,100*o/255,s/(255-o)*100]})(this._rgb)},br.hcg=(...t)=>new Ct(...t,"hcg"),Yn.format.hcg=(...t)=>{t=Qn(t,"hcg");let s,i,o,[e,n,r]=t;r*=255;const a=255*n;if(0===n)s=i=o=r;else{360===e&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const l=Mse(e),c=e-l,u=r*(1-n),h=u+a*(1-c),d=u+a*c,p=u+a;switch(l){case 0:[s,i,o]=[p,d,u];break;case 1:[s,i,o]=[h,p,u];break;case 2:[s,i,o]=[u,p,d];break;case 3:[s,i,o]=[u,h,p];break;case 4:[s,i,o]=[d,u,p];break;case 5:[s,i,o]=[p,u,h]}}return[s,i,o,t.length>3?t[3]:1]},Yn.autodetect.push({p:1,test:(...t)=>{if("array"===ur(t=Qn(t,"hcg"))&&3===t.length)return"hcg"}}),so.hcg=(t,e,n)=>Y2(t,e,n,"hcg");const{cos:K2}=Math,{min:Rse,sqrt:Dse,acos:Bse}=Math;Ct.prototype.hsi=function(){return((...t)=>{let s,[e,n,r]=Qn(t,"rgb");e/=255,n/=255,r/=255;const i=Rse(e,n,r),o=(e+n+r)/3,a=o>0?1-i/o:0;return 0===a?s=NaN:(s=(e-n+(e-r))/2,s/=Dse((e-n)*(e-n)+(e-r)*(n-r)),s=Bse(s),r>n&&(s=ec-s),s/=ec),[360*s,a,o]})(this._rgb)},br.hsi=(...t)=>new Ct(...t,"hsi"),Yn.format.hsi=(...t)=>{t=Qn(t,"hsi");let s,i,o,[e,n,r]=t;return isNaN(e)&&(e=0),isNaN(n)&&(n=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(o=(1-n)/3,s=(1+n*K2(ec*e)/K2(n8-ec*e))/3,i=1-(o+s)):e<2/3?(e-=1/3,s=(1-n)/3,i=(1+n*K2(ec*e)/K2(n8-ec*e))/3,o=1-(s+i)):(e-=2/3,i=(1-n)/3,o=(1+n*K2(ec*e)/K2(n8-ec*e))/3,s=1-(i+o)),s=pu(r*s*3),i=pu(r*i*3),o=pu(r*o*3),[255*s,255*i,255*o,t.length>3?t[3]:1]},Yn.autodetect.push({p:2,test:(...t)=>{if("array"===ur(t=Qn(t,"hsi"))&&3===t.length)return"hsi"}}),so.hsi=(t,e,n)=>Y2(t,e,n,"hsi");const h8=(...t)=>{t=Qn(t,"hsl");const[e,n,r]=t;let s,i,o;if(0===n)s=i=o=255*r;else{const a=[0,0,0],l=[0,0,0],c=r<.5?r*(1+n):r+n-r*n,u=2*r-c,h=e/360;a[0]=h+1/3,a[1]=h,a[2]=h-1/3;for(let d=0;d<3;d++)a[d]<0&&(a[d]+=1),a[d]>1&&(a[d]-=1),l[d]=6*a[d]<1?u+6*(c-u)*a[d]:2*a[d]<1?c:3*a[d]<2?u+(c-u)*(2/3-a[d])*6:u;[s,i,o]=[255*l[0],255*l[1],255*l[2]]}return t.length>3?[s,i,o,t[3]]:[s,i,o,1]},uT=(...t)=>{t=Qn(t,"rgba");let[e,n,r]=t;e/=255,n/=255,r/=255;const s=QE(e,n,r),i=eT(e,n,r),o=(i+s)/2;let a,l;return i===s?(a=0,l=Number.NaN):a=o<.5?(i-s)/(i+s):(i-s)/(2-i-s),e==i?l=(n-r)/(i-s):n==i?l=2+(r-e)/(i-s):r==i&&(l=4+(e-n)/(i-s)),l*=60,l<0&&(l+=360),t.length>3&&void 0!==t[3]?[l,a,o,t[3]]:[l,a,o]};Ct.prototype.hsl=function(){return uT(this._rgb)},br.hsl=(...t)=>new Ct(...t,"hsl"),Yn.format.hsl=h8,Yn.autodetect.push({p:2,test:(...t)=>{if("array"===ur(t=Qn(t,"hsl"))&&3===t.length)return"hsl"}}),so.hsl=(t,e,n)=>Y2(t,e,n,"hsl");const{floor:Gse}=Math,{min:Zse,max:jse}=Math;function o5(t,e){let n=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map(o=>[o]));let r=e[0].length,s=e[0].map((o,a)=>e.map(l=>l[a])),i=t.map(o=>s.map(a=>Array.isArray(o)?o.reduce((l,c,u)=>l+c*(a[u]||0),0):a.reduce((l,c)=>l+c*o,0)));return 1===n&&(i=i[0]),1===r?i.map(o=>o[0]):i}Ct.prototype.hsv=function(){return((...t)=>{t=Qn(t,"rgb");let[e,n,r]=t;const s=Zse(e,n,r),i=jse(e,n,r),o=i-s;let a,l,c;return c=i/255,0===i?(a=Number.NaN,l=0):(l=o/i,e===i&&(a=(n-r)/o),n===i&&(a=2+(r-e)/o),r===i&&(a=4+(e-n)/o),a*=60,a<0&&(a+=360)),[a,l,c]})(this._rgb)},br.hsv=(...t)=>new Ct(...t,"hsv"),Yn.format.hsv=(...t)=>{t=Qn(t,"hsv");let s,i,o,[e,n,r]=t;if(r*=255,0===n)s=i=o=r;else{360===e&&(e=0),e>360&&(e-=360),e<0&&(e+=360),e/=60;const a=Gse(e),l=e-a,c=r*(1-n),u=r*(1-n*l),h=r*(1-n*(1-l));switch(a){case 0:[s,i,o]=[r,h,c];break;case 1:[s,i,o]=[u,r,c];break;case 2:[s,i,o]=[c,r,h];break;case 3:[s,i,o]=[c,u,r];break;case 4:[s,i,o]=[h,c,r];break;case 5:[s,i,o]=[r,c,u]}}return[s,i,o,t.length>3?t[3]:1]},Yn.autodetect.push({p:2,test:(...t)=>{if("array"===ur(t=Qn(t,"hsv"))&&3===t.length)return"hsv"}}),so.hsv=(t,e,n)=>Y2(t,e,n,"hsv");const d8=(...t)=>{t=Qn(t,"lab");const[e,n,r,...s]=t,[i,o,a]=function Kse(t){var r=o5([[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],t);return o5([[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],r.map(s=>s**3))}([e,n,r]),[l,c,u]=iT(i,o,a);return[l,c,u,...s.length>0&&s[0]<1?[s[0]]:[]]};function Jse(t){const r=o5([[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],t);return o5([[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r.map(s=>Math.cbrt(s)))}const p8=(...t)=>{const[e,n,r,...s]=Qn(t,"rgb");return[...Jse(oT(e,n,r)),...s.length>0&&s[0]<1?[s[0]]:[]]};Ct.prototype.oklab=function(){return p8(this._rgb)},Object.assign(br,{oklab:(...t)=>new Ct(...t,"oklab")}),Yn.format.oklab=d8,Yn.autodetect.push({p:2,test:(...t)=>{if("array"===ur(t=Qn(t,"oklab"))&&3===t.length)return"oklab"}}),so.oklab=(t,e,n)=>{const r=t.oklab(),s=e.oklab();return new Ct(r[0]+n*(s[0]-r[0]),r[1]+n*(s[1]-r[1]),r[2]+n*(s[2]-r[2]),"oklab")},so.oklch=(t,e,n)=>Y2(t,e,n,"oklch");const{pow:f8,sqrt:g8,PI:m8,cos:hT,sin:dT,atan2:tie}=Math,{pow:sie}=Math;function a5(t){let e="rgb",n=br("#ccc"),r=0,s=[0,1],i=[],o=[0,0],a=!1,l=[],c=!1,u=0,h=1,d=!1,p={},m=!0,y=1;const H=function(j){if((j=j||["#fff","#000"])&&"string"===ur(j)&&br.brewer&&br.brewer[j.toLowerCase()]&&(j=br.brewer[j.toLowerCase()]),"array"===ur(j)){1===j.length&&(j=[j[0],j[0]]),j=j.slice(0);for(let ue=0;ue<j.length;ue++)j[ue]=br(j[ue]);i.length=0;for(let ue=0;ue<j.length;ue++)i.push(ue/(j.length-1))}return D(),l=j};let V=j=>j,J=j=>j;const ie=function(j,ue){let Me,Ce;if(null==ue&&(ue=!1),isNaN(j)||null===j)return n;Ce=ue?j:a&&a.length>2?function(j){if(null!=a){const ue=a.length-1;let Me=0;for(;Me<ue&&j>=a[Me];)Me++;return Me-1}return 0}(j)/(a.length-2):h!==u?(j-u)/(h-u):1,Ce=J(Ce),ue||(Ce=V(Ce)),1!==y&&(Ce=sie(Ce,y)),Ce=o[0]+Ce*(1-o[0]-o[1]),Ce=pu(Ce,0,1);const ze=Math.floor(1e4*Ce);if(m&&p[ze])Me=p[ze];else{if("array"===ur(l))for(let Ae=0;Ae<i.length;Ae++){const dt=i[Ae];if(Ce<=dt){Me=l[Ae];break}if(Ce>=dt&&Ae===i.length-1){Me=l[Ae];break}if(Ce>dt&&Ce<i[Ae+1]){Ce=(Ce-dt)/(i[Ae+1]-dt),Me=br.interpolate(l[Ae],l[Ae+1],Ce,e);break}}else"function"===ur(l)&&(Me=l(Ce));m&&(p[ze]=Me)}return Me};var D=()=>p={};H(t);const re=function(j){const ue=br(ie(j));return c&&ue[c]?ue[c]():ue};return re.classes=function(j){if(null!=j){if("array"===ur(j))a=j,s=[j[0],j[j.length-1]];else{const ue=br.analyze(s);a=0===j?[ue.min,ue.max]:br.limits(ue,"e",j)}return re}return a},re.domain=function(j){if(!arguments.length)return s;u=j[0],h=j[j.length-1],i=[];const ue=l.length;if(j.length===ue&&u!==h)for(let Me of Array.from(j))i.push((Me-u)/(h-u));else{for(let Me=0;Me<ue;Me++)i.push(Me/(ue-1));if(j.length>2){const Me=j.map((ze,Ae)=>Ae/(j.length-1)),Ce=j.map(ze=>(ze-u)/(h-u));Ce.every((ze,Ae)=>Me[Ae]===ze)||(J=ze=>{if(ze<=0||ze>=1)return ze;let Ae=0;for(;ze>=Ce[Ae+1];)Ae++;return Me[Ae]+(ze-Ce[Ae])/(Ce[Ae+1]-Ce[Ae])*(Me[Ae+1]-Me[Ae])})}}return s=[u,h],re},re.mode=function(j){return arguments.length?(e=j,D(),re):e},re.range=function(j,ue){return H(j),re},re.out=function(j){return c=j,re},re.spread=function(j){return arguments.length?(r=j,re):r},re.correctLightness=function(j){return null==j&&(j=!0),d=j,D(),V=d?function(ue){const Me=ie(0,!0).lab()[0],Ce=ie(1,!0).lab()[0],ze=Me>Ce;let Ae=ie(ue,!0).lab()[0];const dt=Me+(Ce-Me)*ue;let ft=Ae-dt,$e=0,Xt=1,pn=20;for(;Math.abs(ft)>.01&&pn-- >0;)(function(){ze&&(ft*=-1),ft<0?($e=ue,ue+=.5*(Xt-ue)):(Xt=ue,ue+=.5*($e-ue)),Ae=ie(ue,!0).lab()[0],ft=Ae-dt})();return ue}:ue=>ue,re},re.padding=function(j){return null!=j?("number"===ur(j)&&(j=[j,j]),o=j,re):o},re.colors=function(j,ue){arguments.length<2&&(ue="hex");let Me=[];if(0===arguments.length)Me=l.slice(0);else if(1===j)Me=[re(.5)];else if(j>1){const Ce=s[0],ze=s[1]-Ce;Me=function iie(t,e,n){let r=[],s=t<e,i=n?s?e+1:e-1:e;for(let o=t;s?o<i:o>i;s?o++:o--)r.push(o);return r}(0,j,!1).map(Ae=>re(Ce+Ae/(j-1)*ze))}else{t=[];let Ce=[];if(a&&a.length>2)for(let ze=1,Ae=a.length,dt=1<=Ae;dt?ze<Ae:ze>Ae;dt?ze++:ze--)Ce.push(.5*(a[ze-1]+a[ze]));else Ce=s;Me=Ce.map(ze=>re(ze))}return br[ue]&&(Me=Me.map(Ce=>Ce[ue]())),Me},re.cache=function(j){return null!=j?(m=j,re):m},re.gamma=function(j){return null!=j?(y=j,re):y},re.nodata=function(j){return null!=j?(n=br(j),re):n},re}const{round:pT}=Math;Ct.prototype.rgb=function(t=!0){return!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(pT)},Ct.prototype.rgba=function(t=!0){return this._rgb.slice(0,4).map((e,n)=>n<3?!1===t?e:pT(e):e)},Object.assign(br,{rgb:(...t)=>new Ct(...t,"rgb")}),Yn.format.rgb=(...t)=>{const e=Qn(t,"rgba");return void 0===e[3]&&(e[3]=1),e},Yn.autodetect.push({p:3,test:(...t)=>{if("array"===ur(t=Qn(t,"rgba"))&&(3===t.length||4===t.length&&"number"==ur(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});const Oa=(t,e,n)=>{if(!Oa[n])throw new Error("unknown blend mode "+n);return Oa[n](t,e)},Qc=t=>(e,n)=>{const r=br(n).rgb(),s=br(e).rgb();return br.rgb(t(r,s))},e1=t=>(e,n)=>{const r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r};Oa.normal=Qc(e1(t=>t)),Oa.multiply=Qc(e1((t,e)=>t*e/255)),Oa.screen=Qc(e1((t,e)=>255*(1-(1-t/255)*(1-e/255)))),Oa.overlay=Qc(e1((t,e)=>e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255)))),Oa.darken=Qc(e1((t,e)=>t>e?e:t)),Oa.lighten=Qc(e1((t,e)=>t>e?t:e)),Oa.dodge=Qc(e1((t,e)=>255===t||(t=e/255*255/(1-t/255))>255?255:t)),Oa.burn=Qc(e1((t,e)=>255*(1-(1-e/255)/(t/255))));const vie=Oa,{pow:wie,sin:Cie,cos:yie}=Math,{floor:bie,random:_ie}=Math,{log:fT,pow:Sie,floor:Hie,abs:Mie}=Math;function gT(t,e=null){const n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===ur(t)&&(t=Object.values(t)),t.forEach(r=>{e&&"object"===ur(r)&&(r=r[e]),null!=r&&!isNaN(r)&&(n.values.push(r),n.sum+=r,r<n.min&&(n.min=r),r>n.max&&(n.max=r),n.count+=1)}),n.domain=[n.min,n.max],n.limits=(r,s)=>mT(n,r,s),n}function mT(t,e="equal",n=7){"array"==ur(t)&&(t=gT(t));const{min:r,max:s}=t,i=t.values.sort((a,l)=>a-l);if(1===n)return[r,s];const o=[];if("c"===e.substr(0,1)&&(o.push(r),o.push(s)),"e"===e.substr(0,1)){o.push(r);for(let a=1;a<n;a++)o.push(r+a/n*(s-r));o.push(s)}else if("l"===e.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const a=Math.LOG10E*fT(r),l=Math.LOG10E*fT(s);o.push(r);for(let c=1;c<n;c++)o.push(Sie(10,a+c/n*(l-a)));o.push(s)}else if("q"===e.substr(0,1)){o.push(r);for(let a=1;a<n;a++){const l=(i.length-1)*a/n,c=Hie(l);if(c===l)o.push(i[c]);else{const u=l-c;o.push(i[c]*(1-u)+i[c+1]*u)}}o.push(s)}else if("k"===e.substr(0,1)){let a;const l=i.length,c=new Array(l),u=new Array(n);let h=!0,d=0,p=null;p=[],p.push(r);for(let H=1;H<n;H++)p.push(r+H/n*(s-r));for(p.push(s);h;){for(let T=0;T<n;T++)u[T]=0;for(let T=0;T<l;T++){const V=i[T];let ie,J=Number.MAX_VALUE;for(let D=0;D<n;D++){const re=Mie(p[D]-V);re<J&&(J=re,ie=D),u[ie]++,c[T]=ie}}const H=new Array(n);for(let T=0;T<n;T++)H[T]=null;for(let T=0;T<l;T++)a=c[T],null===H[a]?H[a]=i[T]:H[a]+=i[T];for(let T=0;T<n;T++)H[T]*=1/u[T];h=!1;for(let T=0;T<n;T++)if(H[T]!==p[T]){h=!0;break}p=H,d++,d>200&&(h=!1)}const m={};for(let H=0;H<n;H++)m[H]=[];for(let H=0;H<l;H++)a=c[H],m[a].push(i[H]);let y=[];for(let H=0;H<n;H++)y.push(m[H][0]),y.push(m[H][m[H].length-1]);y=y.sort((H,T)=>H-T),o.push(y[0]);for(let H=1;H<y.length;H+=2){const T=y[H];!isNaN(T)&&-1===o.indexOf(T)&&o.push(T)}}return o}const l5=.022;function yT(t,e,n){return.2126729*Math.pow(t/255,2.4)+.7151522*Math.pow(e/255,2.4)+.072175*Math.pow(n/255,2.4)}const{sqrt:nc,pow:bi,min:Lie,max:Rie,atan2:IT,abs:AT,cos:c5,sin:bT,exp:Die,PI:_T}=Math,Pie={cool:()=>a5([br.hsl(180,1,.9),br.hsl(250,.7,.4)]),hot:()=>a5(["#000","#f00","#ff0","#fff"]).mode("rgb")},v8={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},xT=Object.keys(v8),ST=new Map(xT.map(t=>[t.toLowerCase(),t])),kie="function"==typeof Proxy?new Proxy(v8,{get(t,e){const n=e.toLowerCase();if(ST.has(n))return t[ST.get(n)]},getOwnPropertyNames:()=>Object.getOwnPropertyNames(xT)}):v8,{max:HT}=Math;Ct.prototype.cmyk=function(){return((...t)=>{let[e,n,r]=Qn(t,"rgb");e/=255,n/=255,r/=255;const s=1-HT(e,HT(n,r)),i=s<1?1/(1-s):0;return[(1-e-s)*i,(1-n-s)*i,(1-r-s)*i,s]})(this._rgb)},Object.assign(br,{cmyk:(...t)=>new Ct(...t,"cmyk")}),Yn.format.cmyk=(...t)=>{t=Qn(t,"cmyk");const[e,n,r,s]=t,i=t.length>4?t[4]:1;return 1===s?[0,0,0,i]:[e>=1?0:255*(1-e)*(1-s),n>=1?0:255*(1-n)*(1-s),r>=1?0:255*(1-r)*(1-s),i]},Yn.autodetect.push({p:2,test:(...t)=>{if("array"===ur(t=Qn(t,"cmyk"))&&4===t.length)return"cmyk"}});const MT=(...t)=>{const[e,n,r,...s]=Qn(t,"rgb"),[i,o,a]=p8(e,n,r),[l,c,u]=lT(i,o,a);return[l,c,u,...s.length>0&&s[0]<1?[s[0]]:[]]},{round:w8}=Math,zT=(...t)=>{t=Qn(t,"lch");const[e,n,r,...s]=t,[i,o,a]=aT(e,n,r),[l,c,u]=d8(i,o,a);return[l,c,u,...s.length>0&&s[0]<1?[s[0]]:[]]},rc=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,Ga=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,u5=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,ma=/\s*/.source,q2=/\s+/.source,C8=/\s*,\s*/.source,h5=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,J2=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,VT=new RegExp("^rgba?\\("+ma+[rc,rc,rc].join(q2)+J2+"\\)$"),ET=new RegExp("^rgb\\("+ma+[rc,rc,rc].join(C8)+ma+"\\)$"),TT=new RegExp("^rgba\\("+ma+[rc,rc,rc,Ga].join(C8)+ma+"\\)$"),LT=new RegExp("^hsla?\\("+ma+[h5,u5,u5].join(q2)+J2+"\\)$"),RT=new RegExp("^hsl?\\("+ma+[h5,u5,u5].join(C8)+ma+"\\)$"),DT=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,BT=new RegExp("^lab\\("+ma+[Ga,Ga,Ga].join(q2)+J2+"\\)$"),NT=new RegExp("^lch\\("+ma+[Ga,Ga,h5].join(q2)+J2+"\\)$"),FT=new RegExp("^oklab\\("+ma+[Ga,Ga,Ga].join(q2)+J2+"\\)$"),PT=new RegExp("^oklch\\("+ma+[Ga,Ga,h5].join(q2)+J2+"\\)$"),{round:kT}=Math,Q2=t=>t.map((e,n)=>n<=2?pu(kT(e),0,255):e),_i=(t,e=0,n=100,r=!1)=>("string"==typeof t&&t.endsWith("%")&&(t=parseFloat(t.substring(0,t.length-1))/100,t=r?e+.5*(t+1)*(n-e):e+t*(n-e)),+t),Io=(t,e)=>"none"===t?e:t,OT=t=>{if("transparent"===(t=t.toLowerCase().trim()))return[0,0,0,0];let e;if(Yn.format.named)try{return Yn.format.named(t)}catch{}if((e=t.match(VT))||(e=t.match(ET))){let n=e.slice(1,4);for(let s=0;s<3;s++)n[s]=+_i(Io(n[s],0),0,255);n=Q2(n);const r=void 0!==e[4]?+_i(e[4],0,1):1;return n[3]=r,n}if(e=t.match(TT)){const n=e.slice(1,5);for(let r=0;r<4;r++)n[r]=+_i(n[r],0,255);return n}if((e=t.match(LT))||(e=t.match(RT))){const n=e.slice(1,4);n[0]=+Io(n[0].replace("deg",""),0),n[1]=.01*+_i(Io(n[1],0),0,100),n[2]=.01*+_i(Io(n[2],0),0,100);const r=Q2(h8(n)),s=void 0!==e[4]?+_i(e[4],0,1):1;return r[3]=s,r}if(e=t.match(DT)){const n=e.slice(1,4);n[1]*=.01,n[2]*=.01;const r=h8(n);for(let s=0;s<3;s++)r[s]=kT(r[s]);return r[3]=+e[4],r}if(e=t.match(BT)){const n=e.slice(1,4);n[0]=_i(Io(n[0],0),0,100),n[1]=_i(Io(n[1],0),-125,125,!0),n[2]=_i(Io(n[2],0),-125,125,!0);const r=M0();tc("d50");const s=Q2(s8(n));tc(r);const i=void 0!==e[4]?+_i(e[4],0,1):1;return s[3]=i,s}if(e=t.match(NT)){const n=e.slice(1,4);n[0]=_i(n[0],0,100),n[1]=_i(Io(n[1],0),0,150,!1),n[2]=+Io(n[2].replace("deg",""),0);const r=M0();tc("d50");const s=Q2(l8(n));tc(r);const i=void 0!==e[4]?+_i(e[4],0,1):1;return s[3]=i,s}if(e=t.match(FT)){const n=e.slice(1,4);n[0]=_i(Io(n[0],0),0,1),n[1]=_i(Io(n[1],0),-.4,.4,!0),n[2]=_i(Io(n[2],0),-.4,.4,!0);const r=Q2(d8(n)),s=void 0!==e[4]?+_i(e[4],0,1):1;return r[3]=s,r}if(e=t.match(PT)){const n=e.slice(1,4);n[0]=_i(Io(n[0],0),0,1),n[1]=_i(Io(n[1],0),0,.4,!1),n[2]=+Io(n[2].replace("deg",""),0);const r=Q2(zT(n)),s=void 0!==e[4]?+_i(e[4],0,1):1;return r[3]=s,r}};OT.test=t=>VT.test(t)||LT.test(t)||BT.test(t)||NT.test(t)||FT.test(t)||PT.test(t)||ET.test(t)||TT.test(t)||RT.test(t)||DT.test(t)||"transparent"===t;const GT=OT;Ct.prototype.css=function(t){return((...t)=>{const e=Qn(t,"rgba");let n=Z2(t)||"rgb";if("hsl"===n.substr(0,3))return((...t)=>{const e=Qn(t,"hsla");let n=Z2(t)||"lsa";return e[0]=ga(e[0]||0)+"deg",e[1]=ga(100*e[1])+"%",e[2]=ga(100*e[2])+"%","hsla"===n||e.length>3&&e[3]<1?(e[3]="/ "+(e.length>3?e[3]:1),n="hsla"):e.length=3,`${n.substr(0,3)}(${e.join(" ")})`})(uT(e),n);if("lab"===n.substr(0,3)){const r=M0();tc("d50");const s=((...t)=>{const e=Qn(t,"lab");let n=Z2(t)||"lab";return e[0]=ga(e[0])+"%",e[1]=ga(e[1]),e[2]=ga(e[2]),"laba"===n||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lab(${e.join(" ")})`})(o8(e),n);return tc(r),s}if("lch"===n.substr(0,3)){const r=M0();tc("d50");const s=((...t)=>{const e=Qn(t,"lch");let n=Z2(t)||"lab";return e[0]=ga(e[0])+"%",e[1]=ga(e[1]),e[2]=isNaN(e[2])?"none":ga(e[2])+"deg","lcha"===n||e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`lch(${e.join(" ")})`})(c8(e),n);return tc(r),s}return"oklab"===n.substr(0,5)?((...t)=>{const e=Qn(t,"lab");return e[0]=ga(100*e[0])+"%",e[1]=t8(e[1]),e[2]=t8(e[2]),e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklab(${e.join(" ")})`})(p8(e)):"oklch"===n.substr(0,5)?((...t)=>{const e=Qn(t,"lch");return e[0]=ga(100*e[0])+"%",e[1]=t8(e[1]),e[2]=isNaN(e[2])?"none":ga(e[2])+"deg",e.length>3&&e[3]<1?e[3]="/ "+(e.length>3?e[3]:1):e.length=3,`oklch(${e.join(" ")})`})(MT(e)):(e[0]=w8(e[0]),e[1]=w8(e[1]),e[2]=w8(e[2]),("rgba"===n||e.length>3&&e[3]<1)&&(e[3]="/ "+(e.length>3?e[3]:1),n="rgba"),`${n.substr(0,3)}(${e.slice(0,"rgb"===n?3:4).join(" ")})`)})(this._rgb,t)},br.css=(...t)=>new Ct(...t,"css"),Yn.format.css=GT,Yn.autodetect.push({p:5,test:(t,...e)=>{if(!e.length&&"string"===ur(t)&&GT.test(t))return"css"}}),Yn.format.gl=(...t)=>{const e=Qn(t,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e},br.gl=(...t)=>new Ct(...t,"gl"),Ct.prototype.gl=function(){const t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]},Ct.prototype.hex=function(t){return sT(this._rgb,t)},br.hex=(...t)=>new Ct(...t,"hex"),Yn.format.hex=rT,Yn.autodetect.push({p:4,test:(t,...e)=>{if(!e.length&&"string"===ur(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});const{log:d5}=Math,WT=t=>{const e=t/100;let n,r,s;return e<66?(n=255,r=e<6?0:-155.25485562709179-.44596950469579133*(r=e-2)+104.49216199393888*d5(r),s=e<20?0:.8274096064007395*(s=e-10)-254.76935184120902+115.67994401066147*d5(s)):(n=351.97690566805693+.114206453784165*(n=e-55)-40.25366309332127*d5(n),r=325.4494125711974+.07943456536662342*(r=e-50)-28.0852963507957*d5(r),s=255),[n,r,s,1]},{round:Jie}=Math;Ct.prototype.temp=Ct.prototype.kelvin=Ct.prototype.temperature=function(){return(()=>{const e=Qn([this._rgb],"rgb"),n=e[0],r=e[2];let a,s=1e3,i=4e4;for(;i-s>.4;){a=.5*(i+s);const l=WT(a);l[2]/l[0]>=r/n?i=a:s=a}return Jie(a)})()};const y8=(...t)=>new Ct(...t,"temp");Object.assign(br,{temp:y8,kelvin:y8,temperature:y8}),Yn.format.temp=Yn.format.kelvin=Yn.format.temperature=WT,Ct.prototype.oklch=function(){return MT(this._rgb)},Object.assign(br,{oklch:(...t)=>new Ct(...t,"oklch")}),Yn.format.oklch=zT,Yn.autodetect.push({p:2,test:(...t)=>{if("array"===ur(t=Qn(t,"oklch"))&&3===t.length)return"oklch"}}),Object.assign(br,{analyze:gT,average:(t,e="lrgb",n=null)=>{const r=t.length;n||(n=Array.from(new Array(r)).map(()=>1));const s=r/n.reduce(function(h,d){return h+d});if(n.forEach((h,d)=>{n[d]*=s}),t=t.map(h=>new Ct(h)),"lrgb"===e)return((t,e)=>{const n=t.length,r=[0,0,0,0];for(let s=0;s<t.length;s++){const o=e[s]/n,a=t[s]._rgb;r[0]+=f8(a[0],2)*o,r[1]+=f8(a[1],2)*o,r[2]+=f8(a[2],2)*o,r[3]+=a[3]*o}return r[0]=g8(r[0]),r[1]=g8(r[1]),r[2]=g8(r[2]),r[3]>.9999999&&(r[3]=1),new Ct(e8(r))})(t,n);const i=t.shift(),o=i.get(e),a=[];let l=0,c=0;for(let h=0;h<o.length;h++)if(o[h]=(o[h]||0)*n[0],a.push(isNaN(o[h])?0:n[0]),"h"===e.charAt(h)&&!isNaN(o[h])){const d=o[h]/180*m8;l+=hT(d)*n[0],c+=dT(d)*n[0]}let u=i.alpha()*n[0];t.forEach((h,d)=>{const p=h.get(e);u+=h.alpha()*n[d+1];for(let m=0;m<o.length;m++)if(!isNaN(p[m]))if(a[m]+=n[d+1],"h"===e.charAt(m)){const y=p[m]/180*m8;l+=hT(y)*n[d+1],c+=dT(y)*n[d+1]}else o[m]+=p[m]*n[d+1]});for(let h=0;h<o.length;h++)if("h"===e.charAt(h)){let d=tie(c/a[h],l/a[h])/m8*180;for(;d<0;)d+=360;for(;d>=360;)d-=360;o[h]=d}else o[h]=o[h]/a[h];return u/=r,new Ct(o,e).alpha(u>.99999?1:u,!0)},bezier:t=>{const e=function(t){let e,n,r,s;if(2===(t=t.map(i=>new Ct(i))).length)[n,r]=t.map(i=>i.lab()),e=function(i){const o=[0,1,2].map(a=>n[a]+i*(r[a]-n[a]));return new Ct(o,"lab")};else if(3===t.length)[n,r,s]=t.map(i=>i.lab()),e=function(i){const o=[0,1,2].map(a=>(1-i)*(1-i)*n[a]+2*(1-i)*i*r[a]+i*i*s[a]);return new Ct(o,"lab")};else if(4===t.length){let i;[n,r,s,i]=t.map(o=>o.lab()),e=function(o){const a=[0,1,2].map(l=>(1-o)*(1-o)*(1-o)*n[l]+3*(1-o)*(1-o)*o*r[l]+3*(1-o)*o*o*s[l]+o*o*o*i[l]);return new Ct(a,"lab")}}else{if(!(t.length>=5))throw new RangeError("No point in running bezier with only one color.");{let i,o,a;i=t.map(l=>l.lab()),a=t.length-1,o=function(t){let e=[1,1];for(let n=1;n<t;n++){let r=[1];for(let s=1;s<=e.length;s++)r[s]=(e[s]||0)+e[s-1];e=r}return e}(a),e=function(l){const c=1-l,u=[0,1,2].map(h=>i.reduce((d,p,m)=>d+o[m]*c**(a-m)*l**m*p[h],0));return new Ct(u,"lab")}}}return e}(t);return e.scale=()=>a5(e),e},blend:vie,brewer:kie,Color:Ct,colors:j2,contrast:(t,e)=>{t=new Ct(t),e=new Ct(e);const n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},contrastAPCA:(t,e)=>{t=new Ct(t),e=new Ct(e),t.alpha()<1&&(t=$2(e,t,t.alpha(),"rgb"));const n=yT(...t.rgb()),r=yT(...e.rgb()),s=n>=l5?n:n+Math.pow(l5-n,1.414),i=r>=l5?r:r+Math.pow(l5-r,1.414),o=Math.pow(i,.56)-Math.pow(s,.57),a=Math.pow(i,.65)-Math.pow(s,.62),l=Math.abs(i-s)<5e-4?0:s<i?1.14*o:1.14*a;return 100*(Math.abs(l)<.1?0:l>0?l-.027:l+.027)},cubehelix:function Iie(t=300,e=-1.5,n=1,r=1,s=[0,1]){let o,i=0;"array"===ur(s)?o=s[1]-s[0]:(o=0,s=[s,s]);const a=function(l){const c=ec*((t+120)/360+e*l),u=wie(s[0]+o*l,r),d=(0!==i?n[0]+l*i:n)*u*(1-u)/2,p=yie(c),m=Cie(c);return br(e8([255*(u+d*(-.14861*p+1.78277*m)),255*(u+d*(-.29227*p-.90649*m)),255*(u+d*(1.97294*p)),1]))};return a.start=function(l){return null==l?t:(t=l,a)},a.rotations=function(l){return null==l?e:(e=l,a)},a.gamma=function(l){return null==l?r:(r=l,a)},a.hue=function(l){return null==l?n:("array"===ur(n=l)?(i=n[1]-n[0],0===i&&(n=n[1])):i=0,a)},a.lightness=function(l){return null==l?s:("array"===ur(l)?(s=l,o=l[1]-l[0]):(s=[l,l],o=0),a)},a.scale=()=>br.scale(a),a.hue(n),a},deltaE:function Bie(t,e,n=1,r=1,s=1){var i=function(Si){return 360*Si/(2*_T)},o=function(Si){return 2*_T*Si/360};t=new Ct(t),e=new Ct(e);const[a,l,c]=Array.from(t.lab()),[u,h,d]=Array.from(e.lab()),p=(a+u)/2,H=(nc(bi(l,2)+bi(c,2))+nc(bi(h,2)+bi(d,2)))/2,T=.5*(1-nc(bi(H,7)/(bi(H,7)+bi(25,7)))),V=l*(1+T),J=h*(1+T),ie=nc(bi(V,2)+bi(c,2)),D=nc(bi(J,2)+bi(d,2)),re=(ie+D)/2,j=i(IT(c,V)),ue=i(IT(d,J)),Me=j>=0?j:j+360,Ce=ue>=0?ue:ue+360,ze=AT(Me-Ce)>180?(Me+Ce+360)/2:(Me+Ce)/2,Ae=1-.17*c5(o(ze-30))+.24*c5(o(2*ze))+.32*c5(o(3*ze+6))-.2*c5(o(4*ze-63));let dt=Ce-Me;dt=AT(dt)<=180?dt:Ce<=Me?dt+360:dt-360,dt=2*nc(ie*D)*bT(o(dt)/2);const ft=u-a,$e=D-ie,Xt=1+.015*bi(p-50,2)/nc(20+bi(p-50,2)),pn=1+.045*re,bs=1+.015*re*Ae,Ds=30*Die(-bi((ze-275)/25,2)),Ns=-2*nc(bi(re,7)/(bi(re,7)+bi(25,7)))*bT(2*o(Ds)),xi=nc(bi(ft/(n*Xt),2)+bi($e/(r*pn),2)+bi(dt/(s*bs),2)+Ns*($e/(r*pn))*(dt/(s*bs)));return Rie(0,Lie(100,xi))},distance:function Nie(t,e,n="lab"){t=new Ct(t),e=new Ct(e);const r=t.get(n),s=e.get(n);let i=0;for(let o in r){const a=(r[o]||0)-(s[o]||0);i+=a*a}return Math.sqrt(i)},input:Yn,interpolate:$2,limits:mT,mix:$2,random:()=>{let t="#";for(let e=0;e<6;e++)t+="0123456789abcdef".charAt(bie(16*_ie()));return new Ct(t,"hex")},scale:a5,scales:Pie,valid:(...t)=>{try{return new Ct(...t),!0}catch{return!1}}});const ci=br;let eoe=(()=>{var t;class e{static getColor(r){return document.documentElement.style.getPropertyValue(`--color-${r}`)}static generateBgOpacityClasses(r,s,i=[0,10,25,50,75]){const o=ci(s),a=document.createElement("style");a.innerHTML=i.reduce((l,c)=>(l+=`.bg-${r}-opacity-${c}{background-color:${o.alpha(c/100).css()};}`)+`.hover-bg-${r}-opacity-${c}:hover {background-color:${o.alpha(c/100).css()};}`,""),document.getElementsByTagName("head")[0].appendChild(a)}static applyCssVariables(r,s,i,o,a,l,c){const u=(m,y)=>{document.documentElement.style.setProperty(`--color-${m}`,y.css())},h=ci("black"),d=ci("white");u("primary",ci(r)),u("primary-lighter",ci.scale([r,d]).mode("lab")(.3)),u("primary-lightest",ci.scale([r,d]).mode("lab")(.6)),u("primary-white",ci.scale([r,d]).mode("lab")(.85)),u("primary-darker",ci.scale([r,h]).mode("lab")(.3)),u("primary-darkest",ci.scale([r,h]).mode("lab")(.6)),u("primary-black",ci.scale([r,h]).mode("lab")(.85)),u("secondary",ci(s)),u("secondary-lighter",ci.scale([s,d]).mode("lab")(.3)),u("secondary-lightest",ci.scale([s,d]).mode("lab")(.6)),u("secondary-white",ci.scale([s,d]).mode("lab")(.85)),u("secondary-darker",ci.scale([s,h]).mode("lab")(.3)),u("secondary-darkest",ci.scale([s,h]).mode("lab")(.6)),u("secondary-black",ci.scale([s,h]).mode("lab")(.85)),u("main",ci(i)),u("background",ci(o));const p=ci.scale([o,i]).mode("lrgb");if(u("gray-50",p(.05)),u("gray-100",p(.1)),u("gray-200",p(.2)),u("gray-300",p(.3)),u("gray-400",p(.4)),u("gray-500",p(.5)),u("gray-600",p(.6)),u("gray-700",p(.7)),u("gray-800",p(.8)),u("gray-900",p(.9)),u("gray-950",p(.95)),a&&document.documentElement.style.setProperty("--font-family-main",a),l&&document.documentElement.style.setProperty("--font-family-title",l),c){const m=document.createElement("link");m.href=c,m.rel="stylesheet",m.type="text/css",document.head.append(m)}}static generateLabelColor(r,s,i){let o=0;for(let a=0;a<r.length;a++)o+=r.charCodeAt(a);return ci.hsl(o%360,s,i).css()}static setFavicon(r){const s=document.querySelector("link[rel*='icon']")||document.createElement("link");s.rel="icon",s.href=r,document.getElementsByTagName("head")[0].appendChild(s)}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)},this.\u0275prov=Mt({token:e,factory:e.\u0275fac,providedIn:"root"}))}return t(),e})(),soe=0;var yl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},I8={},p5={},f5={};Object.defineProperty(f5,"__esModule",{value:!0}),f5.StringScanner=void 0;const ooe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;f5.StringScanner=class aoe{constructor(e){if(this.charCount=this.charLength(e,!0),this.charIndex=0,this.length=e.length,this.multiByteMode=this.charCount!==this.length,this.string=e,this.multiByteMode){let n=[];for(let r=0,s=0;s<this.charCount;++s)n[s]=r,r+=e.codePointAt(r)>65535?2:1;this.charsToBytes=n}}get isEnd(){return this.charIndex>=this.charCount}charLength(e,n=this.multiByteMode){return n?e.replace(ooe,"_").length:e.length}advance(e=1){this.charIndex=Math.min(this.charCount,this.charIndex+e)}charIndexToByteIndex(e=this.charIndex){return this.multiByteMode?this.charsToBytes[e]??1/0:e}consume(e=1){let n=this.peek(e);return this.advance(e),n}consumeMatch(e){if(!e.sticky)throw new Error('`regex` must have a sticky flag ("y")');e.lastIndex=this.charIndexToByteIndex();let n=e.exec(this.string);if(null===n||0===n.length)return"";let r=n[0];return this.advance(this.charLength(r)),r}consumeMatchFn(e){let n,r="";for(;(n=this.peek())&&e(n);)r+=n,this.advance();return r}consumeString(e){if(this.consumeStringFast(e))return e;if(this.multiByteMode){let{length:n}=e,r=this.charLength(e);if(r!==n&&e===this.peek(r))return this.advance(r),e}return""}consumeStringFast(e){let{length:n}=e;return this.peek(n)===e?(this.advance(n),e):""}consumeUntilMatch(e){let n=this.string.slice(this.charIndexToByteIndex()),r=n.search(e);if(r<=0)return"";let s=n.slice(0,r);return this.advance(this.charLength(s)),s}consumeUntilString(e){let{string:n}=this,r=this.charIndexToByteIndex(),s=n.indexOf(e,r);if(s<=0)return"";let i=n.slice(r,s);return this.advance(this.charLength(i)),i}peek(e=1){let{charIndex:n,multiByteMode:r,string:s}=this;return r?n>=this.charCount?"":s.slice(this.charIndexToByteIndex(n),this.charIndexToByteIndex(n+e)):s.slice(n,n+e)}reset(e=0){this.charIndex=e>=0?Math.min(this.charCount,e):Math.max(0,this.charIndex+e)}};var si={};function ZT(t){let e=A8(t);return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57||45===e||46===e||183===e||e>=768&&e<=879||e>=8255&&e<=8256||jT(t,e)}function jT(t,e=A8(t)){return e>=97&&e<=122||e>=65&&e<=90||58===e||95===e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function A8(t){return t.codePointAt(0)||-1}Object.defineProperty(si,"__esModule",{value:!0}),si.isXmlCodePoint=si.isWhitespace=si.isReferenceChar=si.isNameStartChar=si.isNameChar=si.predefinedEntities=si.endCharData=si.attValueNormalizedWhitespace=si.attValueCharSingleQuote=si.attValueCharDoubleQuote=void 0,si.attValueCharDoubleQuote=/[^"&<]+/y,si.attValueCharSingleQuote=/[^'&<]+/y,si.attValueNormalizedWhitespace=/\r\n|[\n\r\t]/g,si.endCharData=/<|&|]]>/,si.predefinedEntities=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'})),si.isNameChar=ZT,si.isNameStartChar=jT,si.isReferenceChar=function loe(t){return"#"===t||ZT(t)},si.isWhitespace=function coe(t){let e=A8(t);return 32===e||9===e||10===e||13===e},si.isXmlCodePoint=function uoe(t){return 9===t||10===t||13===t||t>=32&&t<=55295||t>=57344&&t<=65533||t>=65536&&t<=1114111};var z0={},Jo={};Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.XmlNode=void 0;class Wa{constructor(){this.parent=null,this.start=-1,this.end=-1}get document(){var e;return(null==(e=this.parent)?void 0:e.document)??null}get isRootNode(){return null!==this.parent&&this.parent===this.document&&this.type===Wa.TYPE_ELEMENT}get preserveWhitespace(){var e;return!(null==(e=this.parent)||!e.preserveWhitespace)}get type(){return""}toJSON(){let e={type:this.type};return this.isRootNode&&(e.isRootNode=!0),this.preserveWhitespace&&(e.preserveWhitespace=!0),-1!==this.start&&(e.start=this.start,e.end=this.end),e}}Jo.XmlNode=Wa,Wa.TYPE_CDATA="cdata",Wa.TYPE_COMMENT="comment",Wa.TYPE_DOCUMENT="document",Wa.TYPE_DOCUMENT_TYPE="doctype",Wa.TYPE_ELEMENT="element",Wa.TYPE_PROCESSING_INSTRUCTION="pi",Wa.TYPE_TEXT="text",Wa.TYPE_XML_DECLARATION="xmldecl";var eh={};Object.defineProperty(eh,"__esModule",{value:!0}),eh.XmlText=void 0;const b8=Jo;eh.XmlText=class hoe extends b8.XmlNode{constructor(e=""){super(),this.text=e}get type(){return b8.XmlNode.TYPE_TEXT}toJSON(){return Object.assign(b8.XmlNode.prototype.toJSON.call(this),{text:this.text})}},Object.defineProperty(z0,"__esModule",{value:!0}),z0.XmlCdata=void 0;const doe=Jo,poe=eh;z0.XmlCdata=class foe extends poe.XmlText{get type(){return doe.XmlNode.TYPE_CDATA}};var V0={};Object.defineProperty(V0,"__esModule",{value:!0}),V0.XmlComment=void 0;const _8=Jo;V0.XmlComment=class goe extends _8.XmlNode{constructor(e=""){super(),this.content=e}get type(){return _8.XmlNode.TYPE_COMMENT}toJSON(){return Object.assign(_8.XmlNode.prototype.toJSON.call(this),{content:this.content})}};var E0={};Object.defineProperty(E0,"__esModule",{value:!0}),E0.XmlDeclaration=void 0;const x8=Jo;E0.XmlDeclaration=class moe extends x8.XmlNode{constructor(e,n,r){super(),this.version=e,this.encoding=n??null,this.standalone=r??null}get type(){return x8.XmlNode.TYPE_XML_DECLARATION}toJSON(){let e=x8.XmlNode.prototype.toJSON.call(this);e.version=this.version;for(let n of["encoding","standalone"])null!==this[n]&&(e[n]=this[n]);return e}};var T0={},th={};Object.defineProperty(th,"__esModule",{value:!0}),th.XmlElement=void 0;const S8=Jo;class H8 extends S8.XmlNode{constructor(e,n=Object.create(null),r=[]){super(),this.name=e,this.attributes=n,this.children=r}get isEmpty(){return 0===this.children.length}get preserveWhitespace(){let e=this;for(;e instanceof H8;){if("xml:space"in e.attributes)return"preserve"===e.attributes["xml:space"];e=e.parent}return!1}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return S8.XmlNode.TYPE_ELEMENT}toJSON(){return Object.assign(S8.XmlNode.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(e=>e.toJSON())})}}th.XmlElement=H8,Object.defineProperty(T0,"__esModule",{value:!0}),T0.XmlDocument=void 0;const voe=th,M8=Jo;T0.XmlDocument=class woe extends M8.XmlNode{constructor(e=[]){super(),this.children=e}get document(){return this}get root(){for(let e of this.children)if(e instanceof voe.XmlElement)return e;return null}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return M8.XmlNode.TYPE_DOCUMENT}toJSON(){return Object.assign(M8.XmlNode.prototype.toJSON.call(this),{children:this.children.map(e=>e.toJSON())})}};var L0={};Object.defineProperty(L0,"__esModule",{value:!0}),L0.XmlDocumentType=void 0;const z8=Jo;L0.XmlDocumentType=class Coe extends z8.XmlNode{constructor(e,n,r,s){super(),this.name=e,this.publicId=n??null,this.systemId=r??null,this.internalSubset=s??null}get type(){return z8.XmlNode.TYPE_DOCUMENT_TYPE}toJSON(){let e=z8.XmlNode.prototype.toJSON.call(this);e.name=this.name;for(let n of["publicId","systemId","internalSubset"])null!==this[n]&&(e[n]=this[n]);return e}};var R0={};Object.defineProperty(R0,"__esModule",{value:!0}),R0.XmlError=void 0;class yoe extends Error{constructor(e,n,r){let s=1,i="",o=1;for(let c=0;c<n;++c){let u=r[c];"\n"===u?(s=1,i="",o+=1):(s+=1,i+=u)}let a=r.indexOf("\n",n);i+=-1===a?r.slice(n):r.slice(n,a);let l=0;i.length>50&&(s<40?i=i.slice(0,50):(l=s-20,i=i.slice(l,s+30))),super(`${e} (line ${o}, column ${s})\n  ${i}\n`+" ".repeat(s-l+1)+"^\n"),this.column=s,this.excerpt=i,this.line=o,this.name="XmlError",this.pos=n}}R0.XmlError=yoe;var D0={};Object.defineProperty(D0,"__esModule",{value:!0}),D0.XmlProcessingInstruction=void 0;const V8=Jo;D0.XmlProcessingInstruction=class Ioe extends V8.XmlNode{constructor(e,n=""){super(),this.name=e,this.content=n}get type(){return V8.XmlNode.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(V8.XmlNode.prototype.toJSON.call(this),{name:this.name,content:this.content})}};var Aoe=yl&&yl.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),boe=yl&&yl.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_oe=yl&&yl.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&Aoe(e,t,n);return boe(e,t),e};Object.defineProperty(p5,"__esModule",{value:!0}),p5.Parser=void 0;const xoe=f5,Za=_oe(si),Soe=z0,Hoe=V0,Moe=E0,zoe=T0,Voe=L0,Eoe=th,Toe=R0,Loe=Jo,UT=D0,Roe=eh;function g5(t){let e=0;for(;-1!==(e=t.indexOf("\r",e));)t="\n"===t[e+1]?t.slice(0,e)+t.slice(e+1):t.slice(0,e)+"\n"+t.slice(e+1);return t}p5.Parser=class Doe{constructor(e,n={}){let r=this.document=new zoe.XmlDocument,s=this.scanner=new xoe.StringScanner(e);if(this.currentNode=r,this.options=n,this.options.includeOffsets&&(r.start=0,r.end=e.length),s.consumeStringFast("\ufeff"),this.consumeProlog(),!this.consumeElement())throw this.error("Root element is missing or invalid");for(;this.consumeMisc(););if(!s.isEnd)throw this.error("Extra content at the end of the document")}addNode(e,n){return e.parent=this.currentNode,this.options.includeOffsets&&(e.start=this.scanner.charIndexToByteIndex(n),e.end=this.scanner.charIndexToByteIndex()),this.currentNode.children.push(e),!0}addText(e,n){let{children:r}=this.currentNode,{length:s}=r;if(e=g5(e),s>0){let i=r[s-1];if(i?.type===Loe.XmlNode.TYPE_TEXT){let o=i;return o.text+=e,this.options.includeOffsets&&(o.end=this.scanner.charIndexToByteIndex()),!0}}return this.addNode(new Roe.XmlText(e),n)}consumeAttributes(){let e=Object.create(null);for(;this.consumeWhitespace();){let n=this.consumeName();if(!n)break;let r=this.consumeEqual()&&this.consumeAttributeValue();if(!1===r)throw this.error("Attribute value expected");if(n in e)throw this.error(`Duplicate attribute: ${n}`);if("xml:space"===n&&"default"!==r&&"preserve"!==r)throw this.error('Value of the `xml:space` attribute must be "default" or "preserve"');e[n]=r}if(this.options.sortAttributes){let n=Object.keys(e).sort(),r=Object.create(null);for(let s=0;s<n.length;++s){let i=n[s];r[i]=e[i]}e=r}return e}consumeAttributeValue(){let{scanner:e}=this,n=e.peek();if('"'!==n&&"'"!==n)return!1;e.advance();let r,s=!1,i="",o='"'===n?Za.attValueCharDoubleQuote:Za.attValueCharSingleQuote;e:for(;!e.isEnd;)switch(r=e.consumeMatch(o),r&&(this.validateChars(r),i+=r.replace(Za.attValueNormalizedWhitespace," ")),e.peek()){case n:s=!0;break e;case"&":i+=this.consumeReference();continue;case"<":throw this.error("Unescaped `<` is not allowed in an attribute value");case"":break e}if(!s)throw this.error("Unclosed attribute");return e.advance(),i}consumeCdataSection(){let{scanner:e}=this,n=e.charIndex;if(!e.consumeStringFast("<![CDATA["))return!1;let r=e.consumeUntilString("]]>");if(this.validateChars(r),!e.consumeStringFast("]]>"))throw this.error("Unclosed CDATA section");return this.options.preserveCdata?this.addNode(new Soe.XmlCdata(g5(r)),n):this.addText(r,n)}consumeCharData(){let{scanner:e}=this,n=e.charIndex,r=e.consumeUntilMatch(Za.endCharData);if(!r)return!1;if(this.validateChars(r),"]]>"===e.peek(3))throw this.error("Element content may not contain the CDATA section close delimiter `]]>`");return this.addText(r,n)}consumeComment(){let{scanner:e}=this,n=e.charIndex;if(!e.consumeStringFast("\x3c!--"))return!1;let r=e.consumeUntilString("--");if(this.validateChars(r),!e.consumeStringFast("--\x3e"))throw"--"===e.peek(2)?this.error("The string `--` isn't allowed inside a comment"):this.error("Unclosed comment");return!this.options.preserveComments||this.addNode(new Hoe.XmlComment(g5(r)),n)}consumeContentReference(){let e=this.scanner.charIndex,n=this.consumeReference();return!!n&&this.addText(n,e)}consumeDoctypeDeclaration(){let{scanner:e}=this,n=e.charIndex;if(!e.consumeStringFast("<!DOCTYPE"))return!1;let s,i,o,r=this.consumeWhitespace()&&this.consumeName();if(!r)throw this.error("Expected a name");if(this.consumeWhitespace()){if(e.consumeStringFast("PUBLIC")){if(s=this.consumeWhitespace()&&this.consumePubidLiteral(),!1===s)throw this.error("Expected a public identifier");this.consumeWhitespace()}if(void 0!==s||e.consumeStringFast("SYSTEM")){if(this.consumeWhitespace(),i=this.consumeSystemLiteral(),!1===i)throw this.error("Expected a system identifier");this.consumeWhitespace()}}if(e.consumeStringFast("[")){if(o=e.consumeUntilMatch(/\][\x20\t\r\n]*>/),!e.consumeStringFast("]"))throw this.error("Unclosed internal subset");this.consumeWhitespace()}if(!e.consumeStringFast(">"))throw this.error("Unclosed doctype declaration");return!this.options.preserveDocumentType||this.addNode(new Voe.XmlDocumentType(r,s,i,o),n)}consumeElement(){let{scanner:e}=this,n=e.charIndex;if(!e.consumeStringFast("<"))return!1;let r=this.consumeName();if(!r)return e.reset(n),!1;let s=this.consumeAttributes(),i=!!e.consumeStringFast("/>"),o=new Eoe.XmlElement(r,s);if(o.parent=this.currentNode,!i){if(!e.consumeStringFast(">"))throw this.error(`Unclosed start tag for element \`${r}\``);this.currentNode=o;do{this.consumeCharData()}while(this.consumeElement()||this.consumeContentReference()||this.consumeCdataSection()||this.consumeProcessingInstruction()||this.consumeComment());let l,a=e.charIndex;if(!e.consumeStringFast("</")||!(l=this.consumeName())||l!==r)throw e.reset(a),this.error(`Missing end tag for element ${r}`);if(this.consumeWhitespace(),!e.consumeStringFast(">"))throw this.error(`Unclosed end tag for element ${r}`);this.currentNode=o.parent}return this.addNode(o,n)}consumeEqual(){return this.consumeWhitespace(),!!this.scanner.consumeStringFast("=")&&(this.consumeWhitespace(),!0)}consumeMisc(){return this.consumeComment()||this.consumeProcessingInstruction()||this.consumeWhitespace()}consumeName(){return Za.isNameStartChar(this.scanner.peek())?this.scanner.consumeMatchFn(Za.isNameChar):""}consumeProcessingInstruction(){let{scanner:e}=this,n=e.charIndex;if(!e.consumeStringFast("<?"))return!1;let r=this.consumeName();if(!r)throw this.error("Invalid processing instruction");if("xml"===r.toLowerCase())throw e.reset(n),this.error("XML declaration isn't allowed here");if(!this.consumeWhitespace()){if(e.consumeStringFast("?>"))return this.addNode(new UT.XmlProcessingInstruction(r),n);throw this.error("Whitespace is required after a processing instruction name")}let s=e.consumeUntilString("?>");if(this.validateChars(s),!e.consumeStringFast("?>"))throw this.error("Unterminated processing instruction");return this.addNode(new UT.XmlProcessingInstruction(r,g5(s)),n)}consumeProlog(){let{scanner:e}=this,n=e.charIndex;for(this.consumeXmlDeclaration();this.consumeMisc(););if(this.consumeDoctypeDeclaration())for(;this.consumeMisc(););return n<e.charIndex}consumePubidLiteral(){let e=this.scanner.charIndex,n=this.consumeSystemLiteral();if(!1!==n&&!/^[-\x20\r\na-zA-Z0-9'()+,./:=?;!*#@$_%]*$/.test(n))throw this.scanner.reset(e),this.error("Invalid character in public identifier");return n}consumeReference(){let{scanner:e}=this;if(!e.consumeStringFast("&"))return!1;let r,n=e.consumeMatchFn(Za.isReferenceChar);if(";"!==e.consume())throw this.error("Unterminated reference (a reference must end with `;`)");if("#"===n[0]){let s="x"===n[1]?parseInt(n.slice(2),16):parseInt(n.slice(1),10);if(isNaN(s))throw this.error("Invalid character reference");if(!Za.isXmlCodePoint(s))throw this.error("Character reference resolves to an invalid character");r=String.fromCodePoint(s)}else if(r=Za.predefinedEntities[n],void 0===r){let{ignoreUndefinedEntities:s,resolveUndefinedEntity:i}=this.options,o=`&${n};`;if(i){let a=i(o);if(null!=a){let l=typeof a;if("string"!==l)throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${l}`);return a}}if(s)return o;throw e.reset(-o.length),this.error(`Named entity isn't defined: ${o}`)}return r}consumeSystemLiteral(){let{scanner:e}=this,n=e.consumeStringFast('"')||e.consumeStringFast("'");if(!n)return!1;let r=e.consumeUntilString(n);if(this.validateChars(r),!e.consumeStringFast(n))throw this.error("Missing end quote");return r}consumeWhitespace(){return!!this.scanner.consumeMatchFn(Za.isWhitespace)}consumeXmlDeclaration(){let{scanner:e}=this,n=e.charIndex;if(!e.consumeStringFast("<?xml"))return!1;if(!this.consumeWhitespace())throw this.error("Invalid XML declaration");let s,i,r=!!e.consumeStringFast("version")&&this.consumeEqual()&&this.consumeSystemLiteral();if(!1===r)throw this.error("XML version is missing or invalid");if(!/^1\.[0-9]+$/.test(r))throw this.error("Invalid character in version number");if(this.consumeWhitespace()&&(s=!!e.consumeStringFast("encoding")&&this.consumeEqual()&&this.consumeSystemLiteral(),s&&this.consumeWhitespace(),i=!!e.consumeStringFast("standalone")&&this.consumeEqual()&&this.consumeSystemLiteral(),i)){if("yes"!==i&&"no"!==i)throw this.error('Only "yes" and "no" are permitted as values of `standalone`');this.consumeWhitespace()}if(!e.consumeStringFast("?>"))throw this.error("Invalid or unclosed XML declaration");return!this.options.preserveXmlDeclaration||this.addNode(new Moe.XmlDeclaration(r,s||void 0,i||void 0),n)}error(e){let{scanner:n}=this;return new Toe.XmlError(e,n.charIndex,n.string)}validateChars(e){let{length:n}=e;for(let r=0;r<n;++r){let s=e.codePointAt(r);if(!Za.isXmlCodePoint(s))throw this.scanner.reset(-([...e].length-r)),this.error("Invalid character");s>65535&&(r+=1)}}};var $T={};Object.defineProperty($T,"__esModule",{value:!0}),function(t){var e=yl&&yl.__createBinding||(Object.create?function(y,H,T,V){void 0===V&&(V=T);var J=Object.getOwnPropertyDescriptor(H,T);(!J||("get"in J?!H.__esModule:J.writable||J.configurable))&&(J={enumerable:!0,get:function(){return H[T]}}),Object.defineProperty(y,V,J)}:function(y,H,T,V){void 0===V&&(V=T),y[V]=H[T]}),n=yl&&yl.__exportStar||function(y,H){for(var T in y)"default"!==T&&!Object.prototype.hasOwnProperty.call(H,T)&&e(H,y,T)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseXml=t.XmlText=t.XmlProcessingInstruction=t.XmlNode=t.XmlError=t.XmlElement=t.XmlDocumentType=t.XmlDocument=t.XmlDeclaration=t.XmlComment=t.XmlCdata=void 0;const r=p5;n($T,t);var s=z0;Object.defineProperty(t,"XmlCdata",{enumerable:!0,get:function(){return s.XmlCdata}});var i=V0;Object.defineProperty(t,"XmlComment",{enumerable:!0,get:function(){return i.XmlComment}});var o=E0;Object.defineProperty(t,"XmlDeclaration",{enumerable:!0,get:function(){return o.XmlDeclaration}});var a=T0;Object.defineProperty(t,"XmlDocument",{enumerable:!0,get:function(){return a.XmlDocument}});var l=L0;Object.defineProperty(t,"XmlDocumentType",{enumerable:!0,get:function(){return l.XmlDocumentType}});var c=th;Object.defineProperty(t,"XmlElement",{enumerable:!0,get:function(){return c.XmlElement}});var u=R0;Object.defineProperty(t,"XmlError",{enumerable:!0,get:function(){return u.XmlError}});var h=Jo;Object.defineProperty(t,"XmlNode",{enumerable:!0,get:function(){return h.XmlNode}});var d=D0;Object.defineProperty(t,"XmlProcessingInstruction",{enumerable:!0,get:function(){return d.XmlProcessingInstruction}});var p=eh;Object.defineProperty(t,"XmlText",{enumerable:!0,get:function(){return p.XmlText}}),t.parseXml=function m(y,H){return new r.Parser(y,H).document}}(I8);class Boe extends Error{constructor(e){super(e)}}function va(t){const e=t.indexOf(":");return e>-1?t.substr(e+1):t}function As(t){return t.children[0]}function Il(t){return t.name||""}function _n(t,e,n=!1){const r=va(e);return t&&Array.isArray(t.children)?t.children.reduce(function s(i,o){return va(Il(o))===r&&i.push(o),n&&Array.isArray(o.children)?[...i,...o.children.reduce(s,[])]:i},[]):[]}function ge(t,e,n=!1){return _n(t,e,n)[0]||null}function Al(t){return t&&Array.isArray(t.children)?[...t.children.filter(e=>e instanceof I8.XmlElement)]:[]}function rt(t){const e=t&&Array.isArray(t.children)?t.children.find(n=>"text"===n.type):null;return e?e.text:""}function Rt(t,e){return t&&t.attributes[e]||""}class Un extends Error{constructor(e,n,r){super(e),this.httpStatus=n,this.isCrossOriginRelated=r,this.name="EndpointError"}}class T8 extends Error{constructor(e,n,r,s,i){super(e),this.requestUrl=n,this.code=r,this.locator=s,this.response=i,this.name="ServiceExceptionError"}}function YT(t,e){const n=Rt(t,"code")||Rt(t,"exceptionCode"),r=Rt(t,"locator"),i=rt(ge(t,"ExceptionText")||t).trim();return new T8(i,e,n,r,t.document)}function L8(t,e){const n=As(t),r=va(Il(n));if("ServiceExceptionReport"===r){const s=ge(n,"ServiceException");if(s)throw YT(s,e)}if("ExceptionReport"===r){const s=ge(n,"Exception");if(s)throw YT(s,e)}return t}const B0=new EventTarget;function F0(t,e,n){const r=typeof WorkerGlobalScope<"u",s=function(){var i=(0,ei.A)(function*(o){if(o.taskName===t){let a,l;try{a=yield n(o.params)}catch(u){l=function Noe(t){const e={message:t.message,stack:t.stack,name:t.name};return t instanceof T8?{...e,code:t.code,locator:t.locator,response:t.response,requestUrl:t.requestUrl}:t instanceof Un?{...e,httpStatus:t.httpStatus,isCrossOriginRelated:t.isCrossOriginRelated}:e}(u)}const c={taskName:t,requestId:o.requestId,...a&&{response:a},...l&&{error:l}};r?e.postMessage(c):B0.dispatchEvent(new CustomEvent("ogc-client.response",{detail:c}))}});return function(a){return i.apply(this,arguments)}}();r?e.addEventListener("message",i=>s(i.data)):B0.addEventListener("ogc-client.request",i=>s(i.detail))}const KT=["utf-8","utf-16","iso-8859-1"],m5=new Map;let R8={},P0=null;function JT(){return R8}function nh(t){return function v5(t,e="GET",n,r){let s=`${e}#${t}`;if((n||r)&&(s=`${e}#asJson#${t}`),m5.has(s))return m5.get(s);const i={...JT()};i.method=e,r?(i.headers="headers"in i?i.headers:{},i.headers.Accept=r):n&&(i.headers="headers"in i?i.headers:{},i.headers.Accept="application/json,application/schema+json");const o=fetch(t,i).catch(a=>a).then(a=>(m5.delete(s),a));return m5.set(s,o),o.then(a=>{if(a instanceof Error)throw a;return a.clone()})}(t).catch(()=>fetch(t,{...JT(),method:"HEAD",mode:"no-cors"}).catch(e=>{throw new Un(`Fetching the document failed either due to network errors or unreachable host, error is: ${e.message}`,0,!1)}).then(()=>{throw new Un("The document could not be fetched due to CORS limitations",0,!0)})).then(function(){var e=(0,ei.A)(function*(n){if(!n.ok){const i=yield n.text();throw new Un(`Received an error with code ${n.status}: ${i}`,n.status,!1)}return function koe(t,e){const n=e?function Poe(t){const e=/charset=([^;]+)/.exec(t);return e?e[1]:null}(e):null,r=n?[n,...KT]:KT;for(const s of r)try{return new TextDecoder(s,{fatal:!0}).decode(t)}catch{}return console.warn("[ogc-client] XML document encoding could not be determined, falling back to utf-8."),new TextDecoder("utf-8").decode(t)}(yield n.arrayBuffer(),n.headers.get("Content-Type"))});return function(n){return e.apply(this,arguments)}}()).then(e=>function XT(t){let e=null;try{e=I8.parseXml(t)}catch(n){throw new Boe(n.message)}return e}(e))}function bl(t,e){const n=t.match(/(https?%3A%2F%2F[^/]+)$/);if(n){const a=n[1],l=bl(decodeURIComponent(a),e);return t.replace(a,encodeURIComponent(l))}const r=new URL(t),s=Object.keys(e),i=s.map(a=>a.toLowerCase()),o=[];for(const a of r.searchParams.keys())i.indexOf(a.toLowerCase())>-1&&o.push(a);return o.map(a=>r.searchParams.delete(a)),s.forEach(a=>r.searchParams.set(a,!0===e[a]?"":e[a])),r.search=r.search.replace(/\+/g,"%20"),r.toString()}const QT="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICAvKiEgQHJncm92ZS9wYXJzZS14bWwgdjQuMS4wIHwgSVNDIExpY2Vuc2UgfCBDb3B5cmlnaHQgUnlhbiBHcm92ZSAqLwogIHZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7CiAgdmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwogIHZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzOwogIHZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwogIHZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4gewogICAgZm9yICh2YXIgbmFtZSBpbiBhbGwpCiAgICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7CiAgfTsKICB2YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4gewogICAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09ICJvYmplY3QiIHx8IHR5cGVvZiBmcm9tID09PSAiZnVuY3Rpb24iKSB7CiAgICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSkKICAgICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KQogICAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pOwogICAgfQogICAgcmV0dXJuIHRvOwogIH07CiAgdmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpOwogIHZhciBzcmNfZXhwb3J0cyA9IHt9OwogIF9fZXhwb3J0KHNyY19leHBvcnRzLCB7CiAgICBYbWxDZGF0YTogKCkgPT4gWG1sQ2RhdGEsCiAgICBYbWxDb21tZW50OiAoKSA9PiBYbWxDb21tZW50LAogICAgWG1sRGVjbGFyYXRpb246ICgpID0+IFhtbERlY2xhcmF0aW9uLAogICAgWG1sRG9jdW1lbnQ6ICgpID0+IFhtbERvY3VtZW50LAogICAgWG1sRG9jdW1lbnRUeXBlOiAoKSA9PiBYbWxEb2N1bWVudFR5cGUsCiAgICBYbWxFbGVtZW50OiAoKSA9PiBYbWxFbGVtZW50LAogICAgWG1sRXJyb3I6ICgpID0+IFhtbEVycm9yLAogICAgWG1sTm9kZTogKCkgPT4gWG1sTm9kZSwKICAgIFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbjogKCkgPT4gWG1sUHJvY2Vzc2luZ0luc3RydWN0aW9uLAogICAgWG1sVGV4dDogKCkgPT4gWG1sVGV4dCwKICAgIHBhcnNlWG1sOiAoKSA9PiBwYXJzZVhtbAogIH0pOwogIHZhciBicm93c2VyID0gX190b0NvbW1vbkpTKHNyY19leHBvcnRzKTsKICB2YXIgZW1wdHlTdHJpbmcgPSAiIjsKICB2YXIgc3Vycm9nYXRlUGFpciA9IC9bXHVEODAwLVx1REJGRl1bXHVEQzAwLVx1REZGRl0vZzsKICB2YXIgU3RyaW5nU2Nhbm5lciA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKHN0cmluZykgewogICAgICB0aGlzLmsgPSB0aGlzLnEoc3RyaW5nLCB0cnVlKTsKICAgICAgdGhpcy5kID0gMDsKICAgICAgdGhpcy5sZW5ndGggPSBzdHJpbmcubGVuZ3RoOwogICAgICB0aGlzLm4gPSB0aGlzLmsgIT09IHRoaXMubGVuZ3RoOwogICAgICB0aGlzLm0gPSBzdHJpbmc7CiAgICAgIGlmICh0aGlzLm4pIHsKICAgICAgICBsZXQgY2hhcnNUb0J5dGVzID0gW107CiAgICAgICAgZm9yIChsZXQgYnl0ZUluZGV4ID0gMCwgY2hhckluZGV4ID0gMDsgY2hhckluZGV4IDwgdGhpcy5rOyArK2NoYXJJbmRleCkgewogICAgICAgICAgY2hhcnNUb0J5dGVzW2NoYXJJbmRleF0gPSBieXRlSW5kZXg7CiAgICAgICAgICBieXRlSW5kZXggKz0gc3RyaW5nLmNvZGVQb2ludEF0KGJ5dGVJbmRleCkgPiA2NTUzNSA/IDIgOiAxOwogICAgICAgIH0KICAgICAgICB0aGlzLnkgPSBjaGFyc1RvQnl0ZXM7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogV2hldGhlciB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaW5kZXggaXMgYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQgc3RyaW5nLgogICAgICovCiAgICBnZXQgeigpIHsKICAgICAgcmV0dXJuIHRoaXMuZCA+PSB0aGlzLms7CiAgICB9CiAgICAvLyAtLSBQcm90ZWN0ZWQgTWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgaW4gdGhlIGdpdmVuIHN0cmluZywgd2hpY2ggbWF5IGRpZmZlciBmcm9tCiAgICAgKiB0aGUgYnl0ZSBsZW5ndGggaWYgdGhlIHN0cmluZyBjb250YWlucyBtdWx0aWJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgcShzdHJpbmcsIG11bHRpQnl0ZVNhZmUgPSB0aGlzLm4pIHsKICAgICAgcmV0dXJuIG11bHRpQnl0ZVNhZmUgPyBzdHJpbmcucmVwbGFjZShzdXJyb2dhdGVQYWlyLCAiXyIpLmxlbmd0aCA6IHN0cmluZy5sZW5ndGg7CiAgICB9CiAgICAvLyAtLSBQdWJsaWMgTWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogQWR2YW5jZXMgdGhlIHNjYW5uZXIgYnkgdGhlIGdpdmVuIG51bWJlciBvZiBjaGFyYWN0ZXJzLCBzdG9wcGluZyBpZiB0aGUgZW5kCiAgICAgKiBvZiB0aGUgc3RyaW5nIGlzIHJlYWNoZWQuCiAgICAgKi8KICAgIGcoY291bnQgPSAxKSB7CiAgICAgIHRoaXMuZCA9IE1hdGgubWluKHRoaXMuaywgdGhpcy5kICsgY291bnQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBieXRlIGluZGV4IG9mIHRoZSBnaXZlbiBjaGFyYWN0ZXIgaW5kZXggaW4gdGhlIHN0cmluZy4gVGhlIHR3bwogICAgICogbWF5IGRpZmZlciBpbiBzdHJpbmdzIHRoYXQgY29udGFpbiBtdWx0aWJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgaShjaGFySW5kZXggPSB0aGlzLmQpIHsKICAgICAgdmFyIF9hOwogICAgICByZXR1cm4gdGhpcy5uID8gKF9hID0gdGhpcy55W2NoYXJJbmRleF0pICE9IG51bGwgPyBfYSA6IEluZmluaXR5IDogY2hhckluZGV4OwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbmQgcmV0dXJucyB0aGUgZ2l2ZW4gbnVtYmVyIG9mIGNoYXJhY3RlcnMgaWYgcG9zc2libGUsIGFkdmFuY2luZwogICAgICogdGhlIHNjYW5uZXIgYW5kIHN0b3BwaW5nIGlmIHRoZSBlbmQgb2YgdGhlIHN0cmluZyBpcyByZWFjaGVkLgogICAgICoKICAgICAqIElmIG5vIGNoYXJhY3RlcnMgY291bGQgYmUgY29uc3VtZWQsIGFuIGVtcHR5IHN0cmluZyB3aWxsIGJlIHJldHVybmVkLgogICAgICovCiAgICBGKGNvdW50ID0gMSkgewogICAgICBsZXQgY2hhcnMgPSB0aGlzLmgoY291bnQpOwogICAgICB0aGlzLmcoY291bnQpOwogICAgICByZXR1cm4gY2hhcnM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgbWF0Y2ggZm9yIHRoZSBnaXZlbiBzdGlja3kgcmVnZXgsIGFkdmFuY2VzIHRoZSBzY2FubmVyLCB1cGRhdGVzCiAgICAgKiB0aGUgYGxhc3RJbmRleGAgcHJvcGVydHkgb2YgdGhlIHJlZ2V4LCBhbmQgcmV0dXJucyB0aGUgbWF0Y2hpbmcgc3RyaW5nLgogICAgICoKICAgICAqIFRoZSByZWdleCBtdXN0IGhhdmUgYSBzdGlja3kgZmxhZyAoInkiKSBzbyB0aGF0IGl0cyBgbGFzdEluZGV4YCBwcm9wIGNhbiBiZQogICAgICogdXNlZCB0byBhbmNob3IgdGhlIG1hdGNoIGF0IHRoZSBjdXJyZW50IHNjYW5uZXIgcG9zaXRpb24uCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgY29uc3VtZWQgc3RyaW5nLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKi8KICAgIEcocmVnZXgpIHsKICAgICAgaWYgKCFyZWdleC5zdGlja3kpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ByZWdleGAgbXVzdCBoYXZlIGEgc3RpY2t5IGZsYWcgKCJ5IiknKTsKICAgICAgfQogICAgICByZWdleC5sYXN0SW5kZXggPSB0aGlzLmkoKTsKICAgICAgbGV0IHJlc3VsdCA9IHJlZ2V4LmV4ZWModGhpcy5tKTsKICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICB9CiAgICAgIGxldCBtYXRjaCA9IHJlc3VsdFswXTsKICAgICAgdGhpcy5nKHRoaXMucShtYXRjaCkpOwogICAgICByZXR1cm4gbWF0Y2g7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGFuZCByZXR1cm5zIGFsbCBjaGFyYWN0ZXJzIGZvciB3aGljaCB0aGUgZ2l2ZW4gZnVuY3Rpb24gcmV0dXJucyBhCiAgICAgKiB0cnV0aHkgdmFsdWUsIHN0b3BwaW5nIG9uIHRoZSBmaXJzdCBmYWxzeSByZXR1cm4gdmFsdWUgb3IgaWYgdGhlIGVuZCBvZiB0aGUKICAgICAqIGlucHV0IGlzIHJlYWNoZWQuCiAgICAgKi8KICAgIHYoZm4pIHsKICAgICAgbGV0IGNoYXI7CiAgICAgIGxldCBtYXRjaCA9IGVtcHR5U3RyaW5nOwogICAgICB3aGlsZSAoKGNoYXIgPSB0aGlzLmgoKSkgJiYgZm4oY2hhcikpIHsKICAgICAgICBtYXRjaCArPSBjaGFyOwogICAgICAgIHRoaXMuZygpOwogICAgICB9CiAgICAgIHJldHVybiBtYXRjaDsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgdGhlIGdpdmVuIHN0cmluZyBpZiBpdCBleGlzdHMgYXQgdGhlIGN1cnJlbnQgY2hhcmFjdGVyIGluZGV4LCBhbmQKICAgICAqIGFkdmFuY2VzIHRoZSBzY2FubmVyLgogICAgICoKICAgICAqIElmIHRoZSBnaXZlbiBzdHJpbmcgZG9lc24ndCBleGlzdCBhdCB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaW5kZXgsIGFuIGVtcHR5CiAgICAgKiBzdHJpbmcgd2lsbCBiZSByZXR1cm5lZCBhbmQgdGhlIHNjYW5uZXIgd2lsbCBub3QgYmUgYWR2YW5jZWQuCiAgICAgKi8KICAgIFEoc3RyaW5nVG9Db25zdW1lKSB7CiAgICAgIGlmICh0aGlzLmIoc3RyaW5nVG9Db25zdW1lKSkgewogICAgICAgIHJldHVybiBzdHJpbmdUb0NvbnN1bWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubikgewogICAgICAgIGxldCB7IGxlbmd0aCB9ID0gc3RyaW5nVG9Db25zdW1lOwogICAgICAgIGxldCBjaGFyTGVuZ3RoVG9NYXRjaCA9IHRoaXMucShzdHJpbmdUb0NvbnN1bWUpOwogICAgICAgIGlmIChjaGFyTGVuZ3RoVG9NYXRjaCAhPT0gbGVuZ3RoICYmIHN0cmluZ1RvQ29uc3VtZSA9PT0gdGhpcy5oKGNoYXJMZW5ndGhUb01hdGNoKSkgewogICAgICAgICAgdGhpcy5nKGNoYXJMZW5ndGhUb01hdGNoKTsKICAgICAgICAgIHJldHVybiBzdHJpbmdUb0NvbnN1bWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBlbXB0eVN0cmluZzsKICAgIH0KICAgIC8qKgogICAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBgY29uc3VtZVN0cmluZygpYCwgYnV0IGRvZXNuJ3Qgc3VwcG9ydCBjb25zdW1pbmcKICAgICAqIG11bHRpYnl0ZSBjaGFyYWN0ZXJzLiBUaGlzIGNhbiBiZSBmYXN0ZXIgaWYgeW91IG9ubHkgbmVlZCB0byBtYXRjaCBzaW5nbGUKICAgICAqIGJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgYihzdHJpbmdUb0NvbnN1bWUpIHsKICAgICAgbGV0IHsgbGVuZ3RoIH0gPSBzdHJpbmdUb0NvbnN1bWU7CiAgICAgIGlmICh0aGlzLmgobGVuZ3RoKSA9PT0gc3RyaW5nVG9Db25zdW1lKSB7CiAgICAgICAgdGhpcy5nKGxlbmd0aCk7CiAgICAgICAgcmV0dXJuIHN0cmluZ1RvQ29uc3VtZTsKICAgICAgfQogICAgICByZXR1cm4gZW1wdHlTdHJpbmc7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGNoYXJhY3RlcnMgdW50aWwgdGhlIGdpdmVuIGdsb2JhbCByZWdleCBpcyBtYXRjaGVkLCBhZHZhbmNpbmcgdGhlCiAgICAgKiBzY2FubmVyIHVwIHRvIChidXQgbm90IGJleW9uZCkgdGhlIGJlZ2lubmluZyBvZiB0aGUgbWF0Y2guIElmIHRoZSByZWdleAogICAgICogZG9lc24ndCBtYXRjaCwgbm90aGluZyB3aWxsIGJlIGNvbnN1bWVkLgogICAgICoKICAgICAqIFJldHVybnMgdGhlIGNvbnN1bWVkIHN0cmluZywgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIGNvbnN1bWVkLgogICAgICovCiAgICBBKHJlZ2V4KSB7CiAgICAgIGxldCByZXN0T2ZTdHJpbmcgPSB0aGlzLm0uc2xpY2UodGhpcy5pKCkpOwogICAgICBsZXQgbWF0Y2hCeXRlSW5kZXggPSByZXN0T2ZTdHJpbmcuc2VhcmNoKHJlZ2V4KTsKICAgICAgaWYgKG1hdGNoQnl0ZUluZGV4IDw9IDApIHsKICAgICAgICByZXR1cm4gZW1wdHlTdHJpbmc7CiAgICAgIH0KICAgICAgbGV0IHJlc3VsdCA9IHJlc3RPZlN0cmluZy5zbGljZSgwLCBtYXRjaEJ5dGVJbmRleCk7CiAgICAgIHRoaXMuZyh0aGlzLnEocmVzdWx0KSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGNoYXJhY3RlcnMgdW50aWwgdGhlIGdpdmVuIHN0cmluZyBpcyBmb3VuZCwgYWR2YW5jaW5nIHRoZSBzY2FubmVyCiAgICAgKiB1cCB0byAoYnV0IG5vdCBiZXlvbmQpIHRoYXQgcG9pbnQuIElmIHRoZSBzdHJpbmcgaXMgbmV2ZXIgZm91bmQsIG5vdGhpbmcKICAgICAqIHdpbGwgYmUgY29uc3VtZWQuCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgY29uc3VtZWQgc3RyaW5nLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKi8KICAgIHQoc2VhcmNoU3RyaW5nKSB7CiAgICAgIGxldCB7IG06IHN0cmluZyB9ID0gdGhpczsKICAgICAgbGV0IGJ5dGVJbmRleCA9IHRoaXMuaSgpOwogICAgICBsZXQgbWF0Y2hCeXRlSW5kZXggPSBzdHJpbmcuaW5kZXhPZihzZWFyY2hTdHJpbmcsIGJ5dGVJbmRleCk7CiAgICAgIGlmIChtYXRjaEJ5dGVJbmRleCA8PSAwKSB7CiAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICB9CiAgICAgIGxldCByZXN1bHQgPSBzdHJpbmcuc2xpY2UoYnl0ZUluZGV4LCBtYXRjaEJ5dGVJbmRleCk7CiAgICAgIHRoaXMuZyh0aGlzLnEocmVzdWx0KSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGdpdmVuIG51bWJlciBvZiBjaGFyYWN0ZXJzIHN0YXJ0aW5nIGF0IHRoZSBjdXJyZW50IGNoYXJhY3RlcgogICAgICogaW5kZXgsIHdpdGhvdXQgYWR2YW5jaW5nIHRoZSBzY2FubmVyIGFuZCB3aXRob3V0IGV4Y2VlZGluZyB0aGUgZW5kIG9mIHRoZQogICAgICogaW5wdXQgc3RyaW5nLgogICAgICovCiAgICBoKGNvdW50ID0gMSkgewogICAgICBsZXQgeyBkOiBjaGFySW5kZXgsIG46IG11bHRpQnl0ZU1vZGUsIG06IHN0cmluZyB9ID0gdGhpczsKICAgICAgaWYgKG11bHRpQnl0ZU1vZGUpIHsKICAgICAgICBpZiAoY2hhckluZGV4ID49IHRoaXMuaykgewogICAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKAogICAgICAgICAgdGhpcy5pKGNoYXJJbmRleCksCiAgICAgICAgICB0aGlzLmkoY2hhckluZGV4ICsgY291bnQpCiAgICAgICAgKTsKICAgICAgfQogICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKGNoYXJJbmRleCwgY2hhckluZGV4ICsgY291bnQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXNldHMgdGhlIHNjYW5uZXIgcG9zaXRpb24gdG8gdGhlIGdpdmVuIGNoYXJhY3RlciBfaW5kZXhfLCBvciB0byB0aGUgc3RhcnQKICAgICAqIG9mIHRoZSBpbnB1dCBzdHJpbmcgaWYgbm8gaW5kZXggaXMgZ2l2ZW4uCiAgICAgKgogICAgICogSWYgX2luZGV4XyBpcyBuZWdhdGl2ZSwgdGhlIHNjYW5uZXIgcG9zaXRpb24gd2lsbCBiZSBtb3ZlZCBiYWNrd2FyZCBieSB0aGF0CiAgICAgKiBtYW55IGNoYXJhY3RlcnMsIHN0b3BwaW5nIGlmIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZyBpcyByZWFjaGVkLgogICAgICovCiAgICBvKGluZGV4ID0gMCkgewogICAgICB0aGlzLmQgPSBpbmRleCA+PSAwID8gTWF0aC5taW4odGhpcy5rLCBpbmRleCkgOiBNYXRoLm1heCgwLCB0aGlzLmQgKyBpbmRleCk7CiAgICB9CiAgfTsKICB2YXIgYXR0VmFsdWVDaGFyRG91YmxlUXVvdGUgPSAvW14iJjxdKy95OwogIHZhciBhdHRWYWx1ZUNoYXJTaW5nbGVRdW90ZSA9IC9bXicmPF0rL3k7CiAgdmFyIGF0dFZhbHVlTm9ybWFsaXplZFdoaXRlc3BhY2UgPSAvXHJcbnxbXG5cclx0XS9nOwogIHZhciBlbmRDaGFyRGF0YSA9IC88fCZ8XV0+LzsKICB2YXIgcHJlZGVmaW5lZEVudGl0aWVzID0gT2JqZWN0LmZyZWV6ZShPYmplY3QuYXNzaWduKC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLCB7CiAgICBhbXA6ICImIiwKICAgIGFwb3M6ICInIiwKICAgIGd0OiAiPiIsCiAgICBsdDogIjwiLAogICAgcXVvdDogJyInCiAgfSkpOwogIGZ1bmN0aW9uIGlzTmFtZUNoYXIoY2hhcikgewogICAgbGV0IGNwID0gZ2V0Q29kZVBvaW50KGNoYXIpOwogICAgcmV0dXJuIGNwID49IDk3ICYmIGNwIDw9IDEyMiB8fCBjcCA+PSA2NSAmJiBjcCA8PSA5MCB8fCBjcCA+PSA0OCAmJiBjcCA8PSA1NyB8fCBjcCA9PT0gNDUgfHwgY3AgPT09IDQ2IHx8IGNwID09PSAxODMgfHwgY3AgPj0gNzY4ICYmIGNwIDw9IDg3OSB8fCBjcCA+PSA4MjU1ICYmIGNwIDw9IDgyNTYgfHwgaXNOYW1lU3RhcnRDaGFyKGNoYXIsIGNwKTsKICB9CiAgZnVuY3Rpb24gaXNOYW1lU3RhcnRDaGFyKGNoYXIsIGNwID0gZ2V0Q29kZVBvaW50KGNoYXIpKSB7CiAgICByZXR1cm4gY3AgPj0gOTcgJiYgY3AgPD0gMTIyIHx8IGNwID49IDY1ICYmIGNwIDw9IDkwIHx8IGNwID09PSA1OCB8fCBjcCA9PT0gOTUgfHwgY3AgPj0gMTkyICYmIGNwIDw9IDIxNCB8fCBjcCA+PSAyMTYgJiYgY3AgPD0gMjQ2IHx8IGNwID49IDI0OCAmJiBjcCA8PSA3NjcgfHwgY3AgPj0gODgwICYmIGNwIDw9IDg5MyB8fCBjcCA+PSA4OTUgJiYgY3AgPD0gODE5MSB8fCBjcCA+PSA4MjA0ICYmIGNwIDw9IDgyMDUgfHwgY3AgPj0gODMwNCAmJiBjcCA8PSA4NTkxIHx8IGNwID49IDExMjY0ICYmIGNwIDw9IDEyMjcxIHx8IGNwID49IDEyMjg5ICYmIGNwIDw9IDU1Mjk1IHx8IGNwID49IDYzNzQ0ICYmIGNwIDw9IDY0OTc1IHx8IGNwID49IDY1MDA4ICYmIGNwIDw9IDY1NTMzIHx8IGNwID49IDY1NTM2ICYmIGNwIDw9IDk4MzAzOTsKICB9CiAgZnVuY3Rpb24gaXNSZWZlcmVuY2VDaGFyKGNoYXIpIHsKICAgIHJldHVybiBjaGFyID09PSAiIyIgfHwgaXNOYW1lQ2hhcihjaGFyKTsKICB9CiAgZnVuY3Rpb24gaXNXaGl0ZXNwYWNlKGNoYXIpIHsKICAgIGxldCBjcCA9IGdldENvZGVQb2ludChjaGFyKTsKICAgIHJldHVybiBjcCA9PT0gMzIgfHwgY3AgPT09IDkgfHwgY3AgPT09IDEwIHx8IGNwID09PSAxMzsKICB9CiAgZnVuY3Rpb24gaXNYbWxDb2RlUG9pbnQoY3ApIHsKICAgIHJldHVybiBjcCA9PT0gOSB8fCBjcCA9PT0gMTAgfHwgY3AgPT09IDEzIHx8IGNwID49IDMyICYmIGNwIDw9IDU1Mjk1IHx8IGNwID49IDU3MzQ0ICYmIGNwIDw9IDY1NTMzIHx8IGNwID49IDY1NTM2ICYmIGNwIDw9IDExMTQxMTE7CiAgfQogIGZ1bmN0aW9uIGdldENvZGVQb2ludChjaGFyKSB7CiAgICByZXR1cm4gY2hhci5jb2RlUG9pbnRBdCgwKSB8fCAtMTsKICB9CiAgdmFyIF9YbWxOb2RlID0gY2xhc3MgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMucGFyZW50ID0gbnVsbDsKICAgICAgdGhpcy5zdGFydCA9IC0xOwogICAgICB0aGlzLmVuZCA9IC0xOwogICAgfQogICAgLyoqCiAgICAgKiBEb2N1bWVudCB0aGF0IGNvbnRhaW5zIHRoaXMgbm9kZSwgb3IgYG51bGxgIGlmIHRoaXMgbm9kZSBpcyBub3QgYXNzb2NpYXRlZAogICAgICogd2l0aCBhIGRvY3VtZW50LgogICAgICovCiAgICBnZXQgZG9jdW1lbnQoKSB7CiAgICAgIHZhciBfYSwgX2I7CiAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLnBhcmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmRvY3VtZW50KSAhPSBudWxsID8gX2IgOiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoaXMgbm9kZSBpcyB0aGUgcm9vdCBub2RlIG9mIHRoZSBkb2N1bWVudCAoYWxzbyBrbm93biBhcyB0aGUKICAgICAqIGRvY3VtZW50IGVsZW1lbnQpLgogICAgICovCiAgICBnZXQgaXNSb290Tm9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFyZW50ICE9PSBudWxsICYmIHRoaXMucGFyZW50ID09PSB0aGlzLmRvY3VtZW50ICYmIHRoaXMudHlwZSA9PT0gX1htbE5vZGUuVFlQRV9FTEVNRU5UOwogICAgfQogICAgLyoqCiAgICAgKiBXaGV0aGVyIHdoaXRlc3BhY2Ugc2hvdWxkIGJlIHByZXNlcnZlZCBpbiB0aGUgY29udGVudCBvZiB0aGlzIGVsZW1lbnQgYW5kCiAgICAgKiBpdHMgY2hpbGRyZW4uCiAgICAgKgogICAgICogVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHRoZSB2YWx1ZSBvZiB0aGUgc3BlY2lhbCBgeG1sOnNwYWNlYCBhdHRyaWJ1dGUsIGFuZAogICAgICogd2lsbCBiZSBgdHJ1ZWAgZm9yIGFueSBub2RlIHdob3NlIGB4bWw6c3BhY2VgIGF0dHJpYnV0ZSBpcyBzZXQgdG8KICAgICAqICJwcmVzZXJ2ZSIuIElmIGEgbm9kZSBoYXMgbm8gc3VjaCBhdHRyaWJ1dGUsIGl0IHdpbGwgaW5oZXJpdCB0aGUgdmFsdWUgb2YKICAgICAqIHRoZSBuZWFyZXN0IGFuY2VzdG9yIHRoYXQgZG9lcyAoaWYgYW55KS4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy13aGl0ZS1zcGFjZQogICAgICovCiAgICBnZXQgcHJlc2VydmVXaGl0ZXNwYWNlKCkgewogICAgICB2YXIgX2E7CiAgICAgIHJldHVybiAhISgoX2EgPSB0aGlzLnBhcmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnByZXNlcnZlV2hpdGVzcGFjZSk7CiAgICB9CiAgICAvKioKICAgICAqIFR5cGUgb2YgdGhpcyBub2RlLgogICAgICoKICAgICAqIFRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IGlzIGEgc3RyaW5nIHRoYXQgbWF0Y2hlcyBvbmUgb2YgdGhlIHN0YXRpYwogICAgICogYFRZUEVfKmAgcHJvcGVydGllcyBvbiB0aGUgYFhtbE5vZGVgIGNsYXNzIChlLmcuIGBUWVBFX0VMRU1FTlRgLAogICAgICogYFRZUEVfVEVYVGAsIGV0Yy4pLgogICAgICoKICAgICAqIFRoZSBgWG1sTm9kZWAgY2xhc3MgaXRzZWxmIGlzIGEgYmFzZSBjbGFzcyBhbmQgZG9lc24ndCBoYXZlIGl0cyBvd24gdHlwZQogICAgICogbmFtZS4KICAgICAqLwogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiAiIjsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIG9iamVjdCByZXByZXNlbnRpbmcgdGhpcyBub2RlLCBtaW51cyBwcm9wZXJ0aWVzCiAgICAgKiB0aGF0IGNvdWxkIHJlc3VsdCBpbiBjaXJjdWxhciByZWZlcmVuY2VzLgogICAgICovCiAgICB0b0pTT04oKSB7CiAgICAgIGxldCBqc29uID0gewogICAgICAgIHR5cGU6IHRoaXMudHlwZQogICAgICB9OwogICAgICBpZiAodGhpcy5pc1Jvb3ROb2RlKSB7CiAgICAgICAganNvbi5pc1Jvb3ROb2RlID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAodGhpcy5wcmVzZXJ2ZVdoaXRlc3BhY2UpIHsKICAgICAgICBqc29uLnByZXNlcnZlV2hpdGVzcGFjZSA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc3RhcnQgIT09IC0xKSB7CiAgICAgICAganNvbi5zdGFydCA9IHRoaXMuc3RhcnQ7CiAgICAgICAganNvbi5lbmQgPSB0aGlzLmVuZDsKICAgICAgfQogICAgICByZXR1cm4ganNvbjsKICAgIH0KICB9OwogIHZhciBYbWxOb2RlID0gX1htbE5vZGU7CiAgWG1sTm9kZS5UWVBFX0NEQVRBID0gImNkYXRhIjsKICBYbWxOb2RlLlRZUEVfQ09NTUVOVCA9ICJjb21tZW50IjsKICBYbWxOb2RlLlRZUEVfRE9DVU1FTlQgPSAiZG9jdW1lbnQiOwogIFhtbE5vZGUuVFlQRV9ET0NVTUVOVF9UWVBFID0gImRvY3R5cGUiOwogIFhtbE5vZGUuVFlQRV9FTEVNRU5UID0gImVsZW1lbnQiOwogIFhtbE5vZGUuVFlQRV9QUk9DRVNTSU5HX0lOU1RSVUNUSU9OID0gInBpIjsKICBYbWxOb2RlLlRZUEVfVEVYVCA9ICJ0ZXh0IjsKICBYbWxOb2RlLlRZUEVfWE1MX0RFQ0xBUkFUSU9OID0gInhtbGRlY2wiOwogIHZhciBYbWxUZXh0ID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKHRleHQgPSAiIikgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLnRleHQgPSB0ZXh0OwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfVEVYVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICB0ZXh0OiB0aGlzLnRleHQKICAgICAgfSk7CiAgICB9CiAgfTsKICB2YXIgWG1sQ2RhdGEgPSBjbGFzcyBleHRlbmRzIFhtbFRleHQgewogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfQ0RBVEE7CiAgICB9CiAgfTsKICB2YXIgWG1sQ29tbWVudCA9IGNsYXNzIGV4dGVuZHMgWG1sTm9kZSB7CiAgICBjb25zdHJ1Y3Rvcihjb250ZW50ID0gIiIpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX0NPTU1FTlQ7CiAgICB9CiAgICB0b0pTT04oKSB7CiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKFhtbE5vZGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpLCB7CiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50CiAgICAgIH0pOwogICAgfQogIH07CiAgdmFyIFhtbERlY2xhcmF0aW9uID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKHZlcnNpb24sIGVuY29kaW5nLCBzdGFuZGFsb25lKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247CiAgICAgIHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZyAhPSBudWxsID8gZW5jb2RpbmcgOiBudWxsOwogICAgICB0aGlzLnN0YW5kYWxvbmUgPSBzdGFuZGFsb25lICE9IG51bGwgPyBzdGFuZGFsb25lIDogbnVsbDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX1hNTF9ERUNMQVJBVElPTjsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgbGV0IGpzb24gPSBYbWxOb2RlLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTsKICAgICAganNvbi52ZXJzaW9uID0gdGhpcy52ZXJzaW9uOwogICAgICBmb3IgKGxldCBrZXkgb2YgWyJlbmNvZGluZyIsICJzdGFuZGFsb25lIl0pIHsKICAgICAgICBpZiAodGhpc1trZXldICE9PSBudWxsKSB7CiAgICAgICAgICBqc29uW2tleV0gPSB0aGlzW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBqc29uOwogICAgfQogIH07CiAgdmFyIFhtbEVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIFhtbE5vZGUgewogICAgY29uc3RydWN0b3IobmFtZSwgYXR0cmlidXRlcyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLCBjaGlsZHJlbiA9IFtdKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgIH0KICAgIC8qKgogICAgICogV2hldGhlciB0aGlzIGVsZW1lbnQgaXMgZW1wdHkgKG1lYW5pbmcgaXQgaGFzIG5vIGNoaWxkcmVuKS4KICAgICAqLwogICAgZ2V0IGlzRW1wdHkoKSB7CiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmxlbmd0aCA9PT0gMDsKICAgIH0KICAgIGdldCBwcmVzZXJ2ZVdoaXRlc3BhY2UoKSB7CiAgICAgIGxldCBub2RlID0gdGhpczsKICAgICAgd2hpbGUgKG5vZGUgaW5zdGFuY2VvZiBYbWxFbGVtZW50KSB7CiAgICAgICAgaWYgKCJ4bWw6c3BhY2UiIGluIG5vZGUuYXR0cmlidXRlcykgewogICAgICAgICAgcmV0dXJuIG5vZGUuYXR0cmlidXRlc1sieG1sOnNwYWNlIl0gPT09ICJwcmVzZXJ2ZSI7CiAgICAgICAgfQogICAgICAgIG5vZGUgPSBub2RlLnBhcmVudDsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFRleHQgY29udGVudCBvZiB0aGlzIGVsZW1lbnQgYW5kIGFsbCBpdHMgZGVzY2VuZGFudHMuCiAgICAgKi8KICAgIGdldCB0ZXh0KCkgewogICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiAidGV4dCIgaW4gY2hpbGQgPyBjaGlsZC50ZXh0IDogIiIpLmpvaW4oIiIpOwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfRUxFTUVOVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgYXR0cmlidXRlczogdGhpcy5hdHRyaWJ1dGVzLAogICAgICAgIGNoaWxkcmVuOiB0aGlzLmNoaWxkcmVuLm1hcCgoY2hpbGQpID0+IGNoaWxkLnRvSlNPTigpKQogICAgICB9KTsKICAgIH0KICB9OwogIHZhciBYbWxEb2N1bWVudCA9IGNsYXNzIGV4dGVuZHMgWG1sTm9kZSB7CiAgICBjb25zdHJ1Y3RvcihjaGlsZHJlbiA9IFtdKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgIH0KICAgIGdldCBkb2N1bWVudCgpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJvb3QgZWxlbWVudCBvZiB0aGlzIGRvY3VtZW50LCBvciBgbnVsbGAgaWYgdGhpcyBkb2N1bWVudCBpcyBlbXB0eS4KICAgICAqLwogICAgZ2V0IHJvb3QoKSB7CiAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHsKICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBYbWxFbGVtZW50KSB7CiAgICAgICAgICByZXR1cm4gY2hpbGQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBUZXh0IGNvbnRlbnQgb2YgdGhpcyBkb2N1bWVudCBhbmQgYWxsIGl0cyBkZXNjZW5kYW50cy4KICAgICAqLwogICAgZ2V0IHRleHQoKSB7CiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLm1hcCgoY2hpbGQpID0+ICJ0ZXh0IiBpbiBjaGlsZCA/IGNoaWxkLnRleHQgOiAiIikuam9pbigiIik7CiAgICB9CiAgICBnZXQgdHlwZSgpIHsKICAgICAgcmV0dXJuIFhtbE5vZGUuVFlQRV9ET0NVTUVOVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBjaGlsZHJlbjogdGhpcy5jaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiBjaGlsZC50b0pTT04oKSkKICAgICAgfSk7CiAgICB9CiAgfTsKICB2YXIgWG1sRG9jdW1lbnRUeXBlID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKG5hbWUsIHB1YmxpY0lkLCBzeXN0ZW1JZCwgaW50ZXJuYWxTdWJzZXQpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5uYW1lID0gbmFtZTsKICAgICAgdGhpcy5wdWJsaWNJZCA9IHB1YmxpY0lkICE9IG51bGwgPyBwdWJsaWNJZCA6IG51bGw7CiAgICAgIHRoaXMuc3lzdGVtSWQgPSBzeXN0ZW1JZCAhPSBudWxsID8gc3lzdGVtSWQgOiBudWxsOwogICAgICB0aGlzLmludGVybmFsU3Vic2V0ID0gaW50ZXJuYWxTdWJzZXQgIT0gbnVsbCA/IGludGVybmFsU3Vic2V0IDogbnVsbDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX0RPQ1VNRU5UX1RZUEU7CiAgICB9CiAgICB0b0pTT04oKSB7CiAgICAgIGxldCBqc29uID0gWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7CiAgICAgIGpzb24ubmFtZSA9IHRoaXMubmFtZTsKICAgICAgZm9yIChsZXQga2V5IG9mIFsicHVibGljSWQiLCAic3lzdGVtSWQiLCAiaW50ZXJuYWxTdWJzZXQiXSkgewogICAgICAgIGlmICh0aGlzW2tleV0gIT09IG51bGwpIHsKICAgICAgICAgIGpzb25ba2V5XSA9IHRoaXNba2V5XTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGpzb247CiAgICB9CiAgfTsKICB2YXIgWG1sRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHsKICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGNoYXJJbmRleCwgeG1sKSB7CiAgICAgIGxldCBjb2x1bW4gPSAxOwogICAgICBsZXQgZXhjZXJwdCA9ICIiOwogICAgICBsZXQgbGluZSA9IDE7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckluZGV4OyArK2kpIHsKICAgICAgICBsZXQgY2hhciA9IHhtbFtpXTsKICAgICAgICBpZiAoY2hhciA9PT0gIlxuIikgewogICAgICAgICAgY29sdW1uID0gMTsKICAgICAgICAgIGV4Y2VycHQgPSAiIjsKICAgICAgICAgIGxpbmUgKz0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29sdW1uICs9IDE7CiAgICAgICAgICBleGNlcnB0ICs9IGNoYXI7CiAgICAgICAgfQogICAgICB9CiAgICAgIGxldCBlb2wgPSB4bWwuaW5kZXhPZigiXG4iLCBjaGFySW5kZXgpOwogICAgICBleGNlcnB0ICs9IGVvbCA9PT0gLTEgPyB4bWwuc2xpY2UoY2hhckluZGV4KSA6IHhtbC5zbGljZShjaGFySW5kZXgsIGVvbCk7CiAgICAgIGxldCBleGNlcnB0U3RhcnQgPSAwOwogICAgICBpZiAoZXhjZXJwdC5sZW5ndGggPiA1MCkgewogICAgICAgIGlmIChjb2x1bW4gPCA0MCkgewogICAgICAgICAgZXhjZXJwdCA9IGV4Y2VycHQuc2xpY2UoMCwgNTApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBleGNlcnB0U3RhcnQgPSBjb2x1bW4gLSAyMDsKICAgICAgICAgIGV4Y2VycHQgPSBleGNlcnB0LnNsaWNlKGV4Y2VycHRTdGFydCwgY29sdW1uICsgMzApOwogICAgICAgIH0KICAgICAgfQogICAgICBzdXBlcigKICAgICAgICBgJHttZXNzYWdlfSAobGluZSAke2xpbmV9LCBjb2x1bW4gJHtjb2x1bW59KQogICR7ZXhjZXJwdH0KYCArICIgIi5yZXBlYXQoY29sdW1uIC0gZXhjZXJwdFN0YXJ0ICsgMSkgKyAiXlxuIgogICAgICApOwogICAgICB0aGlzLmNvbHVtbiA9IGNvbHVtbjsKICAgICAgdGhpcy5leGNlcnB0ID0gZXhjZXJwdDsKICAgICAgdGhpcy5saW5lID0gbGluZTsKICAgICAgdGhpcy5uYW1lID0gIlhtbEVycm9yIjsKICAgICAgdGhpcy5wb3MgPSBjaGFySW5kZXg7CiAgICB9CiAgfTsKICB2YXIgWG1sUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRlbnQgPSAiIikgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50OwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfUFJPQ0VTU0lOR19JTlNUUlVDVElPTjsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50CiAgICAgIH0pOwogICAgfQogIH07CiAgdmFyIGVtcHR5U3RyaW5nMiA9ICIiOwogIHZhciBQYXJzZXIgPSBjbGFzcyB7CiAgICAvKioKICAgICAqIEBwYXJhbSB4bWwgWE1MIHN0cmluZyB0byBwYXJzZS4KICAgICAqIEBwYXJhbSBvcHRpb25zIFBhcnNlciBvcHRpb25zLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcih4bWwsIG9wdGlvbnMgPSB7fSkgewogICAgICBsZXQgZG9jID0gdGhpcy5kb2N1bWVudCA9IG5ldyBYbWxEb2N1bWVudCgpOwogICAgICBsZXQgc2Nhbm5lciA9IHRoaXMuYyA9IG5ldyBTdHJpbmdTY2FubmVyKHhtbCk7CiAgICAgIHRoaXMubCA9IGRvYzsKICAgICAgdGhpcy5mID0gb3B0aW9uczsKICAgICAgaWYgKHRoaXMuZi5pbmNsdWRlT2Zmc2V0cykgewogICAgICAgIGRvYy5zdGFydCA9IDA7CiAgICAgICAgZG9jLmVuZCA9IHhtbC5sZW5ndGg7CiAgICAgIH0KICAgICAgc2Nhbm5lci5iKCJcdUZFRkYiKTsKICAgICAgdGhpcy5IKCk7CiAgICAgIGlmICghdGhpcy5CKCkpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlJvb3QgZWxlbWVudCBpcyBtaXNzaW5nIG9yIGludmFsaWQiKTsKICAgICAgfQogICAgICB3aGlsZSAodGhpcy53KCkpIHsKICAgICAgfQogICAgICBpZiAoIXNjYW5uZXIueikgewogICAgICAgIHRocm93IHRoaXMuYSgiRXh0cmEgY29udGVudCBhdCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudCIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFkZHMgdGhlIGdpdmVuIGBYbWxOb2RlYCBhcyBhIGNoaWxkIG9mIGB0aGlzLmN1cnJlbnROb2RlYC4KICAgICAqLwogICAgaihub2RlLCBjaGFySW5kZXgpIHsKICAgICAgbm9kZS5wYXJlbnQgPSB0aGlzLmw7CiAgICAgIGlmICh0aGlzLmYuaW5jbHVkZU9mZnNldHMpIHsKICAgICAgICBub2RlLnN0YXJ0ID0gdGhpcy5jLmkoY2hhckluZGV4KTsKICAgICAgICBub2RlLmVuZCA9IHRoaXMuYy5pKCk7CiAgICAgIH0KICAgICAgdGhpcy5sLmNoaWxkcmVuLnB1c2gobm9kZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIHRoZSBnaXZlbiBfdGV4dF8gdG8gdGhlIGRvY3VtZW50LCBlaXRoZXIgYnkgYXBwZW5kaW5nIGl0IHRvIGEKICAgICAqIHByZWNlZGluZyBgWG1sVGV4dGAgbm9kZSAoaWYgcG9zc2libGUpIG9yIGJ5IGNyZWF0aW5nIGEgbmV3IGBYbWxUZXh0YCBub2RlLgogICAgICovCiAgICB4KHRleHQsIGNoYXJJbmRleCkgewogICAgICBsZXQgeyBjaGlsZHJlbiB9ID0gdGhpcy5sOwogICAgICBsZXQgeyBsZW5ndGggfSA9IGNoaWxkcmVuOwogICAgICB0ZXh0ID0gbm9ybWFsaXplTGluZUJyZWFrcyh0ZXh0KTsKICAgICAgaWYgKGxlbmd0aCA+IDApIHsKICAgICAgICBsZXQgcHJldk5vZGUgPSBjaGlsZHJlbltsZW5ndGggLSAxXTsKICAgICAgICBpZiAoKHByZXZOb2RlID09IG51bGwgPyB2b2lkIDAgOiBwcmV2Tm9kZS50eXBlKSA9PT0gWG1sTm9kZS5UWVBFX1RFWFQpIHsKICAgICAgICAgIGxldCB0ZXh0Tm9kZSA9IHByZXZOb2RlOwogICAgICAgICAgdGV4dE5vZGUudGV4dCArPSB0ZXh0OwogICAgICAgICAgaWYgKHRoaXMuZi5pbmNsdWRlT2Zmc2V0cykgewogICAgICAgICAgICB0ZXh0Tm9kZS5lbmQgPSB0aGlzLmMuaSgpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFRleHQodGV4dCksIGNoYXJJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGVsZW1lbnQgYXR0cmlidXRlcy4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1zdGFydHRhZ3MKICAgICAqLwogICAgSSgpIHsKICAgICAgbGV0IGF0dHJpYnV0ZXMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgd2hpbGUgKHRoaXMuZSgpKSB7CiAgICAgICAgbGV0IGF0dHJOYW1lID0gdGhpcy5yKCk7CiAgICAgICAgaWYgKCFhdHRyTmFtZSkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGxldCBhdHRyVmFsdWUgPSB0aGlzLnUoKSAmJiB0aGlzLkooKTsKICAgICAgICBpZiAoYXR0clZhbHVlID09PSBmYWxzZSkgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJBdHRyaWJ1dGUgdmFsdWUgZXhwZWN0ZWQiKTsKICAgICAgICB9CiAgICAgICAgaWYgKGF0dHJOYW1lIGluIGF0dHJpYnV0ZXMpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgRHVwbGljYXRlIGF0dHJpYnV0ZTogJHthdHRyTmFtZX1gKTsKICAgICAgICB9CiAgICAgICAgaWYgKGF0dHJOYW1lID09PSAieG1sOnNwYWNlIiAmJiBhdHRyVmFsdWUgIT09ICJkZWZhdWx0IiAmJiBhdHRyVmFsdWUgIT09ICJwcmVzZXJ2ZSIpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgnVmFsdWUgb2YgdGhlIGB4bWw6c3BhY2VgIGF0dHJpYnV0ZSBtdXN0IGJlICJkZWZhdWx0IiBvciAicHJlc2VydmUiJyk7CiAgICAgICAgfQogICAgICAgIGF0dHJpYnV0ZXNbYXR0ck5hbWVdID0gYXR0clZhbHVlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmYuc29ydEF0dHJpYnV0ZXMpIHsKICAgICAgICBsZXQgYXR0ck5hbWVzID0gT2JqZWN0LmtleXMoYXR0cmlidXRlcykuc29ydCgpOwogICAgICAgIGxldCBzb3J0ZWRBdHRyaWJ1dGVzID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyTmFtZXMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgIGxldCBhdHRyTmFtZSA9IGF0dHJOYW1lc1tpXTsKICAgICAgICAgIHNvcnRlZEF0dHJpYnV0ZXNbYXR0ck5hbWVdID0gYXR0cmlidXRlc1thdHRyTmFtZV07CiAgICAgICAgfQogICAgICAgIGF0dHJpYnV0ZXMgPSBzb3J0ZWRBdHRyaWJ1dGVzOwogICAgICB9CiAgICAgIHJldHVybiBhdHRyaWJ1dGVzOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbiBgQXR0VmFsdWVgIChhdHRyaWJ1dGUgdmFsdWUpIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zCiAgICAgKiAgIENvbnRlbnRzIG9mIHRoZSBgQXR0VmFsdWVgIG1pbnVzIHF1b3Rlcywgb3IgYGZhbHNlYCBpZiBub3RoaW5nIHdhcwogICAgICogICBjb25zdW1lZC4gQW4gZW1wdHkgc3RyaW5nIGluZGljYXRlcyB0aGF0IGFuIGBBdHRWYWx1ZWAgd2FzIGNvbnN1bWVkIGJ1dAogICAgICogICB3YXMgZW1wdHkuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1BdHRWYWx1ZQogICAgICovCiAgICBKKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgcXVvdGUgPSBzY2FubmVyLmgoKTsKICAgICAgaWYgKHF1b3RlICE9PSAnIicgJiYgcXVvdGUgIT09ICInIikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBzY2FubmVyLmcoKTsKICAgICAgbGV0IGNoYXJzOwogICAgICBsZXQgaXNDbG9zZWQgPSBmYWxzZTsKICAgICAgbGV0IHZhbHVlID0gZW1wdHlTdHJpbmcyOwogICAgICBsZXQgcmVnZXggPSBxdW90ZSA9PT0gJyInID8gYXR0VmFsdWVDaGFyRG91YmxlUXVvdGUgOiBhdHRWYWx1ZUNoYXJTaW5nbGVRdW90ZTsKICAgICAgbWF0Y2hMb29wOgogICAgICAgIHdoaWxlICghc2Nhbm5lci56KSB7CiAgICAgICAgICBjaGFycyA9IHNjYW5uZXIuRyhyZWdleCk7CiAgICAgICAgICBpZiAoY2hhcnMpIHsKICAgICAgICAgICAgdGhpcy5wKGNoYXJzKTsKICAgICAgICAgICAgdmFsdWUgKz0gY2hhcnMucmVwbGFjZShhdHRWYWx1ZU5vcm1hbGl6ZWRXaGl0ZXNwYWNlLCAiICIpOwogICAgICAgICAgfQogICAgICAgICAgc3dpdGNoIChzY2FubmVyLmgoKSkgewogICAgICAgICAgICBjYXNlIHF1b3RlOgogICAgICAgICAgICAgIGlzQ2xvc2VkID0gdHJ1ZTsKICAgICAgICAgICAgICBicmVhayBtYXRjaExvb3A7CiAgICAgICAgICAgIGNhc2UgIiYiOgogICAgICAgICAgICAgIHZhbHVlICs9IHRoaXMuQygpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBjYXNlICI8IjoKICAgICAgICAgICAgICB0aHJvdyB0aGlzLmEoIlVuZXNjYXBlZCBgPGAgaXMgbm90IGFsbG93ZWQgaW4gYW4gYXR0cmlidXRlIHZhbHVlIik7CiAgICAgICAgICAgIGNhc2UgZW1wdHlTdHJpbmcyOgogICAgICAgICAgICAgIGJyZWFrIG1hdGNoTG9vcDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIGlmICghaXNDbG9zZWQpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlVuY2xvc2VkIGF0dHJpYnV0ZSIpOwogICAgICB9CiAgICAgIHNjYW5uZXIuZygpOwogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgQ0RBVEEgc2VjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgQ0RBVEEgc2VjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1jZGF0YS1zZWN0CiAgICAgKi8KICAgIEsoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCFbQ0RBVEFbIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IHRleHQgPSBzY2FubmVyLnQoIl1dPiIpOwogICAgICB0aGlzLnAodGV4dCk7CiAgICAgIGlmICghc2Nhbm5lci5iKCJdXT4iKSkgewogICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgQ0RBVEEgc2VjdGlvbiIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmYucHJlc2VydmVDZGF0YSA/IHRoaXMuaihuZXcgWG1sQ2RhdGEobm9ybWFsaXplTGluZUJyZWFrcyh0ZXh0KSksIHN0YXJ0SW5kZXgpIDogdGhpcy54KHRleHQsIHN0YXJ0SW5kZXgpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBjaGFyYWN0ZXIgZGF0YSBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGNoYXJhY3RlciBkYXRhIHdhcyBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jZHQtY2hhcmRhdGEKICAgICAqLwogICAgTCgpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSBzY2FubmVyLmQ7CiAgICAgIGxldCBjaGFyRGF0YSA9IHNjYW5uZXIuQShlbmRDaGFyRGF0YSk7CiAgICAgIGlmICghY2hhckRhdGEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy5wKGNoYXJEYXRhKTsKICAgICAgaWYgKHNjYW5uZXIuaCgzKSA9PT0gIl1dPiIpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIkVsZW1lbnQgY29udGVudCBtYXkgbm90IGNvbnRhaW4gdGhlIENEQVRBIHNlY3Rpb24gY2xvc2UgZGVsaW1pdGVyIGBdXT5gIik7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMueChjaGFyRGF0YSwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgY29tbWVudCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgY29tbWVudCB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULUNvbW1lbnQKICAgICAqLwogICAgRCgpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSBzY2FubmVyLmQ7CiAgICAgIGlmICghc2Nhbm5lci5iKCI8IS0tIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IGNvbnRlbnQgPSBzY2FubmVyLnQoIi0tIik7CiAgICAgIHRoaXMucChjb250ZW50KTsKICAgICAgaWYgKCFzY2FubmVyLmIoIi0tPiIpKSB7CiAgICAgICAgaWYgKHNjYW5uZXIuaCgyKSA9PT0gIi0tIikgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJUaGUgc3RyaW5nIGAtLWAgaXNuJ3QgYWxsb3dlZCBpbnNpZGUgYSBjb21tZW50Iik7CiAgICAgICAgfQogICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgY29tbWVudCIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmYucHJlc2VydmVDb21tZW50cyA/IHRoaXMuaihuZXcgWG1sQ29tbWVudChub3JtYWxpemVMaW5lQnJlYWtzKGNvbnRlbnQpKSwgc3RhcnRJbmRleCkgOiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhIHJlZmVyZW5jZSBpbiBhIGNvbnRlbnQgY29udGV4dCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGRpZmZlcnMgZnJvbSBgY29uc3VtZVJlZmVyZW5jZSgpYCBpbiB0aGF0IGEgY29uc3VtZWQgcmVmZXJlbmNlIHdpbGwgYmUKICAgICAqIGFkZGVkIHRvIHRoZSBkb2N1bWVudCBhcyBhIHRleHQgbm9kZSBpbnN0ZWFkIG9mIHJldHVybmVkLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSByZWZlcmVuY2Ugd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNlbnRwcm9jCiAgICAgKi8KICAgIE0oKSB7CiAgICAgIGxldCBzdGFydEluZGV4ID0gdGhpcy5jLmQ7CiAgICAgIGxldCByZWYgPSB0aGlzLkMoKTsKICAgICAgcmV0dXJuIHJlZiA/IHRoaXMueChyZWYsIHN0YXJ0SW5kZXgpIDogZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgZG9jdHlwZSBkZWNsYXJhdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGlzIGEgbG9vc2UgaW1wbGVtZW50YXRpb24gc2luY2UgZG9jdHlwZSBkZWNsYXJhdGlvbnMgYXJlIGN1cnJlbnRseQogICAgICogZGlzY2FyZGVkIHdpdGhvdXQgZnVydGhlciBwYXJzaW5nLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSBkb2N0eXBlIGRlY2xhcmF0aW9uIHdhcyBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jZHRkCiAgICAgKi8KICAgIE4oKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCFET0NUWVBFIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IG5hbWUgPSB0aGlzLmUoKSAmJiB0aGlzLnIoKTsKICAgICAgaWYgKCFuYW1lKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJFeHBlY3RlZCBhIG5hbWUiKTsKICAgICAgfQogICAgICBsZXQgcHVibGljSWQ7CiAgICAgIGxldCBzeXN0ZW1JZDsKICAgICAgaWYgKHRoaXMuZSgpKSB7CiAgICAgICAgaWYgKHNjYW5uZXIuYigiUFVCTElDIikpIHsKICAgICAgICAgIHB1YmxpY0lkID0gdGhpcy5lKCkgJiYgdGhpcy5PKCk7CiAgICAgICAgICBpZiAocHVibGljSWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHRocm93IHRoaXMuYSgiRXhwZWN0ZWQgYSBwdWJsaWMgaWRlbnRpZmllciIpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5lKCk7CiAgICAgICAgfQogICAgICAgIGlmIChwdWJsaWNJZCAhPT0gdm9pZCAwIHx8IHNjYW5uZXIuYigiU1lTVEVNIikpIHsKICAgICAgICAgIHRoaXMuZSgpOwogICAgICAgICAgc3lzdGVtSWQgPSB0aGlzLnMoKTsKICAgICAgICAgIGlmIChzeXN0ZW1JZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgdGhyb3cgdGhpcy5hKCJFeHBlY3RlZCBhIHN5c3RlbSBpZGVudGlmaWVyIik7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmUoKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgbGV0IGludGVybmFsU3Vic2V0OwogICAgICBpZiAoc2Nhbm5lci5iKCJbIikpIHsKICAgICAgICBpbnRlcm5hbFN1YnNldCA9IHNjYW5uZXIuQSgvXF1bXHgyMFx0XHJcbl0qPi8pOwogICAgICAgIGlmICghc2Nhbm5lci5iKCJdIikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgaW50ZXJuYWwgc3Vic2V0Iik7CiAgICAgICAgfQogICAgICAgIHRoaXMuZSgpOwogICAgICB9CiAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlVuY2xvc2VkIGRvY3R5cGUgZGVjbGFyYXRpb24iKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5mLnByZXNlcnZlRG9jdW1lbnRUeXBlID8gdGhpcy5qKG5ldyBYbWxEb2N1bWVudFR5cGUobmFtZSwgcHVibGljSWQsIHN5c3RlbUlkLCBpbnRlcm5hbFN1YnNldCksIHN0YXJ0SW5kZXgpIDogdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYW4gZWxlbWVudCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGFuIGVsZW1lbnQgd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1lbGVtZW50CiAgICAgKi8KICAgIEIoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCIpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGxldCBuYW1lID0gdGhpcy5yKCk7CiAgICAgIGlmICghbmFtZSkgewogICAgICAgIHNjYW5uZXIubyhzdGFydEluZGV4KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IGF0dHJpYnV0ZXMgPSB0aGlzLkkoKTsKICAgICAgbGV0IGlzRW1wdHkgPSAhIXNjYW5uZXIuYigiLz4iKTsKICAgICAgbGV0IGVsZW1lbnQgPSBuZXcgWG1sRWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzKTsKICAgICAgZWxlbWVudC5wYXJlbnQgPSB0aGlzLmw7CiAgICAgIGlmICghaXNFbXB0eSkgewogICAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgVW5jbG9zZWQgc3RhcnQgdGFnIGZvciBlbGVtZW50IFxgJHtuYW1lfVxgYCk7CiAgICAgICAgfQogICAgICAgIHRoaXMubCA9IGVsZW1lbnQ7CiAgICAgICAgZG8gewogICAgICAgICAgdGhpcy5MKCk7CiAgICAgICAgfSB3aGlsZSAodGhpcy5CKCkgfHwgdGhpcy5NKCkgfHwgdGhpcy5LKCkgfHwgdGhpcy5FKCkgfHwgdGhpcy5EKCkpOwogICAgICAgIGxldCBlbmRUYWdNYXJrID0gc2Nhbm5lci5kOwogICAgICAgIGxldCBlbmRUYWdOYW1lOwogICAgICAgIGlmICghc2Nhbm5lci5iKCI8LyIpIHx8ICEoZW5kVGFnTmFtZSA9IHRoaXMucigpKSB8fCBlbmRUYWdOYW1lICE9PSBuYW1lKSB7CiAgICAgICAgICBzY2FubmVyLm8oZW5kVGFnTWFyayk7CiAgICAgICAgICB0aHJvdyB0aGlzLmEoYE1pc3NpbmcgZW5kIHRhZyBmb3IgZWxlbWVudCAke25hbWV9YCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuZSgpOwogICAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgVW5jbG9zZWQgZW5kIHRhZyBmb3IgZWxlbWVudCAke25hbWV9YCk7CiAgICAgICAgfQogICAgICAgIHRoaXMubCA9IGVsZW1lbnQucGFyZW50OwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmooZWxlbWVudCwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGFuIGBFcWAgcHJvZHVjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGFuIGBFcWAgcHJvZHVjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULUVxCiAgICAgKi8KICAgIHUoKSB7CiAgICAgIHRoaXMuZSgpOwogICAgICBpZiAodGhpcy5jLmIoIj0iKSkgewogICAgICAgIHRoaXMuZSgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYE1pc2NgIGNvbnRlbnQgaWYgcG9zc2libGUuCiAgICAgKgogICAgICogQHJldHVybnMgV2hldGhlciBhbnl0aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULU1pc2MKICAgICAqLwogICAgdygpIHsKICAgICAgcmV0dXJuIHRoaXMuRCgpIHx8IHRoaXMuRSgpIHx8IHRoaXMuZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBvbmUgb3IgbW9yZSBgTmFtZWAgY2hhcmFjdGVycyBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBgTmFtZWAgY2hhcmFjdGVycywgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIG5vbmUgd2VyZSBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jTlQtTmFtZQogICAgICovCiAgICByKCkgewogICAgICByZXR1cm4gaXNOYW1lU3RhcnRDaGFyKHRoaXMuYy5oKCkpID8gdGhpcy5jLnYoaXNOYW1lQ2hhcikgOiBlbXB0eVN0cmluZzI7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1waQogICAgICovCiAgICBFKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgc3RhcnRJbmRleCA9IHNjYW5uZXIuZDsKICAgICAgaWYgKCFzY2FubmVyLmIoIjw/IikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IG5hbWUgPSB0aGlzLnIoKTsKICAgICAgaWYgKG5hbWUpIHsKICAgICAgICBpZiAobmFtZS50b0xvd2VyQ2FzZSgpID09PSAieG1sIikgewogICAgICAgICAgc2Nhbm5lci5vKHN0YXJ0SW5kZXgpOwogICAgICAgICAgdGhyb3cgdGhpcy5hKCJYTUwgZGVjbGFyYXRpb24gaXNuJ3QgYWxsb3dlZCBoZXJlIik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBwcm9jZXNzaW5nIGluc3RydWN0aW9uIik7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmUoKSkgewogICAgICAgIGlmIChzY2FubmVyLmIoIj8+IikpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbihuYW1lKSwgc3RhcnRJbmRleCk7CiAgICAgICAgfQogICAgICAgIHRocm93IHRoaXMuYSgiV2hpdGVzcGFjZSBpcyByZXF1aXJlZCBhZnRlciBhIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbmFtZSIpOwogICAgICB9CiAgICAgIGxldCBjb250ZW50ID0gc2Nhbm5lci50KCI/PiIpOwogICAgICB0aGlzLnAoY29udGVudCk7CiAgICAgIGlmICghc2Nhbm5lci5iKCI/PiIpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJVbnRlcm1pbmF0ZWQgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbihuYW1lLCBub3JtYWxpemVMaW5lQnJlYWtzKGNvbnRlbnQpKSwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgcHJvbG9nIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSBwcm9sb2cgd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNzZWMtcHJvbG9nLWR0ZAogICAgICovCiAgICBIKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgc3RhcnRJbmRleCA9IHNjYW5uZXIuZDsKICAgICAgdGhpcy5QKCk7CiAgICAgIHdoaWxlICh0aGlzLncoKSkgewogICAgICB9CiAgICAgIGlmICh0aGlzLk4oKSkgewogICAgICAgIHdoaWxlICh0aGlzLncoKSkgewogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3RhcnRJbmRleCA8IHNjYW5uZXIuZDsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYSBwdWJsaWMgaWRlbnRpZmllciBsaXRlcmFsIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zCiAgICAgKiAgIFZhbHVlIG9mIHRoZSBwdWJsaWMgaWRlbnRpZmllciBsaXRlcmFsIG1pbnVzIHF1b3Rlcywgb3IgYGZhbHNlYCBpZgogICAgICogICBub3RoaW5nIHdhcyBjb25zdW1lZC4gQW4gZW1wdHkgc3RyaW5nIGluZGljYXRlcyB0aGF0IGEgcHVibGljIGlkIGxpdGVyYWwKICAgICAqICAgd2FzIGNvbnN1bWVkIGJ1dCB3YXMgZW1wdHkuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1QdWJpZExpdGVyYWwKICAgICAqLwogICAgTygpIHsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSB0aGlzLmMuZDsKICAgICAgbGV0IHZhbHVlID0gdGhpcy5zKCk7CiAgICAgIGlmICh2YWx1ZSAhPT0gZmFsc2UgJiYgIS9eWy1ceDIwXHJcbmEtekEtWjAtOScoKSssLi86PT87ISojQCRfJV0qJC8udGVzdCh2YWx1ZSkpIHsKICAgICAgICB0aGlzLmMubyhzdGFydEluZGV4KTsKICAgICAgICB0aHJvdyB0aGlzLmEoIkludmFsaWQgY2hhcmFjdGVyIGluIHB1YmxpYyBpZGVudGlmaWVyIik7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhIHJlZmVyZW5jZSBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGRpZmZlcnMgZnJvbSBgY29uc3VtZUNvbnRlbnRSZWZlcmVuY2UoKWAgaW4gdGhhdCBhIGNvbnN1bWVkIHJlZmVyZW5jZQogICAgICogd2lsbCBiZSByZXR1cm5lZCByYXRoZXIgdGhhbiBhZGRlZCB0byB0aGUgZG9jdW1lbnQuCiAgICAgKgogICAgICogQHJldHVybnMKICAgICAqICAgUGFyc2VkIHJlZmVyZW5jZSB2YWx1ZSwgb3IgYGZhbHNlYCBpZiBub3RoaW5nIHdhcyBjb25zdW1lZCAodG8KICAgICAqICAgZGlzdGluZ3Vpc2ggZnJvbSBhIHJlZmVyZW5jZSB0aGF0IHJlc29sdmVzIHRvIGFuIGVtcHR5IHN0cmluZykuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1SZWZlcmVuY2UKICAgICAqLwogICAgQygpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgaWYgKCFzY2FubmVyLmIoIiYiKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBsZXQgcmVmID0gc2Nhbm5lci52KGlzUmVmZXJlbmNlQ2hhcik7CiAgICAgIGlmIChzY2FubmVyLkYoKSAhPT0gIjsiKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJVbnRlcm1pbmF0ZWQgcmVmZXJlbmNlIChhIHJlZmVyZW5jZSBtdXN0IGVuZCB3aXRoIGA7YCkiKTsKICAgICAgfQogICAgICBsZXQgcGFyc2VkVmFsdWU7CiAgICAgIGlmIChyZWZbMF0gPT09ICIjIikgewogICAgICAgIGxldCBjb2RlUG9pbnQgPSByZWZbMV0gPT09ICJ4IiA/IHBhcnNlSW50KHJlZi5zbGljZSgyKSwgMTYpIDogcGFyc2VJbnQocmVmLnNsaWNlKDEpLCAxMCk7CiAgICAgICAgaWYgKGlzTmFOKGNvZGVQb2ludCkpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBjaGFyYWN0ZXIgcmVmZXJlbmNlIik7CiAgICAgICAgfQogICAgICAgIGlmICghaXNYbWxDb2RlUG9pbnQoY29kZVBvaW50KSkgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJDaGFyYWN0ZXIgcmVmZXJlbmNlIHJlc29sdmVzIHRvIGFuIGludmFsaWQgY2hhcmFjdGVyIik7CiAgICAgICAgfQogICAgICAgIHBhcnNlZFZhbHVlID0gU3RyaW5nLmZyb21Db2RlUG9pbnQoY29kZVBvaW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYXJzZWRWYWx1ZSA9IHByZWRlZmluZWRFbnRpdGllc1tyZWZdOwogICAgICAgIGlmIChwYXJzZWRWYWx1ZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICBsZXQgewogICAgICAgICAgICBpZ25vcmVVbmRlZmluZWRFbnRpdGllcywKICAgICAgICAgICAgcmVzb2x2ZVVuZGVmaW5lZEVudGl0eQogICAgICAgICAgfSA9IHRoaXMuZjsKICAgICAgICAgIGxldCB3cmFwcGVkUmVmID0gYCYke3JlZn07YDsKICAgICAgICAgIGlmIChyZXNvbHZlVW5kZWZpbmVkRW50aXR5KSB7CiAgICAgICAgICAgIGxldCByZXNvbHZlZFZhbHVlID0gcmVzb2x2ZVVuZGVmaW5lZEVudGl0eSh3cmFwcGVkUmVmKTsKICAgICAgICAgICAgaWYgKHJlc29sdmVkVmFsdWUgIT09IG51bGwgJiYgcmVzb2x2ZWRWYWx1ZSAhPT0gdm9pZCAwKSB7CiAgICAgICAgICAgICAgbGV0IHR5cGUgPSB0eXBlb2YgcmVzb2x2ZWRWYWx1ZTsKICAgICAgICAgICAgICBpZiAodHlwZSAhPT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFxgcmVzb2x2ZVVuZGVmaW5lZEVudGl0eSgpXGAgbXVzdCByZXR1cm4gYSBzdHJpbmcsIFxgbnVsbFxgLCBvciBcYHVuZGVmaW5lZFxgLCBidXQgcmV0dXJuZWQgYSB2YWx1ZSBvZiB0eXBlICR7dHlwZX1gKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVkVmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChpZ25vcmVVbmRlZmluZWRFbnRpdGllcykgewogICAgICAgICAgICByZXR1cm4gd3JhcHBlZFJlZjsKICAgICAgICAgIH0KICAgICAgICAgIHNjYW5uZXIubygtd3JhcHBlZFJlZi5sZW5ndGgpOwogICAgICAgICAgdGhyb3cgdGhpcy5hKGBOYW1lZCBlbnRpdHkgaXNuJ3QgZGVmaW5lZDogJHt3cmFwcGVkUmVmfWApOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcGFyc2VkVmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgYFN5c3RlbUxpdGVyYWxgIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEEgYFN5c3RlbUxpdGVyYWxgIGlzIHNpbWlsYXIgdG8gYW4gYXR0cmlidXRlIHZhbHVlLCBidXQgYWxsb3dzIHRoZQogICAgICogY2hhcmFjdGVycyBgPGAgYW5kIGAmYCBhbmQgZG9lc24ndCByZXBsYWNlIHJlZmVyZW5jZXMuCiAgICAgKgogICAgICogQHJldHVybnMKICAgICAqICAgVmFsdWUgb2YgdGhlIGBTeXN0ZW1MaXRlcmFsYCBtaW51cyBxdW90ZXMsIG9yIGBmYWxzZWAgaWYgbm90aGluZyB3YXMKICAgICAqICAgY29uc3VtZWQuIEFuIGVtcHR5IHN0cmluZyBpbmRpY2F0ZXMgdGhhdCBhIGBTeXN0ZW1MaXRlcmFsYCB3YXMgY29uc3VtZWQKICAgICAqICAgYnV0IHdhcyBlbXB0eS4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULVN5c3RlbUxpdGVyYWwKICAgICAqLwogICAgcygpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHF1b3RlID0gc2Nhbm5lci5iKCciJykgfHwgc2Nhbm5lci5iKCInIik7CiAgICAgIGlmICghcXVvdGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IHZhbHVlID0gc2Nhbm5lci50KHF1b3RlKTsKICAgICAgdGhpcy5wKHZhbHVlKTsKICAgICAgaWYgKCFzY2FubmVyLmIocXVvdGUpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJNaXNzaW5nIGVuZCBxdW90ZSIpOwogICAgICB9CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgb25lIG9yIG1vcmUgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYW55IHdoaXRlc3BhY2UgY2hhcmFjdGVycyB3ZXJlIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyN3aGl0ZQogICAgICovCiAgICBlKCkgewogICAgICByZXR1cm4gISF0aGlzLmMudihpc1doaXRlc3BhY2UpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbiBYTUwgZGVjbGFyYXRpb24gaWYgcG9zc2libGUuCiAgICAgKgogICAgICogQHJldHVybnMgV2hldGhlciBhbiBYTUwgZGVjbGFyYXRpb24gd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1YTUxEZWNsCiAgICAgKi8KICAgIFAoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPD94bWwiKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoIXRoaXMuZSgpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJJbnZhbGlkIFhNTCBkZWNsYXJhdGlvbiIpOwogICAgICB9CiAgICAgIGxldCB2ZXJzaW9uID0gISFzY2FubmVyLmIoInZlcnNpb24iKSAmJiB0aGlzLnUoKSAmJiB0aGlzLnMoKTsKICAgICAgaWYgKHZlcnNpb24gPT09IGZhbHNlKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJYTUwgdmVyc2lvbiBpcyBtaXNzaW5nIG9yIGludmFsaWQiKTsKICAgICAgfSBlbHNlIGlmICghL14xXC5bMC05XSskLy50ZXN0KHZlcnNpb24pKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJJbnZhbGlkIGNoYXJhY3RlciBpbiB2ZXJzaW9uIG51bWJlciIpOwogICAgICB9CiAgICAgIGxldCBlbmNvZGluZzsKICAgICAgbGV0IHN0YW5kYWxvbmU7CiAgICAgIGlmICh0aGlzLmUoKSkgewogICAgICAgIGVuY29kaW5nID0gISFzY2FubmVyLmIoImVuY29kaW5nIikgJiYgdGhpcy51KCkgJiYgdGhpcy5zKCk7CiAgICAgICAgaWYgKGVuY29kaW5nKSB7CiAgICAgICAgICB0aGlzLmUoKTsKICAgICAgICB9CiAgICAgICAgc3RhbmRhbG9uZSA9ICEhc2Nhbm5lci5iKCJzdGFuZGFsb25lIikgJiYgdGhpcy51KCkgJiYgdGhpcy5zKCk7CiAgICAgICAgaWYgKHN0YW5kYWxvbmUpIHsKICAgICAgICAgIGlmIChzdGFuZGFsb25lICE9PSAieWVzIiAmJiBzdGFuZGFsb25lICE9PSAibm8iKSB7CiAgICAgICAgICAgIHRocm93IHRoaXMuYSgnT25seSAieWVzIiBhbmQgIm5vIiBhcmUgcGVybWl0dGVkIGFzIHZhbHVlcyBvZiBgc3RhbmRhbG9uZWAnKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZSgpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIXNjYW5uZXIuYigiPz4iKSkgewogICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBvciB1bmNsb3NlZCBYTUwgZGVjbGFyYXRpb24iKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5mLnByZXNlcnZlWG1sRGVjbGFyYXRpb24gPyB0aGlzLmoobmV3IFhtbERlY2xhcmF0aW9uKAogICAgICAgIHZlcnNpb24sCiAgICAgICAgZW5jb2RpbmcgfHwgdm9pZCAwLAogICAgICAgIHN0YW5kYWxvbmUgfHwgdm9pZCAwCiAgICAgICksIHN0YXJ0SW5kZXgpIDogdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbiBgWG1sRXJyb3JgIGZvciB0aGUgY3VycmVudCBzY2FubmVyIHBvc2l0aW9uLgogICAgICovCiAgICBhKG1lc3NhZ2UpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBYbWxFcnJvcihtZXNzYWdlLCBzY2FubmVyLmQsIHNjYW5uZXIubSk7CiAgICB9CiAgICAvKioKICAgICAqIFRocm93cyBhbiBpbnZhbGlkIGNoYXJhY3RlciBlcnJvciBpZiBhbnkgY2hhcmFjdGVyIGluIHRoZSBnaXZlbiBfc3RyaW5nXwogICAgICogaXNuJ3QgYSB2YWxpZCBYTUwgY2hhcmFjdGVyLgogICAgICovCiAgICBwKHN0cmluZykgewogICAgICBsZXQgeyBsZW5ndGggfSA9IHN0cmluZzsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgICAgIGxldCBjcCA9IHN0cmluZy5jb2RlUG9pbnRBdChpKTsKICAgICAgICBpZiAoIWlzWG1sQ29kZVBvaW50KGNwKSkgewogICAgICAgICAgdGhpcy5jLm8oLShbLi4uc3RyaW5nXS5sZW5ndGggLSBpKSk7CiAgICAgICAgICB0aHJvdyB0aGlzLmEoIkludmFsaWQgY2hhcmFjdGVyIik7CiAgICAgICAgfQogICAgICAgIGlmIChjcCA+IDY1NTM1KSB7CiAgICAgICAgICBpICs9IDE7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKICBmdW5jdGlvbiBub3JtYWxpemVMaW5lQnJlYWtzKHRleHQpIHsKICAgIGxldCBpID0gMDsKICAgIHdoaWxlICgoaSA9IHRleHQuaW5kZXhPZigiXHIiLCBpKSkgIT09IC0xKSB7CiAgICAgIHRleHQgPSB0ZXh0W2kgKyAxXSA9PT0gIlxuIiA/IHRleHQuc2xpY2UoMCwgaSkgKyB0ZXh0LnNsaWNlKGkgKyAxKSA6IHRleHQuc2xpY2UoMCwgaSkgKyAiXG4iICsgdGV4dC5zbGljZShpICsgMSk7CiAgICB9CiAgICByZXR1cm4gdGV4dDsKICB9CiAgZnVuY3Rpb24gcGFyc2VYbWwoeG1sLCBvcHRpb25zKSB7CiAgICByZXR1cm4gbmV3IFBhcnNlcih4bWwsIG9wdGlvbnMpLmRvY3VtZW50OwogIH0KICBjbGFzcyBYbWxQYXJzZUVycm9yIGV4dGVuZHMgRXJyb3IgewogICAgY29uc3RydWN0b3IobWVzc2FnZSkgewogICAgICBzdXBlcihtZXNzYWdlKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gcGFyc2VYbWxTdHJpbmcoeG1sU3RyaW5nKSB7CiAgICBsZXQgZG9jID0gbnVsbDsKICAgIHRyeSB7CiAgICAgIGRvYyA9IGJyb3dzZXIucGFyc2VYbWwoeG1sU3RyaW5nKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgbmV3IFhtbFBhcnNlRXJyb3IoZS5tZXNzYWdlKTsKICAgIH0KICAgIHJldHVybiBkb2M7CiAgfQogIGZ1bmN0aW9uIHN0cmlwTmFtZXNwYWNlKG5hbWUpIHsKICAgIGNvbnN0IGNvbG9uID0gbmFtZS5pbmRleE9mKCI6Iik7CiAgICByZXR1cm4gY29sb24gPiAtMSA/IG5hbWUuc3Vic3RyKGNvbG9uICsgMSkgOiBuYW1lOwogIH0KICBmdW5jdGlvbiBnZXRSb290RWxlbWVudCh4bWxEb2MpIHsKICAgIHJldHVybiB4bWxEb2MuY2hpbGRyZW5bMF07CiAgfQogIGZ1bmN0aW9uIGdldEVsZW1lbnROYW1lKGVsZW1lbnQpIHsKICAgIHJldHVybiBlbGVtZW50Lm5hbWUgfHwgIiI7CiAgfQogIGZ1bmN0aW9uIGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgbmFtZSwgbmVzdGVkID0gZmFsc2UpIHsKICAgIGNvbnN0IHN0cmlwcGVkTmFtZSA9IHN0cmlwTmFtZXNwYWNlKG5hbWUpOwogICAgZnVuY3Rpb24gcmVkdWNlcihwcmV2LCBjdXJyKSB7CiAgICAgIGlmIChzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShjdXJyKSkgPT09IHN0cmlwcGVkTmFtZSkgewogICAgICAgIHByZXYucHVzaChjdXJyKTsKICAgICAgfQogICAgICBpZiAobmVzdGVkICYmIEFycmF5LmlzQXJyYXkoY3Vyci5jaGlsZHJlbikpIHsKICAgICAgICByZXR1cm4gWy4uLnByZXYsIC4uLmN1cnIuY2hpbGRyZW4ucmVkdWNlKHJlZHVjZXIsIFtdKV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHByZXY7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBlbGVtZW50ICYmIEFycmF5LmlzQXJyYXkoZWxlbWVudC5jaGlsZHJlbikgPyBlbGVtZW50LmNoaWxkcmVuLnJlZHVjZShyZWR1Y2VyLCBbXSkgOiBbXTsKICB9CiAgZnVuY3Rpb24gZmluZENoaWxkRWxlbWVudChlbGVtZW50LCBuYW1lLCBuZXN0ZWQgPSBmYWxzZSkgewogICAgcmV0dXJuIGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgbmFtZSwgbmVzdGVkKVswXSB8fCBudWxsOwogIH0KICBmdW5jdGlvbiBnZXRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCkgewogICAgcmV0dXJuIGVsZW1lbnQgJiYgQXJyYXkuaXNBcnJheShlbGVtZW50LmNoaWxkcmVuKSA/IFsKICAgICAgLi4uZWxlbWVudC5jaGlsZHJlbi5maWx0ZXIoCiAgICAgICAgKGVsKSA9PiBlbCBpbnN0YW5jZW9mIGJyb3dzZXIuWG1sRWxlbWVudAogICAgICApCiAgICBdIDogW107CiAgfQogIGZ1bmN0aW9uIGdldEVsZW1lbnRUZXh0KGVsZW1lbnQpIHsKICAgIGNvbnN0IHRleHROb2RlID0gZWxlbWVudCAmJiBBcnJheS5pc0FycmF5KGVsZW1lbnQuY2hpbGRyZW4pID8gZWxlbWVudC5jaGlsZHJlbi5maW5kKChub2RlKSA9PiBub2RlLnR5cGUgPT09ICJ0ZXh0IikgOiBudWxsOwogICAgcmV0dXJuIHRleHROb2RlID8gdGV4dE5vZGUudGV4dCA6ICIiOwogIH0KICBmdW5jdGlvbiBnZXRFbGVtZW50QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJOYW1lKSB7CiAgICByZXR1cm4gZWxlbWVudCAmJiBlbGVtZW50LmF0dHJpYnV0ZXNbYXR0ck5hbWVdIHx8ICIiOwogIH0KICBjbGFzcyBFbmRwb2ludEVycm9yIGV4dGVuZHMgRXJyb3IgewogICAgY29uc3RydWN0b3IobWVzc2FnZSwgaHR0cFN0YXR1cywgaXNDcm9zc09yaWdpblJlbGF0ZWQpIHsKICAgICAgc3VwZXIobWVzc2FnZSk7CiAgICAgIHRoaXMuaHR0cFN0YXR1cyA9IGh0dHBTdGF0dXM7CiAgICAgIHRoaXMuaXNDcm9zc09yaWdpblJlbGF0ZWQgPSBpc0Nyb3NzT3JpZ2luUmVsYXRlZDsKICAgICAgdGhpcy5uYW1lID0gIkVuZHBvaW50RXJyb3IiOwogICAgfQogIH0KICBjbGFzcyBTZXJ2aWNlRXhjZXB0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKiBAcGFyYW0gbWVzc2FnZSBFcnJvciBtZXNzYWdlCiAgICAgKiBAcGFyYW0gcmVxdWVzdFVybCBVUkwgd2hpY2ggcmVzdWx0ZWQgaW4gdGhlIFNlcnZpY2VFeGNlcHRpb24KICAgICAqIEBwYXJhbSBjb2RlIE9wdGlvbmFsIFNlcnZpY2VFeGNlcHRpb24gY29kZQogICAgICogQHBhcmFtIGxvY2F0b3IgT3B0aW9uYWwgU2VydmljZUV4Y2VwdGlvbiBsb2NhdG9yCiAgICAgKiBAcGFyYW0gcmVzcG9uc2UgT3B0aW9uYWwgcmVzcG9uc2UgY29udGVudCByZWNlaXZlZAogICAgICovCiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXF1ZXN0VXJsLCBjb2RlLCBsb2NhdG9yLCByZXNwb25zZSkgewogICAgICBzdXBlcihtZXNzYWdlKTsKICAgICAgdGhpcy5yZXF1ZXN0VXJsID0gcmVxdWVzdFVybDsKICAgICAgdGhpcy5jb2RlID0gY29kZTsKICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjsKICAgICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlOwogICAgICB0aGlzLm5hbWUgPSAiU2VydmljZUV4Y2VwdGlvbkVycm9yIjsKICAgIH0KICB9CiAgZnVuY3Rpb24gcGFyc2Uoc2VydmljZUV4Y2VwdGlvbiwgdXJsKSB7CiAgICBjb25zdCBlcnJvckNvZGUgPSBnZXRFbGVtZW50QXR0cmlidXRlKHNlcnZpY2VFeGNlcHRpb24sICJjb2RlIikgfHwgZ2V0RWxlbWVudEF0dHJpYnV0ZShzZXJ2aWNlRXhjZXB0aW9uLCAiZXhjZXB0aW9uQ29kZSIpOwogICAgY29uc3QgZXJyb3JMb2NhdG9yID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShzZXJ2aWNlRXhjZXB0aW9uLCAibG9jYXRvciIpOwogICAgY29uc3QgdGV4dEVsZW1lbnQgPSBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VFeGNlcHRpb24sICJFeGNlcHRpb25UZXh0IikgfHwgc2VydmljZUV4Y2VwdGlvbjsKICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGdldEVsZW1lbnRUZXh0KHRleHRFbGVtZW50KS50cmltKCk7CiAgICByZXR1cm4gbmV3IFNlcnZpY2VFeGNlcHRpb25FcnJvcigKICAgICAgZXJyb3JNZXNzYWdlLAogICAgICB1cmwsCiAgICAgIGVycm9yQ29kZSwKICAgICAgZXJyb3JMb2NhdG9yLAogICAgICBzZXJ2aWNlRXhjZXB0aW9uLmRvY3VtZW50CiAgICApOwogIH0KICBmdW5jdGlvbiBjaGVjayhyZXNwb25zZSwgdXJsKSB7CiAgICBjb25zdCByb290RWwgPSBnZXRSb290RWxlbWVudChyZXNwb25zZSk7CiAgICBjb25zdCByb290RWxOYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUocm9vdEVsKSk7CiAgICBpZiAocm9vdEVsTmFtZSA9PT0gIlNlcnZpY2VFeGNlcHRpb25SZXBvcnQiKSB7CiAgICAgIGNvbnN0IGVycm9yID0gZmluZENoaWxkRWxlbWVudChyb290RWwsICJTZXJ2aWNlRXhjZXB0aW9uIik7CiAgICAgIGlmIChlcnJvcikgewogICAgICAgIHRocm93IHBhcnNlKGVycm9yLCB1cmwpOwogICAgICB9CiAgICB9CiAgICBpZiAocm9vdEVsTmFtZSA9PT0gIkV4Y2VwdGlvblJlcG9ydCIpIHsKICAgICAgY29uc3QgZXJyb3IgPSBmaW5kQ2hpbGRFbGVtZW50KHJvb3RFbCwgIkV4Y2VwdGlvbiIpOwogICAgICBpZiAoZXJyb3IpIHsKICAgICAgICB0aHJvdyBwYXJzZShlcnJvciwgdXJsKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0KICBmdW5jdGlvbiBlbmNvZGVFcnJvcihlcnJvcikgewogICAgY29uc3QgYmFzZSA9IHsKICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLAogICAgICBuYW1lOiBlcnJvci5uYW1lCiAgICB9OwogICAgaWYgKGVycm9yIGluc3RhbmNlb2YgU2VydmljZUV4Y2VwdGlvbkVycm9yKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgLi4uYmFzZSwKICAgICAgICBjb2RlOiBlcnJvci5jb2RlLAogICAgICAgIGxvY2F0b3I6IGVycm9yLmxvY2F0b3IsCiAgICAgICAgcmVzcG9uc2U6IGVycm9yLnJlc3BvbnNlLAogICAgICAgIHJlcXVlc3RVcmw6IGVycm9yLnJlcXVlc3RVcmwKICAgICAgfTsKICAgIH0KICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVuZHBvaW50RXJyb3IpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5iYXNlLAogICAgICAgIGh0dHBTdGF0dXM6IGVycm9yLmh0dHBTdGF0dXMsCiAgICAgICAgaXNDcm9zc09yaWdpblJlbGF0ZWQ6IGVycm9yLmlzQ3Jvc3NPcmlnaW5SZWxhdGVkCiAgICAgIH07CiAgICB9CiAgICByZXR1cm4gYmFzZTsKICB9CiAgY29uc3QgZmFsbGJhY2tFdmVudFRhcmdldCA9IG5ldyBFdmVudFRhcmdldCgpOwogIGZ1bmN0aW9uIGFkZFRhc2tIYW5kbGVyKHRhc2tOYW1lLCBzY29wZSwgaGFuZGxlcikgewogICAgY29uc3QgdXNlV29ya2VyID0gdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAidW5kZWZpbmVkIjsKICAgIGNvbnN0IGV2ZW50SGFuZGxlciA9IGFzeW5jIChyZXF1ZXN0KSA9PiB7CiAgICAgIGlmIChyZXF1ZXN0LnRhc2tOYW1lID09PSB0YXNrTmFtZSkgewogICAgICAgIGxldCByZXNwb25zZSwgZXJyb3I7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgaGFuZGxlcihyZXF1ZXN0LnBhcmFtcyk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgZXJyb3IgPSBlbmNvZGVFcnJvcihlKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgbWVzc2FnZSA9ICgKICAgICAgICAgIC8qKiBAdHlwZSB7V29ya2VyUmVzcG9uc2V9ICovCiAgICAgICAgICB7CiAgICAgICAgICAgIHRhc2tOYW1lLAogICAgICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3QucmVxdWVzdElkLAogICAgICAgICAgICAuLi5yZXNwb25zZSAmJiB7IHJlc3BvbnNlIH0sCiAgICAgICAgICAgIC4uLmVycm9yICYmIHsgZXJyb3IgfQogICAgICAgICAgfQogICAgICAgICk7CiAgICAgICAgaWYgKHVzZVdvcmtlcikgewogICAgICAgICAgc2NvcGUucG9zdE1lc3NhZ2UobWVzc2FnZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZhbGxiYWNrRXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudCgKICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KCJvZ2MtY2xpZW50LnJlc3BvbnNlIiwgewogICAgICAgICAgICAgIGRldGFpbDogbWVzc2FnZQogICAgICAgICAgICB9KQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBpZiAodXNlV29ya2VyKSB7CiAgICAgIHNjb3BlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCAoZXZlbnQpID0+IGV2ZW50SGFuZGxlcihldmVudC5kYXRhKSk7CiAgICB9IGVsc2UgewogICAgICBmYWxsYmFja0V2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgIm9nYy1jbGllbnQucmVxdWVzdCIsCiAgICAgICAgKGV2ZW50KSA9PiBldmVudEhhbmRsZXIoZXZlbnQuZGV0YWlsKQogICAgICApOwogICAgfQogIH0KICBjb25zdCBFTkNPRElOR1MgPSBbInV0Zi04IiwgInV0Zi0xNiIsICJpc28tODg1OS0xIl07CiAgY29uc3QgRkFMTEJBQ0tfRU5DT0RJTkcgPSAidXRmLTgiOwogIGZ1bmN0aW9uIGV4dHJhY3RFbmNvZGluZyhjb250ZW50VHlwZSkgewogICAgY29uc3QgbWF0Y2hlcyA9IC9jaGFyc2V0PShbXjtdKykvLmV4ZWMoY29udGVudFR5cGUpOwogICAgcmV0dXJuIG1hdGNoZXMgPyBtYXRjaGVzWzFdIDogbnVsbDsKICB9CiAgZnVuY3Rpb24gZGVjb2RlU3RyaW5nKGJ1ZmZlciwgY29udGVudFR5cGUpIHsKICAgIGNvbnN0IGVuY29kaW5nSGludCA9IGNvbnRlbnRUeXBlID8gZXh0cmFjdEVuY29kaW5nKGNvbnRlbnRUeXBlKSA6IG51bGw7CiAgICBjb25zdCBlbmNvZGluZ0F0dGVtcHRzID0gZW5jb2RpbmdIaW50ID8gW2VuY29kaW5nSGludCwgLi4uRU5DT0RJTkdTXSA6IEVOQ09ESU5HUzsKICAgIGZvciAoY29uc3QgZW5jb2Rpbmcgb2YgZW5jb2RpbmdBdHRlbXB0cykgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmcsIHsgZmF0YWw6IHRydWUgfSk7CiAgICAgICAgcmV0dXJuIGRlY29kZXIuZGVjb2RlKGJ1ZmZlcik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgfQogICAgfQogICAgY29uc29sZS53YXJuKAogICAgICBgW29nYy1jbGllbnRdIFhNTCBkb2N1bWVudCBlbmNvZGluZyBjb3VsZCBub3QgYmUgZGV0ZXJtaW5lZCwgZmFsbGluZyBiYWNrIHRvICR7RkFMTEJBQ0tfRU5DT0RJTkd9LmAKICAgICk7CiAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKEZBTExCQUNLX0VOQ09ESU5HKS5kZWNvZGUoYnVmZmVyKTsKICB9CiAgY29uc3QgZmV0Y2hQcm9taXNlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgbGV0IGZldGNoT3B0aW9ucyA9IHt9OwogIGZ1bmN0aW9uIHNldEZldGNoT3B0aW9ucyhvcHRpb25zKSB7CiAgICBmZXRjaE9wdGlvbnMgPSBvcHRpb25zOwogIH0KICBmdW5jdGlvbiBnZXRGZXRjaE9wdGlvbnMoKSB7CiAgICByZXR1cm4gZmV0Y2hPcHRpb25zOwogIH0KICBmdW5jdGlvbiBzaGFyZWRGZXRjaCh1cmwsIG1ldGhvZCA9ICJHRVQiLCBhc0pzb24sIGN1c3RvbUFjY2VwdEhlYWRlcikgewogICAgbGV0IGZldGNoS2V5ID0gYCR7bWV0aG9kfSMke3VybH1gOwogICAgaWYgKGFzSnNvbiB8fCBjdXN0b21BY2NlcHRIZWFkZXIpIHsKICAgICAgZmV0Y2hLZXkgPSBgJHttZXRob2R9I2FzSnNvbiMke3VybH1gOwogICAgfQogICAgaWYgKGZldGNoUHJvbWlzZXMuaGFzKGZldGNoS2V5KSkgewogICAgICByZXR1cm4gZmV0Y2hQcm9taXNlcy5nZXQoZmV0Y2hLZXkpOwogICAgfQogICAgY29uc3Qgb3B0aW9ucyA9IHsgLi4uZ2V0RmV0Y2hPcHRpb25zKCkgfTsKICAgIG9wdGlvbnMubWV0aG9kID0gbWV0aG9kOwogICAgaWYgKGN1c3RvbUFjY2VwdEhlYWRlcikgewogICAgICBvcHRpb25zLmhlYWRlcnMgPSAiaGVhZGVycyIgaW4gb3B0aW9ucyA/IG9wdGlvbnMuaGVhZGVycyA6IHt9OwogICAgICBvcHRpb25zLmhlYWRlcnNbIkFjY2VwdCJdID0gY3VzdG9tQWNjZXB0SGVhZGVyOwogICAgfSBlbHNlIGlmIChhc0pzb24pIHsKICAgICAgb3B0aW9ucy5oZWFkZXJzID0gImhlYWRlcnMiIGluIG9wdGlvbnMgPyBvcHRpb25zLmhlYWRlcnMgOiB7fTsKICAgICAgb3B0aW9ucy5oZWFkZXJzWyJBY2NlcHQiXSA9ICJhcHBsaWNhdGlvbi9qc29uLGFwcGxpY2F0aW9uL3NjaGVtYStqc29uIjsKICAgIH0KICAgIGNvbnN0IHByb21pc2UgPSBmZXRjaCh1cmwsIG9wdGlvbnMpLmNhdGNoKChlKSA9PiBlKS50aGVuKChyZXNwKSA9PiB7CiAgICAgIGZldGNoUHJvbWlzZXMuZGVsZXRlKGZldGNoS2V5KTsKICAgICAgcmV0dXJuIHJlc3A7CiAgICB9KTsKICAgIGZldGNoUHJvbWlzZXMuc2V0KGZldGNoS2V5LCBwcm9taXNlKTsKICAgIHJldHVybiBwcm9taXNlLnRoZW4oKHJlc3ApID0+IHsKICAgICAgaWYgKHJlc3AgaW5zdGFuY2VvZiBFcnJvcikKICAgICAgICB0aHJvdyByZXNwOwogICAgICByZXR1cm4gcmVzcC5jbG9uZSgpOwogICAgfSk7CiAgfQogIGZ1bmN0aW9uIHF1ZXJ5WG1sRG9jdW1lbnQodXJsKSB7CiAgICByZXR1cm4gc2hhcmVkRmV0Y2godXJsKS5jYXRjaCgKICAgICAgKCkgPT4gKAogICAgICAgIC8vIGF0dGVtcHQgYSBIRUFEIHRvIHNlZSBpZiB0aGUgZmFpbHVyZSBjb21lcyBmcm9tIENPUlMgb3IgdGhlIHNlcnZpY2UgaXMgZ2VuZXJhbGx5IHVucmVhY2hhYmxlCiAgICAgICAgZmV0Y2godXJsLCB7IC4uLmdldEZldGNoT3B0aW9ucygpLCBtZXRob2Q6ICJIRUFEIiwgbW9kZTogIm5vLWNvcnMiIH0pLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhyb3cgbmV3IEVuZHBvaW50RXJyb3IoCiAgICAgICAgICAgIGBGZXRjaGluZyB0aGUgZG9jdW1lbnQgZmFpbGVkIGVpdGhlciBkdWUgdG8gbmV0d29yayBlcnJvcnMgb3IgdW5yZWFjaGFibGUgaG9zdCwgZXJyb3IgaXM6ICR7ZXJyb3IubWVzc2FnZX1gLAogICAgICAgICAgICAwLAogICAgICAgICAgICBmYWxzZQogICAgICAgICAgKTsKICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgIHRocm93IG5ldyBFbmRwb2ludEVycm9yKAogICAgICAgICAgICBgVGhlIGRvY3VtZW50IGNvdWxkIG5vdCBiZSBmZXRjaGVkIGR1ZSB0byBDT1JTIGxpbWl0YXRpb25zYCwKICAgICAgICAgICAgMCwKICAgICAgICAgICAgdHJ1ZQogICAgICAgICAgKTsKICAgICAgICB9KQogICAgICApCiAgICApLnRoZW4oYXN5bmMgKHJlc3ApID0+IHsKICAgICAgaWYgKCFyZXNwLm9rKSB7CiAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3AudGV4dCgpOwogICAgICAgIHRocm93IG5ldyBFbmRwb2ludEVycm9yKAogICAgICAgICAgYFJlY2VpdmVkIGFuIGVycm9yIHdpdGggY29kZSAke3Jlc3Auc3RhdHVzfTogJHt0ZXh0fWAsCiAgICAgICAgICByZXNwLnN0YXR1cywKICAgICAgICAgIGZhbHNlCiAgICAgICAgKTsKICAgICAgfQogICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCByZXNwLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlSGVhZGVyID0gcmVzcC5oZWFkZXJzLmdldCgiQ29udGVudC1UeXBlIik7CiAgICAgIHJldHVybiBkZWNvZGVTdHJpbmcoYnVmZmVyLCBjb250ZW50VHlwZUhlYWRlcik7CiAgICB9KS50aGVuKCh4bWwpID0+IHBhcnNlWG1sU3RyaW5nKHhtbCkpOwogIH0KICBmdW5jdGlvbiBzZXRRdWVyeVBhcmFtcyh1cmwsIHBhcmFtcykgewogICAgY29uc3QgZW5jb2RlZFVybE1hdGNoID0gdXJsLm1hdGNoKC8oaHR0cHM/JTNBJTJGJTJGW14vXSspJC8pOwogICAgaWYgKGVuY29kZWRVcmxNYXRjaCkgewogICAgICBjb25zdCBlbmNvZGVkVXJsID0gZW5jb2RlZFVybE1hdGNoWzFdOwogICAgICBjb25zdCBtb2RpZmllZFVybCA9IHNldFF1ZXJ5UGFyYW1zKGRlY29kZVVSSUNvbXBvbmVudChlbmNvZGVkVXJsKSwgcGFyYW1zKTsKICAgICAgcmV0dXJuIHVybC5yZXBsYWNlKGVuY29kZWRVcmwsIGVuY29kZVVSSUNvbXBvbmVudChtb2RpZmllZFVybCkpOwogICAgfQogICAgY29uc3QgdXJsT2JqID0gbmV3IFVSTCh1cmwpOwogICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHBhcmFtcyk7CiAgICBjb25zdCBrZXlzTG93ZXIgPSBrZXlzLm1hcCgoa2V5KSA9PiBrZXkudG9Mb3dlckNhc2UoKSk7CiAgICBjb25zdCB0b0RlbGV0ZSA9IFtdOwogICAgZm9yIChjb25zdCBwYXJhbSBvZiB1cmxPYmouc2VhcmNoUGFyYW1zLmtleXMoKSkgewogICAgICBpZiAoa2V5c0xvd2VyLmluZGV4T2YocGFyYW0udG9Mb3dlckNhc2UoKSkgPiAtMSkgewogICAgICAgIHRvRGVsZXRlLnB1c2gocGFyYW0pOwogICAgICB9CiAgICB9CiAgICB0b0RlbGV0ZS5tYXAoKHBhcmFtKSA9PiB1cmxPYmouc2VhcmNoUGFyYW1zLmRlbGV0ZShwYXJhbSkpOwogICAga2V5cy5mb3JFYWNoKAogICAgICAoa2V5KSA9PiB1cmxPYmouc2VhcmNoUGFyYW1zLnNldCgKICAgICAgICBrZXksCiAgICAgICAgcGFyYW1zW2tleV0gPT09IHRydWUgPyAiIiA6IHBhcmFtc1trZXldCiAgICAgICkKICAgICk7CiAgICB1cmxPYmouc2VhcmNoID0gdXJsT2JqLnNlYXJjaC5yZXBsYWNlKC9cKy9nLCAiJTIwIik7CiAgICByZXR1cm4gdXJsT2JqLnRvU3RyaW5nKCk7CiAgfQogIGNvbnN0IExhdExvbkNyc0xpc3QgPSBbCiAgICAiRVBTRzo0MDQ2IiwKICAgIC8vIFJHUkRDIDIwMDUKICAgICJFUFNHOjQwNzUiLAogICAgLy8gU1JFRjk4CiAgICAiRVBTRzo0MTIwIiwKICAgIC8vIEdyZWVrCiAgICAiRVBTRzo0MTIyIiwKICAgIC8vIEFUUzc3CiAgICAiRVBTRzo0MTI0IiwKICAgIC8vIFJUOTAKICAgICJFUFNHOjQxMjYiLAogICAgLy8gTEtTOTQgKEVUUlM4OSkKICAgICJFUFNHOjQxNDkiLAogICAgLy8gQ0gxOTAzCiAgICAiRVBTRzo0MTUxIiwKICAgIC8vIENIVFJGOTUKICAgICJFUFNHOjQxNTMiLAogICAgLy8gUmFzc2FkaXJhbgogICAgIkVQU0c6NDE1NSIsCiAgICAvLyBEYWJvbGEgMTk4MQogICAgIkVQU0c6NDE1NyIsCiAgICAvLyBNb3VudCBEaWxsb24KICAgICJFUFNHOjQxNTkiLAogICAgLy8gRUxENzkKICAgICJFUFNHOjQxNjEiLAogICAgLy8gUGFtcGEgZGVsIENhc3RpbGxvCiAgICAiRVBTRzo0MTYzIiwKICAgIC8vIFllbWVuIE5HTjk2CiAgICAiRVBTRzo0MTY1IiwKICAgIC8vIEJpc3NhdQogICAgIkVQU0c6NDE2NyIsCiAgICAvLyBOWkdEMjAwMAogICAgIkVQU0c6NDE2OSIsCiAgICAvLyBBbWVyaWNhbiBTYW1vYSAxOTYyCiAgICAiRVBTRzo0MTcxIiwKICAgIC8vIFJHRjkzCiAgICAiRVBTRzo0MTczIiwKICAgIC8vIElSRU5FVDk1CiAgICAiRVBTRzo0MTc1IiwKICAgIC8vIFNpZXJyYSBMZW9uZSAxOTY4CiAgICAiRVBTRzo0MTc4IiwKICAgIC8vIFB1bGtvdm8gMTk0Mig4MykKICAgICJFUFNHOjQxODAiLAogICAgLy8gRVNUOTcKICAgICJFUFNHOjQxODIiLAogICAgLy8gQXpvcmVzIE9jY2lkZW50YWwgMTkzOQogICAgIkVQU0c6NDE4NCIsCiAgICAvLyBBem9yZXMgT3JpZW50YWwgMTk0MAogICAgIkVQU0c6NDE4OCIsCiAgICAvLyBPU05JIDE5NTIKICAgICJFUFNHOjQxOTAiLAogICAgLy8gUE9TR0FSIDk4CiAgICAiRVBTRzo0MTkxIiwKICAgIC8vIEFsYmFuaWFuIDE5ODcKICAgICJFUFNHOjQxOTYiLAogICAgLy8gQW1tYXNzYWxpayAxOTU4CiAgICAiRVBTRzo0MTk4IiwKICAgIC8vIEtvdXNzZXJpCiAgICAiRVBTRzo0MjAyIiwKICAgIC8vIEFHRDY2CiAgICAiRVBTRzo0MjEwIiwKICAgIC8vIEFyYyAxOTYwCiAgICAiRVBTRzo0MjExIiwKICAgIC8vIEJhdGF2aWEKICAgICJFUFNHOjQyMTQiLAogICAgLy8gQmVpamluZyAxOTU0CiAgICAiRVBTRzo0MjI2IiwKICAgIC8vIENvdGUgZCdJdm9pcmUKICAgICJFUFNHOjQyMjkiLAogICAgLy8gRWd5cHQgMTkwNwogICAgIkVQU0c6NDIzMSIsCiAgICAvLyBFRDg3CiAgICAiRVBTRzo0MjMzIiwKICAgIC8vIEdhbmRhamlrYSAxOTcwCiAgICAiRVBTRzo0MjM2IiwKICAgIC8vIEh1IFR6dSBTaGFuIDE5NTAKICAgICJFUFNHOjQyMzgiLAogICAgLy8gSUQ3NAogICAgIkVQU0c6NDI0MCIsCiAgICAvLyBJbmRpYW4gMTk3NQogICAgIkVQU0c6NDI0MiIsCiAgICAvLyBKQUQ2OQogICAgIkVQU0c6NDI0NCIsCiAgICAvLyBLYW5kYXdhbGEKICAgICJFUFNHOjQyNDYiLAogICAgLy8gS09DCiAgICAiRVBTRzo0MjQ4IiwKICAgIC8vIFBTQUQ1NgogICAgIkVQU0c6NDI1MCIsCiAgICAvLyBMZWlnb24KICAgICJFUFNHOjQyNTIiLAogICAgLy8gTG9tZQogICAgIkVQU0c6NDI1NSIsCiAgICAvLyBIZXJhdCBOb3J0aAogICAgIkVQU0c6NDI1OCIsCiAgICAvLyBFVFJTODkKICAgICJFUFNHOjQyNjEiLAogICAgLy8gTWVyY2hpY2gKICAgICJFUFNHOjQyNjQiLAogICAgLy8gTWhhc3QKICAgICJFUFNHOjQyNjciLAogICAgLy8gTkFEMjcKICAgICJFUFNHOjQyNzAiLAogICAgLy8gTmFocndhbiAxOTY3CiAgICAiRVBTRzo0MjczIiwKICAgIC8vIE5HTyAxOTQ4CiAgICAiRVBTRzo0Mjc2IiwKICAgIC8vIE5TV0MgOVotMgogICAgIkVQU0c6NDI3OSIsCiAgICAvLyBPUyhTTik4MAogICAgIkVQU0c6NDI4MSIsCiAgICAvLyBQYWxlc3RpbmUgMTkyMwogICAgIkVQU0c6NDI4NCIsCiAgICAvLyBQdWxrb3ZvIDE5NDIKICAgICJFUFNHOjQyODYiLAogICAgLy8gUWF0YXIgMTk0OAogICAgIkVQU0c6NDI4OCIsCiAgICAvLyBMb21hIFF1aW50YW5hCiAgICAiRVBTRzo0MjkyIiwKICAgIC8vIFNhcHBlciBIaWxsIDE5NDMKICAgICJFUFNHOjQyOTUiLAogICAgLy8gU2VyaW5kdW5nCiAgICAiRVBTRzo0Mjk3IiwKICAgIC8vIFRhbmFuYXJpdmUKICAgICJFUFNHOjQyOTkiLAogICAgLy8gVE02NQogICAgIkVQU0c6NDMwMiIsCiAgICAvLyBUcmluaWRhZCAxOTAzCiAgICAiRVBTRzo0MzI0IiwKICAgIC8vIFdHUyA3MkJFCiAgICAiRVBTRzo0MzI2IgogICAgLy8gV0dTIDg0CiAgXTsKICBmdW5jdGlvbiBoYXNJbnZlcnRlZENvb3JkaW5hdGVzKGNyc05hbWUpIHsKICAgIHJldHVybiBMYXRMb25DcnNMaXN0LmluZGV4T2Yoc2ltcGxpZnlFcHNnVXJuKGNyc05hbWUpKSA+IC0xOwogIH0KICBmdW5jdGlvbiBzaW1wbGlmeUVwc2dVcm4oZnVsbENyc05hbWUpIHsKICAgIGlmICgvXnVybjooPzp4LSk/b2djOmRlZjpjcnM6ZXBzZzovLnRlc3QoZnVsbENyc05hbWUudG9Mb3dlckNhc2UoKSkpIHsKICAgICAgY29uc3QgY29kZSA9IC8oWzAtOV0rKSQvLmV4ZWMoZnVsbENyc05hbWUpWzFdOwogICAgICByZXR1cm4gYEVQU0c6JHtjb2RlfWA7CiAgICB9CiAgICByZXR1cm4gZnVsbENyc05hbWU7CiAgfQogIGZ1bmN0aW9uIHJlYWRPcGVyYXRpb25VcmxzRnJvbUNhcGFiaWxpdGllcyQxKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3QgdXJscyA9IHt9OwogICAgY29uc3QgY2FwYWJpbGl0eSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJDYXBhYmlsaXR5IgogICAgKTsKICAgIGNvbnN0IHJlcXVlc3QgPSBmaW5kQ2hpbGRFbGVtZW50KGNhcGFiaWxpdHksICJSZXF1ZXN0Iik7CiAgICBnZXRDaGlsZHJlbkVsZW1lbnQocmVxdWVzdCkuZm9yRWFjaCgob3BlcmF0aW9uKSA9PiB7CiAgICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSBzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShvcGVyYXRpb24pKTsKICAgICAgdXJsc1tvcGVyYXRpb25OYW1lXSA9IHBhcnNlT3BlcmF0aW9uKG9wZXJhdGlvbik7CiAgICB9KTsKICAgIHJldHVybiB1cmxzOwogIH0KICBmdW5jdGlvbiByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpIHsKICAgIHJldHVybiBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLmF0dHJpYnV0ZXNbInZlcnNpb24iXTsKICB9CiAgZnVuY3Rpb24gcmVhZExheWVyc0Zyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHZlcnNpb24gPSByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3QgY2FwYWJpbGl0eSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJDYXBhYmlsaXR5IgogICAgKTsKICAgIHJldHVybiBmaW5kQ2hpbGRyZW5FbGVtZW50KGNhcGFiaWxpdHksICJMYXllciIpLm1hcCgKICAgICAgKGxheWVyRWwpID0+IHBhcnNlTGF5ZXIobGF5ZXJFbCwgdmVyc2lvbikKICAgICk7CiAgfQogIGZ1bmN0aW9uIHJlYWRPdXRwdXRGb3JtYXRzRnJvbUNhcGFiaWxpdGllcyQxKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3QgY2FwYWJpbGl0eSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJDYXBhYmlsaXR5IgogICAgKTsKICAgIGNvbnN0IGdldE1hcCA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY2FwYWJpbGl0eSwgIlJlcXVlc3QiKSwKICAgICAgIkdldE1hcCIKICAgICk7CiAgICBjb25zdCBvdXRwdXRGb3JtYXRzID0gZmluZENoaWxkcmVuRWxlbWVudChnZXRNYXAsICJGb3JtYXQiKS5tYXAoCiAgICAgIGdldEVsZW1lbnRUZXh0CiAgICApOwogICAgcmV0dXJuIG91dHB1dEZvcm1hdHM7CiAgfQogIGZ1bmN0aW9uIHJlYWRJbmZvRm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCBjYXBhYmlsaXR5ID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgIkNhcGFiaWxpdHkiCiAgICApOwogICAgY29uc3QgZ2V0RmVhdHVyZUluZm8gPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KGNhcGFiaWxpdHksICJSZXF1ZXN0IiksCiAgICAgICJHZXRGZWF0dXJlSW5mbyIKICAgICk7CiAgICBjb25zdCBvdXRwdXRGb3JtYXRzID0gZmluZENoaWxkcmVuRWxlbWVudChnZXRGZWF0dXJlSW5mbywgIkZvcm1hdCIpLm1hcCgKICAgICAgZ2V0RWxlbWVudFRleHQKICAgICk7CiAgICByZXR1cm4gb3V0cHV0Rm9ybWF0czsKICB9CiAgZnVuY3Rpb24gcmVhZEV4Y2VwdGlvbkZvcm1hdHNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3QgY2FwYWJpbGl0eSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJDYXBhYmlsaXR5IgogICAgKTsKICAgIGNvbnN0IGV4Y2VwdGlvbiA9IGZpbmRDaGlsZEVsZW1lbnQoY2FwYWJpbGl0eSwgIkV4Y2VwdGlvbiIpOwogICAgY29uc3QgZXhjZXB0aW9uRm9ybWF0cyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZXhjZXB0aW9uLCAiRm9ybWF0IikubWFwKAogICAgICBnZXRFbGVtZW50VGV4dAogICAgKTsKICAgIHJldHVybiBleGNlcHRpb25Gb3JtYXRzOwogIH0KICBmdW5jdGlvbiByZWFkSW5mb0Zyb21DYXBhYmlsaXRpZXMkMihjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHNlcnZpY2UgPSBmaW5kQ2hpbGRFbGVtZW50KGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksICJTZXJ2aWNlIik7CiAgICBjb25zdCBvdXRwdXRGb3JtYXRzID0gcmVhZE91dHB1dEZvcm1hdHNGcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IGluZm9Gb3JtYXRzID0gcmVhZEluZm9Gb3JtYXRzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3QgZXhjZXB0aW9uRm9ybWF0cyA9IHJlYWRFeGNlcHRpb25Gb3JtYXRzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3Qga2V5d29yZHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJLZXl3b3JkTGlzdCIpLAogICAgICAiS2V5d29yZCIKICAgICkubWFwKGdldEVsZW1lbnRUZXh0KS5maWx0ZXIoKHYsIGksIGFycikgPT4gYXJyLmluZGV4T2YodikgPT09IGkpOwogICAgY29uc3QgcHJvdmlkZXIgPSByZWFkUHJvdmlkZXJGcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKTsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJUaXRsZSIpKSwKICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiTmFtZSIpKSwKICAgICAgYWJzdHJhY3Q6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkFic3RyYWN0IikpLAogICAgICBvdXRwdXRGb3JtYXRzLAogICAgICBpbmZvRm9ybWF0cywKICAgICAgZXhjZXB0aW9uRm9ybWF0cywKICAgICAgZmVlczogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiRmVlcyIpKSwKICAgICAgY29uc3RyYWludHM6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkFjY2Vzc0NvbnN0cmFpbnRzIikpLAogICAgICBwcm92aWRlciwKICAgICAga2V5d29yZHMKICAgIH07CiAgfQogIGZ1bmN0aW9uIHBhcnNlT3BlcmF0aW9uKG9wZXJhdGlvbikgewogICAgY29uc3QgdXJscyA9IHt9OwogICAgY29uc3QgZGNwVHlwZSA9IGZpbmRDaGlsZHJlbkVsZW1lbnQob3BlcmF0aW9uLCAiRENQVHlwZSIpOwogICAgY29uc3QgaHR0cCA9IGRjcFR5cGUuZmxhdE1hcCgoZCkgPT4gZmluZENoaWxkRWxlbWVudChkLCAiSFRUUCIpKTsKICAgIGNvbnN0IG1ldGhvZHMgPSBodHRwLmZsYXRNYXAoKGgpID0+IGdldENoaWxkcmVuRWxlbWVudChoKSk7CiAgICBtZXRob2RzLmZvckVhY2goKG1ldGhvZCkgPT4gewogICAgICBjb25zdCBvbmxpbmVSZXNvdXJjZSA9IGZpbmRDaGlsZEVsZW1lbnQobWV0aG9kLCAiT25saW5lUmVzb3VyY2UiKTsKICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IHN0cmlwTmFtZXNwYWNlKGdldEVsZW1lbnROYW1lKG1ldGhvZCkpOwogICAgICB1cmxzW21ldGhvZE5hbWVdID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShvbmxpbmVSZXNvdXJjZSwgInhsaW5rOmhyZWYiKTsKICAgIH0pOwogICAgcmV0dXJuIHVybHM7CiAgfQogIGZ1bmN0aW9uIHBhcnNlTGF5ZXIobGF5ZXJFbCwgdmVyc2lvbiwgaW5oZXJpdGVkU3JzID0gW10sIGluaGVyaXRlZFN0eWxlcyA9IFtdLCBpbmhlcml0ZWRBdHRyaWJ1dGlvbiA9IG51bGwsIGluaGVyaXRlZEJvdW5kaW5nQm94ZXMgPSBudWxsLCBpbmhlcml0ZWRNYXhTY2FsZURlbm9tID0gbnVsbCwgaW5oZXJpdGVkTWluU2NhbGVEZW5vbSA9IG51bGwpIHsKICAgIGNvbnN0IHNyc1RhZyA9IHZlcnNpb24gPT09ICIxLjMuMCIgPyAiQ1JTIiA6ICJTUlMiOwogICAgY29uc3Qgc3JzTGlzdCA9IGZpbmRDaGlsZHJlbkVsZW1lbnQobGF5ZXJFbCwgc3JzVGFnKS5tYXAoZ2V0RWxlbWVudFRleHQpOwogICAgY29uc3QgYXZhaWxhYmxlQ3JzID0gc3JzTGlzdC5sZW5ndGggPiAwID8gc3JzTGlzdCA6IGluaGVyaXRlZFNyczsKICAgIGNvbnN0IGxheWVyU3R5bGVzID0gZmluZENoaWxkcmVuRWxlbWVudChsYXllckVsLCAiU3R5bGUiKS5tYXAoCiAgICAgIHBhcnNlTGF5ZXJTdHlsZQogICAgKTsKICAgIGNvbnN0IHN0eWxlcyA9IGxheWVyU3R5bGVzLmxlbmd0aCA+IDAgPyBsYXllclN0eWxlcyA6IGluaGVyaXRlZFN0eWxlczsKICAgIGZ1bmN0aW9uIHBhcnNlQkJveDIoYmJveEVsKSB7CiAgICAgIGNvbnN0IHNycyA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoYmJveEVsLCBzcnNUYWcpOwogICAgICBjb25zdCBhdHRycyA9IGhhc0ludmVydGVkQ29vcmRpbmF0ZXMoc3JzKSAmJiB2ZXJzaW9uID09PSAiMS4zLjAiID8gWyJtaW55IiwgIm1pbngiLCAibWF4eSIsICJtYXh4Il0gOiBbIm1pbngiLCAibWlueSIsICJtYXh4IiwgIm1heHkiXTsKICAgICAgcmV0dXJuIGF0dHJzLm1hcCgobmFtZSkgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShiYm94RWwsIG5hbWUpKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlRXhHZW9ncmFwaGljQm91bmRpbmdCb3goYmJveEVsKSB7CiAgICAgIHJldHVybiBbCiAgICAgICAgIndlc3RCb3VuZExvbmdpdHVkZSIsCiAgICAgICAgInNvdXRoQm91bmRMYXRpdHVkZSIsCiAgICAgICAgImVhc3RCb3VuZExvbmdpdHVkZSIsCiAgICAgICAgIm5vcnRoQm91bmRMYXRpdHVkZSIKICAgICAgXS5tYXAoKG5hbWUpID0+IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYmJveEVsLCBuYW1lKSkpOwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VMYXRMb25Cb3VuZGluZ0JveChiYm94RWwpIHsKICAgICAgcmV0dXJuIFsibWlueCIsICJtaW55IiwgIm1heHgiLCAibWF4eSJdLm1hcCgKICAgICAgICAobmFtZSkgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShiYm94RWwsIG5hbWUpCiAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZVNjYWxlSGludFZhbHVlKHRleHRWYWx1ZSwgZGVmYXVsdFZhbHVlKSB7CiAgICAgIGlmICh0ZXh0VmFsdWUgPT09ICIiKSB7CiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTsKICAgICAgfQogICAgICByZXR1cm4gTWF0aC5zcXJ0KDAuNSAqIHBhcnNlRmxvYXQodGV4dFZhbHVlKSAqKiAyKSAvIDI4ZS01OwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VTY2FsZUhpbnQoKSB7CiAgICAgIGNvbnN0IHNjYWxlSGludCA9IGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgIlNjYWxlSGludCIpOwogICAgICBpZiAoIXNjYWxlSGludCkgewogICAgICAgIHJldHVybiBbaW5oZXJpdGVkTWluU2NhbGVEZW5vbSwgaW5oZXJpdGVkTWF4U2NhbGVEZW5vbV07CiAgICAgIH0KICAgICAgY29uc3QgbWluID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShzY2FsZUhpbnQsICJtaW4iKTsKICAgICAgY29uc3QgbWF4ID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShzY2FsZUhpbnQsICJtYXgiKTsKICAgICAgcmV0dXJuIFsKICAgICAgICBwYXJzZVNjYWxlSGludFZhbHVlKG1pbiwgaW5oZXJpdGVkTWluU2NhbGVEZW5vbSksCiAgICAgICAgcGFyc2VTY2FsZUhpbnRWYWx1ZShtYXgsIGluaGVyaXRlZE1heFNjYWxlRGVub20pCiAgICAgIF07CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZVNjYWxlRGVub21pbmF0b3IobmFtZSwgaW5oZXJpdGVkVmFsdWUpIHsKICAgICAgY29uc3QgdGV4dFZhbHVlID0gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChsYXllckVsLCBuYW1lKSk7CiAgICAgIHJldHVybiB0ZXh0VmFsdWUgPT09ICIiID8gaW5oZXJpdGVkVmFsdWUgOiBwYXJzZUZsb2F0KHRleHRWYWx1ZSk7CiAgICB9CiAgICBjb25zdCBhdHRyaWJ1dGlvbkVsID0gZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiQXR0cmlidXRpb24iKTsKICAgIGNvbnN0IGF0dHJpYnV0aW9uID0gYXR0cmlidXRpb25FbCAhPT0gbnVsbCA/IHBhcnNlTGF5ZXJBdHRyaWJ1dGlvbihhdHRyaWJ1dGlvbkVsKSA6IGluaGVyaXRlZEF0dHJpYnV0aW9uOwogICAgY29uc3QgbGF0TG9uQmJveEVsID0gdmVyc2lvbiA9PT0gIjEuMy4wIiA/IGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgIkVYX0dlb2dyYXBoaWNCb3VuZGluZ0JveCIpIDogZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiTGF0TG9uQm91bmRpbmdCb3giKTsKICAgIGNvbnN0IGJhc2VCb3VuZGluZ0JveCA9IHt9OwogICAgaWYgKGxhdExvbkJib3hFbCkgewogICAgICBiYXNlQm91bmRpbmdCb3hbIkVQU0c6NDMyNiJdID0gdmVyc2lvbiA9PT0gIjEuMy4wIiA/IHBhcnNlRXhHZW9ncmFwaGljQm91bmRpbmdCb3gobGF0TG9uQmJveEVsKSA6IHBhcnNlTGF0TG9uQm91bmRpbmdCb3gobGF0TG9uQmJveEVsKTsKICAgIH0KICAgIGxldCBib3VuZGluZ0JveGVzID0gZmluZENoaWxkcmVuRWxlbWVudChsYXllckVsLCAiQm91bmRpbmdCb3giKS5yZWR1Y2UoCiAgICAgIChwcmV2LCBiYm94RWwpID0+ICh7CiAgICAgICAgLi4ucHJldiwKICAgICAgICBbZ2V0RWxlbWVudEF0dHJpYnV0ZShiYm94RWwsIHNyc1RhZyldOiBwYXJzZUJCb3gyKGJib3hFbCkKICAgICAgfSksCiAgICAgIGJhc2VCb3VuZGluZ0JveAogICAgKTsKICAgIGJvdW5kaW5nQm94ZXMgPSBPYmplY3Qua2V5cyhib3VuZGluZ0JveGVzKS5sZW5ndGggPiAwIHx8IGluaGVyaXRlZEJvdW5kaW5nQm94ZXMgPT09IG51bGwgPyBib3VuZGluZ0JveGVzIDogaW5oZXJpdGVkQm91bmRpbmdCb3hlczsKICAgIGNvbnN0IHF1ZXJ5YWJsZSA9IGxheWVyRWwuYXR0cmlidXRlcy5xdWVyeWFibGUgPT09ICIxIiB8fCBsYXllckVsLmF0dHJpYnV0ZXMucXVlcnlhYmxlID09PSAidHJ1ZSIgPyB0cnVlIDogZmFsc2U7CiAgICBjb25zdCBvcGFxdWUgPSBsYXllckVsLmF0dHJpYnV0ZXMub3BhcXVlID09PSAiMSIgfHwgbGF5ZXJFbC5hdHRyaWJ1dGVzLm9wYXF1ZSA9PT0gInRydWUiID8gdHJ1ZSA6IGZhbHNlOwogICAgY29uc3Qga2V5d29yZHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsICJLZXl3b3JkTGlzdCIpLAogICAgICAiS2V5d29yZCIKICAgICkubWFwKGdldEVsZW1lbnRUZXh0KS5maWx0ZXIoKHYsIGksIGFycikgPT4gYXJyLmluZGV4T2YodikgPT09IGkpOwogICAgbGV0IG1pblNjYWxlRGVub21pbmF0b3IsIG1heFNjYWxlRGVub21pbmF0b3I7CiAgICBpZiAodmVyc2lvbiA9PT0gIjEuMy4wIikgewogICAgICBtaW5TY2FsZURlbm9taW5hdG9yID0gcGFyc2VTY2FsZURlbm9taW5hdG9yKAogICAgICAgICJNaW5TY2FsZURlbm9taW5hdG9yIiwKICAgICAgICBpbmhlcml0ZWRNaW5TY2FsZURlbm9tCiAgICAgICk7CiAgICAgIG1heFNjYWxlRGVub21pbmF0b3IgPSBwYXJzZVNjYWxlRGVub21pbmF0b3IoCiAgICAgICAgIk1heFNjYWxlRGVub21pbmF0b3IiLAogICAgICAgIGluaGVyaXRlZE1heFNjYWxlRGVub20KICAgICAgKTsKICAgIH0gZWxzZSB7CiAgICAgIFttaW5TY2FsZURlbm9taW5hdG9yLCBtYXhTY2FsZURlbm9taW5hdG9yXSA9IHBhcnNlU2NhbGVIaW50KCk7CiAgICB9CiAgICBjb25zdCBtZXRhZGF0YSA9IGZpbmRDaGlsZHJlbkVsZW1lbnQobGF5ZXJFbCwgIk1ldGFkYXRhVVJMIikubWFwKAogICAgICAobWV0YWRhdGFVcmxFbCkgPT4gKHsKICAgICAgICB0eXBlOiBnZXRFbGVtZW50QXR0cmlidXRlKG1ldGFkYXRhVXJsRWwsICJ0eXBlIiksCiAgICAgICAgZm9ybWF0OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KG1ldGFkYXRhVXJsRWwsICJGb3JtYXQiKSksCiAgICAgICAgdXJsOiBnZXRFbGVtZW50QXR0cmlidXRlKAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChtZXRhZGF0YVVybEVsLCAiT25saW5lUmVzb3VyY2UiKSwKICAgICAgICAgICJ4bGluazpocmVmIgogICAgICAgICkKICAgICAgfSkKICAgICk7CiAgICBjb25zdCBjaGlsZHJlbiA9IGZpbmRDaGlsZHJlbkVsZW1lbnQobGF5ZXJFbCwgIkxheWVyIikubWFwKAogICAgICAobGF5ZXIpID0+IHBhcnNlTGF5ZXIoCiAgICAgICAgbGF5ZXIsCiAgICAgICAgdmVyc2lvbiwKICAgICAgICBhdmFpbGFibGVDcnMsCiAgICAgICAgc3R5bGVzLAogICAgICAgIGF0dHJpYnV0aW9uLAogICAgICAgIGJvdW5kaW5nQm94ZXMsCiAgICAgICAgbWF4U2NhbGVEZW5vbWluYXRvciwKICAgICAgICBtaW5TY2FsZURlbm9taW5hdG9yCiAgICAgICkKICAgICk7CiAgICByZXR1cm4gewogICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsICJOYW1lIikpLAogICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiVGl0bGUiKSksCiAgICAgIGFic3RyYWN0OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsICJBYnN0cmFjdCIpKSwKICAgICAgYXZhaWxhYmxlQ3JzLAogICAgICBzdHlsZXMsCiAgICAgIGF0dHJpYnV0aW9uLAogICAgICBib3VuZGluZ0JveGVzLAogICAgICBrZXl3b3JkcywKICAgICAgcXVlcnlhYmxlLAogICAgICBvcGFxdWUsCiAgICAgIC4uLm1pblNjYWxlRGVub21pbmF0b3IgIT09IG51bGwgPyB7IG1pblNjYWxlRGVub21pbmF0b3IgfSA6IHt9LAogICAgICAuLi5tYXhTY2FsZURlbm9taW5hdG9yICE9PSBudWxsID8geyBtYXhTY2FsZURlbm9taW5hdG9yIH0gOiB7fSwKICAgICAgLi4ubWV0YWRhdGEubGVuZ3RoICYmIHsgbWV0YWRhdGEgfSwKICAgICAgLi4uY2hpbGRyZW4ubGVuZ3RoICYmIHsgY2hpbGRyZW4gfQogICAgfTsKICB9CiAgZnVuY3Rpb24gcGFyc2VMYXllclN0eWxlKHN0eWxlRWwpIHsKICAgIGNvbnN0IGxlZ2VuZFVybCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZmluZENoaWxkRWxlbWVudChzdHlsZUVsLCAiTGVnZW5kVVJMIiksICJPbmxpbmVSZXNvdXJjZSIpLAogICAgICAieGxpbms6aHJlZiIKICAgICk7CiAgICBjb25zdCBhYnN0cmFjdCA9IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc3R5bGVFbCwgIkFic3RyYWN0IikpOwogICAgcmV0dXJuIHsKICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzdHlsZUVsLCAiTmFtZSIpKSwKICAgICAgdGl0bGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc3R5bGVFbCwgIlRpdGxlIikpLAogICAgICAuLi5hYnN0cmFjdCAmJiB7IGFic3RyYWN0IH0sCiAgICAgIC4uLmxlZ2VuZFVybCAmJiB7IGxlZ2VuZFVybCB9CiAgICB9OwogIH0KICBmdW5jdGlvbiBwYXJzZUxheWVyQXR0cmlidXRpb24oYXR0cmlidXRpb25FbCkgewogICAgY29uc3QgbG9nb1VybCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgICAgZmluZENoaWxkRWxlbWVudChhdHRyaWJ1dGlvbkVsLCAiTG9nb1VSTCIpLAogICAgICAgICJPbmxpbmVSZXNvdXJjZSIKICAgICAgKSwKICAgICAgInhsaW5rOmhyZWYiCiAgICApOwogICAgY29uc3QgdXJsID0gZ2V0RWxlbWVudEF0dHJpYnV0ZSgKICAgICAgZmluZENoaWxkRWxlbWVudChhdHRyaWJ1dGlvbkVsLCAiT25saW5lUmVzb3VyY2UiKSwKICAgICAgInhsaW5rOmhyZWYiCiAgICApOwogICAgY29uc3QgdGl0bGUgPSBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGF0dHJpYnV0aW9uRWwsICJUaXRsZSIpKTsKICAgIHJldHVybiB7CiAgICAgIC4uLnRpdGxlICYmIHsgdGl0bGUgfSwKICAgICAgLi4udXJsICYmIHsgdXJsIH0sCiAgICAgIC4uLmxvZ29VcmwgJiYgeyBsb2dvVXJsIH0KICAgIH07CiAgfQogIGZ1bmN0aW9uIHJlYWRQcm92aWRlckZyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHNlcnZpY2UgPSBmaW5kQ2hpbGRFbGVtZW50KGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksICJTZXJ2aWNlIik7CiAgICBjb25zdCBjb250YWN0SW5mb3JtYXRpb24gPSBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJDb250YWN0SW5mb3JtYXRpb24iKTsKICAgIGNvbnN0IGNvbnRhY3RQZXJzb25QcmltYXJ5ID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgY29udGFjdEluZm9ybWF0aW9uLAogICAgICAiQ29udGFjdFBlcnNvblByaW1hcnkiCiAgICApOwogICAgY29uc3QgYWRkcmVzcyA9IGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdEluZm9ybWF0aW9uLCAiQ29udGFjdEFkZHJlc3MiKTsKICAgIHJldHVybiB7CiAgICAgIGNvbnRhY3Q6IHsKICAgICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdFBlcnNvblByaW1hcnksICJDb250YWN0UGVyc29uIikKICAgICAgICApLAogICAgICAgIG9yZ2FuaXphdGlvbjogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RQZXJzb25QcmltYXJ5LCAiQ29udGFjdE9yZ2FuaXphdGlvbiIpCiAgICAgICAgKSwKICAgICAgICBwb3NpdGlvbjogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RJbmZvcm1hdGlvbiwgIkNvbnRhY3RQb3NpdGlvbiIpCiAgICAgICAgKSwKICAgICAgICBwaG9uZTogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RJbmZvcm1hdGlvbiwgIkNvbnRhY3RWb2ljZVRlbGVwaG9uZSIpCiAgICAgICAgKSwKICAgICAgICBmYXg6IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChjb250YWN0SW5mb3JtYXRpb24sICJDb250YWN0RmFjc2ltaWxlVGVsZXBob25lIikKICAgICAgICApLAogICAgICAgIGFkZHJlc3M6IHsKICAgICAgICAgIGRlbGl2ZXJ5UG9pbnQ6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIkFkZHJlc3MiKSksCiAgICAgICAgICBjaXR5OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJDaXR5IikpLAogICAgICAgICAgYWRtaW5pc3RyYXRpdmVBcmVhOiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgICAgZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiU3RhdGVPclByb3ZpbmNlIikKICAgICAgICAgICksCiAgICAgICAgICBwb3N0YWxDb2RlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJQb3N0Q29kZSIpKSwKICAgICAgICAgIGNvdW50cnk6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIkNvdW50cnkiKSkKICAgICAgICB9LAogICAgICAgIGVtYWlsOiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdEluZm9ybWF0aW9uLCAiQ29udGFjdEVsZWN0cm9uaWNNYWlsQWRkcmVzcyIpCiAgICAgICAgKQogICAgICB9CiAgICB9OwogIH0KICBmdW5jdGlvbiByZWFkUHJvdmlkZXJGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3Qgc2VydmljZVByb3ZpZGVyID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgIlNlcnZpY2VQcm92aWRlciIKICAgICk7CiAgICBjb25zdCBzZXJ2aWNlQ29udGFjdCA9IGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZVByb3ZpZGVyLCAiU2VydmljZUNvbnRhY3QiKTsKICAgIGNvbnN0IGNvbnRhY3RJbmZvID0gZmluZENoaWxkRWxlbWVudChzZXJ2aWNlQ29udGFjdCwgIkNvbnRhY3RJbmZvIik7CiAgICBjb25zdCBwaG9uZSA9IGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdEluZm8sICJQaG9uZSIpOwogICAgY29uc3QgYWRkcmVzcyA9IGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdEluZm8sICJBZGRyZXNzIik7CiAgICByZXR1cm4gewogICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VQcm92aWRlciwgIlByb3ZpZGVyTmFtZSIpKSwKICAgICAgc2l0ZTogZ2V0RWxlbWVudEF0dHJpYnV0ZSgKICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VQcm92aWRlciwgIlByb3ZpZGVyU2l0ZSIpLAogICAgICAgICJ4bGluazpocmVmIgogICAgICApLAogICAgICBjb250YWN0OiB7CiAgICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlQ29udGFjdCwgIkluZGl2aWR1YWxOYW1lIikpLAogICAgICAgIHBvc2l0aW9uOiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZUNvbnRhY3QsICJQb3NpdGlvbk5hbWUiKQogICAgICAgICksCiAgICAgICAgcGhvbmU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQocGhvbmUsICJWb2ljZSIpKSwKICAgICAgICBmYXg6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQocGhvbmUsICJGYWNzaW1pbGUiKSksCiAgICAgICAgYWRkcmVzczogewogICAgICAgICAgZGVsaXZlcnlQb2ludDogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIkRlbGl2ZXJ5UG9pbnQiKQogICAgICAgICAgKSwKICAgICAgICAgIGNpdHk6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIkNpdHkiKSksCiAgICAgICAgICBhZG1pbmlzdHJhdGl2ZUFyZWE6IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJBZG1pbmlzdHJhdGl2ZUFyZWEiKQogICAgICAgICAgKSwKICAgICAgICAgIHBvc3RhbENvZGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIlBvc3RhbENvZGUiKSksCiAgICAgICAgICBjb3VudHJ5OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJDb3VudHJ5IikpCiAgICAgICAgfSwKICAgICAgICBlbWFpbDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiRWxlY3Ryb25pY01haWxBZGRyZXNzIikpCiAgICAgIH0KICAgIH07CiAgfQogIGZ1bmN0aW9uIHJlYWRPcGVyYXRpb25VcmxzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHVybHMgPSB7fTsKICAgIGNvbnN0IGNhcGFiaWxpdGllcyA9IGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBvcGVyYXRpb25zTWV0YWRhdGEgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBjYXBhYmlsaXRpZXMsCiAgICAgICJPcGVyYXRpb25zTWV0YWRhdGEiCiAgICApOwogICAgaWYgKG9wZXJhdGlvbnNNZXRhZGF0YSkgewogICAgICBmaW5kQ2hpbGRyZW5FbGVtZW50KG9wZXJhdGlvbnNNZXRhZGF0YSwgIk9wZXJhdGlvbiIpLmZvckVhY2goCiAgICAgICAgKG9wZXJhdGlvbikgPT4gewogICAgICAgICAgY29uc3QgbmFtZSA9IGdldEVsZW1lbnRBdHRyaWJ1dGUob3BlcmF0aW9uLCAibmFtZSIpOwogICAgICAgICAgdXJsc1tuYW1lXSA9IHBhcnNlT3BlcmF0aW9uMTEwKG9wZXJhdGlvbik7CiAgICAgICAgfQogICAgICApOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgY2FwYWJpbGl0eSA9IGZpbmRDaGlsZEVsZW1lbnQoY2FwYWJpbGl0aWVzLCAiQ2FwYWJpbGl0eSIpOwogICAgICBjb25zdCByZXF1ZXN0ID0gZmluZENoaWxkRWxlbWVudChjYXBhYmlsaXR5LCAiUmVxdWVzdCIpOwogICAgICBnZXRDaGlsZHJlbkVsZW1lbnQocmVxdWVzdCkuZm9yRWFjaCgob3BlcmF0aW9uKSA9PiB7CiAgICAgICAgY29uc3QgbmFtZSA9IHN0cmlwTmFtZXNwYWNlKGdldEVsZW1lbnROYW1lKG9wZXJhdGlvbikpOwogICAgICAgIHVybHNbbmFtZV0gPSBwYXJzZU9wZXJhdGlvbjEwMChvcGVyYXRpb24pOwogICAgICB9KTsKICAgIH0KICAgIHJldHVybiB1cmxzOwogIH0KICBmdW5jdGlvbiByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICByZXR1cm4gZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKS5hdHRyaWJ1dGVzWyJ2ZXJzaW9uIl07CiAgfQogIGZ1bmN0aW9uIHJlYWRPdXRwdXRGb3JtYXRzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHZlcnNpb24gPSByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGxldCBvdXRwdXRGb3JtYXRzOwogICAgaWYgKHZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikpIHsKICAgICAgY29uc3QgZ2V0RmVhdHVyZSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgICAgZmluZENoaWxkRWxlbWVudCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwgIkNhcGFiaWxpdHkiKSwKICAgICAgICAgICJSZXF1ZXN0IgogICAgICAgICksCiAgICAgICAgIkdldEZlYXR1cmUiCiAgICAgICk7CiAgICAgIG91dHB1dEZvcm1hdHMgPSBnZXRDaGlsZHJlbkVsZW1lbnQoCiAgICAgICAgZmluZENoaWxkRWxlbWVudChnZXRGZWF0dXJlLCAiUmVzdWx0Rm9ybWF0IikKICAgICAgKS5tYXAoZ2V0RWxlbWVudE5hbWUpOwogICAgfSBlbHNlIHsKICAgICAgY29uc3Qgb3BlcmF0aW9ucyA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgICAiT3BlcmF0aW9uc01ldGFkYXRhIgogICAgICApOwogICAgICBjb25zdCBnZXRGZWF0dXJlID0gZmluZENoaWxkcmVuRWxlbWVudChvcGVyYXRpb25zLCAiT3BlcmF0aW9uIikuZmluZCgKICAgICAgICAoZWwpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWwsICJuYW1lIikgPT09ICJHZXRGZWF0dXJlIgogICAgICApOwogICAgICBjb25zdCBwYXJhbWV0ZXIgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGdldEZlYXR1cmUsICJQYXJhbWV0ZXIiKS5maW5kKAogICAgICAgIChlbCkgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgIm5hbWUiKSA9PT0gIm91dHB1dEZvcm1hdCIKICAgICAgKTsKICAgICAgb3V0cHV0Rm9ybWF0cyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQocGFyYW1ldGVyLCAiVmFsdWUiLCB0cnVlKS5tYXAoCiAgICAgICAgZ2V0RWxlbWVudFRleHQKICAgICAgKTsKICAgIH0KICAgIHJldHVybiBvdXRwdXRGb3JtYXRzOwogIH0KICBmdW5jdGlvbiByZWFkSW5mb0Zyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHZlcnNpb24gPSByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IHNlcnZpY2VUYWcgPSB2ZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpID8gIlNlcnZpY2UiIDogIlNlcnZpY2VJZGVudGlmaWNhdGlvbiI7CiAgICBjb25zdCBuYW1lVGFnID0gdmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSA/ICJOYW1lIiA6ICJTZXJ2aWNlVHlwZSI7CiAgICBjb25zdCBzZXJ2aWNlID0gZmluZENoaWxkRWxlbWVudChnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLCBzZXJ2aWNlVGFnKTsKICAgIGxldCBrZXl3b3JkczsKICAgIGlmICh2ZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpKSB7CiAgICAgIGtleXdvcmRzID0gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiS2V5d29yZHMiKSkuc3BsaXQoIiwiKS5tYXAoKGtleXdvcmQpID0+IGtleXdvcmQudHJpbSgpKTsKICAgIH0gZWxzZSB7CiAgICAgIGtleXdvcmRzID0gZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJLZXl3b3JkcyIpLAogICAgICAgICJLZXl3b3JkIgogICAgICApLm1hcChnZXRFbGVtZW50VGV4dCk7CiAgICB9CiAgICBsZXQgcHJvdmlkZXI7CiAgICBpZiAodmVyc2lvbiAhPT0gIjEuMC4wIikgewogICAgICBwcm92aWRlciA9IHJlYWRQcm92aWRlckZyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJUaXRsZSIpKSwKICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCBuYW1lVGFnKSksCiAgICAgIGFic3RyYWN0OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJBYnN0cmFjdCIpKSwKICAgICAgZmVlczogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiRmVlcyIpKSwKICAgICAgY29uc3RyYWludHM6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkFjY2Vzc0NvbnN0cmFpbnRzIikpLAogICAgICBrZXl3b3JkcywKICAgICAgcHJvdmlkZXIsCiAgICAgIG91dHB1dEZvcm1hdHM6IHJlYWRPdXRwdXRGb3JtYXRzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpCiAgICB9OwogIH0KICBmdW5jdGlvbiByZWFkRmVhdHVyZVR5cGVzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHZlcnNpb24gPSByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IG91dHB1dEZvcm1hdHMgPSByZWFkT3V0cHV0Rm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAiRmVhdHVyZVR5cGVMaXN0IgogICAgKTsKICAgIHJldHVybiBmaW5kQ2hpbGRyZW5FbGVtZW50KGNhcGFiaWxpdHksICJGZWF0dXJlVHlwZSIpLm1hcCgKICAgICAgKGZlYXR1cmVUeXBlRWwpID0+IHBhcnNlRmVhdHVyZVR5cGUoZmVhdHVyZVR5cGVFbCwgdmVyc2lvbiwgb3V0cHV0Rm9ybWF0cykKICAgICk7CiAgfQogIGZ1bmN0aW9uIHBhcnNlT3BlcmF0aW9uMTAwKG9wZXJhdGlvbikgewogICAgY29uc3QgdXJscyA9IHt9OwogICAgY29uc3QgZGNwVHlwZSA9IGZpbmRDaGlsZHJlbkVsZW1lbnQob3BlcmF0aW9uLCAiRENQVHlwZSIpOwogICAgY29uc3QgaHR0cCA9IGRjcFR5cGUuZmxhdE1hcCgoZCkgPT4gZmluZENoaWxkcmVuRWxlbWVudChkLCAiSFRUUCIpKTsKICAgIGNvbnN0IG1ldGhvZHMgPSBodHRwLmZsYXRNYXAoKGgpID0+IGdldENoaWxkcmVuRWxlbWVudChoKSk7CiAgICBtZXRob2RzLmZvckVhY2goKG1ldGhvZCkgPT4gewogICAgICBjb25zdCBtZXRob2ROYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUobWV0aG9kKSk7CiAgICAgIHVybHNbbWV0aG9kTmFtZV0gPSBnZXRFbGVtZW50QXR0cmlidXRlKG1ldGhvZCwgIm9ubGluZVJlc291cmNlIik7CiAgICB9KTsKICAgIHJldHVybiB1cmxzOwogIH0KICBmdW5jdGlvbiBwYXJzZU9wZXJhdGlvbjExMChvcGVyYXRpb24pIHsKICAgIGNvbnN0IHVybHMgPSB7fTsKICAgIGNvbnN0IGRjcFR5cGUgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KG9wZXJhdGlvbiwgIkRDUCIpOwogICAgY29uc3QgaHR0cCA9IGRjcFR5cGUuZmxhdE1hcCgoZCkgPT4gZmluZENoaWxkRWxlbWVudChkLCAiSFRUUCIpKTsKICAgIGNvbnN0IG1ldGhvZHMgPSBodHRwLmZsYXRNYXAoKGgpID0+IGdldENoaWxkcmVuRWxlbWVudChoKSk7CiAgICBtZXRob2RzLmZvckVhY2goKG1ldGhvZCkgPT4gewogICAgICBjb25zdCBtZXRob2ROYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUobWV0aG9kKSk7CiAgICAgIHVybHNbbWV0aG9kTmFtZV0gPSBnZXRFbGVtZW50QXR0cmlidXRlKG1ldGhvZCwgInhsaW5rOmhyZWYiKTsKICAgIH0pOwogICAgcmV0dXJuIHVybHM7CiAgfQogIGZ1bmN0aW9uIHBhcnNlRmVhdHVyZVR5cGUoZmVhdHVyZVR5cGVFbCwgc2VydmljZVZlcnNpb24sIGRlZmF1bHRPdXRwdXRGb3JtYXRzKSB7CiAgICBjb25zdCBzcnNUYWcgPSBzZXJ2aWNlVmVyc2lvbi5zdGFydHNXaXRoKCIyLiIpID8gIkNSUyIgOiAiU1JTIjsKICAgIGNvbnN0IGRlZmF1bHRTcnNUYWcgPSBzZXJ2aWNlVmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSA/ICJTUlMiIDogYERlZmF1bHQke3Nyc1RhZ31gOwogICAgZnVuY3Rpb24gcGFyc2VCQm94MTAwKCkgewogICAgICBjb25zdCBiYm94RWwgPSBmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJMYXRMb25nQm91bmRpbmdCb3giKTsKICAgICAgcmV0dXJuIFsibWlueCIsICJtaW55IiwgIm1heHgiLCAibWF4eSJdLm1hcCgobmFtZSkgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShiYm94RWwsIG5hbWUpKS5tYXAocGFyc2VGbG9hdCk7CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZUJCb3gyKCkgewogICAgICBjb25zdCBiYm94RWwgPSBmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJXR1M4NEJvdW5kaW5nQm94Iik7CiAgICAgIHJldHVybiBbIkxvd2VyQ29ybmVyIiwgIlVwcGVyQ29ybmVyIl0ubWFwKChlbE5hbWUpID0+IGZpbmRDaGlsZEVsZW1lbnQoYmJveEVsLCBlbE5hbWUpKS5tYXAoKGNvcm5lckVsKSA9PiBnZXRFbGVtZW50VGV4dChjb3JuZXJFbCkuc3BsaXQoIiAiKSkucmVkdWNlKChwcmV2LCBjdXJyKSA9PiBbLi4ucHJldiwgLi4uY3Vycl0pLm1hcChwYXJzZUZsb2F0KTsKICAgIH0KICAgIGNvbnN0IG90aGVyQ3JzID0gc2VydmljZVZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikgPyBbXSA6IGZpbmRDaGlsZHJlbkVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgYE90aGVyJHtzcnNUYWd9YCkubWFwKGdldEVsZW1lbnRUZXh0KS5tYXAoc2ltcGxpZnlFcHNnVXJuKTsKICAgIGNvbnN0IG91dHB1dEZvcm1hdHMgPSBzZXJ2aWNlVmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSA/IFtdIDogZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiT3V0cHV0Rm9ybWF0cyIpLAogICAgICAiRm9ybWF0IgogICAgKS5tYXAoZ2V0RWxlbWVudFRleHQpOwogICAgY29uc3Qga2V5d29yZHMgPSBzZXJ2aWNlVmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSA/IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIktleXdvcmRzIikpLnNwbGl0KCIsIikubWFwKChrZXl3b3JkKSA9PiBrZXl3b3JkLnRyaW0oKSkgOiBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJLZXl3b3JkcyIpLAogICAgICAiS2V5d29yZCIKICAgICkubWFwKGdldEVsZW1lbnRUZXh0KS5maWx0ZXIoKHYsIGksIGFycikgPT4gYXJyLmluZGV4T2YodikgPT09IGkpOwogICAgY29uc3QgbWV0YWRhdGEgPSBzZXJ2aWNlVmVyc2lvbiA9PT0gIjIuMC4wIiA/IGZpbmRDaGlsZHJlbkVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIk1ldGFkYXRhVVJMIikubWFwKAogICAgICAobWV0YWRhdGFVcmxFbCkgPT4gKHsKICAgICAgICB1cmw6IGdldEVsZW1lbnRBdHRyaWJ1dGUobWV0YWRhdGFVcmxFbCwgInhsaW5rOmhyZWYiKQogICAgICB9KQogICAgKSA6IGZpbmRDaGlsZHJlbkVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIk1ldGFkYXRhVVJMIikubWFwKAogICAgICAobWV0YWRhdGFVcmxFbCkgPT4gKHsKICAgICAgICBmb3JtYXQ6IGdldEVsZW1lbnRBdHRyaWJ1dGUobWV0YWRhdGFVcmxFbCwgImZvcm1hdCIpLAogICAgICAgIHR5cGU6IGdldEVsZW1lbnRBdHRyaWJ1dGUobWV0YWRhdGFVcmxFbCwgInR5cGUiKSwKICAgICAgICB1cmw6IGdldEVsZW1lbnRUZXh0KG1ldGFkYXRhVXJsRWwpLnRyaW0oKQogICAgICB9KQogICAgKTsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIk5hbWUiKSksCiAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJUaXRsZSIpKSwKICAgICAgYWJzdHJhY3Q6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIkFic3RyYWN0IikpLAogICAgICBkZWZhdWx0Q3JzOiBzaW1wbGlmeUVwc2dVcm4oCiAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCBkZWZhdWx0U3JzVGFnKSkKICAgICAgKSwKICAgICAgb3RoZXJDcnMsCiAgICAgIG91dHB1dEZvcm1hdHM6IG91dHB1dEZvcm1hdHMubGVuZ3RoID4gMCA/IG91dHB1dEZvcm1hdHMgOiBkZWZhdWx0T3V0cHV0Rm9ybWF0cywKICAgICAgbGF0TG9uQm91bmRpbmdCb3g6IHNlcnZpY2VWZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpID8gcGFyc2VCQm94MTAwKCkgOiBwYXJzZUJCb3gyKCksCiAgICAgIGtleXdvcmRzLAogICAgICAuLi5tZXRhZGF0YS5sZW5ndGggJiYgeyBtZXRhZGF0YSB9CiAgICB9OwogIH0KICBmdW5jdGlvbiBwYXJzZUJCb3goeG1sRWxlbWVudCkgewogICAgY29uc3QgcmVzdWx0ID0gWyJMb3dlckNvcm5lciIsICJVcHBlckNvcm5lciJdLm1hcCgoZWxOYW1lKSA9PiBmaW5kQ2hpbGRFbGVtZW50KHhtbEVsZW1lbnQsIGVsTmFtZSkpLm1hcCgoY29ybmVyRWwpID0+IGdldEVsZW1lbnRUZXh0KGNvcm5lckVsKS5zcGxpdCgiICIpKS5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IFsuLi5wcmV2LCAuLi5jdXJyXSkubWFwKHBhcnNlRmxvYXQpOwogICAgaWYgKHJlc3VsdC5zb21lKE51bWJlci5pc05hTikpCiAgICAgIHJldHVybiBudWxsOwogICAgcmV0dXJuIHJlc3VsdDsKICB9CiAgZnVuY3Rpb24gcmVhZEluZm9Gcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3Qgcm9vdEVsID0gZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IHNlcnZpY2UgPSBmaW5kQ2hpbGRFbGVtZW50KHJvb3RFbCwgIlNlcnZpY2VJZGVudGlmaWNhdGlvbiIpOwogICAgY29uc3Qga2V5d29yZHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJLZXl3b3JkcyIpLAogICAgICAiS2V5d29yZCIKICAgICkubWFwKGdldEVsZW1lbnRUZXh0KTsKICAgIGNvbnN0IG1ldGFkYXRhID0gZmluZENoaWxkRWxlbWVudChyb290RWwsICJPcGVyYXRpb25zTWV0YWRhdGEiKTsKICAgIGNvbnN0IGdldFRpbGVPcGVyYXRpb24gPSBmaW5kQ2hpbGRyZW5FbGVtZW50KG1ldGFkYXRhLCAiT3BlcmF0aW9uIikuZmluZCgKICAgICAgKGVsKSA9PiBnZXRFbGVtZW50QXR0cmlidXRlKGVsLCAibmFtZSIpID09ICJHZXRUaWxlIgogICAgKTsKICAgIGNvbnN0IGdldFRpbGVVcmxzID0gZmluZENoaWxkcmVuRWxlbWVudChnZXRUaWxlT3BlcmF0aW9uLCAiR2V0IiwgdHJ1ZSkucmVkdWNlKAogICAgICAocHJldiwgY3VycikgPT4gewogICAgICAgIGNvbnN0IGVuY29kaW5nVHlwZSA9IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChjdXJyLCAiVmFsdWUiLCB0cnVlKQogICAgICAgICk7CiAgICAgICAgY29uc3QgdXJsID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShjdXJyLCAieGxpbms6aHJlZiIpOwogICAgICAgIGlmIChlbmNvZGluZ1R5cGUudG9Mb3dlckNhc2UoKSA9PT0gInJlc3RmdWwiKQogICAgICAgICAgcmV0dXJuIHsgLi4ucHJldiwgcmVzdDogdXJsIH07CiAgICAgICAgcmV0dXJuIHsgLi4ucHJldiwga3ZwOiB1cmwgfTsKICAgICAgfSwKICAgICAge30KICAgICk7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiVGl0bGUiKSksCiAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIlNlcnZpY2VUeXBlIikpLAogICAgICBhYnN0cmFjdDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiQWJzdHJhY3QiKSksCiAgICAgIGZlZXM6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkZlZXMiKSksCiAgICAgIGNvbnN0cmFpbnRzOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJBY2Nlc3NDb25zdHJhaW50cyIpKSwKICAgICAga2V5d29yZHMsCiAgICAgIHByb3ZpZGVyOiByZWFkUHJvdmlkZXJGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyksCiAgICAgIGdldFRpbGVVcmxzCiAgICB9OwogIH0KICBmdW5jdGlvbiByZWFkTWF0cml4U2V0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBmdW5jdGlvbiBwYXJzZU1hdHJpeFNldChlbGVtZW50KSB7CiAgICAgIGNvbnN0IHRvcExlZnQgPSBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJUb3BMZWZ0Q29ybmVyIikpLnNwbGl0KCIgIikubWFwKHBhcnNlRmxvYXQpOwogICAgICByZXR1cm4gewogICAgICAgIGlkZW50aWZpZXI6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIklkZW50aWZpZXIiKSksCiAgICAgICAgdGlsZVdpZHRoOiBwYXJzZUludCgKICAgICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIlRpbGVXaWR0aCIpKQogICAgICAgICksCiAgICAgICAgdGlsZUhlaWdodDogcGFyc2VJbnQoCiAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJUaWxlSGVpZ2h0IikpCiAgICAgICAgKSwKICAgICAgICBtYXRyaXhXaWR0aDogcGFyc2VJbnQoCiAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJNYXRyaXhXaWR0aCIpKQogICAgICAgICksCiAgICAgICAgbWF0cml4SGVpZ2h0OiBwYXJzZUludCgKICAgICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIk1hdHJpeEhlaWdodCIpKQogICAgICAgICksCiAgICAgICAgc2NhbGVEZW5vbWluYXRvcjogcGFyc2VGbG9hdCgKICAgICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIlNjYWxlRGVub21pbmF0b3IiKSkKICAgICAgICApLAogICAgICAgIHRvcExlZnQKICAgICAgfTsKICAgIH0KICAgIGNvbnN0IGNvbnRlbnRzID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgIkNvbnRlbnRzIgogICAgKTsKICAgIGNvbnN0IG1hdHJpeFNldHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGNvbnRlbnRzLCAiVGlsZU1hdHJpeFNldCIpOwogICAgcmV0dXJuIG1hdHJpeFNldHMubWFwKChlbGVtZW50KSA9PiB7CiAgICAgIGNvbnN0IHdlbGxLbm93blNjYWxlU2V0ID0gZ2V0RWxlbWVudFRleHQoCiAgICAgICAgZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiV2VsbEtub3duU2NhbGVTZXQiKQogICAgICApOwogICAgICBjb25zdCBib3VuZGluZ0JveCA9IHBhcnNlQkJveChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJCb3VuZGluZ0JveCIpKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZGVudGlmaWVyOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJJZGVudGlmaWVyIikpLAogICAgICAgIGNyczogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiU3VwcG9ydGVkQ1JTIikpLAogICAgICAgIHRpbGVNYXRyaWNlczogZmluZENoaWxkcmVuRWxlbWVudChlbGVtZW50LCAiVGlsZU1hdHJpeCIpLm1hcCgKICAgICAgICAgIHBhcnNlTWF0cml4U2V0CiAgICAgICAgKSwKICAgICAgICAuLi5ib3VuZGluZ0JveCAmJiB7IGJvdW5kaW5nQm94IH0sCiAgICAgICAgLi4ud2VsbEtub3duU2NhbGVTZXQgJiYgeyB3ZWxsS25vd25TY2FsZVNldCB9CiAgICAgIH07CiAgICB9KTsKICB9CiAgZnVuY3Rpb24gcmVhZExheWVyc0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCByb290RWwgPSBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3QgY29udGVudHNFbCA9IGZpbmRDaGlsZEVsZW1lbnQocm9vdEVsLCAiQ29udGVudHMiKTsKICAgIGZ1bmN0aW9uIGdldE1hdHJpeFNldENycyhjb250ZW50c0VsMiwgaWRlbnRpZmllcikgewogICAgICBjb25zdCBtYXRyaXhTZXQgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGNvbnRlbnRzRWwyLCAiVGlsZU1hdHJpeFNldCIpLmZpbmQoCiAgICAgICAgKG1hdHJpeFNldEVsKSA9PiB7CiAgICAgICAgICBjb25zdCBpZGVudGlmaWVyRWwgPSBmaW5kQ2hpbGRFbGVtZW50KG1hdHJpeFNldEVsLCAiSWRlbnRpZmllciIpOwogICAgICAgICAgcmV0dXJuIGdldEVsZW1lbnRUZXh0KGlkZW50aWZpZXJFbCkgPT09IGlkZW50aWZpZXI7CiAgICAgICAgfQogICAgICApOwogICAgICByZXR1cm4gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChtYXRyaXhTZXQsICJTdXBwb3J0ZWRDUlMiKSk7CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZU1hdHJpeFNldExpbmsoZWxlbWVudCkgewogICAgICBjb25zdCBpZGVudGlmaWVyID0gZ2V0RWxlbWVudFRleHQoCiAgICAgICAgZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiVGlsZU1hdHJpeFNldCIpCiAgICAgICk7CiAgICAgIGNvbnN0IGNycyA9IGdldE1hdHJpeFNldENycyhjb250ZW50c0VsLCBpZGVudGlmaWVyKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZGVudGlmaWVyLAogICAgICAgIGNycywKICAgICAgICBsaW1pdHM6IGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgIlRpbGVNYXRyaXhMaW1pdHMiLCB0cnVlKS5tYXAoCiAgICAgICAgICAoZWxlbWVudDIpID0+ICh7CiAgICAgICAgICAgIHRpbGVNYXRyaXg6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJUaWxlTWF0cml4IikpLAogICAgICAgICAgICBtaW5UaWxlUm93OiBwYXJzZUludCgKICAgICAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiTWluVGlsZVJvdyIpKQogICAgICAgICAgICApLAogICAgICAgICAgICBtaW5UaWxlQ29sOiBwYXJzZUludCgKICAgICAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiTWluVGlsZUNvbCIpKQogICAgICAgICAgICApLAogICAgICAgICAgICBtYXhUaWxlUm93OiBwYXJzZUludCgKICAgICAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiTWF4VGlsZVJvdyIpKQogICAgICAgICAgICApLAogICAgICAgICAgICBtYXhUaWxlQ29sOiBwYXJzZUludCgKICAgICAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiTWF4VGlsZUNvbCIpKQogICAgICAgICAgICApCiAgICAgICAgICB9KQogICAgICAgICkKICAgICAgfTsKICAgIH0KICAgIGNvbnN0IGdldFRpbGVPcGVyYXRpb24gPSBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KHJvb3RFbCwgIk9wZXJhdGlvbnNNZXRhZGF0YSIpLAogICAgICAiT3BlcmF0aW9uIgogICAgKS5maW5kKChlbCkgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgIm5hbWUiKSA9PSAiR2V0VGlsZSIpOwogICAgY29uc3QgZ2V0S3ZwRWx0ID0gZmluZENoaWxkcmVuRWxlbWVudChnZXRUaWxlT3BlcmF0aW9uLCAiR2V0IiwgdHJ1ZSkuZmlsdGVyKAogICAgICAoZWx0KSA9PiB7CiAgICAgICAgY29uc3QgZW5jb2RpbmdUeXBlID0gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbHQsICJWYWx1ZSIsIHRydWUpKTsKICAgICAgICByZXR1cm4gZW5jb2RpbmdUeXBlLnRvTG93ZXJDYXNlKCkgPT09ICJrdnAiOwogICAgICB9CiAgICApWzBdOwogICAgY29uc3QgZ2V0S3ZwVXJsID0gZ2V0S3ZwRWx0ID8gZ2V0RWxlbWVudEF0dHJpYnV0ZShnZXRLdnBFbHQsICJ4bGluazpocmVmIikgOiAiIjsKICAgIGNvbnN0IGNvbnRlbnRzID0gZmluZENoaWxkRWxlbWVudChyb290RWwsICJDb250ZW50cyIpOwogICAgY29uc3QgbGF5ZXJzID0gZmluZENoaWxkcmVuRWxlbWVudChjb250ZW50cywgIkxheWVyIik7CiAgICByZXR1cm4gbGF5ZXJzLm1hcCgoZWxlbWVudCkgPT4gewogICAgICBjb25zdCBsYXRMb25Cb3VuZGluZ0JveCA9IHBhcnNlQkJveCgKICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJXR1M4NEJvdW5kaW5nQm94IikKICAgICAgKTsKICAgICAgbGV0IGRlZmF1bHRTdHlsZSA9ICIiOwogICAgICBjb25zdCBzdHlsZXMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGVsZW1lbnQsICJTdHlsZSIpLm1hcCgoZWxlbWVudDIpID0+IHsKICAgICAgICBjb25zdCBsZWdlbmRVcmwgPSBnZXRFbGVtZW50QXR0cmlidXRlKAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIkxlZ2VuZFVSTCIpLAogICAgICAgICAgInhsaW5rOmhyZWYiCiAgICAgICAgKTsKICAgICAgICBjb25zdCBhYnN0cmFjdCA9IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJBYnN0cmFjdCIpKTsKICAgICAgICBjb25zdCBzdHlsZSA9IHsKICAgICAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiVGl0bGUiKSksCiAgICAgICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiSWRlbnRpZmllciIpKSwKICAgICAgICAgIC4uLmFic3RyYWN0ICYmIHsgYWJzdHJhY3QgfSwKICAgICAgICAgIC4uLmxlZ2VuZFVybCAmJiB7IGxlZ2VuZFVybCB9CiAgICAgICAgfTsKICAgICAgICBpZiAoZ2V0RWxlbWVudEF0dHJpYnV0ZShlbGVtZW50MiwgImlzRGVmYXVsdCIpID09PSAidHJ1ZSIpIHsKICAgICAgICAgIGRlZmF1bHRTdHlsZSA9IHN0eWxlLm5hbWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdHlsZTsKICAgICAgfSk7CiAgICAgIGNvbnN0IG91dHB1dEZvcm1hdHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGVsZW1lbnQsICJGb3JtYXQiKS5tYXAoCiAgICAgICAgZ2V0RWxlbWVudFRleHQKICAgICAgKTsKICAgICAgY29uc3QgcmVzb3VyY2VMaW5rcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoCiAgICAgICAgZWxlbWVudCwKICAgICAgICAiUmVzb3VyY2VVUkwiCiAgICAgICkuZmlsdGVyKAogICAgICAgIChlbGVtZW50MikgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShlbGVtZW50MiwgInJlc291cmNlVHlwZSIpID09PSAidGlsZSIKICAgICAgKS5tYXAoKGVsZW1lbnQyKSA9PiB7CiAgICAgICAgY29uc3QgZm9ybWF0ID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShlbGVtZW50MiwgImZvcm1hdCIpOwogICAgICAgIGNvbnN0IHVybCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWxlbWVudDIsICJ0ZW1wbGF0ZSIpOwogICAgICAgIHJldHVybiB7IGZvcm1hdCwgdXJsLCBlbmNvZGluZzogIlJFU1QiIH07CiAgICAgIH0pOwogICAgICBpZiAoZ2V0S3ZwVXJsKSB7CiAgICAgICAgcmVzb3VyY2VMaW5rcy5wdXNoKAogICAgICAgICAgLi4ub3V0cHV0Rm9ybWF0cy5tYXAoKGZvcm1hdCkgPT4gKHsKICAgICAgICAgICAgZW5jb2Rpbmc6ICJLVlAiLAogICAgICAgICAgICB1cmw6IGdldEt2cFVybCwKICAgICAgICAgICAgZm9ybWF0CiAgICAgICAgICB9KSkKICAgICAgICApOwogICAgICB9CiAgICAgIGNvbnN0IG1hdHJpeFNldHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGVsZW1lbnQsICJUaWxlTWF0cml4U2V0TGluayIpLm1hcCgKICAgICAgICBwYXJzZU1hdHJpeFNldExpbmsKICAgICAgKTsKICAgICAgY29uc3QgZGltZW5zaW9ucyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgIkRpbWVuc2lvbiIpLm1hcCgKICAgICAgICAoZWxlbWVudDIpID0+IHsKICAgICAgICAgIGNvbnN0IGlkZW50aWZpZXIgPSBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgICAgZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIklkZW50aWZpZXIiKQogICAgICAgICAgKTsKICAgICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiRGVmYXVsdCIpCiAgICAgICAgICApOwogICAgICAgICAgY29uc3QgdmFsdWVzID0gZmluZENoaWxkcmVuRWxlbWVudChlbGVtZW50MiwgIlZhbHVlcyIpLm1hcCgKICAgICAgICAgICAgZ2V0RWxlbWVudFRleHQKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm4geyBpZGVudGlmaWVyLCBkZWZhdWx0VmFsdWUsIHZhbHVlcyB9OwogICAgICAgIH0KICAgICAgKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJJZGVudGlmaWVyIikpLAogICAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJUaXRsZSIpKSwKICAgICAgICBhYnN0cmFjdDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiQWJzdHJhY3QiKSksCiAgICAgICAgc3R5bGVzLAogICAgICAgIHJlc291cmNlTGlua3MsCiAgICAgICAgbWF0cml4U2V0cywKICAgICAgICBkZWZhdWx0U3R5bGUsCiAgICAgICAgLi4ubGF0TG9uQm91bmRpbmdCb3ggJiYgeyBsYXRMb25Cb3VuZGluZ0JveCB9LAogICAgICAgIC4uLmRpbWVuc2lvbnMgJiYgeyBkaW1lbnNpb25zIH0KICAgICAgfTsKICAgIH0pOwogIH0KICBmdW5jdGlvbiBwYXJzZUZlYXR1cmVQcm9wcyhnZXRGZWF0dXJlc0RvYywgZmVhdHVyZVR5cGVGdWxsLCBzZXJ2aWNlVmVyc2lvbikgewogICAgY29uc3QgY29sbGVjdGlvbiA9IGdldFJvb3RFbGVtZW50KGdldEZlYXR1cmVzRG9jKTsKICAgIGxldCBtZW1iZXJzOwogICAgaWYgKHNlcnZpY2VWZXJzaW9uLnN0YXJ0c1dpdGgoIjIuMCIpKSB7CiAgICAgIG1lbWJlcnMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGNvbGxlY3Rpb24sICJtZW1iZXIiKS5tYXAoCiAgICAgICAgKHBhcmVudCkgPT4gZ2V0Q2hpbGRyZW5FbGVtZW50KHBhcmVudClbMF0KICAgICAgKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IG1lbWJlcnNSb290ID0gZmluZENoaWxkRWxlbWVudChjb2xsZWN0aW9uLCAiZmVhdHVyZU1lbWJlcnMiKTsKICAgICAgbWVtYmVycyA9IG1lbWJlcnNSb290ID8gZ2V0Q2hpbGRyZW5FbGVtZW50KG1lbWJlcnNSb290KSA6IGZpbmRDaGlsZHJlbkVsZW1lbnQoY29sbGVjdGlvbiwgImZlYXR1cmVNZW1iZXIiKS5tYXAoCiAgICAgICAgKHBhcmVudCkgPT4gZ2V0Q2hpbGRyZW5FbGVtZW50KHBhcmVudClbMF0KICAgICAgKTsKICAgIH0KICAgIGNvbnN0IGlkQXR0ciA9IHNlcnZpY2VWZXJzaW9uID09PSAiMS4wLjAiID8gImZpZCIgOiAiZ21sOmlkIjsKICAgIGZ1bmN0aW9uIGlzRWxlbWVudFByb3BlcnR5KHByb3BOYW1lKSB7CiAgICAgIHJldHVybiBwcm9wTmFtZSBpbiBmZWF0dXJlVHlwZUZ1bGwucHJvcGVydGllczsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlRWxlbWVudFByb3BlcnR5VmFsdWUocHJvcE5hbWUsIHZhbHVlQXNTdHJpbmcpIHsKICAgICAgY29uc3QgdHlwZSA9IGZlYXR1cmVUeXBlRnVsbC5wcm9wZXJ0aWVzW3Byb3BOYW1lXTsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSAiaW50ZWdlciI6CiAgICAgICAgICByZXR1cm4gcGFyc2VJbnQodmFsdWVBc1N0cmluZyk7CiAgICAgICAgY2FzZSAiZmxvYXQiOgogICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWVBc1N0cmluZyk7CiAgICAgICAgY2FzZSAiYm9vbGVhbiI6CiAgICAgICAgICByZXR1cm4gdmFsdWVBc1N0cmluZyA9PT0gInRydWUiOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gdmFsdWVBc1N0cmluZzsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gZ2V0UHJvcGVydGllcyhtZW1iZXJFbCkgewogICAgICByZXR1cm4gZ2V0Q2hpbGRyZW5FbGVtZW50KG1lbWJlckVsKS5maWx0ZXIoKGVsKSA9PiBpc0VsZW1lbnRQcm9wZXJ0eShzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShlbCkpKSkucmVkdWNlKChwcmV2LCBjdXJyKSA9PiB7CiAgICAgICAgY29uc3QgcHJvcE5hbWUgPSBzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShjdXJyKSk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLnByZXYsCiAgICAgICAgICBbcHJvcE5hbWVdOiBwYXJzZUVsZW1lbnRQcm9wZXJ0eVZhbHVlKHByb3BOYW1lLCBnZXRFbGVtZW50VGV4dChjdXJyKSkKICAgICAgICB9OwogICAgICB9LCB7fSk7CiAgICB9CiAgICByZXR1cm4gbWVtYmVycy5tYXAoKGVsKSA9PiAoewogICAgICBpZDogZ2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgaWRBdHRyKSwKICAgICAgcHJvcGVydGllczogZ2V0UHJvcGVydGllcyhlbCkKICAgIH0pKTsKICB9CiAgZnVuY3Rpb24gY29tcHV0ZUZlYXR1cmVQcm9wc0RldGFpbHMoZmVhdHVyZXNXaXRoUHJvcHMpIHsKICAgIHJldHVybiBmZWF0dXJlc1dpdGhQcm9wcy5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IHsKICAgICAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiBjdXJyLnByb3BlcnRpZXMpIHsKICAgICAgICBjb25zdCBwcm9wVmFsdWUgPSBjdXJyLnByb3BlcnRpZXNbcHJvcE5hbWVdOwogICAgICAgIGlmICghKHByb3BOYW1lIGluIHByZXYpKSB7CiAgICAgICAgICBwcmV2W3Byb3BOYW1lXSA9IHsgdW5pcXVlVmFsdWVzOiBbXSB9OwogICAgICAgIH0KICAgICAgICBjb25zdCB1bmlxdWVWYWx1ZSA9IHByZXZbcHJvcE5hbWVdLnVuaXF1ZVZhbHVlcy5maW5kKAogICAgICAgICAgKHYpID0+IHYudmFsdWUgPT09IHByb3BWYWx1ZQogICAgICAgICk7CiAgICAgICAgaWYgKHVuaXF1ZVZhbHVlKQogICAgICAgICAgdW5pcXVlVmFsdWUuY291bnQrKzsKICAgICAgICBlbHNlCiAgICAgICAgICBwcmV2W3Byb3BOYW1lXS51bmlxdWVWYWx1ZXMucHVzaCh7IHZhbHVlOiBwcm9wVmFsdWUsIGNvdW50OiAxIH0pOwogICAgICB9CiAgICAgIHJldHVybiBwcmV2OwogICAgfSwge30pOwogIH0KICBmdW5jdGlvbiBnZW5lcmF0ZUdldEZlYXR1cmVVcmwoc2VydmljZVVybCwgdmVyc2lvbiwgZmVhdHVyZVR5cGUsIG91dHB1dEZvcm1hdCwgbWF4RmVhdHVyZXMsIGF0dHJpYnV0ZXMsIGhpdHNPbmx5LCBvdXRwdXRDcnMsIGV4dGVudCwgZXh0ZW50Q3JzLCBzdGFydEluZGV4LCBzb3J0QnkpIHsKICAgIGNvbnN0IHR5cGVQYXJhbSA9IHZlcnNpb24gPT09ICIyLjAuMCIgPyAiVFlQRU5BTUVTIiA6ICJUWVBFTkFNRSI7CiAgICBjb25zdCBjb3VudFBhcmFtID0gdmVyc2lvbiA9PT0gIjIuMC4wIiA/ICJDT1VOVCIgOiAiTUFYRkVBVFVSRVMiOwogICAgY29uc3QgbmV3UGFyYW1zID0gewogICAgICBTRVJWSUNFOiAiV0ZTIiwKICAgICAgUkVRVUVTVDogIkdldEZlYXR1cmUiLAogICAgICBWRVJTSU9OOiB2ZXJzaW9uLAogICAgICBbdHlwZVBhcmFtXTogZmVhdHVyZVR5cGUKICAgIH07CiAgICBpZiAob3V0cHV0Rm9ybWF0ICE9PSB2b2lkIDApCiAgICAgIG5ld1BhcmFtcy5PVVRQVVRGT1JNQVQgPSBvdXRwdXRGb3JtYXQ7CiAgICBpZiAoYXR0cmlidXRlcyAhPT0gdm9pZCAwKQogICAgICBuZXdQYXJhbXMuUFJPUEVSVFlOQU1FID0gYXR0cmlidXRlcy5qb2luKCIsIik7CiAgICBpZiAoaGl0c09ubHkpIHsKICAgICAgbmV3UGFyYW1zLlJFU1VMVFRZUEUgPSAiaGl0cyI7CiAgICAgIG5ld1BhcmFtc1tjb3VudFBhcmFtXSA9ICIxIjsKICAgIH0gZWxzZSBpZiAobWF4RmVhdHVyZXMgIT09IHZvaWQgMCkKICAgICAgbmV3UGFyYW1zW2NvdW50UGFyYW1dID0gbWF4RmVhdHVyZXMudG9TdHJpbmcoMTApOwogICAgaWYgKG91dHB1dENycykgewogICAgICBuZXdQYXJhbXMuU1JTTkFNRSA9IG91dHB1dENyczsKICAgIH0KICAgIGlmIChleHRlbnQpIHsKICAgICAgY29uc3QgZXh0ZW50Sm9pbmVkID0gZXh0ZW50LmpvaW4oIiwiKTsKICAgICAgbmV3UGFyYW1zLkJCT1ggPSBleHRlbnRDcnMgPyBgJHtleHRlbnRKb2luZWR9LCR7ZXh0ZW50Q3JzfWAgOiBleHRlbnRKb2luZWQ7CiAgICB9CiAgICBpZiAoc3RhcnRJbmRleCkgewogICAgICBuZXdQYXJhbXMuU1RBUlRJTkRFWCA9IHN0YXJ0SW5kZXgudG9TdHJpbmcoMTApOwogICAgfQogICAgY29uc3QgdXJsID0gbmV3IFVSTChzZXRRdWVyeVBhcmFtcyhzZXJ2aWNlVXJsLCBuZXdQYXJhbXMpKTsKICAgIGlmIChBcnJheS5pc0FycmF5KHNvcnRCeSkgJiYgc29ydEJ5Lmxlbmd0aCA+IDApIHsKICAgICAgY29uc3Qgc29ydHMgPSBzb3J0QnkubWFwKChmaWVsZFNvcnQpID0+IGAke2ZpZWxkU29ydFsxXX0gJHtmaWVsZFNvcnRbMF19YCkuam9pbigiLCIpOwogICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgiU09SVEJZIiwgc29ydHMpOwogICAgfQogICAgcmV0dXJuIHVybC50b1N0cmluZygpOwogIH0KICBhZGRUYXNrSGFuZGxlcigKICAgICJwYXJzZVdtc0NhcGFiaWxpdGllcyIsCiAgICBnbG9iYWxUaGlzLAogICAgKHsgdXJsIH0pID0+IHF1ZXJ5WG1sRG9jdW1lbnQodXJsKS50aGVuKCh4bWxEb2MpID0+IGNoZWNrKHhtbERvYywgdXJsKSkudGhlbigoeG1sRG9jKSA9PiAoewogICAgICBpbmZvOiByZWFkSW5mb0Zyb21DYXBhYmlsaXRpZXMkMih4bWxEb2MpLAogICAgICBsYXllcnM6IHJlYWRMYXllcnNGcm9tQ2FwYWJpbGl0aWVzJDEoeG1sRG9jKSwKICAgICAgdXJsOiByZWFkT3BlcmF0aW9uVXJsc0Zyb21DYXBhYmlsaXRpZXMkMSh4bWxEb2MpLAogICAgICB2ZXJzaW9uOiByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMkMSh4bWxEb2MpCiAgICB9KSkKICApOwogIGFkZFRhc2tIYW5kbGVyKAogICAgInBhcnNlV2ZzQ2FwYWJpbGl0aWVzIiwKICAgIGdsb2JhbFRoaXMsCiAgICAoeyB1cmwgfSkgPT4gcXVlcnlYbWxEb2N1bWVudCh1cmwpLnRoZW4oKHhtbERvYykgPT4gY2hlY2soeG1sRG9jLCB1cmwpKS50aGVuKCh4bWxEb2MpID0+ICh7CiAgICAgIGluZm86IHJlYWRJbmZvRnJvbUNhcGFiaWxpdGllcyQxKHhtbERvYyksCiAgICAgIGZlYXR1cmVUeXBlczogcmVhZEZlYXR1cmVUeXBlc0Zyb21DYXBhYmlsaXRpZXMoeG1sRG9jKSwKICAgICAgdXJsOiByZWFkT3BlcmF0aW9uVXJsc0Zyb21DYXBhYmlsaXRpZXMoeG1sRG9jKSwKICAgICAgdmVyc2lvbjogcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzKHhtbERvYykKICAgIH0pKQogICk7CiAgYWRkVGFza0hhbmRsZXIoCiAgICAicXVlcnlXZnNGZWF0dXJlVHlwZURldGFpbHMiLAogICAgZ2xvYmFsVGhpcywKICAgICh7CiAgICAgIHVybCwKICAgICAgc2VydmljZVZlcnNpb24sCiAgICAgIGZlYXR1cmVUeXBlRnVsbAogICAgfSkgPT4gewogICAgICBjb25zdCBnZXRGZWF0dXJlVXJsID0gZ2VuZXJhdGVHZXRGZWF0dXJlVXJsKAogICAgICAgIHVybCwKICAgICAgICBzZXJ2aWNlVmVyc2lvbiwKICAgICAgICBmZWF0dXJlVHlwZUZ1bGwubmFtZSwKICAgICAgICB2b2lkIDAsCiAgICAgICAgdm9pZCAwLAogICAgICAgIE9iamVjdC5rZXlzKGZlYXR1cmVUeXBlRnVsbC5wcm9wZXJ0aWVzKQogICAgICApOwogICAgICByZXR1cm4gcXVlcnlYbWxEb2N1bWVudChnZXRGZWF0dXJlVXJsKS50aGVuKChnZXRGZWF0dXJlRG9jKSA9PiAoewogICAgICAgIHByb3BzOiBjb21wdXRlRmVhdHVyZVByb3BzRGV0YWlscygKICAgICAgICAgIHBhcnNlRmVhdHVyZVByb3BzKGdldEZlYXR1cmVEb2MsIGZlYXR1cmVUeXBlRnVsbCwgc2VydmljZVZlcnNpb24pCiAgICAgICAgKQogICAgICB9KSk7CiAgICB9CiAgKTsKICBhZGRUYXNrSGFuZGxlcigKICAgICJ1cGRhdGVGZXRjaE9wdGlvbnMiLAogICAgZ2xvYmFsVGhpcywKICAgICh7IG9wdGlvbnMgfSkgPT4gewogICAgICBzZXRGZXRjaE9wdGlvbnMob3B0aW9ucyk7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe30pOwogICAgfQogICk7CiAgYWRkVGFza0hhbmRsZXIoCiAgICAicGFyc2VXbXRzQ2FwYWJpbGl0aWVzIiwKICAgIGdsb2JhbFRoaXMsCiAgICAoeyB1cmwgfSkgPT4gcXVlcnlYbWxEb2N1bWVudCh1cmwpLnRoZW4oKHhtbERvYykgPT4gY2hlY2soeG1sRG9jLCB1cmwpKS50aGVuKCh4bWxEb2MpID0+ICh7CiAgICAgIGluZm86IHJlYWRJbmZvRnJvbUNhcGFiaWxpdGllcyh4bWxEb2MpLAogICAgICBsYXllcnM6IHJlYWRMYXllcnNGcm9tQ2FwYWJpbGl0aWVzKHhtbERvYyksCiAgICAgIG1hdHJpeFNldHM6IHJlYWRNYXRyaXhTZXRzRnJvbUNhcGFiaWxpdGllcyh4bWxEb2MpCiAgICB9KSkKICApOwp9KSgpOwo=",eL=typeof window<"u"&&window.Blob&&new Blob([atob(QT)],{type:"text/javascript;charset=utf-8"});function Woe(t){let e;try{if(e=eL&&(window.URL||window.webkitURL).createObjectURL(eL),!e)throw"";const n=new Worker(e,{name:t?.name});return n.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),n}catch{return new Worker("data:text/javascript;base64,"+QT,{name:t?.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}let D8,tL=!1;function rh(){return tL?null:(D8||(D8=new Woe),D8)}function G8(t,e,n,r,s,i,o,a,l,c,u,h){const d="2.0.0"===e?"TYPENAMES":"TYPENAME",p="2.0.0"===e?"COUNT":"MAXFEATURES",m={SERVICE:"WFS",REQUEST:"GetFeature",VERSION:e,[d]:n};if(void 0!==r&&(m.OUTPUTFORMAT=r),void 0!==i&&(m.PROPERTYNAME=i.join(",")),o?(m.RESULTTYPE="hits",m[p]="1"):void 0!==s&&(m[p]=s.toString(10)),a&&(m.SRSNAME=a),l){const H=l.join(",");m.BBOX=c?`${H},${c}`:H}u&&(m.STARTINDEX=u.toString(10));const y=new URL(bl(t,m));if(Array.isArray(h)&&h.length>0){const H=h.map(T=>`${T[1]} ${T[0]}`).join(",");y.searchParams.set("SORTBY",H)}return y.toString()}!function Goe(t){P0=t}(t=>{rh()&&function N0(t,e,n){return new Promise((r,s)=>{const i=function ioe(){return soe++}(),o={requestId:i,taskName:t,params:n};null===e?B0.dispatchEvent(new CustomEvent("ogc-client.request",{detail:o})):e.postMessage(o);const a=u=>{u.requestId===i&&(null===e?B0.removeEventListener("ogc-client.response",l):e.removeEventListener("message",c),"error"in u?s(function Foe(t){if("ServiceExceptionError"===t.name){const n=new T8(t.message,t.requestUrl,t.code,t.locator,t.response);return n.stack=t.stack,n}if("EndpointError"===t.name){const n=new Un(t.message,t.httpStatus,t.isCrossOriginRelated);return n.stack=t.stack,n}const e=new Error(t.message);return e.stack=t.stack,e}(u.error)):r(u.response))},l=u=>a(u.detail),c=u=>a(u.data);null===e?B0.addEventListener("ogc-client.response",l):e.addEventListener("message",c)})}("updateFetchOptions",rh(),{options:t})});const Vae=["EPSG:4046","EPSG:4075","EPSG:4120","EPSG:4122","EPSG:4124","EPSG:4126","EPSG:4149","EPSG:4151","EPSG:4153","EPSG:4155","EPSG:4157","EPSG:4159","EPSG:4161","EPSG:4163","EPSG:4165","EPSG:4167","EPSG:4169","EPSG:4171","EPSG:4173","EPSG:4175","EPSG:4178","EPSG:4180","EPSG:4182","EPSG:4184","EPSG:4188","EPSG:4190","EPSG:4191","EPSG:4196","EPSG:4198","EPSG:4202","EPSG:4210","EPSG:4211","EPSG:4214","EPSG:4226","EPSG:4229","EPSG:4231","EPSG:4233","EPSG:4236","EPSG:4238","EPSG:4240","EPSG:4242","EPSG:4244","EPSG:4246","EPSG:4248","EPSG:4250","EPSG:4252","EPSG:4255","EPSG:4258","EPSG:4261","EPSG:4264","EPSG:4267","EPSG:4270","EPSG:4273","EPSG:4276","EPSG:4279","EPSG:4281","EPSG:4284","EPSG:4286","EPSG:4288","EPSG:4292","EPSG:4295","EPSG:4297","EPSG:4299","EPSG:4302","EPSG:4324","EPSG:4326"];function J8(t){return/^urn:(?:x-)?ogc:def:crs:epsg:/.test(t.toLowerCase())?`EPSG:${/([0-9]+)$/.exec(t)[1]}`:t}function Tae(t){const e={},n=ge(As(t),"Capability");return Al(ge(n,"Request")).forEach(s=>{const i=va(Il(s));e[i]=function Fae(t){const e={};return _n(t,"DCPType").flatMap(i=>ge(i,"HTTP")).flatMap(i=>Al(i)).forEach(i=>{const o=ge(i,"OnlineResource"),a=va(Il(i));e[a]=Rt(o,"xlink:href")}),e}(s)}),e}function vL(t){return As(t).attributes.version}function Lae(t){const e=vL(t);return _n(ge(As(t),"Capability"),"Layer").map(r=>wL(r,e))}function Nae(t){const e=ge(As(t),"Service"),n=function Rae(t){const e=ge(As(t),"Capability");return _n(ge(ge(e,"Request"),"GetMap"),"Format").map(rt)}(t),r=function Dae(t){const e=ge(As(t),"Capability");return _n(ge(ge(e,"Request"),"GetFeatureInfo"),"Format").map(rt)}(t),s=function Bae(t){const e=ge(As(t),"Capability");return _n(ge(e,"Exception"),"Format").map(rt)}(t),i=_n(ge(e,"KeywordList"),"Keyword").map(rt).filter((a,l,c)=>c.indexOf(a)===l),o=function Oae(t){const e=ge(As(t),"Service"),n=ge(e,"ContactInformation"),r=ge(n,"ContactPersonPrimary"),s=ge(n,"ContactAddress");return{contact:{name:rt(ge(r,"ContactPerson")),organization:rt(ge(r,"ContactOrganization")),position:rt(ge(n,"ContactPosition")),phone:rt(ge(n,"ContactVoiceTelephone")),fax:rt(ge(n,"ContactFacsimileTelephone")),address:{deliveryPoint:rt(ge(s,"Address")),city:rt(ge(s,"City")),administrativeArea:rt(ge(s,"StateOrProvince")),postalCode:rt(ge(s,"PostCode")),country:rt(ge(s,"Country"))},email:rt(ge(n,"ContactElectronicMailAddress"))}}}(t);return{title:rt(ge(e,"Title")),name:rt(ge(e,"Name")),abstract:rt(ge(e,"Abstract")),outputFormats:n,infoFormats:r,exceptionFormats:s,fees:rt(ge(e,"Fees")),constraints:rt(ge(e,"AccessConstraints")),provider:o,keywords:i}}function wL(t,e,n=[],r=[],s=null,i=null,o=null,a=null){const l="1.3.0"===e?"CRS":"SRS",c=_n(t,l).map(rt),u=c.length>0?c:n,h=_n(t,"Style").map(Pae),d=h.length>0?h:r;function p($e){return(function Eae(t){return Vae.indexOf(J8(t))>-1}(Rt($e,l))&&"1.3.0"===e?["miny","minx","maxy","maxx"]:["minx","miny","maxx","maxy"]).map(bs=>Rt($e,bs))}function H($e,Xt){return""===$e?Xt:Math.sqrt(.5*parseFloat($e)**2)/28e-5}function V($e,Xt){const pn=rt(ge(t,$e));return""===pn?Xt:parseFloat(pn)}const J=ge(t,"Attribution"),ie=null!==J?function kae(t){const e=Rt(ge(ge(t,"LogoURL"),"OnlineResource"),"xlink:href"),n=Rt(ge(t,"OnlineResource"),"xlink:href"),r=rt(ge(t,"Title"));return{...r&&{title:r},...n&&{url:n},...e&&{logoUrl:e}}}(J):s,D=ge(t,"1.3.0"===e?"EX_GeographicBoundingBox":"LatLonBoundingBox"),re={};D&&(re["EPSG:4326"]="1.3.0"===e?function m($e){return["westBoundLongitude","southBoundLatitude","eastBoundLongitude","northBoundLatitude"].map(Xt=>rt(ge($e,Xt)))}(D):function y($e){return["minx","miny","maxx","maxy"].map(Xt=>Rt($e,Xt))}(D));let j=_n(t,"BoundingBox").reduce(($e,Xt)=>({...$e,[Rt(Xt,l)]:p(Xt)}),re);j=Object.keys(j).length>0||null===i?j:i;const ue="1"===t.attributes.queryable||"true"===t.attributes.queryable,Me="1"===t.attributes.opaque||"true"===t.attributes.opaque,Ce=_n(ge(t,"KeywordList"),"Keyword").map(rt).filter(($e,Xt,pn)=>pn.indexOf($e)===Xt);let ze,Ae;"1.3.0"===e?(ze=V("MinScaleDenominator",a),Ae=V("MaxScaleDenominator",o)):[ze,Ae]=function T(){const $e=ge(t,"ScaleHint");if(!$e)return[a,o];const Xt=Rt($e,"min"),pn=Rt($e,"max");return[H(Xt,a),H(pn,o)]}();const dt=_n(t,"MetadataURL").map($e=>({type:Rt($e,"type"),format:rt(ge($e,"Format")),url:Rt(ge($e,"OnlineResource"),"xlink:href")})),ft=_n(t,"Layer").map($e=>wL($e,e,u,d,ie,j,Ae,ze));return{name:rt(ge(t,"Name")),title:rt(ge(t,"Title")),abstract:rt(ge(t,"Abstract")),availableCrs:u,styles:d,attribution:ie,boundingBoxes:j,keywords:Ce,queryable:ue,opaque:Me,...null!==ze?{minScaleDenominator:ze}:{},...null!==Ae?{maxScaleDenominator:Ae}:{},...dt.length&&{metadata:dt},...ft.length&&{children:ft}}}function Pae(t){const e=Rt(ge(ge(t,"LegendURL"),"OnlineResource"),"xlink:href"),n=rt(ge(t,"Abstract"));return{name:rt(ge(t,"Name")),title:rt(ge(t,"Title")),...n&&{abstract:n},...e&&{legendUrl:e}}}function CL(t){const e=ge(As(t),"ServiceProvider"),n=ge(e,"ServiceContact"),r=ge(n,"ContactInfo"),s=ge(r,"Phone"),i=ge(r,"Address");return{name:rt(ge(e,"ProviderName")),site:Rt(ge(e,"ProviderSite"),"xlink:href"),contact:{name:rt(ge(n,"IndividualName")),position:rt(ge(n,"PositionName")),phone:rt(ge(s,"Voice")),fax:rt(ge(s,"Facsimile")),address:{deliveryPoint:rt(ge(i,"DeliveryPoint")),city:rt(ge(i,"City")),administrativeArea:rt(ge(i,"AdministrativeArea")),postalCode:rt(ge(i,"PostalCode")),country:rt(ge(i,"Country"))},email:rt(ge(i,"ElectronicMailAddress"))}}}function Gae(t){const e={},n=As(t),r=ge(n,"OperationsMetadata");if(r)_n(r,"Operation").forEach(s=>{const i=Rt(s,"name");e[i]=function Uae(t){const e={};return _n(t,"DCP").flatMap(i=>ge(i,"HTTP")).flatMap(i=>Al(i)).forEach(i=>{const o=va(Il(i));e[o]=Rt(i,"xlink:href")}),e}(s)});else{const s=ge(n,"Capability");Al(ge(s,"Request")).forEach(o=>{const a=va(Il(o));e[a]=function jae(t){const e={};return _n(t,"DCPType").flatMap(i=>_n(i,"HTTP")).flatMap(i=>Al(i)).forEach(i=>{const o=va(Il(i));e[o]=Rt(i,"onlineResource")}),e}(o)})}return e}function I5(t){return As(t).attributes.version}function yL(t){let n;if(I5(t).startsWith("1.0")){const r=ge(ge(ge(As(t),"Capability"),"Request"),"GetFeature");n=Al(ge(r,"ResultFormat")).map(Il)}else{const s=_n(ge(As(t),"OperationsMetadata"),"Operation").find(o=>"GetFeature"===Rt(o,"name")),i=_n(s,"Parameter").find(o=>"outputFormat"===Rt(o,"name"));n=_n(i,"Value",!0).map(rt)}return n}function Wae(t){const e=I5(t),n=e.startsWith("1.0")?"Service":"ServiceIdentification",r=e.startsWith("1.0")?"Name":"ServiceType",s=ge(As(t),n);let i,o;return i=e.startsWith("1.0")?rt(ge(s,"Keywords")).split(",").map(a=>a.trim()):_n(ge(s,"Keywords"),"Keyword").map(rt),"1.0.0"!==e&&(o=CL(t)),{title:rt(ge(s,"Title")),name:rt(ge(s,r)),abstract:rt(ge(s,"Abstract")),fees:rt(ge(s,"Fees")),constraints:rt(ge(s,"AccessConstraints")),keywords:i,provider:o,outputFormats:yL(t)}}function Zae(t){const e=I5(t),n=yL(t);return _n(ge(As(t),"FeatureTypeList"),"FeatureType").map(s=>function $ae(t,e,n){const r=e.startsWith("2.")?"CRS":"SRS",s=e.startsWith("1.0")?"SRS":`Default${r}`;const a=e.startsWith("1.0")?[]:_n(t,`Other${r}`).map(rt).map(J8),l=e.startsWith("1.0")?[]:_n(ge(t,"OutputFormats"),"Format").map(rt),c=e.startsWith("1.0")?rt(ge(t,"Keywords")).split(",").map(h=>h.trim()):_n(ge(t,"Keywords"),"Keyword").map(rt).filter((h,d,p)=>p.indexOf(h)===d),u="2.0.0"===e?_n(t,"MetadataURL").map(h=>({url:Rt(h,"xlink:href")})):_n(t,"MetadataURL").map(h=>({format:Rt(h,"format"),type:Rt(h,"type"),url:rt(h).trim()}));return{name:rt(ge(t,"Name")),title:rt(ge(t,"Title")),abstract:rt(ge(t,"Abstract")),defaultCrs:J8(rt(ge(t,s))),otherCrs:a,outputFormats:l.length>0?l:n,latLonBoundingBox:e.startsWith("1.0")?function i(){const h=ge(t,"LatLongBoundingBox");return["minx","miny","maxx","maxy"].map(d=>Rt(h,d)).map(parseFloat)}():function o(){const h=ge(t,"WGS84BoundingBox");return["LowerCorner","UpperCorner"].map(d=>ge(h,d)).map(d=>rt(d).split(" ")).reduce((d,p)=>[...d,...p]).map(parseFloat)}(),keywords:c,...u.length&&{metadata:u}}}(s,e,n))}function IL(t){const e=["LowerCorner","UpperCorner"].map(n=>ge(t,n)).map(n=>rt(n).split(" ")).reduce((n,r)=>[...n,...r]).map(parseFloat);return e.some(Number.isNaN)?null:e}function Xae(t){const e=As(t),n=ge(e,"ServiceIdentification"),r=_n(ge(n,"Keywords"),"Keyword").map(rt),i=_n(ge(e,"OperationsMetadata"),"Operation").find(a=>"GetTile"==Rt(a,"name")),o=_n(i,"Get",!0).reduce((a,l)=>{const c=rt(ge(l,"Value",!0)),u=Rt(l,"xlink:href");return"restful"===c.toLowerCase()?{...a,rest:u}:{...a,kvp:u}},{});return{title:rt(ge(n,"Title")),name:rt(ge(n,"ServiceType")),abstract:rt(ge(n,"Abstract")),fees:rt(ge(n,"Fees")),constraints:rt(ge(n,"AccessConstraints")),keywords:r,provider:CL(t),getTileUrls:o}}function Yae(t){function e(s){const i=rt(ge(s,"TopLeftCorner")).split(" ").map(parseFloat);return{identifier:rt(ge(s,"Identifier")),tileWidth:parseInt(rt(ge(s,"TileWidth"))),tileHeight:parseInt(rt(ge(s,"TileHeight"))),matrixWidth:parseInt(rt(ge(s,"MatrixWidth"))),matrixHeight:parseInt(rt(ge(s,"MatrixHeight"))),scaleDenominator:parseFloat(rt(ge(s,"ScaleDenominator"))),topLeft:i}}return _n(ge(As(t),"Contents"),"TileMatrixSet").map(s=>{const i=rt(ge(s,"WellKnownScaleSet")),o=IL(ge(s,"BoundingBox"));return{identifier:rt(ge(s,"Identifier")),crs:rt(ge(s,"SupportedCRS")),tileMatrices:_n(s,"TileMatrix").map(e),...o&&{boundingBox:o},...i&&{wellKnownScaleSet:i}}})}function Kae(t){const e=As(t),n=ge(e,"Contents");function s(u){const h=rt(ge(u,"TileMatrixSet")),d=function r(u,h){const d=_n(u,"TileMatrixSet").find(p=>rt(ge(p,"Identifier"))===h);return rt(ge(d,"SupportedCRS"))}(n,h);return{identifier:h,crs:d,limits:_n(u,"TileMatrixLimits",!0).map(p=>({tileMatrix:rt(ge(p,"TileMatrix")),minTileRow:parseInt(rt(ge(p,"MinTileRow"))),minTileCol:parseInt(rt(ge(p,"MinTileCol"))),maxTileRow:parseInt(rt(ge(p,"MaxTileRow"))),maxTileCol:parseInt(rt(ge(p,"MaxTileCol")))}))}}const i=_n(ge(e,"OperationsMetadata"),"Operation").find(u=>"GetTile"==Rt(u,"name")),o=_n(i,"Get",!0).filter(u=>"kvp"===rt(ge(u,"Value",!0)).toLowerCase())[0],a=o?Rt(o,"xlink:href"):"";return _n(ge(e,"Contents"),"Layer").map(u=>{const h=IL(ge(u,"WGS84BoundingBox"));let d="";const p=_n(u,"Style").map(V=>{const J=Rt(ge(V,"LegendURL"),"xlink:href"),ie=rt(ge(V,"Abstract")),D={title:rt(ge(V,"Title")),name:rt(ge(V,"Identifier")),...ie&&{abstract:ie},...J&&{legendUrl:J}};return"true"===Rt(V,"isDefault")&&(d=D.name),D}),m=_n(u,"Format").map(rt),y=_n(u,"ResourceURL").filter(V=>"tile"===Rt(V,"resourceType")).map(V=>({format:Rt(V,"format"),url:Rt(V,"template"),encoding:"REST"}));a&&y.push(...m.map(V=>({encoding:"KVP",url:a,format:V})));const H=_n(u,"TileMatrixSetLink").map(s),T=_n(u,"Dimension").map(V=>({identifier:rt(ge(V,"Identifier")),defaultValue:rt(ge(V,"Default")),values:_n(V,"Values").map(rt)}));return{name:rt(ge(u,"Identifier")),title:rt(ge(u,"Title")),abstract:rt(ge(u,"Abstract")),styles:p,resourceLinks:y,matrixSets:H,defaultStyle:d,...h&&{latLonBoundingBox:h},...T&&{dimensions:T}}})}function qae(t,e,n){const r=As(t);let s;if(n.startsWith("2.0"))s=_n(r,"member").map(c=>Al(c)[0]);else{const c=ge(r,"featureMembers");s=c?Al(c):_n(r,"featureMember").map(u=>Al(u)[0])}const i="1.0.0"===n?"fid":"gml:id";function a(c,u){switch(e.properties[c]){case"integer":return parseInt(u);case"float":return parseFloat(u);case"boolean":return"true"===u;default:return u}}function l(c){return Al(c).filter(u=>function o(c){return c in e.properties}(va(Il(u)))).reduce((u,h)=>{const d=va(Il(h));return{...u,[d]:a(d,rt(h))}},{})}return s.map(c=>({id:Rt(c,i),properties:l(c)}))}function Jae(t){return t.reduce((e,n)=>{for(const r in n.properties){const s=n.properties[r];r in e||(e[r]={uniqueValues:[]});const i=e[r].uniqueValues.find(o=>o.value===s);i?i.count++:e[r].uniqueValues.push({value:s,count:1})}return e},{})}F0("parseWmsCapabilities",globalThis,({url:t})=>nh(t).then(e=>L8(e,t)).then(e=>({info:Nae(e),layers:Lae(e),url:Tae(e),version:vL(e)}))),F0("parseWfsCapabilities",globalThis,({url:t})=>nh(t).then(e=>L8(e,t)).then(e=>({info:Wae(e),featureTypes:Zae(e),url:Gae(e),version:I5(e)}))),F0("queryWfsFeatureTypeDetails",globalThis,({url:t,serviceVersion:e,featureTypeFull:n})=>nh(G8(t,e,n.name,void 0,void 0,Object.keys(n.properties))).then(s=>({props:Jae(qae(s,n,e))}))),F0("updateFetchOptions",globalThis,({options:t})=>(function Ooe(t){R8=t,P0&&P0(t)}(t),Promise.resolve({}))),F0("parseWmtsCapabilities",globalThis,({url:t})=>nh(t).then(e=>L8(e,t)).then(e=>({info:Xae(e),layers:Kae(e),matrixSets:Yae(e)}))),function Zoe(){tL=!0}();"2.8.1".split("-");const ole=["*"];let A5=(()=>{var t;class e{constructor(){this.btnClass="gn-ui-btn-default",this.disabled=!1,this.extraClass="",this.buttonClick=new ps}set type(r){switch(r){case"primary":this.btnClass="gn-ui-btn-primary";break;case"secondary":this.btnClass="gn-ui-btn-secondary";break;case"outline":this.btnClass="gn-ui-btn-outline";break;case"light":this.btnClass="gn-ui-btn-light";break;case"gray":this.btnClass="gn-ui-btn-gray";break;case"black":this.btnClass="gn-ui-btn-black";break;default:this.btnClass="gn-ui-btn-default"}}get classList(){return`${this.btnClass} ${this.extraClass}`}handleClick(r){this.buttonClick.emit(r),r.preventDefault(),r.currentTarget.blur(),function toe(t){t.stopPropagation(),setTimeout(()=>{window.document.dispatchEvent(t)},0)}(r)}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)},this.\u0275cmp=Ra({type:e,selectors:[["gn-ui-button"]],inputs:{type:"type",disabled:"disabled",extraClass:"extraClass"},outputs:{buttonClick:"buttonClick"},ngContentSelectors:ole,decls:2,vars:3,consts:[["type","button",3,"click","disabled"]],template:function(s,i){1&s&&(s6(),yg(0,"button",0),n6("click",function(a){return i.handleClick(a)}),i6(1),Ig()),2&s&&(aS(i.classList),Qw("disabled",i.disabled))},encapsulation:2,changeDetection:0}))}return t(),e})();class ale extends gn{constructor(e,n){super()}schedule(e,n=0){return this}}const b5={setInterval(t,e,...n){const{delegate:r}=b5;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=b5;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class j0{constructor(e,n=j0.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}j0.now=UC.now;const ule=new class cle extends j0{constructor(e,n=j0.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}(class lle extends ale{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const s=this.id,i=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(i,s,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return b5.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&b5.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let s,r=!1;try{this.work(e)}catch(i){r=!0,s=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Kt(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}});let SL=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(Et(zc),Et($o))};static \u0275dir=jn({type:t})}return t})(),vu=(()=>{class t extends SL{static \u0275fac=(()=>{let n;return function(s){return(n||(n=oi(t)))(s||t)}})();static \u0275dir=jn({type:t,features:[qr]})}return t})();const _l=new at(""),ple={provide:_l,useExisting:nr(()=>_5),multi:!0},gle=new at("");let _5=(()=>{class t extends SL{_compositionMode;_composing=!1;constructor(n,r,s){super(n,r),this._compositionMode=s,null==this._compositionMode&&(this._compositionMode=!function fle(){const t=ku()?ku().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(Et(zc),Et($o),Et(gle,8))};static \u0275dir=jn({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&zt("input",function(o){return s._handleInput(o.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(o){return s._compositionEnd(o.target.value)})},standalone:!1,features:[Ws([ple]),qr]})}return t})();const io=new at(""),t1=new at("");function BL(t){return null!=t}function NL(t){return ag(t)?PC(t):t}function FL(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function PL(t,e){return e.map(n=>n(t))}function kL(t){return t.map(e=>function vle(t){return!t.validate}(e)?e:n=>e.validate(n))}function n7(t){return null!=t?function OL(t){if(!t)return null;const e=t.filter(BL);return 0==e.length?null:function(n){return FL(PL(n,e))}}(kL(t)):null}function r7(t){return null!=t?function GL(t){if(!t)return null;const e=t.filter(BL);return 0==e.length?null:function(n){return NE(PL(n,e).map(NL)).pipe(jo(FL))}}(kL(t)):null}function WL(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function s7(t){return t?Array.isArray(t)?t:[t]:[]}function S5(t,e){return Array.isArray(t)?t.includes(e):t===e}function UL(t,e){const n=s7(e);return s7(t).forEach(s=>{S5(n,s)||n.push(s)}),n}function $L(t,e){return s7(e).filter(n=>!S5(t,n))}class XL{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=n7(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=r7(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class bo extends XL{name;get formDirective(){return null}get path(){return null}}class n1 extends XL{_parent=null;name=null;valueAccessor=null}class YL{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let KL=(()=>{class t extends YL{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(Et(n1,2))};static \u0275dir=jn({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&Vg("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},standalone:!1,features:[qr]})}return t})();const U0="VALID",M5="INVALID",ah="PENDING",$0="DISABLED";class lh{}class JL extends lh{value;source;constructor(e,n){super(),this.value=e,this.source=n}}class a7 extends lh{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}}class l7 extends lh{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}}class z5 extends lh{status;source;constructor(e,n){super(),this.status=e,this.source=n}}class c7 extends lh{source;constructor(e){super(),this.source=e}}function V5(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class d7{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return vi(this.statusReactive)}set status(e){vi(()=>this.statusReactive.set(e))}_status=Da(()=>this.statusReactive());statusReactive=yc(void 0);get valid(){return this.status===U0}get invalid(){return this.status===M5}get pending(){return this.status==ah}get disabled(){return this.status===$0}get enabled(){return this.status!==$0}errors;get pristine(){return vi(this.pristineReactive)}set pristine(e){vi(()=>this.pristineReactive.set(e))}_pristine=Da(()=>this.pristineReactive());pristineReactive=yc(!0);get dirty(){return!this.pristine}get touched(){return vi(this.touchedReactive)}set touched(e){vi(()=>this.touchedReactive.set(e))}_touched=Da(()=>this.touchedReactive());touchedReactive=yc(!1);get untouched(){return!this.touched}_events=new X;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(UL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(UL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($L(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($L(e,this._rawAsyncValidators))}hasValidator(e){return S5(this._rawValidators,e)}hasAsyncValidator(e){return S5(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const n=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new l7(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){const n=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(s=>{s.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&!1!==e.emitEvent&&this._events.next(new l7(!1,r))}markAsDirty(e={}){const n=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new a7(!1,r))}markAsPristine(e={}){const n=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(s=>{s.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&!1!==e.emitEvent&&this._events.next(new a7(!0,r))}markAsPending(e={}){this.status=ah;const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new z5(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:n})}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=$0,this.errors=null,this._forEachChild(s=>{s.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new JL(this.value,r)),this._events.next(new z5(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(s=>s(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=U0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===U0||this.status===ah)&&this._runAsyncValidator(r,e.emitEvent)}const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new JL(this.value,n)),this._events.next(new z5(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:n})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$0:U0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ah,this._hasOwnPendingAsyncValidator={emitEvent:!1!==n,shouldHaveEmitted:!1!==e};const r=NL(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(s=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(s,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent,this,n.shouldHaveEmitted)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,s)=>r&&r._find(s),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new z5(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ps,this.statusChanges=new ps}_calculateStatus(){return this._allControlsDisabled()?$0:this.errors?M5:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ah)?ah:this._anyControlsHaveStatus(M5)?M5:U0}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){const r=!this._anyControlsDirty(),s=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),s&&this._events.next(new a7(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new l7(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){V5(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function xle(t){return Array.isArray(t)?n7(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Sle(t){return Array.isArray(t)?r7(t):t||null}(this._rawAsyncValidators)}}const ch=new at("",{providedIn:"root",factory:()=>E5}),E5="always";function X0(t,e,n=E5){(function f7(t,e){const n=function ZL(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(WL(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function jL(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(WL(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const s=()=>t.updateValueAndValidity();R5(e._rawValidators,s),R5(e._rawAsyncValidators,s)})(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function zle(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&nR(t,e)})}(t,e),function Ele(t,e){const n=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function Vle(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&nR(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function Mle(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function R5(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function nR(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function iR(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function oR(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}Promise.resolve();const aR=class extends d7{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(function u7(t){return(V5(t)?t.validators:t)||null}(n),function h7(t,e){return(V5(e)?e.asyncValidators:t)||null}(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),V5(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=oR(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1,!1!==n?.emitEvent&&this._events.next(new c7(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){oR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Ole={provide:n1,useExisting:nr(()=>w7)},lR=Promise.resolve();let w7=(()=>{class t extends n1{_changeDetectorRef;callSetDisabledState;control=new aR;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ps;constructor(n,r,s,i,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function v7(t,e){if(!e)return null;let n,r,s;return Array.isArray(e),e.forEach(i=>{i.constructor===_5?n=i:function Rle(t){return Object.getPrototypeOf(t.constructor)===vu}(i)?r=i:s=i}),s||r||n||null}(0,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function m7(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){X0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){lR.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,s=0!==r&&function z6(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(r);lR.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function T5(t,e){return[...e.path,t]}(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(Et(bo,9),Et(io,10),Et(t1,10),Et(_l,10),Et(S6,8),Et(ch,8))};static \u0275dir=jn({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ws([Ole]),qr,Bl]})}return t})();const Wle={provide:_l,useExisting:nr(()=>C7),multi:!0};let C7=(()=>{class t extends vu{writeValue(n){this.setProperty("value",n??"")}registerOnChange(n){this.onChange=r=>{n(""==r?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(s){return(n||(n=oi(t)))(s||t)}})();static \u0275dir=jn({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){1&r&&zt("input",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},standalone:!1,features:[Ws([Wle]),qr]})}return t})();const Jle={provide:_l,useExisting:nr(()=>O5),multi:!0};function gR(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let O5=(()=>{class t extends vu{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=ae(Rc).injector;destroyRef=ae(xa);cdr=ae(S6);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Tv({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;const s=gR(this._getOptionId(n),n);this.setProperty("value",s)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){const r=function Qle(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(s){return(n||(n=oi(t)))(s||t)}})();static \u0275dir=jn({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){1&r&&zt("change",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ws([Jle]),qr]})}return t})(),mR=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,s){this._element=n,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(gR(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(Et($o),Et(zc),Et(O5,9))};static \u0275dir=jn({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();const ece={provide:_l,useExisting:nr(()=>y7),multi:!0};function vR(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let y7=(()=>{class t extends vu{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){let r;if(this.value=n,Array.isArray(n)){const s=n.map(i=>this._getOptionId(i));r=(i,o)=>{i._setSelected(s.indexOf(o.toString())>-1)}}else r=(s,i)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{const s=[],i=r.selectedOptions;if(void 0!==i){const o=i;for(let a=0;a<o.length;a++){const c=this._getOptionValue(o[a].value);s.push(c)}}else{const o=r.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const c=this._getOptionValue(l.value);s.push(c)}}}this.value=s,n(s)}}_registerOption(n){const r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){const r=function tce(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(s){return(n||(n=oi(t)))(s||t)}})();static \u0275dir=jn({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){1&r&&zt("change",function(o){return s.onChange(o.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ws([ece]),qr]})}return t})(),wR=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,s){this._element=n,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(vR(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(vR(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(Et($o),Et(zc),Et(y7,9))};static \u0275dir=jn({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),uce=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Tc({type:t});static \u0275inj=Oo({})}return t})(),dce=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:ch,useValue:n.callSetDisabledState??E5}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Tc({type:t});static \u0275inj=Oo({imports:[uce]})}return t})();function pce(t,e){if(1&t){const n=mr();gt(0,"input",9),zt("ngModelChange",function(s){return Fe(n),Pe(nt(2).fieldValueChange.next(s))}),ht()}if(2&t){const n=nt(2);Ot("readonly",n.readonly)("ngModel",n.fieldValue)}}function fce(t,e){if(1&t){const n=mr();gt(0,"input",9),zt("ngModelChange",function(s){Fe(n);const i=nt(2);return Pe(i.fieldValueChange.next(i.toURL(s)))}),ht()}if(2&t){const n=nt(2);Ot("readonly",n.readonly)("ngModel",n.fieldValue.toString())}}function gce(t,e){if(1&t){const n=mr();gt(0,"textarea",10),zt("ngModelChange",function(s){return Fe(n),Pe(nt(2).fieldValueChange.next(s))}),ht()}if(2&t){const n=nt(2);Ot("readonly",n.readonly)("ngModel",n.fieldValue)}}function mce(t,e){if(1&t){const n=mr();gt(0,"input",11),zt("ngModelChange",function(s){Fe(n);const i=nt(2);return Pe(i.fieldValueChange.next(i.toDate(s)))}),ht()}if(2&t){const n=nt(2);Ot("readonly",n.readonly)("ngModel",null==n.fieldValue?null:n.fieldValue.toISOString().substring(0,16))}}function vce(t,e){if(1&t&&(gt(0,"option",13),go(1),ht()),2&t){const n=e.$implicit;Ot("selected",n===nt(3).fieldValue)("ngValue",n),Ht(),Nc(" ",n," ")}}function wce(t,e){if(1&t){const n=mr();gt(0,"select",12),zt("ngModelChange",function(s){return Fe(n),Pe(nt(2).fieldValueChange.next(s))}),vg(1,vce,2,3,"option",13,Uw),ht()}if(2&t){const n=nt(2);Ot("ngModel",n.fieldValue),Ht(),wg(n.options)}}function Cce(t,e){if(1&t){const n=mr();gt(0,"input",14),zt("ngModelChange",function(s){Fe(n);const i=nt(2);return Pe(i.fieldValueChange.next(i.toNumber(s)))}),ht()}if(2&t){const n=nt(2);Ot("readonly",n.readonly)("ngModel",n.fieldValue)}}function yce(t,e){if(1&t&&(gt(0,"div",0)(1,"label",2)(2,"span",3),go(3),ht(),os(4,pce,1,2,"input",4),os(5,fce,1,2,"input",4),os(6,gce,1,2,"textarea",5),os(7,mce,1,2,"input",6),os(8,wce,3,1,"select",7),os(9,Cce,1,2,"input",8),ht()()),2&t){const n=nt();Ht(3),h6(n.label),Ht(),as(n.isSimpleText?4:-1),Ht(),as(n.isURL?5:-1),Ht(),as(n.isRichText?6:-1),Ht(),as(n.isDate?7:-1),Ht(),as(n.hasOptions?8:-1),Ht(),as(n.isNumber?9:-1)}}function Ice(t,e){if(1&t){const n=mr();gt(0,"gn-ui-button",15),zt("buttonClick",function(){return Fe(n),Pe(nt().addValue())}),gt(1,"span")(2,"span",16),go(3,"Add value for"),ht(),go(4),ht()()}if(2&t){const n=nt();Ot("type","outline"),Ht(4),Nc(" ",n.label)}}let Ace=(()=>{var t;class e{constructor(){this.fieldValueChange=new ps,this.readonly=!1,this.type="text",this.confirm=this.fieldValueChange.pipe(function hle(t,e=ule){return Sa((n,r)=>{let s=null,i=null,o=null;const a=()=>{if(s){s.unsubscribe(),s=null;const c=i;i=null,r.next(c)}};function l(){const c=o+t,u=e.now();if(u<c)return s=this.schedule(void 0,c-u),void r.add(s);a()}n.subscribe(Ha(r,c=>{i=c,o=e.now(),s||(s=e.schedule(l,t),r.add(s))},()=>{a(),r.complete()},void 0,()=>{i=s=null}))})}(300),jo(()=>{}))}get hasOptions(){return Array.isArray(this.options)}get isMissing(){return void 0===this.fieldValue&&!this.hasOptions}get isSimpleText(){return!this.hasOptions&&!this.isMissing&&"text"===this.type}get isRichText(){return!this.hasOptions&&!this.isMissing&&"rich"===this.type}get isURL(){return!this.hasOptions&&!this.isMissing&&"url"===this.type}get isDate(){return!this.hasOptions&&!this.isMissing&&"date"===this.type}get isNumber(){return!this.hasOptions&&!this.isMissing&&"number"===this.type}toDate(r){return new Date(r)}toURL(r){return new URL(r,window.location.toString())}toNumber(r){return parseFloat(r)||0}addValue(){switch(this.type){case"url":this.fieldValue=new URL("",window.location.toString());break;case"date":this.fieldValue=new Date;break;default:this.fieldValue=""}this.fieldValueChange.emit(this.fieldValue)}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)},this.\u0275cmp=Ra({type:e,selectors:[["gn-ui-record-field-simple"]],inputs:{label:"label",fieldValue:"fieldValue",readonly:"readonly",type:"type",options:"options"},outputs:{fieldValueChange:"fieldValueChange",confirm:"confirm"},standalone:!1,decls:2,vars:2,consts:[[1,"border","border-gray-400","rounded-sm","m-2","shadow-sm","bg-white"],["extraClass","m-2 py-[0.5em] px-[1em]",3,"type"],[1,"block","leading-tight","text-right","relative"],[1,"absolute","top-[0.25em]","right-[0.5em]","text-[0.9em]","text-gray-700","uppercase","pointer-events-none"],["type","text",3,"readonly","ngModel"],["rows","4",3,"readonly","ngModel"],["type","datetime-local",3,"readonly","ngModel"],[3,"ngModel"],["type","number",3,"readonly","ngModel"],["type","text",3,"ngModelChange","readonly","ngModel"],["rows","4",3,"ngModelChange","readonly","ngModel"],["type","datetime-local",3,"ngModelChange","readonly","ngModel"],[3,"ngModelChange","ngModel"],[3,"selected","ngValue"],["type","number",3,"ngModelChange","readonly","ngModel"],["extraClass","m-2 py-[0.5em] px-[1em]",3,"buttonClick","type"],[1,"opacity-70"]],template:function(s,i){1&s&&(os(0,yce,10,7,"div",0),os(1,Ice,5,2,"gn-ui-button",1)),2&s&&(as(i.isMissing?-1:0),Ht(),as(i.isMissing?1:-1))},dependencies:[mR,wR,_5,C7,O5,KL,w7,A5],styles:["input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.3em .5em .3em}input[readonly][_ngcontent-%COMP%]{background-color:var(--color-gray-50);color:var(--color-gray-700)}"],changeDetection:0}))}return t(),e})();const bce=["*"];let A7=(()=>{var t;class e{static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)},this.\u0275cmp=Ra({type:e,selectors:[["gn-ui-record-field-group"]],inputs:{label:"label"},standalone:!1,ngContentSelectors:bce,decls:4,vars:1,consts:[[1,"outer","p-[0.25em]","m-2"],[1,"p-[0.5em]","pb-0","uppercase","font-medium","text-gray-900","text-center"]],template:function(s,i){1&s&&(s6(),gt(0,"div",0)(1,"div",1),go(2),ht(),i6(3),ht()),2&s&&(Ht(2),Nc(" ",i.label," "))},styles:['.outer[_ngcontent-%COMP%]{position:relative;background:#ebebeb7f}.outer[_ngcontent-%COMP%]:before{position:absolute;top:0;bottom:0;left:0;width:10px;border-radius:.125rem;border-width:1px;border-right-width:0px;border-color:var(--color-gray-400);content:""}.outer[_ngcontent-%COMP%]:after{position:absolute;top:0;bottom:0;right:0;width:10px;border-radius:.125rem;border-width:1px;border-left-width:0px;border-color:var(--color-gray-400);content:""}'],changeDetection:0}))}return t(),e})();function _ce(t){return null==t?"":/^\d+$/.test(t)?`${t}px`:t}const TR=new at("Ng Icon Pre Processor"),LR=new at("Ng Icon Post Processor"),RR=new at("Ng Icon Logger");class zce{log(e){console.log(e)}warn(e){console.warn(e)}error(e){console.error(e)}}const DR=new at("Ng Icon Config");function Tce(t,...e){return[{provide:DR,useValue:t},e.map(n=>n.\u0275providers)]}const BR=new at("Ng Icon Loader Token"),NR=new at("Ng Icon Cache Token");function Nce(t){return[{provide:G5,useFactory:(e=ae(G5,{optional:!0,skipSelf:!0}))=>({...e?.reduce((n,r)=>({...n,...r}),{}),...t}),multi:!0}]}const G5=new at("Icons Token");let b7=(()=>{var t;class e{constructor(){this.config=function Lce(){return ae(DR,{optional:!0})??{}}(),this.icons=function Fce(){return ae(G5,{optional:!0})??[]}(),this.loader=function Dce(){return ae(BR,{optional:!0})}(),this.cache=function Bce(){return ae(NR,{optional:!0})}(),this.preProcessor=function xce(){return ae(TR,{optional:!0})??(t=>t)}(),this.postProcessor=function Sce(){return ae(LR,{optional:!0})??(()=>{})}(),this.injector=ae(uo),this.renderer=ae(zc),this.platform=ae(rf),this.elementRef=ae($o),this.logger=function Ece(){return ae(RR,{optional:!0})??new zce}(),this.name=Wd(),this.svg=Wd(),this.size=Wd(this.config.size,{transform:_ce}),this.strokeWidth=Wd(this.config.strokeWidth),this.color=Wd(this.config.color),function qH(t,e){const n=e?.injector??ae(uo);let s,r=!0!==e?.manualCleanup?n.get(xa):null;const i=n.get(Np,null,{optional:!0}),o=n.get(A1);return null!==i?(s=function y$(t,e,n){const r=Object.create(C$);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=QH(r,n),t[Y]??=new Set,t[Y].add(r),r.consumerMarkedDirty(r),r}(i.view,o,t),r instanceof D3&&r._lView===i.view&&(r=null)):s=function I$(t,e,n){const r=Object.create(w$);return r.fn=QH(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}(t,n.get(O3),o),s.injector=n,null!==r&&(s.onDestroyFn=r.onDestroy(()=>s.destroy())),new v$(s)}(()=>this.updateIcon())}ngOnDestroy(){this.svgElement=void 0}updateIcon(){var r=this;return(0,ei.A)(function*(){const s=r.name(),i=r.svg();if(void 0!==i)return void r.setSvg(i);if(void 0===s)return;const o=function kce(t){return t.replace(/([^a-zA-Z0-9])+(.)?/g,(e,n,r)=>r?r.toUpperCase():"").replace(/[^a-zA-Z\d]/g,"").replace(/^([A-Z])/,e=>e.toLowerCase())}(s);for(const a of[...r.icons].reverse())if(a[o])return void r.setSvg(a[o]);if(r.loader){const a=yield r.requestIconFromLoader(s);if(null!==a)return void r.setSvg(a)}r.logger.warn(`No icon named ${s} was found. You may need to import it using the withIcons function.`)})()}setSvg(r){if(function J7(t){return"server"===t}(this.platform))return this.elementRef.nativeElement.innerHTML=r,void this.elementRef.nativeElement.setAttribute("data-ng-icon-ssr","");if(this.elementRef.nativeElement.hasAttribute("data-ng-icon-ssr")&&(this.elementRef.nativeElement.removeAttribute("data-ng-icon-ssr"),this.svgElement=this.elementRef.nativeElement.querySelector("svg")??void 0,this.elementRef.nativeElement.innerHTML===r)||(this.svgElement&&this.renderer.removeChild(this.elementRef.nativeElement,this.svgElement),""===r))return;const s=this.renderer.createElement("template");this.renderer.setProperty(s,"innerHTML",this.preProcessor(r)),this.svgElement=s.content.firstElementChild,this.postProcessor(this.svgElement),this.renderer.appendChild(this.elementRef.nativeElement,this.svgElement)}requestIconFromLoader(r){var s=this;return new Promise(i=>{g1(this.injector,(0,ei.A)(function*(){if(s.cache){const l=s.cache.get(r);if("string"==typeof l)return void i(l);if(l instanceof Promise){const c=yield l;return void i(c)}}const o=function Pce(t){return"string"==typeof t?Promise.resolve(t):x0(t)?t.toPromise():t}(s.loader(r));s.cache?.set(r,o);const a=yield o;s.cache?.set(r,a),i(a)}))})}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)},this.\u0275cmp=Ra({type:e,selectors:[["ng-icon"]],hostVars:6,hostBindings:function(s,i){2&s&&c6("--ng-icon__stroke-width",i.strokeWidth())("--ng-icon__size",i.size())("--ng-icon__color",i.color())},inputs:{name:[1,"name"],svg:[1,"svg"],size:[1,"size"],strokeWidth:[1,"strokeWidth"],color:[1,"color"]},decls:0,vars:0,template:function(s,i){},styles:["[_nghost-%COMP%]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-%COMP%]     svg{width:inherit;height:inherit;vertical-align:inherit}@layer ng-icon{[_nghost-%COMP%]{color:var(--ng-icon__color, currentColor)}}"],changeDetection:0}))}return t(),e})(),Oce=(()=>{var t;class e{constructor(r){if(0===Object.keys(r).length)throw new Error("No icons have been provided. Ensure to include some icons by importing them using NgIconsModule.withIcons({ ... }).")}static withIcons(r){return{ngModule:e,providers:Nce(r)}}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)(mn(G5))},this.\u0275mod=Tc({type:e}),this.\u0275inj=Oo({}))}return t(),e})();const Gce=(t,e)=>({getValue:t,setValue:e});function Wce(t,e){if(1&t){const n=mr();gt(0,"div",2),bg(1,5),gt(2,"gn-ui-button",6),zt("buttonClick",function(){const s=Fe(n).$index;return Pe(nt().removeItem(s))}),b2(3,"ng-icon",7),ht()()}if(2&t){const n=e.$index,r=nt();Ht(),Ot("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",m6(3,Gce,r.valueGetterByIndex(n),r.valueSetterByIndex(n))),Ht(),Ot("type","outline")}}let Zce=(()=>{var t;class e{constructor(){this.fieldValueChange=new ps,this.confirm=new ps}addItem(){this.fieldValue=[...this.fieldValue,this.defaultItem],this.fieldValueChange.emit(this.fieldValue),this.confirm.emit()}removeItem(r){this.fieldValue=this.fieldValue.filter((s,i)=>i!==r),this.fieldValueChange.emit(this.fieldValue),this.confirm.emit()}valueGetterByIndex(r){return()=>this.fieldValue[r]}valueSetterByIndex(r){return(s,i,o)=>{this.fieldValue[r]=i&&o?{...this.fieldValue[r],[i]:{...this.fieldValue[r][i],[o]:s}}:i?{...this.fieldValue[r],[i]:s}:s}}trackBy(r){return r}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)},this.\u0275cmp=Ra({type:e,selectors:[["gn-ui-record-field-array"]],inputs:{label:"label",fieldValue:"fieldValue",itemTemplate:"itemTemplate",defaultItem:"defaultItem"},outputs:{fieldValueChange:"fieldValueChange",confirm:"confirm"},standalone:!1,decls:7,vars:2,consts:[[3,"label"],[1,"text-[0.9em]"],[1,"relative","pr-[2.8em]"],[1,"p-2"],["extraClass","py-[0.5em] px-[1em]",3,"buttonClick","type"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["extraClass","!p-[0.5em]","title","Delete this item",1,"absolute","top-0","right-1",3,"buttonClick","type"],["name","matDeleteForeverSharp"]],template:function(s,i){1&s&&(gt(0,"gn-ui-record-field-group",0)(1,"div",1),vg(2,Wce,4,6,"div",2,i.trackBy,!0),gt(4,"div",3)(5,"gn-ui-button",4),zt("buttonClick",function(){return i.addItem()}),go(6," Add new item... "),ht()()()()),2&s&&(Ot("label",i.label),Ht(2),wg(i.fieldValue),Ht(3),Ot("type","primary"))},dependencies:[Z6,b7,A5,A7],styles:['.outer[_ngcontent-%COMP%]{position:relative;background:#ebebeb7f}.outer[_ngcontent-%COMP%]:before{position:absolute;top:0;bottom:0;left:0;width:10px;border-radius:.125rem;border-width:1px;border-right-width:0px;border-color:var(--color-gray-400);content:""}'],changeDetection:0}))}return t(),e})();const jce=(t,e)=>({getValue:t,setValue:e});function Uce(t,e){if(1&t){const n=mr();gt(0,"gn-ui-button",6),zt("buttonClick",function(){return Fe(n),Pe(nt(2).deleteObject())}),b2(1,"ng-icon",7),ht()}2&t&&Ot("type","outline")}function $ce(t,e){if(1&t&&(gt(0,"div",2),bg(1,4),os(2,Uce,2,1,"gn-ui-button",5),ht()),2&t){const n=nt();Ht(),Ot("ngTemplateOutlet",n.itemTemplate)("ngTemplateOutletContext",m6(3,jce,n.valueGetter(),n.valueSetter())),Ht(),as(n.optional?2:-1)}}function Xce(t,e){if(1&t){const n=mr();gt(0,"div",3)(1,"gn-ui-button",8),zt("buttonClick",function(){return Fe(n),Pe(nt().createObject())}),go(2," Create... "),ht()()}2&t&&(Ht(),Ot("type","primary"))}let Yce=(()=>{var t;class e{constructor(){this.fieldValueChange=new ps,this.confirm=new ps}createObject(){this.fieldValue={},this.fieldValueChange.emit(this.fieldValue),this.confirm.emit()}deleteObject(){this.fieldValue=void 0,this.fieldValueChange.emit(this.fieldValue),this.confirm.emit()}valueGetter(){return()=>this.fieldValue}valueSetter(){return(r,s)=>{s?this.fieldValue[s]=r:this.fieldValue=r}}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)},this.\u0275cmp=Ra({type:e,selectors:[["gn-ui-record-field-object"]],inputs:{label:"label",fieldValue:"fieldValue",itemTemplate:"itemTemplate",defaultItem:"defaultItem",optional:"optional"},outputs:{fieldValueChange:"fieldValueChange",confirm:"confirm"},standalone:!1,decls:4,vars:3,consts:[[3,"label"],[1,"text-[0.9em]"],[1,"relative","pr-[2.8em]"],[1,"p-2"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["extraClass","!p-[0.5em]","title","Delete this item",1,"absolute","top-0","right-1",3,"type"],["extraClass","!p-[0.5em]","title","Delete this item",1,"absolute","top-0","right-1",3,"buttonClick","type"],["name","matDeleteForeverSharp"],["extraClass","py-[0.5em] px-[1em]",3,"buttonClick","type"]],template:function(s,i){1&s&&(gt(0,"gn-ui-record-field-group",0)(1,"div",1),os(2,$ce,3,6,"div",2),os(3,Xce,3,1,"div",3),ht()()),2&s&&(Ot("label",i.label),Ht(2),as(i.fieldValue?2:-1),Ht(),as(i.fieldValue?-1:3))},dependencies:[Z6,b7,A5,A7],styles:['.outer[_ngcontent-%COMP%]{position:relative;background:#ebebeb7f}.outer[_ngcontent-%COMP%]:before{position:absolute;top:0;bottom:0;left:0;width:10px;border-radius:.125rem;border-width:1px;border-right-width:0px;border-color:var(--color-gray-400);content:""}.outer[_ngcontent-%COMP%]:after{position:absolute;top:0;bottom:0;right:0;width:10px;border-radius:.125rem;border-width:1px;border-left-width:0px;border-color:var(--color-gray-400);content:""}'],changeDetection:0}))}return t(),e})();const Kce=()=>["dataset","service"],FR=()=>({name:"org"}),PR=t=>({firstName:"first",lastName:"last",email:"email@domain.com",organization:t,role:"unspecified"}),qce=()=>({label:"change me!",type:"other"}),W5=()=>({text:"change me!"}),Jce=()=>["other","theme","place","temporal"],Qce=()=>["grid","vector","tin","table","point"],e1e=()=>["service","download","link"],t1e=()=>({url:"",accessServiceProtocol:"OGC:WMS"}),n1e=()=>["endpoint","link"];function r1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-button",28),zt("buttonClick",function(){return Fe(n),Pe(nt().addOwnerOrg())}),gt(1,"span",29),go(2,"Add a owner organization to this record"),ht()()}2&t&&Ot("type","outline")}function s1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-simple",30),cs("fieldValueChange",function(s){Fe(n);const i=nt();return fs(i.record.ownerOrganization.name,s)||(i.record.ownerOrganization.name=s),Pe(s)}),zt("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht(),gt(1,"gn-ui-record-field-simple",31),cs("fieldValueChange",function(s){Fe(n);const i=nt();return fs(i.record.ownerOrganization.description,s)||(i.record.ownerOrganization.description=s),Pe(s)}),zt("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht(),gt(2,"gn-ui-record-field-simple",32),cs("fieldValueChange",function(s){Fe(n);const i=nt();return fs(i.record.ownerOrganization.website,s)||(i.record.ownerOrganization.website=s),Pe(s)}),zt("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht(),gt(3,"gn-ui-record-field-simple",33),cs("fieldValueChange",function(s){Fe(n);const i=nt();return fs(i.record.ownerOrganization.logoUrl,s)||(i.record.ownerOrganization.logoUrl=s),Pe(s)}),zt("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht()}if(2&t){const n=nt();ls("fieldValue",n.record.ownerOrganization.name),Ht(),ls("fieldValue",n.record.ownerOrganization.description),Ht(),ls("fieldValue",n.record.ownerOrganization.website),Ot("type","url"),Ht(),ls("fieldValue",n.record.ownerOrganization.logoUrl),Ot("type","url")}}function i1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-group",40)(1,"gn-ui-record-field-simple",30),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"organization","name"))})("confirm",function(){return Fe(n),Pe(nt(2).emitChangedRecord())}),ht(),gt(2,"gn-ui-record-field-simple",31),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"organization","description"))})("confirm",function(){return Fe(n),Pe(nt(2).emitChangedRecord())}),ht(),gt(3,"gn-ui-record-field-simple",32),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"organization","website"))})("confirm",function(){return Fe(n),Pe(nt(2).emitChangedRecord())}),ht(),gt(4,"gn-ui-record-field-simple",33),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"organization","logoUrl"))})("confirm",function(){return Fe(n),Pe(nt(2).emitChangedRecord())}),ht()()}if(2&t){const n=nt().getValue;Ht(),Ot("fieldValue",n().organization.name),Ht(),Ot("fieldValue",n().organization.description),Ht(),Ot("fieldValue",n().organization.website)("type","url"),Ht(),Ot("fieldValue",n().organization.logoUrl)("type","url")}}function o1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-group",34)(1,"gn-ui-record-field-simple",35),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"firstName"))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht(),gt(2,"gn-ui-record-field-simple",36),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"lastName"))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht(),gt(3,"gn-ui-record-field-simple",37),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"email"))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht(),gt(4,"gn-ui-record-field-simple",38),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"role"))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht(),gt(5,"gn-ui-record-field-simple",39),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"position"))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht(),os(6,i1e,5,6,"gn-ui-record-field-group",40),ht()}if(2&t){const n=e.getValue,r=nt();Ht(),Ot("fieldValue",n().firstName),Ht(),Ot("fieldValue",n().lastName),Ht(),Ot("fieldValue",n().email),Ht(),Ot("fieldValue",n().role)("options",r.roleOptions),Ht(),Ot("fieldValue",n().position),Ht(),as(n().organization?6:-1)}}function a1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-simple",41),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht()}2&t&&Ot("fieldValue",(0,e.getValue)())}function l1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-group")(1,"gn-ui-record-field-simple",42),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"label"))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht(),gt(2,"gn-ui-record-field-simple",43),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"type"))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht(),gt(3,"gn-ui-record-field-object",44),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"thesaurus"))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht()()}if(2&t){const n=e.getValue;nt();const r=Bc(35);Ht(),Ot("fieldValue",n().label)("type","text"),Ht(),Ot("options",Do(7,Jce))("fieldValue",n().type),Ht(),Ot("optional",!0)("itemTemplate",r)("fieldValue",n().thesaurus)}}function c1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-simple",45),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"id"))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht(),gt(1,"gn-ui-record-field-simple",46),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"name"))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht(),gt(2,"gn-ui-record-field-simple",47),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"url"))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht()}if(2&t){const n=e.getValue;Ot("fieldValue",n().id)("type","text"),Ht(),Ot("fieldValue",n().name)("type","text"),Ht(),Ot("fieldValue",n().url)("type","url")}}function u1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-group")(1,"gn-ui-record-field-simple",48),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"text"))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht(),gt(2,"gn-ui-record-field-simple",47),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"url"))})("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht()()}if(2&t){const n=e.getValue;Ht(),Ot("fieldValue",n().text)("type","rich"),Ht(),Ot("fieldValue",n().url)("type","url")}}function h1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-simple",63),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"url"))})("confirm",function(){return Fe(n),Pe(nt(3).emitChangedRecord())}),ht()}if(2&t){const n=nt().getValue;Ot("type","url")("fieldValue",n().url)}}function d1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-simple",64),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"accessServiceProtocol"))})("confirm",function(){return Fe(n),Pe(nt(3).emitChangedRecord())}),ht()}2&t&&Ot("fieldValue",(0,nt().getValue)().accessServiceProtocol)}function p1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-simple",65),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"identifierInService"))})("confirm",function(){return Fe(n),Pe(nt(3).emitChangedRecord())}),ht()}2&t&&Ot("fieldValue",(0,nt().getValue)().identifierInService)}function f1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-simple",66),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"url"))})("confirm",function(){return Fe(n),Pe(nt(3).emitChangedRecord())}),ht()}if(2&t){const n=nt().getValue;Ot("type","url")("fieldValue",n().url)}}function g1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-simple",67),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"mimeType"))})("confirm",function(){return Fe(n),Pe(nt(3).emitChangedRecord())}),ht()}2&t&&Ot("fieldValue",(0,nt().getValue)().mimeType)}function m1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-simple",68),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"sizeBytes"))})("confirm",function(){return Fe(n),Pe(nt(3).emitChangedRecord())}),ht()}if(2&t){const n=nt().getValue;Ot("type","number")("fieldValue",n().sizeBytes)}}function v1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-simple",69),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"url"))})("confirm",function(){return Fe(n),Pe(nt(3).emitChangedRecord())}),ht()}if(2&t){const n=nt().getValue;Ot("type","url")("fieldValue",n().url)}}function w1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-group",54)(1,"gn-ui-record-field-simple",43),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(nt(2).getOnlineResourceForType(s)))})("confirm",function(){return Fe(n),Pe(nt(2).emitChangedRecord())}),ht(),os(2,h1e,1,2,"gn-ui-record-field-simple",55),os(3,d1e,1,1,"gn-ui-record-field-simple",56),os(4,p1e,1,1,"gn-ui-record-field-simple",57),os(5,f1e,1,2,"gn-ui-record-field-simple",58),os(6,g1e,1,1,"gn-ui-record-field-simple",59),os(7,m1e,1,2,"gn-ui-record-field-simple",60),os(8,v1e,1,2,"gn-ui-record-field-simple",61),gt(9,"gn-ui-record-field-simple",30),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"name"))})("confirm",function(){return Fe(n),Pe(nt(2).emitChangedRecord())}),ht(),gt(10,"gn-ui-record-field-simple",62),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"description"))})("confirm",function(){return Fe(n),Pe(nt(2).emitChangedRecord())}),ht()()}if(2&t){const n=e.getValue;Ht(),Ot("options",Do(12,e1e))("fieldValue",n().type),Ht(),as("service"===n().type?2:-1),Ht(),as("service"===n().type?3:-1),Ht(),as("service"===n().type?4:-1),Ht(),as("download"===n().type?5:-1),Ht(),as("download"===n().type?6:-1),Ht(),as("download"===n().type?7:-1),Ht(),as("link"===n().type?8:-1),Ht(),Ot("fieldValue",n().name),Ht(),Ot("type","rich")("fieldValue",n().description)}}function C1e(t,e){if(1&t){const n=mr();gt(0,"div")(1,"p",49),go(2," Dataset record specific fields "),ht(),gt(3,"p")(4,"gn-ui-record-field-simple",50),cs("fieldValueChange",function(s){Fe(n);const i=nt();return fs(i.record.status,s)||(i.record.status=s),Pe(s)}),zt("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht()(),gt(5,"p")(6,"gn-ui-record-field-simple",51),cs("fieldValueChange",function(s){Fe(n);const i=nt();return fs(i.record.spatialRepresentation,s)||(i.record.spatialRepresentation=s),Pe(s)}),zt("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht()(),gt(7,"p")(8,"gn-ui-record-field-simple",52),cs("fieldValueChange",function(s){Fe(n);const i=nt();return fs(i.record.lineage,s)||(i.record.lineage=s),Pe(s)}),zt("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),ht()(),gt(9,"p")(10,"gn-ui-record-field-array",53),cs("fieldValueChange",function(s){Fe(n);const i=nt();return fs(i.record.distributions,s)||(i.record.distributions=s),Pe(s)}),zt("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),W1(11,w1e,11,13,"ng-template",null,5,Fc),ht()()()}if(2&t){const n=Bc(12),r=nt();Ht(4),ls("fieldValue",r.record.status),Ot("options",r.statusOptions),Ht(2),ls("fieldValue",r.record.spatialRepresentation),Ot("options",Do(9,Qce)),Ht(2),ls("fieldValue",r.record.lineage),Ot("type","rich"),Ht(2),ls("fieldValue",r.record.distributions),Ot("itemTemplate",n)("defaultItem",r.getOnlineResourceForType("download"))}}function y1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-simple",75),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"url"))})("confirm",function(){return Fe(n),Pe(nt(3).emitChangedRecord())}),ht()}if(2&t){const n=nt().getValue;Ot("type","url")("fieldValue",n().url)}}function I1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-simple",76),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"protocol"))})("confirm",function(){return Fe(n),Pe(nt(3).emitChangedRecord())}),ht()}2&t&&Ot("fieldValue",(0,nt().getValue)().accessServiceProtocol)}function A1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-simple",30),zt("fieldValueChange",function(s){return Fe(n),Pe((0,nt().setValue)(s,"name"))})("confirm",function(){return Fe(n),Pe(nt(3).emitChangedRecord())}),ht()}2&t&&Ot("fieldValue",(0,nt().getValue)().name)}function b1e(t,e){if(1&t){const n=mr();gt(0,"gn-ui-record-field-group",71)(1,"gn-ui-record-field-simple",43),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(nt(2).getOnlineResourceForType(s)))})("confirm",function(){return Fe(n),Pe(nt(2).emitChangedRecord())}),ht(),os(2,y1e,1,2,"gn-ui-record-field-simple",72),os(3,I1e,1,1,"gn-ui-record-field-simple",73),os(4,A1e,1,1,"gn-ui-record-field-simple",74),gt(5,"gn-ui-record-field-simple",62),zt("fieldValueChange",function(s){return Pe((0,Fe(n).setValue)(s,"description"))})("confirm",function(){return Fe(n),Pe(nt(2).emitChangedRecord())}),ht()()}if(2&t){const n=e.getValue;Ht(),Ot("options",Do(7,n1e))("fieldValue",n().type),Ht(),as("endpoint"===n().type?2:-1),Ht(),as("endpoint"===n().type?3:-1),Ht(),as("link"===n().type?4:-1),Ht(),Ot("type","rich")("fieldValue",n().description)}}function _1e(t,e){if(1&t){const n=mr();gt(0,"div")(1,"p",49),go(2," Service record specific fields "),ht(),gt(3,"p")(4,"gn-ui-record-field-array",70),cs("fieldValueChange",function(s){Fe(n);const i=nt();return fs(i.record.onlineResources,s)||(i.record.onlineResources=s),Pe(s)}),zt("confirm",function(){return Fe(n),Pe(nt().emitChangedRecord())}),W1(5,b1e,6,8,"ng-template",null,6,Fc),ht()()()}if(2&t){const n=Bc(6),r=nt();Ht(4),ls("fieldValue",r.record.onlineResources),Ot("itemTemplate",n)("defaultItem",Do(3,t1e))}}let x1e=(()=>{var t;class e{get isDatasetRecord(){return"dataset"===this.record.kind}get isServiceRecord(){return"service"===this.record.kind}constructor(){this.recordChanged=new ps,this.statusOptions=OK,this.roleOptions=PK,this.switchToRecordKind("dataset")}ngAfterViewInit(){setTimeout(()=>{this.recordChanged.emit(this.record)},100)}emitChangedRecord(){this.recordChanged.emit(this.record)}getOnlineResourceForType(r){switch(r){case"download":case"link":default:return{type:r,url:new URL("",window.location.toString())};case"service":case"endpoint":return{type:r,url:new URL("",window.location.toString()),accessServiceProtocol:"other"}}}switchToRecordKind(r){const s=!!this.record,i={uniqueIdentifier:s?this.record.uniqueIdentifier:"0000-0000-0000-0000",title:s?this.record.title:"My Record",abstract:s?this.record.abstract:"",recordUpdated:s?this.record.recordUpdated:new Date,ownerOrganization:s?this.record.ownerOrganization:{name:"My Organization"},contacts:s?this.record.contacts:[],contactsForResource:s?this.record.contactsForResource:[],licenses:s?[...this.record.licenses]:[],legalConstraints:s?[...this.record.legalConstraints]:[],securityConstraints:s?[...this.record.securityConstraints]:[],otherConstraints:s?[...this.record.otherConstraints]:[],keywords:s?this.record.keywords:[],topics:s?this.record.topics:[],onlineResources:[],otherLanguages:[],defaultLanguage:"en",overviews:[]};this.record="dataset"===r?{...i,kind:"dataset",status:"under_development",updateFrequency:"unknown",lineage:"",spatialExtents:[],temporalExtents:[]}:{...i,kind:"service",spatialExtents:[]},this.recordChanged.emit(this.record)}addOwnerOrg(){this.record={...this.record,ownerOrganization:{name:"My Organization"}},this.recordChanged.emit(this.record)}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)},this.\u0275cmp=Ra({type:e,selectors:[["gn-ui-record-form"]],inputs:{record:"record"},outputs:{recordChanged:"recordChanged"},standalone:!1,decls:48,vars:58,consts:[["contactTpl",""],["topicTpl",""],["keywordTpl",""],["thesaurusTpl",""],["constraintTpl",""],["distributionTpl",""],["endpointTpl",""],["label","Unique identifier",3,"fieldValueChange","confirm","fieldValue"],["label","Title",3,"fieldValueChange","confirm","fieldValue"],["label","Abstract",3,"fieldValueChange","confirm","fieldValue","type"],["label","Kind",3,"fieldValueChange","options","fieldValue"],["label","Owner Organization"],["extraClass","m-2 py-[0.5em] px-[1em]",3,"type"],["label","Contacts",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Contacts for resource",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],[1,"grid","grid-cols-3"],["label","Record created on",3,"fieldValueChange","confirm","fieldValue","type"],["label","Record updated on",3,"fieldValueChange","confirm","fieldValue","type"],["label","Record published on",3,"fieldValueChange","confirm","fieldValue","type"],["label","Resource created on",3,"fieldValueChange","confirm","fieldValue","type"],["label","Resource updated on",3,"fieldValueChange","confirm","fieldValue","type"],["label","Resource published on",3,"fieldValueChange","confirm","fieldValue","type"],["label","Topics",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Keywords",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Licenses",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Legal constraints",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Security constraints",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Other constraints",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["extraClass","m-2 py-[0.5em] px-[1em]",3,"buttonClick","type"],[1,"opacity-70"],["label","Name",3,"fieldValueChange","confirm","fieldValue"],["label","Description",3,"fieldValueChange","confirm","fieldValue"],["label","Website",3,"fieldValueChange","confirm","fieldValue","type"],["label","Logo URL",3,"fieldValueChange","confirm","fieldValue","type"],["label","Contact"],["label","First Name",3,"fieldValueChange","confirm","fieldValue"],["label","Last Name",3,"fieldValueChange","confirm","fieldValue"],["label","Email",3,"fieldValueChange","confirm","fieldValue"],["label","Role",3,"fieldValueChange","confirm","fieldValue","options"],["label","Position",3,"fieldValueChange","confirm","fieldValue"],["label","Organisation"],["label","Topic",3,"fieldValueChange","confirm","fieldValue"],["label","Label",3,"fieldValueChange","confirm","fieldValue","type"],["label","Type",3,"fieldValueChange","confirm","options","fieldValue"],["label","Thesaurus",3,"fieldValueChange","confirm","optional","itemTemplate","fieldValue"],["label","Identifier",3,"fieldValueChange","confirm","fieldValue","type"],["label","Name",3,"fieldValueChange","confirm","fieldValue","type"],["label","URL",3,"fieldValueChange","confirm","fieldValue","type"],["label","Text",3,"fieldValueChange","confirm","fieldValue","type"],[1,"text-xl","font-bold","font-title","mt-8","mb-0","m-2"],["label","Status",3,"fieldValueChange","confirm","fieldValue","options"],["label","Spatial Representation Type",3,"fieldValueChange","confirm","fieldValue","options"],["label","Lineage",3,"fieldValueChange","confirm","fieldValue","type"],["label","Distributions",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Distribution"],["label","Access Service URL",3,"type","fieldValue"],["label","Access Service Protocol",3,"fieldValue"],["label","Identifier In Service",3,"fieldValue"],["label","Download URL",3,"type","fieldValue"],["label","Mime Type",3,"fieldValue"],["label","Size In Bytes",3,"type","fieldValue"],["label","Link URL",3,"type","fieldValue"],["label","Description",3,"fieldValueChange","confirm","type","fieldValue"],["label","Access Service URL",3,"fieldValueChange","confirm","type","fieldValue"],["label","Access Service Protocol",3,"fieldValueChange","confirm","fieldValue"],["label","Identifier In Service",3,"fieldValueChange","confirm","fieldValue"],["label","Download URL",3,"fieldValueChange","confirm","type","fieldValue"],["label","Mime Type",3,"fieldValueChange","confirm","fieldValue"],["label","Size In Bytes",3,"fieldValueChange","confirm","type","fieldValue"],["label","Link URL",3,"fieldValueChange","confirm","type","fieldValue"],["label","Online Resources",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Online Resource"],["label","Endpoint URL",3,"type","fieldValue"],["label","Protocol",3,"fieldValue"],["label","Name",3,"fieldValue"],["label","Endpoint URL",3,"fieldValueChange","confirm","type","fieldValue"],["label","Protocol",3,"fieldValueChange","confirm","fieldValue"]],template:function(s,i){if(1&s){const o=mr();gt(0,"p")(1,"gn-ui-record-field-simple",7),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.uniqueIdentifier,l)||(i.record.uniqueIdentifier=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht()(),gt(2,"p")(3,"gn-ui-record-field-simple",8),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.title,l)||(i.record.title=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht()(),gt(4,"p")(5,"gn-ui-record-field-simple",9),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.abstract,l)||(i.record.abstract=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht()(),gt(6,"p")(7,"gn-ui-record-field-simple",10),zt("fieldValueChange",function(l){return Fe(o),Pe(i.switchToRecordKind(l))}),ht()(),gt(8,"p")(9,"gn-ui-record-field-group",11),os(10,r1e,3,1,"gn-ui-button",12),os(11,s1e,4,6),ht()(),gt(12,"p")(13,"gn-ui-record-field-array",13),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.contacts,l)||(i.record.contacts=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht()(),gt(14,"p")(15,"gn-ui-record-field-array",14),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.contactsForResource,l)||(i.record.contactsForResource=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht()(),W1(16,o1e,7,7,"ng-template",null,0,Fc),gt(18,"p",15)(19,"gn-ui-record-field-simple",16),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.recordCreated,l)||(i.record.recordCreated=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht(),gt(20,"gn-ui-record-field-simple",17),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.recordUpdated,l)||(i.record.recordUpdated=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht(),gt(21,"gn-ui-record-field-simple",18),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.recordPublished,l)||(i.record.recordPublished=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht()(),gt(22,"p",15)(23,"gn-ui-record-field-simple",19),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.resourceCreated,l)||(i.record.resourceCreated=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht(),gt(24,"gn-ui-record-field-simple",20),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.resourceUpdated,l)||(i.record.resourceUpdated=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht(),gt(25,"gn-ui-record-field-simple",21),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.resourcePublished,l)||(i.record.resourcePublished=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht()(),gt(26,"p")(27,"gn-ui-record-field-array",22),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.topics,l)||(i.record.topics=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),W1(28,a1e,1,1,"ng-template",null,1,Fc),ht()(),gt(30,"p")(31,"gn-ui-record-field-array",23),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.keywords,l)||(i.record.keywords=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht()(),W1(32,l1e,4,8,"ng-template",null,2,Fc)(34,c1e,3,6,"ng-template",null,3,Fc)(36,u1e,3,4,"ng-template",null,4,Fc),gt(38,"p")(39,"gn-ui-record-field-array",24),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.licenses,l)||(i.record.licenses=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht()(),gt(40,"p")(41,"gn-ui-record-field-array",25),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.legalConstraints,l)||(i.record.legalConstraints=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht()(),gt(42,"p")(43,"gn-ui-record-field-array",26),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.securityConstraints,l)||(i.record.securityConstraints=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht()(),gt(44,"p")(45,"gn-ui-record-field-array",27),cs("fieldValueChange",function(l){return Fe(o),fs(i.record.otherConstraints,l)||(i.record.otherConstraints=l),Pe(l)}),zt("confirm",function(){return Fe(o),Pe(i.emitChangedRecord())}),ht()(),os(46,C1e,13,10,"div"),os(47,_1e,7,4,"div")}if(2&s){const o=Bc(17),a=Bc(29),l=Bc(33),c=Bc(37);Ht(),ls("fieldValue",i.record.uniqueIdentifier),Ht(2),ls("fieldValue",i.record.title),Ht(2),ls("fieldValue",i.record.abstract),Ot("type","rich"),Ht(2),Ot("options",Do(46,Kce))("fieldValue",i.record.kind),Ht(3),as(i.record.ownerOrganization?-1:10),Ht(),as(i.record.ownerOrganization?11:-1),Ht(2),ls("fieldValue",i.record.contacts),Ot("itemTemplate",o)("defaultItem",Lg(48,PR,Do(47,FR))),Ht(2),ls("fieldValue",i.record.contactsForResource),Ot("itemTemplate",o)("defaultItem",Lg(51,PR,Do(50,FR))),Ht(4),ls("fieldValue",i.record.recordCreated),Ot("type","date"),Ht(),ls("fieldValue",i.record.recordUpdated),Ot("type","date"),Ht(),ls("fieldValue",i.record.recordPublished),Ot("type","date"),Ht(2),ls("fieldValue",i.record.resourceCreated),Ot("type","date"),Ht(),ls("fieldValue",i.record.resourceUpdated),Ot("type","date"),Ht(),ls("fieldValue",i.record.resourcePublished),Ot("type","date"),Ht(2),ls("fieldValue",i.record.topics),Ot("itemTemplate",a)("defaultItem","change me!"),Ht(4),ls("fieldValue",i.record.keywords),Ot("itemTemplate",l)("defaultItem",Do(53,qce)),Ht(8),ls("fieldValue",i.record.licenses),Ot("itemTemplate",c)("defaultItem",Do(54,W5)),Ht(2),ls("fieldValue",i.record.legalConstraints),Ot("itemTemplate",c)("defaultItem",Do(55,W5)),Ht(2),ls("fieldValue",i.record.securityConstraints),Ot("itemTemplate",c)("defaultItem",Do(56,W5)),Ht(2),ls("fieldValue",i.record.otherConstraints),Ot("itemTemplate",c)("defaultItem",Do(57,W5)),Ht(),as(i.isDatasetRecord?46:-1),Ht(),as(i.isServiceRecord?47:-1)}},dependencies:[A5,Ace,A7,Zce,Yce],styles:["[_nghost-%COMP%]{font-size:14px}"]}))}return t(),e})();const S1e=["codeBlock"];let H1e=(()=>{var t;class e{set recordXml(r){const i=window.hljs.highlight(r,{language:"xml"}).value;this.codeBlockEl.nativeElement.innerHTML=i}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)},this.\u0275cmp=Ra({type:e,selectors:[["gn-ui-record-output-xml"]],viewQuery:function(s,i){if(1&s&&Bd(S1e,5),2&s){let o;Nd(o=Fd())&&(i.codeBlockEl=o.first)}},inputs:{recordXml:"recordXml"},standalone:!1,decls:2,vars:0,consts:[["codeBlock",""],[1,"text-[14px]","hljs","overflow-auto","min-h-[80vh]","whitespace-pre-wrap"]],template:function(s,i){1&s&&b2(0,"pre",1,0)},encapsulation:2}))}return t(),e})();const M1e=["status"],z1e=["output"],V1e=["form"],E1e=t=>({"font-bold":t});function T1e(t,e){1&t&&(gt(0,"span"),go(1,"(native)"),ht())}function L1e(t,e){if(1&t){const n=mr();gt(0,"label",12)(1,"input",15),zt("change",function(s){return Fe(n),Pe(nt().onFormatChange(s.target.value))}),ht(),go(2),os(3,T1e,2,0,"span"),ht()}if(2&t){const n=e.$implicit,r=nt();Ot("ngClass",Lg(5,E1e,n.key===r.originalFormat)),Ht(),Ot("checked",n.key===r.currentFormat)("value",n.key),Ht(),Nc(" ",n.key," "),Ht(),as(n.key===r.originalFormat?3:-1)}}let R1e=(()=>{var t;class e{constructor(){this.formats=r5}get originalFormat(){const r=this.statusComponent?.currentConverter;return qE(r)}onRecordChange(r){this.statusComponent.recordNative=r}onRecordOutputReceived(r){this.outputComponent.recordXml=r,this.currentFormat=this.originalFormat}onRecordNativeReceived(r){this.formComponent.record=r}onFileSelect(r){const s=r.target.files;if(0===s.length)return void console.warn("no file selected");const i=s[0],o=new FileReader;this.statusComponent.startReadingFile(),o.readAsText(i,"UTF-8"),o.onload=a=>{const l=a.target.result;this.statusComponent.referenceMetadata=l,this.statusComponent.currentMetadata=l},o.onerror=()=>this.statusComponent.errorReadingFile()}onFileUrlInput(r){!r||!r.startsWith("http://")&&!r.startsWith("https://")||(this.statusComponent.startLoadingFile(),fetch(r).then(s=>s.text()).then(s=>{this.statusComponent.referenceMetadata=s,this.statusComponent.currentMetadata=s}).catch(s=>this.statusComponent.errorLoadingFile(s.message)))}onFormatChange(r){this.statusComponent.changeFormat(r)}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)},this.\u0275cmp=Ra({type:e,selectors:[["gn-ui-root"]],viewQuery:function(s,i){if(1&s&&(Bd(M1e,5),Bd(z1e,5),Bd(V1e,5)),2&s){let o;Nd(o=Fd())&&(i.statusComponent=o.first),Nd(o=Fd())&&(i.outputComponent=o.first),Nd(o=Fd())&&(i.formComponent=o.first)}},standalone:!1,decls:19,vars:2,consts:[["status",""],["form",""],["output",""],[1,"grid","grid-cols-3","grid-rows-auto","auto-rows-min","h-full"],[1,"col-span-3","flex","flex-row","items-start"],[1,"text-[50px]","font-bold","font-title","my-6","mx-10"],[1,"whitespace-nowrap"],[1,"font-main","font-normal","text-gray-900","text-[16px]",3,"newMetadata","newRecordNative"],[1,"grow","shrink-0","p-3","min-w-[50%]"],["type","file","accept",".xml, .rdf, application/xml, application/rdf+xml, .jsonld, application/ld+json, application/json, .ttl, text/turtle, .n3, text/n3, .nt, application/n-triples","placeholder","Upload a record from your computer",1,"mb-3","border","border-gray-500","rounded-sm","w-full","bg-white","p-2",3,"change"],["type","text","placeholder","...or enter a URL pointing to a metadata record",1,"mb-3","border","border-gray-500","rounded-sm","w-full","bg-white","p-2",3,"change"],[1,"w-full"],[1,"mr-4",3,"ngClass"],[1,"overflow-auto",3,"recordChanged"],[1,"col-span-2"],["type","radio","name","format",3,"change","checked","value"]],template:function(s,i){if(1&s){const o=mr();gt(0,"div",3)(1,"header",4)(2,"div")(3,"h1",5)(4,"div",6),go(5,"Simple metadata editor"),ht(),gt(6,"gn-ui-status",7,0),zt("newMetadata",function(l){return Fe(o),Pe(i.onRecordOutputReceived(l))})("newRecordNative",function(l){return Fe(o),Pe(i.onRecordNativeReceived(l))}),ht()()(),gt(8,"div",8)(9,"input",9),zt("change",function(l){return Fe(o),Pe(i.onFileSelect(l))}),ht(),gt(10,"input",10),zt("change",function(l){return Fe(o),Pe(i.onFileUrlInput(l.target.value))}),ht(),gt(11,"div",11),vg(12,L1e,4,7,"label",12,Uw),function WS(t,e){const n=Wn();let r;const s=t+27;n.firstCreatePass?(r=function _j(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[s]=r,r.onDestroy&&(n.destroyHooks??=[]).push(s,r.onDestroy)):r=n.data[s];const i=r.factory||(r.factory=At(r.type)),a=Pi(Et);try{const l=jh(!1),c=i();return jh(l),function Ke(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Ue(),s,c),c}finally{Pi(a)}}(14,"keyvalue"),ht()()(),gt(15,"gn-ui-record-form",13,1),zt("recordChanged",function(l){return Fe(o),Pe(i.onRecordChange(l))}),ht(),b2(17,"gn-ui-record-output-xml",14,2),ht()}2&s&&(Ht(12),wg(function ZS(t,e,n){const r=t+27,s=Ue(),i=We(s,r);return function Od(t,e){return t[1].data[e].pure}(s,r)?FS(s,eo(),e,i.transform,n,i):i.transform(n)}(14,0,i.formats)))},dependencies:[pM,x1e,H1e,Jre,wM],encapsulation:2}))}return t(),e})(),B1e=(()=>{var t;class e{constructor(){eoe.applyCssVariables("#c82850","#001638","#212029","#fdfbff","'Rubik', sans-serif","'Readex Pro', sans-serif","https://fonts.googleapis.com/css2?family=Readex+Pro&family=Rubik&display=swap")}static#e=t=()=>(this.\u0275fac=function(s){return new(s||e)},this.\u0275mod=Tc({type:e,bootstrap:[R1e]}),this.\u0275inj=Oo({providers:[Kre(),Tce({size:"1.5em"})],imports:[dY,dce,Oce.withIcons({matDeleteForeverSharp:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6 21h12V7H6v14zm2.46-9.12l1.41-1.41L12 12.59l2.12-2.12l1.41 1.41L13.41 14l2.12 2.12l-1.41 1.41L12 15.41l-2.12 2.12l-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4h-3.5z"></path></svg>'})]}))}return t(),e})();hY().bootstrapModule(B1e).catch(t=>console.error(t))},1423:(En,ot,xe)=>{"use strict";function le(je){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(z){return typeof z}:function(z){return z&&"function"==typeof Symbol&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z})(je)}function ut(je,z,fe){return(z=function qe(je){var z=function st(je,z){if("object"!=le(je)||!je)return je;var fe=je[Symbol.toPrimitive];if(void 0!==fe){var f=fe.call(je,z||"default");if("object"!=le(f))return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===z?String:Number)(je)}(je,"string");return"symbol"==le(z)?z:z+""}(z))in je?Object.defineProperty(je,z,{value:fe,enumerable:!0,configurable:!0,writable:!0}):je[z]=fe,je}xe.d(ot,{A:()=>ut})},1551:(En,ot,xe)=>{"use strict";xe.d(ot,{CZ:()=>z,D0:()=>De,DJ:()=>je,DZ:()=>f,P3:()=>ut,RN:()=>yt,SH:()=>st,Y2:()=>Se,aF:()=>he,c$:()=>Xe,fY:()=>fe,jt:()=>$,ok:()=>qe});var le=xe(9535);function st(Q){return"object"==typeof Q&&null!==Q&&"subject"in Q}function qe(Q){return"object"==typeof Q&&null!==Q&&"statements"in Q}function ut(Q){return De(Q)&&Q.termType===le.r0}function je(Q){return Q&&Object.prototype.hasOwnProperty.call(Q,"termType")&&(Q.termType===le.Kk||Q.termType===le.P2||Q.termType===le.$Q||Q.termType===le.r0||Q.termType===le.QW||Q.termType===le.bD)}function z(Q){return Q&&Object.prototype.hasOwnProperty.call(Q,"termType")&&(Q.termType===le.Kk||Q.termType===le.P2||Q.termType===le.$Q||Q.termType===le.r0||Q.termType===le.QW||Q.termType===le.bD)}function fe(Q){return De(Q)&&(Q.termType===le.Kk||Q.termType===le.$Q||Q.termType===le.P2)}function f(Q){return De(Q)&&Q.termType===le.P2}function De(Q){return"object"==typeof Q&&null!==Q&&"termType"in Q}function Xe(Q){return Q.termType===le.QW}function he(Q){return"object"==typeof Q&&null!==Q&&"subject"in Q&&"predicate"in Q&&"object"in Q}function Se(Q){return De(Q)&&"NamedNode"===Q.termType}function $(Q){return De(Q)&&"termType"in Q&&"BlankNode"===Q.termType}function yt(Q){return De(Q)&&(Q.termType===le.Kk||Q.termType===le.P2||Q.termType===le.$Q||Q.termType===le.ic)}},1752:(En,ot,xe)=>{"use strict";xe.d(ot,{A:()=>fe});var le=xe(1423),st=xe(9423),qe=xe(9788),ut=xe(9535),je=xe(79),z=xe(1551);class fe extends qe.A{constructor(De){if(super((0,je.E)(De)),(0,le.A)(this,"termType",ut.Kk),(0,le.A)(this,"classOrder",st.A.NamedNode),!this.value)throw new Error("Missing IRI for NamedNode");if(!this.value.includes(":"))throw new Error('NamedNode IRI "'+De+'" must be absolute.');if(this.value.includes(" "))throw new Error('Error: NamedNode IRI "'+De+'" must not contain unencoded spaces.')}dir(){var De=this.value.split("#")[0],Xe=De.slice(0,-1).lastIndexOf("/"),he=De.indexOf("//");return he>=0&&Xe<he+2||Xe<0?null:new fe(De.slice(0,Xe+1))}site(){var De=this.value.split("#")[0],Xe=De.indexOf("//");if(Xe<0)throw new Error("This URI does not have a web site part (origin)");var he=De.indexOf("/",Xe+2);return new fe(he<0?De.slice(0)+"/":De.slice(0,he+1))}doc(){return this.value.indexOf("#")<0?this:new fe(this.value.split("#")[0])}toString(){return"<"+this.value+">"}id(){return this.value.split("#")[1]}get uri(){return this.value}set uri(De){this.value=De}static fromValue(De){return typeof De>"u"||null===De||(0,z.D0)(De)?De:new fe(De)}}},2018:(En,ot,xe)=>{"use strict";xe.d(ot,{A:()=>je});const qe={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},je=class ut{constructor(fe){this.code_=fe.code,this.units_=fe.units,this.extent_=void 0!==fe.extent?fe.extent:null,this.worldExtent_=void 0!==fe.worldExtent?fe.worldExtent:null,this.axisOrientation_=void 0!==fe.axisOrientation?fe.axisOrientation:"enu",this.global_=void 0!==fe.global&&fe.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=fe.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=fe.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||qe[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(fe){this.global_=fe,this.canWrapX_=!(!fe||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(fe){this.defaultTileGrid_=fe}setExtent(fe){this.extent_=fe,this.canWrapX_=!(!this.global_||!fe)}setWorldExtent(fe){this.worldExtent_=fe}setGetPointResolution(fe){this.getPointResolutionFunc_=fe}getPointResolutionFunc(){return this.getPointResolutionFunc_}}},2058:(En,ot,xe)=>{"use strict";function le(he,Se,$){let q,oe;$=$||st;let be=0,yt=he.length,Q=!1;for(;be<yt;)q=be+(yt-be>>1),oe=+$(he[q],Se),oe<0?be=q+1:(yt=q,Q=!oe);return Q?be:~be}function st(he,Se){return he>Se?1:he<Se?-1:0}function ut(he,Se,$){if(he[0]<=Se)return 0;const q=he.length;if(Se<=he[q-1])return q-1;if("function"==typeof $){for(let oe=1;oe<q;++oe){const be=he[oe];if(be===Se)return oe;if(be<Se)return $(Se,he[oe-1],be)>0?oe-1:oe}return q-1}if($>0){for(let oe=1;oe<q;++oe)if(he[oe]<Se)return oe-1;return q-1}if($<0){for(let oe=1;oe<q;++oe)if(he[oe]<=Se)return oe;return q-1}for(let oe=1;oe<q;++oe){if(he[oe]==Se)return oe;if(he[oe]<Se)return he[oe-1]-Se<Se-he[oe]?oe-1:oe}return q-1}function z(he,Se){const $=Array.isArray(Se)?Se:[Se],q=$.length;for(let oe=0;oe<q;oe++)he[he.length]=$[oe]}function f(he,Se){const $=he.length;if($!==Se.length)return!1;for(let q=0;q<$;q++)if(he[q]!==Se[q])return!1;return!0}function Xe(he,Se,$){const q=Se||st;return he.every(function(oe,be){if(0===be)return!0;const yt=q(he[be-1],oe);return!(yt>0||$&&0===yt)})}xe.d(ot,{El:()=>le,FT:()=>ut,V_:()=>st,WC:()=>Xe,X$:()=>z,aI:()=>f})},2502:(En,ot,xe)=>{xe(8486);ot.DOMParser=xe(7044).DOMParser},2834:(En,ot)=>{"use strict";function le(je,z){return void 0===z&&(z=Object),z&&"function"==typeof z.freeze?z.freeze(je):je}var qe=le({HTML:"text/html",isHTML:function(je){return je===qe.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),ut=le({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(je){return je===ut.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ot.assign=function st(je,z){if(null===je||"object"!=typeof je)throw new TypeError("target is not an object");for(var fe in z)Object.prototype.hasOwnProperty.call(z,fe)&&(je[fe]=z[fe]);return je},ot.find=function xe(je,z,fe){if(void 0===fe&&(fe=Array.prototype),je&&"function"==typeof fe.find)return fe.find.call(je,z);for(var f=0;f<je.length;f++)if(Object.prototype.hasOwnProperty.call(je,f)){var De=je[f];if(z.call(void 0,De,f,je))return De}},ot.freeze=le,ot.MIME_TYPE=qe,ot.NAMESPACE=ut},3308:(En,ot,xe)=>{"use strict";function le(qe,ut,je,z,fe,f,De){try{var Xe=qe[f](De),he=Xe.value}catch(Se){return void je(Se)}Xe.done?ut(he):Promise.resolve(he).then(z,fe)}function st(qe){return function(){var ut=this,je=arguments;return new Promise(function(z,fe){var f=qe.apply(ut,je);function De(he){le(f,z,fe,De,Xe,"next",he)}function Xe(he){le(f,z,fe,De,Xe,"throw",he)}De(void 0)})}}xe.d(ot,{A:()=>st})},3450:(En,ot)=>{"use strict";ot.byteLength=function fe($){var q=z($),be=q[1];return 3*(q[0]+be)/4-be},ot.toByteArray=function De($){var q,Ee,oe=z($),be=oe[0],yt=oe[1],Q=new st(function f($,q,oe){return 3*(q+oe)/4-oe}(0,be,yt)),we=0,ye=yt>0?be-4:be;for(Ee=0;Ee<ye;Ee+=4)q=le[$.charCodeAt(Ee)]<<18|le[$.charCodeAt(Ee+1)]<<12|le[$.charCodeAt(Ee+2)]<<6|le[$.charCodeAt(Ee+3)],Q[we++]=q>>16&255,Q[we++]=q>>8&255,Q[we++]=255&q;return 2===yt&&(q=le[$.charCodeAt(Ee)]<<2|le[$.charCodeAt(Ee+1)]>>4,Q[we++]=255&q),1===yt&&(q=le[$.charCodeAt(Ee)]<<10|le[$.charCodeAt(Ee+1)]<<4|le[$.charCodeAt(Ee+2)]>>2,Q[we++]=q>>8&255,Q[we++]=255&q),Q},ot.fromByteArray=function Se($){for(var q,oe=$.length,be=oe%3,yt=[],Q=16383,we=0,ye=oe-be;we<ye;we+=Q)yt.push(he($,we,we+Q>ye?ye:we+Q));return 1===be?yt.push(xe[(q=$[oe-1])>>2]+xe[q<<4&63]+"=="):2===be&&yt.push(xe[(q=($[oe-2]<<8)+$[oe-1])>>10]+xe[q>>4&63]+xe[q<<2&63]+"="),yt.join("")};for(var xe=[],le=[],st=typeof Uint8Array<"u"?Uint8Array:Array,qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ut=0;ut<64;++ut)xe[ut]=qe[ut],le[qe.charCodeAt(ut)]=ut;function z($){var q=$.length;if(q%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var oe=$.indexOf("=");return-1===oe&&(oe=q),[oe,oe===q?0:4-oe%4]}function Xe($){return xe[$>>18&63]+xe[$>>12&63]+xe[$>>6&63]+xe[63&$]}function he($,q,oe){for(var yt=[],Q=q;Q<oe;Q+=3)yt.push(Xe(($[Q]<<16&16711680)+($[Q+1]<<8&65280)+(255&$[Q+2])));return yt.join("")}le[45]=62,le[95]=63},3467:(En,ot,xe)=>{"use strict";xe.d(ot,{NW:()=>Vi,Ld:()=>z,ms:()=>f,Rj:()=>De,S5:()=>he,N:()=>Se,aZ:()=>$,dP:()=>q,Vy:()=>be,X$:()=>ye,R8:()=>xt,sB:()=>Be,q1:()=>te,Oq:()=>P,Py:()=>sn,RG:()=>fn,HY:()=>jr,Mx:()=>Ss,$u:()=>Fn});const le={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function z(k,ce,Re){let St,cn;return St=ce<k[0]?k[0]-ce:k[2]<ce?ce-k[2]:0,cn=Re<k[1]?k[1]-Re:k[3]<Re?Re-k[3]:0,St*St+cn*cn}function f(k,ce){return k[0]<=ce[0]&&ce[2]<=k[2]&&k[1]<=ce[1]&&ce[3]<=k[3]}function De(k,ce,Re){return k[0]<=ce&&ce<=k[2]&&k[1]<=Re&&Re<=k[3]}function Xe(k,ce){const er=ce[0],nn=ce[1];let Kt=le.UNKNOWN;return er<k[0]?Kt|=le.LEFT:er>k[2]&&(Kt|=le.RIGHT),nn<k[1]?Kt|=le.BELOW:nn>k[3]&&(Kt|=le.ABOVE),Kt===le.UNKNOWN&&(Kt=le.INTERSECTING),Kt}function he(){return[1/0,1/0,-1/0,-1/0]}function Se(k,ce,Re,St,cn){return cn?(cn[0]=k,cn[1]=ce,cn[2]=Re,cn[3]=St,cn):[k,ce,Re,St]}function $(k){return Se(1/0,1/0,-1/0,-1/0,k)}function q(k,ce){const Re=k[0],St=k[1];return Se(Re,St,Re,St,ce)}function be(k,ce,Re,St,cn){return xt($(cn),k,ce,Re,St)}function ye(k,ce){return ce[0]<k[0]&&(k[0]=ce[0]),ce[2]>k[2]&&(k[2]=ce[2]),ce[1]<k[1]&&(k[1]=ce[1]),ce[3]>k[3]&&(k[3]=ce[3]),k}function xt(k,ce,Re,St,cn){for(;Re<St;Re+=cn)Nt(k,ce[Re],ce[Re+1]);return k}function Nt(k,ce,Re){k[0]=Math.min(k[0],ce),k[1]=Math.min(k[1],Re),k[2]=Math.max(k[2],ce),k[3]=Math.max(k[3],Re)}function Be(k,ce){let Re;return Re=ce(function Ye(k){return[k[0],k[1]]}(k)),!!(Re||(Re=ce(function $t(k){return[k[2],k[1]]}(k)),Re)||(Re=ce(function jt(k){return[k[2],k[3]]}(k)),Re)||(Re=ce(sn(k)),Re))&&Re}function te(k){return[(k[0]+k[2])/2,(k[1]+k[3])/2]}function P(k){return k[3]-k[1]}function sn(k){return[k[0],k[3]]}function fn(k){return k[2]-k[0]}function jr(k,ce){return k[0]<=ce[2]&&k[2]>=ce[0]&&k[1]<=ce[3]&&k[3]>=ce[1]}function Fn(k,ce){return ce?(ce[0]=k[0],ce[1]=k[1],ce[2]=k[2],ce[3]=k[3],ce):k}function Ss(k,ce,Re){let St=!1;const cn=Xe(k,ce),Jt=Xe(k,Re);if(cn===le.INTERSECTING||Jt===le.INTERSECTING)St=!0;else{const er=k[0],nn=k[1],Kt=k[2],gn=k[3],hs=Re[0],R=Re[1],b=(R-ce[1])/(hs-ce[0]);let x,O;Jt&le.ABOVE&&!(cn&le.ABOVE)&&(x=hs-(R-gn)/b,St=x>=er&&x<=Kt),!St&&Jt&le.RIGHT&&!(cn&le.RIGHT)&&(O=R-(hs-Kt)*b,St=O>=nn&&O<=gn),!St&&Jt&le.BELOW&&!(cn&le.BELOW)&&(x=hs-(R-nn)/b,St=x>=er&&x<=Kt),!St&&Jt&le.LEFT&&!(cn&le.LEFT)&&(O=R-(hs-er)*b,St=O>=nn&&O<=gn)}return St}function Vi(k,ce,Re,St){if(function _s(k){return k[2]<k[0]||k[3]<k[1]}(k))return $(Re);let cn=[];if(St>1){const nn=k[2]-k[0],Kt=k[3]-k[1];for(let gn=0;gn<St;++gn)cn.push(k[0]+nn*gn/St,k[1],k[2],k[1]+Kt*gn/St,k[2]-nn*gn/St,k[3],k[0],k[3]-Kt*gn/St)}else cn=[k[0],k[1],k[2],k[1],k[2],k[3],k[0],k[3]];ce(cn,cn,2);const Jt=[],er=[];for(let nn=0,Kt=cn.length;nn<Kt;nn+=2)Jt.push(cn[nn]),er.push(cn[nn+1]);return function qe(k,ce,Re){return Se(Math.min.apply(null,k),Math.min.apply(null,ce),Math.max.apply(null,k),Math.max.apply(null,ce),Re)}(Jt,er,Re)}},3742:(En,ot,xe)=>{var le=xe(2834).NAMESPACE,st=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,qe=new RegExp("[\\-\\.0-9"+st.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ut=new RegExp("^"+st.source+qe.source+"*(?::"+st.source+qe.source+"*)?$");function $(Be,Ze){this.message=Be,this.locator=Ze,Error.captureStackTrace&&Error.captureStackTrace(this,$)}function q(){}function be(Be,Ze){return Ze.lineNumber=Be.lineNumber,Ze.columnNumber=Be.columnNumber,Ze}function yt(Be,Ze,Ye,$t,te,Ne){function vt(et,sn,jt){Ye.attributeNames.hasOwnProperty(et)&&Ne.fatalError("Attribute "+et+" redefined"),Ye.addValue(et,sn.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,te),jt)}for(var kt,P=++Ze,U=0;;){var Ve=Be.charAt(P);switch(Ve){case"=":if(1===U)kt=Be.slice(Ze,P),U=3;else{if(2!==U)throw new Error("attribute equal must after attrName");U=3}break;case"'":case'"':if(3===U||1===U){if(1===U&&(Ne.warning('attribute value must after "="'),kt=Be.slice(Ze,P)),!((P=Be.indexOf(Ve,Ze=P+1))>0))throw new Error("attribute value no end '"+Ve+"' match");vt(kt,Ft=Be.slice(Ze,P),Ze-1),U=5}else{if(4!=U)throw new Error('attribute value must after "="');vt(kt,Ft=Be.slice(Ze,P),Ze),Ne.warning('attribute "'+kt+'" missed start quot('+Ve+")!!"),Ze=P+1,U=5}break;case"/":switch(U){case 0:Ye.setTagName(Be.slice(Ze,P));case 5:case 6:case 7:U=7,Ye.closed=!0;case 4:case 1:break;case 2:Ye.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return Ne.error("unexpected end of input"),0==U&&Ye.setTagName(Be.slice(Ze,P)),P;case">":switch(U){case 0:Ye.setTagName(Be.slice(Ze,P));case 5:case 6:case 7:break;case 4:case 1:"/"===(Ft=Be.slice(Ze,P)).slice(-1)&&(Ye.closed=!0,Ft=Ft.slice(0,-1));case 2:2===U&&(Ft=kt),4==U?(Ne.warning('attribute "'+Ft+'" missed quot(")!'),vt(kt,Ft,Ze)):((!le.isHTML($t[""])||!Ft.match(/^(?:disabled|checked|selected)$/i))&&Ne.warning('attribute "'+Ft+'" missed value!! "'+Ft+'" instead!!'),vt(Ft,Ft,Ze));break;case 3:throw new Error("attribute value missed!!")}return P;case"\x80":Ve=" ";default:if(Ve<=" ")switch(U){case 0:Ye.setTagName(Be.slice(Ze,P)),U=6;break;case 1:kt=Be.slice(Ze,P),U=2;break;case 4:var Ft=Be.slice(Ze,P);Ne.warning('attribute "'+Ft+'" missed quot(")!!'),vt(kt,Ft,Ze);case 5:U=6}else switch(U){case 2:(!le.isHTML($t[""])||!kt.match(/^(?:disabled|checked|selected)$/i))&&Ne.warning('attribute "'+kt+'" missed value!! "'+kt+'" instead2!!'),vt(kt,kt,Ze),Ze=P,U=1;break;case 5:Ne.warning('attribute space is required"'+kt+'"!!');case 6:U=1,Ze=P;break;case 3:U=4,Ze=P;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}P++}}function Q(Be,Ze,Ye){for(var $t=Be.tagName,te=null,Ve=Be.length;Ve--;){var Ne=Be[Ve],vt=Ne.qName,kt=Ne.value;if((Je=vt.indexOf(":"))>0)var Ft=Ne.prefix=vt.slice(0,Je),P=vt.slice(Je+1),U="xmlns"===Ft&&P;else P=vt,Ft=null,U="xmlns"===vt&&"";Ne.localName=P,!1!==U&&(null==te&&(te={},Ee(Ye,Ye={})),Ye[U]=te[U]=kt,Ne.uri=le.XMLNS,Ze.startPrefixMapping(U,kt))}for(Ve=Be.length;Ve--;)(Ft=(Ne=Be[Ve]).prefix)&&("xml"===Ft&&(Ne.uri=le.XML),"xmlns"!==Ft&&(Ne.uri=Ye[Ft||""]));var Je;(Je=$t.indexOf(":"))>0?(Ft=Be.prefix=$t.slice(0,Je),P=Be.localName=$t.slice(Je+1)):(Ft=null,P=Be.localName=$t);var et=Be.uri=Ye[Ft||""];if(Ze.startElement(et,P,$t,Be),!Be.closed)return Be.currentNSMap=Ye,Be.localNSMap=te,!0;if(Ze.endElement(et,P,$t),te)for(Ft in te)Object.prototype.hasOwnProperty.call(te,Ft)&&Ze.endPrefixMapping(Ft)}function we(Be,Ze,Ye,$t,te){if(/^(?:script|textarea)$/i.test(Ye)){var Ne=Be.indexOf("</"+Ye+">",Ze),vt=Be.substring(Ze+1,Ne);if(/[&<]/.test(vt))return/^script$/i.test(Ye)?(te.characters(vt,0,vt.length),Ne):(vt=vt.replace(/&#?\w+;/g,$t),te.characters(vt,0,vt.length),Ne)}return Ze+1}function ye(Be,Ze,Ye,$t){var te=$t[Ye];return null==te&&((te=Be.lastIndexOf("</"+Ye+">"))<Ze&&(te=Be.lastIndexOf("</"+Ye)),$t[Ye]=te),te<Ze}function Ee(Be,Ze){for(var Ye in Be)Object.prototype.hasOwnProperty.call(Be,Ye)&&(Ze[Ye]=Be[Ye])}function tt(Be,Ze,Ye,$t){if("-"===Be.charAt(Ze+2))return"-"===Be.charAt(Ze+3)?(Ne=Be.indexOf("--\x3e",Ze+4))>Ze?(Ye.comment(Be,Ze+4,Ne-Ze-4),Ne+3):($t.error("Unclosed comment"),-1):-1;if("CDATA["==Be.substr(Ze+3,6)){var Ne=Be.indexOf("]]>",Ze+9);return Ye.startCDATA(),Ye.characters(Be,Ze+9,Ne-Ze-9),Ye.endCDATA(),Ne+3}var vt=function Nt(Be,Ze){var Ye,$t=[],te=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(te.lastIndex=Ze,te.exec(Be);Ye=te.exec(Be);)if($t.push(Ye),Ye[1])return $t}(Be,Ze),kt=vt.length;if(kt>1&&/!doctype/i.test(vt[0][0])){var Ft=vt[1][0],P=!1,U=!1;kt>3&&(/^public$/i.test(vt[2][0])?(P=vt[3][0],U=kt>4&&vt[4][0]):/^system$/i.test(vt[2][0])&&(U=vt[3][0]));var Ve=vt[kt-1];return Ye.startDTD(Ft,P,U),Ye.endDTD(),Ve.index+Ve[0].length}return-1}function xt(Be,Ze,Ye){var $t=Be.indexOf("?>",Ze);if($t){var te=Be.substring(Ze,$t).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return te?(Ye.processingInstruction(te[1],te[2]),$t+2):-1}return-1}function mt(){this.attributeNames={}}($.prototype=new Error).name=$.name,q.prototype={parse:function(Be,Ze,Ye){var $t=this.domBuilder;$t.startDocument(),Ee(Ze,Ze={}),function oe(Be,Ze,Ye,$t,te){function vt(nn){var Kt=nn.slice(1,-1);return Object.hasOwnProperty.call(Ye,Kt)?Ye[Kt]:"#"===Kt.charAt(0)?function Ne(nn){return nn>65535?(nn-=65536,String.fromCharCode(55296+(nn>>10),56320+(1023&nn))):String.fromCharCode(nn)}(parseInt(Kt.substr(1).replace("x","0x"))):(te.error("entity not found:"+nn),nn)}function kt(nn){if(nn>jt){var Kt=Be.substring(jt,nn).replace(/&#?\w+;/g,vt);Je&&Ft(jt),$t.characters(Kt,0,nn-jt),jt=nn}}function Ft(nn,Kt){for(;nn>=U&&(Kt=Ve.exec(Be));)U=(P=Kt.index)+Kt[0].length,Je.lineNumber++;Je.columnNumber=nn-P+1}for(var P=0,U=0,Ve=/.*(?:\r\n?|\n)|.*$/g,Je=$t.locator,et=[{currentNSMap:Ze}],sn={},jt=0;;){try{var fn=Be.indexOf("<",jt);if(fn<0){if(!Be.substr(jt).match(/^\s*$/)){var jr=$t.doc,_s=jr.createTextNode(Be.substr(jt));jr.appendChild(_s),$t.currentElement=_s}return}switch(fn>jt&&kt(fn),Be.charAt(fn+1)){case"/":var Re=Be.indexOf(">",fn+3),Fn=Be.substring(fn+2,Re).replace(/[ \t\n\r]+$/g,""),xs=et.pop();Re<0?(Fn=Be.substring(fn+2).replace(/[\s<].*/,""),te.error("end tag name: "+Fn+" is not complete:"+xs.tagName),Re=fn+1+Fn.length):Fn.match(/\s</)&&(Fn=Fn.replace(/[\s<].*/,""),te.error("end tag name: "+Fn+" maybe not complete"),Re=fn+1+Fn.length);var Ss=xs.localNSMap,Vi=xs.tagName==Fn;if(Vi||xs.tagName&&xs.tagName.toLowerCase()==Fn.toLowerCase()){if($t.endElement(xs.uri,xs.localName,Fn),Ss)for(var zn in Ss)Object.prototype.hasOwnProperty.call(Ss,zn)&&$t.endPrefixMapping(zn);Vi||te.fatalError("end tag name: "+Fn+" is not match the current start tagName:"+xs.tagName)}else et.push(xs);Re++;break;case"?":Je&&Ft(fn),Re=xt(Be,fn,$t);break;case"!":Je&&Ft(fn),Re=tt(Be,fn,$t,te);break;default:Je&&Ft(fn);var k=new mt,ce=et[et.length-1].currentNSMap,St=(Re=yt(Be,fn,k,ce,vt,te),k.length);if(!k.closed&&ye(Be,Re,k.tagName,sn)&&(k.closed=!0,Ye.nbsp||te.warning("unclosed xml attribute")),Je&&St){for(var cn=be(Je,{}),Jt=0;Jt<St;Jt++){var er=k[Jt];Ft(er.offset),er.locator=be(Je,{})}$t.locator=cn,Q(k,$t,ce)&&et.push(k),$t.locator=Je}else Q(k,$t,ce)&&et.push(k);le.isHTML(k.uri)&&!k.closed?Re=we(Be,Re,k.tagName,vt,$t):Re++}}catch(nn){if(nn instanceof $)throw nn;te.error("element parse error: "+nn),Re=-1}Re>jt?jt=Re:kt(Math.max(fn,jt)+1)}}(Be,Ze,Ye,$t,this.errorHandler),$t.endDocument()}},mt.prototype={setTagName:function(Be){if(!ut.test(Be))throw new Error("invalid tagName:"+Be);this.tagName=Be},addValue:function(Be,Ze,Ye){if(!ut.test(Be))throw new Error("invalid attribute:"+Be);this.attributeNames[Be]=this.length,this[this.length++]={qName:Be,value:Ze,offset:Ye}},length:0,getLocalName:function(Be){return this[Be].localName},getLocator:function(Be){return this[Be].locator},getQName:function(Be){return this[Be].qName},getURI:function(Be){return this[Be].uri},getValue:function(Be){return this[Be].value}},ot.XMLReader=q,ot.ParseError=$},3846:(En,ot,xe)=>{"use strict";function le(st,qe,ut,je,z){let fe;for(qe+=je;qe<ut;qe+=je)if(fe=z(st.slice(qe-je,qe),st.slice(qe,qe+je)),fe)return fe;return!1}xe.d(ot,{j:()=>le})},4238:(En,ot,xe)=>{"use strict";xe.d(ot,{Jt:()=>je,WQ:()=>qe});let le={};function qe(z,fe,f){const De=z.getCode(),Xe=fe.getCode();De in le||(le[De]={}),le[De][Xe]=f}function je(z,fe){let f;return z in le&&fe in le[z]&&(f=le[z][fe]),f}},4416:En=>{let ot;En.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):xe=>(ot||(ot=Promise.resolve())).then(xe).catch(le=>setTimeout(()=>{throw le},0))},5940:(En,ot,xe)=>{"use strict";function le(st,qe){if(!st)throw new Error(qe)}xe.d(ot,{v:()=>le})},6016:(En,ot,xe)=>{"use strict";xe.d(ot,{hB:()=>ce,O3:()=>Ss,bF:()=>jr,wU:()=>Kn,tI:()=>cn,Jt:()=>Fn,RG:()=>er,DI:()=>Kt});var le=xe(2018);const st=6378137,qe=Math.PI*st,ut=[-qe,-qe,qe,qe],je=[-180,-85,180,85],z=st*Math.log(Math.tan(Math.PI/2));class fe extends le.A{constructor(pe){super({code:pe,units:"m",extent:ut,global:!0,worldExtent:je,getPointResolution:function(Qe,lt){return Qe/Math.cosh(lt[1]/st)}})}}const f=[new fe("EPSG:3857"),new fe("EPSG:102100"),new fe("EPSG:102113"),new fe("EPSG:900913"),new fe("http://www.opengis.net/def/crs/EPSG/0/3857"),new fe("http://www.opengis.net/gml/srs/epsg.xml#3857")];function De(ee,pe,Qe){const lt=ee.length;Qe=Qe>1?Qe:2,void 0===pe&&(pe=Qe>2?ee.slice():new Array(lt));for(let tn=0;tn<lt;tn+=Qe){pe[tn]=qe*ee[tn]/180;let Cn=st*Math.log(Math.tan(Math.PI*(+ee[tn+1]+90)/360));Cn>z?Cn=z:Cn<-z&&(Cn=-z),pe[tn+1]=Cn}return pe}function Xe(ee,pe,Qe){const lt=ee.length;Qe=Qe>1?Qe:2,void 0===pe&&(pe=Qe>2?ee.slice():new Array(lt));for(let tn=0;tn<lt;tn+=Qe)pe[tn]=180*ee[tn]/qe,pe[tn+1]=360*Math.atan(Math.exp(ee[tn+1]/st))/Math.PI-90;return pe}const Se=[-180,-90,180,90],$=6378137*Math.PI/180;class q extends le.A{constructor(pe,Qe){super({code:pe,units:"degrees",extent:Se,axisOrientation:Qe,global:!0,metersPerUnit:$,worldExtent:Se})}}const oe=[new q("CRS:84"),new q("EPSG:4326","neu"),new q("urn:ogc:def:crs:OGC:1.3:CRS84"),new q("urn:ogc:def:crs:OGC:2:84"),new q("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new q("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new q("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let be={};var ye=xe(4238),Ee=xe(3467),tt=xe(9973);function jt(ee,pe){if(void 0!==pe)for(let Qe=0,lt=ee.length;Qe<lt;++Qe)pe[Qe]=ee[Qe];else pe=ee.slice();return pe}function fn(ee,pe){if(void 0!==pe&&ee!==pe){for(let Qe=0,lt=ee.length;Qe<lt;++Qe)pe[Qe]=ee[Qe];ee=pe}return ee}function jr(ee){(function we(ee,pe){be[ee]=pe})(ee.getCode(),ee),(0,ye.WQ)(ee,ee,jt)}function Fn(ee){return"string"==typeof ee?function Q(ee){return be[ee]||be[ee.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(ee):ee||null}function Ss(ee){(function _s(ee){ee.forEach(jr)})(ee),ee.forEach(function(pe){ee.forEach(function(Qe){pe!==Qe&&(0,ye.WQ)(pe,Qe,jt)})})}function k(ee){return function(pe,Qe,lt){const tn=pe.length;lt=void 0!==lt?lt:2,Qe=void 0!==Qe?Qe:new Array(tn);for(let Cn=0;Cn<tn;Cn+=lt){const rr=ee(pe.slice(Cn,Cn+lt)),Gr=rr.length;for(let dr=0,zr=lt;dr<zr;++dr)Qe[Cn+dr]=dr>=Gr?pe[Cn+dr]:rr[dr]}return Qe}}function ce(ee,pe,Qe,lt){const tn=Fn(ee),Cn=Fn(pe);(0,ye.WQ)(tn,Cn,k(Qe)),(0,ye.WQ)(Cn,tn,k(lt))}function cn(ee,pe){if(ee===pe)return!0;const Qe=ee.getUnits()===pe.getUnits();return(ee.getCode()===pe.getCode()||Jt(ee,pe)===jt)&&Qe}function Jt(ee,pe){const Qe=ee.getCode(),lt=pe.getCode();let tn=(0,ye.Jt)(Qe,lt);return tn||(tn=fn),tn}function er(ee,pe){return Jt(Fn(ee),Fn(pe))}function Kt(ee,pe,Qe,lt){const tn=er(pe,Qe);return(0,Ee.NW)(ee,tn,void 0,lt)}function Kn(ee,pe,Qe){return function(lt){let tn,Cn;if(ee.canWrapX()){const rr=ee.getExtent(),Gr=(0,Ee.RG)(rr);Cn=function Je(ee,pe,Qe){const lt=pe.getExtent();let tn=0;return pe.canWrapX()&&(ee[0]<lt[0]||ee[0]>lt[2])&&(Qe=Qe||(0,Ee.RG)(lt),tn=Math.floor((ee[0]-lt[0])/Qe)),tn}(lt=lt.slice(0),ee,Gr),Cn&&(lt[0]=lt[0]-Cn*Gr),lt[0]=(0,tt.qE)(lt[0],rr[0],rr[2]),lt[1]=(0,tt.qE)(lt[1],rr[1],rr[3]),tn=Qe(lt)}else tn=Qe(lt);return Cn&&pe.canWrapX()&&(tn[0]+=Cn*(0,Ee.RG)(pe.getExtent())),tn}}!function or(){Ss(f),Ss(oe),function Vi(ee,pe,Qe,lt){ee.forEach(function(tn){pe.forEach(function(Cn){(0,ye.WQ)(tn,Cn,Qe),(0,ye.WQ)(Cn,tn,lt)})})}(oe,f,De,Xe)}()},6148:(En,ot,xe)=>{"use strict";const st=xe(3450),qe=xe(351),ut="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;ot.hp=f,ot.IS=50;const je=2147483647;function fe(R){if(R>je)throw new RangeError('The value "'+R+'" is invalid for option "size"');const b=new Uint8Array(R);return Object.setPrototypeOf(b,f.prototype),b}function f(R,b,x){if("number"==typeof R){if("string"==typeof b)throw new TypeError('The "string" argument must be of type string. Received type number');return Se(R)}return De(R,b,x)}function De(R,b,x){if("string"==typeof R)return function $(R,b){if(("string"!=typeof b||""===b)&&(b="utf8"),!f.isEncoding(b))throw new TypeError("Unknown encoding: "+b);const x=0|ye(R,b);let O=fe(x);const ne=O.write(R,b);return ne!==x&&(O=O.slice(0,ne)),O}(R,b);if(ArrayBuffer.isView(R))return function oe(R){if(Kt(R,Uint8Array)){const b=new Uint8Array(R);return be(b.buffer,b.byteOffset,b.byteLength)}return q(R)}(R);if(null==R)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R);if(Kt(R,ArrayBuffer)||R&&Kt(R.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Kt(R,SharedArrayBuffer)||R&&Kt(R.buffer,SharedArrayBuffer)))return be(R,b,x);if("number"==typeof R)throw new TypeError('The "value" argument must not be of type number. Received type number');const O=R.valueOf&&R.valueOf();if(null!=O&&O!==R)return f.from(O,b,x);const ne=function yt(R){if(f.isBuffer(R)){const b=0|Q(R.length),x=fe(b);return 0===x.length||R.copy(x,0,0,b),x}return void 0!==R.length?"number"!=typeof R.length||gn(R.length)?fe(0):q(R):"Buffer"===R.type&&Array.isArray(R.data)?q(R.data):void 0}(R);if(ne)return ne;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof R[Symbol.toPrimitive])return f.from(R[Symbol.toPrimitive]("string"),b,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof R)}function Xe(R){if("number"!=typeof R)throw new TypeError('"size" argument must be of type number');if(R<0)throw new RangeError('The value "'+R+'" is invalid for option "size"')}function Se(R){return Xe(R),fe(R<0?0:0|Q(R))}function q(R){const b=R.length<0?0:0|Q(R.length),x=fe(b);for(let O=0;O<b;O+=1)x[O]=255&R[O];return x}function be(R,b,x){if(b<0||R.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(R.byteLength<b+(x||0))throw new RangeError('"length" is outside of buffer bounds');let O;return O=void 0===b&&void 0===x?new Uint8Array(R):void 0===x?new Uint8Array(R,b):new Uint8Array(R,b,x),Object.setPrototypeOf(O,f.prototype),O}function Q(R){if(R>=je)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+je.toString(16)+" bytes");return 0|R}function ye(R,b){if(f.isBuffer(R))return R.length;if(ArrayBuffer.isView(R)||Kt(R,ArrayBuffer))return R.byteLength;if("string"!=typeof R)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof R);const x=R.length,O=arguments.length>2&&!0===arguments[2];if(!O&&0===x)return 0;let ne=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return St(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*x;case"hex":return x>>>1;case"base64":return er(R).length;default:if(ne)return O?-1:St(R).length;b=(""+b).toLowerCase(),ne=!0}}function Ee(R,b,x){let O=!1;if((void 0===b||b<0)&&(b=0),b>this.length||((void 0===x||x>this.length)&&(x=this.length),x<=0)||(x>>>=0)<=(b>>>=0))return"";for(R||(R="utf8");;)switch(R){case"hex":return U(this,b,x);case"utf8":case"utf-8":return Ne(this,b,x);case"ascii":return Ft(this,b,x);case"latin1":case"binary":return P(this,b,x);case"base64":return te(this,b,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ve(this,b,x);default:if(O)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),O=!0}}function tt(R,b,x){const O=R[b];R[b]=R[x],R[x]=O}function xt(R,b,x,O,ne){if(0===R.length)return-1;if("string"==typeof x?(O=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),gn(x=+x)&&(x=ne?0:R.length-1),x<0&&(x=R.length+x),x>=R.length){if(ne)return-1;x=R.length-1}else if(x<0){if(!ne)return-1;x=0}if("string"==typeof b&&(b=f.from(b,O)),f.isBuffer(b))return 0===b.length?-1:mt(R,b,x,O,ne);if("number"==typeof b)return b&=255,"function"==typeof Uint8Array.prototype.indexOf?ne?Uint8Array.prototype.indexOf.call(R,b,x):Uint8Array.prototype.lastIndexOf.call(R,b,x):mt(R,[b],x,O,ne);throw new TypeError("val must be string, number or Buffer")}function mt(R,b,x,O,ne){let or,_e=1,Oe=R.length,Yt=b.length;if(void 0!==O&&("ucs2"===(O=String(O).toLowerCase())||"ucs-2"===O||"utf16le"===O||"utf-16le"===O)){if(R.length<2||b.length<2)return-1;_e=2,Oe/=2,Yt/=2,x/=2}function Kn(ee,pe){return 1===_e?ee[pe]:ee.readUInt16BE(pe*_e)}if(ne){let ee=-1;for(or=x;or<Oe;or++)if(Kn(R,or)===Kn(b,-1===ee?0:or-ee)){if(-1===ee&&(ee=or),or-ee+1===Yt)return ee*_e}else-1!==ee&&(or-=or-ee),ee=-1}else for(x+Yt>Oe&&(x=Oe-Yt),or=x;or>=0;or--){let ee=!0;for(let pe=0;pe<Yt;pe++)if(Kn(R,or+pe)!==Kn(b,pe)){ee=!1;break}if(ee)return or}return-1}function Nt(R,b,x,O){x=Number(x)||0;const ne=R.length-x;O?(O=Number(O))>ne&&(O=ne):O=ne;const _e=b.length;let Oe;for(O>_e/2&&(O=_e/2),Oe=0;Oe<O;++Oe){const Yt=parseInt(b.substr(2*Oe,2),16);if(gn(Yt))return Oe;R[x+Oe]=Yt}return Oe}function Be(R,b,x,O){return nn(St(b,R.length-x),R,x,O)}function Ze(R,b,x,O){return nn(function cn(R){const b=[];for(let x=0;x<R.length;++x)b.push(255&R.charCodeAt(x));return b}(b),R,x,O)}function Ye(R,b,x,O){return nn(er(b),R,x,O)}function $t(R,b,x,O){return nn(function Jt(R,b){let x,O,ne;const _e=[];for(let Oe=0;Oe<R.length&&!((b-=2)<0);++Oe)x=R.charCodeAt(Oe),O=x>>8,ne=x%256,_e.push(ne),_e.push(O);return _e}(b,R.length-x),R,x,O)}function te(R,b,x){return st.fromByteArray(0===b&&x===R.length?R:R.slice(b,x))}function Ne(R,b,x){x=Math.min(R.length,x);const O=[];let ne=b;for(;ne<x;){const _e=R[ne];let Oe=null,Yt=_e>239?4:_e>223?3:_e>191?2:1;if(ne+Yt<=x){let Kn,or,ee,pe;switch(Yt){case 1:_e<128&&(Oe=_e);break;case 2:Kn=R[ne+1],128==(192&Kn)&&(pe=(31&_e)<<6|63&Kn,pe>127&&(Oe=pe));break;case 3:Kn=R[ne+1],or=R[ne+2],128==(192&Kn)&&128==(192&or)&&(pe=(15&_e)<<12|(63&Kn)<<6|63&or,pe>2047&&(pe<55296||pe>57343)&&(Oe=pe));break;case 4:Kn=R[ne+1],or=R[ne+2],ee=R[ne+3],128==(192&Kn)&&128==(192&or)&&128==(192&ee)&&(pe=(15&_e)<<18|(63&Kn)<<12|(63&or)<<6|63&ee,pe>65535&&pe<1114112&&(Oe=pe))}}null===Oe?(Oe=65533,Yt=1):Oe>65535&&(Oe-=65536,O.push(Oe>>>10&1023|55296),Oe=56320|1023&Oe),O.push(Oe),ne+=Yt}return function kt(R){const b=R.length;if(b<=vt)return String.fromCharCode.apply(String,R);let x="",O=0;for(;O<b;)x+=String.fromCharCode.apply(String,R.slice(O,O+=vt));return x}(O)}!(f.TYPED_ARRAY_SUPPORT=function z(){try{const R=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(R,b),42===R.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(R,b,x){return De(R,b,x)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(R,b,x){return function he(R,b,x){return Xe(R),R<=0?fe(R):void 0!==b?"string"==typeof x?fe(R).fill(b,x):fe(R).fill(b):fe(R)}(R,b,x)},f.allocUnsafe=function(R){return Se(R)},f.allocUnsafeSlow=function(R){return Se(R)},f.isBuffer=function(b){return null!=b&&!0===b._isBuffer&&b!==f.prototype},f.compare=function(b,x){if(Kt(b,Uint8Array)&&(b=f.from(b,b.offset,b.byteLength)),Kt(x,Uint8Array)&&(x=f.from(x,x.offset,x.byteLength)),!f.isBuffer(b)||!f.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===x)return 0;let O=b.length,ne=x.length;for(let _e=0,Oe=Math.min(O,ne);_e<Oe;++_e)if(b[_e]!==x[_e]){O=b[_e],ne=x[_e];break}return O<ne?-1:ne<O?1:0},f.isEncoding=function(b){switch(String(b).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(b,x){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return f.alloc(0);let O;if(void 0===x)for(x=0,O=0;O<b.length;++O)x+=b[O].length;const ne=f.allocUnsafe(x);let _e=0;for(O=0;O<b.length;++O){let Oe=b[O];if(Kt(Oe,Uint8Array))_e+Oe.length>ne.length?(f.isBuffer(Oe)||(Oe=f.from(Oe)),Oe.copy(ne,_e)):Uint8Array.prototype.set.call(ne,Oe,_e);else{if(!f.isBuffer(Oe))throw new TypeError('"list" argument must be an Array of Buffers');Oe.copy(ne,_e)}_e+=Oe.length}return ne},f.byteLength=ye,f.prototype._isBuffer=!0,f.prototype.swap16=function(){const b=this.length;if(b%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<b;x+=2)tt(this,x,x+1);return this},f.prototype.swap32=function(){const b=this.length;if(b%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<b;x+=4)tt(this,x,x+3),tt(this,x+1,x+2);return this},f.prototype.swap64=function(){const b=this.length;if(b%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<b;x+=8)tt(this,x,x+7),tt(this,x+1,x+6),tt(this,x+2,x+5),tt(this,x+3,x+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){const b=this.length;return 0===b?"":0===arguments.length?Ne(this,0,b):Ee.apply(this,arguments)},f.prototype.equals=function(b){if(!f.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===f.compare(this,b)},f.prototype.inspect=function(){let b="";const x=ot.IS;return b=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(b+=" ... "),"<Buffer "+b+">"},ut&&(f.prototype[ut]=f.prototype.inspect),f.prototype.compare=function(b,x,O,ne,_e){if(Kt(b,Uint8Array)&&(b=f.from(b,b.offset,b.byteLength)),!f.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);if(void 0===x&&(x=0),void 0===O&&(O=b?b.length:0),void 0===ne&&(ne=0),void 0===_e&&(_e=this.length),x<0||O>b.length||ne<0||_e>this.length)throw new RangeError("out of range index");if(ne>=_e&&x>=O)return 0;if(ne>=_e)return-1;if(x>=O)return 1;if(this===b)return 0;let Oe=(_e>>>=0)-(ne>>>=0),Yt=(O>>>=0)-(x>>>=0);const Kn=Math.min(Oe,Yt),or=this.slice(ne,_e),ee=b.slice(x,O);for(let pe=0;pe<Kn;++pe)if(or[pe]!==ee[pe]){Oe=or[pe],Yt=ee[pe];break}return Oe<Yt?-1:Yt<Oe?1:0},f.prototype.includes=function(b,x,O){return-1!==this.indexOf(b,x,O)},f.prototype.indexOf=function(b,x,O){return xt(this,b,x,O,!0)},f.prototype.lastIndexOf=function(b,x,O){return xt(this,b,x,O,!1)},f.prototype.write=function(b,x,O,ne){if(void 0===x)ne="utf8",O=this.length,x=0;else if(void 0===O&&"string"==typeof x)ne=x,O=this.length,x=0;else{if(!isFinite(x))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");x>>>=0,isFinite(O)?(O>>>=0,void 0===ne&&(ne="utf8")):(ne=O,O=void 0)}const _e=this.length-x;if((void 0===O||O>_e)&&(O=_e),b.length>0&&(O<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");ne||(ne="utf8");let Oe=!1;for(;;)switch(ne){case"hex":return Nt(this,b,x,O);case"utf8":case"utf-8":return Be(this,b,x,O);case"ascii":case"latin1":case"binary":return Ze(this,b,x,O);case"base64":return Ye(this,b,x,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $t(this,b,x,O);default:if(Oe)throw new TypeError("Unknown encoding: "+ne);ne=(""+ne).toLowerCase(),Oe=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const vt=4096;function Ft(R,b,x){let O="";x=Math.min(R.length,x);for(let ne=b;ne<x;++ne)O+=String.fromCharCode(127&R[ne]);return O}function P(R,b,x){let O="";x=Math.min(R.length,x);for(let ne=b;ne<x;++ne)O+=String.fromCharCode(R[ne]);return O}function U(R,b,x){const O=R.length;(!b||b<0)&&(b=0),(!x||x<0||x>O)&&(x=O);let ne="";for(let _e=b;_e<x;++_e)ne+=Tn[R[_e]];return ne}function Ve(R,b,x){const O=R.slice(b,x);let ne="";for(let _e=0;_e<O.length-1;_e+=2)ne+=String.fromCharCode(O[_e]+256*O[_e+1]);return ne}function Je(R,b,x){if(R%1!=0||R<0)throw new RangeError("offset is not uint");if(R+b>x)throw new RangeError("Trying to access beyond buffer length")}function et(R,b,x,O,ne,_e){if(!f.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>ne||b<_e)throw new RangeError('"value" argument is out of bounds');if(x+O>R.length)throw new RangeError("Index out of range")}function sn(R,b,x,O,ne){lo(b,O,ne,R,x,7);let _e=Number(b&BigInt(4294967295));R[x++]=_e,_e>>=8,R[x++]=_e,_e>>=8,R[x++]=_e,_e>>=8,R[x++]=_e;let Oe=Number(b>>BigInt(32)&BigInt(4294967295));return R[x++]=Oe,Oe>>=8,R[x++]=Oe,Oe>>=8,R[x++]=Oe,Oe>>=8,R[x++]=Oe,x}function jt(R,b,x,O,ne){lo(b,O,ne,R,x,7);let _e=Number(b&BigInt(4294967295));R[x+7]=_e,_e>>=8,R[x+6]=_e,_e>>=8,R[x+5]=_e,_e>>=8,R[x+4]=_e;let Oe=Number(b>>BigInt(32)&BigInt(4294967295));return R[x+3]=Oe,Oe>>=8,R[x+2]=Oe,Oe>>=8,R[x+1]=Oe,Oe>>=8,R[x]=Oe,x+8}function fn(R,b,x,O,ne,_e){if(x+O>R.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function jr(R,b,x,O,ne){return b=+b,x>>>=0,ne||fn(R,0,x,4),qe.write(R,b,x,O,23,4),x+4}function _s(R,b,x,O,ne){return b=+b,x>>>=0,ne||fn(R,0,x,8),qe.write(R,b,x,O,52,8),x+8}f.prototype.slice=function(b,x){const O=this.length;(b=~~b)<0?(b+=O)<0&&(b=0):b>O&&(b=O),(x=void 0===x?O:~~x)<0?(x+=O)<0&&(x=0):x>O&&(x=O),x<b&&(x=b);const ne=this.subarray(b,x);return Object.setPrototypeOf(ne,f.prototype),ne},f.prototype.readUintLE=f.prototype.readUIntLE=function(b,x,O){b>>>=0,x>>>=0,O||Je(b,x,this.length);let ne=this[b],_e=1,Oe=0;for(;++Oe<x&&(_e*=256);)ne+=this[b+Oe]*_e;return ne},f.prototype.readUintBE=f.prototype.readUIntBE=function(b,x,O){b>>>=0,x>>>=0,O||Je(b,x,this.length);let ne=this[b+--x],_e=1;for(;x>0&&(_e*=256);)ne+=this[b+--x]*_e;return ne},f.prototype.readUint8=f.prototype.readUInt8=function(b,x){return b>>>=0,x||Je(b,1,this.length),this[b]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(b,x){return b>>>=0,x||Je(b,2,this.length),this[b]|this[b+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(b,x){return b>>>=0,x||Je(b,2,this.length),this[b]<<8|this[b+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(b,x){return b>>>=0,x||Je(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(b,x){return b>>>=0,x||Je(b,4,this.length),16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])},f.prototype.readBigUInt64LE=Mr(function(b){zn(b>>>=0,"offset");const x=this[b],O=this[b+7];(void 0===x||void 0===O)&&k(b,this.length-8);const ne=x+256*this[++b]+65536*this[++b]+this[++b]*2**24,_e=this[++b]+256*this[++b]+65536*this[++b]+O*2**24;return BigInt(ne)+(BigInt(_e)<<BigInt(32))}),f.prototype.readBigUInt64BE=Mr(function(b){zn(b>>>=0,"offset");const x=this[b],O=this[b+7];(void 0===x||void 0===O)&&k(b,this.length-8);const ne=x*2**24+65536*this[++b]+256*this[++b]+this[++b],_e=this[++b]*2**24+65536*this[++b]+256*this[++b]+O;return(BigInt(ne)<<BigInt(32))+BigInt(_e)}),f.prototype.readIntLE=function(b,x,O){b>>>=0,x>>>=0,O||Je(b,x,this.length);let ne=this[b],_e=1,Oe=0;for(;++Oe<x&&(_e*=256);)ne+=this[b+Oe]*_e;return _e*=128,ne>=_e&&(ne-=Math.pow(2,8*x)),ne},f.prototype.readIntBE=function(b,x,O){b>>>=0,x>>>=0,O||Je(b,x,this.length);let ne=x,_e=1,Oe=this[b+--ne];for(;ne>0&&(_e*=256);)Oe+=this[b+--ne]*_e;return _e*=128,Oe>=_e&&(Oe-=Math.pow(2,8*x)),Oe},f.prototype.readInt8=function(b,x){return b>>>=0,x||Je(b,1,this.length),128&this[b]?-1*(255-this[b]+1):this[b]},f.prototype.readInt16LE=function(b,x){b>>>=0,x||Je(b,2,this.length);const O=this[b]|this[b+1]<<8;return 32768&O?4294901760|O:O},f.prototype.readInt16BE=function(b,x){b>>>=0,x||Je(b,2,this.length);const O=this[b+1]|this[b]<<8;return 32768&O?4294901760|O:O},f.prototype.readInt32LE=function(b,x){return b>>>=0,x||Je(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24},f.prototype.readInt32BE=function(b,x){return b>>>=0,x||Je(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]},f.prototype.readBigInt64LE=Mr(function(b){zn(b>>>=0,"offset");const x=this[b],O=this[b+7];return(void 0===x||void 0===O)&&k(b,this.length-8),(BigInt(this[b+4]+256*this[b+5]+65536*this[b+6]+(O<<24))<<BigInt(32))+BigInt(x+256*this[++b]+65536*this[++b]+this[++b]*2**24)}),f.prototype.readBigInt64BE=Mr(function(b){zn(b>>>=0,"offset");const x=this[b],O=this[b+7];(void 0===x||void 0===O)&&k(b,this.length-8);const ne=(x<<24)+65536*this[++b]+256*this[++b]+this[++b];return(BigInt(ne)<<BigInt(32))+BigInt(this[++b]*2**24+65536*this[++b]+256*this[++b]+O)}),f.prototype.readFloatLE=function(b,x){return b>>>=0,x||Je(b,4,this.length),qe.read(this,b,!0,23,4)},f.prototype.readFloatBE=function(b,x){return b>>>=0,x||Je(b,4,this.length),qe.read(this,b,!1,23,4)},f.prototype.readDoubleLE=function(b,x){return b>>>=0,x||Je(b,8,this.length),qe.read(this,b,!0,52,8)},f.prototype.readDoubleBE=function(b,x){return b>>>=0,x||Je(b,8,this.length),qe.read(this,b,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(b,x,O,ne){b=+b,x>>>=0,O>>>=0,ne||et(this,b,x,O,Math.pow(2,8*O)-1,0);let _e=1,Oe=0;for(this[x]=255&b;++Oe<O&&(_e*=256);)this[x+Oe]=b/_e&255;return x+O},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(b,x,O,ne){b=+b,x>>>=0,O>>>=0,ne||et(this,b,x,O,Math.pow(2,8*O)-1,0);let _e=O-1,Oe=1;for(this[x+_e]=255&b;--_e>=0&&(Oe*=256);)this[x+_e]=b/Oe&255;return x+O},f.prototype.writeUint8=f.prototype.writeUInt8=function(b,x,O){return b=+b,x>>>=0,O||et(this,b,x,1,255,0),this[x]=255&b,x+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(b,x,O){return b=+b,x>>>=0,O||et(this,b,x,2,65535,0),this[x]=255&b,this[x+1]=b>>>8,x+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(b,x,O){return b=+b,x>>>=0,O||et(this,b,x,2,65535,0),this[x]=b>>>8,this[x+1]=255&b,x+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(b,x,O){return b=+b,x>>>=0,O||et(this,b,x,4,4294967295,0),this[x+3]=b>>>24,this[x+2]=b>>>16,this[x+1]=b>>>8,this[x]=255&b,x+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(b,x,O){return b=+b,x>>>=0,O||et(this,b,x,4,4294967295,0),this[x]=b>>>24,this[x+1]=b>>>16,this[x+2]=b>>>8,this[x+3]=255&b,x+4},f.prototype.writeBigUInt64LE=Mr(function(b,x=0){return sn(this,b,x,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=Mr(function(b,x=0){return jt(this,b,x,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(b,x,O,ne){if(b=+b,x>>>=0,!ne){const Kn=Math.pow(2,8*O-1);et(this,b,x,O,Kn-1,-Kn)}let _e=0,Oe=1,Yt=0;for(this[x]=255&b;++_e<O&&(Oe*=256);)b<0&&0===Yt&&0!==this[x+_e-1]&&(Yt=1),this[x+_e]=(b/Oe|0)-Yt&255;return x+O},f.prototype.writeIntBE=function(b,x,O,ne){if(b=+b,x>>>=0,!ne){const Kn=Math.pow(2,8*O-1);et(this,b,x,O,Kn-1,-Kn)}let _e=O-1,Oe=1,Yt=0;for(this[x+_e]=255&b;--_e>=0&&(Oe*=256);)b<0&&0===Yt&&0!==this[x+_e+1]&&(Yt=1),this[x+_e]=(b/Oe|0)-Yt&255;return x+O},f.prototype.writeInt8=function(b,x,O){return b=+b,x>>>=0,O||et(this,b,x,1,127,-128),b<0&&(b=255+b+1),this[x]=255&b,x+1},f.prototype.writeInt16LE=function(b,x,O){return b=+b,x>>>=0,O||et(this,b,x,2,32767,-32768),this[x]=255&b,this[x+1]=b>>>8,x+2},f.prototype.writeInt16BE=function(b,x,O){return b=+b,x>>>=0,O||et(this,b,x,2,32767,-32768),this[x]=b>>>8,this[x+1]=255&b,x+2},f.prototype.writeInt32LE=function(b,x,O){return b=+b,x>>>=0,O||et(this,b,x,4,2147483647,-2147483648),this[x]=255&b,this[x+1]=b>>>8,this[x+2]=b>>>16,this[x+3]=b>>>24,x+4},f.prototype.writeInt32BE=function(b,x,O){return b=+b,x>>>=0,O||et(this,b,x,4,2147483647,-2147483648),b<0&&(b=4294967295+b+1),this[x]=b>>>24,this[x+1]=b>>>16,this[x+2]=b>>>8,this[x+3]=255&b,x+4},f.prototype.writeBigInt64LE=Mr(function(b,x=0){return sn(this,b,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=Mr(function(b,x=0){return jt(this,b,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeFloatLE=function(b,x,O){return jr(this,b,x,!0,O)},f.prototype.writeFloatBE=function(b,x,O){return jr(this,b,x,!1,O)},f.prototype.writeDoubleLE=function(b,x,O){return _s(this,b,x,!0,O)},f.prototype.writeDoubleBE=function(b,x,O){return _s(this,b,x,!1,O)},f.prototype.copy=function(b,x,O,ne){if(!f.isBuffer(b))throw new TypeError("argument should be a Buffer");if(O||(O=0),!ne&&0!==ne&&(ne=this.length),x>=b.length&&(x=b.length),x||(x=0),ne>0&&ne<O&&(ne=O),ne===O||0===b.length||0===this.length)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("sourceEnd out of bounds");ne>this.length&&(ne=this.length),b.length-x<ne-O&&(ne=b.length-x+O);const _e=ne-O;return this===b&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(x,O,ne):Uint8Array.prototype.set.call(b,this.subarray(O,ne),x),_e},f.prototype.fill=function(b,x,O,ne){if("string"==typeof b){if("string"==typeof x?(ne=x,x=0,O=this.length):"string"==typeof O&&(ne=O,O=this.length),void 0!==ne&&"string"!=typeof ne)throw new TypeError("encoding must be a string");if("string"==typeof ne&&!f.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);if(1===b.length){const Oe=b.charCodeAt(0);("utf8"===ne&&Oe<128||"latin1"===ne)&&(b=Oe)}}else"number"==typeof b?b&=255:"boolean"==typeof b&&(b=Number(b));if(x<0||this.length<x||this.length<O)throw new RangeError("Out of range index");if(O<=x)return this;let _e;if(x>>>=0,O=void 0===O?this.length:O>>>0,b||(b=0),"number"==typeof b)for(_e=x;_e<O;++_e)this[_e]=b;else{const Oe=f.isBuffer(b)?b:f.from(b,ne),Yt=Oe.length;if(0===Yt)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(_e=0;_e<O-x;++_e)this[_e+x]=Oe[_e%Yt]}return this};const Fn={};function xs(R,b,x){Fn[R]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${R}]`,delete this.name}get code(){return R}set code(ne){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ne,writable:!0})}toString(){return`${this.name} [${R}]: ${this.message}`}}}function Ss(R){let b="",x=R.length;const O="-"===R[0]?1:0;for(;x>=O+4;x-=3)b=`_${R.slice(x-3,x)}${b}`;return`${R.slice(0,x)}${b}`}function lo(R,b,x,O,ne,_e){if(R>x||R<b){const Oe="bigint"==typeof b?"n":"";let Yt;throw Yt=_e>3?0===b||b===BigInt(0)?`>= 0${Oe} and < 2${Oe} ** ${8*(_e+1)}${Oe}`:`>= -(2${Oe} ** ${8*(_e+1)-1}${Oe}) and < 2 ** ${8*(_e+1)-1}${Oe}`:`>= ${b}${Oe} and <= ${x}${Oe}`,new Fn.ERR_OUT_OF_RANGE("value",Yt,R)}!function Vi(R,b,x){zn(b,"offset"),(void 0===R[b]||void 0===R[b+x])&&k(b,R.length-(x+1))}(O,ne,_e)}function zn(R,b){if("number"!=typeof R)throw new Fn.ERR_INVALID_ARG_TYPE(b,"number",R)}function k(R,b,x){throw Math.floor(R)!==R?(zn(R,x),new Fn.ERR_OUT_OF_RANGE(x||"offset","an integer",R)):b<0?new Fn.ERR_BUFFER_OUT_OF_BOUNDS:new Fn.ERR_OUT_OF_RANGE(x||"offset",`>= ${x?1:0} and <= ${b}`,R)}xs("ERR_BUFFER_OUT_OF_BOUNDS",function(R){return R?`${R} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xs("ERR_INVALID_ARG_TYPE",function(R,b){return`The "${R}" argument must be of type number. Received type ${typeof b}`},TypeError),xs("ERR_OUT_OF_RANGE",function(R,b,x){let O=`The value of "${R}" is out of range.`,ne=x;return Number.isInteger(x)&&Math.abs(x)>2**32?ne=Ss(String(x)):"bigint"==typeof x&&(ne=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(ne=Ss(ne)),ne+="n"),O+=` It must be ${b}. Received ${ne}`,O},RangeError);const ce=/[^+/0-9A-Za-z-_]/g;function St(R,b){let x;b=b||1/0;const O=R.length;let ne=null;const _e=[];for(let Oe=0;Oe<O;++Oe){if(x=R.charCodeAt(Oe),x>55295&&x<57344){if(!ne){if(x>56319){(b-=3)>-1&&_e.push(239,191,189);continue}if(Oe+1===O){(b-=3)>-1&&_e.push(239,191,189);continue}ne=x;continue}if(x<56320){(b-=3)>-1&&_e.push(239,191,189),ne=x;continue}x=65536+(ne-55296<<10|x-56320)}else ne&&(b-=3)>-1&&_e.push(239,191,189);if(ne=null,x<128){if((b-=1)<0)break;_e.push(x)}else if(x<2048){if((b-=2)<0)break;_e.push(x>>6|192,63&x|128)}else if(x<65536){if((b-=3)<0)break;_e.push(x>>12|224,x>>6&63|128,63&x|128)}else{if(!(x<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;_e.push(x>>18|240,x>>12&63|128,x>>6&63|128,63&x|128)}}return _e}function er(R){return st.toByteArray(function Re(R){if((R=(R=R.split("=")[0]).trim().replace(ce,"")).length<2)return"";for(;R.length%4!=0;)R+="=";return R}(R))}function nn(R,b,x,O){let ne;for(ne=0;ne<O&&!(ne+x>=b.length||ne>=R.length);++ne)b[ne+x]=R[ne];return ne}function Kt(R,b){return R instanceof b||null!=R&&null!=R.constructor&&null!=R.constructor.name&&R.constructor.name===b.name}function gn(R){return R!=R}const Tn=function(){const R="0123456789abcdef",b=new Array(256);for(let x=0;x<16;++x){const O=16*x;for(let ne=0;ne<16;++ne)b[O+ne]=R[x]+R[ne]}return b}();function Mr(R){return typeof BigInt>"u"?hs:R}function hs(){throw new Error("BigInt not supported")}},6443:(En,ot,xe)=>{"use strict";var le=xe(2834).freeze;ot.XML_ENTITIES=le({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),ot.HTML_ENTITIES=le({Aacute:"\xc1",aacute:"\xe1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",Acy:"\u0410",acy:"\u0430",AElig:"\xc6",aelig:"\xe6",af:"\u2061",Afr:"\u{1d504}",afr:"\u{1d51e}",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",AMP:"&",amp:"&",And:"\u2a53",and:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\xc5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1d538}",aopf:"\u{1d552}",ap:"\u2248",apacir:"\u2a6f",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\xc5",aring:"\xe5",Ascr:"\u{1d49c}",ascr:"\u{1d4b6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\u{1d505}",bfr:"\u{1d51f}",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\u{1d539}",bopf:"\u{1d553}",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250c",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252c",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxUL:"\u255d",boxUl:"\u255c",boxuL:"\u255b",boxul:"\u2518",boxUR:"\u255a",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256c",boxVh:"\u256b",boxvH:"\u256a",boxvh:"\u253c",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255f",boxvR:"\u255e",boxvr:"\u251c",bprime:"\u2035",Breve:"\u02d8",breve:"\u02d8",brvbar:"\xa6",Bscr:"\u212c",bscr:"\u{1d4b7}",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22d2",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\xc7",ccedil:"\xe7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\xb8",Cedilla:"\xb8",cemptyv:"\u29b2",cent:"\xa2",CenterDot:"\xb7",centerdot:"\xb7",Cfr:"\u212d",cfr:"\u{1d520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",cir:"\u25cb",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\xae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",Conint:"\u222f",conint:"\u222e",ContourIntegral:"\u222e",Copf:"\u2102",copf:"\u{1d554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xa9",copy:"\xa9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",Cross:"\u2a2f",cross:"\u2717",Cscr:"\u{1d49e}",cscr:"\u{1d4b8}",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",Cup:"\u22d3",cup:"\u222a",cupbrcap:"\u2a48",CupCap:"\u224d",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\xa4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21a1",dArr:"\u21d3",darr:"\u2193",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21ca",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\xb0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\u{1d507}",dfr:"\u{1d521}",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\xb4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",Diamond:"\u22c4",diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\xa8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\u{1d53b}",dopf:"\u{1d555}",Dot:"\xa8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\xa8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21d3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",DownTeeArrow:"\u21a7",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\u{1d49f}",dscr:"\u{1d4b9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\xc9",eacute:"\xe9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",ecir:"\u2256",Ecirc:"\xca",ecirc:"\xea",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1d508}",efr:"\u{1d522}",eg:"\u2a9a",Egrave:"\xc8",egrave:"\xe8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1d53c}",eopf:"\u{1d556}",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212f",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\u{1d509}",ffr:"\u{1d523}",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\u{1d53d}",fopf:"\u{1d557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1d4bb}",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",ges:"\u2a7e",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\u{1d50a}",gfr:"\u{1d524}",Gg:"\u22d9",gg:"\u226b",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2aa5",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gnE:"\u2269",gne:"\u2a88",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\u{1d53e}",gopf:"\u{1d558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\u{1d4a2}",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",Gt:"\u226b",GT:">",gt:">",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\xbd",hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",hArr:"\u21d4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",Hfr:"\u210c",hfr:"\u{1d525}",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",Hopf:"\u210d",hopf:"\u{1d559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210b",hscr:"\u{1d4bd}",hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xcd",iacute:"\xed",ic:"\u2063",Icirc:"\xce",icirc:"\xee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xa1",iff:"\u21d4",Ifr:"\u2111",ifr:"\u{1d526}",Igrave:"\xcc",igrave:"\xec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",in:"\u2208",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",Int:"\u222c",int:"\u222b",intcal:"\u22ba",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\u{1d540}",iopf:"\u{1d55a}",Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\xbf",Iscr:"\u2110",iscr:"\u{1d4be}",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xcf",iuml:"\xef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1d50d}",jfr:"\u{1d527}",jmath:"\u0237",Jopf:"\u{1d541}",jopf:"\u{1d55b}",Jscr:"\u{1d4a5}",jscr:"\u{1d4bf}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\u{1d50e}",kfr:"\u{1d528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\u{1d542}",kopf:"\u{1d55c}",Kscr:"\u{1d4a6}",kscr:"\u{1d4c0}",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",Lang:"\u27ea",lang:"\u27e8",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\xab",Larr:"\u219e",lArr:"\u21d0",larr:"\u2190",larrb:"\u21e4",larrbfs:"\u291f",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",lat:"\u2aab",lAtail:"\u291b",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lBarr:"\u290e",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",Leftarrow:"\u21d0",leftarrow:"\u2190",LeftArrowBar:"\u21e4",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrow:"\u2194",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTee:"\u22a3",LeftTeeArrow:"\u21a4",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangle:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",LeftVectorBar:"\u2952",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",les:"\u2a7d",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\u{1d50f}",lfr:"\u{1d529}",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22d8",ll:"\u226a",llarr:"\u21c7",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lnE:"\u2268",lne:"\u2a87",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftarrow:"\u27f5",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",longmapsto:"\u27fc",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",longrightarrow:"\u27f6",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\u{1d543}",lopf:"\u{1d55d}",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1d4c1}",Lsh:"\u21b0",lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226a",LT:"<",lt:"<",ltcc:"\u2aa6",ltcir:"\u2a79",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\u{1d510}",mfr:"\u{1d52a}",mho:"\u2127",micro:"\xb5",mid:"\u2223",midast:"*",midcir:"\u2af0",middot:"\xb7",minus:"\u2212",minusb:"\u229f",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\u{1d544}",mopf:"\u{1d55e}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1d4c2}",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266e",natural:"\u266e",naturals:"\u2115",nbsp:"\xa0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21d7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1d511}",nfr:"\u{1d52b}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nhArr:"\u21ce",nharr:"\u21ae",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlArr:"\u21cd",nlarr:"\u219a",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21cd",nleftarrow:"\u219a",nLeftrightarrow:"\u21ce",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xa0",Nopf:"\u2115",nopf:"\u{1d55f}",Not:"\u2aec",not:"\xac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangle:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangle:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",nrarr:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nRightarrow:"\u21cf",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\u{1d4a9}",nscr:"\u{1d4c3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\xd1",ntilde:"\xf1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nVDash:"\u22af",nVdash:"\u22ae",nvDash:"\u22ad",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwArr:"\u21d6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xd3",oacute:"\xf3",oast:"\u229b",ocir:"\u229a",Ocirc:"\xd4",ocirc:"\xf4",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\u{1d512}",ofr:"\u{1d52c}",ogon:"\u02db",Ograve:"\xd2",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\u{1d546}",oopf:"\u{1d560}",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",Or:"\u2a54",or:"\u2228",orarr:"\u21bb",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\u{1d4aa}",oscr:"\u2134",Oslash:"\xd8",oslash:"\xf8",osol:"\u2298",Otilde:"\xd5",otilde:"\xf5",Otimes:"\u2a37",otimes:"\u2297",otimesas:"\u2a36",Ouml:"\xd6",ouml:"\xf6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",par:"\u2225",para:"\xb6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\u{1d513}",pfr:"\u{1d52d}",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\xb1",plusmn:"\xb1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\xb1",Poincareplane:"\u210c",pointint:"\u2a15",Popf:"\u2119",popf:"\u{1d561}",pound:"\xa3",Pr:"\u2abb",pr:"\u227a",prap:"\u2ab7",prcue:"\u227c",prE:"\u2ab3",pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",precsim:"\u227e",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportion:"\u2237",Proportional:"\u221d",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\u{1d4ab}",pscr:"\u{1d4c5}",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\u{1d514}",qfr:"\u{1d52e}",qint:"\u2a0c",Qopf:"\u211a",qopf:"\u{1d562}",qprime:"\u2057",Qscr:"\u{1d4ac}",qscr:"\u{1d4c6}",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",QUOT:'"',quot:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",Rang:"\u27eb",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\xbb",Rarr:"\u21a0",rArr:"\u21d2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",rAtail:"\u291c",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",RBarr:"\u2910",rBarr:"\u290f",rbarr:"\u290d",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",Re:"\u211c",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",REG:"\xae",reg:"\xae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",Rfr:"\u211c",rfr:"\u{1d52f}",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrow:"\u2192",Rightarrow:"\u21d2",rightarrow:"\u2192",RightArrowBar:"\u21e5",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangle:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",RightVectorBar:"\u2953",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",Ropf:"\u211d",ropf:"\u{1d563}",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",Rscr:"\u211b",rscr:"\u{1d4c7}",Rsh:"\u21b1",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",Sc:"\u2abc",sc:"\u227b",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227d",scE:"\u2ab4",sce:"\u2ab0",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdot:"\u22c5",sdotb:"\u22a1",sdote:"\u2a66",searhk:"\u2925",seArr:"\u21d8",searr:"\u2198",searrow:"\u2198",sect:"\xa7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1d516}",sfr:"\u{1d530}",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",Sopf:"\u{1d54a}",sopf:"\u{1d564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25a1",Square:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squf:"\u25aa",srarr:"\u2192",Sscr:"\u{1d4ae}",sscr:"\u{1d4c8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\xaf",Sub:"\u22d0",sub:"\u2282",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",Subset:"\u22d0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succ:"\u227b",succapprox:"\u2ab8",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",Sum:"\u2211",sum:"\u2211",sung:"\u266a",Sup:"\u22d1",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",Supset:"\u22d1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swArr:"\u21d9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292a",szlig:"\xdf",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\u{1d517}",tfr:"\u{1d531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\xde",thorn:"\xfe",Tilde:"\u223c",tilde:"\u02dc",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xd7",timesb:"\u22a0",timesbar:"\u2a31",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",top:"\u22a4",topbot:"\u2336",topcir:"\u2af1",Topf:"\u{1d54b}",topf:"\u{1d565}",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\u{1d4af}",tscr:"\u{1d4c9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\xda",uacute:"\xfa",Uarr:"\u219f",uArr:"\u21d1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\xdb",ucirc:"\xfb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\u{1d518}",ufr:"\u{1d532}",Ugrave:"\xd9",ugrave:"\xf9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\xa8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1d54c}",uopf:"\u{1d566}",UpArrow:"\u2191",Uparrow:"\u21d1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",UpDownArrow:"\u2195",Updownarrow:"\u21d5",updownarrow:"\u2195",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03d2",upsi:"\u03c5",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTee:"\u22a5",UpTeeArrow:"\u21a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\u{1d4b0}",uscr:"\u{1d4ca}",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\xdc",uuml:"\xfc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",vArr:"\u21d5",varr:"\u2195",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",Vbar:"\u2aeb",vBar:"\u2ae8",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22ab",Vdash:"\u22a9",vDash:"\u22a8",vdash:"\u22a2",Vdashl:"\u2ae6",Vee:"\u22c1",vee:"\u2228",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\u{1d519}",vfr:"\u{1d533}",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\u{1d54d}",vopf:"\u{1d567}",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\u{1d4b1}",vscr:"\u{1d4cb}",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",Wedge:"\u22c0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1d51a}",wfr:"\u{1d534}",Wopf:"\u{1d54e}",wopf:"\u{1d568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1d4b2}",wscr:"\u{1d4cc}",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\u{1d51b}",xfr:"\u{1d535}",xhArr:"\u27fa",xharr:"\u27f7",Xi:"\u039e",xi:"\u03be",xlArr:"\u27f8",xlarr:"\u27f5",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\u{1d54f}",xopf:"\u{1d569}",xoplus:"\u2a01",xotime:"\u2a02",xrArr:"\u27f9",xrarr:"\u27f6",Xscr:"\u{1d4b3}",xscr:"\u{1d4cd}",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\xdd",yacute:"\xfd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\xa5",Yfr:"\u{1d51c}",yfr:"\u{1d536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1d550}",yopf:"\u{1d56a}",Yscr:"\u{1d4b4}",yscr:"\u{1d4ce}",YUcy:"\u042e",yucy:"\u044e",Yuml:"\u0178",yuml:"\xff",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",Zfr:"\u2128",zfr:"\u{1d537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",Zopf:"\u2124",zopf:"\u{1d56b}",Zscr:"\u{1d4b5}",zscr:"\u{1d4cf}",zwj:"\u200d",zwnj:"\u200c"}),ot.entityMap=ot.HTML_ENTITIES},6998:function(En,ot){var xe,st;void 0!==(st="function"==typeof(xe=function(){"use strict";function ut(z,fe,f,De){this.message=z,this.expected=fe,this.found=f,this.location=De,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,ut)}return function qe(z,fe){function f(){this.constructor=z}f.prototype=fe.prototype,z.prototype=new f}(ut,Error),ut.buildMessage=function(z,fe){var f={literal:function(oe){return'"'+Xe(oe.text)+'"'},class:function(oe){var yt,be="";for(yt=0;yt<oe.parts.length;yt++)be+=oe.parts[yt]instanceof Array?he(oe.parts[yt][0])+"-"+he(oe.parts[yt][1]):he(oe.parts[yt]);return"["+(oe.inverted?"^":"")+be+"]"},any:function(oe){return"any character"},end:function(oe){return"end of input"},other:function(oe){return oe.description}};function De(oe){return oe.charCodeAt(0).toString(16).toUpperCase()}function Xe(oe){return oe.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(be){return"\\x0"+De(be)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(be){return"\\x"+De(be)})}function he(oe){return oe.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(be){return"\\x0"+De(be)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(be){return"\\x"+De(be)})}function Se(oe){return f[oe.type](oe)}return"Expected "+function $(oe){var yt,Q,be=new Array(oe.length);for(yt=0;yt<oe.length;yt++)be[yt]=Se(oe[yt]);if(be.sort(),be.length>0){for(yt=1,Q=1;yt<be.length;yt++)be[yt-1]!==be[yt]&&(be[Q]=be[yt],Q++);be.length=Q}switch(be.length){case 1:return be[0];case 2:return be[0]+" or "+be[1];default:return be.slice(0,-1).join(", ")+", or "+be[be.length-1]}}(z)+" but "+function q(oe){return oe?'"'+Xe(oe)+'"':"end of input"}(fe)+" found."},{SyntaxError:ut,parse:function je(z,fe){fe=void 0!==fe?fe:{};var Ya,f={},De={turtleDoc:p1},Xe=p1,he=function(v){var S=sr.toJSON();return S["@graph"]=[],v.filter(M=>Array.isArray(M)).forEach(M=>{M.forEach(B=>{S["@graph"].push(B)})}),1===S["@graph"].length&&(Object.assign(S,S["@graph"][0]),delete S["@graph"]),S},Se="\ufeff",$=Ln("\ufeff",!1),q=".",oe=Ln(".",!1),be=function(v){return v},yt="#",Q=Ln("#",!1),we=/^[^\n]/,ye=Cr(["\n"],!0,!1),Ee="\n",tt=Ln("\n",!1),xt=function(v){return v.join("")},mt="@prefix",Nt=Ln("@prefix",!1),Be=function(v,S){return sr.addPrefix(""===v?"0":v,S),{}},Ze="@base",Ye=Ln("@base",!1),$t=function(v){return sr.addBase(v),{}},te=/^[Bb]/,Ne=Cr(["B","b"],!1,!1),vt=/^[Aa]/,kt=Cr(["A","a"],!1,!1),Ft=/^[Ss]/,P=Cr(["S","s"],!1,!1),U=/^[Ee]/,Ve=Cr(["E","e"],!1,!1),Je=/^[Pp]/,et=Cr(["P","p"],!1,!1),sn=/^[Rr]/,jt=Cr(["R","r"],!1,!1),fn=/^[Ff]/,jr=Cr(["F","f"],!1,!1),_s=/^[Ii]/,Fn=Cr(["I","i"],!1,!1),xs=/^[Xx]/,Ss=Cr(["X","x"],!1,!1),Vi=function(v,S){var M={};return"string"==typeof v&&"[]"!==v?M["@id"]=v:"object"==typeof v&&Object.assign(M,v),S&&Object.assign(M,S),[M]},lo=function(v,S){var M={};return v&&Object.assign(M,v),S&&Object.assign(M,S),[M]},zn=";",k=Ln(";",!1),ce=function(v,S,M,B){var W={};return W[M]=B,W},Re=function(v,S,M){return M},St=function(v,S,M){var B={};return M.unshift(function Os(v,S){var M={};return M[v]=S,M}(v,S)),M.forEach(W=>{W&&Object.keys(W).forEach(Y=>{W[Y].forEach(K=>{"@type"===Y&&void 0!==K["@id"]&&(K=K["@id"]),void 0===B[Y]?B[Y]=K:Array.isArray(B[Y])?B[Y].push(K):B[Y]=[B[Y],K]})})}),B},cn=",",Jt=Ln(",",!1),er=function(v,S){return S},nn=function(v,S){return S.unshift(v),S},Kt="a",gn=Ln("a",!1),Tn=function(){return"@type"},Mr=function(v){return Aa(v,!0)},hs=function(v){return Aa(v,!1)},R=function(v){return"[]"===v?{}:{"@id":v}},b=function(v){return{"@id":v}},x="[",O=Ln("[",!1),ne="]",_e=Ln("]",!1),Oe="(",Yt=Ln("(",!1),Kn=")",or=Ln(")",!1),ee=function(v){return{"@list":v}},pe=function(v,S){return{"@value":v,"@language":S}},Qe="^^",lt=Ln("^^",!1),tn=function(v,S){if("http://www.w3.org/2001/XMLSchema#boolean"===S&&"true"===v)return!0;if("http://www.w3.org/2001/XMLSchema#boolean"===S&&"false"===v)return!1;if("http://www.w3.org/2001/XMLSchema#integer"===S)return parseInt(v);if("http://www.w3.org/2001/XMLSchema#double"===S)return parseFloat(v);const M=sr.resolve(S,!0);if(M){const B=S.split(":")[0];if("http://www.w3.org/2001/XMLSchema#boolean"===M&&"true"===v)return sr.decrement(B),!0;if("http://www.w3.org/2001/XMLSchema#boolean"===M&&"false"===v)return sr.decrement(B),!1;if("http://www.w3.org/2001/XMLSchema#integer"===M)return sr.decrement(B),parseInt(v);if("http://www.w3.org/2001/XMLSchema#double"===M)return sr.decrement(B),parseFloat(v)}return{"@value":v,"@type":S}},Cn="true",rr=Ln("true",!1),Gr=function(){return!0},dr="false",zr=Ln("false",!1),Fs=function(){return!1},di=function(v){return v+":"},Ei="<",xo=Ln("<",!1),Br=/^[^\0- <>"{}|\^`\\]/,Ua=Cr([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),oc=">",L=Ln(">",!1),N=function(v){const S=v.map(B=>65536<=B.codePointAt(0)&&B.codePointAt(0)<=983039?"a":1===B.length?B:6===B.length?String.fromCharCode("0x"+B.substring(2)):10===B.length?String.fromCodePoint("0x"+B.substring(2)):B).join("");if(S.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)){var M=v.join("");try{return sr.resolve(M)}catch{zl("Invalid IRIREF "+M)}}else zl("Invalid IRIREF "+v.join("")+" / "+S)},X=":",Ie=Ln(":",!1),It=function(v){return!1===sr.hasPrefix(v=v||"0")&&zl("undefined prefix "+v),v},un=function(v){return v||""},_r=function(v,S){return sr.increment(v),sr.resolve(v+":"+S)},pi="_:",Xi=Ln("_:",!1),Te=/^[0-9]/,Vr=Cr([["0","9"]],!1,!1),Ps="@",wr=Ln("@",!1),ko=/^[a-zA-Z]/,Yi=Cr([["a","z"],["A","Z"]],!1,!1),Pn="-",ct=Ln("-",!1),kn=/^[a-zA-Z0-9]/,Js=Cr([["a","z"],["A","Z"],["0","9"]],!1,!1),ns=function(v,S){return"-"+S.join("")},tr=function(v,S){return v.join("")+S.join("")},nr=/^[+\-]/,Sn=Cr(["+","-"],!1,!1),r1=function(v){return v.match(/^[0+][0-9]+$/)?{"@value":v,"@type":"http://www.w3.org/2001/XMLSchema#integer"}:parseInt(v)},Ki=function(v){return{"@value":v,"@type":"http://www.w3.org/2001/XMLSchema#decimal"}},j5=function(v){return{"@value":v,"@type":"http://www.w3.org/2001/XMLSchema#double"}},J0=/^[eE]/,U5=Cr(["e","E"],!1,!1),So='"',Cu=Ln('"',!1),Q0=/^[^"\\\n\r]/,ep=Cr(['"',"\\","\n","\r"],!0,!1),s1="'",o1=Ln("'",!1),tp=/^[^'\\\n\r]/,hh=Cr(["'","\\","\n","\r"],!0,!1),yu="'''",fi=Ln("'''",!1),Qt=/^[^'\\]/,ea=Cr(["'","\\"],!0,!1),Iu="''",dh=Ln("''",!1),np=function(v,S){return"''"+S.join("")},rp=function(v,S){return"'"+S.join("")},Mt=function(v,S){return v.join("")+S.join("")},Au='"""',Oo=Ln('"""',!1),qi=/^[^"\\]/,ta=Cr(['"',"\\"],!0,!1),a1='""',ph=Ln('""',!1),ac=function(v,S){return'""'+S.join("")},lc=function(v,S){return'"'+S.join("")},l1="\\U",at=Ln("\\U",!1),bu=function(v){return String.fromCodePoint(parseInt(v.join(""),16))},Hl="\\u",c1=Ln("\\u",!1),$a=function(v){return String.fromCharCode(parseInt(v.join(""),16))},fh="\\t",sp=Ln("\\t",!1),ip=function(){return"\t"},Ml="\\b",$5=Ln("\\b",!1),X5=function(){return"\b"},op="\\n",Y5=Ln("\\n",!1),ap=function(){return"\n"},lp="\\r",_u=Ln("\\r",!1),xu=function(){return"\r"},gh="\\f",cp=Ln("\\f",!1),mh=function(){return"\f"},wa='\\"',cc=Ln('\\"',!1),vh=function(){return'"'},Hn="\\'",pr=Ln("\\'",!1),K5=function(){return"'"},wh="\\\\",Su=Ln("\\\\",!1),Ch=function(){return"\\"},uc=/^[ \t\r\n]/,Hu=Cr([" ","\t","\r","\n"],!1,!1),q5=function(){return"[]"},J5=/^[\uD800-\uDBFF]/,up=Cr([["\ud800","\udbff"]],!1,!1),Mu=/^[\uDC00-\uDFFF]/,Q5=Cr([["\udc00","\udfff"]],!1,!1),hp=function(v,S){return v+S},yh=/^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,dp=Cr([["A","Z"],["a","z"],["\xc0","\xd6"],["\xd8","\xf6"],["\xf8","\u02ff"],["\u0370","\u037d"],["\u037f","\u1fff"],["\u200c","\u200d"],["\u2070","\u218f"],["\u2c00","\u2fef"],["\u3001","\ud7ff"],["\uf900","\ufdcf"],["\ufdf0","\ufffd"]],!1,!1),pp="_",zu=Ln("_",!1),Ih="\xb7",Pi=Ln("\xb7",!1),Ah=/^[\u0300-\u036F]/,e3=Cr([["\u0300","\u036f"]],!1,!1),t3=/^[\u203F-\u2040]/,Xa=Cr([["\u203f","\u2040"]],!1,!1),u1=function(v,S,M,B){return M.join("")+B.join("")},fp=function(v,S,M){return v+S.join("")+M.join("")},gp="%",mn=Ln("%",!1),bh=/^[0-9A-Fa-f]/,ae=Cr([["0","9"],["A","F"],["a","f"]],!1,!1),hc="\\",mp=Ln("\\",!1),Vu=/^[_~.!$&'()*+,;=\/?#@%\-]/,dc=Cr(["_","~",".","!","$","&","'","(",")","*","+",",",";","=","/","?","#","@","%","-"],!1,!1),w=0,At=0,h1=[{line:1,column:1}],ks=0,Ca=[],ve=0;if("startRule"in fe){if(!(fe.startRule in De))throw new Error("Can't start parsing from rule \""+fe.startRule+'".');Xe=De[fe.startRule]}function zl(v,S){throw function d1(v,S){return new ut(v,null,null,S)}(v,S=void 0!==S?S:Vl(At,w))}function Ln(v,S){return{type:"literal",text:v,ignoreCase:S}}function Cr(v,S,M){return{type:"class",parts:v,inverted:S,ignoreCase:M}}function ya(v){var M,S=h1[v];if(S)return S;for(M=v-1;!h1[M];)M--;for(S={line:(S=h1[M]).line,column:S.column};M<v;)10===z.charCodeAt(M)?(S.line++,S.column=1):S.column++,M++;return h1[v]=S,S}function Vl(v,S){var M=ya(v),B=ya(S);return{start:{offset:v,line:M.line,column:M.column},end:{offset:S,line:B.line,column:B.column}}}function me(v){w<ks||(w>ks&&(ks=w,Ca=[]),Ca.push(v))}function p1(){var v,S,M,B,W;for(v=w,S=[],M=Er();M!==f;)S.push(M),M=Er();if(S!==f){for(M=[],B=Cp();B!==f;)M.push(B),B=Cp();if(M!==f){for(B=[],W=bt();W!==f;)B.push(W),W=bt();B!==f?(At=v,v=S=he(M)):(w=v,v=f)}else w=v,v=f}else w=v,v=f;return v}function Er(){var v;return 65279===z.charCodeAt(w)?(v=Se,w++):(v=f,0===ve&&me($)),v}function Cp(){var v,S,M,B;if((v=function pc(){var v;return(v=function fc(){var v,S,M,B,W,Y,K,Z,Dt;for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();if(S!==f)if(z.substr(w,7)===mt?(M=mt,w+=7):(M=f,0===ve&&me(Nt)),M!==f){for(B=[],W=bt();W!==f;)B.push(W),W=bt();if(B!==f)if((W=zh())!==f){for(Y=[],K=bt();K!==f;)Y.push(K),K=bt();if(Y!==f)if((K=Ka())!==f){for(Z=[],Dt=bt();Dt!==f;)Z.push(Dt),Dt=bt();Z!==f?(46===z.charCodeAt(w)?(Dt=q,w++):(Dt=f,0===ve&&me(oe)),Dt!==f?(At=v,v=S=Be(W,K)):(w=v,v=f)):(w=v,v=f)}else w=v,v=f;else w=v,v=f}else w=v,v=f;else w=v,v=f}else w=v,v=f;else w=v,v=f;return v}())===f&&(v=function yp(){var v,S,M,B,W,Y,K;for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();if(S!==f)if(z.substr(w,5)===Ze?(M=Ze,w+=5):(M=f,0===ve&&me(Ye)),M!==f){for(B=[],W=bt();W!==f;)B.push(W),W=bt();if(B!==f)if((W=Ka())!==f){for(Y=[],K=bt();K!==f;)Y.push(K),K=bt();Y!==f?(46===z.charCodeAt(w)?(K=q,w++):(K=f,0===ve&&me(oe)),K!==f?(At=v,v=S=$t(W)):(w=v,v=f)):(w=v,v=f)}else w=v,v=f;else w=v,v=f}else w=v,v=f;else w=v,v=f;return v}())===f&&(v=function Tu(){var v,S,M,B,W,Y,K,Z,Dt,Lt,ra,ki;for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();if(S!==f)if(Je.test(z.charAt(w))?(M=z.charAt(w),w++):(M=f,0===ve&&me(et)),M!==f)if(sn.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(jt)),B!==f)if(U.test(z.charAt(w))?(W=z.charAt(w),w++):(W=f,0===ve&&me(Ve)),W!==f)if(fn.test(z.charAt(w))?(Y=z.charAt(w),w++):(Y=f,0===ve&&me(jr)),Y!==f)if(_s.test(z.charAt(w))?(K=z.charAt(w),w++):(K=f,0===ve&&me(Fn)),K!==f)if(xs.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(Ss)),Z!==f){for(Dt=[],Lt=bt();Lt!==f;)Dt.push(Lt),Lt=bt();if(Dt!==f)if((Lt=zh())!==f){for(ra=[],ki=bt();ki!==f;)ra.push(ki),ki=bt();ra!==f&&(ki=Ka())!==f?(At=v,v=S=Be(Lt,ki)):(w=v,v=f)}else w=v,v=f;else w=v,v=f}else w=v,v=f;else w=v,v=f;else w=v,v=f;else w=v,v=f;else w=v,v=f;else w=v,v=f;else w=v,v=f;return v}())===f&&(v=function Ip(){var v,S,M,B,W,Y,K,Z;for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();if(S!==f)if(te.test(z.charAt(w))?(M=z.charAt(w),w++):(M=f,0===ve&&me(Ne)),M!==f)if(vt.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(kt)),B!==f)if(Ft.test(z.charAt(w))?(W=z.charAt(w),w++):(W=f,0===ve&&me(P)),W!==f)if(U.test(z.charAt(w))?(Y=z.charAt(w),w++):(Y=f,0===ve&&me(Ve)),Y!==f){for(K=[],Z=bt();Z!==f;)K.push(Z),Z=bt();K!==f&&(Z=Ka())!==f?(At=v,v=S=$t(Z)):(w=v,v=f)}else w=v,v=f;else w=v,v=f;else w=v,v=f;else w=v,v=f;else w=v,v=f;return v}()),v}())===f)if(v=w,(S=function _h(){var v,S,M;return v=w,(S=function Ap(){var v,S;return v=w,(S=Ru())!==f&&(At=v,S=Mr(S)),(v=S)===f&&(v=Ia())===f&&(v=Ll()),v}())!==f&&(M=El())!==f?(At=v,v=S=Vi(S,M)):(w=v,v=f),v===f&&(v=w,(S=Wo())!==f?((M=El())===f&&(M=null),M!==f?(At=v,v=S=lo(S,M)):(w=v,v=f)):(w=v,v=f)),v}())!==f){for(M=[],B=bt();B!==f;)M.push(B),B=bt();M!==f?(46===z.charCodeAt(w)?(B=q,w++):(B=f,0===ve&&me(oe)),B!==f?(At=v,v=S=be(S)):(w=v,v=f)):(w=v,v=f)}else w=v,v=f;return v}function bt(){var v;return(v=function Hs(){var v;return uc.test(z.charAt(w))?(v=z.charAt(w),w++):(v=f,0===ve&&me(Hu)),v}())===f&&(v=function Ti(){var v,S,M,B;if(v=w,35===z.charCodeAt(w)?(S=yt,w++):(S=f,0===ve&&me(Q)),S!==f){for(M=[],we.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(ye));B!==f;)M.push(B),we.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(ye));M!==f?(10===z.charCodeAt(w)?(B=Ee,w++):(B=f,0===ve&&me(tt)),B!==f?(At=v,v=S=xt(M)):(w=v,v=f)):(w=v,v=f)}else w=v,v=f;return v}()),v}function El(){var v,S,M,B,W,Y,K,Z,Dt,Lt;if(v=w,(S=gc())!==f)if((M=xh())!==f){for(B=[],W=w,Y=[],K=bt();K!==f;)Y.push(K),K=bt();for(Y!==f?(59===z.charCodeAt(w)?(K=zn,w++):(K=f,0===ve&&me(k)),K!==f?(Z=w,(Dt=gc())!==f&&(Lt=xh())!==f?(At=Z,Z=Dt=ce(S,M,Dt,Lt)):(w=Z,Z=f),Z===f&&(Z=null),Z!==f?(At=W,W=Y=Re(S,M,Z)):(w=W,W=f)):(w=W,W=f)):(w=W,W=f);W!==f;){for(B.push(W),W=w,Y=[],K=bt();K!==f;)Y.push(K),K=bt();Y!==f?(59===z.charCodeAt(w)?(K=zn,w++):(K=f,0===ve&&me(k)),K!==f?(Z=w,(Dt=gc())!==f&&(Lt=xh())!==f?(At=Z,Z=Dt=ce(S,M,Dt,Lt)):(w=Z,Z=f),Z===f&&(Z=null),Z!==f?(At=W,W=Y=Re(S,M,Z)):(w=W,W=f)):(w=W,W=f)):(w=W,W=f)}B!==f?(At=v,v=S=St(S,M,B)):(w=v,v=f)}else w=v,v=f;else w=v,v=f;return v}function xh(){var v,S,M,B,W,Y,K;if(v=w,(S=Tl())!==f){for(M=[],B=w,W=[],Y=bt();Y!==f;)W.push(Y),Y=bt();for(W!==f?(44===z.charCodeAt(w)?(Y=cn,w++):(Y=f,0===ve&&me(Jt)),Y!==f&&(K=Tl())!==f?(At=B,B=W=er(S,K)):(w=B,B=f)):(w=B,B=f);B!==f;){for(M.push(B),B=w,W=[],Y=bt();Y!==f;)W.push(Y),Y=bt();W!==f?(44===z.charCodeAt(w)?(Y=cn,w++):(Y=f,0===ve&&me(Jt)),Y!==f&&(K=Tl())!==f?(At=B,B=W=er(S,K)):(w=B,B=f)):(w=B,B=f)}M!==f?(At=v,v=S=nn(S,M)):(w=v,v=f)}else w=v,v=f;return v}function gc(){var v,S,M;if(v=w,(S=function Lu(){var v,S,M;for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();return S!==f&&(M=Ll())!==f?(At=v,v=S=be(M)):(w=v,v=f),v}())!==f&&(At=v,S=be(S)),(v=S)===f){for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();S!==f?(97===z.charCodeAt(w)?(M=Kt,w++):(M=f,0===ve&&me(gn)),M!==f?(At=v,v=S=Tn()):(w=v,v=f)):(w=v,v=f)}return v}function Tl(){var v,S;return(v=function Sh(){var v;return(v=function f1(){var v,S,M,B,W,Y,K;for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();if(S!==f)if((M=mc())!==f){for(B=[],W=bt();W!==f;)B.push(W),W=bt();B!==f&&(W=function Rl(){var v,S,M,B,W,Y,K,Z;if(v=w,64===z.charCodeAt(w)?(S=Ps,w++):(S=f,0===ve&&me(wr)),S!==f){if(M=[],ko.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(Yi)),B!==f)for(;B!==f;)M.push(B),ko.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(Yi));else M=f;if(M!==f){if(B=[],W=w,45===z.charCodeAt(w)?(Y=Pn,w++):(Y=f,0===ve&&me(ct)),Y!==f){if(K=[],kn.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(Js)),Z!==f)for(;Z!==f;)K.push(Z),kn.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(Js));else K=f;K!==f?(At=W,W=Y=ns(M,K)):(w=W,W=f)}else w=W,W=f;for(;W!==f;)if(B.push(W),W=w,45===z.charCodeAt(w)?(Y=Pn,w++):(Y=f,0===ve&&me(ct)),Y!==f){if(K=[],kn.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(Js)),Z!==f)for(;Z!==f;)K.push(Z),kn.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(Js));else K=f;K!==f?(At=W,W=Y=ns(M,K)):(w=W,W=f)}else w=W,W=f;B!==f?(At=v,v=S=tr(M,B)):(w=v,v=f)}else w=v,v=f}else w=v,v=f;return v}())!==f?(At=v,v=S=pe(M,W)):(w=v,v=f)}else w=v,v=f;else w=v,v=f;if(v===f){for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();if(S!==f)if((M=mc())!==f){for(B=[],W=bt();W!==f;)B.push(W),W=bt();if(B!==f)if(z.substr(w,2)===Qe?(W=Qe,w+=2):(W=f,0===ve&&me(lt)),W!==f){for(Y=[],K=bt();K!==f;)Y.push(K),K=bt();Y!==f&&(K=Ll())!==f?(At=v,v=S=tn(M,K)):(w=v,v=f)}else w=v,v=f;else w=v,v=f}else w=v,v=f;else w=v,v=f;if(v===f){for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();S!==f&&(M=mc())!==f?(At=v,v=S=be(M)):(w=v,v=f)}}return v}())===f&&(v=function Du(){var v,S,M;for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();return S!==f?((M=function xp(){var v,S,M,B,W,Y,K,Z,Dt;if(v=w,S=w,M=w,nr.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(Sn)),B===f&&(B=null),B!==f){if(W=w,Y=[],Te.test(z.charAt(w))?(K=z.charAt(w),w++):(K=f,0===ve&&me(Vr)),K!==f)for(;K!==f;)Y.push(K),Te.test(z.charAt(w))?(K=z.charAt(w),w++):(K=f,0===ve&&me(Vr));else Y=f;if(Y!==f)if(46===z.charCodeAt(w)?(K=q,w++):(K=f,0===ve&&me(oe)),K!==f){for(Z=[],Te.test(z.charAt(w))?(Dt=z.charAt(w),w++):(Dt=f,0===ve&&me(Vr));Dt!==f;)Z.push(Dt),Te.test(z.charAt(w))?(Dt=z.charAt(w),w++):(Dt=f,0===ve&&me(Vr));Z!==f&&(Dt=wc())!==f?W=Y=[Y,K,Z,Dt]:(w=W,W=f)}else w=W,W=f;else w=W,W=f;if(W===f){if(W=w,46===z.charCodeAt(w)?(Y=q,w++):(Y=f,0===ve&&me(oe)),Y!==f){if(K=[],Te.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(Vr)),Z!==f)for(;Z!==f;)K.push(Z),Te.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(Vr));else K=f;K!==f&&(Z=wc())!==f?W=Y=[Y,K,Z]:(w=W,W=f)}else w=W,W=f;if(W===f){if(W=w,Y=[],Te.test(z.charAt(w))?(K=z.charAt(w),w++):(K=f,0===ve&&me(Vr)),K!==f)for(;K!==f;)Y.push(K),Te.test(z.charAt(w))?(K=z.charAt(w),w++):(K=f,0===ve&&me(Vr));else Y=f;Y!==f&&(K=wc())!==f?W=Y=[Y,K]:(w=W,W=f)}}W!==f?M=B=[B,W]:(w=M,M=f)}else w=M,M=f;return(S=M!==f?z.substring(S,w):M)!==f&&(At=v,S=j5(S)),S}())===f&&(M=function _p(){var v,S,M,B,W,Y,K,Z;if(v=w,S=w,M=w,nr.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(Sn)),B===f&&(B=null),B!==f){for(W=[],Te.test(z.charAt(w))?(Y=z.charAt(w),w++):(Y=f,0===ve&&me(Vr));Y!==f;)W.push(Y),Te.test(z.charAt(w))?(Y=z.charAt(w),w++):(Y=f,0===ve&&me(Vr));if(W!==f)if(46===z.charCodeAt(w)?(Y=q,w++):(Y=f,0===ve&&me(oe)),Y!==f){if(K=[],Te.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(Vr)),Z!==f)for(;Z!==f;)K.push(Z),Te.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(Vr));else K=f;K!==f?M=B=[B,W,Y,K]:(w=M,M=f)}else w=M,M=f;else w=M,M=f}else w=M,M=f;return(S=M!==f?z.substring(S,w):M)!==f&&(At=v,S=Ki(S)),S}())===f&&(M=function bp(){var v,S,M,B,W,Y;if(v=w,S=w,M=w,nr.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(Sn)),B===f&&(B=null),B!==f){if(W=[],Te.test(z.charAt(w))?(Y=z.charAt(w),w++):(Y=f,0===ve&&me(Vr)),Y!==f)for(;Y!==f;)W.push(Y),Te.test(z.charAt(w))?(Y=z.charAt(w),w++):(Y=f,0===ve&&me(Vr));else W=f;W!==f?M=B=[B,W]:(w=M,M=f)}else w=M,M=f;return(S=M!==f?z.substring(S,w):M)!==f&&(At=v,S=r1(S)),S}()),M!==f?(At=v,v=S=be(M)):(w=v,v=f)):(w=v,v=f),v}())===f&&(v=function Hh(){var v,S,M;for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();if(S!==f?(z.substr(w,4)===Cn?(M=Cn,w+=4):(M=f,0===ve&&me(rr)),M!==f?(At=v,v=S=Gr()):(w=v,v=f)):(w=v,v=f),v===f){for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();S!==f?(z.substr(w,5)===dr?(M=dr,w+=5):(M=f,0===ve&&me(zr)),M!==f?(At=v,v=S=Fs()):(w=v,v=f)):(w=v,v=f)}return v}()),v}())===f&&(v=w,(S=Ru())!==f&&(At=v,S=hs(S)),(v=S)===f&&(v=w,(S=Ia())!==f&&(At=v,S=R(S)),(v=S)===f&&(v=w,(S=Wo())!==f&&(At=v,S=be(S)),(v=S)===f&&(v=w,(S=Ll())!==f&&(At=v,S=b(S)),v=S)))),v}function Wo(){var v,S,M,B,W,Y;for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();if(S!==f)if(91===z.charCodeAt(w)?(M=x,w++):(M=f,0===ve&&me(O)),M!==f)if((B=El())!==f){for(W=[],Y=bt();Y!==f;)W.push(Y),Y=bt();W!==f?(93===z.charCodeAt(w)?(Y=ne,w++):(Y=f,0===ve&&me(_e)),Y!==f?(At=v,v=S=be(B)):(w=v,v=f)):(w=v,v=f)}else w=v,v=f;else w=v,v=f;else w=v,v=f;return v}function Ru(){var v,S,M,B,W,Y;for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();if(S!==f)if(40===z.charCodeAt(w)?(M=Oe,w++):(M=f,0===ve&&me(Yt)),M!==f){for(B=[],W=Tl();W!==f;)B.push(W),W=Tl();if(B!==f){for(W=[],Y=bt();Y!==f;)W.push(Y),Y=bt();W!==f?(41===z.charCodeAt(w)?(Y=Kn,w++):(Y=f,0===ve&&me(or)),Y!==f?(At=v,v=S=ee(B)):(w=v,v=f)):(w=v,v=f)}else w=v,v=f}else w=v,v=f;else w=v,v=f;return v}function mc(){var v,S,M;for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();return S!==f?((M=function r3(){var v,S,M,B,W,Y,K,Z;if(v=w,z.substr(w,3)===yu?(S=yu,w+=3):(S=f,0===ve&&me(fi)),S!==f){for(M=[],Qt.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(ea)),B===f&&(B=Zt())===f&&(B=Ge());B!==f;)M.push(B),Qt.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(ea)),B===f&&(B=Zt())===f&&(B=Ge());if(M!==f){if(B=[],W=w,z.substr(w,2)===Iu?(Y=Iu,w+=2):(Y=f,0===ve&&me(dh)),Y!==f){if(K=[],Qt.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ea)),Z===f&&(Z=Zt())===f&&(Z=Ge()),Z!==f)for(;Z!==f;)K.push(Z),Qt.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ea)),Z===f&&(Z=Zt())===f&&(Z=Ge());else K=f;K!==f?(At=W,W=Y=np(M,K)):(w=W,W=f)}else w=W,W=f;if(W===f)if(W=w,39===z.charCodeAt(w)?(Y=s1,w++):(Y=f,0===ve&&me(o1)),Y!==f){if(K=[],Qt.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ea)),Z===f&&(Z=Zt())===f&&(Z=Ge()),Z!==f)for(;Z!==f;)K.push(Z),Qt.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ea)),Z===f&&(Z=Zt())===f&&(Z=Ge());else K=f;K!==f?(At=W,W=Y=rp(M,K)):(w=W,W=f)}else w=W,W=f;for(;W!==f;){if(B.push(W),W=w,z.substr(w,2)===Iu?(Y=Iu,w+=2):(Y=f,0===ve&&me(dh)),Y!==f){if(K=[],Qt.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ea)),Z===f&&(Z=Zt())===f&&(Z=Ge()),Z!==f)for(;Z!==f;)K.push(Z),Qt.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ea)),Z===f&&(Z=Zt())===f&&(Z=Ge());else K=f;K!==f?(At=W,W=Y=np(M,K)):(w=W,W=f)}else w=W,W=f;if(W===f)if(W=w,39===z.charCodeAt(w)?(Y=s1,w++):(Y=f,0===ve&&me(o1)),Y!==f){if(K=[],Qt.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ea)),Z===f&&(Z=Zt())===f&&(Z=Ge()),Z!==f)for(;Z!==f;)K.push(Z),Qt.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ea)),Z===f&&(Z=Zt())===f&&(Z=Ge());else K=f;K!==f?(At=W,W=Y=rp(M,K)):(w=W,W=f)}else w=W,W=f}B!==f?(z.substr(w,3)===yu?(W=yu,w+=3):(W=f,0===ve&&me(fi)),W!==f?(At=v,v=S=Mt(M,B)):(w=v,v=f)):(w=v,v=f)}else w=v,v=f}else w=v,v=f;return v}())===f&&(M=function Us(){var v,S,M,B,W,Y,K,Z;if(v=w,z.substr(w,3)===Au?(S=Au,w+=3):(S=f,0===ve&&me(Oo)),S!==f){for(M=[],qi.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(ta)),B===f&&(B=Zt())===f&&(B=Ge());B!==f;)M.push(B),qi.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(ta)),B===f&&(B=Zt())===f&&(B=Ge());if(M!==f){if(B=[],W=w,z.substr(w,2)===a1?(Y=a1,w+=2):(Y=f,0===ve&&me(ph)),Y!==f){if(K=[],qi.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ta)),Z===f&&(Z=Zt())===f&&(Z=Ge()),Z!==f)for(;Z!==f;)K.push(Z),qi.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ta)),Z===f&&(Z=Zt())===f&&(Z=Ge());else K=f;K!==f?(At=W,W=Y=ac(M,K)):(w=W,W=f)}else w=W,W=f;if(W===f)if(W=w,34===z.charCodeAt(w)?(Y=So,w++):(Y=f,0===ve&&me(Cu)),Y!==f){if(K=[],qi.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ta)),Z===f&&(Z=Zt())===f&&(Z=Ge()),Z!==f)for(;Z!==f;)K.push(Z),qi.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ta)),Z===f&&(Z=Zt())===f&&(Z=Ge());else K=f;K!==f?(At=W,W=Y=lc(M,K)):(w=W,W=f)}else w=W,W=f;for(;W!==f;){if(B.push(W),W=w,z.substr(w,2)===a1?(Y=a1,w+=2):(Y=f,0===ve&&me(ph)),Y!==f){if(K=[],qi.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ta)),Z===f&&(Z=Zt())===f&&(Z=Ge()),Z!==f)for(;Z!==f;)K.push(Z),qi.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ta)),Z===f&&(Z=Zt())===f&&(Z=Ge());else K=f;K!==f?(At=W,W=Y=ac(M,K)):(w=W,W=f)}else w=W,W=f;if(W===f)if(W=w,34===z.charCodeAt(w)?(Y=So,w++):(Y=f,0===ve&&me(Cu)),Y!==f){if(K=[],qi.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ta)),Z===f&&(Z=Zt())===f&&(Z=Ge()),Z!==f)for(;Z!==f;)K.push(Z),qi.test(z.charAt(w))?(Z=z.charAt(w),w++):(Z=f,0===ve&&me(ta)),Z===f&&(Z=Zt())===f&&(Z=Ge());else K=f;K!==f?(At=W,W=Y=lc(M,K)):(w=W,W=f)}else w=W,W=f}B!==f?(z.substr(w,3)===Au?(W=Au,w+=3):(W=f,0===ve&&me(Oo)),W!==f?(At=v,v=S=Mt(M,B)):(w=v,v=f)):(w=v,v=f)}else w=v,v=f}else w=v,v=f;return v}())===f&&(M=function Bu(){var v,S,M,B;if(v=w,39===z.charCodeAt(w)?(S=s1,w++):(S=f,0===ve&&me(o1)),S!==f){for(M=[],tp.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(hh)),B===f&&(B=Zt())===f&&(B=Ge());B!==f;)M.push(B),tp.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(hh)),B===f&&(B=Zt())===f&&(B=Ge());M!==f?(39===z.charCodeAt(w)?(B=s1,w++):(B=f,0===ve&&me(o1)),B!==f?(At=v,v=S=xt(M)):(w=v,v=f)):(w=v,v=f)}else w=v,v=f;return v}())===f&&(M=function g1(){var v,S,M,B;if(v=w,34===z.charCodeAt(w)?(S=So,w++):(S=f,0===ve&&me(Cu)),S!==f){for(M=[],Q0.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(ep)),B===f&&(B=Zt())===f&&(B=Ge());B!==f;)M.push(B),Q0.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(ep)),B===f&&(B=Zt())===f&&(B=Ge());M!==f?(34===z.charCodeAt(w)?(B=So,w++):(B=f,0===ve&&me(Cu)),B!==f?(At=v,v=S=xt(M)):(w=v,v=f)):(w=v,v=f)}else w=v,v=f;return v}()),M!==f?(At=v,v=S=be(M)):(w=v,v=f)):(w=v,v=f),v}function Ll(){var v,S,M;for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();if(S!==f&&(M=Ka())!==f?(At=v,v=S=be(M)):(w=v,v=f),v===f){for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();S!==f&&(M=function Ji(){var v,S;return(v=function Vh(){var v,S,M;return v=w,(S=Mh())!==f&&(M=function cr(){var v,S,M,B,W,Y,K,Z;if(v=w,(S=na())===f&&(58===z.charCodeAt(w)?(S=X,w++):(S=f,0===ve&&me(Ie)),S===f&&(Te.test(z.charAt(w))?(S=z.charAt(w),w++):(S=f,0===ve&&me(Vr)),S===f&&(S=ii()))),S!==f){for(M=[],(B=Ms())===f&&(58===z.charCodeAt(w)?(B=X,w++):(B=f,0===ve&&me(Ie)),B===f&&(B=ii()));B!==f;)M.push(B),(B=Ms())===f&&(58===z.charCodeAt(w)?(B=X,w++):(B=f,0===ve&&me(Ie)),B===f&&(B=ii()));if(M!==f){if(B=[],W=w,Y=[],46===z.charCodeAt(w)?(K=q,w++):(K=f,0===ve&&me(oe)),K!==f)for(;K!==f;)Y.push(K),46===z.charCodeAt(w)?(K=q,w++):(K=f,0===ve&&me(oe));else Y=f;if(Y!==f){if(K=[],(Z=Ms())===f&&(58===z.charCodeAt(w)?(Z=X,w++):(Z=f,0===ve&&me(Ie)),Z===f&&(Z=ii())),Z!==f)for(;Z!==f;)K.push(Z),(Z=Ms())===f&&(58===z.charCodeAt(w)?(Z=X,w++):(Z=f,0===ve&&me(Ie)),Z===f&&(Z=ii()));else K=f;K!==f?(At=W,W=Y=u1(S,M,Y,K)):(w=W,W=f)}else w=W,W=f;for(;W!==f;){if(B.push(W),W=w,Y=[],46===z.charCodeAt(w)?(K=q,w++):(K=f,0===ve&&me(oe)),K!==f)for(;K!==f;)Y.push(K),46===z.charCodeAt(w)?(K=q,w++):(K=f,0===ve&&me(oe));else Y=f;if(Y!==f){if(K=[],(Z=Ms())===f&&(58===z.charCodeAt(w)?(Z=X,w++):(Z=f,0===ve&&me(Ie)),Z===f&&(Z=ii())),Z!==f)for(;Z!==f;)K.push(Z),(Z=Ms())===f&&(58===z.charCodeAt(w)?(Z=X,w++):(Z=f,0===ve&&me(Ie)),Z===f&&(Z=ii()));else K=f;K!==f?(At=W,W=Y=u1(S,M,Y,K)):(w=W,W=f)}else w=W,W=f}B!==f?(At=v,v=S=fp(S,M,B)):(w=v,v=f)}else w=v,v=f}else w=v,v=f;return v}())!==f?(At=v,v=S=_r(S,M)):(w=v,v=f),v}())===f&&(v=w,(S=Mh())!==f&&(At=v,S=di(S)),v=S),v}())!==f?(At=v,v=S=be(M)):(w=v,v=f)}return v}function Ia(){var v,S,M;for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();if(S!==f&&(M=function vc(){var v,S,M,B,W,Y,K,Z,Dt,Lt;if(v=w,S=w,z.substr(w,2)===pi?(M=pi,w+=2):(M=f,0===ve&&me(Xi)),M!==f)if((B=na())===f&&(Te.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(Vr))),B!==f){for(W=[],Y=Ms();Y!==f;)W.push(Y),Y=Ms();if(W!==f){if(Y=[],K=w,Z=[],46===z.charCodeAt(w)?(Dt=q,w++):(Dt=f,0===ve&&me(oe)),Dt!==f)for(;Dt!==f;)Z.push(Dt),46===z.charCodeAt(w)?(Dt=q,w++):(Dt=f,0===ve&&me(oe));else Z=f;if(Z!==f){if(Dt=[],(Lt=Ms())!==f)for(;Lt!==f;)Dt.push(Lt),Lt=Ms();else Dt=f;Dt!==f?K=Z=[Z,Dt]:(w=K,K=f)}else w=K,K=f;for(;K!==f;){if(Y.push(K),K=w,Z=[],46===z.charCodeAt(w)?(Dt=q,w++):(Dt=f,0===ve&&me(oe)),Dt!==f)for(;Dt!==f;)Z.push(Dt),46===z.charCodeAt(w)?(Dt=q,w++):(Dt=f,0===ve&&me(oe));else Z=f;if(Z!==f){if(Dt=[],(Lt=Ms())!==f)for(;Lt!==f;)Dt.push(Lt),Lt=Ms();else Dt=f;Dt!==f?K=Z=[Z,Dt]:(w=K,K=f)}else w=K,K=f}Y!==f?S=M=[M,B,W,Y]:(w=S,S=f)}else w=S,S=f}else w=S,S=f;else w=S,S=f;return S!==f?z.substring(v,w):S}())!==f?(At=v,v=S=be(M)):(w=v,v=f),v===f){for(v=w,S=[],M=bt();M!==f;)S.push(M),M=bt();S!==f&&(M=function Hi(){var v,S,M,B;if(v=w,91===z.charCodeAt(w)?(S=x,w++):(S=f,0===ve&&me(O)),S!==f){for(M=[],B=bt();B!==f;)M.push(B),B=bt();M!==f?(93===z.charCodeAt(w)?(B=ne,w++):(B=f,0===ve&&me(_e)),B!==f?(At=v,v=S=q5()):(w=v,v=f)):(w=v,v=f)}else w=v,v=f;return v}())!==f?(At=v,v=S=be(M)):(w=v,v=f)}return v}function Ka(){var v,S,M,B;if(v=w,60===z.charCodeAt(w)?(S=Ei,w++):(S=f,0===ve&&me(xo)),S!==f){for(M=[],Br.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(Ua)),B===f&&(B=Ge());B!==f;)M.push(B),Br.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(Ua)),B===f&&(B=Ge());M!==f?(62===z.charCodeAt(w)?(B=oc,w++):(B=f,0===ve&&me(L)),B!==f?(At=v,v=S=N(M)):(w=v,v=f)):(w=v,v=f)}else w=v,v=f;return v}function Mh(){var v,S,M;return v=w,(S=gr())===f&&(S=null),S!==f?(58===z.charCodeAt(w)?(M=X,w++):(M=f,0===ve&&me(Ie)),M!==f?(At=v,v=S=It(S)):(w=v,v=f)):(w=v,v=f),v}function zh(){var v,S,M;return v=w,(S=gr())===f&&(S=null),S!==f?(58===z.charCodeAt(w)?(M=X,w++):(M=f,0===ve&&me(Ie)),M!==f?(At=v,v=S=un(S)):(w=v,v=f)):(w=v,v=f),v}function wc(){var v,S,M,B,W,Y;if(v=w,S=w,J0.test(z.charAt(w))?(M=z.charAt(w),w++):(M=f,0===ve&&me(U5)),M!==f)if(nr.test(z.charAt(w))?(B=z.charAt(w),w++):(B=f,0===ve&&me(Sn)),B===f&&(B=null),B!==f){if(W=[],Te.test(z.charAt(w))?(Y=z.charAt(w),w++):(Y=f,0===ve&&me(Vr)),Y!==f)for(;Y!==f;)W.push(Y),Te.test(z.charAt(w))?(Y=z.charAt(w),w++):(Y=f,0===ve&&me(Vr));else W=f;W!==f?S=M=[M,B,W]:(w=S,S=f)}else w=S,S=f;else w=S,S=f;return S!==f?z.substring(v,w):S}function Ge(){var v,S,M,B,W,Y,K,Z,Dt,Lt,ra;return v=w,z.substr(w,2)===l1?(S=l1,w+=2):(S=f,0===ve&&me(at)),S!==f?(M=w,(B=$s())!==f&&(W=$s())!==f&&(Y=$s())!==f&&(K=$s())!==f&&(Z=$s())!==f&&(Dt=$s())!==f&&(Lt=$s())!==f&&(ra=$s())!==f?M=B=[B,W,Y,K,Z,Dt,Lt,ra]:(w=M,M=f),M!==f?(At=v,v=S=bu(M)):(w=v,v=f)):(w=v,v=f),v===f&&(v=w,z.substr(w,2)===Hl?(S=Hl,w+=2):(S=f,0===ve&&me(c1)),S!==f?(M=w,(B=$s())!==f&&(W=$s())!==f&&(Y=$s())!==f&&(K=$s())!==f?M=B=[B,W,Y,K]:(w=M,M=f),M!==f?(At=v,v=S=$a(M)):(w=v,v=f)):(w=v,v=f)),v}function Zt(){var v,S;return v=w,z.substr(w,2)===fh?(S=fh,w+=2):(S=f,0===ve&&me(sp)),S!==f&&(At=v,S=ip()),(v=S)===f&&(v=w,z.substr(w,2)===Ml?(S=Ml,w+=2):(S=f,0===ve&&me($5)),S!==f&&(At=v,S=X5()),(v=S)===f&&(v=w,z.substr(w,2)===op?(S=op,w+=2):(S=f,0===ve&&me(Y5)),S!==f&&(At=v,S=ap()),(v=S)===f&&(v=w,z.substr(w,2)===lp?(S=lp,w+=2):(S=f,0===ve&&me(_u)),S!==f&&(At=v,S=xu()),(v=S)===f&&(v=w,z.substr(w,2)===gh?(S=gh,w+=2):(S=f,0===ve&&me(cp)),S!==f&&(At=v,S=mh()),(v=S)===f&&(v=w,z.substr(w,2)===wa?(S=wa,w+=2):(S=f,0===ve&&me(cc)),S!==f&&(At=v,S=vh()),(v=S)===f&&(v=w,z.substr(w,2)===Hn?(S=Hn,w+=2):(S=f,0===ve&&me(pr)),S!==f&&(At=v,S=K5()),(v=S)===f&&(v=w,z.substr(w,2)===wh?(S=wh,w+=2):(S=f,0===ve&&me(Su)),S!==f&&(At=v,S=Ch()),v=S))))))),v}function Qs(){var v,S,M;return v=w,J5.test(z.charAt(w))?(S=z.charAt(w),w++):(S=f,0===ve&&me(up)),S!==f?(Mu.test(z.charAt(w))?(M=z.charAt(w),w++):(M=f,0===ve&&me(Q5)),M!==f?(At=v,v=S=hp(S,M)):(w=v,v=f)):(w=v,v=f),v===f&&(yh.test(z.charAt(w))?(v=z.charAt(w),w++):(v=f,0===ve&&me(dp))),v}function na(){var v;return(v=Qs())===f&&(95===z.charCodeAt(w)?(v=pp,w++):(v=f,0===ve&&me(zu))),v}function Ms(){var v;return(v=na())===f&&(45===z.charCodeAt(w)?(v=Pn,w++):(v=f,0===ve&&me(ct)),v===f&&(Te.test(z.charAt(w))?(v=z.charAt(w),w++):(v=f,0===ve&&me(Vr)),v===f&&(183===z.charCodeAt(w)?(v=Ih,w++):(v=f,0===ve&&me(Pi)),v===f&&(Ah.test(z.charAt(w))?(v=z.charAt(w),w++):(v=f,0===ve&&me(e3)),v===f&&(t3.test(z.charAt(w))?(v=z.charAt(w),w++):(v=f,0===ve&&me(Xa))))))),v}function gr(){var v,S,M,B,W,Y,K,Z,Dt;if(v=w,S=w,(M=Qs())!==f){for(B=[],W=Ms();W!==f;)B.push(W),W=Ms();if(B!==f){if(W=[],Y=w,K=[],46===z.charCodeAt(w)?(Z=q,w++):(Z=f,0===ve&&me(oe)),Z!==f)for(;Z!==f;)K.push(Z),46===z.charCodeAt(w)?(Z=q,w++):(Z=f,0===ve&&me(oe));else K=f;if(K!==f){if(Z=[],(Dt=Ms())!==f)for(;Dt!==f;)Z.push(Dt),Dt=Ms();else Z=f;Z!==f?Y=K=[K,Z]:(w=Y,Y=f)}else w=Y,Y=f;for(;Y!==f;){if(W.push(Y),Y=w,K=[],46===z.charCodeAt(w)?(Z=q,w++):(Z=f,0===ve&&me(oe)),Z!==f)for(;Z!==f;)K.push(Z),46===z.charCodeAt(w)?(Z=q,w++):(Z=f,0===ve&&me(oe));else K=f;if(K!==f){if(Z=[],(Dt=Ms())!==f)for(;Dt!==f;)Z.push(Dt),Dt=Ms();else Z=f;Z!==f?Y=K=[K,Z]:(w=Y,Y=f)}else w=Y,Y=f}W!==f?S=M=[M,B,W]:(w=S,S=f)}else w=S,S=f}else w=S,S=f;return S!==f?z.substring(v,w):S}function ii(){var v;return(v=function Rn(){var v,S,M,B,W;return v=w,S=w,37===z.charCodeAt(w)?(M=gp,w++):(M=f,0===ve&&me(mn)),M!==f&&(B=$s())!==f&&(W=$s())!==f?S=M=[M,B,W]:(w=S,S=f),S!==f?z.substring(v,w):S}())===f&&(v=function m1(){var v,S,M;return v=w,92===z.charCodeAt(w)?(S=hc,w++):(S=f,0===ve&&me(mp)),S!==f?(Vu.test(z.charAt(w))?(M=z.charAt(w),w++):(M=f,0===ve&&me(dc)),M!==f?(At=v,v=S=be(M)):(w=v,v=f)):(w=v,v=f),v}()),v}function $s(){var v;return bh.test(z.charAt(w))?(v=z.charAt(w),w++):(v=f,0===ve&&me(ae)),v}var qa=function(v){return v.match(/^[a-z](.*?):(.+?)/g)},sr={base:[],data:{},addBase:function(v){if(0===sr.base.length)return void sr.base.push(v);const S=sr.base[sr.base.length-1];S!==v&&sr.base.push(new URL(v,S).toString())},addPrefix:function(v,S){const M=sr.data[v];void 0===M?sr.data[v]=[{uri:S,count:0}]:M[M.length-1].uri!==S&&M.push({uri:S,count:0})},hasPrefix:function(v){return void 0!==this.data[v]},resolve:function(v,S){const M=Object.keys(sr.data).find(W=>0===v.indexOf(W+":"));if(void 0!==M){const W=sr.data[M];return 1===W.length&&!0!==S&&qa(W[0].uri)?v:v.replace(M+":",W[W.length-1].uri)}var B=0===sr.base.length?fe.baseIRI:sr.base[sr.base.length-1];return!B||v.match(/^(http:|https:|urn:|file:)/)?v:0===v.indexOf("//")&&B?B.split("//")[0]+v:new URL(v,B).toString()},increment:function(v){const S=sr.data[v];void 0!==S&&S[S.length-1].count++},decrement:function(v){const S=sr.data[v];void 0!==S&&S[S.length-1].count--},toJSON:function(){const v={};return sr.base.length>0&&(void 0===v["@context"]&&(v["@context"]={}),v["@context"]["@base"]=sr.base[0]),Object.keys(sr.data).forEach(S=>{const M=sr.data[S][0];"http://www.w3.org/2001/XMLSchema#"===M.uri&&M.count<1||qa(M.uri)&&(void 0===v["@context"]&&(v["@context"]={}),v["@context"][S]=M.uri)}),v}};function Aa(v,S){if(void 0===v["@list"]||!S&&!v["@list"].find(W=>void 0!==W["@list"]))return v;if(0===v["@list"].length)return{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};var M={},B=null;return v["@list"].forEach(W=>{null===B?B=M:(B["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={},B=B["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]),B["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"]=Aa(W,!0),B["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}),M}if((Ya=Xe())!==f&&w===z.length)return Ya;throw Ya!==f&&w<z.length&&me({type:"end"}),function Ho(v,S,M){return new ut(ut.buildMessage(v,S),v,S,M)}(Ca,ks<z.length?z.charAt(ks):null,Vl(ks,ks<z.length?ks+1:ks))}}})?xe.apply(ot,[]):xe)&&(En.exports=st)},7044:(En,ot,xe)=>{var st=xe(2834),qe=xe(8486),ut=xe(6443),je=xe(3742),z=qe.DOMImplementation,fe=st.NAMESPACE,f=je.ParseError,De=je.XMLReader;function Xe(Q){return Q.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function he(Q){this.options=Q||{locator:{}}}function $(){this.cdata=!1}function q(Q,we){we.lineNumber=Q.lineNumber,we.columnNumber=Q.columnNumber}function oe(Q){if(Q)return"\n@"+(Q.systemId||"")+"#[line:"+Q.lineNumber+",col:"+Q.columnNumber+"]"}function be(Q,we,ye){return"string"==typeof Q?Q.substr(we,ye):Q.length>=we+ye||we?new java.lang.String(Q,we,ye)+"":Q}function yt(Q,we){Q.currentElement?Q.currentElement.appendChild(we):Q.doc.appendChild(we)}he.prototype.parseFromString=function(Q,we){var ye=this.options,Ee=new De,tt=ye.domBuilder||new $,xt=ye.errorHandler,mt=ye.locator,Nt=ye.xmlns||{},Be=/\/x?html?$/.test(we),Ze=Be?ut.HTML_ENTITIES:ut.XML_ENTITIES;return mt&&tt.setDocumentLocator(mt),Ee.errorHandler=function Se(Q,we,ye){if(!Q){if(we instanceof $)return we;Q=we}var Ee={},tt=Q instanceof Function;function xt(mt){var Nt=Q[mt];!Nt&&tt&&(Nt=2==Q.length?function(Be){Q(mt,Be)}:Q),Ee[mt]=Nt&&function(Be){Nt("[xmldom "+mt+"]\t"+Be+oe(ye))}||function(){}}return ye=ye||{},xt("warning"),xt("error"),xt("fatalError"),Ee}(xt,tt,mt),Ee.domBuilder=ye.domBuilder||tt,Be&&(Nt[""]=fe.HTML),Nt.xml=Nt.xml||fe.XML,Q&&"string"==typeof Q?Ee.parse((ye.normalizeLineEndings||Xe)(Q),Nt,Ze):Ee.errorHandler.error("invalid doc source"),tt.doc},$.prototype={startDocument:function(){this.doc=(new z).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(Q,we,ye,Ee){var tt=this.doc,xt=tt.createElementNS(Q,ye||we),mt=Ee.length;yt(this,xt),this.currentElement=xt,this.locator&&q(this.locator,xt);for(var Nt=0;Nt<mt;Nt++){Q=Ee.getURI(Nt);var Be=Ee.getValue(Nt),Ze=(ye=Ee.getQName(Nt),tt.createAttributeNS(Q,ye));this.locator&&q(Ee.getLocator(Nt),Ze),Ze.value=Ze.nodeValue=Be,xt.setAttributeNode(Ze)}},endElement:function(Q,we,ye){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(Q,we){},endPrefixMapping:function(Q){},processingInstruction:function(Q,we){var ye=this.doc.createProcessingInstruction(Q,we);this.locator&&q(this.locator,ye),yt(this,ye)},ignorableWhitespace:function(Q,we,ye){},characters:function(Q,we,ye){if(Q=be.apply(this,arguments)){if(this.cdata)var Ee=this.doc.createCDATASection(Q);else Ee=this.doc.createTextNode(Q);this.currentElement?this.currentElement.appendChild(Ee):/^\s*$/.test(Q)&&this.doc.appendChild(Ee),this.locator&&q(this.locator,Ee)}},skippedEntity:function(Q){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(Q){(this.locator=Q)&&(Q.lineNumber=0)},comment:function(Q,we,ye){Q=be.apply(this,arguments);var Ee=this.doc.createComment(Q);this.locator&&q(this.locator,Ee),yt(this,Ee)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(Q,we,ye){var Ee=this.doc.implementation;if(Ee&&Ee.createDocumentType){var tt=Ee.createDocumentType(Q,we,ye);this.locator&&q(this.locator,tt),yt(this,tt),this.doc.doctype=tt}},warning:function(Q){console.warn("[xmldom warning]\t"+Q,oe(this.locator))},error:function(Q){console.error("[xmldom error]\t"+Q,oe(this.locator))},fatalError:function(Q){throw new f(Q,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(Q){$.prototype[Q]=function(){return null}}),ot.DOMParser=he},7059:En=>{"use strict";var P,ot=Object.defineProperty,xe=Object.getOwnPropertyDescriptor,le=Object.getOwnPropertyNames,st=Object.prototype.hasOwnProperty,z={};((P,U)=>{for(var Ve in U)ot(P,Ve,{get:U[Ve],enumerable:!0})})(z,{XmlCdata:()=>xt,XmlComment:()=>mt,XmlDeclaration:()=>Nt,XmlDocument:()=>Ze,XmlDocumentType:()=>Ye,XmlElement:()=>Be,XmlError:()=>$t,XmlNode:()=>Ee,XmlProcessingInstruction:()=>te,XmlText:()=>tt,parseXml:()=>Ft}),En.exports=(P=z,((P,U,Ve,Je)=>{if(U&&"object"==typeof U||"function"==typeof U)for(let et of le(U))!st.call(P,et)&&undefined!==et&&ot(P,et,{get:()=>U[et],enumerable:!(Je=xe(U,et))||Je.enumerable});return P})(ot({},"__esModule",{value:!0}),P));var f=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,De=class{constructor(P){if(this.k=this.u(P,!0),this.d=0,this.length=P.length,this.l=this.k!==this.length,this.h=P,this.l){let U=[];for(let Ve=0,Je=0;Je<this.k;++Je)U[Je]=Ve,Ve+=P.codePointAt(Ve)>65535?2:1;this.A=U}}get B(){return this.d>=this.k}u(P,U=this.l){return U?P.replace(f,"_").length:P.length}p(P=1){this.d=Math.min(this.k,this.d+P)}f(P=this.d){var U;return this.l?null!=(U=this.A[P])?U:1/0:P}G(P=1){let U=this.m(P);return this.p(P),U}v(P){let U=this.f(),Ve=this.h.slice(U,U+P);return this.p(this.u(Ve)),Ve}w(P){let{length:U,l:Ve,h:Je}=this,et=this.f(),sn=et;if(Ve)for(;sn<U;){let jt=Je[sn],fn=jt>="\ud800"&&jt<="\udbff";if(fn&&(jt+=Je[sn+1]),!P(jt))break;sn+=fn?2:1}else for(;sn<U&&P(Je[sn]);)++sn;return this.v(sn-et)}b(P){let{length:U}=P,Ve=this.f();return P===this.h.slice(Ve,Ve+U)?(this.p(1===U?1:this.u(P)),P):""}x(P){let U=this.h.slice(this.f()).search(P);return U>0?this.v(U):""}s(P){let U=this.f(),Ve=this.h.indexOf(P,U);return Ve>0?this.v(Ve-U):""}m(P=1){let{d:U,h:Ve}=this;return this.l?Ve.slice(this.f(U),this.f(U+P)):Ve.slice(U,U+P)}n(P=0){this.d=P>=0?Math.min(this.k,P):Math.max(0,this.d+P)}},Xe=/["&<]/,he=/['&<]/,Se=/\r\n|[\n\r\t]/g,$=/<|&|]]>/,q=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));function oe(P){let U=P.codePointAt(0);return U>=97&&U<=122||U>=65&&U<=90||U>=48&&U<=57||45===U||46===U||183===U||U>=768&&U<=879||8255===U||8256===U||be(P,U)}function be(P,U=P.codePointAt(0)){return U>=97&&U<=122||U>=65&&U<=90||58===U||95===U||U>=192&&U<=214||U>=216&&U<=246||U>=248&&U<=767||U>=880&&U<=893||U>=895&&U<=8191||8204===U||8205===U||U>=8304&&U<=8591||U>=11264&&U<=12271||U>=12289&&U<=55295||U>=63744&&U<=64975||U>=65008&&U<=65533||U>=65536&&U<=983039}function yt(P){return"#"===P||oe(P)}function Q(P){let U=P.codePointAt(0);return 32===U||9===U||10===U||13===U}function we(P){return P>=32&&P<=55295||10===P||9===P||13===P||P>=57344&&P<=65533||P>=65536&&P<=1114111}var ye=(()=>{let P=class GR{constructor(){this.parent=null,this.start=-1,this.end=-1}get document(){var Ve,Je;return null!=(Je=null==(Ve=this.parent)?void 0:Ve.document)?Je:null}get isRootNode(){return null!==this.parent&&this.parent===this.document&&this.type===GR.TYPE_ELEMENT}get preserveWhitespace(){var Ve;return!(null==(Ve=this.parent)||!Ve.preserveWhitespace)}get type(){return""}toJSON(){let Ve={type:this.type};return this.isRootNode&&(Ve.isRootNode=!0),this.preserveWhitespace&&(Ve.preserveWhitespace=!0),-1!==this.start&&(Ve.start=this.start,Ve.end=this.end),Ve}};return P.TYPE_CDATA="cdata",P.TYPE_COMMENT="comment",P.TYPE_DOCUMENT="document",P.TYPE_DOCUMENT_TYPE="doctype",P.TYPE_ELEMENT="element",P.TYPE_PROCESSING_INSTRUCTION="pi",P.TYPE_TEXT="text",P.TYPE_XML_DECLARATION="xmldecl",P})(),Ee=ye,tt=class extends Ee{constructor(P=""){super(),this.text=P}get type(){return Ee.TYPE_TEXT}toJSON(){return Object.assign(Ee.prototype.toJSON.call(this),{text:this.text})}},xt=class extends tt{get type(){return Ee.TYPE_CDATA}},mt=class extends Ee{constructor(P=""){super(),this.content=P}get type(){return Ee.TYPE_COMMENT}toJSON(){return Object.assign(Ee.prototype.toJSON.call(this),{content:this.content})}},Nt=class extends Ee{constructor(P,U,Ve){super(),this.version=P,this.encoding=U??null,this.standalone=Ve??null}get type(){return Ee.TYPE_XML_DECLARATION}toJSON(){let P=Ee.prototype.toJSON.call(this);P.version=this.version;for(let U of["encoding","standalone"])null!==this[U]&&(P[U]=this[U]);return P}},Be=class WR extends Ee{constructor(U,Ve=Object.create(null),Je=[]){super(),this.name=U,this.attributes=Ve,this.children=Je}get isEmpty(){return 0===this.children.length}get preserveWhitespace(){let U=this;for(;U instanceof WR;){if("xml:space"in U.attributes)return"preserve"===U.attributes["xml:space"];U=U.parent}return!1}get text(){return this.children.map(U=>"text"in U?U.text:"").join("")}get type(){return Ee.TYPE_ELEMENT}toJSON(){return Object.assign(Ee.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(U=>U.toJSON())})}},Ze=class extends Ee{constructor(P=[]){super(),this.children=P}get document(){return this}get root(){for(let P of this.children)if(P instanceof Be)return P;return null}get text(){return this.children.map(P=>"text"in P?P.text:"").join("")}get type(){return Ee.TYPE_DOCUMENT}toJSON(){return Object.assign(Ee.prototype.toJSON.call(this),{children:this.children.map(P=>P.toJSON())})}},Ye=class extends Ee{constructor(P,U,Ve,Je){super(),this.name=P,this.publicId=U??null,this.systemId=Ve??null,this.internalSubset=Je??null}get type(){return Ee.TYPE_DOCUMENT_TYPE}toJSON(){let P=Ee.prototype.toJSON.call(this);P.name=this.name;for(let U of["publicId","systemId","internalSubset"])null!==this[U]&&(P[U]=this[U]);return P}},$t=class extends Error{constructor(P,U,Ve){let Je=1,et="",sn=1;for(let jr=0;jr<U;++jr){let _s=Ve[jr];"\n"===_s?(Je=1,et="",sn+=1):(Je+=1,et+=_s)}let jt=Ve.indexOf("\n",U);et+=-1===jt?Ve.slice(U):Ve.slice(U,jt);let fn=0;et.length>50&&(Je<40?et=et.slice(0,50):(fn=Je-20,et=et.slice(fn,Je+30))),super(`${P} (line ${sn}, column ${Je})\n  ${et}\n`+" ".repeat(Je-fn+1)+"^\n"),this.column=Je,this.excerpt=et,this.line=sn,this.name="XmlError",this.pos=U}},te=class extends Ee{constructor(P,U=""){super(),this.name=P,this.content=U}get type(){return Ee.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(Ee.prototype.toJSON.call(this),{name:this.name,content:this.content})}},vt=class{constructor(P,U={}){let Ve=this.document=new Ze;this.j=Ve,this.g=U,this.c=new De(P),this.g.includeOffsets&&(Ve.start=0,Ve.end=P.length),this.parse()}i(P,U){return P.parent=this.j,this.g.includeOffsets&&(P.start=this.c.f(U),P.end=this.c.f()),this.j.children.push(P),!0}y(P,U){let{children:Ve}=this.j,{length:Je}=Ve;if(P=kt(P),Je>0){let et=Ve[Je-1];if(et?.type===Ee.TYPE_TEXT){let sn=et;return sn.text+=P,this.g.includeOffsets&&(sn.end=this.c.f()),!0}}return this.i(new tt(P),U)}H(){let P=Object.create(null);for(;this.e();){let U=this.q();if(!U)break;let Ve=this.t()&&this.I();if(!1===Ve)throw this.a("Attribute value expected");if(U in P)throw this.a(`Duplicate attribute: ${U}`);if("xml:space"===U&&"default"!==Ve&&"preserve"!==Ve)throw this.a('Value of the `xml:space` attribute must be "default" or "preserve"');P[U]=Ve}if(this.g.sortAttributes){let U=Object.keys(P).sort(),Ve=Object.create(null);for(let Je=0;Je<U.length;++Je){let et=U[Je];Ve[et]=P[et]}P=Ve}return P}I(){let{c:P}=this,U=P.m();if('"'!==U&&"'"!==U)return!1;P.p();let Ve,Je=!1,et="",sn='"'===U?Xe:he;e:for(;!P.B;)switch(Ve=P.x(sn),Ve&&(this.o(Ve),et+=Ve.replace(Se," ")),P.m()){case U:Je=!0;break e;case"&":et+=this.C();continue;case"<":throw this.a("Unescaped `<` is not allowed in an attribute value");default:break e}if(!Je)throw this.a("Unclosed attribute");return P.p(),et}J(){let{c:P}=this,U=P.d;if(!P.b("<![CDATA["))return!1;let Ve=P.s("]]>");if(this.o(Ve),!P.b("]]>"))throw this.a("Unclosed CDATA section");return this.g.preserveCdata?this.i(new xt(kt(Ve)),U):this.y(Ve,U)}K(){let{c:P}=this,U=P.d,Ve=P.x($);if(!Ve)return!1;if(this.o(Ve),"]]>"===P.m(3))throw this.a("Element content may not contain the CDATA section close delimiter `]]>`");return this.y(Ve,U)}D(){let{c:P}=this,U=P.d;if(!P.b("\x3c!--"))return!1;let Ve=P.s("--");if(this.o(Ve),!P.b("--\x3e"))throw"--"===P.m(2)?this.a("The string `--` isn't allowed inside a comment"):this.a("Unclosed comment");return!this.g.preserveComments||this.i(new mt(kt(Ve)),U)}L(){let P=this.c.d,U=this.C();return!!U&&this.y(U,P)}M(){let{c:P}=this,U=P.d;if(!P.b("<!DOCTYPE"))return!1;let Je,et,sn,Ve=this.e()&&this.q();if(!Ve)throw this.a("Expected a name");if(this.e()){if(P.b("PUBLIC")){if(Je=this.e()&&this.N(),!1===Je)throw this.a("Expected a public identifier");this.e()}if(void 0!==Je||P.b("SYSTEM")){if(this.e(),et=this.r(),!1===et)throw this.a("Expected a system identifier");this.e()}}if(P.b("[")){if(sn=P.x(/\][\x20\t\r\n]*>/),!P.b("]"))throw this.a("Unclosed internal subset");this.e()}if(!P.b(">"))throw this.a("Unclosed doctype declaration");return!this.g.preserveDocumentType||this.i(new Ye(Ve,Je,et,sn),U)}E(){let{c:P}=this,U=P.d;if(!P.b("<"))return!1;let Ve=this.q();if(!Ve)return P.n(U),!1;let Je=this.H(),et=!!P.b("/>"),sn=new Be(Ve,Je);if(sn.parent=this.j,!et){if(!P.b(">"))throw this.a(`Unclosed start tag for element \`${Ve}\``);this.j=sn;do{this.K()}while(this.E()||this.L()||this.J()||this.F()||this.D());let fn,jt=P.d;if(!P.b("</")||!(fn=this.q())||fn!==Ve)throw P.n(jt),this.a(`Missing end tag for element ${Ve}`);if(this.e(),!P.b(">"))throw this.a(`Unclosed end tag for element ${Ve}`);this.j=sn.parent}return this.i(sn,U)}t(){return this.e(),!!this.c.b("=")&&(this.e(),!0)}z(){return this.D()||this.F()||this.e()}q(){return be(this.c.m())?this.c.w(oe):""}F(){let{c:P}=this,U=P.d;if(!P.b("<?"))return!1;let Ve=this.q();if(!Ve)throw this.a("Invalid processing instruction");if("xml"===Ve.toLowerCase())throw P.n(U),this.a("XML declaration isn't allowed here");if(!this.e()){if(P.b("?>"))return this.i(new te(Ve),U);throw this.a("Whitespace is required after a processing instruction name")}let Je=P.s("?>");if(this.o(Je),!P.b("?>"))throw this.a("Unterminated processing instruction");return this.i(new te(Ve,kt(Je)),U)}O(){let{c:P}=this,U=P.d;for(this.P();this.z(););if(this.M())for(;this.z(););return U<P.d}N(){let P=this.c.d,U=this.r();if(!1!==U&&!/^[-\x20\r\na-zA-Z0-9'()+,./:=?;!*#@$_%]*$/.test(U))throw this.c.n(P),this.a("Invalid character in public identifier");return U}C(){let{c:P}=this;if(!P.b("&"))return!1;let Ve,U=P.w(yt);if(";"!==P.G())throw this.a("Unterminated reference (a reference must end with `;`)");if("#"===U[0]){let Je="x"===U[1]?parseInt(U.slice(2),16):parseInt(U.slice(1),10);if(isNaN(Je))throw this.a("Invalid character reference");if(!we(Je))throw this.a("Character reference resolves to an invalid character");Ve=String.fromCodePoint(Je)}else if(Ve=q[U],void 0===Ve){let{ignoreUndefinedEntities:Je,resolveUndefinedEntity:et}=this.g,sn=`&${U};`;if(et){let jt=et(sn);if(null!=jt){let fn=typeof jt;if("string"!==fn)throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${fn}`);return jt}}if(Je)return sn;throw P.n(-sn.length),this.a(`Named entity isn't defined: ${sn}`)}return Ve}r(){let{c:P}=this,U=P.b('"')||P.b("'");if(!U)return!1;let Ve=P.s(U);if(this.o(Ve),!P.b(U))throw this.a("Missing end quote");return Ve}e(){return!!this.c.w(Q)}P(){let{c:P}=this,U=P.d;if(!P.b("<?xml"))return!1;if(!this.e())throw this.a("Invalid XML declaration");let Je,et,Ve=!!P.b("version")&&this.t()&&this.r();if(!1===Ve)throw this.a("XML version is missing or invalid");if(!/^1\.[0-9]+$/.test(Ve))throw this.a("Invalid character in version number");if(this.e()){if(Je=!!P.b("encoding")&&this.t()&&this.r(),Je){if(!/^[A-Za-z][\w.-]*$/.test(Je))throw this.a("Invalid character in encoding name");this.e()}if(et=!!P.b("standalone")&&this.t()&&this.r(),et){if("yes"!==et&&"no"!==et)throw this.a('Only "yes" and "no" are permitted as values of `standalone`');this.e()}}if(!P.b("?>"))throw this.a("Invalid or unclosed XML declaration");return!this.g.preserveXmlDeclaration||this.i(new Nt(Ve,Je||void 0,et||void 0),U)}a(P){let{c:U}=this;return new $t(P,U.d,U.h)}parse(){if(this.c.b("\ufeff"),this.O(),!this.E())throw this.a("Root element is missing or invalid");for(;this.z(););if(!this.c.B)throw this.a("Extra content at the end of the document")}o(P){let{length:U}=P;for(let Ve=0;Ve<U;++Ve){let Je=P.codePointAt(Ve);if(!we(Je))throw this.c.n(-([...P].length-Ve)),this.a("Invalid character");Je>65535&&(Ve+=1)}}};function kt(P){let U=0;for(;-1!==(U=P.indexOf("\r",U));)P="\n"===P[U+1]?P.slice(0,U)+P.slice(U+1):P.slice(0,U)+"\n"+P.slice(U+1);return P}function Ft(P,U){return new vt(P,U).document}},8486:(En,ot,xe)=>{var le=xe(2834),st=le.find,qe=le.NAMESPACE;function ut(L){return""!==L}function z(L,N){return L.hasOwnProperty(N)||(L[N]=!0),L}function fe(L){if(!L)return[];var N=function je(L){return L?L.split(/[\t\n\f\r ]+/).filter(ut):[]}(L);return Object.keys(N.reduce(z,{}))}function De(L,N){for(var X in L)Object.prototype.hasOwnProperty.call(L,X)&&(N[X]=L[X])}function Xe(L,N){var X=L.prototype;if(!(X instanceof N)){let It=function(){};It.prototype=N.prototype,It=new It,De(X,It),L.prototype=X=It}X.constructor!=L&&("function"!=typeof L&&console.error("unknown Class:"+L),X.constructor=L)}var he={},Se=he.ELEMENT_NODE=1,$=he.ATTRIBUTE_NODE=2,q=he.TEXT_NODE=3,oe=he.CDATA_SECTION_NODE=4,be=he.ENTITY_REFERENCE_NODE=5,yt=he.ENTITY_NODE=6,Q=he.PROCESSING_INSTRUCTION_NODE=7,we=he.COMMENT_NODE=8,ye=he.DOCUMENT_NODE=9,Ee=he.DOCUMENT_TYPE_NODE=10,tt=he.DOCUMENT_FRAGMENT_NODE=11,xt=he.NOTATION_NODE=12,mt={},Nt={},Ye=(mt.INDEX_SIZE_ERR=(Nt[1]="Index size error",1),mt.DOMSTRING_SIZE_ERR=(Nt[2]="DOMString size error",2),mt.HIERARCHY_REQUEST_ERR=(Nt[3]="Hierarchy request error",3)),kt=(mt.WRONG_DOCUMENT_ERR=(Nt[4]="Wrong document",4),mt.INVALID_CHARACTER_ERR=(Nt[5]="Invalid character",5),mt.NO_DATA_ALLOWED_ERR=(Nt[6]="No data allowed",6),mt.NO_MODIFICATION_ALLOWED_ERR=(Nt[7]="No modification allowed",7),mt.NOT_FOUND_ERR=(Nt[8]="Not found",8)),P=(mt.NOT_SUPPORTED_ERR=(Nt[9]="Not supported",9),mt.INUSE_ATTRIBUTE_ERR=(Nt[10]="Attribute in use",10));function jt(L,N){if(N instanceof Error)var X=N;else X=this,Error.call(this,Nt[L]),this.message=Nt[L],Error.captureStackTrace&&Error.captureStackTrace(this,jt);return X.code=L,N&&(this.message=this.message+": "+N),X}function fn(){}function jr(L,N){this._node=L,this._refresh=N,_s(this)}function _s(L){var N=L._node._inc||L._node.ownerDocument._inc;if(L._inc!==N){var X=L._refresh(L._node);if(Ua(L,"length",X.length),!L.$$length||X.length<L.$$length)for(var Ie=X.length;Ie in L;Ie++)Object.prototype.hasOwnProperty.call(L,Ie)&&delete L[Ie];De(X,L),L._inc=N}}function Fn(){}function xs(L,N){for(var X=L.length;X--;)if(L[X]===N)return X}function Ss(L,N,X,Ie){if(Ie?N[xs(N,Ie)]=X:N[N.length++]=X,L){X.ownerElement=L;var It=L.ownerDocument;It&&(Ie&&cn(It,L,Ie),function St(L,N,X){L&&L._inc++,X.namespaceURI===qe.XMLNS&&(N._nsMap[X.prefix?X.localName:""]=X.value)}(It,L,X))}}function Vi(L,N,X){var Ie=xs(N,X);if(!(Ie>=0))throw new jt(kt,new Error(L.tagName+"@"+X));for(var It=N.length-1;Ie<It;)N[Ie]=N[++Ie];if(N.length=It,L){var un=L.ownerDocument;un&&(cn(un,L,X),X.ownerElement=null)}}function lo(){}function zn(){}function k(L){return("<"==L?"&lt;":">"==L&&"&gt;")||"&"==L&&"&amp;"||'"'==L&&"&quot;"||"&#"+L.charCodeAt()+";"}function ce(L,N){if(N(L))return!0;if(L=L.firstChild)do{if(ce(L,N))return!0}while(L=L.nextSibling)}function Re(){this.ownerDocument=this}function cn(L,N,X,Ie){L&&L._inc++,X.namespaceURI===qe.XMLNS&&delete N._nsMap[X.prefix?X.localName:""]}function Jt(L,N,X){if(L&&L._inc){L._inc++;var Ie=N.childNodes;if(X)Ie[Ie.length++]=X;else{for(var It=N.firstChild,un=0;It;)Ie[un++]=It,It=It.nextSibling;Ie.length=un,delete Ie[Ie.length]}}}function er(L,N){var X=N.previousSibling,Ie=N.nextSibling;return X?X.nextSibling=Ie:L.firstChild=Ie,Ie?Ie.previousSibling=X:L.lastChild=X,N.parentNode=null,N.previousSibling=null,N.nextSibling=null,Jt(L.ownerDocument,L),N}function gn(L){return L&&L.nodeType===zn.DOCUMENT_TYPE_NODE}function Tn(L){return L&&L.nodeType===zn.ELEMENT_NODE}function Mr(L){return L&&L.nodeType===zn.TEXT_NODE}function hs(L,N){var X=L.childNodes||[];if(st(X,Tn)||gn(N))return!1;var Ie=st(X,gn);return!(N&&Ie&&X.indexOf(Ie)>X.indexOf(N))}function R(L,N){var X=L.childNodes||[];if(st(X,function Ie(un){return Tn(un)&&un!==N}))return!1;var It=st(X,gn);return!(N&&It&&X.indexOf(It)>X.indexOf(N))}function x(L,N,X){var Ie=L.childNodes||[],It=N.childNodes||[];if(N.nodeType===zn.DOCUMENT_FRAGMENT_NODE){var un=It.filter(Tn);if(un.length>1||st(It,Mr))throw new jt(Ye,"More than one element or text in fragment");if(1===un.length&&!hs(L,X))throw new jt(Ye,"Element in fragment can not be inserted before doctype")}if(Tn(N)&&!hs(L,X))throw new jt(Ye,"Only one element can be added and only after doctype");if(gn(N)){if(st(Ie,gn))throw new jt(Ye,"Only one doctype is allowed");var _r=st(Ie,Tn);if(X&&Ie.indexOf(_r)<Ie.indexOf(X))throw new jt(Ye,"Doctype can only be inserted before an element");if(!X&&_r)throw new jt(Ye,"Doctype can not be appended since element is present")}}function O(L,N,X){var Ie=L.childNodes||[],It=N.childNodes||[];if(N.nodeType===zn.DOCUMENT_FRAGMENT_NODE){var un=It.filter(Tn);if(un.length>1||st(It,Mr))throw new jt(Ye,"More than one element or text in fragment");if(1===un.length&&!R(L,X))throw new jt(Ye,"Element in fragment can not be inserted before doctype")}if(Tn(N)&&!R(L,X))throw new jt(Ye,"Only one element can be added and only after doctype");if(gn(N)){if(st(Ie,function(Te){return gn(Te)&&Te!==X}))throw new jt(Ye,"Only one doctype is allowed");var _r=st(Ie,Tn);if(X&&Ie.indexOf(_r)<Ie.indexOf(X))throw new jt(Ye,"Doctype can only be inserted before an element")}}function ne(L,N,X,Ie){(function b(L,N,X){if(!function nn(L){return L&&(L.nodeType===zn.DOCUMENT_NODE||L.nodeType===zn.DOCUMENT_FRAGMENT_NODE||L.nodeType===zn.ELEMENT_NODE)}(L))throw new jt(Ye,"Unexpected parent node type "+L.nodeType);if(X&&X.parentNode!==L)throw new jt(kt,"child not in parent");if(!function Kt(L){return L&&(Tn(L)||Mr(L)||gn(L)||L.nodeType===zn.DOCUMENT_FRAGMENT_NODE||L.nodeType===zn.COMMENT_NODE||L.nodeType===zn.PROCESSING_INSTRUCTION_NODE)}(N)||gn(N)&&L.nodeType!==zn.DOCUMENT_NODE)throw new jt(Ye,"Unexpected node type "+N.nodeType+" for parent node type "+L.nodeType)})(L,N,X),L.nodeType===zn.DOCUMENT_NODE&&(Ie||x)(L,N,X);var It=N.parentNode;if(It&&It.removeChild(N),N.nodeType===tt){var un=N.firstChild;if(null==un)return N;var _r=N.lastChild}else un=_r=N;var pi=X?X.previousSibling:L.lastChild;un.previousSibling=pi,_r.nextSibling=X,pi?pi.nextSibling=un:L.firstChild=un,null==X?L.lastChild=_r:X.previousSibling=_r;do{un.parentNode=L}while(un!==_r&&(un=un.nextSibling));return Jt(L.ownerDocument||L,L),N.nodeType==tt&&(N.firstChild=N.lastChild=null),N}function Oe(){this._nsMap={}}function Yt(){}function Kn(){}function or(){}function ee(){}function pe(){}function Qe(){}function lt(){}function tn(){}function Cn(){}function rr(){}function Gr(){}function dr(){}function zr(L,N){var X=[],Ie=9==this.nodeType&&this.documentElement||this,It=Ie.prefix,un=Ie.namespaceURI;if(un&&null==It&&null==(It=Ie.lookupPrefix(un)))var _r=[{namespace:un,prefix:null}];return Ei(this,X,L,N,_r),X.join("")}function Fs(L,N,X){var Ie=L.prefix||"",It=L.namespaceURI;if(!It||"xml"===Ie&&It===qe.XML||It===qe.XMLNS)return!1;for(var un=X.length;un--;){var _r=X[un];if(_r.prefix===Ie)return _r.namespace!==It}return!0}function di(L,N,X){L.push(" ",N,'="',X.replace(/[<>&"\t\n\r]/g,k),'"')}function Ei(L,N,X,Ie,It){if(It||(It=[]),Ie){if(!(L=Ie(L)))return;if("string"==typeof L)return void N.push(L)}switch(L.nodeType){case Se:var un=L.attributes,_r=un.length,kn=L.firstChild,pi=L.tagName,Xi=pi;if(!(X=qe.isHTML(L.namespaceURI)||X)&&!L.prefix&&L.namespaceURI){for(var Te,Vr=0;Vr<un.length;Vr++)if("xmlns"===un.item(Vr).name){Te=un.item(Vr).value;break}if(!Te)for(var Ps=It.length-1;Ps>=0;Ps--)if(""===(wr=It[Ps]).prefix&&wr.namespace===L.namespaceURI){Te=wr.namespace;break}if(Te!==L.namespaceURI)for(Ps=It.length-1;Ps>=0;Ps--){var wr;if((wr=It[Ps]).namespace===L.namespaceURI){wr.prefix&&(Xi=wr.prefix+":"+pi);break}}}N.push("<",Xi);for(var ko=0;ko<_r;ko++)"xmlns"==(Yi=un.item(ko)).prefix?It.push({prefix:Yi.localName,namespace:Yi.value}):"xmlns"==Yi.nodeName&&It.push({prefix:"",namespace:Yi.value});for(ko=0;ko<_r;ko++){var Yi,Pn,ct;Fs(Yi=un.item(ko),0,It)&&(di(N,(Pn=Yi.prefix||"")?"xmlns:"+Pn:"xmlns",ct=Yi.namespaceURI),It.push({prefix:Pn,namespace:ct})),Ei(Yi,N,X,Ie,It)}if(pi===Xi&&Fs(L,0,It)&&(di(N,(Pn=L.prefix||"")?"xmlns:"+Pn:"xmlns",ct=L.namespaceURI),It.push({prefix:Pn,namespace:ct})),kn||X&&!/^(?:meta|link|img|br|hr|input)$/i.test(pi)){if(N.push(">"),X&&/^script$/i.test(pi))for(;kn;)kn.data?N.push(kn.data):Ei(kn,N,X,Ie,It.slice()),kn=kn.nextSibling;else for(;kn;)Ei(kn,N,X,Ie,It.slice()),kn=kn.nextSibling;N.push("</",Xi,">")}else N.push("/>");return;case ye:case tt:for(kn=L.firstChild;kn;)Ei(kn,N,X,Ie,It.slice()),kn=kn.nextSibling;return;case $:return di(N,L.name,L.value);case q:return N.push(L.data.replace(/[<&>]/g,k));case oe:return N.push("<![CDATA[",L.data,"]]>");case we:return N.push("\x3c!--",L.data,"--\x3e");case Ee:var Js=L.publicId,ns=L.systemId;if(N.push("<!DOCTYPE ",L.name),Js)N.push(" PUBLIC ",Js),ns&&"."!=ns&&N.push(" ",ns),N.push(">");else if(ns&&"."!=ns)N.push(" SYSTEM ",ns,">");else{var tr=L.internalSubset;tr&&N.push(" [",tr,"]"),N.push(">")}return;case Q:return N.push("<?",L.target," ",L.data,"?>");case be:return N.push("&",L.nodeName,";");default:N.push("??",L.nodeName)}}function xo(L,N,X){var Ie;switch(N.nodeType){case Se:(Ie=N.cloneNode(!1)).ownerDocument=L;case tt:break;case $:X=!0}if(Ie||(Ie=N.cloneNode(!1)),Ie.ownerDocument=L,Ie.parentNode=null,X)for(var It=N.firstChild;It;)Ie.appendChild(xo(L,It,X)),It=It.nextSibling;return Ie}function Br(L,N,X){var Ie=new N.constructor;for(var It in N)if(Object.prototype.hasOwnProperty.call(N,It)){var un=N[It];"object"!=typeof un&&un!=Ie[It]&&(Ie[It]=un)}switch(N.childNodes&&(Ie.childNodes=new fn),Ie.ownerDocument=L,Ie.nodeType){case Se:var _r=N.attributes,pi=Ie.attributes=new Fn,Xi=_r.length;pi._ownerElement=Ie;for(var Te=0;Te<Xi;Te++)Ie.setAttributeNode(Br(L,_r.item(Te),!0));break;case $:X=!0}if(X)for(var Vr=N.firstChild;Vr;)Ie.appendChild(Br(L,Vr,X)),Vr=Vr.nextSibling;return Ie}function Ua(L,N,X){L[N]=X}mt.INVALID_STATE_ERR=(Nt[11]="Invalid state",11),mt.SYNTAX_ERR=(Nt[12]="Syntax error",12),mt.INVALID_MODIFICATION_ERR=(Nt[13]="Invalid modification",13),mt.NAMESPACE_ERR=(Nt[14]="Invalid namespace",14),mt.INVALID_ACCESS_ERR=(Nt[15]="Invalid access",15),jt.prototype=Error.prototype,De(mt,jt),fn.prototype={length:0,item:function(L){return L>=0&&L<this.length?this[L]:null},toString:function(L,N){for(var X=[],Ie=0;Ie<this.length;Ie++)Ei(this[Ie],X,L,N);return X.join("")},filter:function(L){return Array.prototype.filter.call(this,L)},indexOf:function(L){return Array.prototype.indexOf.call(this,L)}},jr.prototype.item=function(L){return _s(this),this[L]||null},Xe(jr,fn),Fn.prototype={length:0,item:fn.prototype.item,getNamedItem:function(L){for(var N=this.length;N--;){var X=this[N];if(X.nodeName==L)return X}},setNamedItem:function(L){var N=L.ownerElement;if(N&&N!=this._ownerElement)throw new jt(P);var X=this.getNamedItem(L.nodeName);return Ss(this._ownerElement,this,L,X),X},setNamedItemNS:function(L){var X,N=L.ownerElement;if(N&&N!=this._ownerElement)throw new jt(P);return X=this.getNamedItemNS(L.namespaceURI,L.localName),Ss(this._ownerElement,this,L,X),X},removeNamedItem:function(L){var N=this.getNamedItem(L);return Vi(this._ownerElement,this,N),N},removeNamedItemNS:function(L,N){var X=this.getNamedItemNS(L,N);return Vi(this._ownerElement,this,X),X},getNamedItemNS:function(L,N){for(var X=this.length;X--;){var Ie=this[X];if(Ie.localName==N&&Ie.namespaceURI==L)return Ie}return null}},lo.prototype={hasFeature:function(L,N){return!0},createDocument:function(L,N,X){var Ie=new Re;if(Ie.implementation=this,Ie.childNodes=new fn,Ie.doctype=X||null,X&&Ie.appendChild(X),N){var It=Ie.createElementNS(L,N);Ie.appendChild(It)}return Ie},createDocumentType:function(L,N,X){var Ie=new Qe;return Ie.name=L,Ie.nodeName=L,Ie.publicId=N||"",Ie.systemId=X||"",Ie}},zn.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(L,N){return ne(this,L,N)},replaceChild:function(L,N){ne(this,L,N,O),N&&this.removeChild(N)},removeChild:function(L){return er(this,L)},appendChild:function(L){return this.insertBefore(L,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(L){return Br(this.ownerDocument||this,this,L)},normalize:function(){for(var L=this.firstChild;L;){var N=L.nextSibling;N&&N.nodeType==q&&L.nodeType==q?(this.removeChild(N),L.appendData(N.data)):(L.normalize(),L=N)}},isSupported:function(L,N){return this.ownerDocument.implementation.hasFeature(L,N)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(L){for(var N=this;N;){var X=N._nsMap;if(X)for(var Ie in X)if(Object.prototype.hasOwnProperty.call(X,Ie)&&X[Ie]===L)return Ie;N=N.nodeType==$?N.ownerDocument:N.parentNode}return null},lookupNamespaceURI:function(L){for(var N=this;N;){var X=N._nsMap;if(X&&Object.prototype.hasOwnProperty.call(X,L))return X[L];N=N.nodeType==$?N.ownerDocument:N.parentNode}return null},isDefaultNamespace:function(L){return null==this.lookupPrefix(L)}},De(he,zn),De(he,zn.prototype),Re.prototype={nodeName:"#document",nodeType:ye,doctype:null,documentElement:null,_inc:1,insertBefore:function(L,N){if(L.nodeType==tt){for(var X=L.firstChild;X;){var Ie=X.nextSibling;this.insertBefore(X,N),X=Ie}return L}return ne(this,L,N),L.ownerDocument=this,null===this.documentElement&&L.nodeType===Se&&(this.documentElement=L),L},removeChild:function(L){return this.documentElement==L&&(this.documentElement=null),er(this,L)},replaceChild:function(L,N){ne(this,L,N,O),L.ownerDocument=this,N&&this.removeChild(N),Tn(L)&&(this.documentElement=L)},importNode:function(L,N){return xo(this,L,N)},getElementById:function(L){var N=null;return ce(this.documentElement,function(X){if(X.nodeType==Se&&X.getAttribute("id")==L)return N=X,!0}),N},getElementsByClassName:function(L){var N=fe(L);return new jr(this,function(X){var Ie=[];return N.length>0&&ce(X.documentElement,function(It){if(It!==X&&It.nodeType===Se){var un=It.getAttribute("class");if(un){var _r=L===un;if(!_r){var pi=fe(un);_r=N.every(function f(L){return function(N){return L&&-1!==L.indexOf(N)}}(pi))}_r&&Ie.push(It)}}}),Ie})},createElement:function(L){var N=new Oe;return N.ownerDocument=this,N.nodeName=L,N.tagName=L,N.localName=L,N.childNodes=new fn,(N.attributes=new Fn)._ownerElement=N,N},createDocumentFragment:function(){var L=new rr;return L.ownerDocument=this,L.childNodes=new fn,L},createTextNode:function(L){var N=new or;return N.ownerDocument=this,N.appendData(L),N},createComment:function(L){var N=new ee;return N.ownerDocument=this,N.appendData(L),N},createCDATASection:function(L){var N=new pe;return N.ownerDocument=this,N.appendData(L),N},createProcessingInstruction:function(L,N){var X=new Gr;return X.ownerDocument=this,X.tagName=X.nodeName=X.target=L,X.nodeValue=X.data=N,X},createAttribute:function(L){var N=new Yt;return N.ownerDocument=this,N.name=L,N.nodeName=L,N.localName=L,N.specified=!0,N},createEntityReference:function(L){var N=new Cn;return N.ownerDocument=this,N.nodeName=L,N},createElementNS:function(L,N){var X=new Oe,Ie=N.split(":"),It=X.attributes=new Fn;return X.childNodes=new fn,X.ownerDocument=this,X.nodeName=N,X.tagName=N,X.namespaceURI=L,2==Ie.length?(X.prefix=Ie[0],X.localName=Ie[1]):X.localName=N,It._ownerElement=X,X},createAttributeNS:function(L,N){var X=new Yt,Ie=N.split(":");return X.ownerDocument=this,X.nodeName=N,X.name=N,X.namespaceURI=L,X.specified=!0,2==Ie.length?(X.prefix=Ie[0],X.localName=Ie[1]):X.localName=N,X}},Xe(Re,zn),Re.prototype.getElementsByTagName=(Oe.prototype={nodeType:Se,hasAttribute:function(L){return null!=this.getAttributeNode(L)},getAttribute:function(L){var N=this.getAttributeNode(L);return N&&N.value||""},getAttributeNode:function(L){return this.attributes.getNamedItem(L)},setAttribute:function(L,N){var X=this.ownerDocument.createAttribute(L);X.value=X.nodeValue=""+N,this.setAttributeNode(X)},removeAttribute:function(L){var N=this.getAttributeNode(L);N&&this.removeAttributeNode(N)},appendChild:function(L){return L.nodeType===tt?this.insertBefore(L,null):function _e(L,N){return N.parentNode&&N.parentNode.removeChild(N),N.parentNode=L,N.previousSibling=L.lastChild,N.nextSibling=null,N.previousSibling?N.previousSibling.nextSibling=N:L.firstChild=N,L.lastChild=N,Jt(L.ownerDocument,L,N),N}(this,L)},setAttributeNode:function(L){return this.attributes.setNamedItem(L)},setAttributeNodeNS:function(L){return this.attributes.setNamedItemNS(L)},removeAttributeNode:function(L){return this.attributes.removeNamedItem(L.nodeName)},removeAttributeNS:function(L,N){var X=this.getAttributeNodeNS(L,N);X&&this.removeAttributeNode(X)},hasAttributeNS:function(L,N){return null!=this.getAttributeNodeNS(L,N)},getAttributeNS:function(L,N){var X=this.getAttributeNodeNS(L,N);return X&&X.value||""},setAttributeNS:function(L,N,X){var Ie=this.ownerDocument.createAttributeNS(L,N);Ie.value=Ie.nodeValue=""+X,this.setAttributeNode(Ie)},getAttributeNodeNS:function(L,N){return this.attributes.getNamedItemNS(L,N)},getElementsByTagName:function(L){return new jr(this,function(N){var X=[];return ce(N,function(Ie){Ie!==N&&Ie.nodeType==Se&&("*"===L||Ie.tagName==L)&&X.push(Ie)}),X})},getElementsByTagNameNS:function(L,N){return new jr(this,function(X){var Ie=[];return ce(X,function(It){It!==X&&It.nodeType===Se&&("*"===L||It.namespaceURI===L)&&("*"===N||It.localName==N)&&Ie.push(It)}),Ie})}}).getElementsByTagName,Re.prototype.getElementsByTagNameNS=Oe.prototype.getElementsByTagNameNS,Xe(Oe,zn),Yt.prototype.nodeType=$,Xe(Yt,zn),Kn.prototype={data:"",substringData:function(L,N){return this.data.substring(L,L+N)},appendData:function(L){this.nodeValue=this.data=L=this.data+L,this.length=L.length},insertData:function(L,N){this.replaceData(L,0,N)},appendChild:function(L){throw new Error(Nt[Ye])},deleteData:function(L,N){this.replaceData(L,N,"")},replaceData:function(L,N,X){var Ie=this.data.substring(0,L),It=this.data.substring(L+N);this.nodeValue=this.data=X=Ie+X+It,this.length=X.length}},Xe(Kn,zn),or.prototype={nodeName:"#text",nodeType:q,splitText:function(L){var N=this.data,X=N.substring(L);N=N.substring(0,L),this.data=this.nodeValue=N,this.length=N.length;var Ie=this.ownerDocument.createTextNode(X);return this.parentNode&&this.parentNode.insertBefore(Ie,this.nextSibling),Ie}},Xe(or,Kn),ee.prototype={nodeName:"#comment",nodeType:we},Xe(ee,Kn),pe.prototype={nodeName:"#cdata-section",nodeType:oe},Xe(pe,Kn),Qe.prototype.nodeType=Ee,Xe(Qe,zn),lt.prototype.nodeType=xt,Xe(lt,zn),tn.prototype.nodeType=yt,Xe(tn,zn),Cn.prototype.nodeType=be,Xe(Cn,zn),rr.prototype.nodeName="#document-fragment",rr.prototype.nodeType=tt,Xe(rr,zn),Gr.prototype.nodeType=Q,Xe(Gr,zn),dr.prototype.serializeToString=function(L,N,X){return zr.call(L,N,X)},zn.prototype.toString=zr;try{if(Object.defineProperty){let L=function(N){switch(N.nodeType){case Se:case tt:var X=[];for(N=N.firstChild;N;)7!==N.nodeType&&8!==N.nodeType&&X.push(L(N)),N=N.nextSibling;return X.join("");default:return N.nodeValue}};Object.defineProperty(jr.prototype,"length",{get:function(){return _s(this),this.$$length}}),Object.defineProperty(zn.prototype,"textContent",{get:function(){return L(this)},set:function(N){switch(this.nodeType){case Se:case tt:for(;this.firstChild;)this.removeChild(this.firstChild);(N||String(N))&&this.appendChild(this.ownerDocument.createTextNode(N));break;default:this.data=N,this.value=N,this.nodeValue=N}}}),Ua=function(N,X,Ie){N["$$"+X]=Ie}}}catch{}ot.DocumentType=Qe,ot.DOMException=jt,ot.DOMImplementation=lo,ot.Element=Oe,ot.Node=zn,ot.NodeList=fn,ot.XMLSerializer=dr},8868:(En,ot)=>{var qe,xe=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global,le=function(){function qe(){this.fetch=!1,this.DOMException=xe.DOMException}return qe.prototype=xe,new qe}();qe=le,function(je){var z=typeof qe<"u"&&qe||typeof self<"u"&&self||typeof global<"u"&&global||{},fe_searchParams="URLSearchParams"in z,fe_iterable="Symbol"in z&&"iterator"in Symbol,fe_blob="FileReader"in z&&"Blob"in z&&function(){try{return new Blob,!0}catch{return!1}}(),fe_formData="FormData"in z,fe_arrayBuffer="ArrayBuffer"in z;if(fe_arrayBuffer)var De=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Xe=ArrayBuffer.isView||function(te){return te&&De.indexOf(Object.prototype.toString.call(te))>-1};function he(te){if("string"!=typeof te&&(te=String(te)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(te)||""===te)throw new TypeError('Invalid character in header field name: "'+te+'"');return te.toLowerCase()}function Se(te){return"string"!=typeof te&&(te=String(te)),te}function $(te){var Ne={next:function(){var vt=te.shift();return{done:void 0===vt,value:vt}}};return fe_iterable&&(Ne[Symbol.iterator]=function(){return Ne}),Ne}function q(te){this.map={},te instanceof q?te.forEach(function(Ne,vt){this.append(vt,Ne)},this):Array.isArray(te)?te.forEach(function(Ne){if(2!=Ne.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+Ne.length);this.append(Ne[0],Ne[1])},this):te&&Object.getOwnPropertyNames(te).forEach(function(Ne){this.append(Ne,te[Ne])},this)}function oe(te){if(!te._noBody){if(te.bodyUsed)return Promise.reject(new TypeError("Already read"));te.bodyUsed=!0}}function be(te){return new Promise(function(Ne,vt){te.onload=function(){Ne(te.result)},te.onerror=function(){vt(te.error)}})}function yt(te){var Ne=new FileReader,vt=be(Ne);return Ne.readAsArrayBuffer(te),vt}function ye(te){if(te.slice)return te.slice(0);var Ne=new Uint8Array(te.byteLength);return Ne.set(new Uint8Array(te)),Ne.buffer}function Ee(){return this.bodyUsed=!1,this._initBody=function(te){this.bodyUsed=this.bodyUsed,this._bodyInit=te,te?"string"==typeof te?this._bodyText=te:fe_blob&&Blob.prototype.isPrototypeOf(te)?this._bodyBlob=te:fe_formData&&FormData.prototype.isPrototypeOf(te)?this._bodyFormData=te:fe_searchParams&&URLSearchParams.prototype.isPrototypeOf(te)?this._bodyText=te.toString():fe_arrayBuffer&&fe_blob&&function f(te){return te&&DataView.prototype.isPrototypeOf(te)}(te)?(this._bodyArrayBuffer=ye(te.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):fe_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(te)||Xe(te))?this._bodyArrayBuffer=ye(te):this._bodyText=te=Object.prototype.toString.call(te):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof te?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):fe_searchParams&&URLSearchParams.prototype.isPrototypeOf(te)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},fe_blob&&(this.blob=function(){var te=oe(this);if(te)return te;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return oe(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(fe_blob)return this.blob().then(yt);throw new Error("could not read as ArrayBuffer")},this.text=function(){var te=oe(this);if(te)return te;if(this._bodyBlob)return function Q(te){var Ne=new FileReader,vt=be(Ne),kt=/charset=([A-Za-z0-9_-]+)/.exec(te.type);return Ne.readAsText(te,kt?kt[1]:"utf-8"),vt}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function we(te){for(var Ne=new Uint8Array(te),vt=new Array(Ne.length),kt=0;kt<Ne.length;kt++)vt[kt]=String.fromCharCode(Ne[kt]);return vt.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},fe_formData&&(this.formData=function(){return this.text().then(Nt)}),this.json=function(){return this.text().then(JSON.parse)},this}q.prototype.append=function(te,Ne){te=he(te),Ne=Se(Ne);var vt=this.map[te];this.map[te]=vt?vt+", "+Ne:Ne},q.prototype.delete=function(te){delete this.map[he(te)]},q.prototype.get=function(te){return te=he(te),this.has(te)?this.map[te]:null},q.prototype.has=function(te){return this.map.hasOwnProperty(he(te))},q.prototype.set=function(te,Ne){this.map[he(te)]=Se(Ne)},q.prototype.forEach=function(te,Ne){for(var vt in this.map)this.map.hasOwnProperty(vt)&&te.call(Ne,this.map[vt],vt,this)},q.prototype.keys=function(){var te=[];return this.forEach(function(Ne,vt){te.push(vt)}),$(te)},q.prototype.values=function(){var te=[];return this.forEach(function(Ne){te.push(Ne)}),$(te)},q.prototype.entries=function(){var te=[];return this.forEach(function(Ne,vt){te.push([vt,Ne])}),$(te)},fe_iterable&&(q.prototype[Symbol.iterator]=q.prototype.entries);var tt=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function mt(te,Ne){if(!(this instanceof mt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var vt=(Ne=Ne||{}).body;if(te instanceof mt){if(te.bodyUsed)throw new TypeError("Already read");this.url=te.url,this.credentials=te.credentials,Ne.headers||(this.headers=new q(te.headers)),this.method=te.method,this.mode=te.mode,this.signal=te.signal,!vt&&null!=te._bodyInit&&(vt=te._bodyInit,te.bodyUsed=!0)}else this.url=String(te);if(this.credentials=Ne.credentials||this.credentials||"same-origin",(Ne.headers||!this.headers)&&(this.headers=new q(Ne.headers)),this.method=function xt(te){var Ne=te.toUpperCase();return tt.indexOf(Ne)>-1?Ne:te}(Ne.method||this.method||"GET"),this.mode=Ne.mode||this.mode||null,this.signal=Ne.signal||this.signal||function(){if("AbortController"in z)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&vt)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(vt),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==Ne.cache&&"no-cache"!==Ne.cache)){var kt=/([?&])_=[^&]*/;kt.test(this.url)?this.url=this.url.replace(kt,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function Nt(te){var Ne=new FormData;return te.trim().split("&").forEach(function(vt){if(vt){var kt=vt.split("="),Ft=kt.shift().replace(/\+/g," "),P=kt.join("=").replace(/\+/g," ");Ne.append(decodeURIComponent(Ft),decodeURIComponent(P))}}),Ne}function Be(te){var Ne=new q;return te.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(kt){return 0===kt.indexOf("\n")?kt.substr(1,kt.length):kt}).forEach(function(kt){var Ft=kt.split(":"),P=Ft.shift().trim();if(P){var U=Ft.join(":").trim();try{Ne.append(P,U)}catch(Ve){console.warn("Response "+Ve.message)}}}),Ne}function Ze(te,Ne){if(!(this instanceof Ze))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(Ne||(Ne={}),this.type="default",this.status=void 0===Ne.status?200:Ne.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===Ne.statusText?"":""+Ne.statusText,this.headers=new q(Ne.headers),this.url=Ne.url||"",this._initBody(te)}mt.prototype.clone=function(){return new mt(this,{body:this._bodyInit})},Ee.call(mt.prototype),Ee.call(Ze.prototype),Ze.prototype.clone=function(){return new Ze(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new q(this.headers),url:this.url})},Ze.error=function(){var te=new Ze(null,{status:200,statusText:""});return te.ok=!1,te.status=0,te.type="error",te};var Ye=[301,302,303,307,308];Ze.redirect=function(te,Ne){if(-1===Ye.indexOf(Ne))throw new RangeError("Invalid status code");return new Ze(null,{status:Ne,headers:{location:te}})},je.DOMException=z.DOMException;try{new je.DOMException}catch{je.DOMException=function(Ne,vt){this.message=Ne,this.name=vt;var kt=Error(Ne);this.stack=kt.stack},je.DOMException.prototype=Object.create(Error.prototype),je.DOMException.prototype.constructor=je.DOMException}function $t(te,Ne){return new Promise(function(vt,kt){var Ft=new mt(te,Ne);if(Ft.signal&&Ft.signal.aborted)return kt(new je.DOMException("Aborted","AbortError"));var P=new XMLHttpRequest;function U(){P.abort()}if(P.onload=function(){var et={statusText:P.statusText,headers:Be(P.getAllResponseHeaders()||"")};et.status=0===Ft.url.indexOf("file://")&&(P.status<200||P.status>599)?200:P.status,et.url="responseURL"in P?P.responseURL:et.headers.get("X-Request-URL");var sn="response"in P?P.response:P.responseText;setTimeout(function(){vt(new Ze(sn,et))},0)},P.onerror=function(){setTimeout(function(){kt(new TypeError("Network request failed"))},0)},P.ontimeout=function(){setTimeout(function(){kt(new TypeError("Network request timed out"))},0)},P.onabort=function(){setTimeout(function(){kt(new je.DOMException("Aborted","AbortError"))},0)},P.open(Ft.method,function Ve(et){try{return""===et&&z.location.href?z.location.href:et}catch{return et}}(Ft.url),!0),"include"===Ft.credentials?P.withCredentials=!0:"omit"===Ft.credentials&&(P.withCredentials=!1),"responseType"in P&&(fe_blob?P.responseType="blob":fe_arrayBuffer&&(P.responseType="arraybuffer")),Ne&&"object"==typeof Ne.headers&&!(Ne.headers instanceof q||z.Headers&&Ne.headers instanceof z.Headers)){var Je=[];Object.getOwnPropertyNames(Ne.headers).forEach(function(et){Je.push(he(et)),P.setRequestHeader(et,Se(Ne.headers[et]))}),Ft.headers.forEach(function(et,sn){-1===Je.indexOf(sn)&&P.setRequestHeader(sn,et)})}else Ft.headers.forEach(function(et,sn){P.setRequestHeader(sn,et)});Ft.signal&&(Ft.signal.addEventListener("abort",U),P.onreadystatechange=function(){4===P.readyState&&Ft.signal.removeEventListener("abort",U)}),P.send(typeof Ft._bodyInit>"u"?null:Ft._bodyInit)})}$t.polyfill=!0,z.fetch||(z.fetch=$t,z.Headers=q,z.Request=mt,z.Response=Ze),je.Headers=q,je.Request=mt,je.Response=Ze,je.fetch=$t,Object.defineProperty(je,"__esModule",{value:!0})}({}),le.fetch.ponyfill=!0,delete le.fetch.polyfill;var st=xe.fetch?xe:le;(ot=st.fetch).default=st.fetch,ot.fetch=st.fetch,ot.Headers=st.Headers,ot.Request=st.Request,ot.Response=st.Response,En.exports=ot},9223:(En,ot,xe)=>{"use strict";xe.d(ot,{Kw:()=>z,Uz:()=>oe,VQ:()=>Se,h4:()=>q,jI:()=>f,tE:()=>ut,uN:()=>Q});var le=xe(1752),st=xe(2502);function ut(we){return we=we.split(";")[0].trim(),new le.A("http://www.w3.org/ns/iana/media-types/"+we+"#Resource")}function z(we,ye){we.callbacks={};for(var Ee=ye.length-1;Ee>=0;Ee--)we.callbacks[ye[Ee]]=[];we.addHook=function(tt){we.callbacks[tt]||(we.callbacks[tt]=[])},we.addCallback=function(tt,xt){we.callbacks[tt].push(xt)},we.removeCallback=function(tt,xt){for(var mt=0;mt<we.callbacks[tt].length;mt++)if(we.callbacks[tt][mt].name===xt)return we.callbacks[tt].splice(mt,1),!0;return!1},we.insertCallback=function(tt,xt){we.callbacks[tt].unshift(xt)},we.fireCallbacks=function(xt,mt){var Ye,Nt=[],Be=[],Ze=we.callbacks[xt].length;let $t;for(Ye=Ze-1;Ye>=0;Ye--)$t=we.callbacks[xt][Ye],$t&&$t.apply(we,mt)&&Nt.push($t);for(Ye=Nt.length-1;Ye>=0;Ye--)Be.push(Nt[Ye]);for(Ye=Ze;Ye<we.callbacks[xt].length;Ye++)Be.push(we.callbacks[xt][Ye]);we.callbacks[xt]=Be}}function f(we,ye){var Ee=[];(ye=ye||{})&&ye.selfClosing&&ye.selfClosing.split(" ").forEach(function(xt){Ee[xt]=!0});var tt=[];return ye&&ye.skipAttributes&&ye.skipAttributes.split(" ").forEach(function(xt){tt[xt]=!0}),De(we,ye,Ee,tt)}function De(we,ye,Ee,tt){var xt,mt="",Nt=[!1];if(typeof we.nodeType>"u")return mt;if(1===we.nodeType){if(we.hasAttribute("class")&&ye&&ye.classWithChildText&&we.matches(ye.classWithChildText.class))mt+=we.querySelector(ye.classWithChildText.element).textContent;else if(!(ye&&ye.skipNodeWithClass&&we.matches("."+ye.skipNodeWithClass))){var Be=we.nodeName.toLowerCase();mt+="<"+Be;var Ze=[];for(xt=we.attributes.length-1;xt>=0;xt--){var Ye=we.attributes[xt];if(!(tt&&tt.length>0&&tt[Ye.name]||/^\d+$/.test(Ye.name))){if("class"===Ye.name&&ye&&ye.replaceClassItemWith&&Ye.value.split(" ").indexOf(ye.replaceClassItemWith.source)>-1){var $t=new RegExp(ye.replaceClassItemWith.source,"g");Ye.value=Ye.value.replace($t,ye.replaceClassItemWith.target).trim()}"class"===Ye.name&&ye&&ye.skipClassWithValue&&ye.skipClassWithValue===Ye.value||Ze.push(Ye.name+"='"+Ye.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(Ze.length>0&&(ye&&ye.sortAttributes&&Ze.sort(function(Ne,vt){return Ne.toLowerCase().localeCompare(vt.toLowerCase())}),mt+=" "+Ze.join(" ")),Ee&&Ee.ename)mt+=" />";else{for(mt+=">",mt+="html"===Be?"\n  ":"",Nt.push("style"===Be||"script"===Be),xt=0;xt<we.childNodes.length;xt++)mt+=De(we.childNodes[xt]);Nt.pop(),mt+="body"===Be?"</"+Be+">\n":"</"+Be+">"}}}else if(8===we.nodeType)mt+="\x3c!--"+we.nodeValue+"--\x3e";else if(3===we.nodeType||4===we.nodeType){var te=we.nodeValue.replace(/\n+$/,"");mt+=Nt[Nt.length-1]?te:te.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+we.nodeType),console.log(we);return mt}function he(we,ye,Ee,tt){var xt=function(Be){return"BlankNode"===Be.termType?null:Be},mt=function(Be){var Ze=Ee.statementsMatching(Be).map(function(Ye){return xt(Ye.subject)+" "+xt(Ye.predicate)+" "+xt(Ye.object)}).concat(Ee.statementsMatching(void 0,void 0,Be).map(function(Ye){return xt(Ye.subject)+" "+xt(Ye.predicate)+" "+xt(Ye.object)}));return Ze.sort(),Ze.join("\n")};const Nt=Object.prototype.hasOwnProperty.call(Ee,"compareTerms")?Ee.compareTerms(we,ye):we.compareTerm(ye);return"BlankNode"===we.termType&&"BlankNode"===ye.termType?0===Nt?0:mt(we)>mt(ye)?1:mt(we)<mt(ye)?-1:Nt:tt&&we.uri&&ye.uri?(tt[we.uri]||we.uri).localeCompare(tt[ye.uri]||ye.uri):Nt}function Se(we,ye,Ee,tt){return he(we.subject,ye.subject,Ee,tt)||he(we.predicate,ye.predicate,Ee,tt)||he(we.object,ye.object,Ee,tt)}function q(we,ye){return ye=ye||{},En&&En.exports?(new st.DOMParser).parseFromString(we,ye.contentType||"application/xhtml+xml"):(typeof window<"u"&&window.DOMParser?new window.DOMParser:new st.DOMParser).parseFromString(we,"application/xml")}function oe(we,ye){for(var Ee=0;Ee<we.length;Ee++)if(we[Ee].subject.equals(ye.subject)&&we[Ee].predicate.equals(ye.predicate)&&we[Ee].object.equals(ye.object)&&we[Ee].why.equals(ye.why))return void we.splice(Ee,1);throw new Error("RDFArrayRemove: Array did not contain "+ye+" "+ye.why)}function Q(we){var ye=we+"\n";if(!we.stack)return ye+"No stack available.\n";for(var Ee=we.stack.toString().split("\n"),tt=[],xt=0;xt<Ee.length;xt++){var mt=Ee[xt];if(mt.indexOf("ecmaunit.js")>-1)break;"("==mt.charAt(0)&&(mt="function"+mt);var Nt=mt.split("@");tt.push(Nt)}for(xt=0;xt<tt.length;xt++)ye+="  "+tt[xt][1]+"\n    "+tt[xt][0];return ye}En=xe.hmd(En)},9423:(En,ot,xe)=>{"use strict";xe.d(ot,{A:()=>st});const st={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7}},9535:(En,ot,xe)=>{"use strict";xe.d(ot,{$Q:()=>st,BR:()=>$,Fn:()=>Q,H:()=>Ee,JG:()=>be,K9:()=>yt,Kk:()=>le,MG:()=>Se,P2:()=>ut,QW:()=>qe,S:()=>fe,_0:()=>q,bD:()=>f,bM:()=>oe,hu:()=>ye,i2:()=>Xe,ic:()=>je,lc:()=>De,ny:()=>he,r0:()=>z,sT:()=>we});const le="NamedNode",st="BlankNode",qe="Literal",ut="Variable",je="DefaultGraph",z="Collection",fe="Empty",f="Graph",De="text/html",Xe="application/ld+json",he="text/n3",Se="application/n3",$="application/nquads",q="application/n-quads",oe="application/n-triples",be="application/rdf+xml",yt="application/sparql-update",Q="application/sparql-update-single-match",we="text/turtle",ye="application/x-turtle",Ee="application/xhtml+xml"},9542:(En,ot,xe)=>{"use strict";xe.d(ot,{HT:()=>fe,Wp:()=>f,fB:()=>je,gp:()=>ut,sj:()=>z});var le=xe(3467),st=xe(3846),qe=xe(9749);function ut(De,Xe,he,Se,$){const q=(0,le.R8)((0,le.S5)(),De,Xe,he,Se);return!!(0,le.HY)($,q)&&(!!((0,le.ms)($,q)||q[0]>=$[0]&&q[2]<=$[2]||q[1]>=$[1]&&q[3]<=$[3])||(0,st.j)(De,Xe,he,Se,function(oe,be){return(0,le.Mx)($,oe,be)}))}function je(De,Xe,he,Se,$){for(let q=0,oe=he.length;q<oe;++q){if(ut(De,Xe,he[q],Se,$))return!0;Xe=he[q]}return!1}function z(De,Xe,he,Se,$){return!!(ut(De,Xe,he,Se,$)||(0,qe.a_)(De,Xe,he,Se,$[0],$[1])||(0,qe.a_)(De,Xe,he,Se,$[0],$[3])||(0,qe.a_)(De,Xe,he,Se,$[2],$[1])||(0,qe.a_)(De,Xe,he,Se,$[2],$[3]))}function fe(De,Xe,he,Se,$){if(!z(De,Xe,he[0],Se,$))return!1;if(1===he.length)return!0;for(let q=1,oe=he.length;q<oe;++q)if((0,qe.t7)(De,he[q-1],he[q],Se,$)&&!ut(De,he[q-1],he[q],Se,$))return!1;return!0}function f(De,Xe,he,Se,$){for(let q=0,oe=he.length;q<oe;++q){const be=he[q];if(fe(De,Xe,be,Se,$))return!0;Xe=be[be.length-1]}return!1}},9749:(En,ot,xe)=>{"use strict";xe.d(ot,{Gd:()=>je,a_:()=>qe,t7:()=>st,zb:()=>ut});var le=xe(3467);function st(z,fe,f,De,Xe){return!(0,le.sB)(Xe,function(Se){return!qe(z,fe,f,De,Se[0],Se[1])})}function qe(z,fe,f,De,Xe,he){let Se=0,$=z[f-De],q=z[f-De+1];for(;fe<f;fe+=De){const oe=z[fe],be=z[fe+1];q<=he?be>he&&(oe-$)*(he-q)-(Xe-$)*(be-q)>0&&Se++:be<=he&&(oe-$)*(he-q)-(Xe-$)*(be-q)<0&&Se--,$=oe,q=be}return 0!==Se}function ut(z,fe,f,De,Xe,he){if(0===f.length||!qe(z,fe,f[0],De,Xe,he))return!1;for(let Se=1,$=f.length;Se<$;++Se)if(qe(z,f[Se-1],f[Se],De,Xe,he))return!1;return!0}function je(z,fe,f,De,Xe,he){if(0===f.length)return!1;for(let Se=0,$=f.length;Se<$;++Se){const q=f[Se];if(ut(z,fe,q,De,Xe,he))return!0;fe=q[q.length-1]}return!1}},9788:(En,ot,xe)=>{"use strict";xe.d(ot,{A:()=>st});var le=xe(1423);class st{constructor(ut){(0,le.A)(this,"termType",void 0),(0,le.A)(this,"classOrder",void 0),(0,le.A)(this,"value",void 0),this.value=ut}substitute(ut){return this}compareTerm(ut){return this.classOrder<ut.classOrder?-1:this.classOrder>ut.classOrder?1:this.value<ut.value?-1:this.value>ut.value?1:0}equals(ut){return!!ut&&this.termType===ut.termType&&this.value===ut.value}hashString(){return this.toCanonical()}sameTerm(ut){return this.equals(ut)}toCanonical(){return this.toNT()}toNT(){return this.toString()}toNQ(){return this.toNT()}toString(){throw new Error("Node.toString() is abstract - see the subclasses instead")}}(0,le.A)(st,"fromValue",void 0),(0,le.A)(st,"toJS",void 0)},9973:(En,ot,xe)=>{"use strict";function le($,q,oe){return Math.min(Math.max($,q),oe)}function st($,q,oe,be,yt,Q){const we=yt-oe,ye=Q-be;if(0!==we||0!==ye){const Ee=(($-oe)*we+(q-be)*ye)/(we*we+ye*ye);Ee>1?(oe=yt,be=Q):Ee>0&&(oe+=we*Ee,be+=ye*Ee)}return qe($,q,oe,be)}function qe($,q,oe,be){const yt=oe-$,Q=be-q;return yt*yt+Q*Q}function f($,q,oe){return $+oe*(q-$)}function De($,q){const oe=Math.pow(10,q);return Math.round($*oe)/oe}function he($,q){return Math.floor(De($,q))}function Se($,q){return Math.ceil(De($,q))}xe.d(ot,{Cc:()=>f,Q1:()=>st,RI:()=>he,hG:()=>qe,mk:()=>Se,qE:()=>le})}},En=>{En(En.s=1382)}]);