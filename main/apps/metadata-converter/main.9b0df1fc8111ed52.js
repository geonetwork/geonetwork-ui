(self.webpackChunkmetadata_converter=self.webpackChunkmetadata_converter||[]).push([[792],{7844:(Fn,at,Ve)=>{"use strict";function ce(n,t){return Object.is(n,t)}let Ue=null,Je=!1,lt=1;const Pe=Symbol("SIGNAL");function _(n){const t=Ue;return Ue=n,t}const Xe={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ue(n){if(Je)throw new Error("");if(null===Ue)return;Ue.consumerOnSignalRead(n);const t=Ue.nextProducerIndex++;mt(Ue),t<Ue.producerNode.length&&Ue.producerNode[t]!==n&&Ct(Ue)&&et(Ue.producerNode[t],Ue.producerIndexOfThis[t]),Ue.producerNode[t]!==n&&(Ue.producerNode[t]=n,Ue.producerIndexOfThis[t]=Ct(Ue)?Ee(n,Ue,t):0),Ue.producerLastReadVersion[t]=n.version}function se(n){if((!Ct(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==lt)){if(!n.producerMustRecompute(n)&&!ve(n))return n.dirty=!1,void(n.lastCleanEpoch=lt);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=lt}}function q(n){if(void 0===n.liveConsumerNode)return;const t=Je;Je=!0;try{for(const e of n.liveConsumerNode)e.dirty||be(e)}finally{Je=t}}function ae(){return!1!==Ue?.consumerAllowSignalWrites}function be(n){n.dirty=!0,q(n),n.consumerMarkedDirty?.(n)}function St(n){return n&&(n.nextProducerIndex=0),_(n)}function ee(n,t){if(_(t),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Ct(n))for(let e=n.nextProducerIndex;e<n.producerNode.length;e++)et(n.producerNode[e],n.producerIndexOfThis[e]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ve(n){mt(n);for(let t=0;t<n.producerNode.length;t++){const e=n.producerNode[t],r=n.producerLastReadVersion[t];if(r!==e.version||(se(e),r!==e.version))return!0}return!1}function xe(n){if(mt(n),Ct(n))for(let t=0;t<n.producerNode.length;t++)et(n.producerNode[t],n.producerIndexOfThis[t]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Ee(n,t,e){if(Nt(n),0===n.liveConsumerNode.length&&Re(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Ee(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(e),n.liveConsumerNode.push(t)-1}function et(n,t){if(Nt(n),1===n.liveConsumerNode.length&&Re(n))for(let r=0;r<n.producerNode.length;r++)et(n.producerNode[r],n.producerIndexOfThis[r]);const e=n.liveConsumerNode.length-1;if(n.liveConsumerNode[t]=n.liveConsumerNode[e],n.liveConsumerIndexOfThis[t]=n.liveConsumerIndexOfThis[e],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,t<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[t],s=n.liveConsumerNode[t];mt(s),s.producerIndexOfThis[r]=t}}function Ct(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function mt(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Nt(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Re(n){return void 0!==n.producerNode}const Ye=Symbol("UNSET"),Wt=Symbol("COMPUTING"),ne=Symbol("ERRORED"),De={...Xe,value:Ye,dirty:!0,error:null,equal:ce,producerMustRecompute:n=>n.value===Ye||n.value===Wt,producerRecomputeValue(n){if(n.value===Wt)throw new Error("Detected cycle in computations.");const t=n.value;n.value=Wt;const e=St(n);let r;try{r=n.computation()}catch(s){r=ne,n.error=s}finally{ee(n,e)}t!==Ye&&t!==ne&&r!==ne&&n.equal(t,r)?n.value=t:(n.value=r,n.version++)}};let kt=function It(){throw new Error};function Dt(){kt()}let j=null;function ln(n,t){ae()||Dt(),n.equal(n.value,t)||(n.value=t,function Ts(n){n.version++,function ke(){lt++}(),q(n),j?.()}(n))}const jr={...Xe,equal:ce,value:void 0};const os=()=>{},Zs={...Xe,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{null!==n.schedule&&n.schedule(n.ref)},hasRun:!1,cleanupFn:os};function ir(n){return"function"==typeof n}function Hn(n){const e=n(r=>{Error.call(r),r.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const P=Hn(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((r,s)=>`${s+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function le(n,t){if(n){const e=n.indexOf(t);0<=e&&n.splice(e,1)}}class Ie{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const i of e)i.remove(this);else e.remove(this);const{initialTeardown:r}=this;if(ir(r))try{r()}catch(i){t=i instanceof P?i.errors:[i]}const{_finalizers:s}=this;if(s){this._finalizers=null;for(const i of s)try{Dn(i)}catch(o){t=t??[],o instanceof P?t=[...t,...o.errors]:t.push(o)}}if(t)throw new P(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Dn(t);else{if(t instanceof Ie){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&le(e,t)}remove(t){const{_finalizers:e}=this;e&&le(e,t),t instanceof Ie&&t._removeParent(this)}}Ie.EMPTY=(()=>{const n=new Ie;return n.closed=!0,n})();const _t=Ie.EMPTY;function sn(n){return n instanceof Ie||n&&"closed"in n&&ir(n.remove)&&ir(n.add)&&ir(n.unsubscribe)}function Dn(n){ir(n)?n():n.unsubscribe()}const Bn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Jt={setTimeout(n,t,...e){const{delegate:r}=Jt;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){const{delegate:t}=Jt;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function qt(n){Jt.setTimeout(()=>{const{onUnhandledError:t}=Bn;if(!t)throw n;t(n)})}function En(){}const Nn=L("C",void 0,void 0);function L(n,t,e){return{kind:n,value:t,error:e}}let A=null;function S(n){if(Bn.useDeprecatedSynchronousErrorHandling){const t=!A;if(t&&(A={errorThrown:!1,error:null}),n(),t){const{errorThrown:e,error:r}=A;if(A=null,e)throw r}}else n()}class re extends Ie{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,sn(t)&&t.add(this)):this.destination=Qe}static create(t,e,r){return new er(t,e,r)}next(t){this.isStopped?he(function fs(n){return L("N",n,void 0)}(t),this):this._next(t)}error(t){this.isStopped?he(function Rr(n){return L("E",void 0,n)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?he(Nn,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ae=Function.prototype.bind;function je(n,t){return Ae.call(n,t)}class jt{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){qn(r)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){qn(r)}else qn(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){qn(e)}}}class er extends re{constructor(t,e,r){let s;if(super(),ir(t)||!t)s={next:t??void 0,error:e??void 0,complete:r??void 0};else{let i;this&&Bn.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&je(t.next,i),error:t.error&&je(t.error,i),complete:t.complete&&je(t.complete,i)}):s=t}this.destination=new jt(s)}}function qn(n){Bn.useDeprecatedSynchronousErrorHandling?function O(n){Bn.useDeprecatedSynchronousErrorHandling&&A&&(A.errorThrown=!0,A.error=n)}(n):qt(n)}function he(n,t){const{onStoppedNotification:e}=Bn;e&&Jt.setTimeout(()=>e(n,t))}const Qe={closed:!0,next:En,error:function te(n){throw n},complete:En},ct="function"==typeof Symbol&&Symbol.observable||"@@observable";function Yt(n){return n}let zn=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){const r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,s){const i=function js(n){return n&&n instanceof re||function Vr(n){return n&&ir(n.next)&&ir(n.error)&&ir(n.complete)}(n)&&sn(n)}(e)?e:new er(e,r,s);return S(()=>{const{operator:o,source:a}=this;i.add(o?o.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return new(r=hr(r))((s,i)=>{const o=new er({next:a=>{try{e(a)}catch(l){i(l),o.unsubscribe()}},error:i,complete:s});this.subscribe(o)})}_subscribe(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)}[ct](){return this}pipe(...e){return function ar(n){return 0===n.length?Yt:1===n.length?n[0]:function(e){return n.reduce((r,s)=>s(r),e)}}(e)(this)}toPromise(e){return new(e=hr(e))((r,s)=>{let i;this.subscribe(o=>i=o,o=>s(o),()=>r(i))})}}return n.create=t=>new n(t),n})();function hr(n){var t;return null!==(t=n??Bn.Promise)&&void 0!==t?t:Promise}const Ri=Hn(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ps=(()=>{class n extends zn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const r=new Di(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new Ri}next(e){S(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(e)}})}error(e){S(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){S(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:r,isStopped:s,observers:i}=this;return r||s?_t:(this.currentObservers=null,i.push(e),new Ie(()=>{this.currentObservers=null,le(i,e)}))}_checkFinalizedStatuses(e){const{hasError:r,thrownError:s,isStopped:i}=this;r?e.error(s):i&&e.complete()}asObservable(){const e=new zn;return e.source=this,e}}return n.create=(t,e)=>new Di(t,e),n})();class Di extends Ps{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===r||r.call(e,t)}error(t){var e,r;null===(r=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===r||r.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,r;return null!==(r=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==r?r:_t}}class Vo extends Ps{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function xi(n){return t=>{if(function tl(n){return ir(n?.lift)}(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function To(n,t,e,r,s){return new E(n,t,e,r,s)}class E extends re{constructor(t,e,r,s,i,o){super(t),this.onFinalize=i,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=s?function(a){try{s(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function R(n,t){return xi((e,r)=>{let s=0;e.subscribe(To(r,i=>{r.next(n.call(t,i,s++))}))})}class ie extends Error{constructor(t,e){super(function cn(n,t){return`NG0${Math.abs(n)}${t?": "+t:""}`}(t,e)),this.code=t}}const vr=Symbol("InputSignalNode#UNSET"),Js={...jr,transformFn:void 0,applyValueToInputSignal(n,t){ln(n,t)}};function io(n,t){const e=Object.create(Js);function r(){if(ue(e),e.value===vr)throw new ie(-950,!1);return e.value}return e.value=n,e.transformFn=t?.transform,r[Pe]=e,r}function Us(n){return{toString:n}.toString()}const Hi="__parameters__";function tr(n,t,e){return Us(()=>{const r=function Ls(n){return function(...e){if(n){const r=n(...e);for(const s in r)this[s]=r[s]}}}(t);function s(...i){if(this instanceof s)return r.apply(this,i),this;const o=new s(...i);return a.annotation=o,a;function a(l,c,u){const h=l.hasOwnProperty(Hi)?l[Hi]:Object.defineProperty(l,Hi,{value:[]})[Hi];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return e&&(s.prototype=Object.create(e.prototype)),s.prototype.ngMetadataName=n,s.annotationCls=s,s})}const Ut=globalThis;function Dr(n){for(let t in n)if(n[t]===Dr)return t;throw Error("Could not find renamed property on target object.")}function wp(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function $s(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map($s).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function p2(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const a1=Dr({__forward_ref__:Dr});function Br(n){return n.__forward_ref__=Br,n.toString=function(){return $s(this())},n}function wn(n){return uc(n)?n():n}function uc(n){return"function"==typeof n&&n.hasOwnProperty(a1)&&n.__forward_ref__===Br}function zt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function pa(n){return{providers:n.providers||[],imports:n.imports||[]}}function l1(n){return bh(n,c1)||bh(n,w2)}function bh(n,t){return n.hasOwnProperty(t)?n[t]:null}function hc(n){return n&&(n.hasOwnProperty(v2)||n.hasOwnProperty(Mp))?n[v2]:null}const c1=Dr({\u0275prov:Dr}),v2=Dr({\u0275inj:Dr}),w2=Dr({ngInjectableDef:Dr}),Mp=Dr({ngInjectorDef:Dr});class At{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=zt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function I2(n){return n&&!!n.\u0275providers}const dc=Dr({\u0275cmp:Dr}),d1=Dr({\u0275dir:Dr}),A2=Dr({\u0275pipe:Dr}),Sh=Dr({\u0275mod:Dr}),Uo=Dr({\u0275fac:Dr}),pc=Dr({__NG_ELEMENT_ID__:Dr}),Hh=Dr({__NG_ENV_ID__:Dr});function Vn(n){return"string"==typeof n?n:null==n?"":String(n)}function b2(n,t){throw new ie(-201,!1)}var nr=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(nr||{});let x2;function _h(){return x2}function Ui(n){const t=x2;return x2=n,t}function Mh(n,t,e){const r=l1(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&nr.Optional?null:void 0!==t?t:void b2()}const gc={},S2="__NG_DI_FLAG__",p1="ngTempTokenPath",Dp=/\n/gm,Vh="__source";let Rl;function Ta(n){const t=Rl;return Rl=n,t}function Fp(n,t=nr.Default){if(void 0===Rl)throw new ie(-203,!1);return null===Rl?Mh(n,void 0,t):Rl.get(n,t&nr.Optional?null:void 0,t)}function Se(n,t=nr.Default){return(_h()||Fp)(wn(n),t)}function v(n,t=nr.Default){return Se(n,Mt(t))}function Mt(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Dl(n){const t=[];for(let e=0;e<n.length;e++){const r=wn(n[e]);if(Array.isArray(r)){if(0===r.length)throw new ie(900,!1);let s,i=nr.Default;for(let o=0;o<r.length;o++){const a=r[o],l=H2(a);"number"==typeof l?-1===l?s=a.token:i|=l:s=a}t.push(Se(s,i))}else t.push(Se(r))}return t}function $i(n,t){return n[S2]=t,n.prototype[S2]=t,n}function H2(n){return n[S2]}const Eh=$i(tr("Optional"),8),fc=$i(tr("SkipSelf"),4);function lr(n,t){return n.hasOwnProperty(Uo)?n[Uo]:null}function Bl(n,t){n.forEach(e=>Array.isArray(e)?Bl(e,t):t(e))}function _2(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Ea(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Yi(n,t,e){let r=Vt(n,t);return r>=0?n[1|r]=e:(r=~r,function z2(n,t,e,r){let s=n.length;if(s==t)n.push(e,r);else if(1===s)n.push(r,n[0]),n[0]=e;else{for(s--,n.push(n[s-1],n[s]);s>t;)n[s]=n[s-2],s--;n[t]=e,n[t+1]=r}}(n,r,t,e)),r}function V2(n,t){const e=Vt(n,t);if(e>=0)return n[1|e]}function Vt(n,t){return function Lh(n,t,e){let r=0,s=n.length>>e;for(;s!==r;){const i=r+(s-r>>1),o=n[i<<e];if(t===o)return i<<e;o>t?s=i:r=i+1}return~(s<<e)}(n,t,1)}const $o={},dr=[],ga=new At(""),Rh=new At("",-1),mc=new At("");class Nl{get(t,e=gc){if(e===gc){const r=new Error(`NullInjectorError: No provider for ${$s(t)}!`);throw r.name="NullInjectorError",r}return e}}var Fl=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Fl||{}),Lo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Lo||{}),La=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(La||{});function vc(n,t,e){let r=n.length;for(;;){const s=n.indexOf(t,e);if(-1===s)return s;if(0===s||n.charCodeAt(s-1)<=32){const i=t.length;if(s+i===r||n.charCodeAt(s+i)<=32)return s}e=s+1}}function T2(n,t,e){let r=0;for(;r<e.length;){const s=e[r];if("number"==typeof s){if(0!==s)break;r++;const i=e[r++],o=e[r++],a=e[r++];n.setAttribute(t,o,a,i)}else{const i=s,o=e[++r];L2(i)?n.setProperty(t,i,o):n.setAttribute(t,i,o),r++}}return r}function E2(n){return 3===n||4===n||6===n}function L2(n){return 64===n.charCodeAt(0)}function wc(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){const s=t[r];"number"==typeof s?e=s:0===e||Dh(n,e,s,null,-1===e||2===e?t[++r]:null)}}return n}function Dh(n,t,e,r,s){let i=0,o=n.length;if(-1===t)o=-1;else for(;i<n.length;){const a=n[i++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=i-1;break}}}for(;i<n.length;){const a=n[i];if("number"==typeof a)break;if(a===e){if(null===r)return void(null!==s&&(n[i+1]=s));if(r===n[i+1])return void(n[i+2]=s)}i++,null!==r&&i++,null!==s&&i++}-1!==o&&(n.splice(o,0,t),i=o+1),n.splice(i++,0,e),null!==r&&n.splice(i++,0,r),null!==s&&n.splice(i++,0,s)}const Bh="ng-template";function R2(n,t,e,r){let s=0;if(r){for(;s<t.length&&"string"==typeof t[s];s+=2)if("class"===t[s]&&-1!==vc(t[s+1].toLowerCase(),e,0))return!0}else if(Pl(n))return!1;if(s=t.indexOf(1,s),s>-1){let i;for(;++s<t.length&&"string"==typeof(i=t[s]);)if(i.toLowerCase()===e)return!0}return!1}function Pl(n){return 4===n.type&&n.value!==Bh}function kp(n,t,e){return t===(4!==n.type||e?n.value:Bh)}function Nh(n,t,e){let r=4;const s=n.attrs,i=null!==s?function Wp(n){for(let t=0;t<n.length;t++)if(E2(n[t]))return t;return n.length}(s):0;let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!kp(n,l,e)||""===l&&1===t.length){if(Ni(r))return!1;o=!0}}else if(8&r){if(null===s||!R2(n,s,l,e)){if(Ni(r))return!1;o=!0}}else{const c=t[++a],u=Fh(l,s,Pl(n),e);if(-1===u){if(Ni(r))return!1;o=!0;continue}if(""!==c){let h;if(h=u>i?"":s[u+1].toLowerCase(),2&r&&c!==h){if(Ni(r))return!1;o=!0}}}}else{if(!o&&!Ni(r)&&!Ni(l))return!1;if(o&&Ni(l))continue;o=!1,r=l|1&r}}return Ni(r)||o}function Ni(n){return!(1&n)}function Fh(n,t,e,r){if(null===t)return-1;let s=0;if(r||!e){let i=!1;for(;s<t.length;){const o=t[s];if(o===n)return s;if(3===o||6===o)i=!0;else{if(1===o||2===o){let a=t[++s];for(;"string"==typeof a;)a=t[++s];continue}if(4===o)break;if(0===o){s+=4;continue}}s+=i?1:2}return-1}return function Zp(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const r=n[e];if("number"==typeof r)return-1;if(r===t)return e;e++}return-1}(t,n)}function D2(n,t,e=!1){for(let r=0;r<t.length;r++)if(Nh(n,t[r],e))return!0;return!1}function jp(n,t){e:for(let e=0;e<t.length;e++){const r=t[e];if(n.length===r.length){for(let s=0;s<n.length;s++)if(n[s]!==r[s])continue e;return!0}}return!1}function Ph(n,t){return n?":not("+t.trim()+")":t}function Up(n){let t=n[0],e=1,r=2,s="",i=!1;for(;e<n.length;){let o=n[e];if("string"==typeof o)if(2&r){const a=n[++e];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?s+="."+o:4&r&&(s+=" "+o);else""!==s&&!Ni(o)&&(t+=Ph(i,s),s=""),r=o,i=i||!Ni(r);e++}return""!==s&&(t+=Ph(i,s)),t}function Ro(n){return Us(()=>{const t=Da(n),e={...t,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Fl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Lo.Emulated,styles:n.styles||dr,_:null,schemas:n.schemas||null,tView:null,id:""};Oh(e);const r=n.dependencies;return e.directiveDefs=ci(r,!1),e.pipeDefs=ci(r,!0),e.id=function kh(n){let t=0;const e=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const s of e)t=Math.imul(31,t)+s.charCodeAt(0)|0;return t+=2147483648,"c"+t}(e),e})}function Xp(n){return $n(n)||Ds(n)}function Yp(n){return null!==n}function pr(n){return Us(()=>({type:n.type,bootstrap:n.bootstrap||dr,declarations:n.declarations||dr,imports:n.imports||dr,exports:n.exports||dr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function ns(n,t){if(null==n)return $o;const e={};for(const r in n)if(n.hasOwnProperty(r)){const s=n[r];let i,o,a=La.None;Array.isArray(s)?(a=s[0],i=s[1],o=s[2]??i):(i=s,o=s),t?(e[i]=a!==La.None?[r,a]:r,t[i]=o):e[i]=r}return e}function Rn(n){return Us(()=>{const t=Da(n);return Oh(t),t})}function Ki(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function $n(n){return n[dc]||null}function Ds(n){return n[d1]||null}function cr(n){return n[A2]||null}function Da(n){const t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:n.inputs||$o,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||dr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ns(n.inputs,t),outputs:ns(n.outputs),debugInfo:null}}function Oh(n){n.features?.forEach(t=>t(n))}function ci(n,t){if(!n)return null;const e=t?cr:Xp;return()=>("function"==typeof n?n():n).map(r=>e(r)).filter(Yp)}function rl(n){return{\u0275providers:n}}function Tr(...n){return{\u0275providers:Cc(0,n),\u0275fromNgModule:!0}}function Cc(n,...t){const e=[],r=new Set;let s;const i=o=>{e.push(o)};return Bl(t,o=>{const a=o;H(a,i,[],r)&&(s||=[],s.push(a))}),void 0!==s&&w(s,i),e}function w(n,t){for(let e=0;e<n.length;e++){const{ngModule:r,providers:s}=n[e];B(s,i=>{t(i,r)})}}function H(n,t,e,r){if(!(n=wn(n)))return!1;let s=null,i=hc(n);const o=!i&&$n(n);if(i||o){if(o&&!o.standalone)return!1;s=n}else{const l=n.ngModule;if(i=hc(l),!i)return!1;s=l}const a=r.has(s);if(o){if(a)return!1;if(r.add(s),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)H(c,t,e,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let c;r.add(s);try{Bl(i.imports,u=>{H(u,t,e,r)&&(c||=[],c.push(u))})}finally{}void 0!==c&&w(c,t)}if(!a){const c=lr(s)||(()=>new s);t({provide:s,useFactory:c,deps:dr},s),t({provide:mc,useValue:s,multi:!0},s),t({provide:ga,useValue:()=>Se(s),multi:!0},s)}const l=i.providers;if(null!=l&&!a){const c=n;B(l,u=>{t(u,c)})}}}return s!==n&&void 0!==n.providers}function B(n,t){for(let e of n)I2(e)&&(e=e.\u0275providers),Array.isArray(e)?B(e,t):t(e)}const W=Dr({provide:String,useValue:Dr});function Y(n){return null!==n&&"object"==typeof n&&W in n}function Rt(n){return"function"==typeof n}const fa=new At(""),Xo={},h7={};let qp;function Gh(){return void 0===qp&&(qp=new Nl),qp}class Yo{}class f1 extends Yo{get destroyed(){return this._destroyed}constructor(t,e,r,s){super(),this.parent=e,this.source=r,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Qp(t,o=>this.processProvider(o)),this.records.set(Rh,m1(void 0,this)),s.has("environment")&&this.records.set(Yo,m1(void 0,this));const i=this.records.get(fa);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(mc,dr,nr.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const t=_(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const e=Ta(this),r=Ui(void 0);try{return t()}finally{Ta(e),Ui(r)}}get(t,e=gc,r=nr.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Hh))return t[Hh](this);r=Mt(r);const i=Ta(this),o=Ui(void 0);try{if(!(r&nr.SkipSelf)){let l=this.records.get(t);if(void 0===l){const c=function m7(n){return"function"==typeof n||"object"==typeof n&&n instanceof At}(t)&&l1(t);l=c&&this.injectableDefInScope(c)?m1(Jp(t),Xo):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(r&nr.Self?Gh():this.parent).get(t,e=r&nr.Optional&&e===gc?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[p1]=a[p1]||[]).unshift($s(t)),i)throw a;return function we(n,t,e,r){const s=n[p1];throw t[Vh]&&s.unshift(t[Vh]),n.message=function g1(n,t,e,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let s=$s(t);if(Array.isArray(t))s=t.map($s).join(" -> ");else if("object"==typeof t){let i=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];i.push(o+":"+("string"==typeof a?JSON.stringify(a):$s(a)))}s=`{${i.join(", ")}}`}return`${e}${r?"("+r+")":""}[${s}]: ${n.replace(Dp,"\n  ")}`}("\n"+n.message,s,e,r),n.ngTokenPath=s,n[p1]=null,n}(a,t,"R3InjectorError",this.source)}throw a}finally{Ui(o),Ta(i)}}resolveInjectorInitializers(){const t=_(null),e=Ta(this),r=Ui(void 0);try{const i=this.get(ga,dr,nr.Self);for(const o of i)o()}finally{Ta(e),Ui(r),_(t)}}toString(){const t=[],e=this.records;for(const r of e.keys())t.push($s(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(t){let e=Rt(t=wn(t))?t:wn(t&&t.provide);const r=function p7(n){return Y(n)?m1(void 0,n.useValue):m1(I3(n),Xo)}(t);if(!Rt(t)&&!0===t.multi){let s=this.records.get(e);s||(s=m1(void 0,Xo,!0),s.factory=()=>Dl(s.multi),this.records.set(e,s)),e=t,s.multi.push(t)}this.records.set(e,r)}hydrate(t,e){const r=_(null);try{return e.value===Xo&&(e.value=h7,e.value=e.factory()),"object"==typeof e.value&&e.value&&function f7(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{_(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;const e=wn(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){const e=this._onDestroyHooks.indexOf(t);-1!==e&&this._onDestroyHooks.splice(e,1)}}function Jp(n){const t=l1(n),e=null!==t?t.factory:lr(n);if(null!==e)return e;if(n instanceof At)throw new ie(204,!1);if(n instanceof Function)return function d7(n){if(n.length>0)throw new ie(204,!1);const e=function _p(n){return n&&(n[c1]||n[w2])||null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new ie(204,!1)}function I3(n,t,e){let r;if(Rt(n)){const s=wn(n);return lr(s)||Jp(s)}if(Y(n))r=()=>wn(n.useValue);else if(function Z(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Dl(n.deps||[]));else if(function Q(n){return!(!n||!n.useExisting)}(n))r=()=>Se(wn(n.useExisting));else{const s=wn(n&&(n.useClass||n.provide));if(!function g7(n){return!!n.deps}(n))return lr(s)||Jp(s);r=()=>new s(...Dl(n.deps))}return r}function m1(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function Qp(n,t){for(const e of n)Array.isArray(e)?Qp(e,t):e&&I2(e)?Qp(e.\u0275providers,t):t(e)}function A3(n,t){n instanceof f1&&n.assertNotDestroyed();const r=Ta(n),s=Ui(void 0);try{return t()}finally{Ta(r),Ui(s)}}function b3(){return void 0!==_h()||null!=function Np(){return Rl}()}const As=0,vt=1,gn=2,Qs=3,Ko=4,as=5,ft=6,kr=7,Kt=8,un=9,Ze=10,Ce=11,qo=12,Hr=13,qi=14,bs=15,yc=16,w1=17,sl=18,C1=19,S3=20,Ol=21,Zh=22,Jo=23,on=25,ng=1,Ba=7,y1=9,Xs=10;var Uh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Uh||{});function hi(n){return Array.isArray(n)&&"object"==typeof n[ng]}function Ji(n){return Array.isArray(n)&&!0===n[ng]}function rg(n){return!!(4&n.flags)}function Ic(n){return n.componentOffset>-1}function $h(n){return!(1&~n.flags)}function ma(n){return!!n.template}function P2(n){return!!(512&n[gn])}class M7{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function V3(n,t,e,r){null!==t?t.applyValueToInputSignal(t,r):n[e]=r}function il(){return T3}function T3(n){return n.type.prototype.ngOnChanges&&(n.setInput=V7),z7}function z7(){const n=L3(this),t=n?.current;if(t){const e=n.previous;if(e===$o)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function V7(n,t,e,r,s){const i=this.declaredInputs[r],o=L3(n)||function T7(n,t){return n[E3]=t}(n,{previous:$o,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[i];a[i]=new M7(c&&c.currentValue,e,l===$o),V3(n,t,s,e)}il.ngInherit=!0;const E3="__ngSimpleChanges__";function L3(n){return n[E3]||null}const Na=function(n,t,e){};function _r(n){for(;Array.isArray(n);)n=n[As];return n}function O2(n,t){return _r(t[n])}function oo(n,t){return _r(t[n.index])}function k2(n,t){return n.data[t]}function Ac(n,t){return n[t]}function Do(n,t){const e=t[n];return hi(e)?e:e[As]}function lg(n){return!(128&~n[gn])}function Qo(n,t){return null==t?null:n[t]}function B3(n){n[w1]=0}function N3(n){1024&n[gn]||(n[gn]|=1024,lg(n)&&Yh(n))}function Xh(n){return!!(9216&n[gn]||n[Jo]?.dirty)}function cg(n){n[Ze].changeDetectionScheduler?.notify(8),64&n[gn]&&(n[gn]|=1024),Xh(n)&&Yh(n)}function Yh(n){n[Ze].changeDetectionScheduler?.notify(0);let t=ol(n);for(;null!==t&&!(8192&t[gn])&&(t[gn]|=8192,lg(t));)t=ol(t)}function Kh(n,t){if(!(256&~n[gn]))throw new ie(911,!1);null===n[Ol]&&(n[Ol]=[]),n[Ol].push(t)}function ol(n){const t=n[Qs];return Ji(t)?t[Qs]:t}const _n={lFrame:K3(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let P3=!1;function O3(){return _n.bindingsEnabled}function bc(){return null!==_n.skipHydrationRootTNode}function We(){return _n.lFrame.lView}function Jn(){return _n.lFrame.tView}function Be(n){return _n.lFrame.contextLView=n,n[Kt]}function Ne(n){return _n.lFrame.contextLView=null,n}function Ur(){let n=k3();for(;null!==n&&64===n.type;)n=n.parent;return n}function k3(){return _n.lFrame.currentTNode}function va(n,t){const e=_n.lFrame;e.currentTNode=n,e.isParent=t}function dg(){return _n.lFrame.isParent}function pg(){_n.lFrame.isParent=!1}function Z3(){return P3}function j3(n){P3=n}function ao(){const n=_n.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function wa(){return _n.lFrame.bindingIndex++}function ll(n){const t=_n.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function j7(n,t){const e=_n.lFrame;e.bindingIndex=e.bindingRootIndex=n,gg(t)}function gg(n){_n.lFrame.currentDirectiveIndex=n}function mg(){return _n.lFrame.currentQueryIndex}function Jh(n){_n.lFrame.currentQueryIndex=n}function $7(n){const t=n[vt];return 2===t.type?t.declTNode:1===t.type?n[as]:null}function X3(n,t,e){if(e&nr.SkipSelf){let s=t,i=n;for(;!(s=s.parent,null!==s||e&nr.Host||(s=$7(i),null===s||(i=i[qi],10&s.type))););if(null===s)return!1;t=s,n=i}const r=_n.lFrame=Y3();return r.currentTNode=t,r.lView=n,!0}function vg(n){const t=Y3(),e=n[vt];_n.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Y3(){const n=_n.lFrame,t=null===n?null:n.child;return null===t?K3(n):t}function K3(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function q3(){const n=_n.lFrame;return _n.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const J3=q3;function wg(){const n=q3();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Fi(){return _n.lFrame.selectedIndex}function xc(n){_n.lFrame.selectedIndex=n}function ls(){const n=_n.lFrame;return k2(n.tView,n.selectedIndex)}let em=!0;function W2(){return em}function Fa(n){em=n}function Qh(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){const i=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=i;o&&(n.contentHooks??=[]).push(-e,o),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),null!=u&&(n.destroyHooks??=[]).push(e,u)}}function ed(n,t,e){tm(n,t,3,e)}function td(n,t,e,r){(3&n[gn])===e&&tm(n,t,e,r)}function Cg(n,t){let e=n[gn];(3&e)===t&&(e&=16383,e+=1,n[gn]=e)}function tm(n,t,e,r){const i=r??-1,o=t.length-1;let a=0;for(let l=void 0!==r?65535&n[w1]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(n[w1]+=65536),(a<i||-1==i)&&(ey(n,e,t,l),n[w1]=(4294901760&n[w1])+l+2),l++}function nm(n,t){Na(4,n,t);const e=_(null);try{t.call(n)}finally{_(e),Na(5,n,t)}}function ey(n,t,e,r){const s=e[r]<0,i=e[r+1],a=n[s?-e[r]:e[r]];s?n[gn]>>14<n[w1]>>16&&(3&n[gn])===t&&(n[gn]+=16384,nm(a,i)):nm(a,i)}const I1=-1;class Z2{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}const Ig={};class Sc{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=Mt(r);const s=this.injector.get(t,Ig,r);return s!==Ig||e===Ig?s:this.parentInjector.get(t,e,r)}}function Ag(n){return n!==I1}function j2(n){return 32767&n}function U2(n,t){let e=function iy(n){return n>>16}(n),r=t;for(;e>0;)r=r[qi],e--;return r}let bg=!0;function nd(n){const t=bg;return bg=n,t}const sm=255,im=5;let ay=0;const Pa={};function rd(n,t){const e=om(n,t);if(-1!==e)return e;const r=t[vt];r.firstCreatePass&&(n.injectorIndex=t.length,xg(r.data,n),xg(t,null),xg(r.blueprint,null));const s=sd(n,t),i=n.injectorIndex;if(Ag(s)){const o=j2(s),a=U2(s,t),l=a[vt].data;for(let c=0;c<8;c++)t[i+c]=a[o+c]|l[o+c]}return t[i+8]=s,i}function xg(n,t){n.push(0,0,0,0,0,0,0,0,t)}function om(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function sd(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,r=null,s=t;for(;null!==s;){if(r=pm(s),null===r)return I1;if(e++,s=s[qi],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return I1}function Sg(n,t,e){!function ly(n,t,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(pc)&&(r=e[pc]),null==r&&(r=e[pc]=ay++);const s=r&sm;t.data[n+(s>>im)]|=1<<s}(n,t,e)}function am(n,t,e){if(e&nr.Optional||void 0!==n)return n;b2()}function lm(n,t,e,r){if(e&nr.Optional&&void 0===r&&(r=null),!(e&(nr.Self|nr.Host))){const s=n[un],i=Ui(void 0);try{return s?s.get(t,r,e&nr.Optional):Mh(t,r,e&nr.Optional)}finally{Ui(i)}}return am(r,0,e)}function cm(n,t,e,r=nr.Default,s){if(null!==n){if(2048&t[gn]&&!(r&nr.Self)){const o=function py(n,t,e,r,s){let i=n,o=t;for(;null!==i&&null!==o&&2048&o[gn]&&!(512&o[gn]);){const a=um(i,o,e,r|nr.Self,Pa);if(a!==Pa)return a;let l=i.parent;if(!l){const c=o[S3];if(c){const u=c.get(e,Pa,r);if(u!==Pa)return u}l=pm(o),o=o[qi]}i=l}return s}(n,t,e,r,Pa);if(o!==Pa)return o}const i=um(n,t,e,r,Pa);if(i!==Pa)return i}return lm(t,e,r,s)}function um(n,t,e,r,s){const i=function hy(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(pc)?n[pc]:void 0;return"number"==typeof t?t>=0?t&sm:dy:t}(e);if("function"==typeof i){if(!X3(t,n,r))return r&nr.Host?am(s,0,r):lm(t,e,r,s);try{let o;if(o=i(r),null!=o||r&nr.Optional)return o;b2()}finally{J3()}}else if("number"==typeof i){let o=null,a=om(n,t),l=I1,c=r&nr.Host?t[bs][as]:null;for((-1===a||r&nr.SkipSelf)&&(l=-1===a?sd(n,t):t[a+8],l!==I1&&dm(r,!1)?(o=t[vt],a=j2(l),t=U2(l,t)):a=-1);-1!==a;){const u=t[vt];if(hm(i,a,u.data)){const h=uy(a,t,e,o,r,c);if(h!==Pa)return h}l=t[a+8],l!==I1&&dm(r,t[vt].data[a+8]===c)&&hm(i,a,t)?(o=u,a=j2(l),t=U2(l,t)):a=-1}}return s}function uy(n,t,e,r,s,i){const o=t[vt],a=o.data[n+8],u=id(a,o,e,null==r?Ic(a)&&bg:r!=o&&!!(3&a.type),s&nr.Host&&i===a);return null!==u?Hc(t,o,u,a):Pa}function id(n,t,e,r,s){const i=n.providerIndexes,o=t.data,a=1048575&i,l=n.directiveStart,u=i>>20,d=s?a+u:n.directiveEnd;for(let g=r?a:a+u;g<d;g++){const m=o[g];if(g<l&&e===m||g>=l&&m.type===e)return g}if(s){const g=o[l];if(g&&ma(g)&&g.type===e)return l}return null}function Hc(n,t,e,r){let s=n[e];const i=t.data;if(function ty(n){return n instanceof Z2}(s)){const o=s;o.resolving&&function Lp(n,t){throw t&&t.join(" > "),new ie(-200,n)}(function Sr(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Vn(n)}(i[e]));const a=nd(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Ui(o.injectImpl):null;X3(n,r,nr.Default);try{s=n[e]=o.factory(void 0,i,n,r),t.firstCreatePass&&e>=r.directiveStart&&function Q7(n,t,e){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=t.type.prototype;if(r){const o=T3(t);(e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o)}s&&(e.preOrderHooks??=[]).push(0-n,s),i&&((e.preOrderHooks??=[]).push(n,i),(e.preOrderCheckHooks??=[]).push(n,i))}(e,i[e],t)}finally{null!==c&&Ui(c),nd(a),o.resolving=!1,J3()}}return s}function hm(n,t,e){return!!(e[t+(n>>im)]&1<<n)}function dm(n,t){return!(n&nr.Self||n&nr.Host&&t)}class di{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return cm(this._tNode,this._lView,t,Mt(r),e)}}function dy(){return new di(Ur(),We())}function ei(n){return Us(()=>{const t=n.prototype.constructor,e=t[Uo]||Hg(t),r=Object.prototype;let s=Object.getPrototypeOf(n.prototype).constructor;for(;s&&s!==r;){const i=s[Uo]||Hg(s);if(i&&i!==e)return i;s=Object.getPrototypeOf(s)}return i=>new i})}function Hg(n){return uc(n)?()=>{const t=Hg(wn(n));return t&&t()}:lr(n)}function pm(n){const t=n[vt],e=t.type;return 2===e?t.declTNode:1===e?n[as]:null}function kl(n,t=null,e=null,r){const s=fo(n,t,e,r);return s.resolveInjectorInitializers(),s}function fo(n,t=null,e=null,r,s=new Set){const i=[e||dr,Tr(n)];return r=r||("object"==typeof n?void 0:$s(n)),new f1(i,t||Gh(),r||null,s)}class Sn{static{this.THROW_IF_NOT_FOUND=gc}static{this.NULL=new Nl}static create(t,e){if(Array.isArray(t))return kl({name:""},e,t,"");{const r=t.name??"";return kl({name:r},t.parent,t.providers,r)}}static{this.\u0275prov=zt({token:Sn,providedIn:"any",factory:()=>Se(Rh)})}static{this.__NG_ELEMENT_ID__=-1}}new At("").__NG_ELEMENT_ID__=n=>{const t=Ur();if(null===t)throw new ie(204,!1);if(2&t.type)return t.value;if(n&nr.Optional)return null;throw new ie(204,!1)};function zg(n){return n.ngOriginalError}const Cm=!0;let $2=(()=>{class n{static{this.__NG_ELEMENT_ID__=Iy}static{this.__NG_ENV_ID__=e=>e}}return n})();class yy extends $2{constructor(t){super(),this._lView=t}onDestroy(t){return Kh(this._lView,t),()=>function ug(n,t){if(null===n[Ol])return;const e=n[Ol].indexOf(t);-1!==e&&n[Ol].splice(e,1)}(this._lView,t)}}function Iy(){return new yy(We())}let Gl=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Vo(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=zt({token:n,providedIn:"root",factory:()=>new n})}}return n})();const Kr=class Ay extends Ps{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,b3()&&(this.destroyRef=v($2,{optional:!0})??void 0,this.pendingTasks=v(Gl,{optional:!0})??void 0)}emit(t){const e=_(null);try{super.next(t)}finally{_(e)}}subscribe(t,e,r){let s=t,i=e||(()=>null),o=r;if(t&&"object"==typeof t){const l=t;s=l.next?.bind(l),i=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(i=this.wrapInTimeout(i),s&&(s=this.wrapInTimeout(s)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:s,error:i,complete:o});return t instanceof Ie&&t.add(a),a}wrapInTimeout(t){return e=>{const r=this.pendingTasks?.add();setTimeout(()=>{t(e),void 0!==r&&this.pendingTasks?.remove(r)})}}};function ld(...n){}function ym(n){let t,e;function r(){n=ld;try{void 0!==e&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(e),void 0!==t&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),r()}),"function"==typeof requestAnimationFrame&&(e=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Im(n){return queueMicrotask(()=>n()),()=>{n=ld}}const Vg="isAngularZone",cd=Vg+"_ID";let by=0;class $r{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Kr(!1),this.onMicrotaskEmpty=new Kr(!1),this.onStable=new Kr(!1),this.onError=new Kr(!1);const{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:s=!1,scheduleInRootZone:i=Cm}=t;if(typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!s&&r,o.shouldCoalesceRunChangeDetection=s,o.callbackScheduled=!1,o.scheduleInRootZone=i,function Hy(n){const t=()=>{!function Sy(n){function t(){ym(()=>{n.callbackScheduled=!1,Eg(n),n.isCheckStableRunning=!0,Tg(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),Eg(n))}(n)},e=by++;n._inner=n._inner.fork({name:"angular",properties:{[Vg]:!0,[cd]:e,[cd+e]:!0},onInvokeTask:(r,s,i,o,a,l)=>{if(function _y(n){return xm(n,"__ignore_ng_zone__")}(l))return r.invokeTask(i,o,a,l);try{return Am(n),r.invokeTask(i,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&t(),bm(n)}},onInvoke:(r,s,i,o,a,l,c)=>{try{return Am(n),r.invoke(i,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function My(n){return xm(n,"__scheduler_tick__")}(l)&&t(),bm(n)}},onHasTask:(r,s,i,o)=>{r.hasTask(i,o),s===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,Eg(n),Tg(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,s,i,o)=>(r.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(Vg)}static assertInAngularZone(){if(!$r.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if($r.isInAngularZone())throw new ie(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,s){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+s,t,xy,ld,ld);try{return i.runTask(o,e,r)}finally{i.cancelTask(o)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}const xy={};function Tg(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Eg(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function Am(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bm(n){n._nesting--,Tg(n)}class Lg{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Kr,this.onMicrotaskEmpty=new Kr,this.onStable=new Kr,this.onError=new Kr}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,s){return t.apply(e,r)}}function xm(n,t){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[t]}class Oa{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&zg(t);for(;e&&zg(e);)e=zg(e);return e||null}}const Vy=new At("",{providedIn:"root",factory:()=>{const n=v($r),t=v(Oa);return e=>n.runOutsideAngular(()=>t.handleError(e))}});function Hm(n,t){return io(n,t)}const X2=(Hm.required=function Ty(n){return io(vr,n)},Hm);function Ey(){return x1(Ur(),We())}function x1(n,t){return new ea(oo(n,t))}let ea=(()=>{class n{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=Ey}}return n})();function _m(n){return n instanceof ea?n.nativeElement:n}function Ly(){return this._results[Symbol.iterator]()}class Rg{get changes(){return this._changes??=new Kr}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const e=Rg.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=Ly)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;const r=function Xi(n){return n.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function C3(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let s=n[r],i=t[r];if(e&&(s=e(s),i=e(i)),i!==s)return!1}return!0}(this._results,r,e))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function K2(n){return!(128&~n.flags)}const Bg=new Map;let Dy=0;function Ng(n){Bg.delete(n[C1])}const ud="__ngContext__";function Qi(n,t){hi(t)?(n[ud]=t[C1],function Ny(n){Bg.set(n[C1],n)}(t)):n[ud]=t}function Nm(n){return Pm(n[qo])}function Fm(n){return Pm(n[Ko])}function Pm(n){for(;null!==n&&!Ji(n);)n=n[Ko];return n}let Pg;const H1=new At("",{providedIn:"root",factory:()=>eI}),eI="ng",$m=new At(""),hl=new At("",{providedIn:"platform",factory:()=>"unknown"}),Xm=new At("",{providedIn:"root",factory:()=>function Wl(){if(void 0!==Pg)return Pg;if(typeof document<"u")return document;throw new ie(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Ym=()=>null;function Ug(n,t,e=!1){return Ym(n,t,e)}const rv=new At("",{providedIn:"root",factory:()=>!1});class cv{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Zl(n){return n instanceof cv?n.changingThisBreaksApplicationSecurity:n}const Tn=/^>|^->|<!--|-->|--!>|<!-$/g,kn=/(<|>)/g,Ft="\u200b$1\u200b";var Ec=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ec||{});let Cv;function yv(n,t){return Cv(n,t)}function lu(n,t,e,r,s){if(null!=r){let i,o=!1;Ji(r)?i=r:hi(r)&&(o=!0,r=r[As]);const a=_r(r);0===n&&null!==e?null==s?BI(t,e,a):T1(t,e,a,s||null,!0):1===n&&null!==e?T1(t,e,a,s||null,!0):2===n?function xd(n,t,e){n.removeChild(null,t,e)}(t,a,o):3===n&&t.destroyNode(a),null!=i&&function aD(n,t,e,r,s){const i=e[Ba];i!==_r(e)&&lu(t,n,r,i,s);for(let a=Xs;a<e.length;a++){const l=e[a];lf(l[vt],l,n,t,r,i)}}(t,n,i,e,s)}}function Av(n,t){return n.createComment(function Gr(n){return n.replace(Tn,t=>t.replace(kn,Ft))}(t))}function rf(n,t,e){return n.createElement(t,e)}function LI(n,t){t[Ze].changeDetectionScheduler?.notify(9),lf(n,t,t[Ce],2,null,null)}function RI(n,t){const e=n[y1],r=t[Qs];(hi(r)||t[bs]!==r[Qs][bs])&&(n[gn]|=Uh.HasTransplantedViews),null===e?n[y1]=[t]:e.push(t)}function bv(n,t){const e=n[y1],r=e.indexOf(t);e.splice(r,1)}function bd(n,t){if(n.length<=Xs)return;const e=Xs+t,r=n[e];if(r){const s=r[yc];null!==s&&s!==n&&bv(s,r),t>0&&(n[e-1][Ko]=r[Ko]);const i=Ea(n,Xs+t);!function QR(n,t){LI(n,t),t[As]=null,t[as]=null}(r[vt],r);const o=i[sl];null!==o&&o.detachView(i[vt]),r[Qs]=null,r[Ko]=null,r[gn]&=-129}return r}function sf(n,t){if(!(256&t[gn])){const e=t[Ce];e.destroyNode&&lf(n,t,e,3,null,null),function tD(n){let t=n[qo];if(!t)return xv(n[vt],n);for(;t;){let e=null;if(hi(t))e=t[qo];else{const r=t[Xs];r&&(e=r)}if(!e){for(;t&&!t[Ko]&&t!==n;)hi(t)&&xv(t[vt],t),t=t[Qs];null===t&&(t=n),hi(t)&&xv(t[vt],t),e=t&&t[Ko]}t=e}}(t)}}function xv(n,t){if(256&t[gn])return;const e=_(null);try{t[gn]&=-129,t[gn]|=256,t[Jo]&&xe(t[Jo]),function sD(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let r=0;r<e.length;r+=2){const s=t[e[r]];if(!(s instanceof Z2)){const i=e[r+1];if(Array.isArray(i))for(let o=0;o<i.length;o+=2){const a=s[i[o]],l=i[o+1];Na(4,a,l);try{l.call(a)}finally{Na(5,a,l)}}else{Na(4,s,i);try{i.call(s)}finally{Na(5,s,i)}}}}}(n,t),function rD(n,t){const e=n.cleanup,r=t[kr];if(null!==e)for(let i=0;i<e.length-1;i+=2)if("string"==typeof e[i]){const o=e[i+3];o>=0?r[o]():r[-o].unsubscribe(),i+=2}else e[i].call(r[e[i+1]]);null!==r&&(t[kr]=null);const s=t[Ol];if(null!==s){t[Ol]=null;for(let i=0;i<s.length;i++)(0,s[i])()}}(n,t),1===t[vt].type&&t[Ce].destroy();const r=t[yc];if(null!==r&&Ji(t[Qs])){r!==t[Qs]&&bv(r,t);const s=t[sl];null!==s&&s.detachView(n)}Ng(t)}finally{_(e)}}function Sv(n,t,e){return function DI(n,t,e){let r=t;for(;null!==r&&168&r.type;)r=(t=r).parent;if(null===r)return e[As];{const{componentOffset:s}=r;if(s>-1){const{encapsulation:i}=n.data[r.directiveStart+s];if(i===Lo.None||i===Lo.Emulated)return null}return oo(r,e)}}(n,t.parent,e)}function T1(n,t,e,r,s){n.insertBefore(t,e,r,s)}function BI(n,t,e){n.appendChild(t,e)}function NI(n,t,e,r,s){null!==r?T1(n,t,e,r,s):BI(n,t,e)}function Hv(n,t){return n.parentNode(t)}function FI(n,t,e){return OI(n,t,e)}let _v,OI=function PI(n,t,e){return 40&n.type?oo(n,e):null};function af(n,t,e,r){const s=Sv(n,r,t),i=t[Ce],a=FI(r.parent||t[as],r,t);if(null!=s)if(Array.isArray(e))for(let l=0;l<e.length;l++)NI(i,s,e[l],a,!1);else NI(i,s,e,a,!1);void 0!==_v&&_v(i,r,t,e,s)}function E1(n,t){if(null!==t){const e=t.type;if(3&e)return oo(t,n);if(4&e)return Mv(-1,n[t.index]);if(8&e){const r=t.child;if(null!==r)return E1(n,r);{const s=n[t.index];return Ji(s)?Mv(-1,s):_r(s)}}if(128&e)return E1(n,t.next);if(32&e)return yv(t,n)()||_r(n[t.index]);{const r=GI(n,t);return null!==r?Array.isArray(r)?r[0]:E1(ol(n[bs]),r):E1(n,t.next)}}return null}function GI(n,t){return null!==t?n[bs][as].projection[t.projection]:null}function Mv(n,t){const e=Xs+n+1;if(e<t.length){const r=t[e],s=r[vt].firstChild;if(null!==s)return E1(r,s)}return t[Ba]}function zv(n,t,e,r,s,i,o){for(;null!=e;){if(128===e.type){e=e.next;continue}const a=r[e.index],l=e.type;if(o&&0===t&&(a&&Qi(_r(a),r),e.flags|=2),32&~e.flags)if(8&l)zv(n,t,e.child,r,s,i,!1),lu(t,n,s,a,i);else if(32&l){const c=yv(e,r);let u;for(;u=c();)lu(t,n,s,u,i);lu(t,n,s,a,i)}else 16&l?ZI(n,t,r,e,s,i):lu(t,n,s,a,i);e=o?e.projectionNext:e.next}}function lf(n,t,e,r,s,i){zv(e,r,n.firstChild,t,s,i,!1)}function ZI(n,t,e,r,s,i){const o=e[bs],l=o[as].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)lu(t,n,s,l[c],i);else{let c=l;const u=o[Qs];K2(r)&&(c.flags|=128),zv(n,t,c,u,s,i,!0)}}function jI(n,t,e){""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function UI(n,t,e){const{mergedAttrs:r,classes:s,styles:i}=e;null!==r&&T2(n,t,r),null!==s&&jI(n,t,s),null!==i&&function cD(n,t,e){n.setAttribute(t,"style",e)}(n,t,i)}const Wn={};function bt(n=1){$I(Jn(),We(),Fi()+n,!1)}function $I(n,t,e,r){if(!r)if(3&~t[gn]){const i=n.preOrderHooks;null!==i&&td(t,i,0,e)}else{const i=n.preOrderCheckHooks;null!==i&&ed(t,i,e)}xc(e)}function Tt(n,t=nr.Default){const e=We();return null===e?Se(n,t):cm(Ur(),e,wn(n),t)}function XI(n,t,e,r,s,i){const o=_(null);try{let a=null;s&La.SignalBased&&(a=t[r][Pe]),null!==a&&void 0!==a.transformFn&&(i=a.transformFn(i)),s&La.HasDecoratorInputTransform&&(i=n.inputTransforms[r].call(t,i)),null!==n.setInput?n.setInput(t,a,i,e,r):V3(t,a,r,i)}finally{_(o)}}function cf(n,t,e,r,s,i,o,a,l,c,u){const h=t.blueprint.slice();return h[As]=s,h[gn]=204|r,(null!==c||n&&2048&n[gn])&&(h[gn]|=2048),B3(h),h[Qs]=h[qi]=n,h[Kt]=e,h[Ze]=o||n&&n[Ze],h[Ce]=a||n&&n[Ce],h[un]=l||n&&n[un]||null,h[as]=i,h[C1]=function By(){return Dy++}(),h[ft]=u,h[S3]=c,h[bs]=2==t.type?n[bs]:h,h}function L1(n,t,e,r,s){let i=n.data[t];if(null===i)i=function Vv(n,t,e,r,s){const i=k3(),o=dg(),l=n.data[t]=function wD(n,t,e,r,s,i){let o=t?t.injectorIndex:-1,a=0;return bc()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?i:i&&i.parent,e,t,r,s);return null===n.firstChild&&(n.firstChild=l),null!==i&&(o?null==i.child&&null!==l.parent&&(i.child=l):null===i.next&&(i.next=l,l.prev=i)),l}(n,t,e,r,s),function Z7(){return _n.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=e,i.value=r,i.attrs=s;const o=function G2(){const n=_n.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();i.injectorIndex=null===o?-1:o.injectorIndex}return va(i,!0),i}function Sd(n,t,e,r){if(0===e)return-1;const s=t.length;for(let i=0;i<e;i++)t.push(r),n.blueprint.push(r),n.data.push(null);return s}function YI(n,t,e,r,s){const i=Fi(),o=2&r;try{xc(-1),o&&t.length>on&&$I(n,t,on,!1),Na(o?2:0,s),e(r,s)}finally{xc(i),Na(o?3:1,s)}}function Tv(n,t,e){if(rg(t)){const r=_(null);try{const i=t.directiveEnd;for(let o=t.directiveStart;o<i;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,e[o],o)}}finally{_(r)}}}function Ev(n,t,e){O3()&&(function SD(n,t,e,r){const s=e.directiveStart,i=e.directiveEnd;Ic(e)&&function ED(n,t,e){const r=oo(t,n),s=KI(e);let o=16;e.signals?o=4096:e.onPush&&(o=64);const a=uf(n,cf(n,s,null,o,r,t,null,n[Ze].rendererFactory.createRenderer(r,e),null,null,null));n[t.index]=a}(t,e,n.data[s+e.componentOffset]),n.firstCreatePass||rd(e,t),Qi(r,t);const o=e.initialInputs;for(let a=s;a<i;a++){const l=n.data[a],c=Hc(t,n,a,e);Qi(c,t),null!==o&&LD(0,a-s,c,l,0,o),ma(l)&&(Do(e.index,t)[Kt]=Hc(t,n,a,e))}}(n,t,e,oo(e,t)),!(64&~e.flags)&&tA(n,t,e))}function Lv(n,t,e=oo){const r=t.localNames;if(null!==r){let s=t.index+1;for(let i=0;i<r.length;i+=2){const o=r[i+1],a=-1===o?e(t,n):n[o];n[s++]=a}}}function KI(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Rv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Rv(n,t,e,r,s,i,o,a,l,c,u){const h=on+r,d=h+s,g=function dD(n,t){const e=[];for(let r=0;r<t;r++)e.push(r<n?null:Wn);return e}(h,d),m="function"==typeof c?c():c;return g[vt]={type:n,blueprint:g,template:e,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:u}}let qI=()=>null;function JI(n,t,e,r,s){for(let i in t){if(!t.hasOwnProperty(i))continue;const o=t[i];if(void 0===o)continue;r??={};let a,l=La.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=i;if(null!==s){if(!s.hasOwnProperty(i))continue;c=s[i]}0===n?QI(r,e,c,a,l):QI(r,e,c,a)}return r}function QI(n,t,e,r,s){let i;n.hasOwnProperty(e)?(i=n[e]).push(t,r):i=n[e]=[t,r],void 0!==s&&i.push(s)}function Po(n,t,e,r,s,i,o,a){const l=oo(t,e);let u,c=t.inputs;!a&&null!=c&&(u=c[r])?(Pv(n,e,u,r,s),Ic(t)&&function ID(n,t){const e=Do(t,n);16&e[gn]||(e[gn]|=64)}(e,t.index)):3&t.type&&(r=function yD(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),s=null!=o?o(s,t.value||"",r):s,i.setProperty(l,r,s))}function Dv(n,t,e,r){if(O3()){const s=null===r?null:{"":-1},i=function _D(n,t){const e=n.directiveRegistry;let r=null,s=null;if(e)for(let i=0;i<e.length;i++){const o=e[i];if(D2(t,o.selectors,!1))if(r||(r=[]),ma(o))if(null!==o.findHostDirectiveDefs){const a=[];s=s||new Map,o.findHostDirectiveDefs(o,a,s),r.unshift(...a,o),Bv(n,t,a.length)}else r.unshift(o),Bv(n,t,0);else s=s||new Map,o.findHostDirectiveDefs?.(o,r,s),r.push(o)}return null===r?null:[r,s]}(n,e);let o,a;null===i?o=a=null:[o,a]=i,null!==o&&eA(n,t,e,o,s,a),s&&function MD(n,t,e){if(t){const r=n.localNames=[];for(let s=0;s<t.length;s+=2){const i=e[t[s+1]];if(null==i)throw new ie(-301,!1);r.push(t[s],i)}}}(e,r,s)}e.mergedAttrs=wc(e.mergedAttrs,e.attrs)}function eA(n,t,e,r,s,i){for(let c=0;c<r.length;c++)Sg(rd(e,t),n,r[c].type);!function VD(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}(e,n.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Sd(n,t,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];e.mergedAttrs=wc(e.mergedAttrs,u.hostAttrs),TD(n,e,t,l,u),zD(l,u,s),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}!function CD(n,t,e){const s=t.directiveEnd,i=n.data,o=t.attrs,a=[];let l=null,c=null;for(let u=t.directiveStart;u<s;u++){const h=i[u],d=e?e.get(h):null,m=d?d.outputs:null;l=JI(0,h.inputs,u,l,d?d.inputs:null),c=JI(1,h.outputs,u,c,m);const b=null===l||null===o||Pl(t)?null:RD(l,u,o);a.push(b)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(n,e,i)}function tA(n,t,e){const r=e.directiveStart,s=e.directiveEnd,i=e.index,o=function U7(){return _n.lFrame.currentDirectiveIndex}();try{xc(i);for(let a=r;a<s;a++){const l=n.data[a],c=t[a];gg(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&HD(l,c)}}finally{xc(-1),gg(o)}}function HD(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function Bv(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function zD(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;ma(t)&&(e[""]=n)}}function TD(n,t,e,r,s){n.data[r]=s;const i=s.factory||(s.factory=lr(s.type)),o=new Z2(i,ma(s),Tt);n.blueprint[r]=o,e[r]=o,function bD(n,t,e,r,s){const i=s.hostBindings;if(i){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~t.index;(function xD(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,r,i)}}(n,t,r,Sd(n,e,s.hostVars,Wn),s)}function LD(n,t,e,r,s,i){const o=i[t];if(null!==o)for(let a=0;a<o.length;)XI(r,e,o[a++],o[a++],o[a++],o[a++])}function RD(n,t,e){let r=null,s=0;for(;s<e.length;){const i=e[s];if(0!==i)if(5!==i){if("number"==typeof i)break;if(n.hasOwnProperty(i)){null===r&&(r=[]);const o=n[i];for(let a=0;a<o.length;a+=3)if(o[a]===t){r.push(i,o[a+1],o[a+2],e[s+1]);break}}s+=2}else s+=2;else s+=4}return r}function nA(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function rA(n,t){const e=n.contentQueries;if(null!==e){const r=_(null);try{for(let s=0;s<e.length;s+=2){const o=e[s+1];if(-1!==o){const a=n.data[o];Jh(e[s]),a.contentQueries(2,t[o],o)}}}finally{_(r)}}}function uf(n,t){return n[qo]?n[Hr][Ko]=t:n[qo]=t,n[Hr]=t,t}function Fv(n,t,e){Jh(0);const r=_(null);try{t(n,e)}finally{_(r)}}function sA(n){return n[kr]??=[]}function iA(n){return n.cleanup??=[]}function hf(n,t){const e=n[un],r=e?e.get(Oa,null):null;r&&r.handleError(t)}function Pv(n,t,e,r,s){for(let i=0;i<e.length;){const o=e[i++],a=e[i++],l=e[i++];XI(n.data[o],t[o],r,a,l,s)}}function DD(n,t){const e=Do(t,n),r=e[vt];!function BD(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}(r,e);const s=e[As];null!==s&&null===e[ft]&&(e[ft]=Ug(s,e[un])),Ov(r,e,e[Kt])}function Ov(n,t,e){vg(t);try{const r=n.viewQuery;null!==r&&Fv(1,r,e);const s=n.template;null!==s&&YI(n,t,s,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[sl]?.finishViewCreation(n),n.staticContentQueries&&rA(n,t),n.staticViewQueries&&Fv(2,n.viewQuery,e);const i=n.components;null!==i&&function ND(n,t){for(let e=0;e<t.length;e++)DD(n,t[e])}(t,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[gn]&=-5,wg()}}function cu(n,t,e,r){const s=_(null);try{const i=t.tView,l=cf(n,i,e,4096&n[gn]?4096:16,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);l[yc]=n[t.index];const u=n[sl];return null!==u&&(l[sl]=u.createEmbeddedView(i)),Ov(i,l,e),l}finally{_(s)}}function R1(n,t){return!t||null===t.firstChild||K2(n)}function uu(n,t,e,r=!0){const s=t[vt];if(function nD(n,t,e,r){const s=Xs+r,i=e.length;r>0&&(e[s-1][Ko]=t),r<i-Xs?(t[Ko]=e[s],_2(e,Xs+r,t)):(e.push(t),t[Ko]=null),t[Qs]=e;const o=t[yc];null!==o&&e!==o&&RI(o,t);const a=t[sl];null!==a&&a.insertView(n),cg(t),t[gn]|=128}(s,t,n,e),r){const o=Mv(e,n),a=t[Ce],l=Hv(a,n[Ba]);null!==l&&function eD(n,t,e,r,s,i){r[As]=s,r[as]=t,lf(n,r,e,1,s,i)}(s,n[as],a,t,l,o)}const i=t[ft];null!==i&&null!==i.firstChild&&(i.firstChild=null)}function Hd(n,t,e,r,s=!1){for(;null!==e;){if(128===e.type){e=s?e.projectionNext:e.next;continue}const i=t[e.index];null!==i&&r.push(_r(i)),Ji(i)&&lA(i,r);const o=e.type;if(8&o)Hd(n,t,e.child,r);else if(32&o){const a=yv(e,t);let l;for(;l=a();)r.push(l)}else if(16&o){const a=GI(t,e);if(Array.isArray(a))r.push(...a);else{const l=ol(t[bs]);Hd(l[vt],l,a,r,!0)}}e=s?e.projectionNext:e.next}return r}function lA(n,t){for(let e=Xs;e<n.length;e++){const r=n[e],s=r[vt].firstChild;null!==s&&Hd(r[vt],r,s,t)}n[Ba]!==n[As]&&t.push(n[Ba])}let cA=[];const kD={...Xe,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Yh(n.lView)},consumerOnSignalRead(){this.lView[Jo]=this}},WD={...Xe,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let t=ol(n.lView);for(;t&&!uA(t[vt]);)t=ol(t);t&&N3(t)},consumerOnSignalRead(){this.lView[Jo]=this}};function uA(n){return 2!==n.type}const ZD=100;function df(n,t=!0,e=0){const r=n[Ze],s=r.rendererFactory;s.begin?.();try{!function jD(n,t){const e=Z3();try{j3(!0),Gv(n,t);let r=0;for(;Xh(n);){if(r===ZD)throw new ie(103,!1);r++,Gv(n,1)}}finally{j3(e)}}(n,e)}catch(o){throw t&&hf(n,o),o}finally{s.end?.(),r.inlineEffectRunner?.flush()}}function UD(n,t,e,r){const s=t[gn];if(!(256&~s))return;t[Ze].inlineEffectRunner?.flush(),vg(t);let a=!0,l=null,c=null;uA(n)?(c=function FD(n){return n[Jo]??function PD(n){const t=cA.pop()??Object.create(kD);return t.lView=n,t}(n)}(t),l=St(c)):null===function ge(){return Ue}()?(a=!1,c=function GD(n){const t=n[Jo]??Object.create(WD);return t.lView=n,t}(t),l=St(c)):t[Jo]&&(xe(t[Jo]),t[Jo]=null);try{B3(t),function U3(n){return _n.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&YI(n,t,e,2,r);const u=!(3&~s);if(u){const g=n.preOrderCheckHooks;null!==g&&ed(t,g,null)}else{const g=n.preOrderHooks;null!==g&&td(t,g,0,null),Cg(t,0)}if(function $D(n){for(let t=Nm(n);null!==t;t=Fm(t)){if(!(t[gn]&Uh.HasTransplantedViews))continue;const e=t[y1];for(let r=0;r<e.length;r++)N3(e[r])}}(t),dA(t,0),null!==n.contentQueries&&rA(n,t),u){const g=n.contentCheckHooks;null!==g&&ed(t,g)}else{const g=n.contentHooks;null!==g&&td(t,g,1),Cg(t,1)}!function hD(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const s=e[r];if(s<0)xc(~s);else{const i=s,o=e[++r],a=e[++r];j7(o,i),a(2,t[i])}}}finally{xc(-1)}}(n,t);const h=n.components;null!==h&&gA(t,h,0);const d=n.viewQuery;if(null!==d&&Fv(2,d,r),u){const g=n.viewCheckHooks;null!==g&&ed(t,g)}else{const g=n.viewHooks;null!==g&&td(t,g,2),Cg(t,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),t[Zh]){for(const g of t[Zh])g();t[Zh]=null}t[gn]&=-73}catch(u){throw Yh(t),u}finally{null!==c&&(ee(c,l),a&&function OD(n){n.lView[Jo]!==n&&(n.lView=null,cA.push(n))}(c)),wg()}}function dA(n,t){for(let e=Nm(n);null!==e;e=Fm(e))for(let r=Xs;r<e.length;r++)pA(e[r],t)}function XD(n,t,e){pA(Do(t,n),e)}function pA(n,t){lg(n)&&Gv(n,t)}function Gv(n,t){const r=n[vt],s=n[gn],i=n[Jo];let o=!!(0===t&&16&s);if(o||=!!(64&s&&0===t),o||=!!(1024&s),o||=!(!i?.dirty||!ve(i)),o||=!1,i&&(i.dirty=!1),n[gn]&=-9217,o)UD(r,n,r.template,n[Kt]);else if(8192&s){dA(n,1);const a=r.components;null!==a&&gA(n,a,1)}}function gA(n,t,e){for(let r=0;r<t.length;r++)XD(n,t[r],e)}function _d(n,t){const e=Z3()?64:1088;for(n[Ze].changeDetectionScheduler?.notify(t);n;){n[gn]|=e;const r=ol(n);if(P2(n)&&!r)return n;n=r}return null}class Md{get rootNodes(){const t=this._lView,e=t[vt];return Hd(e,t,e.firstChild,[])}constructor(t,e,r=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Kt]}set context(t){this._lView[Kt]=t}get destroyed(){return!(256&~this._lView[gn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Qs];if(Ji(t)){const e=t[8],r=e?e.indexOf(this):-1;r>-1&&(bd(t,r),Ea(e,r))}this._attachedToViewContainer=!1}sf(this._lView[vt],this._lView)}onDestroy(t){Kh(this._lView,t)}markForCheck(){_d(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[gn]&=-129}reattach(){cg(this._lView),this._lView[gn]|=128}detectChanges(){this._lView[gn]|=1024,df(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const t=P2(this._lView),e=this._lView[yc];null!==e&&!t&&bv(e,this._lView),LI(this._lView[vt],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=t;const e=P2(this._lView),r=this._lView[yc];null!==r&&!e&&RI(r,this._lView),cg(this._lView)}}let Ul=(()=>{class n{static{this.__NG_ELEMENT_ID__=qD}}return n})();const YD=Ul,KD=class extends YD{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,r){const s=cu(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:r});return new Md(s)}};function qD(){return pf(Ur(),We())}function pf(n,t){return 4&n.type?new KD(t,n,x1(n,t)):null}let DA=()=>null;function B1(n,t){return DA(n,t)}class du{}const Bd=new At("",{providedIn:"root",factory:()=>!1}),BA=new At(""),Qv=new At("");class WB{}class NA{}class jB{resolveComponentFactory(t){throw function ZB(n){const t=Error(`No component factory found for ${$s(n)}.`);return t.ngComponent=n,t}(t)}}class Cf{static{this.NULL=new jB}}class ew{}let Lc=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function UB(){const n=We(),e=Do(Ur().index,n);return(hi(e)?e:n)[Ce]}()}}return n})(),$B=(()=>{class n{static{this.\u0275prov=zt({token:n,providedIn:"root",factory:()=>null})}}return n})();function If(n,t,e){let r=e?n.styles:null,s=e?n.classes:null,i=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?i=a:1==i?s=p2(s,a):2==i&&(r=p2(r,a+": "+t[++o]+";"))}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=s:n.classesWithoutHost=s}class kA extends Cf{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=$n(t);return new Pd(e,this.ngModule)}}function GA(n,t){const e=[];for(const r in n){if(!n.hasOwnProperty(r))continue;const s=n[r];if(void 0===s)continue;const i=Array.isArray(s),o=i?s[0]:s;e.push(t?{propName:o,templateName:r,isSignal:!!((i?s[1]:La.None)&La.SignalBased)}:{propName:o,templateName:r})}return e}class Pd extends NA{get inputs(){const t=this.componentDef,e=t.inputTransforms,r=GA(t.inputs,!0);if(null!==e)for(const s of r)e.hasOwnProperty(s.propName)&&(s.transform=e[s.propName]);return r}get outputs(){return GA(this.componentDef.outputs,!1)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function B2(n){return n.map(Up).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,r,s){const i=_(null);try{let o=(s=s||this.ngModule)instanceof Yo?s:s?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new Sc(t,o):t,l=a.get(ew,null);if(null===l)throw new ie(407,!1);const h={rendererFactory:l,sanitizer:a.get($B,null),inlineEffectRunner:null,changeDetectionScheduler:a.get(du,null)},d=l.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",m=r?function pD(n,t,e,r){const i=r.get(rv,!1)||e===Lo.ShadowDom,o=n.selectRootElement(t,i);return function gD(n){qI(n)}(o),o}(d,r,this.componentDef.encapsulation,a):rf(d,g,function KB(n){const t=n.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(g));let b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let V=null;null!==m&&(V=Ug(m,a,!0));const M=Rv(0,null,null,1,0,null,null,null,null,null,null),D=cf(null,M,null,b,null,null,h,d,a,null,V);vg(D);let J,X,G=null;try{const K=this.componentDef;let U,pe=null;K.findHostDirectiveDefs?(U=[],pe=new Map,K.findHostDirectiveDefs(K,U,pe),U.push(K)):U=[K];const Me=function JB(n,t){const e=n[vt],r=on;return n[r]=t,L1(e,r,2,"#host",null)}(D,m);G=function QB(n,t,e,r,s,i,o){const a=s[vt];!function eN(n,t,e,r){for(const s of n)t.mergedAttrs=wc(t.mergedAttrs,s.hostAttrs);null!==t.mergedAttrs&&(If(t,t.mergedAttrs,!0),null!==e&&UI(r,e,t))}(r,n,t,o);let l=null;null!==t&&(l=Ug(t,s[un]));const c=i.rendererFactory.createRenderer(t,e);let u=16;e.signals?u=4096:e.onPush&&(u=64);const h=cf(s,KI(e),null,u,s[n.index],n,i,c,null,null,l);return a.firstCreatePass&&Bv(a,n,r.length-1),uf(s,h),s[n.index]=h}(Me,m,K,U,D,h,d),X=k2(M,on),m&&function nN(n,t,e,r){if(r)T2(n,e,["ng-version","18.2.13"]);else{const{attrs:s,classes:i}=function $p(n){const t=[],e=[];let r=1,s=2;for(;r<n.length;){let i=n[r];if("string"==typeof i)2===s?""!==i&&t.push(i,n[++r]):8===s&&e.push(i);else{if(!Ni(s))break;s=i}r++}return{attrs:t,classes:e}}(t.selectors[0]);s&&T2(n,e,s),i&&i.length>0&&jI(n,e,i.join(" "))}}(d,K,m,r),void 0!==e&&function rN(n,t,e){const r=n.projection=[];for(let s=0;s<t.length;s++){const i=e[s];r.push(null!=i?Array.from(i):null)}}(X,this.ngContentSelectors,e),J=function tN(n,t,e,r,s,i){const o=Ur(),a=s[vt],l=oo(o,s);eA(a,s,o,e,null,r);for(let u=0;u<e.length;u++)Qi(Hc(s,a,o.directiveStart+u,o),s);tA(a,s,o),l&&Qi(l,s);const c=Hc(s,a,o.directiveStart+o.componentOffset,o);if(n[Kt]=s[Kt]=c,null!==i)for(const u of i)u(c,t);return Tv(a,o,s),c}(G,K,U,pe,D,[sN]),Ov(M,D,null)}catch(K){throw null!==G&&Ng(G),Ng(D),K}finally{wg()}return new qB(this.componentType,J,x1(X,D),D,X)}finally{_(i)}}}class qB extends WB{constructor(t,e,r,s,i){super(),this.location=r,this._rootLView=s,this._tNode=i,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new Md(s,void 0,!1),this.componentType=t}setInput(t,e){const r=this._tNode.inputs;let s;if(null!==r&&(s=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;const i=this._rootLView;Pv(i[vt],i,s,t,e),this.previousInputValues.set(t,e),_d(Do(this._tNode.index,i),1)}}get injector(){return new di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function sN(){const n=Ur();Qh(We()[vt],n)}let wl=(()=>{class n{static{this.__NG_ELEMENT_ID__=iN}}return n})();function iN(){return jA(Ur(),We())}const oN=wl,WA=class extends oN{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return x1(this._hostTNode,this._hostLView)}get injector(){return new di(this._hostTNode,this._hostLView)}get parentInjector(){const t=sd(this._hostTNode,this._hostLView);if(Ag(t)){const e=U2(t,this._hostLView),r=j2(t);return new di(e[vt].data[r+8],e)}return new di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ZA(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Xs}createEmbeddedView(t,e,r){let s,i;"number"==typeof r?s=r:null!=r&&(s=r.index,i=r.injector);const o=B1(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},i,o);return this.insertImpl(a,s,R1(this._hostTNode,o)),a}createComponent(t,e,r,s,i){const o=t&&!function N2(n){return"function"==typeof n}(t);let a;if(o)a=e;else{const m=e||{};a=m.index,r=m.injector,s=m.projectableNodes,i=m.environmentInjector||m.ngModuleRef}const l=o?t:new Pd($n(t)),c=r||this.parentInjector;if(!i&&null==l.ngModule){const b=(o?c:this.parentInjector).get(Yo,null);b&&(i=b)}const u=$n(l.componentType??{}),h=B1(this._lContainer,u?.id??null),g=l.create(c,s,h?.firstChild??null,i);return this.insertImpl(g.hostView,a,R1(this._hostTNode,h)),g}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){const s=t._lView;if(function D7(n){return Ji(n[Qs])}(s)){const a=this.indexOf(t);if(-1!==a)this.detach(a);else{const l=s[Qs],c=new WA(l,l[as],l[Qs]);c.detach(c.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;return uu(o,s,i,r),t.attachToViewContainerRef(),_2(rw(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ZA(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),r=bd(this._lContainer,e);r&&(Ea(rw(this._lContainer),e),sf(r[vt],r))}detach(t){const e=this._adjustIndex(t,-1),r=bd(this._lContainer,e);return r&&null!=Ea(rw(this._lContainer),e)?new Md(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function ZA(n){return n[8]}function rw(n){return n[8]||(n[8]=[])}function jA(n,t){let e;const r=t[n.index];return Ji(r)?e=r:(e=nA(r,t,null,n),t[n.index]=e,uf(t,e)),UA(e,t,n,r),new WA(e,n,t)}let UA=function XA(n,t,e,r){if(n[Ba])return;let s;s=8&e.type?_r(r):function aN(n,t){const e=n[Ce],r=e.createComment(""),s=oo(t,n);return T1(e,Hv(e,s),r,function iD(n,t){return n.nextSibling(t)}(e,s),!1),r}(t,e),n[Ba]=s},sw=()=>!1;class iw{constructor(t){this.queryList=t,this.matches=null}clone(){return new iw(this.queryList)}setDirty(){this.queryList.setDirty()}}class ow{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,s=[];for(let i=0;i<r;i++){const o=e.getByIndex(i);s.push(this.queries[o.indexInDeclarationView].clone())}return new ow(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==hw(t,e).matches&&this.queries[e].setDirty()}}class YA{constructor(t,e,r=null){this.flags=e,this.read=r,this.predicate="string"==typeof t?function fN(n){return n.split(",").map(t=>t.trim())}(t):t}}class aw{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const s=null!==e?e.length:0,i=this.getByIndex(r).embeddedTView(t,s);i&&(i.indexInDeclarationView=r,null!==e?e.push(i):e=[i])}return null!==e?new aw(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class lw{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new lw(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1&~this.metadata.flags){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let s=0;s<r.length;s++){const i=r[s];this.matchTNodeWithReadOption(t,e,hN(e,i)),this.matchTNodeWithReadOption(t,e,id(e,t,i,!1,!1))}else r===Ul?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,id(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const s=this.metadata.read;if(null!==s)if(s===ea||s===wl||s===Ul&&4&e.type)this.addMatch(e.index,-2);else{const i=id(e,t,s,!1,!1);null!==i&&this.addMatch(e.index,i)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function hN(n,t){const e=n.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1];return null}function pN(n,t,e,r){return-1===e?function dN(n,t){return 11&n.type?x1(n,t):4&n.type?pf(n,t):null}(t,n):-2===e?function gN(n,t,e){return e===ea?x1(t,n):e===Ul?pf(t,n):e===wl?jA(t,n):void 0}(n,t,r):Hc(n,n[vt],e,t)}function KA(n,t,e,r){const s=t[sl].queries[r];if(null===s.matches){const i=n.data,o=e.matches,a=[];for(let l=0;null!==o&&l<o.length;l+=2){const c=o[l];a.push(c<0?null:pN(t,i[c],o[l+1],e.metadata.read))}s.matches=a}return s.matches}function cw(n,t,e,r){const s=n.queries.getByIndex(e),i=s.matches;if(null!==i){const o=KA(n,t,s,e);for(let a=0;a<i.length;a+=2){const l=i[a];if(l>0)r.push(o[a/2]);else{const c=i[a+1],u=t[-l];for(let h=Xs;h<u.length;h++){const d=u[h];d[yc]===d[Qs]&&cw(d[vt],d,c,r)}if(null!==u[y1]){const h=u[y1];for(let d=0;d<h.length;d++){const g=h[d];cw(g[vt],g,c,r)}}}}}return r}function JA(n,t,e){const r=Jn();return r.firstCreatePass&&(function eb(n,t,e){null===n.queries&&(n.queries=new aw),n.queries.track(new lw(t,e))}(r,new YA(n,t,e),-1),!(2&~t)&&(r.staticViewQueries=!0)),function qA(n,t,e){const r=new Rg(!(4&~e));return function vD(n,t,e,r){const s=sA(t);s.push(e),n.firstCreatePass&&iA(n).push(r,s.length-1)}(n,t,r,r.destroy),(t[sl]??=new ow).queries.push(new iw(r))-1}(r,We(),t)}function hw(n,t){return n.queries.getByIndex(t)}function tb(n,t){const e=n[vt],r=hw(e,t);return r.crossesNgTemplate?cw(e,n,t,[]):KA(e,n,r,t)}const nb=new Set;function vo(n){nb.has(n)||(nb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function pu(n,t){vo("NgSignals");const e=function Te(n){const t=Object.create(jr);t.value=n;const e=()=>(ue(t),t.value);return e[Pe]=t,e}(n),r=e[Pe];return t?.equal&&(r.equal=t.equal),e.set=s=>ln(r,s),e.update=s=>function Xt(n,t){ae()||Dt(),ln(n,t(n.value))}(r,s),e.asReadonly=sb.bind(e),e}function sb(){const n=this[Pe];if(void 0===n.readonlyFn){const t=()=>this();t[Pe]=n,n.readonlyFn=t}return n.readonlyFn}function ib(n){return function rb(n){return"function"==typeof n&&void 0!==n[Pe]}(n)&&"function"==typeof n.set}function qr(n){let t=function mb(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const r=[n];for(;t;){let s;if(ma(n))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ie(903,!1);s=t.\u0275dir}if(s){if(e){r.push(s);const o=n;o.inputs=bf(n.inputs),o.inputTransforms=bf(n.inputTransforms),o.declaredInputs=bf(n.declaredInputs),o.outputs=bf(n.outputs);const a=s.hostBindings;a&&VN(n,a);const l=s.viewQuery,c=s.contentQueries;if(l&&MN(n,l),c&&zN(n,c),HN(n,s),wp(n.outputs,s.outputs),ma(s)&&s.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(s.data.animation)}}const i=s.features;if(i)for(let o=0;o<i.length;o++){const a=i[o];a&&a.ngInherit&&a(n),a===qr&&(e=!1)}}t=Object.getPrototypeOf(t)}!function _N(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){const s=n[r];s.hostVars=t+=s.hostVars,s.hostAttrs=wc(s.hostAttrs,e=wc(e,s.hostAttrs))}}(r)}function HN(n,t){for(const e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;const r=t.inputs[e];if(void 0!==r&&(n.inputs[e]=r,n.declaredInputs[e]=t.declaredInputs[e],null!==t.inputTransforms)){const s=Array.isArray(r)?r[0]:r;if(!t.inputTransforms.hasOwnProperty(s))continue;n.inputTransforms??={},n.inputTransforms[s]=t.inputTransforms[s]}}}function bf(n){return n===$o?{}:n===dr?[]:n}function MN(n,t){const e=n.viewQuery;n.viewQuery=e?(r,s)=>{t(r,s),e(r,s)}:t}function zN(n,t){const e=n.contentQueries;n.contentQueries=e?(r,s,i)=>{t(r,s,i),e(r,s,i)}:t}function VN(n,t){const e=n.hostBindings;n.hostBindings=e?(r,s)=>{t(r,s),e(r,s)}:t}class F1{}class NN{}class gw extends F1{constructor(t,e,r,s=!0){super(),this.ngModuleType=t,this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kA(this);const i=function zi(n,t){const e=n[Sh]||null;if(!e&&!0===t)throw new Error(`Type ${$s(n)} does not have '\u0275mod' property.`);return e}(t);this._bootstrapComponents=function ti(n){return n instanceof Function?n():n}(i.bootstrap),this._r3Injector=fo(t,e,[{provide:F1,useValue:this},{provide:Cf,useValue:this.componentFactoryResolver},...r],$s(t),new Set(["environment"])),s&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class fw extends NN{constructor(t){super(),this.moduleType=t}create(t){return new gw(this.moduleType,t,[])}}class Ib extends F1{constructor(t){super(),this.componentFactoryResolver=new kA(this),this.instance=null;const e=new f1([...t.providers,{provide:F1,useValue:this},{provide:Cf,useValue:this.componentFactoryResolver}],t.parent||Gh(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function xf(n){return!!mw(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function mw(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Cl(n,t,e){return n[t]=e}function ni(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function Gd(n,t,e,r,s,i,o,a,l,c){const u=e+on,h=t.firstCreatePass?function ZN(n,t,e,r,s,i,o,a,l){const c=t.consts,u=L1(t,n,4,o||null,a||null);Dv(t,e,u,Qo(c,l)),Qh(t,u);const h=u.tView=Rv(2,u,r,s,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return null!==t.queries&&(t.queries.template(t,u),h.queries=t.queries.embeddedTView(u)),u}(u,t,n,r,s,i,o,a,l):t.data[u];va(h,!1);const d=bb(t,n,h,e);W2()&&af(t,n,d,h),Qi(d,n);const g=nA(d,n,d,h);return n[u]=g,uf(n,g),function $A(n,t,e){return sw(n,t,e)}(g,h,n),$h(h)&&Ev(t,n,h),null!=l&&Lv(n,h,c),h}function gi(n,t,e,r,s,i,o,a){const l=We(),c=Jn();return Gd(l,c,n,t,e,r,s,Qo(c.consts,i),o,a),gi}let bb=function xb(n,t,e,r){return Fa(!0),t[Ce].createComment("")};var vu=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(vu||{});let Vb=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=zt({token:n,providedIn:"root",factory:()=>new n})}}return n})();class jd{constructor(){this.ngZone=v($r),this.scheduler=v(du),this.errorHandler=v(Oa,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[vu.EarlyRead,vu.Write,vu.MixedReadWrite,vu.Read]}execute(){this.executing=!0;for(const t of jd.PHASES)for(const e of this.sequences)if(!e.erroredOrDestroyed&&e.hooks[t])try{e.pipelinedValue=this.ngZone.runOutsideAngular(()=>e.hooks[t](e.pipelinedValue))}catch(r){e.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(const t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(const t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=zt({token:jd,providedIn:"root",factory:()=>new jd})}}function Tf(n,t){return n<<17|t<<2}function Bc(n){return n>>17&32767}function Mw(n){return 2|n}function k1(n){return(131068&n)>>2}function zw(n,t){return-131069&n|t<<2}function Vw(n){return 1|n}function sx(n,t,e,r){const s=n[e+1],i=null===t;let o=r?Bc(s):k1(s),a=!1;for(;0!==o&&(!1===a||i);){const c=n[o+1];EF(n[o],t)&&(a=!0,n[o+1]=r?Vw(c):Mw(c)),o=r?Bc(c):k1(c)}a&&(n[e+1]=r?Mw(s):Vw(s))}function EF(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Vt(n,t)>=0}const Ti={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ix(n){return n.substring(Ti.key,Ti.keyEnd)}function ox(n,t){const e=Ti.textEnd;return e===t?-1:(t=Ti.keyEnd=function BF(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,Ti.key=t,e),Eu(n,t,e))}function Eu(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function tt(n,t,e){const r=We();return ni(r,wa(),t)&&Po(Jn(),ls(),r,n,t,r[Ce],e,!1),tt}function Tw(n,t,e,r,s){const o=s?"class":"style";Pv(n,e,t.inputs[o],o,r)}function Ew(n,t,e){return Ga(n,t,e,!1),Ew}function Ef(n,t){return Ga(n,t,null,!0),Ef}function hx(n){!function Wa(n,t,e,r){const s=Jn(),i=ll(2);s.firstUpdatePass&&px(s,null,i,r);const o=We();if(e!==Wn&&ni(o,i,e)){const a=s.data[Fi()];if(vx(a,r)&&!dx(s,i)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=p2(l,e||"")),Tw(s,a,o,e,r)}else!function UF(n,t,e,r,s,i,o,a){s===Wn&&(s=dr);let l=0,c=0,u=0<s.length?s[0]:null,h=0<i.length?i[0]:null;for(;null!==u||null!==h;){const d=l<s.length?s[l+1]:void 0,g=c<i.length?i[c+1]:void 0;let b,m=null;u===h?(l+=2,c+=2,d!==g&&(m=h,b=g)):null===h||null!==u&&u<h?(l+=2,m=u):(c+=2,m=h,b=g),null!==m&&fx(n,t,e,r,m,b,o,a),u=l<s.length?s[l]:null,h=c<i.length?i[c]:null}}(s,a,o,o[Ce],o[i+1],o[i+1]=function ZF(n,t,e){if(null==e||""===e)return dr;const r=[],s=Zl(e);if(Array.isArray(s))for(let i=0;i<s.length;i++)n(r,s[i],!0);else if("object"==typeof s)for(const i in s)s.hasOwnProperty(i)&&n(r,i,s[i]);else"string"==typeof s&&t(r,s);return r}(n,t,e),r,i)}}(jF,Il,n,!0)}function Il(n,t){for(let e=function RF(n){return function lx(n){Ti.key=0,Ti.keyEnd=0,Ti.value=0,Ti.valueEnd=0,Ti.textEnd=n.length}(n),ox(n,Eu(n,0,Ti.textEnd))}(t);e>=0;e=ox(t,e))Yi(n,ix(t),!0)}function Ga(n,t,e,r){const s=We(),i=Jn(),o=ll(2);i.firstUpdatePass&&px(i,n,o,r),t!==Wn&&ni(s,o,t)&&fx(i,i.data[Fi()],s,s[Ce],n,s[o+1]=function $F(n,t){return null==n||""===n||("string"==typeof t?n+=t:"object"==typeof n&&(n=$s(Zl(n)))),n}(t,e),r,o)}function dx(n,t){return t>=n.expandoStartIndex}function px(n,t,e,r){const s=n.data;if(null===s[e+1]){const i=s[Fi()],o=dx(n,e);vx(i,r)&&null===t&&!o&&(t=!1),t=function OF(n,t,e,r){const s=function fg(n){const t=_n.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}(n);let i=r?t.residualClasses:t.residualStyles;if(null===s)0===(r?t.classBindings:t.styleBindings)&&(e=$d(e=Lw(null,n,t,e,r),t.attrs,r),i=null);else{const o=t.directiveStylingLast;if(-1===o||n[o]!==s)if(e=Lw(s,n,t,e,r),null===i){let l=function kF(n,t,e){const r=e?t.classBindings:t.styleBindings;if(0!==k1(r))return n[Bc(r)]}(n,t,r);void 0!==l&&Array.isArray(l)&&(l=Lw(null,n,t,l[1],r),l=$d(l,t.attrs,r),function GF(n,t,e,r){n[Bc(e?t.classBindings:t.styleBindings)]=r}(n,t,r,l))}else i=function WF(n,t,e){let r;const s=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<s;i++)r=$d(r,n[i].hostAttrs,e);return $d(r,t.attrs,e)}(n,t,r)}return void 0!==i&&(r?t.residualClasses=i:t.residualStyles=i),e}(s,i,t,r),function VF(n,t,e,r,s,i){let o=i?t.classBindings:t.styleBindings,a=Bc(o),l=k1(o);n[r]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||Vt(e,u)>0)&&(c=!0)):u=e,s)if(0!==l){const d=Bc(n[a+1]);n[r+1]=Tf(d,a),0!==d&&(n[d+1]=zw(n[d+1],r)),n[a+1]=function MF(n,t){return 131071&n|t<<17}(n[a+1],r)}else n[r+1]=Tf(a,0),0!==a&&(n[a+1]=zw(n[a+1],r)),a=r;else n[r+1]=Tf(l,0),0===a?a=r:n[l+1]=zw(n[l+1],r),l=r;c&&(n[r+1]=Mw(n[r+1])),sx(n,u,r,!0),sx(n,u,r,!1),function TF(n,t,e,r,s){const i=s?n.residualClasses:n.residualStyles;null!=i&&"string"==typeof t&&Vt(i,t)>=0&&(e[r+1]=Vw(e[r+1]))}(t,u,n,r,i),o=Tf(a,l),i?t.classBindings=o:t.styleBindings=o}(s,i,t,e,o,r)}}function Lw(n,t,e,r,s){let i=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(i=t[a],r=$d(r,i.hostAttrs,s),i!==n);)a++;return null!==n&&(e.directiveStylingLast=a),r}function $d(n,t,e){const r=e?1:2;let s=-1;if(null!==t)for(let i=0;i<t.length;i++){const o=t[i];"number"==typeof o?s=o:s===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Yi(n,o,!!e||t[++i]))}return void 0===n?null:n}function jF(n,t,e){const r=String(t);""!==r&&!r.includes(" ")&&Yi(n,r,e)}function fx(n,t,e,r,s,i,o,a){if(!(3&t.type))return;const l=n.data,c=l[a+1],u=function zF(n){return!(1&~n)}(c)?mx(l,t,e,s,k1(c),o):void 0;Lf(u)||(Lf(i)||function _F(n){return!(2&~n)}(c)&&(i=mx(l,null,e,s,a,o)),function lD(n,t,e,r,s){if(t)s?n.addClass(e,r):n.removeClass(e,r);else{let i=-1===r.indexOf("-")?void 0:Ec.DashCase;null==s?n.removeStyle(e,r,i):("string"==typeof s&&s.endsWith("!important")&&(s=s.slice(0,-10),i|=Ec.Important),n.setStyle(e,r,s,i))}}(r,o,O2(Fi(),e),s,i))}function mx(n,t,e,r,s,i){const o=null===t;let a;for(;s>0;){const l=n[s],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let d=e[s+1];d===Wn&&(d=h?dr:void 0);let g=h?V2(d,r):u===r?d:void 0;if(c&&!Lf(g)&&(g=V2(l,r)),Lf(g)&&(a=g,o))return a;const m=n[s+1];s=o?Bc(m):k1(m)}if(null!==t){let l=i?t.residualClasses:t.residualStyles;null!=l&&(a=V2(l,r))}return a}function Lf(n){return void 0!==n}function vx(n,t){return!!(n.flags&(t?8:16))}function gt(n,t,e,r){const s=We(),i=Jn(),o=on+n,a=s[Ce],l=i.firstCreatePass?function mP(n,t,e,r,s,i){const o=t.consts,l=L1(t,n,2,r,Qo(o,s));return Dv(t,e,l,Qo(o,i)),null!==l.attrs&&If(l,l.attrs,!1),null!==l.mergedAttrs&&If(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,i,s,t,e,r):i.data[o],c=Ix(i,s,l,a,t,n);s[o]=c;const u=$h(l);return va(l,!0),UI(a,c,l),!function fu(n){return!(32&~n.flags)}(l)&&W2()&&af(i,s,c,l),0===function B7(){return _n.lFrame.elementDepthCount}()&&Qi(c,s),function N7(){_n.lFrame.elementDepthCount++}(),u&&(Ev(i,s,l),Tv(i,l,s)),null!==r&&Lv(s,l),gt}function ut(){let n=Ur();dg()?pg():(n=n.parent,va(n,!1));const t=n;(function P7(n){return _n.skipHydrationRootTNode===n})(t)&&function W7(){_n.skipHydrationRootTNode=null}(),function F7(){_n.lFrame.elementDepthCount--}();const e=Jn();return e.firstCreatePass&&(Qh(e,n),rg(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function ry(n){return!!(8&n.flags)}(t)&&Tw(e,t,We(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function sy(n){return!!(16&n.flags)}(t)&&Tw(e,t,We(),t.stylesWithoutHost,!1),ut}function Lu(n,t,e,r){return gt(n,t,e,r),ut(),Lu}let Ix=(n,t,e,r,s,i)=>(Fa(!0),rf(r,s,function Q3(){return _n.lFrame.currentNamespace}()));function Df(n,t,e){const r=We(),s=Jn(),i=n+on,o=s.firstCreatePass?function CP(n,t,e,r,s){const i=t.consts,o=Qo(i,r),a=L1(t,n,8,"ng-container",o);return null!==o&&If(a,o,!0),Dv(t,e,a,Qo(i,s)),null!==t.queries&&t.queries.elementStart(t,a),a}(i,s,r,t,e):s.data[i];va(o,!0);const a=Ax(s,r,o,n);return r[i]=a,W2()&&af(s,r,a,o),Qi(a,r),$h(o)&&(Ev(s,r,o),Tv(s,o,r)),null!=e&&Lv(r,o),Df}function Bf(){let n=Ur();const t=Jn();return dg()?pg():(n=n.parent,va(n,!1)),t.firstCreatePass&&(Qh(t,n),rg(n)&&t.queries.elementEnd(n)),Bf}function Nf(n,t,e){return Df(n,t,e),Bf(),Nf}let Ax=(n,t,e,r)=>(Fa(!0),Av(t[Ce],""));function gr(){return We()}const Ff="en-US";let _x=Ff,jx=(n,t,e)=>{};function Ht(n,t,e,r){const s=We(),i=Jn(),o=Ur();return Pw(i,s,s[Ce],o,n,t,r),Ht}function Pw(n,t,e,r,s,i,o){const a=$h(r),c=n.firstCreatePass&&iA(n),u=t[Kt],h=sA(t);let d=!0;if(3&r.type||o){const b=oo(r,t),V=o?o(b):b,M=h.length,D=o?X=>o(_r(X[r.index])):r.index;let J=null;if(!o&&a&&(J=function dO(n,t,e,r){const s=n.cleanup;if(null!=s)for(let i=0;i<s.length-1;i+=2){const o=s[i];if(o===e&&s[i+1]===r){const a=t[kr],l=s[i+2];return a.length>l?a[l]:null}"string"==typeof o&&(i+=2)}return null}(n,t,s,r.index)),null!==J)(J.__ngLastListenerFn__||J).__ngNextListenerFn__=i,J.__ngLastListenerFn__=i,d=!1;else{i=Yx(r,t,u,i),jx(b,s,i);const X=e.listen(V,s,i);h.push(i,X),c&&c.push(s,D,M,M+1)}}else i=Yx(r,t,u,i);const g=r.outputs;let m;if(d&&null!==g&&(m=g[s])){const b=m.length;if(b)for(let V=0;V<b;V+=2){const G=t[m[V]][m[V+1]].subscribe(i),K=h.length;h.push(i,G),c&&c.push(s,r.index,K,-(K+1))}}}function Xx(n,t,e,r){const s=_(null);try{return Na(6,t,e),!1!==e(r)}catch(i){return hf(n,i),!1}finally{Na(7,t,e),_(s)}}function Yx(n,t,e,r){return function s(i){if(i===Function)return r;_d(n.componentOffset>-1?Do(n.index,t):t,5);let a=Xx(t,e,r,i),l=s.__ngNextListenerFn__;for(;l;)a=Xx(t,e,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function nt(n=1){return function X7(n){return(_n.lFrame.contextLView=function F3(n,t){for(;n>0;)t=t[qi],n--;return t}(n,_n.lFrame.contextLView))[Kt]}(n)}function pO(n,t){let e=null;const r=function Gp(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(n);for(let s=0;s<t.length;s++){const i=t[s];if("*"!==i){if(null===r?D2(n,i,!0):jp(r,i))return s}else e=s}return e}function Ow(n){const t=We()[bs][as];if(!t.projection){const r=t.projection=function fe(n,t){const e=[];for(let r=0;r<n;r++)e.push(t);return e}(n?n.length:1,null),s=r.slice();let i=t.child;for(;null!==i;){if(128!==i.type){const o=n?pO(i,n):0;null!==o&&(s[o]?s[o].projectionNext=i:r[o]=i,s[o]=i)}i=i.next}}}function kw(n,t=0,e,r,s,i){const o=We(),a=Jn(),l=r?n+1:null;null!==l&&Gd(o,a,l,r,s,i,null,e);const c=L1(a,on+n,16,null,e||null);null===c.projection&&(c.projection=t),pg();const h=!o[ft]||bc();null===o[bs][as].projection[c.projection]&&null!==l?function gO(n,t,e){const r=on+e,s=t.data[r],i=n[r],o=B1(i,s.tView.ssrId);uu(i,cu(n,s,void 0,{dehydratedView:o}),0,R1(s,o))}(o,a,l):h&&32&~c.flags&&function oD(n,t,e){ZI(t[Ce],0,t,e,Sv(n,e,t),FI(e.parent||t[as],e,t))}(a,o,c)}function Qd(n,t,e){JA(n,t,e)}function e0(n){const t=We(),e=Jn(),r=mg();Jh(r+1);const s=hw(e,r);if(n.dirty&&function R7(n){return!(4&~n[gn])}(t)===!(2&~s.metadata.flags)){if(null===s.matches)n.reset([]);else{const i=tb(t,r);n.reset(i,_m),n.notifyOnChanges()}return!0}return!1}function t0(){return function uw(n,t){return n[sl].queries[t].queryList}(We(),mg())}function Nc(n){return Ac(function G3(){return _n.lFrame.contextLView}(),on+n)}function Co(n,t=""){const e=We(),r=Jn(),s=n+on,i=r.firstCreatePass?L1(r,s,1,t,null):r.data[s],o=gS(r,e,i,t,n);e[s]=o,W2()&&af(r,e,o,i),va(i,!1)}let gS=(n,t,e,r,s)=>(Fa(!0),function Iv(n,t){return n.createText(t)}(t[Ce],r));function Zw(n){return Fc("",n,""),Zw}function Fc(n,t,e){const r=We(),s=function xu(n,t,e,r){return ni(n,wa(),e)?t+Vn(e)+r:Wn}(r,n,t,e);return s!==Wn&&function jl(n,t,e){const r=O2(t,n);!function EI(n,t,e){n.setValue(t,e)}(n[Ce],r,e)}(r,Fi(),s),Fc}function rs(n,t,e){ib(t)&&(t=t());const r=We();return ni(r,wa(),t)&&Po(Jn(),ls(),r,n,t,r[Ce],e,!1),rs}function us(n,t){const e=ib(n);return e&&n.set(t),e}function ss(n,t){const e=We(),r=Jn(),s=Ur();return Pw(r,e,e[Ce],s,n,t),ss}function jw(n,t,e,r,s){if(n=wn(n),Array.isArray(n))for(let i=0;i<n.length;i++)jw(n[i],t,e,r,s);else{const i=Jn(),o=We(),a=Ur();let l=Rt(n)?n:wn(n.provide);const c=I3(n),u=1048575&a.providerIndexes,h=a.directiveStart,d=a.providerIndexes>>20;if(Rt(n)||!n.multi){const g=new Z2(c,s,Tt),m=$w(l,t,s?u:u+d,h);-1===m?(Sg(rd(a,o),i,l),Uw(i,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),e.push(g),o.push(g)):(e[m]=g,o[m]=g)}else{const g=$w(l,t,u+d,h),m=$w(l,t,u,u+d),V=m>=0&&e[m];if(s&&!V||!s&&!(g>=0&&e[g])){Sg(rd(a,o),i,l);const M=function DO(n,t,e,r,s){const i=new Z2(n,e,Tt);return i.multi=[],i.index=t,i.componentProviders=0,SS(i,s,r&&!e),i}(s?RO:LO,e.length,s,r,c);!s&&V&&(e[m].providerFactory=M),Uw(i,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),e.push(M),o.push(M)}else Uw(i,n,g>-1?g:m,SS(e[s?m:g],c,!s&&r));!s&&r&&V&&e[m].componentProviders++}}}function Uw(n,t,e,r){const s=Rt(t),i=function Nr(n){return!!n.useClass}(t);if(s||i){const l=(i?wn(t.useClass):t).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!s&&t.multi){const u=c.indexOf(e);-1===u?c.push(e,[r,l]):c[u+1].push(r,l)}else c.push(e,l)}}}function SS(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function $w(n,t,e,r){for(let s=e;s<r;s++)if(t[s]===n)return s;return-1}function LO(n,t,e,r){return Xw(this.multi,[])}function RO(n,t,e,r){const s=this.multi;let i;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Hc(e,e[vt],this.providerFactory.index,r);i=a.slice(0,o),Xw(s,i);for(let l=o;l<a.length;l++)i.push(a[l])}else i=[],Xw(s,i);return i}function Xw(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function Bs(n,t=[]){return e=>{e.providersResolver=(r,s)=>function EO(n,t,e){const r=Jn();if(r.firstCreatePass){const s=ma(n);jw(e,r.data,r.blueprint,s,!0),jw(t,r.data,r.blueprint,s,!1)}}(r,s?s(n):n,t)}}let BO=(()=>{class n{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const r=Cc(0,e.type),s=r.length>0?function Ab(n,t,e=null){return new Ib({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,s)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=zt({token:n,providedIn:"environment",factory:()=>new n(Se(Yo))})}}return n})();function Yw(n){vo("NgStandalone"),n.getStandaloneInjector=t=>t.get(BO).getOrCreateStandaloneInjector(n)}function ko(n,t,e){const r=ao()+n,s=We();return s[r]===Wn?Cl(s,r,e?t.call(e):t()):function kd(n,t){return n[t]}(s,r)}function Zf(n,t,e,r){return MS(We(),ao(),n,t,e,r)}function Kw(n,t,e,r,s){return function zS(n,t,e,r,s,i,o){const a=t+e;return function P1(n,t,e,r){const s=ni(n,t,e);return ni(n,t+1,r)||s}(n,a,s,i)?Cl(n,a+2,o?r.call(o,s,i):r(s,i)):n0(n,a+2)}(We(),ao(),n,t,e,r,s)}function n0(n,t){const e=n[t];return e===Wn?void 0:e}function MS(n,t,e,r,s,i){const o=t+e;return ni(n,o,s)?Cl(n,o+1,i?r.call(i,s):r(s)):n0(n,o+1)}function RS(n,t,e){const r=n+on,s=We(),i=Ac(s,r);return function r0(n,t){return n[vt].data[t].pure}(s,r)?MS(s,ao(),t,i.transform,e,i):i.transform(e)}function Pc(n,t){return pf(n,t)}const eH=new At(""),Xf=new At("");let s6,n6=(()=>{class n{constructor(e,r,s){this._ngZone=e,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,s6||(function Uk(n){s6=n}(s),s.addToWindow(r)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$r.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,s){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==i),e()},r)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:s})}whenStable(e,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,s),this._runCallbacksIfReady()}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,r,s){return[]}static{this.\u0275fac=function(r){return new(r||n)(Se($r),Se(r6),Se(Xf))}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})(),r6=(()=>{class n{constructor(){this._applications=new Map}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return s6?.findTestabilityInTree(this,e,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function Yf(n){return!!n&&"function"==typeof n.then}function tH(n){return!!n&&"function"==typeof n.subscribe}const nH=new At("");let rH=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r}),this.appInits=v(nH,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const s of this.appInits){const i=s();if(Yf(i))e.push(i);else if(tH(i)){const o=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});e.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(s=>{this.reject(s)}),0===e.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const i6=new At("");function iH(n,t){return Array.isArray(t)?t.reduce(iH,n):{...n,...t}}let Xl=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=v(Vy),this.afterRenderManager=v(Vb),this.zonelessEnabled=v(Bd),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ps,this.afterTick=new Ps,this.componentTypes=[],this.components=[],this.isStable=v(Gl).hasPendingTasks.pipe(R(e=>!e)),this._injector=v(Yo)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:s=>{s&&r()}})}).finally(()=>{e.unsubscribe()})}get injector(){return this._injector}bootstrap(e,r){const s=e instanceof NA;if(!this._injector.get(rH).done)throw!s&&function Ra(n){const t=$n(n)||Ds(n)||cr(n);return null!==t&&t.standalone}(e),new ie(405,!1);let o;o=s?e:this._injector.get(Cf).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function $k(n){return n.isBoundToModule}(o)?void 0:this._injector.get(F1),c=o.create(Sn.NULL,[],r||o.selector,a),u=c.location.nativeElement,h=c.injector.get(eH,null);return h?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Kf(this.components,c),h?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ie(101,!1);const e=_(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,_(e),this.afterTick.next()}}synchronize(){let e=null;this._injector.destroyed||(e=this._injector.get(ew,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;0!==this.dirtyFlags&&r++<10;)this.synchronizeOnce(e)}synchronizeOnce(e){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:s,notifyErrorHandler:i}of this._views)Kk(s,i,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else e?.begin?.(),e?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:e})=>Xh(e))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;Kf(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const r=this._injector.get(i6,[]);[...this._bootstrapListeners,...r].forEach(s=>s(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Kf(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new ie(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Kf(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function Kk(n,t,e,r){(e||Xh(n))&&df(n,t,e&&!r?0:1)}let eG=(()=>{class n{constructor(){this.zone=v($r),this.changeDetectionScheduler=v(du),this.applicationRef=v(Xl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function o6({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new $r({...a6(),scheduleInRootZone:e}),[{provide:$r,useFactory:n},{provide:ga,multi:!0,useFactory:()=>{const r=v(eG,{optional:!0});return()=>r.initialize()}},{provide:ga,multi:!0,useFactory:()=>{const r=v(nG);return()=>{r.initialize()}}},!0===t?{provide:BA,useValue:!0}:[],{provide:Qv,useValue:e??Cm}]}function a6(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let nG=(()=>{class n{constructor(){this.subscription=new Ie,this.initialized=!1,this.zone=v($r),this.pendingTasks=v(Gl)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{$r.assertNotInAngularZone(),queueMicrotask(()=>{null!==e&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{$r.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),a0=(()=>{class n{constructor(){this.appRef=v(Xl),this.taskService=v(Gl),this.ngZone=v($r),this.zonelessEnabled=v(Bd),this.disableScheduling=v(BA,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ie,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(cd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(v(Qv,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Lg||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&5===e)return;switch(e){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?Im:ym;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(cd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(e),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Im(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const Oc=new At("",{providedIn:"root",factory:()=>v(Oc,nr.Optional|nr.SkipSelf)||function rG(){return typeof $localize<"u"&&$localize.locale||Ff}()}),Jf=new At("");function Qf(n){return!n.moduleRef}let dH=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const s=r?.scheduleInRootZone,o=r?.ignoreChangesOutsideZone,a=[o6({ngZoneFactory:()=>function zy(n="zone.js",t){return"noop"===n?new Lg:"zone.js"===n?new $r(t):n}(r?.ngZone,{...a6({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}),scheduleInRootZone:s}),ignoreChangesOutsideZone:o}),{provide:du,useExisting:a0}],l=function PN(n,t,e){return new gw(n,t,e,!1)}(e.moduleType,this.injector,a);return function hH(n){const t=Qf(n)?n.r3Injector:n.moduleRef.injector,e=t.get($r);return e.run(()=>{Qf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const r=t.get(Oa,null);let s;if(e.runOutsideAngular(()=>{s=e.onError.subscribe({next:i=>{r.handleError(i)}})}),Qf(n)){const i=()=>t.destroy(),o=n.platformInjector.get(Jf);o.add(i),t.onDestroy(()=>{s.unsubscribe(),o.delete(i)})}else{const i=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Jf);o.add(i),n.moduleRef.onDestroy(()=>{Kf(n.allPlatformModules,n.moduleRef),s.unsubscribe(),o.delete(i)})}return function Yk(n,t,e){try{const r=e();return Yf(r)?r.catch(s=>{throw t.runOutsideAngular(()=>n.handleError(s)),s}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}(r,e,()=>{const i=t.get(rH);return i.runInitializers(),i.donePromise.then(()=>{if(function MP(n){"string"==typeof n&&(_x=n.toLowerCase().replace(/_/g,"-"))}(t.get(Oc,Ff)||Ff),Qf(n)){const a=t.get(Xl);return void 0!==n.rootComponent&&a.bootstrap(n.rootComponent),a}return function cG(n,t){const e=n.injector.get(Xl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>e.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new ie(-403,!1);n.instance.ngDoBootstrap(e)}t.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({moduleRef:l,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(e,r=[]){const s=iH({},r);return function Qk(n,t,e){const r=new fw(e);return Promise.resolve(r)}(0,0,e).then(i=>this.bootstrapModuleFactory(i,s))}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ie(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const e=this._injector.get(Jf,null);e&&(e.forEach(r=>r()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(Se(Sn))}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),kc=null;const pH=new At("");function gH(n,t,e=[]){const r=`Platform: ${t}`,s=new At(r);return(i=[])=>{let o=c6();if(!o||o.injector.get(pH,!1)){const a=[...e,...i,{provide:s,useValue:!0}];n?n(a):function uG(n){if(kc&&!kc.get(pH,!1))throw new ie(400,!1);(function sH(){!function F(n){kt=n}(()=>{throw new ie(600,!1)})})(),kc=n;const t=n.get(dH);(function mH(n){n.get($m,null)?.forEach(e=>e())})(n)}(function fH(n=[],t){return Sn.create({name:t,providers:[{provide:fa,useValue:"platform"},{provide:Jf,useValue:new Set([()=>kc=null])},...n]})}(a,r))}return function hG(){const t=c6();if(!t)throw new ie(401,!1);return t}()}}function c6(){return kc?.get(dH)??null}let u6=(()=>{class n{static{this.__NG_ELEMENT_ID__=pG}}return n})();function pG(n){return function gG(n,t,e){if(Ic(n)&&!e){const r=Do(n.index,t);return new Md(r,r)}return 175&n.type?new Md(t[bs],t):null}(Ur(),We(),!(16&~n))}class IH{constructor(){}supports(t){return xf(t)}create(t){return new CG(t)}}const wG=(n,t)=>t;class CG{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||wG}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,s=0,i=null;for(;e||r;){const o=!r||e&&e.currentIndex<bH(r,s,i)?e:r,a=bH(o,s,i),l=o.currentIndex;if(o===r)s--,r=r._nextRemoved;else if(e=e._next,null==o.previousIndex)s++;else{i||(i=[]);const c=a-s,u=l-s;if(c!=u){for(let d=0;d<c;d++){const g=d<i.length?i[d]:i[d]=0,m=g+d;u<=m&&m<c&&(i[d]=g+1)}i[o.previousIndex]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!xf(t))throw new ie(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let s,i,o,e=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)i=t[a],o=this._trackByFn(a,i),null!==e&&Object.is(e.trackById,o)?(r&&(e=this._verifyReinsertion(e,i,o,a)),Object.is(e.item,i)||this._addIdentityChange(e,i)):(e=this._mismatch(e,i,o,a),r=!0),e=e._next}else s=0,function GN(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[Symbol.iterator]();let r;for(;!(r=e.next()).done;)t(r.value)}}(t,a=>{o=this._trackByFn(s,a),null!==e&&Object.is(e.trackById,o)?(r&&(e=this._verifyReinsertion(e,a,o,s)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,s),r=!0),e=e._next,s++}),this.length=s;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,s){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,s)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,s))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,s)):t=this._addAfter(new yG(e,r),i,s),t}_verifyReinsertion(t,e,r,s){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?t=this._reinsertAfter(i,t._prev,s):t.currentIndex!=s&&(t.currentIndex=s,this._addToMoves(t,s)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const s=t._prevRemoved,i=t._nextRemoved;return null===s?this._removalsHead=i:s._nextRemoved=i,null===i?this._removalsTail=s:i._prevRemoved=s,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const s=null===e?this._itHead:e._next;return t._next=s,t._prev=e,null===s?this._itTail=t:s._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new AH),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AH),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class yG{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class IG{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class AH{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new IG,this.map.set(e,r)),r.add(t)}get(t,e){const s=this.map.get(t);return s?s.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bH(n,t,e){const r=n.previousIndex;if(null===r)return r;let s=0;return e&&r<e.length&&(s=e[r]),r+t+s}class xH{constructor(){}supports(t){return t instanceof Map||mw(t)}create(){return new AG}}class AG{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||mw(t)))throw new ie(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,s)=>{if(e&&e.key===s)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(s,r);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const s=this._records.get(t);this._maybeAddToChanges(s,e);const i=s._prev,o=s._next;return i&&(i._next=o),o&&(o._prev=i),s._next=null,s._prev=null,s}const r=new bG(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}}class bG{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function SH(){return new f6([new IH])}let f6=(()=>{class n{static{this.\u0275prov=zt({token:n,providedIn:"root",factory:SH})}constructor(e){this.factories=e}static create(e,r){if(null!=r){const s=r.factories.slice();e=e.concat(s)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||SH()),deps:[[n,new fc,new Eh]]}}find(e){const r=this.factories.find(s=>s.supports(e));if(null!=r)return r;throw new ie(901,!1)}}return n})();function HH(){return new n4([new xH])}let n4=(()=>{class n{static{this.\u0275prov=zt({token:n,providedIn:"root",factory:HH})}constructor(e){this.factories=e}static create(e,r){if(r){const s=r.factories.slice();e=e.concat(s)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||HH()),deps:[[n,new fc,new Eh]]}}find(e){const r=this.factories.find(s=>s.supports(e));if(r)return r;throw new ie(901,!1)}}return n})();const HG=gH(null,"core",[]);let _G=(()=>{class n{constructor(e){}static{this.\u0275fac=function(r){return new(r||n)(Se(Xl))}}static{this.\u0275mod=pr({type:n})}static{this.\u0275inj=pa({})}}return n})();function h0(n,t){vo("NgSignals");const e=function $e(n){const t=Object.create(De);t.computation=n;const e=()=>{if(se(t),ue(t),t.value===ne)throw t.error;return t.value};return e[Pe]=t,e}(n);return t?.equal&&(e[Pe].equal=t.equal),e}function Al(n){const t=_(null);try{return n()}finally{_(t)}}const iW=new At("",{providedIn:"root",factory:()=>v(oW)});let oW=(()=>{class n{static{this.\u0275prov=zt({token:n,providedIn:"root",factory:()=>new aW})}}return n})();class aW{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=v(Gl),this.taskId=null}scheduleEffect(t){if(this.enqueue(t),null===this.taskId){const e=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(e),this.taskId=null})}}enqueue(t){const e=t.creationZone;this.queues.has(e)||this.queues.set(e,new Set);const r=this.queues.get(e);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(const[t,e]of this.queues)null===t?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(const e of t)t.delete(e),this.queuedEffectCount--,e.run()}}class lW{constructor(t,e,r,s,i,o){this.scheduler=t,this.effectFn=e,this.creationZone=r,this.injector=i,this.watcher=function Pn(n,t,e){const r=Object.create(Zs);e&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=t;const s=l=>{r.cleanupFn=l};return r.ref={notify:()=>be(r),run:()=>{if(null===r.fn)return;if(function p(){return Je}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!ve(r))return;r.hasRun=!0;const l=St(r);try{r.cleanupFn(),r.cleanupFn=os,r.fn(s)}finally{ee(r,l)}},cleanup:()=>r.cleanupFn(),destroy:()=>function o(l){(function i(l){return null===l.fn&&null===l.schedule})(l)||(xe(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=os)}(r),[Pe]:r},r.ref}(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}runEffect(t){try{this.effectFn(t)}catch(e){this.injector.get(Oa,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function YH(n,t){vo("NgSignals"),!t?.injector&&function eg(n){if(!b3())throw new ie(-203,!1)}();const e=t?.injector??v(Sn),r=!0!==t?.manualCleanup?e.get($2):null,s=new lW(e.get(iW),n,typeof Zone>"u"?null:Zone.current,r,e,t?.allowSignalWrites??!1),i=e.get(u6,null,{optional:!0});return i&&8&i._lView[gn]?(i._lView[Zh]??=[]).push(s.watcher.notify):s.watcher.notify(),s}let KH=null;function d0(){return KH}class uW{}const Gc=new At("");function i_(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[s,i]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(s.trim()===t)return decodeURIComponent(i)}return null}const M6=/\s+/,o_=[];let a_=(()=>{class n{constructor(e,r){this._ngEl=e,this._renderer=r,this.initialClasses=o_,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(M6):o_}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(M6):e}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const r of e)this._updateState(r,!0);else if(null!=e)for(const r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){const s=this.stateMap.get(e);void 0!==s?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const r=e[0],s=e[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(e,r){(e=e.trim()).length>0&&e.split(M6).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}static{this.\u0275fac=function(r){return new(r||n)(Tt(ea),Tt(Lc))}}static{this.\u0275dir=Rn({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class qW{constructor(t,e,r,s){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let y4=(()=>{class n{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,r,s){this._viewContainer=e,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=this._viewContainer;e.forEachOperation((s,i,o)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new qW(s.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,o),c_(a,s)}});for(let s=0,i=r.length;s<i;s++){const a=r.get(s).context;a.index=s,a.count=i,a.ngForOf=this._ngForOf}e.forEachIdentityChange(s=>{c_(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(e,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Tt(wl),Tt(Ul),Tt(f6))}}static{this.\u0275dir=Rn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function c_(n,t){n.context.$implicit=t.item}let g0=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new JW,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){u_("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){u_("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Tt(wl),Tt(Ul))}}static{this.\u0275dir=Rn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class JW{constructor(){this.$implicit=null,this.ngIf=null}}function u_(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${$s(t)}'.`)}let T6=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const s=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,r,s)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,r,s),get:(e,r,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,s)}})}static{this.\u0275fac=function(r){return new(r||n)(Tt(wl))}}static{this.\u0275dir=Rn({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[il]})}}return n})(),d_=(()=>{class n{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=p_}transform(e,r=p_){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ??=this.differs.find(e).create();const s=this.differ.diff(e),i=r!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(o=>{this.keyValues.push(function yZ(n,t){return{key:n,value:t}}(o.key,o.currentValue))})),(s||i)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}static{this.\u0275fac=function(r){return new(r||n)(Tt(n4,16))}}static{this.\u0275pipe=Ki({name:"keyvalue",type:n,pure:!1,standalone:!0})}}return n})();function p_(n,t){const e=n.key,r=t.key;if(e===r)return 0;if(void 0===e)return 1;if(void 0===r)return-1;if(null===e)return 1;if(null===r)return-1;if("string"==typeof e&&"string"==typeof r)return e<r?-1:1;if("number"==typeof e&&"number"==typeof r)return e-r;if("boolean"==typeof e&&"boolean"==typeof r)return e<r?-1:1;const s=String(e),i=String(r);return s==i?0:s<i?-1:1}let xZ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pr({type:n})}static{this.\u0275inj=pa({})}}return n})();function R6(n){return"server"===n}class f_{}class ej extends uW{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class F6 extends ej{static makeCurrent(){!function cW(n){KH??=n}(new F6)}onAndCancel(t,e,r){return t.addEventListener(e,r),()=>{t.removeEventListener(e,r)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function tj(){return v0=v0||document.querySelector("base"),v0?v0.getAttribute("href"):null}();return null==e?null:function nj(n){return new URL(n,document.baseURI).pathname}(e)}resetBaseElement(){v0=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return i_(document.cookie,t)}}let v0=null,sj=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})();const P6=new At("");let H_=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(s=>{s.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,s){return this._findPluginFor(r).addEventListener(e,r,s)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(i=>i.supports(e)),!r)throw new ie(5101,!1);return this._eventNameToPlugin.set(e,r),r}static{this.\u0275fac=function(r){return new(r||n)(Se(P6),Se($r))}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})();class __{constructor(t){this._doc=t}}const O6="ng-app-id";let M_=(()=>{class n{constructor(e,r,s,i={}){this.doc=e,this.appId=r,this.nonce=s,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=R6(i),this.resetHostNodes()}addStyles(e){for(const r of e)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(e){for(const r of e)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(r=>r.remove()),e.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const r of this.getAllStyles())this.addStyleToHost(e,r)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const r of this.hostNodes)this.addStyleToHost(r,e)}onStyleRemoved(e){const r=this.styleRef;r.get(e)?.elements?.forEach(s=>s.remove()),r.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${O6}="${this.appId}"]`);if(e?.length){const r=new Map;return e.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(e,r){const s=this.styleRef;if(s.has(e)){const i=s.get(e);return i.usage+=r,i.usage}return s.set(e,{usage:r,elements:[]}),r}getStyleElement(e,r){const s=this.styleNodesInDOM,i=s?.get(r);if(i?.parentNode===e)return s.delete(r),i.removeAttribute(O6),i;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(O6,this.appId),e.appendChild(o),o}}addStyleToHost(e,r){const s=this.getStyleElement(e,r),i=this.styleRef,o=i.get(r)?.elements;o?o.push(s):i.set(r,{elements:[s],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(Se(Gc),Se(H1),Se(Xm,8),Se(hl))}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})();const k6={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},G6=/%COMP%/g,lj=new At("",{providedIn:"root",factory:()=>!0});function V_(n,t){return t.map(e=>e.replace(G6,n))}let T_=(()=>{class n{constructor(e,r,s,i,o,a,l,c=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=i,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=R6(a),this.defaultRenderer=new W6(e,o,l,this.platformIsServer)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Lo.ShadowDom&&(r={...r,encapsulation:Lo.Emulated});const s=this.getOrCreateRenderer(e,r);return s instanceof L_?s.applyToHost(e):s instanceof Z6&&s.applyStyles(),s}getOrCreateRenderer(e,r){const s=this.rendererByCompId;let i=s.get(r.id);if(!i){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Lo.Emulated:i=new L_(l,c,r,this.appId,u,o,a,h);break;case Lo.ShadowDom:return new dj(l,c,e,r,o,a,this.nonce,h);default:i=new Z6(l,c,r,u,o,a,h)}s.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(Se(H_),Se(M_),Se(H1),Se(lj),Se(Gc),Se(hl),Se($r),Se(Xm))}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})();class W6{constructor(t,e,r,s){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(k6[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(E_(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(E_(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new ie(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,s){if(s){e=s+":"+e;const i=k6[s];i?t.setAttributeNS(i,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const s=k6[r];s?t.removeAttributeNS(s,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,s){s&(Ec.DashCase|Ec.Important)?t.style.setProperty(e,r,s&Ec.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Ec.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){null!=t&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r){if("string"==typeof t&&!(t=d0().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(r))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function E_(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class dj extends W6{constructor(t,e,r,s,i,o,a,l){super(t,i,o,l),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=V_(s.id,s.styles);for(const u of c){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Z6 extends W6{constructor(t,e,r,s,i,o,a,l){super(t,i,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=s,this.styles=l?V_(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class L_ extends Z6{constructor(t,e,r,s,i,o,a,l){const c=s+"-"+r.id;super(t,e,r,i,o,a,l,c),this.contentAttr=function cj(n){return"_ngcontent-%COMP%".replace(G6,n)}(c),this.hostAttr=function uj(n){return"_nghost-%COMP%".replace(G6,n)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}let pj=(()=>{class n extends __{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,s){return e.addEventListener(r,s,!1),()=>this.removeEventListener(e,r,s)}removeEventListener(e,r,s){return e.removeEventListener(r,s)}static{this.\u0275fac=function(r){return new(r||n)(Se(Gc))}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})();const R_=["alt","control","meta","shift"],gj={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let mj=(()=>{class n extends __{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,s){const i=n.parseEventName(r),o=n.eventCallback(i.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>d0().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const r=e.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const i=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),R_.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=i,0!=r.length||0===i.length)return null;const l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(e,r){let s=gj[e.key]||e.key,i="";return r.indexOf("code.")>-1&&(s=e.code,i="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),R_.forEach(o=>{o!==s&&(0,fj[o])(e)&&(i+=o+".")}),i+=s,i===r)}static eventCallback(e,r,s){return i=>{n.matchEventFullKeyCode(i,e)&&s.runGuarded(()=>r(i))}}static _normalizeKey(e){return"esc"===e?"escape":e}static{this.\u0275fac=function(r){return new(r||n)(Se(Gc))}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})();const yj=gH(HG,"browser",[{provide:hl,useValue:"browser"},{provide:$m,useValue:function vj(){F6.makeCurrent()},multi:!0},{provide:Gc,useFactory:function Cj(){return function Qy(n){Pg=n}(document),document},deps:[]}]),Ij=new At(""),N_=[{provide:Xf,useClass:class rj{addToWindow(t){Ut.getAngularTestability=(r,s=!0)=>{const i=t.findTestabilityInTree(r,s);if(null==i)throw new ie(5103,!1);return i},Ut.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ut.getAllAngularRootElements=()=>t.getAllRootElements(),Ut.frameworkStabilizers||(Ut.frameworkStabilizers=[]),Ut.frameworkStabilizers.push(r=>{const s=Ut.getAllAngularTestabilities();let i=s.length;const o=function(){i--,0==i&&r()};s.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(t,e,r){return null==e?null:t.getTestability(e)??(r?d0().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:eH,useClass:n6,deps:[$r,r6,Xf]},{provide:n6,useClass:n6,deps:[$r,r6,Xf]}],F_=[{provide:fa,useValue:"root"},{provide:Oa,useFactory:function wj(){return new Oa},deps:[]},{provide:P6,useClass:pj,multi:!0,deps:[Gc,$r,hl]},{provide:P6,useClass:mj,multi:!0,deps:[Gc]},T_,M_,H_,{provide:ew,useExisting:T_},{provide:f_,useClass:sj,deps:[]},[]];let Aj=(()=>{class n{constructor(e){}static withServerTransition(e){return{ngModule:n,providers:[{provide:H1,useValue:e.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(Se(Ij,12))}}static{this.\u0275mod=pr({type:n})}static{this.\u0275inj=pa({providers:[...F_,...N_],imports:[xZ,_G]})}}return n})();var lo=Ve(3308);class k_{}class G_{constructor(t=new k_){this.ctx=t}readRecords(t){return Promise.all(t.map(e=>this.readRecord(e)))}writeRecords(t){return Promise.all(t.map(e=>this.writeRecord(e)))}}function S4(n,t){if(Array.isArray(n)&&Array.isArray(t))return n.length===t.length&&n.every((e,r)=>S4(e,t[r]));if(n instanceof Date&&t instanceof Date)return n.getTime()===t.getTime();if(n instanceof URL&&t instanceof URL)return n.toString()===t.toString();if(n instanceof Object&&t instanceof Object){const e=Object.keys(n),r=Object.keys(t);return e.length===r.length&&e.every(s=>S4(n[s],t[s]))}return n===t}const Hj=["abstract","constraint","keywords","lineage","onlineResources","spatialExtents","title"];function W_(n){return Hj.includes(n)}var vi=Ve(7059);function N(...n){return t=>n.reduce((e,r)=>r(e),t)}function fn(n){return t=>n(t)}function Mn(n){return t=>t.map(n)}function Ao(n){return t=>t.filter(n)}function Wc(n){return t=>t.length>n?t[n]:null}function Zc(...n){return t=>{for(let e=0;e<n.length;e++){const r=n[e](t);if(null!==r)return r}return null}}function Jr(...n){return t=>n.map(e=>e(t))}function j1(n){return t=>(n(t),t)}const ii=n=>n;class _j extends Error{constructor(t){super(t)}}function j6(n){let t=null;try{t=(0,vi.parseXml)(n)}catch(e){throw new _j(e instanceof Error?e.message:e)}return t}function U6(n){function t(r){const s=function zj(n){const t=n.indexOf(":");return t>-1?n.substring(0,t):null}(r);"xmlns"===s||null===s||n.attributes[`xmlns:${s}`]||C0[s]&&(n.attributes[`xmlns:${s}`]=C0[s])}return n.attributes=n.attributes||{},function e(r){t(r.name);for(const i in r.attributes)t(i);_4(r).forEach(e)}(n),new vi.XmlDocument([n])}function ql(n){const t=n.indexOf(":");return t>-1?n.substring(t+1):n}function Z_(n){const t=n.indexOf(":");return t>-1?n.substring(0,t):""}function H4(n){return n.name||""}function $6(n){return n.children.find(t=>t instanceof vi.XmlElement)}function Cr(n,t=!0){return e=>{const r=ql(n);return e&&Array.isArray(e.children)?e.children.reduce(function s(i,o){return ql(H4(o))===r&&i.push(o),t&&Array.isArray(o.children)?[...i,...o.children.reduce(s,[])]:i},[]):[]}}function Pt(n,t=!0){return e=>Cr(n,t)(e)[0]||null}function _4(n){return n&&Array.isArray(n.children)?[...n.children.filter(t=>t instanceof vi.XmlElement)]:[]}function Mj(n){return _4(n)[0]??null}function Xr(...n){return t=>t&&Array.isArray(t.children)?t.children.reduce(function e(r){const s=ql(n[r]);return(i,o)=>ql(H4(o))!==s?i:r===n.length-1?[...i,o]:Array.isArray(o.children)?[...i,...o.children.reduce(e(r+1),[])]:i}(0),[]):[]}function Er(...n){return t=>{const e=Xr(...n)(t);return e.length?e[0]:null}}function j_(n){return t=>{let e=t.parent;for(;e&&e instanceof vi.XmlElement;){if(ql(H4(e))===ql(n))return e;e=e.parent}return null}}function Aa(){return n=>{if(!n)return null;const t=Array.isArray(n.children)?n.children.find(e=>"text"===e.type):null;return t?t.text:""}}function xs(n){return t=>t&&t.attributes[n]||null}function w0(n,t=0){const e=a=>a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(n instanceof vi.XmlDocument)return`<?xml version="1.0" encoding="UTF-8"?>${w0(n.children[0])}`;if(n instanceof vi.XmlText){const a=n.text;return a&&""!==a.replace(/^\s+|\s+$/g,"")?e(a):""}if(!(n instanceof vi.XmlElement))return"\x3c!-- unknown --\x3e";const r="    ".repeat(t),s=Array.isArray(n.children)?n.children.map(a=>w0(a,t+1)).filter(a=>""!==a).map((a,l,c)=>l<c.length-1?a.replace(/\n\s*$/g,""):a).join(""):"",i=Object.keys(n.attributes).reduce((a,l)=>a+` ${l}="${e(n.attributes[l])}"`,""),o="    ".repeat(Math.max(0,t-1));return""===s?`\n${r}<${n.name}${i}/>\n${o}`:`\n${r}<${n.name}${i}>${s}</${n.name}>\n${o}`}const C0={gmd:"http://www.isotc211.org/2005/gmd",gco:"http://www.isotc211.org/2005/gco",gfc:"http://www.isotc211.org/2005/gfc",gml:"http://www.opengis.net/gml/3.2",xsi:"http://www.w3.org/2001/XMLSchema-instance",srv:"http://www.isotc211.org/2005/srv",gmx:"http://www.isotc211.org/2005/gmx",gts:"http://www.isotc211.org/2005/gts",gsr:"http://www.isotc211.org/2005/gsr",gmi:"http://www.isotc211.org/2005/gmi",xlink:"http://www.w3.org/1999/xlink",mdb:"http://standards.iso.org/iso/19115/-3/mdb/2.0",mdq:"http://standards.iso.org/iso/19157/-2/mdq/1.0",msr:"http://standards.iso.org/iso/19115/-3/msr/2.0",mrs:"http://standards.iso.org/iso/19115/-3/mrs/1.0",mmi:"http://standards.iso.org/iso/19115/-3/mmi/1.0",mrl:"http://standards.iso.org/iso/19115/-3/mrl/2.0",mdt:"http://standards.iso.org/iso/19115/-3/mdt/2.0",mrd:"http://standards.iso.org/iso/19115/-3/mrd/1.0",mds:"http://standards.iso.org/iso/19115/-3/mds/2.0",mpc:"http://standards.iso.org/iso/19115/-3/mpc/1.0",mcc:"http://standards.iso.org/iso/19115/-3/mcc/1.0",mac:"http://standards.iso.org/iso/19115/-3/mac/2.0",mco:"http://standards.iso.org/iso/19115/-3/mco/1.0",mda:"http://standards.iso.org/iso/19115/-3/mda/1.0",mex:"http://standards.iso.org/iso/19115/-3/mex/1.0",gex:"http://standards.iso.org/iso/19115/-3/gex/1.0",gcx:"http://standards.iso.org/iso/19115/-3/gcx/1.0",mas:"http://standards.iso.org/iso/19115/-3/mas/1.0",mri:"http://standards.iso.org/iso/19115/-3/mri/1.0",cit:"http://standards.iso.org/iso/19115/-3/cit/2.0",cat:"http://standards.iso.org/iso/19115/-3/cat/1.0",lan:"http://standards.iso.org/iso/19115/-3/lan/1.0",mrc:"http://standards.iso.org/iso/19115/-3/mrc/2.0",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",foaf:"http://xmlns.com/foaf/0.1/",xsd:"http://www.w3.org/2001/XMLSchema#",dcat:"http://www.w3.org/ns/dcat#",dct:"http://purl.org/dc/terms/",skos:"http://www.w3.org/2004/02/skos/core#",schema_org:"http://schema.org/",spdx:"https://spdx.org/rdf/terms/#",adms:"http://www.w3.org/ns/adms#",dqv:"http://www.w3.org/ns/dqv#",owl:"http://www.w3.org/2002/07/owl#",vcard:"http://www.w3.org/2006/vcard/ns#",time:"http://www.w3.org/2006/time#",locn:"http://www.w3.org/ns/locn#",mdcat:"https://data.vlaanderen.be/ns/metadata-dcat#"};function rn(n){return()=>new vi.XmlElement(n,{},[])}function Lr(...n){return()=>{let t=null;for(const e of n)t=t?Gs(e)(t):rn(e)();return t}}function bn(n,t){return e=>(e.attributes[n]=t,e)}function U_(n){return t=>{if(!t)return null;const e=n(),r=function Vj(n){let t=n;for(;t.parent instanceof vi.XmlElement;)t=t.parent;return t}(e);return t.children.push(r),r.parent=t,e}}function Gt(...n){return t=>t?(n.filter(e=>e).forEach(e=>U_(e)(t)),t):null}function Gs(n){return t=>{if(!t)return null;const e=rn(n)();return t.children.push(e),e.parent=t,e}}function y0(...n){return t=>{let e=t;for(const r of n)e=Gs(r)(e);return e}}function ba(n){return Zc(Pt(n,!1),Gs(n))}function Ys(...n){return t=>{let e=t;for(const r of n)e=ba(r)(e);return e}}function eo(n){return t=>{if(!t)return null;const e=t.children.find(r=>r instanceof vi.XmlText);return e?e.text=n:t.children.push(new vi.XmlText(n)),t}}function Oi(n){return t=>{if(!t)return null;const e=ql(n),r=t.children.filter(s=>s instanceof vi.XmlElement&&ql(H4(s))===e);return r.forEach(s=>s.parent=null),t.children=t.children.filter(s=>-1===r.indexOf(s)),t}}function xa(n){return t=>{const e=n(t);return e.forEach(r=>r.parent=null),t.children=t.children.filter(r=>r instanceof vi.XmlElement&&-1===e.indexOf(r)),t}}function X6(n){return/wms/i.test(n)?"wms":/wfs/i.test(n)?"wfs":/wmts/i.test(n)?"wmts":/tms/i.test(n)?"tms":/wps/i.test(n)?"wps":/ogc\W*api\W*features/i.test(n)?"ogcFeatures":/esri/i.test(n)?"esriRest":/DOWNLOAD-1/i.test(n)?"GPFDL":/DB:POSTGIS/i.test(n)?"postgis":/stac\W*items/i.test(n)?"stac":"other"}function X_(n){return/shp|shapefile/i.test(n)?"x-gis/x-shapefile":n||null}const Y_=class Ej{constructor(t){this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},Dj=class Rj{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};var to=Ve(2058);function K_(){}function q_(n){let e,r,s,t=!1;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==s||!(0,to.aI)(i,r))&&(t=!0,s=this,r=i,e=n.apply(this,arguments)),e}}function J_(n){for(const t in n)delete n[t]}function Q_(n){let t;for(t in n)return!1;return!t}const Nj=class Bj extends Dj{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const r=this.listeners_||(this.listeners_={}),s=r[t]||(r[t]=[]);s.includes(e)||s.push(e)}dispatchEvent(t){const e="string"==typeof t,r=e?t:t.type,s=this.listeners_&&this.listeners_[r];if(!s)return;const i=e?new Y_(t):t;i.target||(i.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let l;r in o||(o[r]=0,a[r]=0),++o[r];for(let c=0,u=s.length;c<u;++c)if(l="handleEvent"in s[c]?s[c].handleEvent(i):s[c].call(this,i),!1===l||i.propagationStopped){l=!1;break}if(0==--o[r]){let c=a[r];for(delete a[r];c--;)this.removeEventListener(r,K_);delete o[r]}return l}disposeInternal(){this.listeners_&&J_(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){if(!this.listeners_)return;const r=this.listeners_[t];if(!r)return;const s=r.indexOf(e);-1!==s&&(this.pendingRemovals_&&t in this.pendingRemovals_?(r[s]=K_,++this.pendingRemovals_[t]):(r.splice(s,1),0===r.length&&delete this.listeners_[t]))}};function I0(n,t,e,r,s){if(r&&r!==n&&(e=e.bind(r)),s){const o=e;e=function(){n.removeEventListener(t,e),o.apply(this,arguments)}}const i={target:n,type:t,listener:e};return n.addEventListener(t,e),i}function eM(n,t,e,r){return I0(n,t,e,r,!0)}function M4(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),J_(n))}const Pj=class z4 extends Nj{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const r=t.length,s=new Array(r);for(let i=0;i<r;++i)s[i]=I0(this,t[i],e);return s}return I0(this,t,e)}onceInternal(t,e){let r;if(Array.isArray(t)){const s=t.length;r=new Array(s);for(let i=0;i<s;++i)r[i]=eM(this,t[i],e)}else r=eM(this,t,e);return e.ol_key=r,r}unInternal(t,e){const r=e.ol_key;if(r)!function Fj(n){if(Array.isArray(n))for(let t=0,e=n.length;t<e;++t)M4(n[t]);else M4(n)}(r);else if(Array.isArray(t))for(let s=0,i=t.length;s<i;++s)this.removeEventListener(t[s],e);else this.removeEventListener(t,e)}};function is(){throw new Error("Unimplemented abstract method.")}let Oj=0;class tM extends Y_{constructor(t,e,r){super(t),this.key=e,this.oldValue=r}}const nM=class Gj extends Pj{constructor(t){super(),function kj(n){n.ol_uid||(n.ol_uid=String(++Oj))}(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let r;r=`change:${t}`,this.hasListener(r)&&this.dispatchEvent(new tM(r,t,e)),r="propertychange",this.hasListener(r)&&this.dispatchEvent(new tM(r,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,r){const s=this.values_||(this.values_={});if(r)s[t]=e;else{const i=s[t];s[t]=e,i!==e&&this.notify(t,i)}}setProperties(t,e){for(const r in t)this.set(r,t[r],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const r=this.values_[t];delete this.values_[t],Q_(this.values_)&&(this.values_=null),e||this.notify(t,r)}}};var Wj=Ve(5940);class K6 extends nM{constructor(t){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t&&("function"==typeof t.getSimplifiedGeometry?this.setGeometry(t):this.setProperties(t))}clone(){const t=new K6(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const r=this.getStyle();return r&&t.setStyle(r),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(M4(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=I0(t,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function Zj(n){if("function"==typeof n)return n;let t;return Array.isArray(n)?t=n:((0,Wj.v)("function"==typeof n.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[n]),function(){return t}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const q6=K6;function t9(n,t,e,r,s,i,o,a){const l=Math.sin(i),c=Math.cos(i);return n[0]=r*c,n[1]=s*l,n[2]=-r*l,n[3]=s*c,n[4]=o*r*c-a*r*l+t,n[5]=o*s*l+a*s*c+e,n}new Array(6);var Yr=Ve(3467),Ss=Ve(6016);function sM(n,t,e,r,s,i){i=i||[];let o=0;for(let a=t;a<e;a+=r){const l=n[a],c=n[a+1];i[o++]=s[0]*l+s[2]*c+s[4],i[o++]=s[1]*l+s[3]*c+s[5]}return i&&i.length!=o&&(i.length=o),i}const iM=[1,0,0,1,0,0],n9=class qj extends nM{constructor(){super(),this.extent_=(0,Yr.S5)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=q_((t,e,r)=>{if(!r)return this.getSimplifiedGeometry(e);const s=this.clone();return s.applyTransform(r),s.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return is()}closestPointXY(t,e,r,s){return is()}containsXY(t,e){const r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e}getClosestPoint(t,e){return this.closestPointXY(t[0],t[1],e=e||[NaN,NaN],1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return is()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&(0,Yr.aZ)(e),this.extentRevision_=this.getRevision()}return(0,Yr.$u)(this.extent_,t)}rotate(t,e){is()}scale(t,e,r){is()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return is()}getType(){return is()}applyTransform(t){is()}intersectsExtent(t){return is()}translate(t,e){is()}transform(t,e){const r=(0,Ss.Jt)(t),s="tile-pixels"==r.getUnits()?function(i,o,a){const l=r.getExtent(),c=r.getWorldExtent(),u=(0,Yr.Oq)(c)/(0,Yr.Oq)(l);return t9(iM,c[0],c[3],u,-u,0,0,0),sM(i,0,i.length,a,iM,o),(0,Ss.RG)(r,e)(i,o,a)}:(0,Ss.RG)(r,e);return this.applyTransform(s),this}};function U1(n){let t;return 2==n?t="XY":3==n?t="XYZ":4==n&&(t="XYZM"),t}function oM(n){let t;return"XY"==n?t=2:"XYZ"==n||"XYM"==n?t=3:"XYZM"==n&&(t=4),t}const $1=class Jj extends n9{constructor(){super(),this.layout="XY",this.stride=2}computeExtent(t){return(0,Yr.Vy)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return is()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=oM(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){is()}setLayout(t,e,r){let s;if(t)s=oM(t);else{for(let i=0;i<r;++i){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}s=e.length,t=U1(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const r=this.getFlatCoordinates();if(r){const s=this.getStride();(function Xj(n,t,e,r,s,i,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),c=i[0],u=i[1];let h=0;for(let d=t;d<e;d+=r){const g=n[d]-c,m=n[d+1]-u;o[h++]=c+g*a-m*l,o[h++]=u+g*l+m*a;for(let b=d+2;b<d+r;++b)o[h++]=n[b]}o&&o.length!=h&&(o.length=h)})(r,0,r.length,s,t,e,r),this.changed()}}scale(t,e,r){void 0===e&&(e=t),r||(r=(0,Yr.q1)(this.getExtent()));const s=this.getFlatCoordinates();if(s){const i=this.getStride();(function Yj(n,t,e,r,s,i,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=t;h<e;h+=r){const g=n[h+1]-c;a[u++]=l+s*(n[h]-l),a[u++]=c+i*g;for(let m=h+2;m<h+r;++m)a[u++]=n[m]}a&&a.length!=u&&(a.length=u)})(s,0,s.length,i,t,e,r,s),this.changed()}}translate(t,e){const r=this.getFlatCoordinates();if(r){const s=this.getStride();(function Kj(n,t,e,r,s,i,o){o=o||[];let a=0;for(let l=t;l<e;l+=r){o[a++]=n[l]+s,o[a++]=n[l+1]+i;for(let c=l+2;c<l+r;++c)o[a++]=n[c]}o&&o.length!=a&&(o.length=a)})(r,0,r.length,s,t,e,r),this.changed()}}};var bl=Ve(9973);function aM(n,t,e,r,s,i,o){const a=n[t],l=n[t+1],c=n[e]-a,u=n[e+1]-l;let h;if(0===c&&0===u)h=t;else{const d=((s-a)*c+(i-l)*u)/(c*c+u*u);if(d>1)h=e;else{if(d>0){for(let g=0;g<r;++g)o[g]=(0,bl.Cc)(n[t+g],n[e+g],d);return void(o.length=r)}h=t}}for(let d=0;d<r;++d)o[d]=n[h+d];o.length=r}function r9(n,t,e,r,s){let i=n[t],o=n[t+1];for(t+=r;t<e;t+=r){const a=n[t],l=n[t+1],c=(0,bl.hG)(i,o,a,l);c>s&&(s=c),i=a,o=l}return s}function s9(n,t,e,r,s){for(let i=0,o=e.length;i<o;++i){const a=e[i];s=r9(n,t,a,r,s),t=a}return s}function i9(n,t,e,r,s,i,o,a,l,c,u){if(t==e)return c;let h,d;if(0===s){if(d=(0,bl.hG)(o,a,n[t],n[t+1]),d<c){for(h=0;h<r;++h)l[h]=n[t+h];return l.length=r,d}return c}u=u||[NaN,NaN];let g=t+r;for(;g<e;)if(aM(n,g-r,g,r,o,a,u),d=(0,bl.hG)(o,a,u[0],u[1]),d<c){for(c=d,h=0;h<r;++h)l[h]=u[h];l.length=r,g+=r}else g+=r*Math.max((Math.sqrt(d)-Math.sqrt(c))/s|0,1);if(i&&(aM(n,e-r,t,r,o,a,u),d=(0,bl.hG)(o,a,u[0],u[1]),d<c)){for(c=d,h=0;h<r;++h)l[h]=u[h];l.length=r}return c}function o9(n,t,e,r,s,i,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=e.length;h<d;++h){const g=e[h];c=i9(n,t,g,r,s,i,o,a,l,c,u),t=g}return c}function V4(n,t,e,r){for(let s=0,i=e.length;s<i;++s){const o=e[s];for(let a=0;a<r;++a)n[t++]=o[a]}return t}function b0(n,t,e,r,s){s=s||[];let i=0;for(let o=0,a=e.length;o<a;++o){const l=V4(n,t,e[o],r);s[i++]=l,t=l}return s.length=i,s}function lM(n,t,e,r,s){s=s||[];let i=0;for(let o=0,a=e.length;o<a;++o){const l=b0(n,t,e[o],r,s[i]);0===l.length&&(l[0]=t),s[i++]=l,t=l[l.length-1]}return s.length=i,s}function x0(n,t,e,r,s,i,o){const a=(e-t)/r;if(a<3){for(;t<e;t+=r)i[o++]=n[t],i[o++]=n[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[t,e-r];let u=0;for(;c.length>0;){const h=c.pop(),d=c.pop();let g=0;const m=n[d],b=n[d+1],V=n[h],M=n[h+1];for(let D=d+r;D<h;D+=r){const G=(0,bl.Q1)(n[D],n[D+1],m,b,V,M);G>g&&(u=D,g=G)}g>s&&(l[(u-t)/r]=1,d+r<u&&c.push(d,u),u+r<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(i[o++]=n[t+h*r],i[o++]=n[t+h*r+1]);return o}function a9(n,t,e,r,s,i,o,a){for(let l=0,c=e.length;l<c;++l){const u=e[l];o=x0(n,t,u,r,s,i,o),a.push(o),t=u}return o}function Pu(n,t){return t*Math.round(n/t)}function rU(n,t,e,r,s,i,o){if(t==e)return o;let c,u,a=Pu(n[t],s),l=Pu(n[t+1],s);t+=r,i[o++]=a,i[o++]=l;do{if(c=Pu(n[t],s),u=Pu(n[t+1],s),(t+=r)==e)return i[o++]=c,i[o++]=u,o}while(c==a&&u==l);for(;t<e;){const h=Pu(n[t],s),d=Pu(n[t+1],s);if(t+=r,h==c&&d==u)continue;const g=c-a,m=u-l,b=h-a,V=d-l;g*V==m*b&&(g<0&&b<g||g==b||g>0&&b>g)&&(m<0&&V<m||m==V||m>0&&V>m)?(c=h,u=d):(i[o++]=c,i[o++]=u,a=c,l=u,c=h,u=d)}return i[o++]=c,i[o++]=u,o}function l9(n,t,e,r,s,i,o,a){for(let l=0,c=e.length;l<c;++l){const u=e[l];o=rU(n,t,u,r,s,i,o),a.push(o),t=u}return o}var iU=Ve(3846);function T4(n,t,e,r,s){s=void 0!==s?s:[];let i=0;for(let o=t;o<e;o+=r)s[i++]=n.slice(o,o+r);return s.length=i,s}function c9(n,t,e,r,s){s=void 0!==s?s:[];let i=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];s[i++]=T4(n,t,l,r,s[i]),t=l}return s.length=i,s}function E4(n,t,e,r,s,i,o){let a,l;const c=(e-t)/r;if(1===c)a=t;else if(2===c)a=t,l=s;else if(0!==c){let u=n[t],h=n[t+1],d=0;const g=[0];for(let V=t+r;V<e;V+=r){const M=n[V],D=n[V+1];d+=Math.sqrt((M-u)*(M-u)+(D-h)*(D-h)),g.push(d),u=M,h=D}const m=s*d,b=(0,to.El)(g,m);b<0?(l=(m-g[-b-2])/(g[-b-1]-g[-b-2]),a=t+(-b-2)*r):a=t+b*r}o=o>1?o:2,i=i||new Array(o);for(let u=0;u<o;++u)i[u]=void 0===a?NaN:void 0===l?n[a+u]:(0,bl.Cc)(n[a+u],n[a+r+u],l);return i}function u9(n,t,e,r,s,i){if(e==t)return null;let o;if(s<n[t+r-1])return i?(o=n.slice(t,t+r),o[r-1]=s,o):null;if(n[e-1]<s)return i?(o=n.slice(e-r,e),o[r-1]=s,o):null;if(s==n[t+r-1])return n.slice(t,t+r);let a=t/r,l=e/r;for(;a<l;){const d=a+l>>1;s<n[(d+1)*r-1]?l=d:a=d+1}const c=n[a*r-1];if(s==c)return n.slice((a-1)*r,(a-1)*r+r);const h=(s-c)/(n[(a+1)*r-1]-c);o=[];for(let d=0;d<r-1;++d)o.push((0,bl.Cc)(n[(a-1)*r+d],n[a*r+d],h));return o.push(s),o}var L4=Ve(9542);class R4 extends $1{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){(0,to.X$)(this.flatCoordinates,t),this.changed()}clone(){const t=new R4(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,r,s){return s<(0,Yr.Ld)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(r9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),i9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,s))}forEachSegment(t){return(0,iU.j)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:u9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e=void 0!==e&&e)}getCoordinates(){return T4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return E4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return function cM(n,t,e,r){let s=n[t],i=n[t+1],o=0;for(let a=t+r;a<e;a+=r){const l=n[a],c=n[a+1];o+=Math.sqrt((l-s)*(l-s)+(c-i)*(c-i)),s=l,i=c}return o}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=x0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new R4(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return(0,L4.gp)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=V4(this.flatCoordinates,0,t,this.stride),this.changed()}}const S0=R4;function uM(n,t,e,r){let s=0,i=n[e-r],o=n[e-r+1];for(;t<e;t+=r){const a=n[t],l=n[t+1];s+=o*a-i*l,i=a,o=l}return s/2}function hM(n,t,e,r){let s=0;for(let i=0,o=e.length;i<o;++i){const a=e[i];s+=uM(n,t,a,r),t=a}return s}class D4 extends $1{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new D4(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,r,s){return s<(0,Yr.Ld)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(r9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),i9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,s))}getArea(){return uM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return T4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=x0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new D4(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=V4(this.flatCoordinates,0,t,this.stride),this.changed()}}const h9=D4;class B4 extends $1{constructor(t,e,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&r)this.setFlatCoordinates(e,t),this.ends_=r;else{const s=t,i=[],o=[];for(let l=0,c=s.length;l<c;++l)(0,to.X$)(i,s[l].getFlatCoordinates()),o.push(i.length);const a=0===s.length?this.getLayout():s[0].getLayout();this.setFlatCoordinates(a,i),this.ends_=o}}appendLineString(t){(0,to.X$)(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new B4(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,r,s){return s<(0,Yr.Ld)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(s9(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),o9(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,s))}getCoordinateAtM(t,e,r){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function aU(n,t,e,r,s,i,o){if(o)return u9(n,t,e[e.length-1],r,s,i);let a;if(s<n[r-1])return i?(a=n.slice(0,r),a[r-1]=s,a):null;if(n[n.length-1]<s)return i?(a=n.slice(n.length-r),a[r-1]=s,a):null;for(let l=0,c=e.length;l<c;++l){const u=e[l];if(t!=u){if(s<n[t+r-1])return null;if(s<=n[u-1])return u9(n,t,u,r,s,!1);t=u}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,e=void 0!==e&&e,r=void 0!==r&&r)}getCoordinates(){return c9(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new S0(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,r=this.layout,s=[];let i=0;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=new S0(t.slice(i,l),r);s.push(c),i=l}return s}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let r=0;const s=this.ends_,i=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o],c=E4(e,r,l,i,.5);(0,to.X$)(t,c),r=l}return t}getSimplifiedGeometryInternal(t){const e=[],r=[];return e.length=a9(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,r),new B4(e,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(t){return(0,L4.fB)(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=b0(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}}const d9=B4;class p9 extends $1{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new p9(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,r,s){const i=this.flatCoordinates,o=(0,bl.hG)(t,e,i[0],i[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)r[l]=i[l];return r.length=a,o}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return(0,Yr.dP)(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return(0,Yr.Rj)(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function tU(n,t,e){for(let s=0,i=e.length;s<i;++s)n[t++]=e[s];return t}(this.flatCoordinates,0,t),this.changed()}}const H0=p9;class g9 extends $1{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){(0,to.X$)(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new g9(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,r,s){if(s<(0,Yr.Ld)(this.getExtent(),t,e))return s;const i=this.flatCoordinates,o=this.stride;for(let a=0,l=i.length;a<l;a+=o){const c=(0,bl.hG)(t,e,i[a],i[a+1]);if(c<s){s=c;for(let u=0;u<o;++u)r[u]=i[a+u];r.length=o}}return s}getCoordinates(){return T4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){return t<0||this.flatCoordinates.length/this.stride<=t?null:new H0(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,r=this.stride,s=[];for(let i=0,o=t.length;i<o;i+=r){const a=new H0(t.slice(i,i+r),e);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,r=this.stride;for(let s=0,i=e.length;s<i;s+=r)if((0,Yr.Rj)(t,e[s],e[s+1]))return!0;return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=V4(this.flatCoordinates,0,t,this.stride),this.changed()}}const f9=g9;var m9=Ve(9749);function v9(n,t,e,r,s,i,o){let a,l,c,u,h,d,g;const m=s[i+1],b=[];for(let D=0,J=e.length;D<J;++D){const X=e[D];for(u=n[X-r],d=n[X-r+1],a=t;a<X;a+=r)h=n[a],g=n[a+1],(m<=d&&g<=m||d<=m&&m<=g)&&(c=(m-d)/(g-d)*(h-u)+u,b.push(c)),u=h,d=g}let V=NaN,M=-1/0;for(b.sort(to.V_),u=b[0],a=1,l=b.length;a<l;++a){h=b[a];const D=Math.abs(h-u);D>M&&(c=(u+h)/2,(0,m9.zb)(n,t,e,r,c,m)&&(V=c,M=D)),u=h}return isNaN(V)&&(V=s[i]),o?(o.push(V,m,M),o):[V,m,M]}function dM(n,t,e,r,s){let i=[];for(let o=0,a=e.length;o<a;++o){const l=e[o];i=v9(n,t,l,r,s,2*o,i),t=l[l.length-1]}return i}function cU(n,t,e,r){for(;t<e-r;){for(let s=0;s<r;++s){const i=n[t+s];n[t+s]=n[e-r+s],n[e-r+s]=i}t+=r,e-=r}}function w9(n,t,e,r){let s=0,i=n[e-r],o=n[e-r+1];for(;t<e;t+=r){const a=n[t],l=n[t+1];s+=(a-i)*(l+o),i=a,o=l}return 0===s?void 0:s>0}function C9(n,t,e,r,s){s=void 0!==s&&s;for(let i=0,o=e.length;i<o;++i){const a=e[i],l=w9(n,t,a,r);if(0===i){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;t=a}return!0}function pM(n,t,e,r,s){for(let i=0,o=e.length;i<o;++i){const a=e[i];if(!C9(n,t,a,r,s))return!1;a.length&&(t=a[a.length-1])}return!0}function N4(n,t,e,r,s){s=void 0!==s&&s;for(let i=0,o=e.length;i<o;++i){const a=e[i],l=w9(n,t,a,r);(0===i?s&&l||!s&&!l:s&&!l||!s&&l)&&cU(n,t,a,r),t=a}return t}function y9(n,t,e,r,s){for(let i=0,o=e.length;i<o;++i)t=N4(n,t,e[i],r,s);return t}class X1 extends $1{constructor(t,e,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&r?(this.setFlatCoordinates(e,t),this.ends_=r):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?(0,to.X$)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new X1(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,r,s){return s<(0,Yr.Ld)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(s9(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),o9(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,s))}containsXY(t,e){return(0,m9.zb)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return hM(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),N4(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,c9(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=(0,Yr.q1)(this.getExtent());this.flatInteriorPoint_=v9(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new H0(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new h9(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,r=this.ends_,s=[];let i=0;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=new h9(e.slice(i,l),t);s.push(c),i=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;C9(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=N4(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],r=[];return e.length=l9(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,r),new X1(e,"XY",r)}getType(){return"Polygon"}intersectsExtent(t){return(0,L4.HT)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=b0(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}}const _0=X1;function gM(n,t,e,r){const s=[];let i=(0,Yr.S5)();for(let o=0,a=e.length;o<a;++o){const l=e[o];i=(0,Yr.Vy)(n,t,l[0],r),s.push((i[0]+i[2])/2,(i[1]+i[3])/2),t=l[l.length-1]}return s}class F4 extends $1{constructor(t,e,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(t[0])){const s=t,i=[],o=[];for(let a=0,l=s.length;a<l;++a){const c=s[a],u=i.length,h=c.getEnds();for(let d=0,g=h.length;d<g;++d)h[d]+=u;(0,to.X$)(i,c.getFlatCoordinates()),o.push(h)}e=0===s.length?this.getLayout():s[0].getLayout(),t=i,r=o}void 0!==e&&r?(this.setFlatCoordinates(e,t),this.endss_=r):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const r=this.flatCoordinates.length;(0,to.X$)(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let s=0,i=e.length;s<i;++s)e[s]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();const r=new F4(this.flatCoordinates.slice(),this.layout,e);return r.applyProperties(this),r}closestPointXY(t,e,r,s){return s<(0,Yr.Ld)(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function Qj(n,t,e,r,s){for(let i=0,o=e.length;i<o;++i){const a=e[i];s=s9(n,t,a,r,s),t=a[a.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function eU(n,t,e,r,s,i,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=e.length;h<d;++h){const g=e[h];c=o9(n,t,g,r,s,i,o,a,l,c,u),t=g[g.length-1]}return c}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,r,s))}containsXY(t,e){return(0,m9.Gd)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return function lU(n,t,e,r){let s=0;for(let i=0,o=e.length;i<o;++i){const a=e[i];s+=hM(n,t,a,r),t=a[a.length-1]}return s}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),y9(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,function oU(n,t,e,r,s){s=void 0!==s?s:[];let i=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];s[i++]=1===l.length&&l[0]===t?[]:c9(n,t,l,r,s[i]),t=l[l.length-1]}return s.length=i,s}(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=gM(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=dM(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new f9(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;pM(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=y9(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],r=[];return e.length=function sU(n,t,e,r,s,i,o,a){for(let l=0,c=e.length;l<c;++l){const u=e[l],h=[];o=l9(n,t,u,r,s,i,o,h),a.push(h),t=u[u.length-1]}return o}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,r),new F4(e,"XY",r)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const i=this.endss_[t-1];e=i[i.length-1]}const r=this.endss_[t].slice(),s=r[r.length-1];if(0!==e)for(let i=0,o=r.length;i<o;++i)r[i]-=e;return new _0(this.flatCoordinates.slice(e,s),this.layout,r)}getPolygons(){const t=this.layout,e=this.flatCoordinates,r=this.endss_,s=[];let i=0;for(let o=0,a=r.length;o<a;++o){const l=r[o].slice(),c=l[l.length-1];if(0!==i)for(let h=0,d=l.length;h<d;++h)l[h]-=i;const u=new _0(e.slice(i,c),t,l);s.push(u),i=c}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return(0,L4.Wp)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=lM(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{const s=r[r.length-1];this.flatCoordinates.length=0===s.length?0:s[s.length-1]}this.changed()}}const I9=F4,fM=[1,0,0,1,0,0];class Ou{constructor(t,e,r,s,i,o){this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=i,this.stride_=s}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,Yr.dP)(this.flatCoordinates_):(0,Yr.Vy)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=(0,Yr.q1)(this.getExtent());this.flatInteriorPoints_=v9(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=function uU(n,t){const e=[];let i,r=0,s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],c=w9(n,r,l,2);if(void 0===i&&(i=c),c===i)e.push(t.slice(s,o+1));else{if(0===e.length)continue;e[e.length-1].push(t[s])}s=o+1,r=l}return e}(this.flatCoordinates_,this.ends_),e=gM(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=dM(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=E4(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const r=this.ends_;for(let s=0,i=r.length;s<i;++s){const o=r[s],a=E4(t,e,o,2,.5);(0,to.X$)(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=(0,Ss.Jt)(t)).getExtent(),r=t.getWorldExtent();if(e&&r){const s=(0,Yr.Oq)(r)/(0,Yr.Oq)(e);t9(fM,r[0],r[3],s,-s,0,0,0),sM(this.flatCoordinates_,0,this.flatCoordinates_.length,2,fM,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new Ou(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=q_((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const r=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":r.length=x0(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,r,0),s=[r.length];break;case"MultiLineString":s=[],r.length=a9(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,r,0,s);break;case"Polygon":s=[],r.length=l9(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),r,0,s)}return s&&(this.simplifiedGeometry_=new Ou(this.type_,r,s,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}Ou.prototype.getFlatCoordinates=Ou.prototype.getOrientedFlatCoordinates;const mM=Ou;class P4 extends n9{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(M4),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(I0(this.geometries_[t],"change",this.changed,this))}clone(){const t=new P4(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,r,s){if(s<(0,Yr.Ld)(this.getExtent(),t,e))return s;const i=this.geometries_;for(let o=0,a=i.length;o<a;++o)s=i[o].closestPointXY(t,e,r,s);return s}containsXY(t,e){const r=this.geometries_;for(let s=0,i=r.length;s<i;++s)if(r[s].containsXY(t,e))return!0;return!1}computeExtent(t){(0,Yr.aZ)(t);const e=this.geometries_;for(let r=0,s=e.length;r<s;++r)(0,Yr.X$)(t,e[r].getExtent());return t}getGeometries(){return vM(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let r=0,s=e.length;r<s;++r)e[r].getType()===this.getType()?t=t.concat(e[r].getGeometriesArrayRecursive()):t.push(e[r]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],r=this.geometries_;let s=!1;for(let i=0,o=r.length;i<o;++i){const a=r[i],l=a.getSimplifiedGeometry(t);e.push(l),l!==a&&(s=!0)}if(s){const i=new P4(null);return i.setGeometriesArray(e),i}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let r=0,s=e.length;r<s;++r)if(e[r].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const r=this.geometries_;for(let s=0,i=r.length;s<i;++s)r[s].rotate(t,e);this.changed()}scale(t,e,r){r||(r=(0,Yr.q1)(this.getExtent()));const s=this.geometries_;for(let i=0,o=s.length;i<o;++i)s[i].scale(t,e,r);this.changed()}setGeometries(t){this.setGeometriesArray(vM(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let r=0,s=e.length;r<s;++r)e[r].applyTransform(t);this.changed()}translate(t,e){const r=this.geometries_;for(let s=0,i=r.length;s<i;++s)r[s].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function vM(n){const t=[];for(let e=0,r=n.length;e<r;++e)t.push(n[e].clone());return t}const pU=P4,wM=class gU{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=q6,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let r=e.dataProjection?(0,Ss.Jt)(e.dataProjection):this.readProjection(t);e.extent&&r&&"tile-pixels"===r.getUnits()&&(r=(0,Ss.Jt)(r),r.setWorldExtent(e.extent)),e={dataProjection:r,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return is()}readFeature(t,e){return is()}readFeatures(t,e){return is()}readGeometry(t,e){return is()}readProjection(t){return is()}writeFeature(t,e){return is()}writeFeatures(t,e){return is()}writeGeometry(t,e){return is()}};function ku(n,t,e){const r=e?(0,Ss.Jt)(e.featureProjection):null,s=e?(0,Ss.Jt)(e.dataProjection):null;let i=n;if(r&&s&&!(0,Ss.tI)(r,s)){t&&(i=n.clone());const o=t?r:s,a=t?s:r;"tile-pixels"===o.getUnits()?i.transform(o,a):i.applyTransform((0,Ss.RG)(o,a))}if(t&&e&&void 0!==e.decimals){const o=Math.pow(10,e.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};i===n&&(i=n.clone()),i.applyTransform(a)}return i}function A9(n,t){const e=t?(0,Ss.Jt)(t.featureProjection):null,r=t?(0,Ss.Jt)(t.dataProjection):null;return e&&r&&!(0,Ss.tI)(e,r)?(0,Ss.DI)(n,r,e):n}const fU={Point:H0,LineString:S0,Polygon:_0,MultiPoint:f9,MultiLineString:d9,MultiPolygon:I9};function CM(n,t){const e=n.geometry;if(!e)return[];if(Array.isArray(e))return e.map(i=>CM({...n,geometry:i})).flat();const r="MultiPolygon"===e.type?"Polygon":e.type;if("GeometryCollection"===r||"Circle"===r)throw new Error("Unsupported geometry type: "+r);const s=e.layout.length;return ku(new mM(r,"Polygon"===r?function mU(n,t,e){return Array.isArray(t[0])?(pM(n,0,t,e)||y9(n=n.slice(),0,t,e),n):(C9(n,0,t,e)||N4(n=n.slice(),0,t,e),n)}(e.flatCoordinates,e.ends,s):e.flatCoordinates,e.ends?.flat(),s,n.properties||{},n.id).enableSimplifyTransformed(),!1,t)}function b9(n,t){if(!n)return null;if(Array.isArray(n)){const r=n.map(s=>b9(s,t));return new pU(r)}return ku(new(0,fU[n.type])(n.flatCoordinates,n.layout,n.ends),!1,t)}function Hs(n,t){return xM().createElementNS(n,t)}function O4(n,t){return yM(n,t,[]).join("")}function yM(n,t,e){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)e.push(t?String(n.nodeValue).replace(/(\r\n|\r|\n)/g,""):n.nodeValue);else{let r;for(r=n.firstChild;r;r=r.nextSibling)yM(r,t,e)}return e}function k4(n){return"documentElement"in n}function M0(n){return(new DOMParser).parseFromString(n,"application/xml")}function IM(n,t){return function(e,r){const s=n.call(void 0!==t?t:this,e,r);void 0!==s&&(0,to.X$)(r[r.length-1],s)}}function Yn(n,t){return function(e,r){const s=n.call(void 0!==t?t:this,e,r);void 0!==s&&r[r.length-1].push(s)}}function yn(n,t){return function(e,r){const s=n.call(void 0!==t?t:this,e,r);void 0!==s&&(r[r.length-1]=s)}}function $t(n,t){return function(e,r,s){n.call(void 0!==t?t:this,e,r,s),s[s.length-1].node.appendChild(e)}}function Y1(n,t){return function(e,r,s){let a=n;return void 0===a&&(a=s),Hs(void 0!==t?t:r[r.length-1].node.namespaceURI,a)}}const AM=Y1();function Gu(n,t,e,r){let s;for(s=t.firstElementChild;s;s=s.nextElementSibling){const i=n[s.namespaceURI];if(void 0!==i){const o=i[s.localName];void 0!==o&&o.call(r,s,e)}}}function _s(n,t,e,r,s){return r.push(n),Gu(t,e,r,s),r.pop()}function bo(n,t,e,r,s,i,o){return s.push(n),function bM(n,t,e,r,s,i){const o=(void 0!==s?s:e).length;let a,l;for(let c=0;c<o;++c)a=e[c],void 0!==a&&(l=t.call(void 0!==i?i:this,a,r,void 0!==s?s[c]:void 0),void 0!==l&&n[l.namespaceURI][l.localName].call(i,l,a,r))}(t,e,r,s,i,o),s.pop()}let G4,W4;function xM(){return void 0===W4&&typeof document<"u"&&(W4=document.implementation.createDocument("","",null)),W4}const IU=class yU extends wM{constructor(){super(),this.xmlSerializer_=function CU(){return void 0===G4&&typeof XMLSerializer<"u"&&(G4=new XMLSerializer),G4}()}getType(){return"xml"}readFeature(t,e){if(!t)return null;if("string"==typeof t){const r=M0(t);return this.readFeatureFromDocument(r,e)}return k4(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}readFeatureFromDocument(t,e){const r=this.readFeaturesFromDocument(t,e);return r.length>0?r[0]:null}readFeatureFromNode(t,e){return null}readFeatures(t,e){if(!t)return[];if("string"==typeof t){const r=M0(t);return this.readFeaturesFromDocument(r,e)}return k4(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}readFeaturesFromDocument(t,e){const r=[];for(let s=t.firstChild;s;s=s.nextSibling)s.nodeType==Node.ELEMENT_NODE&&(0,to.X$)(r,this.readFeaturesFromNode(s,e));return r}readFeaturesFromNode(t,e){return is()}readGeometry(t,e){if(!t)return null;if("string"==typeof t){const r=M0(t);return this.readGeometryFromDocument(r,e)}return k4(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}readGeometryFromDocument(t,e){return null}readGeometryFromNode(t,e){return null}readProjection(t){if(!t)return null;if("string"==typeof t){const e=M0(t);return this.readProjectionFromDocument(e)}return k4(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}readProjectionFromDocument(t){return this.dataProjection}readProjectionFromNode(t){return this.dataProjection}writeFeature(t,e){const r=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(t,e){return null}writeFeatures(t,e){const r=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(t,e){return null}writeGeometry(t,e){const r=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(t,e){return null}},Z4="http://www.opengis.net/gml",AU=/^\s*$/;class Ks extends IU{constructor(t){super(),this.featureType=(t=t||{}).featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:Yn(this.readFeaturesInternal),featureMembers:yn(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(t,e){const r=t.localName;let s=null;if("FeatureCollection"==r)s=_s([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==r||"featureMember"==r||"member"==r){const i=e[0];let o=i.featureType,a=i.featureNS;const l="p",c="p0";if(!o&&t.childNodes){o=[],a={};for(let d=0,g=t.childNodes.length;d<g;++d){const m=t.childNodes[d];if(1===m.nodeType){const b=m.nodeName.split(":").pop();if(!o.includes(b)){let V="",M=0;const D=m.namespaceURI;for(const J in a){if(a[J]===D){V=J;break}++M}V||(V=l+M,a[V]=D),o.push(V+":"+b)}}}"featureMember"!=r&&(i.featureType=o,i.featureNS=a)}if("string"==typeof a){const d=a;a={},a[c]=d}const u={},h=Array.isArray(o)?o:[o];for(const d in a){const g={};for(let m=0,b=h.length;m<b;++m)(h[m].includes(":")?h[m].split(":")[0]:c)===d&&(g[h[m].split(":").pop()]="featureMembers"==r?Yn(this.readFeatureElement,this):yn(this.readFeatureElement,this));u[a[d]]=g}s=_s("featureMember"==r||"member"==r?void 0:[],u,t,e)}return null===s&&(s=[]),s}readGeometryOrExtent(t,e){const r=e[0];return r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension"),_s(null,this.GEOMETRY_PARSERS,t,e,this)}readExtentElement(t,e){const r=e[0],s=this.readGeometryOrExtent(t,e);return s?A9(s,r):void 0}readGeometryElement(t,e){const r=e[0],s=this.readGeometryOrExtent(t,e);return s?ku(s,!1,r):void 0}readFeatureElementInternal(t,e,r){let s;const i={};for(let l=t.firstElementChild;l;l=l.nextElementSibling){let c;const u=l.localName;0===l.childNodes.length||1===l.childNodes.length&&(3===l.firstChild.nodeType||4===l.firstChild.nodeType)?(c=O4(l,!1),AU.test(c)&&(c=void 0)):(r&&(c="boundedBy"===u?this.readExtentElement(l,e):this.readGeometryElement(l,e)),c?"boundedBy"!==u&&(s=u):c=this.readFeatureElementInternal(l,e,!1));const h=l.attributes.length;if(h>0&&!(c instanceof n9)){c={_content_:c};for(let d=0;d<h;d++)c[l.attributes[d].name]=l.attributes[d].value}i[u]?(i[u]instanceof Array||(i[u]=[i[u]]),i[u].push(c)):i[u]=c}if(!r)return i;const o=new q6(i);s&&o.setGeometryName(s);const a=t.getAttribute("fid")||function wU(n,t,e){return n.getAttributeNS(t,e)||""}(t,this.namespace,"id");return a&&o.setId(a),o}readFeatureElement(t,e){return this.readFeatureElementInternal(t,e,!0)}readPoint(t,e){const r=this.readFlatCoordinatesFromNode(t,e);if(r)return new H0(r,"XYZ")}readMultiPoint(t,e){const r=_s([],this.MULTIPOINT_PARSERS,t,e,this);if(r)return new f9(r)}readMultiLineString(t,e){const r=_s([],this.MULTILINESTRING_PARSERS,t,e,this);if(r)return new d9(r)}readMultiPolygon(t,e){const r=_s([],this.MULTIPOLYGON_PARSERS,t,e,this);if(r)return new I9(r)}pointMemberParser(t,e){Gu(this.POINTMEMBER_PARSERS,t,e,this)}lineStringMemberParser(t,e){Gu(this.LINESTRINGMEMBER_PARSERS,t,e,this)}polygonMemberParser(t,e){Gu(this.POLYGONMEMBER_PARSERS,t,e,this)}readLineString(t,e){const r=this.readFlatCoordinatesFromNode(t,e);if(r)return new S0(r,"XYZ")}readFlatLinearRing(t,e){const r=_s(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);if(r)return r}readLinearRing(t,e){const r=this.readFlatCoordinatesFromNode(t,e);if(r)return new h9(r,"XYZ")}readPolygon(t,e){const r=_s([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(r&&r[0]){const s=r[0],i=[s.length];let o,a;for(o=1,a=r.length;o<a;++o)(0,to.X$)(s,r[o]),i.push(s.length);return new _0(s,"XYZ",i)}}readFlatCoordinatesFromNode(t,e){return _s(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)}readGeometryFromNode(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null}readFeaturesFromNode(t,e){const r={featureType:this.featureType,featureNS:this.featureNS};return r&&Object.assign(r,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[r])||[]}readProjectionFromNode(t){return(0,Ss.Jt)(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))}}Ks.prototype.namespace=Z4,Ks.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},Ks.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},Ks.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},Ks.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:Yn(Ks.prototype.pointMemberParser),pointMembers:Yn(Ks.prototype.pointMemberParser)}},Ks.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:Yn(Ks.prototype.lineStringMemberParser),lineStringMembers:Yn(Ks.prototype.lineStringMemberParser)}},Ks.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:Yn(Ks.prototype.polygonMemberParser),polygonMembers:Yn(Ks.prototype.polygonMemberParser)}},Ks.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:Yn(Ks.prototype.readFlatCoordinatesFromNode)}},Ks.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Yn(Ks.prototype.readLineString)}},Ks.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Yn(Ks.prototype.readPolygon)}},Ks.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:yn(Ks.prototype.readFlatLinearRing)}};const sr=Ks;function z0(n){const t=/^\s*(\d+)\s*$/.exec(n);if(t)return parseInt(t[1],10)}function sa(n,t){n.appendChild(xM().createTextNode(t))}const SU=Z4+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",HU={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class yr extends sr{constructor(t){super(t=t||{}),this.FEATURE_COLLECTION_PARSERS[Z4].featureMember=Yn(this.readFeaturesInternal),this.schemaLocation=t.schemaLocation?t.schemaLocation:SU}readFlatCoordinates(t,e){const r=O4(t,!1).replace(/^\s*|\s*$/g,""),i=e[0].srsName;let o="enu";if(i){const c=(0,Ss.Jt)(i);c&&(o=c.getAxisOrientation())}const a=r.trim().split(/\s+/),l=[];for(let c=0,u=a.length;c<u;c++){const h=a[c].split(/,+/),d=parseFloat(h[0]),g=parseFloat(h[1]),m=3===h.length?parseFloat(h[2]):0;"en"===o.substr(0,2)?l.push(d,g,m):l.push(g,d,m)}return l}readBox(t,e){const r=_s([null],this.BOX_PARSERS_,t,e,this);return(0,Yr.N)(r[1][0],r[1][1],r[1][3],r[1][4])}innerBoundaryIsParser(t,e){const r=_s(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)}outerBoundaryIsParser(t,e){const r=_s(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)}GEOMETRY_NODE_FACTORY_(t,e,r){const s=e[e.length-1],i=s.multiSurface,o=s.surface,a=s.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===i?r="MultiSurface":"Polygon"===r&&!0===o?r="Surface":"MultiLineString"===r&&!0===a&&(r="MultiCurve"),Hs("http://www.opengis.net/gml",r)}writeFeatureElement(t,e,r){const s=e.getId();s&&t.setAttribute("fid",s);const i=r[r.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});const l=[],c=[];if(e.hasProperties()){const h=e.getProperties();for(const d in h){const g=h[d];null!==g&&(l.push(d),c.push(g),d==a||"function"==typeof g.getSimplifiedGeometry?d in i.serializers[o]||(i.serializers[o][d]=$t(this.writeGeometryElement,this)):d in i.serializers[o]||(i.serializers[o][d]=$t(sa)))}}const u=Object.assign({},i);u.node=t,bo(u,i.serializers,Y1(void 0,o),c,r,l)}writeCurveOrLineString(t,e,r){const i=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&i&&t.setAttribute("srsName",i),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){const o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o),this.writeCoordinates_(o,e,r)}else if("Curve"===t.nodeName){const o=Hs(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}}writeLineStringOrCurveMember(t,e,r){const s=this.GEOMETRY_NODE_FACTORY_(e,r);s&&(t.appendChild(s),this.writeCurveOrLineString(s,e,r))}writeMultiCurveOrLineString(t,e,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName,a=s.curve;o&&t.setAttribute("srsName",o);const l=e.getLineStrings();bo({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeGeometryElement(t,e,r){const s=r[r.length-1],i=Object.assign({},s);let o;i.node=t,o=Array.isArray(e)?A9(e,s):ku(e,!0,s),bo(i,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}createCoordinatesNode_(t){const e=Hs(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e}writeCoordinates_(t,e,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName,a=e.getCoordinates(),l=a.length,c=new Array(l);for(let u=0;u<l;++u)c[u]=this.getCoords_(a[u],o,i);sa(t,c.join(" "))}writeCurveSegments_(t,e,r){const s=Hs(t.namespaceURI,"LineStringSegment");t.appendChild(s),this.writeCurveOrLineString(s,e,r)}writeSurfaceOrPolygon(t,e,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){const a=e.getLinearRings();bo({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){const a=Hs(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,r)}}RING_NODE_FACTORY_(t,e,r){const s=e[e.length-1],i=s.node,o=s.exteriorWritten;return void 0===o&&(s.exteriorWritten=!0),Hs(i.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(t,e,r){const s=Hs(t.namespaceURI,"PolygonPatch");t.appendChild(s),this.writeSurfaceOrPolygon(s,e,r)}writeRing(t,e,r){const s=Hs(t.namespaceURI,"LinearRing");t.appendChild(s),this.writeLinearRing(s,e,r)}getCoords_(t,e,r){let s="enu";e&&(s=(0,Ss.Jt)(e).getAxisOrientation());let i="en"===s.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];return r&&(i+=","+(t[2]||0)),i}writePoint(t,e,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName;o&&t.setAttribute("srsName",o);const a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);const l=e.getCoordinates();sa(a,this.getCoords_(l,o,i))}writeMultiPoint(t,e,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName;o&&t.setAttribute("srsName",o);const a=e.getPoints();bo({node:t,hasZ:i,srsName:o},this.POINTMEMBER_SERIALIZERS,Y1("pointMember"),a,r,void 0,this)}writePointMember(t,e,r){const s=Hs(t.namespaceURI,"Point");t.appendChild(s),this.writePoint(s,e,r)}writeLinearRing(t,e,r){const i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i);const o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o),this.writeCoordinates_(o,e,r)}writeMultiSurfaceOrPolygon(t,e,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName,a=s.surface;o&&t.setAttribute("srsName",o);const l=e.getPolygons();bo({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeSurfaceOrPolygonMember(t,e,r){const s=this.GEOMETRY_NODE_FACTORY_(e,r);s&&(t.appendChild(s),this.writeSurfaceOrPolygon(s,e,r))}writeEnvelope(t,e,r){const i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i),bo({node:t},this.ENVELOPE_SERIALIZERS,AM,[e[0]+" "+e[1],e[2]+" "+e[3]],r,["lowerCorner","upperCorner"],this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,e,r){return Hs("http://www.opengis.net/gml",HU[e[e.length-1].node.nodeName])}}yr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:yn(yr.prototype.readFlatCoordinates)}},yr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:yr.prototype.innerBoundaryIsParser,outerBoundaryIs:yr.prototype.outerBoundaryIsParser}},yr.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Yn(yr.prototype.readFlatCoordinates)}},yr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:yn(sr.prototype.readPoint),MultiPoint:yn(sr.prototype.readMultiPoint),LineString:yn(sr.prototype.readLineString),MultiLineString:yn(sr.prototype.readMultiLineString),LinearRing:yn(sr.prototype.readLinearRing),Polygon:yn(sr.prototype.readPolygon),MultiPolygon:yn(sr.prototype.readMultiPolygon),Box:yn(yr.prototype.readBox)}},yr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:$t(yr.prototype.writeCurveOrLineString),MultiCurve:$t(yr.prototype.writeMultiCurveOrLineString),Point:$t(yr.prototype.writePoint),MultiPoint:$t(yr.prototype.writeMultiPoint),LineString:$t(yr.prototype.writeCurveOrLineString),MultiLineString:$t(yr.prototype.writeMultiCurveOrLineString),LinearRing:$t(yr.prototype.writeLinearRing),Polygon:$t(yr.prototype.writeSurfaceOrPolygon),MultiPolygon:$t(yr.prototype.writeMultiSurfaceOrPolygon),Surface:$t(yr.prototype.writeSurfaceOrPolygon),MultiSurface:$t(yr.prototype.writeMultiSurfaceOrPolygon),Envelope:$t(yr.prototype.writeEnvelope)}},yr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:$t(yr.prototype.writeLineStringOrCurveMember),curveMember:$t(yr.prototype.writeLineStringOrCurveMember)}},yr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:$t(yr.prototype.writeRing),innerBoundaryIs:$t(yr.prototype.writeRing)}},yr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:$t(yr.prototype.writePointMember)}},yr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:$t(yr.prototype.writeSurfaceOrPolygonMember),polygonMember:$t(yr.prototype.writeSurfaceOrPolygonMember)}},yr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:$t(sa),upperCorner:$t(sa)}};const SM=yr,_U=Z4+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",MU={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class an extends sr{constructor(t){super(t=t||{}),this.surface_=void 0!==t.surface&&t.surface,this.curve_=void 0!==t.curve&&t.curve,this.multiCurve_=void 0===t.multiCurve||t.multiCurve,this.multiSurface_=void 0===t.multiSurface||t.multiSurface,this.schemaLocation=t.schemaLocation?t.schemaLocation:_U,this.hasZ=void 0!==t.hasZ&&t.hasZ}readMultiCurve(t,e){const r=_s([],this.MULTICURVE_PARSERS,t,e,this);if(r)return new d9(r)}readFlatCurveRing(t,e){const r=_s([],this.MULTICURVE_PARSERS,t,e,this),s=[];for(let i=0,o=r.length;i<o;++i)(0,to.X$)(s,r[i].getFlatCoordinates());return s}readMultiSurface(t,e){const r=_s([],this.MULTISURFACE_PARSERS,t,e,this);if(r)return new I9(r)}curveMemberParser(t,e){Gu(this.CURVEMEMBER_PARSERS,t,e,this)}surfaceMemberParser(t,e){Gu(this.SURFACEMEMBER_PARSERS,t,e,this)}readPatch(t,e){return _s([null],this.PATCHES_PARSERS,t,e,this)}readSegment(t,e){return _s([],this.SEGMENTS_PARSERS,t,e,this)}readPolygonPatch(t,e){return _s([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)}readLineStringSegment(t,e){return _s([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)}interiorParser(t,e){const r=_s(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)}exteriorParser(t,e){const r=_s(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)}readSurface(t,e){const r=_s([null],this.SURFACE_PARSERS,t,e,this);if(r&&r[0]){const s=r[0],i=[s.length];let o,a;for(o=1,a=r.length;o<a;++o)(0,to.X$)(s,r[o]),i.push(s.length);return new _0(s,"XYZ",i)}}readCurve(t,e){const r=_s([null],this.CURVE_PARSERS,t,e,this);if(r)return new S0(r,"XYZ")}readEnvelope(t,e){const r=_s([null],this.ENVELOPE_PARSERS,t,e,this);return(0,Yr.N)(r[1][0],r[1][1],r[2][0],r[2][1])}readFlatPos(t,e){let r=O4(t,!1);const s=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,i=[];let o;for(;o=s.exec(r);)i.push(parseFloat(o[1])),r=r.substr(o[0].length);if(""!==r)return;const l=e[0].srsName;let c="enu";if(l&&(c=(0,Ss.Jt)(l).getAxisOrientation()),"neu"===c){let h,d;for(h=0,d=i.length;h<d;h+=3){const g=i[h];i[h]=i[h+1],i[h+1]=g}}const u=i.length;return 2==u&&i.push(0),0!==u?i:void 0}readFlatPosList(t,e){const r=O4(t,!1).replace(/^\s*|\s*$/g,""),s=e[0],i=s.srsName,o=s.srsDimension;let a="enu";i&&(a=(0,Ss.Jt)(i).getAxisOrientation());const l=r.split(/\s+/);let u,h,d,c=2;t.getAttribute("srsDimension")?c=z0(t.getAttribute("srsDimension")):t.getAttribute("dimension")?c=z0(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?c=z0(t.parentNode.getAttribute("srsDimension")):o&&(c=z0(o));const g=[];for(let m=0,b=l.length;m<b;m+=c)u=parseFloat(l[m]),h=parseFloat(l[m+1]),d=3===c?parseFloat(l[m+2]):0,"en"===a.substr(0,2)?g.push(u,h,d):g.push(h,u,d);return g}writePos_(t,e,r){const s=r[r.length-1],i=s.hasZ;t.setAttribute("srsDimension",i?"3":"2");const a=s.srsName;let l="enu";a&&(l=(0,Ss.Jt)(a).getAxisOrientation());const c=e.getCoordinates();let u;u="en"===l.substr(0,2)?c[0]+" "+c[1]:c[1]+" "+c[0],i&&(u+=" "+(c[2]||0)),sa(t,u)}getCoords_(t,e,r){let s="enu";e&&(s=(0,Ss.Jt)(e).getAxisOrientation());let i="en"===s.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];return r&&(i+=" "+(t[2]||0)),i}writePosList_(t,e,r){const s=r[r.length-1],i=s.hasZ;t.setAttribute("srsDimension",i?"3":"2");const a=s.srsName,l=e.getCoordinates(),c=l.length,u=new Array(c);let h;for(let d=0;d<c;++d)h=l[d],u[d]=this.getCoords_(h,a,i);sa(t,u.join(" "))}writePoint(t,e,r){const i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i);const o=Hs(t.namespaceURI,"pos");t.appendChild(o),this.writePos_(o,e,r)}writeEnvelope(t,e,r){const i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i),bo({node:t},this.ENVELOPE_SERIALIZERS,AM,[e[0]+" "+e[1],e[2]+" "+e[3]],r,["lowerCorner","upperCorner"],this)}writeLinearRing(t,e,r){const i=r[r.length-1].srsName;i&&t.setAttribute("srsName",i);const o=Hs(t.namespaceURI,"posList");t.appendChild(o),this.writePosList_(o,e,r)}RING_NODE_FACTORY_(t,e,r){const s=e[e.length-1],i=s.node,o=s.exteriorWritten;return void 0===o&&(s.exteriorWritten=!0),Hs(i.namespaceURI,void 0!==o?"interior":"exterior")}writeSurfaceOrPolygon(t,e,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){const a=e.getLinearRings();bo({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){const a=Hs(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,r)}}writeCurveOrLineString(t,e,r){const i=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&i&&t.setAttribute("srsName",i),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){const o=Hs(t.namespaceURI,"posList");t.appendChild(o),this.writePosList_(o,e,r)}else if("Curve"===t.nodeName){const o=Hs(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}}writeMultiSurfaceOrPolygon(t,e,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName,a=s.surface;o&&t.setAttribute("srsName",o);const l=e.getPolygons();bo({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeMultiPoint(t,e,r){const s=r[r.length-1],i=s.srsName,o=s.hasZ;i&&t.setAttribute("srsName",i);const a=e.getPoints();bo({node:t,hasZ:o,srsName:i},this.POINTMEMBER_SERIALIZERS,Y1("pointMember"),a,r,void 0,this)}writeMultiCurveOrLineString(t,e,r){const s=r[r.length-1],i=s.hasZ,o=s.srsName,a=s.curve;o&&t.setAttribute("srsName",o);const l=e.getLineStrings();bo({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,r,void 0,this)}writeRing(t,e,r){const s=Hs(t.namespaceURI,"LinearRing");t.appendChild(s),this.writeLinearRing(s,e,r)}writeSurfaceOrPolygonMember(t,e,r){const s=this.GEOMETRY_NODE_FACTORY_(e,r);s&&(t.appendChild(s),this.writeSurfaceOrPolygon(s,e,r))}writePointMember(t,e,r){const s=Hs(t.namespaceURI,"Point");t.appendChild(s),this.writePoint(s,e,r)}writeLineStringOrCurveMember(t,e,r){const s=this.GEOMETRY_NODE_FACTORY_(e,r);s&&(t.appendChild(s),this.writeCurveOrLineString(s,e,r))}writeSurfacePatches_(t,e,r){const s=Hs(t.namespaceURI,"PolygonPatch");t.appendChild(s),this.writeSurfaceOrPolygon(s,e,r)}writeCurveSegments_(t,e,r){const s=Hs(t.namespaceURI,"LineStringSegment");t.appendChild(s),this.writeCurveOrLineString(s,e,r)}writeGeometryElement(t,e,r){const s=r[r.length-1],i=Object.assign({},s);let o;i.node=t,o=Array.isArray(e)?A9(e,s):ku(e,!0,s),bo(i,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[o],r,void 0,this)}writeFeatureElement(t,e,r){const s=e.getId();s&&t.setAttribute("fid",s);const i=r[r.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});const l=[],c=[];if(e.hasProperties()){const h=e.getProperties();for(const d in h){const g=h[d];null!==g&&(l.push(d),c.push(g),d==a||"function"==typeof g.getSimplifiedGeometry?d in i.serializers[o]||(i.serializers[o][d]=$t(this.writeGeometryElement,this)):d in i.serializers[o]||(i.serializers[o][d]=$t(sa)))}}const u=Object.assign({},i);u.node=t,bo(u,i.serializers,Y1(void 0,o),c,r,l)}writeFeatureMembers_(t,e,r){const s=r[r.length-1],i=s.featureType,o=s.featureNS,a={};a[o]={},a[o][i]=$t(this.writeFeatureElement,this);const l=Object.assign({},s);l.node=t,bo(l,a,Y1(i,o),e,r)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,e,r){return Hs(this.namespace,MU[e[e.length-1].node.nodeName])}GEOMETRY_NODE_FACTORY_(t,e,r){const s=e[e.length-1],i=s.multiSurface,o=s.surface,a=s.curve,l=s.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===i?r="MultiSurface":"Polygon"===r&&!0===o?r="Surface":"LineString"===r&&!0===a?r="Curve":"MultiLineString"===r&&!0===l&&(r="MultiCurve"),Hs(this.namespace,r)}writeGeometryNode(t,e){e=this.adaptOptions(e);const r=Hs(this.namespace,"geom"),s={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&Object.assign(s,e),this.writeGeometryElement(r,t,[s]),r}writeFeaturesNode(t,e){e=this.adaptOptions(e);const r=Hs(this.namespace,"featureMembers");r.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);const s={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&Object.assign(s,e),this.writeFeatureMembers_(r,t,[s]),r}}an.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:yn(an.prototype.readFlatPos),posList:yn(an.prototype.readFlatPosList),coordinates:yn(SM.prototype.readFlatCoordinates)}},an.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:an.prototype.interiorParser,exterior:an.prototype.exteriorParser}},an.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:yn(sr.prototype.readPoint),MultiPoint:yn(sr.prototype.readMultiPoint),LineString:yn(sr.prototype.readLineString),MultiLineString:yn(sr.prototype.readMultiLineString),LinearRing:yn(sr.prototype.readLinearRing),Polygon:yn(sr.prototype.readPolygon),MultiPolygon:yn(sr.prototype.readMultiPolygon),Surface:yn(an.prototype.readSurface),MultiSurface:yn(an.prototype.readMultiSurface),Curve:yn(an.prototype.readCurve),MultiCurve:yn(an.prototype.readMultiCurve),Envelope:yn(an.prototype.readEnvelope)}},an.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:Yn(an.prototype.curveMemberParser),curveMembers:Yn(an.prototype.curveMemberParser)}},an.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:Yn(an.prototype.surfaceMemberParser),surfaceMembers:Yn(an.prototype.surfaceMemberParser)}},an.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:Yn(sr.prototype.readLineString),Curve:Yn(an.prototype.readCurve)}},an.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:Yn(sr.prototype.readPolygon),Surface:Yn(an.prototype.readSurface)}},an.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:yn(an.prototype.readPatch)}},an.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:yn(an.prototype.readSegment)}},an.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:Yn(an.prototype.readFlatPosList),upperCorner:Yn(an.prototype.readFlatPosList)}},an.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:yn(an.prototype.readPolygonPatch)}},an.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:IM(an.prototype.readLineStringSegment)}},sr.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:yn(sr.prototype.readFlatLinearRing),Ring:yn(an.prototype.readFlatCurveRing)}},an.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:$t(an.prototype.writeRing),interior:$t(an.prototype.writeRing)}},an.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:$t(sa),upperCorner:$t(sa)}},an.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:$t(an.prototype.writeSurfaceOrPolygonMember),polygonMember:$t(an.prototype.writeSurfaceOrPolygonMember)}},an.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:$t(an.prototype.writePointMember)}},an.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:$t(an.prototype.writeLineStringOrCurveMember),curveMember:$t(an.prototype.writeLineStringOrCurveMember)}},an.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:$t(an.prototype.writeCurveOrLineString),MultiCurve:$t(an.prototype.writeMultiCurveOrLineString),Point:$t(an.prototype.writePoint),MultiPoint:$t(an.prototype.writeMultiPoint),LineString:$t(an.prototype.writeCurveOrLineString),MultiLineString:$t(an.prototype.writeMultiCurveOrLineString),LinearRing:$t(an.prototype.writeLinearRing),Polygon:$t(an.prototype.writeSurfaceOrPolygon),MultiPolygon:$t(an.prototype.writeMultiSurfaceOrPolygon),Surface:$t(an.prototype.writeSurfaceOrPolygon),MultiSurface:$t(an.prototype.writeMultiSurfaceOrPolygon),Envelope:$t(an.prototype.writeEnvelope)}};const ur=an;class Fr extends ur{constructor(t){super(t=t||{}),this.schemaLocation=t.schemaLocation?t.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(t,e,r){r[r.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},r[r.length-1]),super.writeGeometryElement(t,e,r)}}Fr.prototype.namespace="http://www.opengis.net/gml/3.2",Fr.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:yn(ur.prototype.readFlatPos),posList:yn(ur.prototype.readFlatPosList),coordinates:yn(SM.prototype.readFlatCoordinates)}},Fr.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:ur.prototype.interiorParser,exterior:ur.prototype.exteriorParser}},Fr.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:yn(sr.prototype.readPoint),MultiPoint:yn(sr.prototype.readMultiPoint),LineString:yn(sr.prototype.readLineString),MultiLineString:yn(sr.prototype.readMultiLineString),LinearRing:yn(sr.prototype.readLinearRing),Polygon:yn(sr.prototype.readPolygon),MultiPolygon:yn(sr.prototype.readMultiPolygon),Surface:yn(Fr.prototype.readSurface),MultiSurface:yn(ur.prototype.readMultiSurface),Curve:yn(Fr.prototype.readCurve),MultiCurve:yn(ur.prototype.readMultiCurve),Envelope:yn(Fr.prototype.readEnvelope)}},Fr.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:Yn(ur.prototype.curveMemberParser),curveMembers:Yn(ur.prototype.curveMemberParser)}},Fr.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Yn(ur.prototype.surfaceMemberParser),surfaceMembers:Yn(ur.prototype.surfaceMemberParser)}},Fr.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Yn(sr.prototype.readLineString),Curve:Yn(ur.prototype.readCurve)}},Fr.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Yn(sr.prototype.readPolygon),Surface:Yn(ur.prototype.readSurface)}},Fr.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:yn(ur.prototype.readPatch)}},Fr.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:yn(ur.prototype.readSegment)}},Fr.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Yn(ur.prototype.readFlatPosList),upperCorner:Yn(ur.prototype.readFlatPosList)}},Fr.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:yn(ur.prototype.readPolygonPatch)}},Fr.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:IM(ur.prototype.readLineStringSegment)}},Fr.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:Yn(sr.prototype.pointMemberParser),pointMembers:Yn(sr.prototype.pointMemberParser)}},Fr.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Yn(sr.prototype.lineStringMemberParser),lineStringMembers:Yn(sr.prototype.lineStringMemberParser)}},Fr.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:Yn(sr.prototype.polygonMemberParser),polygonMembers:Yn(sr.prototype.polygonMemberParser)}},Fr.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Yn(sr.prototype.readFlatCoordinatesFromNode)}},Fr.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:Yn(sr.prototype.readLineString)}},Fr.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:Yn(sr.prototype.readPolygon)}},Fr.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:yn(sr.prototype.readFlatLinearRing),Ring:yn(Fr.prototype.readFlatCurveRing)}},Fr.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:$t(ur.prototype.writeRing),interior:$t(ur.prototype.writeRing)}},Fr.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:$t(sa),upperCorner:$t(sa)}},Fr.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:$t(ur.prototype.writeSurfaceOrPolygonMember),polygonMember:$t(ur.prototype.writeSurfaceOrPolygonMember)}},Fr.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:$t(ur.prototype.writePointMember)}},Fr.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:$t(ur.prototype.writeLineStringOrCurveMember),curveMember:$t(ur.prototype.writeLineStringOrCurveMember)}},Fr.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:$t(ur.prototype.writeCurveOrLineString),MultiCurve:$t(ur.prototype.writeMultiCurveOrLineString),Point:$t(Fr.prototype.writePoint),MultiPoint:$t(ur.prototype.writeMultiPoint),LineString:$t(ur.prototype.writeCurveOrLineString),MultiLineString:$t(ur.prototype.writeMultiCurveOrLineString),LinearRing:$t(ur.prototype.writeLinearRing),Polygon:$t(ur.prototype.writeSurfaceOrPolygon),MultiPolygon:$t(ur.prototype.writeMultiSurfaceOrPolygon),Surface:$t(ur.prototype.writeSurfaceOrPolygon),MultiSurface:$t(ur.prototype.writeMultiSurfaceOrPolygon),Envelope:$t(ur.prototype.writeEnvelope)}};const HM=Fr;function j4(n){return"string"==typeof n?JSON.parse(n)||null:null!==n?n:null}const VU=class zU extends wM{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(j4(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(j4(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return is()}readFeaturesFromObject(t,e){return is()}readGeometry(t,e){return this.readGeometryFromObject(j4(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return is()}readProjection(t){return this.readProjectionFromObject(j4(t))}readProjectionFromObject(t){return is()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return is()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return is()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return is()}};function x9(n,t){if(!n)return null;let e;switch(n.type){case"Point":e=function RU(n){const t=n.coordinates;return{type:"Point",flatCoordinates:t,layout:U1(t.length)}}(n);break;case"LineString":e=function DU(n){const t=n.coordinates,e=t.flat();return{type:"LineString",flatCoordinates:e,ends:[e.length],layout:U1(t[0].length)}}(n);break;case"Polygon":e=function PU(n){const t=n.coordinates,e=[],r=t[0][0].length;return{type:"Polygon",flatCoordinates:e,ends:b0(e,0,t,r),layout:U1(r)}}(n);break;case"MultiPoint":e=function NU(n){const t=n.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:U1(t[0].length)}}(n);break;case"MultiLineString":e=function BU(n){const t=n.coordinates,e=t[0][0].length,r=[];return{type:"MultiLineString",flatCoordinates:r,ends:b0(r,0,t,e),layout:U1(e)}}(n);break;case"MultiPolygon":e=function FU(n){const t=n.coordinates,e=[],r=t[0][0][0].length;return{type:"MultiPolygon",flatCoordinates:e,ends:lM(e,0,t,r),layout:U1(r)}}(n);break;case"GeometryCollection":e=function LU(n){return n.geometries.map(function(r){return x9(r)})}(n);break;default:throw new Error("Unsupported GeoJSON type: "+n.type)}return e}function S9(n,t){const e=(n=ku(n,!0,t)).getType();let r;switch(e){case"Point":r=function jU(n){return{type:"Point",coordinates:n.getCoordinates()}}(n);break;case"LineString":r=function kU(n){return{type:"LineString",coordinates:n.getCoordinates()}}(n);break;case"Polygon":r=function UU(n,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(e)}}(n,t);break;case"MultiPoint":r=function WU(n){return{type:"MultiPoint",coordinates:n.getCoordinates()}}(n);break;case"MultiLineString":r=function GU(n){return{type:"MultiLineString",coordinates:n.getCoordinates()}}(n);break;case"MultiPolygon":r=function ZU(n,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(e)}}(n,t);break;case"GeometryCollection":r=function OU(n,t){return delete(t=Object.assign({},t)).featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return S9(r,t)})}}(n,t);break;case"Circle":r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+e)}return r}const _M=class TU extends VU{constructor(t){t=t||{},super(),this.dataProjection=(0,Ss.Jt)(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=(0,Ss.Jt)(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let r=null;r="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null};const s=x9(r.geometry);if(this.featureClass===mM)return CM({geometry:s,id:r.id,properties:r.properties},e);const i=new q6;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&i.setGeometryName(r.geometry_name),i.setGeometry(b9(s,e)),"id"in r&&i.setId(r.id),r.properties&&i.setProperties(r.properties,!0),i}readFeaturesFromObject(t,e){let s=null;if("FeatureCollection"===t.type){s=[];const o=t.features;for(let a=0,l=o.length;a<l;++a){const c=this.readFeatureFromObject(o[a],e);c&&s.push(c)}}else s=[this.readFeatureFromObject(t,e)];return s.flat()}readGeometryFromObject(t,e){return function EU(n,t){return b9(x9(n),t)}(t,e)}readProjectionFromObject(t){const e=t.crs;let r;if(e)if("name"==e.type)r=(0,Ss.Jt)(e.properties.name);else{if("EPSG"!==e.type)throw new Error("Unknown SRS type");r=(0,Ss.Jt)("EPSG:"+e.properties.code)}else r=this.dataProjection;return r}writeFeatureObject(t,e){e=this.adaptOptions(e);const r={type:"Feature",geometry:null,properties:null},s=t.getId();if(void 0!==s&&(r.id=s),!t.hasProperties())return r;const i=t.getProperties(),o=t.getGeometry();return o&&(r.geometry=S9(o,e),delete i[t.getGeometryName()]),Q_(i)||(r.properties=i),r}writeFeaturesObject(t,e){e=this.adaptOptions(e);const r=[];for(let s=0,i=t.length;s<i;++s)r.push(this.writeFeatureObject(t[s],e));return{type:"FeatureCollection",features:r}}writeGeometryObject(t,e){return S9(t,this.adaptOptions(e))}};function H9(n){const t=n.trim().split(/\s+/);return[t.shift(),t.join(" ").trim()||null]}function MM(n,t){const e=n?.trim(),r=t?.trim();return e||r?r&&e?`${e} ${r}`:r||e:null}function KU(n){if(!n)return"unspecified";switch(n){case"author":case"coAuthor":return"author";case"originator":return"originator";case"principalInvestigator":return"principal_investigator";case"resourceProvider":return"resource_provider";case"processor":return"processor";case"custodian":return"custodian";case"owner":return"owner";case"pointOfContact":return"point_of_contact";case"publisher":return"publisher";case"distributor":return"distributor";case"user":return"user";case"collaborator":return"collaborator";case"editor":return"editor";case"contributor":return"contributor";case"stakeholder":return"stakeholder";case"sponsor":return"sponsor";case"funder":return"funder";case"rightsHolder":return"rights_holder";case"mediator":return"mediator";default:return"other"}}function qU(n){switch(n){case"completed":return"completed";case"historicalArchive":return"removed";case"obsolete":return"deprecated";case"onGoing":return"ongoing";case"planned":return"planned";case"required":return"required";default:return"under_development"}}const JU=["unspecified","other","author","collaborator","contributor","custodian","distributor","editor","funder","mediator","originator","owner","point_of_contact","principal_investigator","processor","publisher","resource_provider","rights_holder","sponsor","stakeholder","user"],QU=["unknown","notPlanned","asNeeded","irregular","continual","periodic","daily","weekly","fortnightly","semimonthly","monthly","quarterly","biannually","annually","biennially"],e$=["completed","ongoing","under_development","deprecated","removed","planned","required"];function t$(n){return n&&QU.includes(n)?n:null}const _9={eng:"en",nld:"nl",dut:"nl",fra:"fr",fre:"fr",deu:"de",ger:"de",kor:"ko",spa:"es",ces:"cs",cze:"cs",cat:"ca",fin:"fi",isl:"is",ice:"is",ita:"it",por:"pt",rus:"ru",zho:"zh",chi:"zh",slk:"sk",slo:"sk",roh:"rm",ara:"ar",dan:"da",nor:"no",pol:"pl",swe:"sv",tur:"tr",arm:"hy",aze:"az",kat:"ka",geo:"ka",ukr:"uk",cym:"cy",wel:"cy"},M9=Object.entries(_9).reduce((n,t)=>({...n,[t[1]]:t[0]}),{});function z9(n){if(!n)return n;if(3===n.length)return M9[_9[n.toLowerCase()]]??n;const t=n.toLowerCase().substring(0,2);return M9[t]??n}function U4(n){if(!n)return n;if(3===n.length)return _9[n.toLowerCase()]??n;const t=n.toLowerCase().substring(0,2);return t in M9||n.match(/[a-z]{2}_[A-Z]{2}/)?t:n}const zM={application:"reuse",dataset:"dataset",interactiveMap:"reuse",map:"reuse","map/static":"reuse","map/interactive":"reuse","map-interactive":"reuse","map-static":"reuse",mapDigital:"reuse",mapHardcopy:"reuse",series:"dataset",service:"service",staticMap:"reuse"};function V9(n){return zM[n]||"dataset"}function VM(n){return"reuse"===V9(n)?{application:"application",map:"map","map/static":"map","map/interactive":"map","map-interactive":"map","map-static":"map",mapDigital:"map",interactiveMap:"map",staticMap:"map"}[n]||"other":void 0}function TM(n){return"reuse"===n.kind?n.reuseType:n.kind}function Cs(){return N(Zc(Pt("gco:CharacterString",!1),Pt("gmx:Anchor",!1),Pt("gmx:MimeFileType",!1)),Aa())}function ki(n,t){return Jr(N(Zc(Pt("gco:CharacterString",!1),Pt("gmx:Anchor",!1)),Aa()),e=>{const r=Xr("gmd:PT_FreeText","gmd:textGroup","gmd:LocalisedCharacterString")(e),s=t??{};if(!r.length)return s;const i=r.reduce((o,a)=>{const l=xs("locale")(a).toLowerCase().replace(/^#/,""),c=Aa()(a);return l?{...o,[l]:c}:o},{});return s[n]={...s[n],...i},s})}function T9(){return N(Zc(Pt("gco:DateTime",!1),Pt("gco:Date",!1)),Aa(),fn(n=>n?new Date(n):null))}function $4(){return N(Pt("gco:Decimal",!1),Aa(),fn(n=>n?Number(n):null))}function Jl(){const n=N(Pt("gmd:URL",!1),Aa()),t=N(Pt("gco:CharacterString",!1),Aa()),e=N(Pt("gmx:Anchor",!1),xs("xlink:href"));return N(Zc(n,e,t),fn(r=>{try{return new URL(r)}catch{return null}}))}function X4(){return Zc(Jl(),()=>new URL("http://missing"))}function EM(){return N(Pt("gmd:CI_RoleCode"),xs("codeListValue"),fn(KU))}function LM(){const n=N(Xr("gmd:contactInfo","gmd:CI_Contact","gmd:onlineResource","gmd:CI_OnlineResource","gmd:linkage"),Wc(0),Jl());return N(Jr(N(Pt("gmd:organisationName",!1),ki("name")),n),fn(([[t,e],r])=>({name:t,...r&&{website:r},translations:e})))}function RM(){const n=N(Pt("gmd:role"),EM()),t=N(Pt("gmd:positionName"),Cs()),e=N(Pt("gmd:individualName"),Cs(),fn(l=>l?H9(l):[])),r=LM(),s=Er("gmd:contactInfo","gmd:CI_Contact"),i=N(s,Pt("gmd:electronicMailAddress"),Cs(),fn(l=>null===l?"missing@missing.com":l)),o=N(s,Er("gmd:address","gmd:CI_Address"),Jr(N(Pt("gmd:deliveryPoint",!1),Cs()),N(Pt("gmd:city",!1),Cs()),N(Pt("gmd:postalCode",!1),Cs()),N(Pt("gmd:country",!1),Cs())),fn(l=>l.filter(c=>!!c).join(", "))),a=N(s,Er("gmd:phone","gmd:CI_Telephone","gmd:voice"),Cs());return N(Jr(n,t,e,r,i,o,a),fn(([l,c,[u,h],d,g,m,b])=>({email:g,role:l,organization:d,...c&&{position:c},...u&&{firstName:u},...h&&{lastName:h},...m&&{address:m},...b&&{phone:b}})))}Object.entries(zM).reduce((n,[t,e])=>((n[e]??=[]).push(t),n),{});const l$=N(j_("gmd:MD_Distribution"),Er("gmd:distributionFormat","gmd:MD_Format","gmd:name"),Cs(),fn(X_));function DM(n){const t=N(Pt("gmd:linkage"),X4()),e=N(Pt("gmd:protocol"),Cs()),r=N(e,fn(X6)),s=N(Er("gmd:function","gmd:CI_OnLineFunctionCode"),xs("codeListValue")),i=N(r,fn(c=>"other"!==c)),o=N(Jr(i,s,e),fn(([c,u,h])=>!c&&"download"===u||/download/i.test(h))),a=N(Pt("gmd:name"),ki("name")),l=N(Pt("gmd:description"),ki("description"));return N(Xr("gmd:transferOptions","gmd:MD_DigitalTransferOptions","gmd:onLine","gmd:CI_OnlineResource"),Mn(Jr(i,o,r,t,a,l,n)),Mn(([c,u,h,d,[g,m],[b,V],M])=>{const D={...m,...V};return c?{type:"service",url:d,accessServiceProtocol:h,...g&&{identifierInService:g},...g&&{name:g},...b&&{description:b},translations:D}:u?{type:"download",url:d,...g&&{name:g},...b&&{description:b},...M&&{mimeType:M},translations:D}:{type:"link",url:d,...g&&{name:g},...b&&{description:b},translations:D}}))}function c$(n){if(!n)return null;const t=n.match(/^-?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?T?(?:([0-9]+)H)?/);if(!t)return null;const e=parseInt(t[1],10)||0,r=parseInt(t[2],10)||0,s=parseInt(t[3],10)||0,i=parseInt(t[4],10)||0;return e?{per:"year",updatedTimes:1}:1===r?{per:"month",updatedTimes:1}:r?{per:"year",updatedTimes:Math.round(12/r)}:1===s?{per:"day",updatedTimes:1}:s>=1&&s<=7?{per:"week",updatedTimes:Math.round(7/s-1e-4)}:s?{per:"month",updatedTimes:Math.round(30/s)}:i?{per:"day",updatedTimes:Math.round(24/i)}:null}function no(){return N(Pt("gmd:identificationInfo",!1),Jr(Pt("gmd:MD_DataIdentification",!1),Pt("srv:SV_ServiceIdentification",!1)),Ao(n=>null!==n),Wc(0))}function E9(n){return N(no(),Xr("gmd:citation","gmd:CI_Citation","gmd:date"),Ao(N(Xr("gmd:CI_Date","gmd:dateType","gmd:CI_DateTypeCode"),Wc(0),xs("codeListValue"),fn(t=>t===n))),Wc(0),Xr("gmd:CI_Date","gmd:date"),Wc(0),T9())}function h$(n){switch(n){case"grid":case"vector":case"tin":case"table":case"point":return n;default:return null}}function d$(n){return N(Pt("gmd:fileIdentifier",!1),Cs())(n)}function Y4(n){return N(Er("gmd:hierarchyLevel","gmd:MD_ScopeCode"),xs("codeListValue"),fn(t=>V9(t)))(n)}function p$(n){return N(Er("gmd:contact","gmd:CI_ResponsibleParty"),LM())(n)}function g$(n){return E9("revision")(n)}function f$(n){return E9("creation")(n)}function m$(n){return E9("publication")(n)}function v$(n){return N(Pt("gmd:dateStamp"),T9())(n)}function w$(n){return N(Er("gmd:hierarchyLevel","gmd:MD_ScopeCode"),xs("codeListValue"),fn(t=>VM(t)))(n)}function C$(n,t){return N(no(),Er("gmd:citation","gmd:CI_Citation","gmd:title"),ki("title",t),fn(([e])=>e))(n)}function y$(n,t){return N(no(),Pt("gmd:abstract",!1),ki("abstract",t),fn(([e])=>e))(n)}function I$(n){return N(Cr("gmd:contact",!1),Mn(Pt("gmd:CI_ResponsibleParty",!1)),Mn(RM()))(n)}function A$(n){return N(no(),Jr(Cr("gmd:contact",!1),Cr("gmd:pointOfContact",!1)),n=>n.flat(),Mn(Pt("gmd:CI_ResponsibleParty",!1)),Mn(RM()))(n)}function b$(n){if(!n)return null;const t=Er("gmd:CI_Citation","gmd:identifier","gmd:MD_Identifier","gmd:code"),e=N(t,Cs())(n),r=N(t,Jl())(n),s=N(Er("gmd:CI_Citation","gmd:title"),Cs())(n);return{id:e,...s&&{name:s},...r&&{url:r}}}function x$(n){const t=N(Cr("gmd:MD_KeywordTypeCode"),Mn(xs("codeListValue")),fn(r=>function YU(n){if(!n)return"other";switch(n){case"theme":case"place":case"temporal":case"other":return n;default:return"other"}}(r[0])))(n),e=N(Er("gmd:thesaurusName"),b$)(n);return N(Cr("gmd:keyword"),Mn(r=>{const[s,i]=ki("label")(r);return{...e?{thesaurus:e}:{},label:s,type:t,translations:i}}))(n)}function S$(n){return N(no(),Xr("gmd:descriptiveKeywords","gmd:MD_Keywords"),Mn(x$),n=>n.flat())(n)}function H$(n){return N(no(),Pt("gmd:status",!1),function r$(){return N(Pt("gmd:MD_ProgressCode"),xs("codeListValue"),fn(qU))}())(n)}const K4=N(no(),Cr("gmd:resourceConstraints",!1));function _$(n){return N(K4,Mn(function s$(){return N(Cr("gmd:MD_LegalConstraints",!1),Ao(N(Cr("gmd:MD_RestrictionCode"),Mn(xs("codeListValue")),fn(n=>-1===n.indexOf("license")))),Mn(Jr(Cr("gmd:otherConstraints"),Cr("gmd:useLimitation"))),n=>n.flat(),n=>n.flat(),Mn(Jr(ki("text"),Jl())),Mn(([[n,t],e])=>({...e&&{url:e},text:n,translations:t})))}()),n=>n.flat(),n=>n.flat())(n)}function M$(n){return N(K4,Mn(function i$(){return N(Xr("gmd:MD_SecurityConstraints","gmd:useLimitation"),n=>n.flat(),Mn(Jr(ki("text"),Jl())),Mn(([[n,t],e])=>({...e&&{url:e},text:n,translations:t})))}()),n=>n.flat())(n)}function z$(n){return N(K4,Mn(function o$(){return N(Xr("gmd:MD_Constraints","gmd:useLimitation"),n=>n.flat(),Mn(Jr(ki("text"),Jl())),Mn(([[n,t],e])=>({...e&&{url:e},text:n,translations:t})))}()),n=>n.flat())(n)}function V$(n){return N(K4,Mn(function a$(){return N(Cr("gmd:MD_LegalConstraints",!1),Ao(N(Cr("gmd:MD_RestrictionCode"),Mn(xs("codeListValue")),fn(n=>n.indexOf("license")>-1))),Mn(Jr(Cr("gmd:otherConstraints"),Cr("gmd:useLimitation"))),n=>n.flat(),n=>n.flat(),Mn(Jr(ki("text"),Jl())),Mn(([[n,t],e])=>({...e&&{url:e},text:n,translations:t})))}()),n=>n.flat())(n)}function T$(n){return N(no(),Cr("gmd:MD_TopicCategoryCode",!0),Mn(Aa()))(n)}function E$(n){return N(no(),Er("gmd:spatialRepresentationType","gmd:MD_SpatialRepresentationTypeCode"),xs("codeListValue"),fn(h$))(n)}function L$(n){return N(no(),Cr("gmd:graphicOverview",!1),Mn(Jr(N(Pt("gmd:fileName"),X4()),N(Pt("gmd:fileDescription"),Cs()))),Mn(([t,e])=>({url:t,...e&&{description:e}})))(n)}function R$(n,t){return N(Er("gmd:dataQualityInfo","gmd:DQ_DataQuality","gmd:lineage","gmd:LI_Lineage","gmd:statement"),ki("lineage",t),fn(([e])=>e))(n)}function D$(n){return N(no(),Er("gmd:resourceMaintenance","gmd:MD_MaintenanceInformation"),function u$(){return Zc(N(Pt("gmd:MD_MaintenanceFrequencyCode"),xs("codeListValue"),fn(t$)),N(Er("gmd:userDefinedMaintenanceFrequency","gts:TM_PeriodDuration"),Aa(),fn(c$)),fn(()=>"unknown"))}(),fn(t=>t||"unknown"))(n)}function BM(){const n=N(Pt("gmd:linkage"),X4()),t=N(Pt("gmd:protocol"),Cs()),e=N(t,fn(X6)),r=N(Er("gmd:function","gmd:CI_OnLineFunctionCode"),xs("codeListValue")),s=N(r,fn(a=>"information"===a)),i=N(Pt("gmd:name"),ki("name")),o=N(Pt("gmd:description"),ki("description",{}));return N(Xr("gmd:transferOptions","gmd:MD_DigitalTransferOptions","gmd:onLine","gmd:CI_OnlineResource"),Mn(Jr(s,e,n,i,o)),Mn(([a,l,c,[u,h],[d,g]])=>{const m={...h,...g};return a?{type:"link",url:c,...u&&{name:u},...d&&{description:d},translations:m}:{type:"endpoint",url:c,accessServiceProtocol:l,...d&&{description:d},translations:m}}))}function NM(){const n=N(Pt("gmd:linkage"),X4()),t=N(Pt("gmd:name"),ki("name")),e=N(Pt("gmd:description"),ki("description",{}));return N(Xr("gmd:transferOptions","gmd:MD_DigitalTransferOptions","gmd:onLine","gmd:CI_OnlineResource"),Mn(Jr(n,t,e)),Mn(([r,[s,i],[o,a]])=>({type:"link",url:r,...s&&{name:s},...o&&{description:o},translations:{...i,...a}})))}function B$(n){let t;return t="dataset"===Y4(n)?e=>DM(l$)(e):"service"===Y4(n)?BM():NM(),N(Xr("gmd:distributionInfo","gmd:MD_Distribution"),Mn(t),n=>n.flat())(n)}function N$(n){return N(no(),Xr("gmd:extent","gmd:EX_Extent","gmd:temporalElement"),Mn(Jr(Er("gmd:EX_TemporalExtent","gmd:extent","gml:TimePeriod"),Er("gmd:EX_TemporalExtent","gmd:extent","gml:TimeInstant"))),Mn(([t,e])=>t?N(Jr(N(Pt("gml:beginPosition",!1),Aa(),fn(r=>r?new Date(r):null)),N(Pt("gml:endPosition",!1),Aa(),fn(r=>r?new Date(r):null))),fn(([r,s])=>({start:r,end:s})))(t):N(Pt("gml:timePosition",!1),Aa(),fn(r=>r?new Date(r):null),fn(r=>({start:r})))(e)))(n)}function F$(n){return N(no(),Xr("gmd:extent","gmd:EX_Extent","gmd:geographicElement"),Mn(Jr(N(Pt("gmd:EX_BoundingPolygon"),s=>s?N(Pt("gmd:polygon",!1),Mj,fn(i=>i?function $U(n){const t=U6(n);t.root.attributes.xmlns="http://www.opengis.net/gml/3.2";const r=M0(w0(t)),s=document.createElement("pre");s.appendChild(r.documentElement);const o=(new HM).readGeometryFromNode(s);return(new _M).writeGeometryObject(o)}(i):null))(s):null),N(Pt("gmd:EX_GeographicBoundingBox"),s=>s?N(Jr(N(Pt("gmd:westBoundLongitude"),$4()),N(Pt("gmd:southBoundLatitude"),$4()),N(Pt("gmd:eastBoundLongitude"),$4()),N(Pt("gmd:northBoundLatitude"),$4())))(s):null),N(Pt("gmd:EX_GeographicDescription"),s=>s?N(Er("gmd:geographicIdentifier","gmd:MD_Identifier","gmd:code"),ki("description"))(s):[null,{}]))),Ao(([s,i,[o]])=>!!s||!!i||!!o),Mn(([s,i,[o,a]])=>({...s&&{geometry:s},...i&&{bbox:i},...o&&{description:o},translations:a})))(n)}function P$(n){const t=FM(n);return N(Cr("gmd:locale",!1),Mn(N(Pt("lan:LanguageCode"),xs("codeListValue"),fn(e=>U4(e?.toLowerCase())??e))),fn(e=>e.filter(r=>null!==r)),fn(e=>e.length?e:[t]))(n)}function FM(n){return N(Pt("gmd:language",!1),Pt("lan:LanguageCode"),xs("codeListValue"),fn(t=>t?U4(t.toLowerCase()):null))(n)}function O$(n){const t=N(no(),Er("gmd:citation","gmd:CI_Citation","gmd:identifier","gmd:MD_Identifier","gmd:code"),Cs())(n);return t?[{code:t}]:[]}const k$={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function L9(n){return(t={})=>{const e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}const U$={date:L9({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:L9({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:L9({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},$$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function V0(n){return(t,e)=>{let s;if("formatting"===(e?.context?String(e.context):"standalone")&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,a=e?.width?String(e.width):o;s=n.formattingValues[a]||n.formattingValues[o]}else{const o=n.defaultWidth,a=e?.width?String(e.width):n.defaultWidth;s=n.values[a]||n.values[o]}return s[n.argumentCallback?n.argumentCallback(t):t]}}function T0(n){return(t,e={})=>{const r=e.width,i=t.match(r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth]);if(!i)return null;const o=i[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?function rX(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}(a,h=>h.test(o)):function nX(n,t){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}(a,h=>h.test(o));let c;return c=n.valueCallback?n.valueCallback(l):l,c=e.valueCallback?e.valueCallback(c):c,{value:c,rest:t.slice(o.length)}}}const wX={code:"en-US",formatDistance:(n,t,e)=>{let r;const s=k$[n];return r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r},formatLong:U$,formatRelative:(n,t,e,r)=>$$[n],localize:{ordinalNumber:(n,t)=>{const e=Number(n),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},era:V0({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:V0({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:n=>n-1}),month:V0({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:V0({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:V0({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function sX(n){return(t,e={})=>{const r=t.match(n.matchPattern);if(!r)return null;const s=r[0],i=t.match(n.parsePattern);if(!i)return null;let o=n.valueCallback?n.valueCallback(i[0]):i[0];return o=e.valueCallback?e.valueCallback(o):o,{value:o,rest:t.slice(s.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:n=>parseInt(n,10)}),era:T0({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:T0({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:n=>n+1}),month:T0({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:T0({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:T0({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let PM={};function q4(){return PM}Math.pow(10,8);const OM=6048e5,yX=864e5,GM=Symbol.for("constructDateFrom");function jc(n,t){return"function"==typeof n?n(t):n&&"object"==typeof n&&GM in n?n[GM](t):n instanceof Date?new n.constructor(t):new Date(t)}function Ua(n,t){return jc(t||n,n)}function WM(n){const t=Ua(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function ZM(n,t){const e=Ua(n,t?.in);return e.setHours(0,0,0,0),e}function SX(n,t){const e=Ua(n,t?.in);return function bX(n,t,e){const[r,s]=function AX(n,...t){const e=jc.bind(null,n||t.find(r=>"object"==typeof r));return t.map(e)}(e?.in,n,t),i=ZM(r),o=ZM(s),a=+i-WM(i),l=+o-WM(o);return Math.round((a-l)/yX)}(e,function xX(n,t){const e=Ua(n,t?.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}(e))+1}function E0(n,t){const e=q4(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,s=Ua(n,t?.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function J4(n,t){return E0(n,{...t,weekStartsOn:1})}function jM(n,t){const e=Ua(n,t?.in),r=e.getFullYear(),s=jc(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=J4(s),o=jc(e,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=J4(o);return e.getTime()>=i.getTime()?r+1:e.getTime()>=a.getTime()?r:r-1}function UM(n,t){const e=Ua(n,t?.in),r=e.getFullYear(),s=q4(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=jc(t?.in||n,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=E0(o,t),l=jc(t?.in||n,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const c=E0(l,t);return+e>=+a?r+1:+e>=+c?r:r-1}function Qr(n,t){return(n<0?"-":"")+Math.abs(n).toString().padStart(t,"0")}const Uc={y(n,t){const e=n.getFullYear(),r=e>0?e:1-e;return Qr("yy"===t?r%100:r,t.length)},M(n,t){const e=n.getMonth();return"M"===t?String(e+1):Qr(e+1,2)},d:(n,t)=>Qr(n.getDate(),t.length),a(n,t){const e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];default:return"am"===e?"a.m.":"p.m."}},h:(n,t)=>Qr(n.getHours()%12||12,t.length),H:(n,t)=>Qr(n.getHours(),t.length),m:(n,t)=>Qr(n.getMinutes(),t.length),s:(n,t)=>Qr(n.getSeconds(),t.length),S(n,t){const e=t.length,r=n.getMilliseconds();return Qr(Math.trunc(r*Math.pow(10,e-3)),t.length)}},$M={G:function(n,t,e){const r=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});default:return e.era(r,{width:"wide"})}},y:function(n,t,e){if("yo"===t){const r=n.getFullYear();return e.ordinalNumber(r>0?r:1-r,{unit:"year"})}return Uc.y(n,t)},Y:function(n,t,e,r){const s=UM(n,r),i=s>0?s:1-s;return"YY"===t?Qr(i%100,2):"Yo"===t?e.ordinalNumber(i,{unit:"year"}):Qr(i,t.length)},R:function(n,t){return Qr(jM(n),t.length)},u:function(n,t){return Qr(n.getFullYear(),t.length)},Q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Qr(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,t,e){const r=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Qr(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,t,e){const r=n.getMonth();switch(t){case"M":case"MM":return Uc.M(n,t);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(n,t,e){const r=n.getMonth();switch(t){case"L":return String(r+1);case"LL":return Qr(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(n,t,e,r){const s=function zX(n,t){const e=Ua(n,t?.in),r=+E0(e,t)-+function MX(n,t){const e=q4(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,s=UM(n,t),i=jc(t?.in||n,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),E0(i,t)}(e,t);return Math.round(r/OM)+1}(n,r);return"wo"===t?e.ordinalNumber(s,{unit:"week"}):Qr(s,t.length)},I:function(n,t,e){const r=function _X(n,t){const e=Ua(n,t?.in),r=+J4(e)-+function HX(n,t){const e=jM(n,t),r=jc(t?.in||n,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),J4(r)}(e);return Math.round(r/OM)+1}(n);return"Io"===t?e.ordinalNumber(r,{unit:"week"}):Qr(r,t.length)},d:function(n,t,e){return"do"===t?e.ordinalNumber(n.getDate(),{unit:"date"}):Uc.d(n,t)},D:function(n,t,e){const r=SX(n);return"Do"===t?e.ordinalNumber(r,{unit:"dayOfYear"}):Qr(r,t.length)},E:function(n,t,e){const r=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(n,t,e,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Qr(i,2);case"eo":return e.ordinalNumber(i,{unit:"day"});case"eee":return e.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(s,{width:"short",context:"formatting"});default:return e.day(s,{width:"wide",context:"formatting"})}},c:function(n,t,e,r){const s=n.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Qr(i,t.length);case"co":return e.ordinalNumber(i,{unit:"day"});case"ccc":return e.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(s,{width:"narrow",context:"standalone"});case"cccccc":return e.day(s,{width:"short",context:"standalone"});default:return e.day(s,{width:"wide",context:"standalone"})}},i:function(n,t,e){const r=n.getDay(),s=0===r?7:r;switch(t){case"i":return String(s);case"ii":return Qr(s,t.length);case"io":return e.ordinalNumber(s,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(n,t,e){const s=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(s,{width:"narrow",context:"formatting"});default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(n,t,e){const r=n.getHours();let s;switch(s=12===r?"noon":0===r?"midnight":r/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(s,{width:"narrow",context:"formatting"});default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(n,t,e){const r=n.getHours();let s;switch(s=r>=17?"evening":r>=12?"afternoon":r>=4?"morning":"night",t){case"B":case"BB":case"BBB":return e.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(s,{width:"narrow",context:"formatting"});default:return e.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(n,t,e){if("ho"===t){let r=n.getHours()%12;return 0===r&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return Uc.h(n,t)},H:function(n,t,e){return"Ho"===t?e.ordinalNumber(n.getHours(),{unit:"hour"}):Uc.H(n,t)},K:function(n,t,e){const r=n.getHours()%12;return"Ko"===t?e.ordinalNumber(r,{unit:"hour"}):Qr(r,t.length)},k:function(n,t,e){let r=n.getHours();return 0===r&&(r=24),"ko"===t?e.ordinalNumber(r,{unit:"hour"}):Qr(r,t.length)},m:function(n,t,e){return"mo"===t?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):Uc.m(n,t)},s:function(n,t,e){return"so"===t?e.ordinalNumber(n.getSeconds(),{unit:"second"}):Uc.s(n,t)},S:function(n,t){return Uc.S(n,t)},X:function(n,t,e){const r=n.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return YM(r);case"XXXX":case"XX":return K1(r);default:return K1(r,":")}},x:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"x":return YM(r);case"xxxx":case"xx":return K1(r);default:return K1(r,":")}},O:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+XM(r,":");default:return"GMT"+K1(r,":")}},z:function(n,t,e){const r=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+XM(r,":");default:return"GMT"+K1(r,":")}},t:function(n,t,e){return Qr(Math.trunc(+n/1e3),t.length)},T:function(n,t,e){return Qr(+n,t.length)}};function XM(n,t=""){const e=n>0?"-":"+",r=Math.abs(n),s=Math.trunc(r/60),i=r%60;return 0===i?e+String(s):e+String(s)+t+Qr(i,2)}function YM(n,t){return n%60==0?(n>0?"-":"+")+Qr(Math.abs(n)/60,2):K1(n,t)}function K1(n,t=""){const e=n>0?"-":"+",r=Math.abs(n);return e+Qr(Math.trunc(r/60),2)+t+Qr(r%60,2)}const KM=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},qM=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},VX={p:qM,P:(n,t)=>{const e=n.match(/(P+)(p+)?/)||[],r=e[1],s=e[2];if(!s)return KM(n,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",KM(r,t)).replace("{{time}}",qM(s,t))}},TX=/^D+$/,EX=/^Y+$/,LX=["D","DD","YY","YYYY"];const OX=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kX=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,GX=/^'([^]*?)'?$/,WX=/''/g,ZX=/[a-zA-Z]/;function Q4(n,t,e){const r=q4(),s=e?.locale??r.locale??wX,i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Ua(n,e?.in);if(!function PX(n){return!(!function FX(n){return n instanceof Date||"object"==typeof n&&"[object Date]"===Object.prototype.toString.call(n)}(n)&&"number"!=typeof n||isNaN(+Ua(n)))}(a))throw new RangeError("Invalid time value");let l=t.match(kX).map(u=>{const h=u[0];return"p"===h||"P"===h?(0,VX[h])(u,s.formatLong):u}).join("").match(OX).map(u=>{if("''"===u)return{isToken:!1,value:"'"};const h=u[0];if("'"===h)return{isToken:!1,value:jX(u)};if($M[h])return{isToken:!0,value:u};if(h.match(ZX))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(l=s.localize.preprocessor(a,l));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return l.map(u=>{if(!u.isToken)return u.value;const h=u.value;return(!e?.useAdditionalWeekYearTokens&&function DX(n){return EX.test(n)}(h)||!e?.useAdditionalDayOfYearTokens&&function RX(n){return TX.test(n)}(h))&&function BX(n,t,e){const r=function NX(n,t,e){const r="Y"===n[0]?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${r} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(n,t,e);if(console.warn(r),LX.includes(n))throw new RangeError(r)}(h,t,String(n)),(0,$M[h[0]])(a,h,s.localize,c)}).join("")}function jX(n){const t=n.match(GX);return t?t[1].replace(WX,"'"):n}function JM(n,t,e,r){if(!e)return N(n,Oi("gmd:PT_FreeText"));function s(i,o){return N(Lr("gmd:textGroup","gmd:LocalisedCharacterString"),bn("locale",`#${i.toUpperCase()}`),eo(o))}return N(n,Oi("gmd:PT_FreeText"),Gs("gmd:PT_FreeText"),Gt(s(r,t),...Object.entries(e).map(([i,o])=>s(i,o))))}function ps(n){return j1(N(ba("gco:CharacterString"),eo(n)))}function ia(n,t,e){return JM(ps(n),n,t,e)}function e5(n){return j1(N(Ys("gmd:linkage","gmd:URL"),eo(n.toString())))}function R9(n,t){return j1(N(ba("gmx:Anchor"),bn("xlink:href",n.toString()),t?eo(t):ii))}function D9(n,t,e,r){return JM(R9(n,t),t,e,r)}function t5(n){return N(ba("gco:DateTime"),eo(Q4(n,"yyyy-MM-dd'T'HH:mm:ss")))}function n5(n){return j1(N(ba("gco:Decimal"),eo(n.toString())))}function QM(n){switch(n){case"completed":return"completed";case"deprecated":return"deprecated";case"ongoing":return"onGoing";case"removed":return"removed";case"under_development":return"underDevelopment";case"planned":return"planned";case"required":return"required";default:throw new Error(`Could not determine progress code from status: ${n}`)}}function B9(n){switch(n){case"author":return"author";case"collaborator":return"collaborator";case"contributor":return"contributor";case"custodian":return"custodian";case"distributor":return"distributor";case"editor":return"editor";case"funder":return"funder";case"mediator":return"mediator";case"originator":return"originator";case"other":return"other";case"owner":return"owner";case"point_of_contact":return"pointOfContact";case"principal_investigator":return"principalInvestigator";case"processor":return"processor";case"publisher":return"publisher";case"resource_provider":return"resourceProvider";case"rights_holder":return"rightsHolder";case"sponsor":return"sponsor";case"stakeholder":return"stakeholder";case"unspecified":return"unspecified";case"user":return"user";default:throw new Error(`Could not determine role code from role: ${n}`)}}function ez(n,t,e){const r=MM(n.firstName,n.lastName),s=N(Lr("gmd:address","gmd:CI_Address"),Gt(N(rn("gmd:electronicMailAddress"),ps(n.email))),n.address?Gt(N(rn("gmd:deliveryPoint"),ps(n.address))):ii),i=N(Lr("gmd:contactInfo","gmd:CI_Contact"),n.phone?Gt(N(Lr("gmd:phone","gmd:CI_Telephone","gmd:voice"),ps(n.phone))):ii,Gt(s),n.organization?.website?Gt(N(Lr("gmd:onlineResource","gmd:CI_OnlineResource"),e5(n.organization.website))):ii);return Gt(N(rn("gmd:CI_ResponsibleParty"),r?Gt(N(rn("gmd:individualName"),ps(r))):ii,n.position?Gt(N(rn("gmd:positionName"),ps(n.position))):ii,n.organization?.name?Gt(N(rn("gmd:organisationName"),ps(n.organization.name))):ii,Gt(i,N(Lr("gmd:role","gmd:CI_RoleCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_RoleCode"),bn("codeListValue",B9(n.role))))))}function N9(n,t,e){return"security"===t?N(Lr("gmd:resourceConstraints","gmd:MD_SecurityConstraints"),Gt(N(Lr("gmd:classification","gmd:MD_ClassificationCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_ClassificationCode"),bn("codeListValue","restricted")),N(rn("gmd:useLimitation"),"url"in n?D9(n.url,n.text,n.translations?.text,e):ia(n.text,n.translations?.text,e)))):"legal"===t?N(Lr("gmd:resourceConstraints","gmd:MD_LegalConstraints"),Gt(N(Lr("gmd:accessConstraints","gmd:MD_RestrictionCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_RestrictionCode"),bn("codeListValue","otherRestrictions")),N(rn("gmd:otherConstraints"),"url"in n?D9(n.url,n.text,n.translations?.text,e):ia(n.text,n.translations?.text,e)))):N(Lr("gmd:resourceConstraints","gmd:MD_Constraints","gmd:useLimitation"),"url"in n?D9(n.url,n.text,n.translations?.text,e):ia(n.text,n.translations?.text,e))}function F9(){return xa(N(Cr("gmd:resourceConstraints"),Ao(N(_4,n=>0===n.length))))}function sY(n){return Gt(N(Lr("gmd:distributionFormat","gmd:MD_Format"),Gt(N(rn("gmd:name"),ps(n)),N(rn("gmd:version"),ps("1.0")))))}function tz(){return Lr("gmd:distributionInfo","gmd:MD_Distribution")}function nz(n,t,e,r){let s,i,o;"service"===n.type?(s=n.identifierInService,i="download",o=function UX(n){switch(n.accessServiceProtocol.toLowerCase()){case"ogcfeatures":return"OGC API Features";case"wfs":return"OGC:WFS";case"wms":return"OGC:WMS";case"wps":return"OGC:WPS";default:return n.accessServiceProtocol}}(n)):"download"===n.type?(s=n.name,i="download",o="WWW:DOWNLOAD"):(s=n.name,i="information",o="WWW:LINK");const a=Gt(N(Lr("gmd:transferOptions","gmd:MD_DigitalTransferOptions","gmd:onLine","gmd:CI_OnlineResource"),e5(n.url),"description"in n?Gt(N(rn("gmd:description"),ia(n.description,n.translations?.description,r))):ii,void 0!==s?Gt(N(rn("gmd:name"),ia(s,n.translations?.name,r))):ii,Gt(N(rn("gmd:protocol"),ps(o)),N(Lr("gmd:function","gmd:CI_OnLineFunctionCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_OnLineFunctionCode"),bn("codeListValue",i)))));return N("mimeType"in n?t(n.mimeType):ii,a)}function Ns(){return n=>{let e="gmd:MD_DataIdentification";return"service"===Y4(n)&&(e="srv:SV_ServiceIdentification"),Ys("gmd:identificationInfo",e)(n)}}function oY(n,t){N(ba("gmd:fileIdentifier"),ps(n.uniqueIdentifier))(t)}function rz(n,t){N(Ys("gmd:hierarchyLevel","gmd:MD_ScopeCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_ScopeCode"),bn("codeListValue",TM(n)))(t)}function aY(n,t){N(Ns(),Ys("gmd:citation","gmd:CI_Citation","gmd:title"),ia(n.title,n.translations?.title,n.defaultLanguage))(t)}function lY(n,t){N(Ns(),ba("gmd:abstract"),ia(n.abstract,n.translations?.abstract,n.defaultLanguage))(t)}function cY(n,t){N(Ns(),Ys("gmd:status","gmd:MD_ProgressCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_ProgressCode"),bn("codeListValue",QM(n.status)))(t)}function uY(n,t){N(Oi("gmd:contact"),Gt(...n.contacts.map(e=>N(rn("gmd:contact"),ez(e)))))(t)}function hY(n,t){N(Ns(),Oi("gmd:pointOfContact"),Oi("gmd:contact"),Gt(...n.contactsForResource.map(e=>N(rn("gmd:pointOfContact"),ez(e)))))(t)}function dY(n,t){N(Ns(),function YX(){return xa(N(Xr("gmd:descriptiveKeywords")))}(),function qX(n,t){return Gt(...n.reduce((r,s)=>{const i=s.thesaurus?.id,o=s.type;let a=r.find(l=>i?l[0].thesaurus?.id===i:l[0].type===o&&!l[0].thesaurus);return a||(a=[],r.push(a)),a.push(s),r},[]).map(r=>N(Lr("gmd:descriptiveKeywords","gmd:MD_Keywords"),Gt(N(Lr("gmd:type","gmd:MD_KeywordTypeCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_KeywordTypeCode"),bn("codeListValue",r[0].type))),r[0].thesaurus?Gt(function KX(n){return N(Lr("gmd:thesaurusName","gmd:CI_Citation"),Gt(N(rn("gmd:title"),ps(n.name||n.id)),N(Lr("gmd:identifier","gmd:MD_Identifier"),Gt(N(rn("gmd:code"),n.url?R9(n.url,n.id):ps(n.id))))))}(r[0].thesaurus)):ii,Gt(...r.map(s=>N(rn("gmd:keyword"),ia(s.label,s.translations?.label,t)))))))}(n.keywords,n.defaultLanguage))(t)}function pY(n,t){N(Ns(),Oi("gmd:topicCategory"),Gt(...n.topics.map(e=>N(Lr("gmd:topicCategory","gmd:MD_TopicCategoryCode"),eo(e)))))(t)}function gY(n,t){N(Ns(),function tY(){return xa(N(Cr("gmd:resourceConstraints"),Ao(N(Xr("gmd:MD_LegalConstraints","gmd:accessConstraints","gmd:MD_RestrictionCode"),Mn(xs("codeListValue")),n=>n.some(t=>"license"===t)))))}(),Gt(...n.licenses.map(e=>function nY(n,t){return N(Lr("gmd:resourceConstraints","gmd:MD_LegalConstraints"),Gt(N(Lr("gmd:accessConstraints","gmd:MD_RestrictionCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_RestrictionCode"),bn("codeListValue","license")),N(Lr("gmd:accessConstraints","gmd:MD_RestrictionCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_RestrictionCode"),bn("codeListValue","otherRestrictions")),N(rn("gmd:otherConstraints"),"url"in n?R9(n.url,n.text):ia(n.text,n.translations?.text,t))))}(e,n.defaultLanguage))))(t)}function fY(n,t){N(Ns(),function eY(){return j1(N(Cr("gmd:resourceConstraints"),Mn(xa(N(Cr("gmd:MD_LegalConstraints"),Ao(N(Xr("gmd:accessConstraints","gmd:MD_RestrictionCode"),Mn(xs("codeListValue")),n=>n.every(t=>"license"!==t))))))))}(),F9(),Gt(...n.legalConstraints.map(e=>N9(e,"legal",n.defaultLanguage))))(t)}function mY(n,t){N(Ns(),function QX(){return j1(N(Cr("gmd:resourceConstraints"),Mn(xa(N(Cr("gmd:MD_SecurityConstraints"),Ao(N(Xr("gmd:useLimitation"),n=>n.length>0)))))))}(),F9(),Gt(...n.securityConstraints.map(e=>N9(e,"security",n.defaultLanguage))))(t)}function vY(n,t){N(Ns(),function JX(){return j1(N(Cr("gmd:resourceConstraints"),Mn(xa(N(Cr("gmd:MD_Constraints"),Ao(N(Xr("gmd:useLimitation"),n=>n.length>0)))))))}(),F9(),Gt(...n.otherConstraints.map(e=>N9(e,"other",n.defaultLanguage))))(t)}function wY(n,t){N(Ns(),ba("gmd:resourceMaintenance"),n=>n?(n.children.forEach(t=>t.parent=null),n.children=[],n):null,ba("gmd:MD_MaintenanceInformation"),"object"==typeof n.updateFrequency?N(y0("gmd:userDefinedMaintenanceFrequency","gts:TM_PeriodDuration"),eo(function XX(n){const t={years:0,months:0,weeks:0,days:0,hours:0};switch(n.per){case"day":n.updatedTimes<=1?t.days=1:t.hours=Math.round(24/n.updatedTimes);break;case"week":t.days=Math.round(7/n.updatedTimes-1e-4);break;case"month":n.updatedTimes<=1?t.months=1:t.days=Math.round(30/n.updatedTimes);break;case"year":n.updatedTimes<=1?t.years=1:t.months=Math.round(12/n.updatedTimes)}return`P${t.years}Y${t.months}M${t.days}D${t.hours>0?`T${t.hours}H`:""}`}(n.updateFrequency))):N(y0("gmd:maintenanceAndUpdateFrequency","gmd:MD_MaintenanceFrequencyCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_MaintenanceFrequencyCode"),bn("codeListValue",function $X(n){switch(n){case"asNeeded":return"asNeeded";case"unknown":return"unknown";case"irregular":return"irregular";case"notPlanned":return"notPlanned";case"continual":return"continual";case"periodic":return"periodic";case"daily":return"daily";case"weekly":return"weekly";case"fortnightly":return"fortnightly";case"monthly":return"monthly";case"quarterly":return"quarterly";case"biannually":return"biannually";case"annually":return"annually";case"semimonthly":return"semimonthly";case"biennially":return"biennially"}}(n.updateFrequency))))(t)}function CY(n,t){N(ba("gmd:dateStamp"),n=>n?(n.children.forEach(t=>t.parent=null),n.children=[],n):null,t5(n.recordUpdated))(t)}function P9(n){return N(Ns(),Ys("gmd:citation","gmd:CI_Citation"),xa(N(Xr("gmd:date"),Ao(N(Er("gmd:CI_Date","gmd:dateType","gmd:CI_DateTypeCode"),xs("codeListValue"),fn(t=>t===n))))))}function O9(n,t){return N(Ns(),Ys("gmd:citation","gmd:CI_Citation"),Gt(N(Lr("gmd:date","gmd:CI_Date"),Gt(N(rn("gmd:date"),t5(n)),N(Lr("gmd:dateType","gmd:CI_DateTypeCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_DateTypeCode"),bn("codeListValue",t))))))}function yY(n,t){P9("creation")(t),n.resourceCreated&&O9(n.resourceCreated,"creation")(t)}function IY(n,t){P9("revision")(t),n.resourceUpdated&&O9(n.resourceUpdated,"revision")(t)}function AY(n,t){P9("publication")(t),n.resourcePublished&&O9(n.resourcePublished,"publication")(t)}function bY(n,t){rz(n,t)}function xY(n,t){n.spatialRepresentation?N(Ns(),Ys("gmd:spatialRepresentationType","gmd:MD_SpatialRepresentationTypeCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#MD_SpatialRepresentationTypeCode"),bn("codeListValue",n.spatialRepresentation))(t):N(Ns(),Oi("gmd:spatialRepresentationType"))(t)}function SY(n,t){N(Ns(),Oi("gmd:graphicOverview"),Gt(...n.overviews.filter(e=>e.url).map(e=>N(Lr("gmd:graphicOverview","gmd:MD_BrowseGraphic"),Gt(N(rn("gmd:fileName"),ps(e.url.toString()))),"description"in e?Gt(N(rn("gmd:fileDescription"),ps(e.description))):ii))))(t)}function HY(n,t){N(Ys("gmd:dataQualityInfo","gmd:DQ_DataQuality","gmd:lineage","gmd:LI_Lineage","gmd:statement"),ia(n.lineage,n.translations?.lineage,n.defaultLanguage))(t)}function MY(n){let t,e,r;"endpoint"===n.type?(t=n.url.toString(),r=function _Y(n){switch(n.accessServiceProtocol.toLowerCase()){case"wfs":return"OGC:WFS";case"wms":return"OGC:WMS";case"wps":return"OGC:WPS";default:return n.accessServiceProtocol}}(n),e="download"):(t=n.url.toString(),e="information",r="WWW:LINK");const s=Gt(N(rn("gmd:transferOptions"),y0("gmd:MD_DigitalTransferOptions","gmd:onLine","gmd:CI_OnlineResource"),e5(t),"description"in n?Gt(N(rn("gmd:description"),ps(n.description))):ii,"name"in n?Gt(N(rn("gmd:name"),ps(n.name))):ii,Gt(N(rn("gmd:protocol"),ps(r)),N(Lr("gmd:function","gmd:CI_OnLineFunctionCode"),bn("codeList","http://standards.iso.org/iso/19139/resources/gmxCodelists.xml#CI_OnLineFunctionCode"),bn("codeListValue",e)))));return N(Lr("gmd:distributionInfo","gmd:MD_Distribution"),s)}function sz(n,t){Gt(...n.onlineResources.map(MY))(t)}function VY(n,t){(function rY(){return Oi("gmd:distributionInfo")})()(t),"dataset"!==n.kind&&"reuse"!==n.kind?sz(n,t):function zY(n,t){Gt(...n.onlineResources.map(e=>N(tz(),nz(e,sY,0,n.defaultLanguage))))(t)}(n,t)}function TY(n,t){N(Ns(),Ys("gmd:extent","gmd:EX_Extent"),Oi("gmd:temporalElement"),Gt(...n.temporalExtents.map(e=>N(Lr("gmd:temporalElement","gmd:EX_TemporalExtent"),Gt("start"in e&&"end"in e?N(Lr("gmd:extent","gml:TimePeriod"),Gt(N(rn("gml:beginPosition"),N(e.start?eo(Q4(e.start,"yyyy-MM-dd")):bn("indeterminatePosition","unknown"))),N(rn("gml:endPosition"),N(e.end?eo(Q4(e.end,"yyyy-MM-dd")):bn("indeterminatePosition","unknown"))))):N(Lr("gmd:extent","gml:TimeInstant","gml:timePosition"),e.start?eo(Q4(e.start,"yyyy-MM-dd")):bn("indeterminatePosition","unknown")))))))(t)}function EY(n,t){N(Ns(),Ys("gmd:extent","gmd:EX_Extent"),Oi("gmd:geographicElement"),Gt(...n.spatialExtents.map(i=>N(rn("gmd:geographicElement"),Gt((i=>i?N(rn("gmd:EX_BoundingPolygon"),Gt(N(rn("gmd:polygon"),Gt(()=>function XU(n){const e=(new _M).readGeometry(n),i=(new HM).writeGeometryNode(e).firstElementChild;return $6(j6((new XMLSerializer).serializeToString(i)))}(i))))):null)(i.geometry),(i=>i?N(rn("gmd:EX_GeographicBoundingBox"),Gt(N(rn("gmd:westBoundLongitude"),n5(i[0])),N(rn("gmd:eastBoundLongitude"),n5(i[2])),N(rn("gmd:southBoundLatitude"),n5(i[1])),N(rn("gmd:northBoundLatitude"),n5(i[3])))):null)(i.bbox),((i,o)=>i?N(Lr("gmd:EX_GeographicDescription","gmd:geographicIdentifier","gmd:MD_Identifier","gmd:code"),ia(i,o,n.defaultLanguage)):null)(i.description,i.translations?.description))))))(t)}function LY(n,t){if(Oi("gmd:locale")(t),!n.otherLanguages?.length)return;const e=r=>N(Lr("gmd:locale","gmd:PT_Locale"),bn("id",r.toUpperCase()),y0("gmd:languageCode","gmd:LanguageCode"),bn("codeList","http://www.loc.gov/standards/iso639-2/"),bn("codeListValue",z9(r)??r));Gt(e(n.defaultLanguage),...n.otherLanguages.map(e))(t)}function RY(n,t){const e=z9(n.defaultLanguage.toLowerCase());return N(Ys("gmd:language","gmd:LanguageCode"),bn("codeList","http://www.loc.gov/standards/iso639-2/"),bn("codeListValue",e))(t)}function DY(n,t){const e=n.resourceIdentifiers?.[0]?.code;N(Ns(),Ys("gmd:citation","gmd:CI_Citation"),Oi("gmd:identifier"),e?N(y0("gmd:identifier","gmd:MD_Identifier","gmd:code"),ps(e)):ii)(t)}class k9 extends G_{constructor(){super(...arguments),this.readers={uniqueIdentifier:d$,kind:Y4,ownerOrganization:p$,recordUpdated:v$,recordCreated:()=>{},recordPublished:()=>{},resourceIdentifiers:O$,resourceUpdated:g$,resourceCreated:f$,resourcePublished:m$,reuseType:w$,title:C$,abstract:y$,contacts:I$,contactsForResource:A$,keywords:S$,topics:T$,licenses:V$,legalConstraints:_$,securityConstraints:M$,otherConstraints:z$,status:H$,updateFrequency:D$,spatialRepresentation:E$,overviews:L$,lineage:R$,onlineResources:B$,temporalExtents:N$,spatialExtents:F$,otherLanguages:P$,defaultLanguage:FM,extras:()=>{},landingPage:()=>{},translations:()=>{}},this.writers={uniqueIdentifier:oY,kind:rz,ownerOrganization:()=>{},recordUpdated:CY,recordCreated:()=>{},recordPublished:()=>{},resourceIdentifiers:DY,resourceUpdated:IY,resourceCreated:yY,resourcePublished:AY,reuseType:bY,title:aY,abstract:lY,contacts:uY,contactsForResource:hY,keywords:dY,topics:pY,licenses:gY,legalConstraints:fY,securityConstraints:mY,otherConstraints:vY,status:cY,updateFrequency:wY,spatialRepresentation:xY,overviews:SY,lineage:HY,onlineResources:VY,temporalExtents:TY,spatialExtents:EY,otherLanguages:LY,defaultLanguage:RY,extras:()=>{},landingPage:()=>{},translations:()=>{}}}beforeDocumentCreation(t){}afterRecordRead(t){function e(r){if("translations"in r)for(const s in r.translations){const i=r.translations[s]??{};if(t.defaultLanguage in i&&delete i[t.defaultLanguage],0!==Object.keys(i).length)for(const o in i)t.otherLanguages.includes(o)||t.otherLanguages.push(o);else delete r.translations[s]}}return e(t),t.keywords.map(e),t.onlineResources.map(e),t.licenses.map(e),t.legalConstraints.map(e),t.securityConstraints.map(e),t.otherConstraints.map(e),t.contacts.map(r=>e(r.organization)),t.contactsForResource.map(r=>e(r.organization)),e(t.ownerOrganization),"dataset"===t.kind&&t.spatialExtents.map(e),t.otherLanguages.includes(t.defaultLanguage)&&(t.otherLanguages=t.otherLanguages.filter(r=>r!==t.defaultLanguage)),t}readBaseRecord(t,e){const r=this.readers.uniqueIdentifier(t,e),s=this.readers.kind(t,e),i=this.readers.ownerOrganization(t,e),o=this.readers.title(t,e),a=this.readers.abstract(t,e),l=this.readers.contacts(t,e),c=this.readers.contactsForResource(t,e),u=this.readers.recordUpdated(t,e),h=this.readers.recordCreated(t,e),d=this.readers.recordPublished(t,e),g=this.readers.resourceCreated(t,e),m=this.readers.resourceUpdated(t,e),b=this.readers.resourcePublished(t,e),V=this.readers.keywords(t,e),M=this.readers.topics(t,e),D=this.readers.legalConstraints(t,e),J=this.readers.otherConstraints(t,e),X=this.readers.securityConstraints(t,e),G=this.readers.licenses(t,e),K=this.readers.overviews(t,e),U=this.readers.landingPage(t,e),pe=this.readers.onlineResources(t,e),Me=this.readers.otherLanguages(t,e),ye=this.readers.defaultLanguage(t,e),Fe=this.readers.resourceIdentifiers(t,e),He=this.readers.spatialExtents(t,e);return{uniqueIdentifier:r,...Fe?.length>0&&{resourceIdentifiers:Fe},kind:s,otherLanguages:Me,defaultLanguage:ye,...h&&{recordCreated:h},...d&&{recordPublished:d},recordUpdated:u,...g&&{resourceCreated:g},...m&&{resourceUpdated:m},...b&&{resourcePublished:b},title:o,abstract:a,ownerOrganization:i,contacts:l,contactsForResource:c,keywords:V,topics:M,licenses:G,legalConstraints:D,securityConstraints:X,otherConstraints:J,overviews:K,spatialExtents:He,onlineResources:pe,translations:e,...U&&{landingPage:U}}}readRecord(t){var e=this;return(0,lo.A)(function*(){const s=$6(j6(t)),i={},o=e.readers.kind(s,i);if("dataset"===o){const a=e.readers.status(s,i),l=e.readers.spatialRepresentation(s,i),c=e.readers.temporalExtents(s,i),u=e.readers.lineage(s,i),h=e.readers.updateFrequency(s,i);return e.afterRecordRead({...e.readBaseRecord(s,i),kind:o,status:a,lineage:u,...l&&{spatialRepresentation:l},temporalExtents:c,updateFrequency:h,translations:i})}if("reuse"===o){const a=e.readers.lineage(s,i),l=e.readers.temporalExtents(s,i),c=e.readers.reuseType(s,i);return e.afterRecordRead({...e.readBaseRecord(s,i),kind:o,lineage:a,temporalExtents:l,reuseType:c})}return e.afterRecordRead({...e.readBaseRecord(s,i),kind:o})})()}writeRecord(t,e){var r=this;return(0,lo.A)(function*(){let s,i;if(e){let a;const l=j6(e),c=yield r.readRecord(e);s=$6(l),i=u=>null===c||!S4(t[u],c[u])||a&&W_(u),a=i("otherLanguages")}else s=rn("gmd:MD_Metadata")(),i=()=>!0;return i("uniqueIdentifier")&&r.writers.uniqueIdentifier(t,s),i("reuseType")&&r.writers.reuseType(t,s),i("kind")&&r.writers.kind(t,s),i("defaultLanguage")&&r.writers.defaultLanguage(t,s),i("contacts")&&r.writers.contacts(t,s),i("ownerOrganization")&&r.writers.ownerOrganization(t,s),i("recordUpdated")&&r.writers.recordUpdated(t,s),i("recordCreated")&&r.writers.recordCreated(t,s),i("recordPublished")&&r.writers.recordPublished(t,s),(i("title")||i("translations"))&&r.writers.title(t,s),(i("abstract")||i("translations"))&&r.writers.abstract(t,s),i("resourceCreated")&&r.writers.resourceCreated(t,s),i("resourcePublished")&&r.writers.resourcePublished(t,s),i("resourceUpdated")&&r.writers.resourceUpdated(t,s),i("contactsForResource")&&r.writers.contactsForResource(t,s),i("keywords")&&r.writers.keywords(t,s),i("topics")&&r.writers.topics(t,s),i("legalConstraints")&&r.writers.legalConstraints(t,s),i("securityConstraints")&&r.writers.securityConstraints(t,s),i("licenses")&&r.writers.licenses(t,s),i("otherConstraints")&&r.writers.otherConstraints(t,s),i("onlineResources")&&r.writers.onlineResources(t,s),i("resourceIdentifiers")&&r.writers.resourceIdentifiers(t,s),"dataset"===t.kind&&(i("status")&&r.writers.status(t,s),i("updateFrequency")&&r.writers.updateFrequency(t,s),i("spatialRepresentation")&&r.writers.spatialRepresentation(t,s),i("overviews")&&r.writers.overviews(t,s),i("temporalExtents")&&r.writers.temporalExtents(t,s),i("spatialExtents")&&r.writers.spatialExtents(t,s),(i("lineage")||i("translations"))&&r.writers.lineage(t,s)),i("otherLanguages")&&r.writers.otherLanguages(t,s),r.beforeDocumentCreation(s),w0(U6(s))})()}}function G9(n){return N(Er("mdb:metadataScope","mdb:MD_MetadataScope","mdb:resourceScope","mcc:MD_ScopeCode"),xs("codeListValue"),fn(t=>V9(t)))(n)}function W9(n,t,e){const r=N(Pt("cit:positionName"),Cs()),s=N(Pt("cit:name"),Cs(),fn(d=>d?H9(d):[])),i=Er("cit:contactInfo","cit:CI_Contact"),o=N(i,Er("cit:address","cit:CI_Address")),a=N(o,Jr(N(Pt("cit:deliveryPoint",!1),Cs()),N(Pt("cit:city",!1),Cs()),N(Pt("cit:postalCode",!1),Cs()),N(Pt("cit:country",!1),Cs())),fn(d=>d.filter(g=>!!g).join(", "))),l=N(i,Er("cit:phone","cit:CI_Telephone","cit:number"),Cs()),c=N(o,Pt("cit:electronicMailAddress",!1),Cs()),u={name:"Missing Organization",translations:{}};let h={};return e&&(h={email:e.email,...e.address&&{address:e.address},...e.phone&&{phone:e.phone},...e.position&&{position:e.position},organization:t}),N(Jr(r,s,c,a,l),fn(([d,[g,m],b,V,M])=>({...h,email:b||h.email||"missing@missing.com",role:n,organization:t||u,...d&&{position:d},...g&&{firstName:g},...m&&{lastName:m},...V&&{address:V},...M&&{phone:M}})))}function iz(){const n=N(Pt("cit:role"),EM()),t=N(Jr(n,Xr("cit:party","cit:CI_Individual")),([r,s])=>s.map(W9(r))),e=N(Jr(n,Xr("cit:party","cit:CI_Organisation")),fn(([r,s])=>s.map(function FY(n){return N(Jr(function NY(){const n=N(Xr("cit:contactInfo","cit:CI_Contact","cit:onlineResource","cit:CI_OnlineResource","cit:linkage"),Wc(0),Jl());return N(Jr(N(Pt("cit:name",!1),ki("name")),n),fn(([[t,e],r])=>({name:t,...r&&{website:r},translations:e})))}(),W9(n),Xr("cit:individual","cit:CI_Individual")),fn(([t,e,r])=>r.length?r.map(s=>W9(n,t,e)(s)):[{email:e.email,...e.address&&{address:e.address},...e.phone&&{phone:e.phone},...e.position&&{position:e.position},organization:t,role:n}]))}(r))),n=>n.flat());return N(Jr(t,e),n=>n.flat())}function PY(n){return N(Er("mdb:metadataIdentifier","mcc:MD_Identifier","mcc:code"),Cs())(n)}function OY(n){const t=oz(n),e=az(n);return(t.filter(s=>"point_of_contact"===s.role)[0]||t[0]||e[0]).organization}function oz(n){return N(Xr("mdb:contact","cit:CI_Responsibility"),Mn(iz()),n=>n.flat())(n)}function az(n){return N(Jr(N(no(),Xr("mri:citation","cit:CI_Citation","cit:citedResponsibleParty")),N(no(),Cr("mri:pointOfContact",!1)),N(function BY(){return Er("mdb:distributionInfo","mrd:MD_Distribution")}(),Cr("mrd:distributorContact"))),n=>n.flat(),Mn(Pt("cit:CI_Responsibility",!1)),Mn(iz()),n=>n.flat())(n)}function kY(n){return N(Er("mdb:metadataLinkage","cit:CI_OnlineResource","cit:linkage"),Jl())(n)}function GY(n,t){return N(Er("mdb:resourceLineage","mrl:LI_Lineage","mrl:statement"),ki("lineage",t),fn(([e])=>e))(n)}function Z9(n){return N(Cr("mdb:dateInfo",!1),Ao(t=>N(Pt("cit:CI_DateTypeCode"),xs("codeListValue"))(t)===n),Wc(0),Pt("cit:date"),T9())}function WY(n){return Z9("revision")(n)}function ZY(n){return Z9("creation")(n)}function jY(n){return Z9("publication")(n)}function UY(n){return N(Er("mdb:metadataScope","mdb:MD_MetadataScope","mdb:resourceScope","mcc:MD_ScopeCode"),xs("codeListValue"),fn(t=>VM(t)))(n)}const $Y=N(j_("mrd:MD_Distribution"),Er("mrd:distributionFormat","mrd:MD_Format","mrd:formatSpecificationCitation","cit:CI_Citation","cit:title"),Cs(),fn(X_));function XY(n){let t;return t="dataset"===G9(n)?DM($Y):"service"===G9(n)?BM():NM(),N(Xr("mrd:distributionInfo","mrd:MD_Distribution"),Mn(t),n=>n.flat())(n)}function lz(){return N(Pt("lan:LanguageCode"),xs("codeListValue"),fn(n=>U4(n?.toLowerCase())??n))}function YY(n){return N(Pt("mdb:defaultLocale",!1),lz())(n)}function KY(n){return N(Cr("mdb:otherLocale",!1),Mn(lz()),fn(t=>t.filter(e=>null!==e)))(n)}function qY(n,t){N(Ys("mdb:metadataIdentifier","mcc:MD_Identifier","mcc:code"),ps(n.uniqueIdentifier))(t)}function cz(n,t){const e=TM(n);N(Ys("mdb:metadataScope","mdb:MD_MetadataScope","mdb:resourceScope","mcc:MD_ScopeCode"),bn("codeList","https://standards.iso.org/iso/19115/resources/Codelists/cat/codelists.xml#MD_ScopeCode"),bn("codeListValue",e),eo(e))(t)}function j9(n){return xa(N(Cr("mdb:dateInfo",!1),Ao(N(Pt("cit:CI_DateTypeCode"),xs("codeListValue"),fn(t=>t===n)))))}function U9(n,t){return Gt(N(rn("mdb:dateInfo"),Gs("cit:CI_Date"),Gt(N(rn("cit:date"),t5(n)),N(rn("cit:dateType"),Gs("cit:CI_DateTypeCode"),bn("codeList","https://standards.iso.org/iso/19115/resources/Codelists/cat/codelists.xml#CI_DateTypeCode"),bn("codeListValue",t),eo(t)))))}function JY(n,t){j9("revision")(t),U9(n.recordUpdated,"revision")(t)}function QY(n,t){j9("creation")(t),n.recordCreated&&U9(n.recordCreated,"creation")(t)}function eK(n,t){j9("publication")(t),n.recordPublished&&U9(n.recordPublished,"publication")(t)}function $9(n){return N(Ns(),Ys("mri:citation","cit:CI_Citation"),xa(N(Cr("cit:date",!1),Ao(N(Pt("cit:CI_DateTypeCode"),xs("codeListValue"),fn(t=>t===n))))))}function X9(n,t){return N(no(),Er("mri:citation","cit:CI_Citation"),Gt(N(rn("cit:date"),Gs("cit:CI_Date"),Gt(N(rn("cit:date"),t5(n)),N(rn("cit:dateType"),Gs("cit:CI_DateTypeCode"),bn("codeList","https://standards.iso.org/iso/19115/resources/Codelists/cat/codelists.xml#CI_DateTypeCode"),bn("codeListValue",t),eo(t))))))}function tK(n,t){$9("revision")(t),n.resourceUpdated&&X9(n.resourceUpdated,"revision")(t)}function nK(n,t){$9("creation")(t),n.resourceCreated&&X9(n.resourceCreated,"creation")(t)}function rK(n,t){$9("publication")(t),n.resourcePublished&&X9(n.resourcePublished,"publication")(t)}function sK(n,t){cz(n,t)}function Y9(n,t){const e=MM(n.firstName,n.lastName),r=N(rn("cit:individual"),Gs("cit:CI_Individual"),e?Gt(N(rn("cit:name"),ps(e))):ii,n.position?Gt(N(rn("cit:positionName"),ps(n.position))):ii),s=N(rn("cit:contactInfo"),Gs("cit:CI_Contact"),Gt(N(rn("cit:address"),Gs("cit:CI_Address"),Gt(N(rn("cit:electronicMailAddress"),ps(n.email))),n.address?Gt(N(rn("cit:deliveryPoint"),ps(n.address))):ii)),n.organization?.website?Gt(N(rn("cit:onlineResource"),Gs("cit:CI_OnlineResource"),Gs("cit:linkage"),ps(n.organization.website.toString()))):ii,n.phone?Gt(N(rn("cit:phone"),Gs("cit:CI_Telephone"),Gs("cit:number"),ps(n.phone))):ii),i=N(rn("cit:role"),Gs("cit:CI_RoleCode"),bn("codeList","https://standards.iso.org/iso/19115/resources/Codelists/cat/codelists.xml#CI_RoleCode"),bn("codeListValue",B9(n.role)),eo(B9(n.role))),o=N(rn("cit:party"),Gs("cit:CI_Organisation"),n.organization?.name?Gt(N(rn("cit:name"),ia(n.organization?.name,n.organization?.translations?.name,t))):ii,Gt(s,r));return Gt(N(rn("cit:CI_Responsibility"),Gt(i,o)))}function iK(n,t){N(Oi("mdb:contact"),Gt(...n.contacts.map(e=>N(rn("gmd:contact"),Y9(e,n.defaultLanguage)))))(t)}function oK(n,t){const e=n.contactsForResource.filter(s=>"distributor"!==s.role),r=n.contactsForResource.filter(s=>"distributor"===s.role);N(Ns(),Oi("mri:pointOfContact"),Gt(...e.map(s=>N(rn("mri:pointOfContact"),Y9(s,n.defaultLanguage)))))(t),r.length&&N(function iY(){return n=>Ys("gmd:distributionInfo","gmd:MD_Distribution")(n)}(),Oi("mrd:distributor"),Gs("mrd:distributor"),Gs("mrd:MD_Distributor"),Gt(...r.map(s=>N(rn("mrd:distributorContact"),Y9(s,n.defaultLanguage)))))(t)}function aK(n,t){N(Ys("mdb:metadataLinkage","cit:CI_OnlineResource","cit:linkage"),e5(n.landingPage))(t)}function lK(n,t){N(Ys("mdb:resourceLineage","mrl:LI_Lineage","mrl:statement"),ia(n.lineage,n.translations?.lineage,n.defaultLanguage))(t)}function cK(n,t){const e=QM(n.status);N(Ns(),Ys("mri:status","mcc:MD_ProgressCode"),bn("codeList","https://standards.iso.org/iso/19115/resources/Codelists/cat/codelists.xml#MD_ProgressCode"),bn("codeListValue",e),eo(e))(t)}function uK(n,t){n.spatialRepresentation?N(Ns(),Ys("mri:spatialRepresentationType","mcc:MD_SpatialRepresentationTypeCode"),bn("codeList","https://standards.iso.org/iso/19115/resources/Codelists/cat/codelists.xml#MD_SpatialRepresentationTypeCode"),bn("codeListValue",n.spatialRepresentation),eo(n.spatialRepresentation))(t):N(Ns(),Oi("mri:spatialRepresentationType"))(t)}function dK(n){return Gt(N(rn("mrd:distributionFormat"),Gs("mrd:MD_Format"),Gs("mrd:formatSpecificationCitation"),Gs("cit:CI_Citation"),Gs("cit:title"),ps(n)))}function pK(n,t){(function hK(n){N(Xr("mdb:distributionInfo","mrd:MD_Distribution"),Mn(N(xa(Cr("mrd:distributionFormat",!1)),xa(Cr("mrd:transferOptions",!1)))))(n),xa(N(Cr("mdb:distributionInfo",!1),Ao(N(Pt("mrd:MD_Distribution"),_4,fn(t=>0===t.length)))))(n)})(t),"service"!==n.kind?n.onlineResources.forEach((e,r)=>{N(Zc(N(Xr("gmd:distributionInfo","gmd:MD_Distribution"),Wc(r)),U_(tz())),nz(e,dK,0,n.defaultLanguage))(t)}):sz(n,t)}function uz(n){const t=z9(n.toLowerCase())??n;return N(ba("lan:PT_Locale"),bn("id",n.toUpperCase()),Ys("lan:language","gmd:LanguageCode"),bn("codeList","http://www.loc.gov/standards/iso639-2/"),bn("codeListValue",t))}function gK(n,t){N(ba("mdb:defaultLocale"),uz(n.defaultLanguage))(t)}function fK(n,t){Oi("mdb:otherLocale")(t),n.otherLanguages?.length&&Gt(...n.otherLanguages.map(e=>N(rn("mdb:otherLocale"),uz(e))))(t)}class K9 extends k9{constructor(){super(),this.readers.uniqueIdentifier=PY,this.readers.kind=G9,this.readers.recordUpdated=WY,this.readers.recordCreated=ZY,this.readers.recordPublished=jY,this.readers.contacts=oz,this.readers.contactsForResource=az,this.readers.ownerOrganization=OY,this.readers.landingPage=kY,this.readers.lineage=GY,this.readers.onlineResources=XY,this.readers.defaultLanguage=YY,this.readers.otherLanguages=KY,this.readers.reuseType=UY,this.writers.uniqueIdentifier=qY,this.writers.kind=cz,this.writers.recordUpdated=JY,this.writers.recordCreated=QY,this.writers.recordPublished=eK,this.writers.resourceUpdated=tK,this.writers.resourceCreated=nK,this.writers.resourcePublished=rK,this.writers.reuseType=sK,this.writers.contacts=iK,this.writers.contactsForResource=oK,this.writers.ownerOrganization=()=>{},this.writers.landingPage=aK,this.writers.lineage=lK,this.writers.onlineResources=pK,this.writers.status=cK,this.writers.spatialRepresentation=uK,this.writers.defaultLanguage=gK,this.writers.otherLanguages=fK}beforeDocumentCreation(t){!function Tj(n,t){(function e(r){r.name in t?r.name=t[r.name]:r.name&&Z_(r.name)in t&&(r.name=`${t[Z_(r.name)]}:${ql(r.name)}`),r.children&&r.children.forEach(e)})(n)}(t,{gmd:"mdb","gmd:characterEncoding":"lan:characterEncoding","gmd:MD_CharacterSetCode":"lan:MD_CharacterSetCode","gmd:MD_DataIdentification":"mri:MD_DataIdentification","gmd:citation":"mri:citation","gmd:abstract":"mri:abstract","gmd:title":"cit:title","gmd:CI_Citation":"cit:CI_Citation","gmx:Anchor":"gcx:Anchor","gmd:PT_Locale":"lan:PT_Locale","gmd:PT_FreeText":"lan:PT_FreeText","gmd:LanguageCode":"lan:LanguageCode","gmd:status":"mri:status","gmd:MD_ProgressCode":"mri:MD_ProgressCode","gmd:date":"cit:date","gmd:CI_Date":"cit:CI_Date","gmd:dateType":"cit:dateType","gmd:CI_DateTypeCode":"cit:CI_DateTypeCode","gmd:CI_Responsibility":"cit:CI_Responsibility","gmd:role":"cit:role","gmd:CI_RoleCode":"cit:CI_RoleCode","gmd:descriptiveKeywords":"mri:descriptiveKeywords","gmd:MD_Keywords":"mri:MD_Keywords","gmd:type":"mri:type","gmd:MD_KeywordTypeCode":"mri:MD_KeywordTypeCode","gmd:thesaurusName":"mri:thesaurusName","gmd:keyword":"mri:keyword","gmd:identifier":"cit:identifier","gmd:MD_Identifier":"mcc:MD_Identifier","gmd:code":"mcc:code","gmd:MD_Distribution":"mrd:MD_Distribution","gmd:transferOptions":"mrd:transferOptions","gmd:MD_DigitalTransferOptions":"mrd:MD_DigitalTransferOptions","gmd:onLine":"mrd:onLine","gmd:distributionFormat":"mrd:distributionFormat","gmd:MD_Format":"mrd:MD_Format","gmd:CI_OnlineResource":"cit:CI_OnlineResource","gmd:linkage":"cit:linkage","gmd:name":"cit:name","gmd:description":"cit:description","gmd:CI_OnLineFunctionCode":"cit:CI_OnLineFunctionCode","gmd:function":"cit:function","gmd:protocol":"cit:protocol","gmd:topicCategory":"mri:topicCategory","gmd:MD_TopicCategoryCode":"mri:MD_TopicCategoryCode","gmd:resourceMaintenance":"mri:resourceMaintenance","gmd:MD_MaintenanceInformation":"mmi:MD_MaintenanceInformation","gmd:userDefinedMaintenanceFrequency":"mmi:userDefinedMaintenanceFrequency","gts:TM_PeriodDuration":"gco:TM_PeriodDuration","gmd:resourceConstraints":"mri:resourceConstraints","gmd:MD_Constraints":"mco:MD_Constraints","gmd:MD_LegalConstraints":"mco:MD_LegalConstraints","gmd:MD_SecurityConstraints":"mco:MD_SecurityConstraints","gmd:useLimitation":"mco:useLimitation","gmd:useConstraints":"mco:useConstraints","gmd:accessConstraints":"mco:accessConstraints","gmd:otherConstraints":"mco:otherConstraints","gmd:MD_RestrictionCode":"mco:MD_RestrictionCode","gmd:classification":"mco:classification","gmd:MD_ClassificationCode":"mco:MD_ClassificationCode","gmd:graphicOverview":"mri:graphicOverview","gmd:MD_BrowseGraphic":"mcc:MD_BrowseGraphic","gmd:fileName":"mcc:fileName","gmd:fileDescription":"mcc:fileDescription","gmd:URL":"gco:CharacterString"})}writeRecord(t,e){var r=()=>super.writeRecord,s=this;return(0,lo.A)(function*(){let i=yield r().call(s,t,e);return i=i.replace('"http://www.isotc211.org/2005/gco"','"http://standards.iso.org/iso/19115/-3/gco/1.0"'),i})()}}var co=Ve(1752);function Mr(n,t){const e=t||{namedNode:r=>new co.A(r)};return function(r){return e.namedNode(n+(r||""))}}const xo=Mr("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),L0=(Mr("http://www.w3.org/2000/01/rdf-schema#"),Mr("http://xmlns.com/foaf/0.1/")),mr=(Mr("http://www.w3.org/2001/XMLSchema#"),Mr("http://www.w3.org/ns/dcat#")),Fs=Mr("http://purl.org/dc/terms/"),mK=Mr("http://www.w3.org/2004/02/skos/core#"),R0=(Mr("http://schema.org/"),Mr("https://spdx.org/rdf/terms/#"),Mr("http://www.w3.org/ns/adms#"),Mr("http://www.w3.org/ns/dqv#"),Mr("http://www.w3.org/2002/07/owl#"),Mr("http://www.w3.org/2006/vcard/ns#")),vK=(Mr("http://www.w3.org/2006/time#"),Mr("http://www.w3.org/ns/locn#"));var xt=Ve(1423),Ql=Ve(9423),So=Ve(9788),hn=Ve(9535),gs=Ve(1551);const ec={boolean:new co.A("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:new co.A("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:new co.A("http://www.w3.org/2001/XMLSchema#decimal"),double:new co.A("http://www.w3.org/2001/XMLSchema#double"),integer:new co.A("http://www.w3.org/2001/XMLSchema#integer"),langString:new co.A("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:new co.A("http://www.w3.org/2001/XMLSchema#string")};class Ws extends So.A{constructor(t,e,r){super(t),(0,xt.A)(this,"termType",hn.QW),(0,xt.A)(this,"classOrder",Ql.A.Literal),(0,xt.A)(this,"datatype",ec.string),(0,xt.A)(this,"isVar",0),(0,xt.A)(this,"language",""),e?(this.language=e,this.datatype=ec.langString):this.datatype=r?co.A.fromValue(r):ec.string}copy(){return new Ws(this.value,this.lang,this.datatype)}equals(t){return!!t&&this.termType===t.termType&&this.value===t.value&&this.language===t.language&&(!this.datatype&&!t.datatype||this.datatype&&this.datatype.equals(t.datatype))}get lang(){return this.language}set lang(t){this.language=t||""}toNT(){return Ws.toNT(this)}static toNT(t){if("number"==typeof t.value)return""+t.value;if("string"!=typeof t.value)throw new Error("Value of RDF literal is not string or number: "+t.value);var e=t.value;return e='"'+(e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/\"/g,'\\"')).replace(/\n/g,"\\n")).replace(/\r/g,"\\r"))+'"',t.language?e+="@"+t.language:t.datatype.equals(ec.string)||(e+="^^"+t.datatype.toCanonical()),e}toString(){return""+this.value}static fromBoolean(t){return new Ws(t?"1":"0",null,ec.boolean)}static fromDate(t){if(!(t instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");let e=function(s){return(""+(100+s)).slice(1,3)},r=t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"Z";return new Ws(r,null,ec.dateTime)}static fromNumber(t){if("number"!=typeof t)throw new TypeError("Invalid argument to Literal.fromNumber()");let e;const r=t.toString();return e=r.indexOf("e")<0&&Math.abs(t)<=Number.MAX_SAFE_INTEGER?Number.isInteger(t)?ec.integer:ec.decimal:ec.double,new Ws(r,null,e)}static fromValue(t){if((0,gs.c$)(t))return t;switch(typeof t){case"object":if(t instanceof Date)return Ws.fromDate(t);case"boolean":return Ws.fromBoolean(t);case"number":return Ws.fromNumber(t);case"string":return new Ws(t)}throw new Error("Can't make literal from "+t+" of type "+typeof t)}}class ro extends So.A{static getId(t){if(t){if("string"!=typeof t)throw new Error("Bad id argument to new blank node: "+t);if(t.includes("#")){let e=t.split("#");return e[e.length-1]}return t}return"n"+ro.nextId++}constructor(t){super(ro.getId(t)),(0,xt.A)(this,"termType",hn.$Q),(0,xt.A)(this,"classOrder",Ql.A.BlankNode),(0,xt.A)(this,"isBlank",1),(0,xt.A)(this,"isVar",1)}get id(){return this.value}set id(t){this.value=t}compareTerm(t){return this.classOrder<t.classOrder?-1:this.classOrder>t.classOrder?1:this.id<t.id?-1:this.id>t.id?1:0}copy(t){var e=new ro;return t.copyTo(this,e),e}toCanonical(){return ro.NTAnonymousNodePrefix+this.value}toString(){return ro.NTAnonymousNodePrefix+this.id}}(0,xt.A)(ro,"nextId",0),(0,xt.A)(ro,"NTAnonymousNodePrefix","_:");const D0="chrome:theSession";function hz(n){return typeof n>"u"||null===n||(0,gs.D0)(n)?n:Array.isArray(n)?new $a(n):Ws.fromValue(n)}new co.A(D0);class $a extends So.A{constructor(t){super((ro.nextId++).toString()),(0,xt.A)(this,"termType",hn.r0),(0,xt.A)(this,"classOrder",Ql.A.Collection),(0,xt.A)(this,"closed",!1),(0,xt.A)(this,"compareTerm",ro.prototype.compareTerm),(0,xt.A)(this,"elements",[]),(0,xt.A)(this,"isVar",0),t&&t.length>0&&t.forEach(e=>{this.elements.push(hz(e))})}get id(){return this.value}set id(t){this.value=t}append(t){return this.elements.push(t)}close(){return this.closed=!0,this.closed}shift(){return this.elements.shift()}substitute(t){const e=this.elements.map(r=>r.substitute(t));return new $a(e)}toNT(){return $a.toNT(this)}static toNT(t){return ro.NTAnonymousNodePrefix+t.id}toString(){return"("+this.elements.join(" ")+")"}unshift(t){return this.elements.unshift(t)}}(0,xt.A)($a,"termType",hn.r0);class q9 extends So.A{constructor(){super(""),(0,xt.A)(this,"value",""),(0,xt.A)(this,"termType",hn.ic),(0,xt.A)(this,"uri",D0)}toCanonical(){return this.value}toString(){return"DefaultGraph"}}function dz(n){return!!n&&n.termType===hn.ic}const wK=new q9;class tc{constructor(t,e,r,s){(0,xt.A)(this,"subject",void 0),(0,xt.A)(this,"predicate",void 0),(0,xt.A)(this,"object",void 0),(0,xt.A)(this,"graph",void 0),this.subject=So.A.fromValue(t),this.predicate=So.A.fromValue(e),this.object=So.A.fromValue(r),this.graph=null==s?wK:So.A.fromValue(s)}get why(){return this.graph}set why(t){this.graph=t}equals(t){return t.subject.equals(this.subject)&&t.predicate.equals(this.predicate)&&t.object.equals(this.object)&&t.graph.equals(this.graph)}substitute(t){return new tc(this.subject.substitute(t),this.predicate.substitute(t),this.object.substitute(t),dz(this.graph)?this.graph:this.graph.substitute(t))}toCanonical(){let t=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&this.graph.termType!==hn.ic&&t.push(this.graph.toCanonical()),t.join(" ")+" ."}toNT(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}toNQ(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT(),dz(this.graph)?"":this.graph.toNT()].join(" ")+" ."}toString(){return this.toNT()}}var pz=pz||console.log;function $c(n){var t;return(t=n.indexOf("#"))<0?n:n.slice(0,t)}function CK(n){var t=/[^\/]*\/\/([^\/]*)\//.exec(n);return t?t[1]:""}function Go(n,t){var e,r,s,o,a,l=t.indexOf("#");if(l>0&&(t=t.slice(0,l)),0===n.length)return t;if(0===n.indexOf("#"))return t+n;if(n.indexOf(":")>=0||(e=t.indexOf(":"),0===t.length))return n;if(e<0)return pz("Invalid base: "+t+" in join with given: "+n),n;if(r=t.slice(0,+e+1||9e9),0===n.indexOf("//"))return r+n;if(t.indexOf("//",e)===e+1){if((s=t.indexOf("/",e+3))<0)return t.length-e-3>0?t+"/"+n:r+n}else if((s=t.indexOf("/",e+1))<0)return t.length-e-1>0?t+"/"+n:r+n;if(0===n.indexOf("/"))return t.slice(0,s)+n;if((o=(a=t.slice(s)).lastIndexOf("/"))<0)return r+n;for(o>=0&&o<a.length-1&&(a=a.slice(0,+o+1||9e9)),a+=n;a.match(/[^\/]*\/\.\.\//);)a=a.replace(/[^\/]*\/\.\.\//,"");return a=(a=a.replace(/\.\//g,"")).replace(/\/\.$/,"/"),t.slice(0,s)+a}function gz(n){const t=n.indexOf(":");return t<0?null:n.slice(0,t)}function J9(n,t){var r,s,i,o,a,l,c,u,h,d,g,m,b=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!n)return t;if(n===t)return"";for(r=c=0,o=t.length;c<o&&t[r]===n[r];r=++c);if(n.slice(0,r).match(b)&&((s=t.indexOf("//"))<0&&(s=-2),i=t.indexOf("/",s+2),"/"!==t[i+1]&&"/"!==n[i+1]&&t.slice(0,i)===n.slice(0,i)))return t.slice(i);if("#"===t[r]&&n.length===r)return t.slice(r);for(;r>0&&"/"!==t[r-1];)r--;if(r<3||n.indexOf("//",r-2)>0||t.indexOf("//",r-2)>0||n.indexOf(":",r)>0)return t;for(l=0,u=0,a=(d=n.slice(r)).length;u<a;u++)"/"===d[u]&&l++;if(0===l&&r<t.length&&"#"===t[r])return"./"+t.slice(r);if(0===l&&r===t.length)return"./";if(m="",l>0)for(h=1,g=l;g>=1?h<=g:h>=g;g>=1?++h:--h)m+="../";return m+t.slice(r)}class nc extends So.A{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";super(t),(0,xt.A)(this,"termType",hn.P2),(0,xt.A)(this,"base","varid:"),(0,xt.A)(this,"classOrder",Ql.A.Variable),(0,xt.A)(this,"isVar",1),(0,xt.A)(this,"uri",void 0),this.base="varid:",this.uri=Go(t,this.base)}equals(t){return!!t&&this.termType===t.termType&&this.value===t.value}hashString(){return this.toString()}substitute(t){var e;return null!=(e=t[this.toNT()])?e:this}toString(){return nc.toString(this)}static toString(t){return t.uri.slice(0,t.base.length)===t.base?`?${t.uri.slice(t.base.length)}`:`?${t.uri}`}}let Wo=function(n){return n.collections="COLLECTIONS",n.defaultGraphType="DEFAULT_GRAPH_TYPE",n.equalsMethod="EQUALS_METHOD",n.id="ID",n.identity="IDENTITY",n.reversibleId="REVERSIBLE_ID",n.variableType="VARIABLE_TYPE",n}({});const fz=new q9,Xa={supports:{[Wo.collections]:!1,[Wo.defaultGraphType]:!1,[Wo.equalsMethod]:!0,[Wo.identity]:!1,[Wo.id]:!0,[Wo.reversibleId]:!1,[Wo.variableType]:!0},blankNode:n=>new ro(n),defaultGraph:()=>fz,equals(n,t){return n===t||!n||!t||((0,gs.aF)(n)||(0,gs.aF)(t)?!(!(0,gs.aF)(n)||!(0,gs.aF)(t))&&this.equals(n.subject,t.subject)&&this.equals(n.predicate,t.predicate)&&this.equals(n.object,t.object)&&this.equals(n.graph,t.graph):!(!(0,gs.D0)(n)||!(0,gs.D0)(t))&&this.id(n)===this.id(t))},id(n){if(!n)return"undefined";if((0,gs.aF)(n))return this.quadToNQ(n);switch(n.termType){case hn.ic:return"defaultGraph";case hn.P2:return nc.toString(n);default:const t=this.termToNQ(n);if(t)return t;throw new Error(`Can't id term with type '${n.termType}'`)}},isQuad:n=>n instanceof tc,literal(n,t){if("string"!=typeof n&&!t)return Ws.fromValue(n);const e="string"==typeof n?n:""+n;return"string"==typeof t?-1===t.indexOf(":")?new Ws(e,t):new Ws(e,null,this.namedNode(t)):new Ws(e,null,t)},namedNode:n=>new co.A(n),quad:(n,t,e,r)=>new tc(n,t,e,r||fz),triple(n,t,e,r){return this.quad(n,t,e,r)},quadToNQ(n){return`${this.termToNQ(n.subject)} ${this.termToNQ(n.predicate)} ${this.termToNQ(n.object)} ${this.termToNQ(n.graph)} .`},termToNQ(n){switch(n.termType){case hn.$Q:return"_:"+n.value;case hn.ic:return"";case hn.S:return"<http://www.w3.org/1999/02/22-rdf-syntax-ns#nil>";case hn.QW:return Ws.toNT(n);case hn.bD:case hn.Kk:return"<"+n.value+">";case hn.r0:return"("+n.elements.map(t=>this.termToNQ(t)).join(" ")+")";default:throw new Error(`Can't serialize nonstandard term type (was '${n.termType}')`)}},toNQ(n){return this.isQuad(n)?this.quadToNQ(n):this.termToNQ(n)},variable:n=>new nc(n)},Gi={debug(n){},warn(n){},info(n){},error(n){},success(n){},msg(n){}};var Zo=Ve(9223);function mz(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xa;return{boolean:n.namedNode("http://www.w3.org/2001/XMLSchema#boolean"),dateTime:n.namedNode("http://www.w3.org/2001/XMLSchema#dateTime"),decimal:n.namedNode("http://www.w3.org/2001/XMLSchema#decimal"),double:n.namedNode("http://www.w3.org/2001/XMLSchema#double"),integer:n.namedNode("http://www.w3.org/2001/XMLSchema#integer"),langString:n.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),string:n.namedNode("http://www.w3.org/2001/XMLSchema#string")}}mz(Xa);var yK=Ve(974),vz=Ve.n(yK),IK=Ve(6998);class Q9{constructor(t){(0,xt.A)(this,"_notQNameChars","\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~"),(0,xt.A)(this,"_notNameChars",this._notQNameChars+":"),(0,xt.A)(this,"validPrefix",new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/)),(0,xt.A)(this,"forbidden1",new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm)),(0,xt.A)(this,"forbidden3",new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm)),this.flags="",this.base=null,this.prefixes=[],this.namespaces=[];const e=Object.keys(vz()());for(const r in e){const s=vz()()[e[r]](""),i=e[r];this.prefixes[s]=i,this.namespaces[i]=s}this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=t,this.rdfFactory=t.rdfFactory||Xa,this.xsd=mz(this.rdfFactory)}setBase(t){return this.base=t,this}setFlags(t){return this.flags=t||"",this}toStr(t){var e=t.toNT();return"Graph"===t.termType&&(this.formulas[e]=t),e}fromStr(t){if("{"===t[0]){var e=this.formulas[t];return e||console.log("No formula object for "+t),e}return this.store.fromNT(t)}setNamespaces(t){for(var e in t)this.setPrefix(e,t[e]);return this}setPrefix(t,e){if("default"!==t.slice(0,7)&&"ns"!==t.slice(0,2)&&t&&e){for(let r in this.prefixes)this.prefixes[r]==t&&delete this.prefixes[r];this.prefixes[e]=t,this.namespaces[t]=e}}suggestPrefix(t,e){"default"!==t.slice(0,7)&&"ns"!==t.slice(0,2)&&(!t||!e||t in this.namespaces||e in this.prefixes||(this.prefixes[e]=t,this.namespaces[t]=e))}suggestNamespaces(t){for(var e in t)this.suggestPrefix(e,t[e]);return this}checkIntegrity(){var t,e;for(t in this.namespaces)if(this.prefixes[this.namespaces[t]]!==t)throw new Error("Serializer integity error 1: "+t+", "+this.namespaces[t]+", "+this.prefixes[this.namespaces[t]]+"!");for(e in this.prefixes)if(this.namespaces[this.prefixes[e]]!==e)throw new Error("Serializer integity error 2: "+e+", "+this.prefixs[e]+", "+this.namespaces[this.prefixes[e]]+"!")}makeUpPrefix(t){var e=t,s=function r(l){return!(!this.validPrefix.test(l)||"ns"===l||l in this.namespaces)&&(this.prefixes[t]=l,this.namespaces[l]=t,l)}.bind(this);"#/".indexOf(e[e.length-1])>=0&&(e=e.slice(0,-1));var i=e.lastIndexOf("/");i>=0&&(e=e.slice(i+1));for(var o=0;o<e.length&&this.prefixchars.indexOf(e[o]);)o++;if((e=e.slice(0,o)).length<6&&s(e))return e;if(s(e.slice(0,3)))return e.slice(0,3);if(s(e.slice(0,2)))return e.slice(0,2);if(s(e.slice(0,4)))return e.slice(0,4);if(s(e.slice(0,1)))return e.slice(0,1);if(s(e.slice(0,5)))return e.slice(0,5);this.validPrefix.test(e)||(e="n");for(var a=0;;a++)if(s(e.slice(0,3)+a))return e.slice(0,3)+a}rootSubjects(t){for(var e={},r={},s={},i=0;i<t.length;i++){var o=t[i],a=function(b){e.hasOwnProperty(b)||(e[b]=[]),e[b].push(o.subject)};[o.subject,o.predicate,o.object].map(function(b){"BlankNode"===b.termType?s[b.toNT()]=!0:"Collection"===b.termType&&b.elements.forEach(function(V){a(V)})}),a(t[i].object);var c=r[this.toStr(o.subject)];c||(c=[]),c.push(o),r[this.toStr(o.subject)]=c}var u=[];for(var h in r)if(r.hasOwnProperty(h)){var d=this.fromStr(h);if("BlankNode"!==d.termType||!e[d]||1!==e[d].length){u.push(d);continue}}this.incoming=e;for(var g={},m=0;m<u.length;m++)g[u[m].toNT()]=!0;return{roots:u,subjects:r,rootsHash:g,incoming:e}}toN3(t){return this.statementsToN3(t.statements)}explicitURI(t){return"<"+(t=this.flags.indexOf("r")<0&&this.base?J9(this.base,t):this.flags.indexOf("u")>=0?function bK(n){for(var e,t="",r=0;r<n.length;r++)(e=n.charCodeAt(r))>65535?t+="\\U"+("00000000"+e.toString(16)).slice(-8):t+=e>126?"\\u"+("0000"+e.toString(16)).slice(-4):n[r];return t}(t):function AK(n){return encodeURI(n)}(decodeURI(t)))+">"}statementsToNTriples(t){var e=t.slice();e.sort();for(var r="",s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i=this,o=this.store,a=this.rdfFactory,l=function(d){if("Collection"!==d.termType)return i.atomicTermToN3(d);for(var g=d.elements,m=o.sym(s+"nill"),b=g.length-1;b>=0;b--){var V=a.blankNode();r+=l(V)+" "+l(o.sym(s+"first"))+" "+l(g[b])+".\n",r+=l(V)+" "+l(o.sym(s+"rest"))+" "+l(m)+".\n",m=V}return i.atomicTermToN3(m)},c=0;c<e.length;c++){var u=e[c],h="";h+=l(u.subject)+" ",h+=l(u.predicate)+" ",h+=l(u.object)+" ",this.flags.indexOf("q")>=0&&(h+=l(u.why)+" "),r+=h+=".\n"}return r}statementsToN3(t){var s=this.store,i={"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"aaa:00"};t.sort(function(U,pe){return Zo.VQ(U,pe,s,i)}),this.base&&!this.defaultNamespace&&(this.defaultNamespace=this.base+"#");var a={};this.flags.indexOf("s")<0&&(a["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(a["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(a["http://www.w3.org/2000/10/swap/log#implies"]="=>");var l=function(U){for(var pe="",Me=0;Me<U;Me++)pe+=" ";return pe},c=function(U){for(var pe="",Me=0;Me<U.length;Me++){var ye=U[Me],Fe="string"==typeof ye?ye:c(ye);if(0!==Me){var He=pe.slice(-1)||" ";","===Fe||";"===Fe||"."===Fe&&!"0123456789.:".includes(He)||(pe+=" ")}pe+=Fe}return pe},u=function(U,pe){var Me="",ye=1e5;void 0===pe&&(pe=-1);for(var Fe=0;Fe<U.length;Fe++){var He=U[Fe];if("string"!=typeof He){var ht=u(He,pe+1);if(ht.length<10*(80-4*pe)&&ht.indexOf('"""')<0){var dt=c(He);dt.length<80-4*pe&&(He=dt,ht="")}ht&&(ye=1e4),Me+=ht}if("string"==typeof He){if(1===He.length&&"\n"===Me.slice(-1)&&",.;".indexOf(He)>=0){Me=Me.slice(0,-1),"."==He&&"0123456789.:".includes(Me.charAt(Me.length-1))&&(Me+=" ",ye+=1),Me+=He+"\n",ye+=1;continue}if(ye<4*pe+4||ye+He.length+1<80&&";.".indexOf(Me[Me.length-2])<0)Me=Me.slice(0,-1)+" "+He+"\n",ye+=He.length+1;else{let Ke=l(4*pe)+He;Me+=Ke+"\n",ye=Ke.length,pe<0&&(Me+="\n",ye=1e5)}}}return Me},d=function h(U){for(var pe=this.rootSubjects(U),Me=pe.roots,ye=[],Fe=0;Fe<Me.length;Fe++)ye.push(g(Me[Fe],pe));return ye}.bind(this);function g(U,pe){return"BlankNode"!==U.termType||pe.incoming[U]?[J(U,pe)].concat([b(U,pe)]).concat(["."]):M(U,pe,!0).concat(["."])}var b=function m(U,pe){var Me=[],ye=null,Fe=pe.subjects[this.toStr(U)]||[];if(typeof Fe>"u")throw new Error("Cant find statements for "+U);for(var He=[],ht=0;ht<Fe.length;ht++){var dt=Fe[ht];dt.predicate.uri===ye?He.push(","):(ye&&(Me=Me.concat([He]).concat([";"]),He=[]),Me.push(a[dt.predicate.uri]?a[dt.predicate.uri]:J(dt.predicate,pe))),ye=dt.predicate.uri,He.push(M(dt.object,pe))}return Me.concat([He])}.bind(this),M=function V(U,pe,Me){return"BlankNode"!==U.termType||!Me&&void 0!==pe.rootsHash[U.toNT()]?J(U,pe):pe.subjects[this.toStr(U)]?["[",b(U,pe),"]"]:"[]"}.bind(this);Q9.prototype.termToN3=J;var J=function D(U,pe){var Me,ye;switch(U.termType){case"Graph":return(ye=(ye=["{"]).concat(d(U.statements))).concat(["}"]);case"Collection":for(ye=["("],Me=0;Me<U.elements.length;Me++)ye.push([M(U.elements[Me],pe)]);return ye.push(")"),ye;default:return this.atomicTermToN3(U)}}.bind(this),G=function X(){var U="";for(var pe in this.flags.indexOf("d")<0&&this.defaultNamespace&&(U+="@prefix : "+this.explicitURI(this.defaultNamespace)+".\n"),this.prefixes)this.prefixes.hasOwnProperty(pe)&&this.namespacesUsed[pe]&&(U+="@prefix "+this.prefixes[pe]+": "+this.explicitURI(pe)+".\n");return U+"\n"}.bind(this),K=d(t);return G()+u(K)}atomicTermToN3(t,e){switch(t.termType){case"BlankNode":case"Variable":return t.toNT();case"Literal":var r=t.value;if("string"!=typeof r)throw new TypeError("Value of RDF literal node must be a string");if(t.datatype&&this.flags.indexOf("x")<0)switch(t.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return r;case"http://www.w3.org/2001/XMLSchema#decimal":return r.indexOf(".")<0&&(r+=".0"),r;case"http://www.w3.org/2001/XMLSchema#double":{const i=r.toLowerCase().indexOf("e")>0;return r.indexOf(".")<0&&!i&&(r+=".0"),i||(r+="e0"),r}case"http://www.w3.org/2001/XMLSchema#boolean":return"1"===t.value?"true":"false"}var s=this.stringToN3(t.value,this.flags);return t.language?s+="@"+t.language:t.datatype.equals(this.xsd.string)||(s+="^^"+this.atomicTermToN3(t.datatype,e)),s;case"NamedNode":return this.symbolToN3(t);case"DefaultGraph":return"";default:throw new Error("Internal: atomicTermToN3 cannot handle "+t+" of termType: "+t.termType)}}stringToN3(t,e){e||(e="e");var s,i,o,a,l,r="";for(t.length>20&&'"'!==t.slice(-1)&&e.indexOf("n")<0&&(t.indexOf("\n")>0||t.indexOf('"')>0)?(a='"""',l=this.forbidden3):(a='"',l=this.forbidden1),s=0;s<t.length&&(l.lastIndex=0,null!=l.exec(t.slice(s)));){r+=t.slice(s,i=s+l.lastIndex-1);var u=t[i];'"'===u&&'"""'===a&&'"""'!==t.slice(i,i+3)?r+=u:(o='\b\f\r\t\v\n\\"'.indexOf(u))>=0?r+="\\"+'bfrtvn\\"'[o]:e.indexOf("e")>=0?r+="\\u"+("000"+u.charCodeAt(0).toString(16).toLowerCase()).slice(-4):r+=u,s=i+1}return a+r+t.slice(s)+a}symbolToN3(t){var e=t.uri,r=e.indexOf("#");if(r<0&&this.flags.indexOf("/")<0&&(r=e.lastIndexOf("/")),r>=0&&this.flags.indexOf("p")<0&&(0===e.indexOf("http")||0===e.indexOf("ws")||0===e.indexOf("file"))){for(var s=!0,i=r+1;i<e.length;i++)if(this._notNameChars.indexOf(e[i])>=0){s=!1;break}if(s){var o=e.slice(r+1),a=e.slice(0,r+1);if(this.defaultNamespace&&this.defaultNamespace===a&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(o)<0?o:":"+o;var l=this.prefixes[a];if(l||(l=this.makeUpPrefix(a)),l)return this.namespacesUsed[a]=!0,l+":"+o}}return this.explicitURI(e)}writeStore(t){var e=this.store,r=e.fetcher,s=r&&r.appNode,i=this.store.index[3];for(var o in i){var a=e.fromNT(o);s&&a.equals(s)||t("\n"+this.atomicTermToN3(a)+" "+this.atomicTermToN3(e.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(e.statementsMatching(void 0,void 0,void 0,a))+" }.\n")}e.statementsMatching(void 0,e.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(u){t("\n<"+u.object.value+"> log:metadata {\n");var h=e.statementsMatching(void 0,void 0,void 0,u.subject);t(this.statementsToN3(this.statementsToN3(h))),t("}.\n")});var l=[];s&&l.push(s);var c=[];l.map(function(u){c=c.concat(e.statementsMatching(void 0,void 0,void 0,u))}),t(this.statementsToN3(c))}statementsToXML(t){var s=[];s["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var i="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",o=function(ye){for(var Fe="",He=0;He<ye;He++)Fe+=" ";return Fe},a=function(ye){for(var Fe="",He=0;He<ye.length;He++){var ht=ye[He];Fe+="string"==typeof ht?ht:a(ht)}return Fe},l=function(ye,Fe){var ht,He="",dt=1e5;Fe||(Fe=0);for(var Ke=0;Ke<ye.length;Ke++){var Zt=ye[Ke];if("string"!=typeof Zt){var dn=l(Zt,Fe+1);dn.length<10*(80-4*Fe)&&dn.indexOf('"""')<0&&(ht=a(Zt)).length<80-4*Fe&&(Zt="   "+ht,dn=""),dn&&(dt=1e4),He+=dn}"string"==typeof Zt&&(dt<4*Fe+4?(He=He.slice(0,-1)+" "+Zt+"\n",dt+=Zt.length+1):(He+=(ht=o(4*Fe)+Zt)+"\n",dt=ht.length))}return He},u=function c(ye){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var Fe=this.rootSubjects(ye),He=Fe.roots,ht=[],dt=0;dt<He.length;dt++)ht.push(b(He[dt],Fe));return ht}.bind(this);function h(ye){return typeof ye>"u"?"@@@undefined@@@@":ye.replace(/[&<"]/g,function(Fe){switch(Fe[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}var g=function d(ye){return h(this.base?J9(this.base,ye.uri):ye.uri)}.bind(this),b=function m(ye,Fe){var ht,dt,Ke,Zt,He=[],dn=Fe.subjects[this.toStr(ye)];if(typeof dn>"u")return D(ye,Fe);dn.sort(function(bi,Zi){var po=bi.predicate.uri,ai=Zi.predicate.uri;if(po.substring(0,44)===i||ai.substring(0,44)===i)return po.localeCompare(ai);var El=po.substring(44),zo=ai.substring(44),Ll=parseInt(El,10),Ch=parseInt(zo,10);return isNaN(Ll)||isNaN(Ch)||Ll!==El||Ch!==zo?po.localeCompare(ai):Ll-Ch});for(var Is=0;Is<dn.length;Is++)if("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"!==(Ke=dn[Is]).predicate.uri||ht||"NamedNode"!==Ke.object.termType){if((Zt=Ke.predicate).uri.substr(0,44)===i){var Ms=Zt.uri.substr(44);Ms===parseInt(Ms,10).toString()&&(Zt=this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(dt=X(Zt),Ke.object.termType){case"BlankNode":He=He.concat(1===Fe.incoming[Ke.object].length?["<"+dt+' rdf:parseType="Resource">',b(Ke.object,Fe),"</"+dt+">"]:["<"+dt+' rdf:nodeID="'+Ke.object.toNT().slice(2)+'"/>']);break;case"NamedNode":He=He.concat(["<"+dt+' rdf:resource="'+g(Ke.object)+'"/>']);break;case"Literal":He=He.concat(["<"+dt+(Ke.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+h(Ke.object.datatype.uri)+'"')+(Ke.object.language?' xml:lang="'+Ke.object.language+'"':"")+">"+h(Ke.object.value)+"</"+dt+">"]);break;case"Collection":He=He.concat(["<"+dt+' rdf:parseType="Collection">',V(Ke.object,Fe),"</"+dt+">"]);break;default:throw new Error("Can't serialize object of type "+Ke.object.termType+" into XML")}}else ht=Ke.object;var Vs=ht?X(ht):"rdf:Description",Ai="";return"BlankNode"===ye.termType?(!Fe.incoming[ye]||1!==Fe.incoming[ye].length)&&(Ai=' rdf:nodeID="'+ye.toNT().slice(2)+'"'):Ai=' rdf:about="'+g(ye)+'"',["<"+Vs+Ai+">"].concat([He]).concat(["</"+Vs+">"])}.bind(this);function V(ye,Fe){for(var He=[],ht=0;ht<ye.elements.length;ht++)He.push(b(ye.elements[ht],Fe));return He}var D=function M(ye,Fe){var He=[],ht=Fe.subjects[this.toStr(ye)];if(!ht)return He;ht.sort();for(var dt=0;dt<ht.length;dt++){var Ke=ht[dt];switch(Ke.object.termType){case"BlankNode":He=Fe.rootsHash[Ke.object.toNT()]?He.concat(["<"+X(Ke.predicate)+' rdf:nodeID="'+Ke.object.toNT().slice(2)+'">',"</"+X(Ke.predicate)+">"]):He.concat(["<"+X(Ke.predicate)+' rdf:parseType="Resource">',D(Ke.object,Fe),"</"+X(Ke.predicate)+">"]);break;case"NamedNode":He=He.concat(["<"+X(Ke.predicate)+' rdf:resource="'+g(Ke.object)+'"/>']);break;case"Literal":He=He.concat(["<"+X(Ke.predicate)+(Ke.object.datatype.equals(this.xsd.string)?"":' rdf:datatype="'+h(Ke.object.datatype.value)+'"')+(Ke.object.language?' xml:lang="'+Ke.object.language+'"':"")+">"+h(Ke.object.value)+"</"+X(Ke.predicate)+">"]);break;case"Collection":He=He.concat(["<"+X(Ke.predicate)+' rdf:parseType="Collection">',V(Ke.object,Fe),"</"+X(Ke.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+Ke.object.termType+" into XML")}}return He}.bind(this),X=function J(ye){var Fe=ye.uri,He=Fe.indexOf("#");if(He<0&&this.flags.indexOf("/")<0&&(He=Fe.lastIndexOf("/")),He<0)throw new Error("Cannot make qname out of <"+Fe+">");for(var ht=He+1;ht<Fe.length;ht++)if(this._notNameChars.indexOf(Fe[ht])>=0)throw new Error('Invalid character "'+Fe[ht]+'" cannot be in XML qname for URI: '+Fe);var dt=Fe.slice(He+1),Ke=Fe.slice(0,He+1);if(this.defaultNamespace&&this.defaultNamespace===Ke&&this.flags.indexOf("d")<0)return dt;var Zt=this.prefixes[Ke];return Zt||(Zt=this.makeUpPrefix(Ke)),s[Ke]=!0,Zt+":"+dt}.bind(this),G=u(t),K="<rdf:RDF";for(var U in this.defaultNamespace&&(K+=' xmlns="'+h(this.defaultNamespace)+'"'),s)if(s.hasOwnProperty(U)){var pe=this.base&&this.flags.includes("z")?J9(this.base,U):U;K+="\n xmlns:"+this.prefixes[U]+'="'+h(pe)+'"'}return l([K+=">",G,"</rdf:RDF>"],-1)}statementsToJsonld(t){const e=this.statementsToN3(t),r=IK.parse(e);return JSON.stringify(r,null,2)}}function r5(n,t,e,r,s,i){e=e||n?.value;const o=i||{};r=r||hn.sT;try{var l=function wz(n){return new Q9(n)}(t);o.flags&&l.setFlags(o.flags);var c=t.statementsMatching(void 0,void 0,void 0,n);switch("namespaces"in t&&l.suggestNamespaces(t.namespaces),o.namespaces&&l.setNamespaces(o.namespaces),l.setBase(e),r){case hn.JG:return u(null,l.statementsToXML(c));case hn.ny:case hn.MG:return u(null,l.statementsToN3(c));case hn.sT:case hn.hu:return l.setFlags("si"),u(null,l.statementsToN3(c));case hn.bM:return l.setFlags("deinprstux"),u(null,l.statementsToNTriples(c));case hn.i2:return l.setFlags("si dr"),u(null,l.statementsToJsonld(c));case hn._0:case hn.BR:return l.setFlags("deinprstux q"),u(null,l.statementsToNTriples(c));default:throw new Error("Serialize: Content-type "+r+" not supported for data write.")}}catch(h){if(s)return s(h,void 0);throw h}function u(h,d){return s?void s(h,d):d}}const xK=["blankNode","defaultGraph","literal","namedNode","quad","variable","supports"],s5={first:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",rest:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",nil:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};function Cz(n,t,e){const r=[];return e.reduce((s,i,o,a)=>{let l;return r.push(n.quad(s,n.namedNode(s5.first),a[o])),o<a.length-1?(l=n.blankNode(),r.push(n.quad(s,n.namedNode(s5.rest),l))):r.push(n.quad(s,n.namedNode(s5.rest),n.namedNode(s5.nil))),l},t),r}function Sa(n,t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var r=n.length;for(e<0&&(e=r+e);e<r;e++)if(n[e]===t)return e;return-1}class B0 extends So.A{constructor(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};super(""),t=this,this.statements=e,this.constraints=r,this.initBindings=s,this.optional=i,(0,xt.A)(this,"termType",hn.bD),(0,xt.A)(this,"classOrder",Ql.A.Graph),(0,xt.A)(this,"fetcher",void 0),(0,xt.A)(this,"isVar",0),(0,xt.A)(this,"ns",Mr),(0,xt.A)(this,"rdfFactory",void 0),this.rdfFactory=o&&o.rdfFactory||Xa;for(const a of xK)this[a]=function(){return t.rdfFactory[a](...arguments)}}add(t,e,r,s){return 1===arguments.length&&t.forEach(i=>this.add(i.subject,i.predicate,i.object,i.graph)),this.statements.push(this.rdfFactory.quad(t,e,r,s))}addStatement(t){return this.add(t)}bnode(t){return this.rdfFactory.blankNode(t)}addAll(t){t.forEach(e=>{this.add(e.subject,e.predicate,e.object,e.graph)})}any(t,e,r,s){const i=this.anyStatementMatching(t,e,r,s);return null==i?null:null==t?i.subject:null==e?i.predicate:null==r?i.object:null}anyValue(t,e,r,s){const i=this.any(t,e,r,s);return i?i.value:void 0}anyJS(t,e,r,s){const i=this.any(t,e,r,s);return i?So.A.toJS(i):void 0}anyStatementMatching(t,e,r,s){let i=this.statementsMatching(t,e,r,s,!0);if(i&&0!==i.length)return i[0]}id(t){return this.rdfFactory.id(t)}statementsMatching(t,e,r,s,i){const o=this.statements.filter(a=>(!t||t.equals(a.subject))&&(!e||e.equals(a.predicate))&&(!r||r.equals(a.object))&&(!s||s.equals(a.graph)));return i?0===o.length?[]:[o[0]]:o}bottomTypeURIs(t){let e,r,s,i,o,a,l,c;e=[];for(let u in t)if(t.hasOwnProperty(u)){for(c=t[u],l=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.rdfFactory.namedNode(u)),r=!0,i=0,o=l.length;i<o;i++)if(s=l[i],a=s.uri,a in t){r=!1;break}r&&(e[u]=c)}return e}collection(){return new $a}each(t,e,r,s){const i=[];let o=this.statementsMatching(t,e,r,s,!1);if(null==t)for(let a=0,l=o.length;a<l;a++)i.push(o[a].subject);else if(null==e)for(let a=0,l=o.length;a<l;a++)i.push(o[a].predicate);else if(null==r)for(let a=0,l=o.length;a<l;a++)i.push(o[a].object);else if(null==s)for(let a=0,l=o.length;a<l;a++)i.push(new co.A(o[a].graph.value));return i}equals(t){return!!t&&this.hashString()===t.hashString()}findMembersNT(t){let e,r,s,i,o,a,l,c,u,h,d,g,m,b;g={},g[t.toNT()]=!0,i={},a=this.transitiveClosure(g,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(let V in a)if(a.hasOwnProperty(V)){l=this.statementsMatching(void 0,this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(V));for(let M=0,D=l.length;M<D;M++)m=l[M],i[m.subject.toNT()]=m;c=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(V));for(let M=0,D=c.length;M<D;M++)for(o=c[M],u=this.statementsMatching(void 0,o),s=0,e=u.length;s<e;s++)m=u[s],i[m.subject.toNT()]=m;h=this.each(void 0,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(V));for(let M=0,D=h.length;M<D;M++)for(o=h[M],d=this.statementsMatching(void 0,o),b=0,r=d.length;b<r;b++)m=d[b],i[m.object.toNT()]=m}return i}findMemberURIs(t){return this.NTtoURI(this.findMembersNT(t))}findSubClassesNT(t){let e={};return e[t.toNT()]=!0,this.transitiveClosure(e,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}findSuperClassesNT(t){let e={};return e[t.toNT()]=!0,this.transitiveClosure(e,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}findTypesNT(t){let e,r,s,i,o,a,l,c,u;s="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",u=[],i=this.statementsMatching(t,void 0,void 0);for(let h=0,d=i.length;h<d;h++)if(c=i[h],"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===c.predicate.uri)u[c.object.toNT()]=c;else{o=this.each(c.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#domain"));for(let g=0,m=o.length;g<m;g++)r=o[g],u[r.toNT()]=c}a=this.statementsMatching(void 0,void 0,t);for(let h=0,d=a.length;h<d;h++){c=a[h],l=this.each(c.predicate,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#range"));for(let g=0,m=l.length;g<m;g++)e=l[g],u[e.toNT()]=c}return this.transitiveClosure(u,this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}findTypeURIs(t){return this.NTtoURI(this.findTypesNT(t))}connectedStatements(t,e,r){r=r||[];let s=[t],i={},o={},a=[],l=this,c=function(u){let h=function(g){"BlankNode"===g.termType&&!i[g.value]&&(i[g.value]=!0,s.push(g))},d=l.statementsMatching(null,null,u,e).concat(l.statementsMatching(u,null,null,e));d=d.filter(function(g){if(r[g.predicate.value])return!1;let m=g.toNT();return!o[m]&&(o[m]=!0,!0)}),d.forEach(function(g){h(g.subject),h(g.object)}),a=a.concat(d)};for(;s.length;)c(s.shift());return a}formula(t){return new B0}fromNT(t){let e,r,s;switch(t[0]){case"<":return this.sym(t.slice(1,-1));case'"':if(s=void 0,e=void 0,r=t.lastIndexOf('"'),r<t.length-1)if("@"===t[r+1])s=t.slice(r+2);else{if("^^"!==t.slice(r+1,r+3))throw new Error("Can't convert string from NT: "+t);e=this.fromNT(t.slice(r+3))}return t=(t=(t=(t=t.slice(1,r)).replace(/\\"/g,'"')).replace(/\\n/g,"\n")).replace(/\\\\/g,"\\"),this.rdfFactory.literal(t,s||e);case"_":return this.rdfFactory.blankNode(t.slice(2));case"?":return new nc(t.slice(1))}throw new Error("Can't convert from NT: "+t)}holds(t,e,r,s){let i;if(1===arguments.length){if(!t)return!0;if(t instanceof Array){for(i=0;i<t.length;i++)if(!this.holds(t[i]))return!1;return!0}if((0,gs.SH)(t))return this.holds(t.subject,t.predicate,t.object,t.graph);if(t.statements)return this.holds(t.statements)}return null!=this.anyStatementMatching(t,e,r,s)}holdsStatement(t){return this.holds(t.subject,t.predicate,t.object,t.graph)}list(t,e){if(e.rdfFactory.supports.COLLECTIONS){const r=e.rdfFactory.collection();return t.forEach(function(s){r.append(s)}),r}{const r=e.rdfFactory.blankNode(),s=Cz(e.rdfFactory,r,t);return e.addAll(s),r}}NTtoURI(t){let e,r,s={};for(e in t)t.hasOwnProperty(e)&&(r=t[e],"<"===e[0]&&(s[e.slice(1,-1)]=r));return s}serialize(t,e,r,s){return r5(r,this,t,e,void 0,s)}substitute(t){let e=this.statements.map(function(s){return s.substitute(t)});const r=new B0;return r.addAll(e),r}sym(t,e){if(e)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return this.rdfFactory.namedNode(t)}the(t,e,r,s){let i=this.any(t,e,r,s);return null==i&&Gi.error("No value found for the() {"+t+" "+e+" "+r+"}."),i}transitiveClosure(t,e,r){let s,i,o,a,l,c,u={};Object.assign(u,t);let h={};for(;;){if(c=function(){for(let d in u)if(u.hasOwnProperty(d))return d}(),null==c)return h;for(l=r?this.each(void 0,e,this.fromNT(c)):this.each(this.fromNT(c),e),i=0,o=l.length;i<o;i++)s=l[i],a=s.toNT(),!(a in h)&&(a in u||(u[a]=u[c]));h[c]=u[c],delete u[c]}}topTypeURIs(t){let e,r,s,i,o,a,l,c;for(s in l=[],t)if(t.hasOwnProperty(s)){for(c=t[s],o=0,a=this.each(this.rdfFactory.namedNode(s),this.rdfFactory.namedNode("http://www.w3.org/2000/01/rdf-schema#subClassOf")),e=0,i=a.length;e<i;e++)if(r=a[e],"http://www.w3.org/2000/01/rdf-schema#Resource"!==r.uri){o++;break}o||(l[s]=c)}return l["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete l["http://www.w3.org/2000/01/rdf-schema#Resource"],l["http://www.w3.org/2002/07/owl#Thing"]&&delete l["http://www.w3.org/2002/07/owl#Thing"],l}toString(){return"{"+this.statements.join("\n")+"}"}variable(t){return new nc(t)}whether(t,e,r,s){return this.statementsMatching(t,e,r,s,!1).length}}So.A.fromValue=hz;const rc=So.A,Zu={xsd:Mr("http://www.w3.org/2001/XMLSchema#")};So.A.toJS=function(n){return(0,gs.P3)(n)?n.elements.map(So.A.toJS):(0,gs.c$)(n)?n.datatype.equals(Zu.xsd("boolean"))?"1"===n.value||"true"===n.value:n.datatype.equals(Zu.xsd("dateTime"))||n.datatype.equals(Zu.xsd("date"))?new Date(n.value):n.datatype.equals(Zu.xsd("integer"))||n.datatype.equals(Zu.xsd("float"))||n.datatype.equals(Zu.xsd("decimal"))?Number(n.value):n.value:n};class SK{constructor(t,e){this.pat=new xl,this.vars=[],this.name=t,this.id=e}}function yz(n,t,e,r){function s(G){var U,K="";for(U in G)G.hasOwnProperty(U)&&(K+="    "+U+" -> "+G[U]);return K}function i(G){var U,K="Bindings: ",pe=G.length;for(U=0;U<pe;U++)K+=s(G[U][0])+";\n\t";return K}function a(G,K,U,pe){var Me;if(G.length!==K.length)return[];if(!G.length)return[[[],null]];var ye=function o(G,K,U,pe){var Me=U[G];if(void 0===Me){if(G.isVar){var ye=[];return ye[G]=K,[[ye,null]]}Me=G}if(!Me.complexType)return pe.redirections[Me]&&(Me=pe.redirections[Me]),pe.redirections[K]&&(K=pe.redirections[K]),Me.equals(K)||Me.uri&&Me.uri===D0?[[[],null]]:[];if(G instanceof Array)return K instanceof Array?a(G,K,U):[];throw new Error("query.js: oops - code not written yet")}(G[0],K[0],U,pe);if(0===ye.length)return ye;var He,dt,Ke,Zt,dn,Is,Ms,Fe=[],ht=ye.length;for(He=0;He<ht;He++){for(dn in Ms=[],dt=ye[He][0])dt.hasOwnProperty(dn)&&(Ms[dn]=dt[dn]);for(dn in U)U.hasOwnProperty(dn)&&(Ms[dn]=U[dn]);for(Zt=(Me=a(G.slice(1),K.slice(1),Ms,pe)).length,Ke=0;Ke<Zt;Ke++){for(dn in Is=Me[Ke][0],dt)dt.hasOwnProperty(dn)&&(Is[dn]=dt[dn]);Fe.push([Is,null])}}return Fe}function l(G,K){var U=K[G];return void 0===U?G:U}function c(G,K){var pe,U={};for(pe in G)G.hasOwnProperty(pe)&&(U[pe]=G[pe]);for(pe in K)K.hasOwnProperty(pe)&&(U[pe]=K[pe]);return U}function u(G,K){return this.trunkBindings=K,this.originalCallback=G,this.branches=[],this}function h(G,K){return this.count=0,this.success=!1,this.done=!1,this.callback=G,this.onDone=K,this}u.prototype.checkAllDone=function(){var G;for(G=0;G<this.branches.length;G++)if(!this.branches[G].done)return;Gi.debug("OPTIONAL BIDNINGS ALL DONE:"),this.doCallBacks(this.branches.length-1,this.trunkBindings)},u.prototype.doCallBacks=function(G,K){var U;if(G<0)return this.originalCallback(K);for(U=0;U<this.branches[G].results.length;U++)this.doCallBacks(G-1,c(K,this.branches[G].results[U]))},h.prototype.reportMatch=function(G){this.callback(G),this.success=!0},h.prototype.reportDone=function(){this.done=!0,Gi.info("Mandatory query branch finished.***"),void 0!==this.onDone&&this.onDone()};var d=function(G){return this.count=0,this.done=!1,this.results=[],this.junction=G,G.branches.push(this),this};function g(G,K,U){var pe,Me,ye,Fe;for(K.nvars=0,K.index=null,pe=[K.subject,K.predicate,K.object,K.why],Fe=[G.subjectIndex,G.predicateIndex,G.objectIndex,G.whyIndex],ye=0;ye<4;ye++){let He=pe[ye];if(!He.uri||He.uri!==D0)if(He.isVar&&void 0===U[He])K.nvars++;else{if(He=l(pe[ye],U),G.redirections[G.id(He)]&&(He=G.redirections[G.id(He)]),!(Me=Fe[ye][G.id(He)]))return K.index=[],!1;(null===K.index||K.index.length>Me.length)&&(K.index=Me)}}return null===K.index&&(K.index=G.statements),!0}function m(G,K){return G.nvars!==K.nvars?G.nvars-K.nvars:G.index.length-K.index.length}d.prototype.reportMatch=function(G){this.results.push(G)},d.prototype.reportDone=function(){Gi.debug("Optional branch finished - results.length = "+this.results.length),0===this.results.length&&(this.results.push({}),Gi.debug("Optional branch FAILED - that's OK.")),this.done=!0,this.junction.checkAllDone()};var V=function(G,K,U,pe,Me,ye,Fe){Gi.debug("Match begins, Branch count now: "+Fe.count+" for "+Fe.pattern_debug);var He=K.statements;if(0===He.length){if(Gi.debug("FOUND MATCH WITH BINDINGS:"+s(U)),0===K.optional.length)Fe.reportMatch(U);else{Gi.debug("OPTIONAL: "+K.optional);var Ke,ht=new u(t,U),dt=[];for(Ke=0;Ke<K.optional.length;Ke++)dt[Ke]=new d(ht),dt[Ke].pattern_debug=K.optional[Ke];for(Ke=0;Ke<K.optional.length;Ke++)dt[Ke].count=dt[Ke].count+1,V(G,K.optional[Ke],U,"",Me,t,dt[Ke])}return Fe.count--,void Gi.debug("Match ends -- success , Branch count now: "+Fe.count+" for "+Fe.pattern_debug)}var Zt,dn,Is=He.length;if(Me){var zs=function(Vs,Ai){var bi=Vs.uri.split("#")[0];Me.nowOrWhenFetched(bi,void 0,function(Zi,po,ai){Zi||console.log("Error following link to <"+Vs.uri+"> in query: "+po),V(G,K,U,pe,Me,ye,Fe)})};for(dn=0;dn<Is;dn++){if(void 0!==U[(Zt=He[dn]).subject]&&U[Zt.subject].uri&&Me&&"unrequested"===Me.getState($c(U[Zt.subject].uri)))return void zs(U[Zt.subject]);if(void 0!==U[Zt.object]&&U[Zt.object].uri&&Me&&"unrequested"===Me.getState($c(U[Zt.object].uri)))return void zs(U[Zt.object])}}D(G,K,U,pe,Me,ye,Fe)},M=function(G,K){var pe,Me,U=!0;for(pe in G)G.hasOwnProperty(pe)&&K[pe]&&(Me=K[pe].test)&&!Me(G[pe])&&(U=!1);return U},D=function(G,K,U,pe,Me,ye,Fe){var dt,Ke,Zt,dn,Is,Ms,zs,He=K.statements,ht=He.length;for(dt=0;dt<ht;dt++)g(G,zs=He[dt],U);He.sort(m),zs=He[0];var Vs=G.formula();Vs.optional=K.optional,Vs.constraints=K.constraints,Vs.statements=He.slice(1),Gi.debug(pe+"match2 searching "+zs.index.length+" for "+zs+"; bindings so far="+s(U));var Ai,Zi,po,bi=zs.index.length,ai=0;for(Ai=0;Ai<bi;Ai++)for(Zi=a([zs.subject,zs.predicate,zs.object,zs.why],[(po=zs.index[Ai]).subject,po.predicate,po.object,po.why],U,G),Gi.info(pe+" From first: "+Zi.length+": "+i(Zi)),Zt=Zi.length,Ke=0;Ke<Zt;Ke++)if(Is=[],M(Ms=Zi[Ke][0],K.constraints)){for(dn in Ms)Ms.hasOwnProperty(dn)&&(Is[dn]=Ms[dn]);for(dn in U)U.hasOwnProperty(dn)&&(Is[dn]=U[dn]);Fe.count++,ai++,V(G,Vs,Is,pe+"  ",Me,ye,Fe)}else Gi.debug("Branch count CS: "+Fe.count);Fe.count--,0===ai&&Gi.debug("Match2 fails completely on "+zs),Gi.debug("Match2 ends, Branch count: "+Fe.count+" for "+Fe.pattern_debug),0===Fe.count&&(Gi.debug("Branch finished."),Fe.reportDone())},J=this;Gi.debug("Query on "+this.statements.length);var X=new h(t,r);X.count++,n.sync?V(J,n.pat,n.pat.initBindings,"",e,t,X):setTimeout(function(){V(J,n.pat,n.pat.initBindings,"",e,t,X)},0)}const e8="http://www.w3.org/2002/07/owl#";function HK(n,t,e,r){var s=n.any(t,e,void 0);return!!s&&(n.equate(s,r),!0)}function _K(n,t,e,r){var s=n.any(void 0,e,r);return!!s&&(n.equate(s,t),!0)}function Iz(n,t,e,r,s){n.typeCallback&&n.typeCallback(n,r,s);var i=n.classActions[n.id(r)],o=!1;if(i)for(var a=0;a<i.length;a++)o=o||i[a](n,t,e,r,s);return o}class xl extends B0{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(void 0,void 0,void 0,void 0,e),(0,xt.A)(this,"updater",void 0),(0,xt.A)(this,"namespaces",void 0),(0,xt.A)(this,"classActions",void 0),(0,xt.A)(this,"propertyActions",void 0),(0,xt.A)(this,"redirections",void 0),(0,xt.A)(this,"aliases",void 0),(0,xt.A)(this,"HTTPRedirects",void 0),(0,xt.A)(this,"subjectIndex",void 0),(0,xt.A)(this,"predicateIndex",void 0),(0,xt.A)(this,"objectIndex",void 0),(0,xt.A)(this,"whyIndex",void 0),(0,xt.A)(this,"index",void 0),(0,xt.A)(this,"features",void 0),(0,xt.A)(this,"_universalVariables",void 0),(0,xt.A)(this,"_existentialVariables",void 0),(0,xt.A)(this,"rdfArrayRemove",void 0),(0,xt.A)(this,"dataCallbacks",[]),(0,xt.A)(this,"dataRemovalCallbacks",[]),this.propertyActions={},this.classActions={},this.redirections=[],this.aliases=[],this.HTTPRedirects=[],this.subjectIndex=[],this.predicateIndex=[],this.objectIndex=[],this.whyIndex=[],this.index=[this.subjectIndex,this.predicateIndex,this.objectIndex,this.whyIndex],this.namespaces={},this.features=t||[],this.rdfArrayRemove=e.rdfArrayRemove||Zo.Uz,e.dataCallback&&(this.dataCallbacks=[e.dataCallback]),e.dataRemovalCallback&&(this.dataRemovalCallbacks=[e.dataRemovalCallback]),this.initPropertyActions(this.features)}static get defaultGraphURI(){return D0}substitute(t){var e=this.statements.map(function(s){return s.substitute(t)}),r=new xl;return r.add(e),r}addDataCallback(t){this.dataCallbacks.push(t)}addDataRemovalCallback(t){this.dataRemovalCallbacks.push(t)}applyPatch(t,e,r){var i,s=this,o=null;function a(u){if(t.delete){i=t.delete,o&&(i=i.substitute(o));var h=[],d=(i=i.statements).map(function(g){var m=s.statementsMatching(g.subject,g.predicate,g.object,e);return 0===m.length?(h.push(g),null):m[0]});if(h.length)return r("Could not find to delete: "+h.join("\n or "));d.map(function(g){s.remove(g)})}t.insert&&(i=t.insert,o&&(i=i.substitute(o)),(i=i.statements).map(function(g){g.graph=e,s.add(g.subject,g.predicate,g.object,g.graph)})),u()}if(t.where){var l=new SK("patch");l.pat=t.where,l.pat.statements.map(function(u){u.graph=G0(e.value)}),l.sync=!0;var c=[];s.query(l,function(h){c.push(h)},s.fetcher,function(){return 0===c.length?r("No match found to be patched:"+t.where):c.length>1?r("Patch ambiguous. No patch done."):(o=c[0],void a(r))})}else a(r)}declareExistential(t){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(t),t}initPropertyActions(t){this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))]=[Iz],Sa(t,"sameAs")>=0&&(this.propertyActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${e8}sameAs`))]=[function(e,r,s,i,o){return e.equate(r,i),!0}]),Sa(t,"InverseFunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${e8}InverseFunctionalProperty`))]=[function(e,r,s,i,o){return e.newPropertyAction(r,_K)}]),Sa(t,"FunctionalProperty")>=0&&(this.classActions[this.rdfFactory.id(this.rdfFactory.namedNode(`${e8}FunctionalProperty`))]=[function(e,r,s,i,o){return e.newPropertyAction(r,HK)}])}addStatement(t){return this.add(t.subject,t.predicate,t.object,t.graph),this.statements.length}add(t,e,r,s){var i,o,a;if(1===arguments.length){if(t instanceof Array)for(i=0;i<t.length;i++)this.add(t[i]);else(0,gs.aF)(t)?this.add(t.subject,t.predicate,t.object,t.graph):(0,gs.ok)(t)&&this.add(t.statements);return this}s||(s=this.fetcher?this.fetcher.appNode:this.rdfFactory.defaultGraph()),"string"==typeof t&&(t=this.rdfFactory.namedNode(t)),e=rc.fromValue(e);const l=rc.fromValue(r);if(s=rc.fromValue(s),!(0,gs.CZ)(t))throw new Error("Subject is not a subject type");if(!(0,gs.fY)(e))throw new Error(`Predicate ${e} is not a predicate type`);if(!(0,gs.DJ)(l))throw new Error(`Object ${l} is not an object type`);if(!(0,gs.RN)(s))throw new Error("Why is not a graph type");this.predicateCallback&&this.predicateCallback(this,e,s);var c=this.id(this.canon(e)),u=!1;if(o=this.propertyActions[c])for(i=0;i<o.length;i++)u=u||o[i](this,t,e,l,s);if(this.holds(t,e,l,s))return null;var h=[this.id(this.canon(t)),c,this.id(this.canon(l)),this.id(this.canon(s))];for(a=this.rdfFactory.quad(t,e,l,s),i=0;i<4;i++){var d=this.index[i],g=h[i];d[g]||(d[g]=[]),d[g].push(a)}this.statements.push(a);for(const m of this.dataCallbacks)m(a);return a}canon(t){if(!t)return t;const e=this.redirections[this.id(t)];if(e)return e;switch(t.termType){case hn.$Q:return new ro(t.value);case hn.r0:return t;case hn.ic:return new q9;case hn.S:case hn.bD:return t;case hn.QW:return new Ws(t.value,t.language,t.datatype);case hn.Kk:return new co.A(t.value);case hn.P2:return new nc(t.value);default:throw new Error(`Term Type not recognized for canonization: ${t.termType}`)}}check(){this.checkStatementList(this.statements);for(var t=0;t<4;t++){var e=this.index[t];for(var r in e)e.hasOwnProperty(r)&&this.checkStatementList(e[r],t)}}checkStatementList(t,e){void 0===e&&(e=0);for(var i,s=" found in "+["subject","predicate","object","why"][e]+" index.",o=0;o<t.length;o++){for(var a=[(i=t[o]).subject,i.predicate,i.object,i.graph],l=function(d,g){for(var m=0;m<d.length;m++)if(d[m].subject.equals(g.subject)&&d[m].predicate.equals(g.predicate)&&d[m].object.equals(g.object)&&d[m].why.equals(g.graph))return!0},c=0;c<4;c++){var u=this.canon(a[c]),h=this.id(u);this.index[c][h]&&l(this.index[c][h],i)}if(!l(this.statements,i))throw new Error("Statement list does not statement "+i+"@"+i.graph+s)}}close(){return this}compareTerms(t,e){return Object.prototype.hasOwnProperty.call(t,"compareTerm")?t.compareTerm(e):Ql.A[t.termType]<Ql.A[e.termType]?-1:Ql.A[t.termType]>Ql.A[e.termType]?1:t.value<e.value?-1:t.value>e.value?1:0}copyTo(t,e,r){r||(r=[]);var s=this.statementsMatching(t);-1!==Sa(r,"two-direction")&&s.concat(this.statementsMatching(void 0,void 0,t));for(var i=0;i<s.length;i++){var o=s[i];switch(o.object.termType){case"NamedNode":this.add(e,o.predicate,o.object);break;case"Literal":case"BlankNode":case"Collection":this.add(e,o.predicate,o.object.copy(this))}-1!==Sa(r,"delete")&&this.remove(o)}}equate(t,e){const r=this.canon(t),s=this.canon(e);var i=this.compareTerms(r,s);return!i||(i<0?this.replaceWith(s,r):this.replaceWith(r,s))}formula(t){return new xl(t)}get length(){return this.statements.length}match(t,e,r,s){return this.statementsMatching(rc.fromValue(t),rc.fromValue(e),rc.fromValue(r),rc.fromValue(s))}mentionsURI(t){var e="<"+t+">";return!!this.subjectIndex[e]||!!this.objectIndex[e]||!!this.predicateIndex[e]}newExistential(t){if(!t)return this.bnode();var e=this.sym(t);return this.declareExistential(e)}newPropertyAction(t,e){var r=this.id(t);this.propertyActions[r]||(this.propertyActions[r]=[]),this.propertyActions[r].push(e);for(var s=this.statementsMatching(void 0,t,void 0),i=!1,o=0;o<s.length;o++)i=i||e(this,s[o].subject,t,s[o].object);return i}newUniversal(t){var e=this.sym(t);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(e),e}variable(t){return new nc(t)}nextSymbol(t){for(var e=0;;e++){var r=t.value+"#n"+e;if(!this.mentionsURI(r))return this.sym(r)}}query(t,e,r,s){return yz.call(this,t,e,r,s)}querySync(t){var e=[],i=!1;if(t.sync=!0,yz.call(this,t,function r(o){e.push(o)},null,function s(){i=!0}),!i)throw new Error("Sync query should have called done function");return e}remove(t){if(t instanceof Array){for(var e=0;e<t.length;e++)this.remove(t[e]);return this}if((0,gs.ok)(t))return this.remove(t.statements);var r=this.statementsMatching(t.subject,t.predicate,t.object,t.graph);if(!r.length)throw new Error("Statement to be removed is not on store: "+t);return this.removeStatement(r[0]),this}removeDocument(t){this.removeMetadata(t);for(var e=this.statementsMatching(void 0,void 0,void 0,t).slice(),r=0;r<e.length;r++)this.removeStatement(e[r]);return this.removeMatches(t,null,null),this}removeMetadata(t){const e=this.sym("chrome://TheCurrentSession"),r="http://www.w3.org/2007/ont/link#",s=this.statementsMatching(void 0,this.sym(`${r}requestedURI`),this.rdfFactory.literal(t.value),e).map(a=>a.subject);for(var i=0;i<s.length;i++){const a=s[i];if(null!=a){let l;const c=this.any(a,this.sym(`${r}status`),null,e);if(null!=c){l=this.statementsMatching(c,this.sym(`${r}status`),null,e).slice();for(var o=0;o<l.length;o++)this.removeStatement(l[o])}const u=this.any(a,this.sym(`${r}response`),null,e);if(null!=u)for(l=this.statementsMatching(u,null,null,e).slice(),o=0;o<l.length;o++)this.removeStatement(l[o]);for(l=this.statementsMatching(a,null,null,e).slice(),o=0;o<l.length;o++)this.removeStatement(l[o])}}return this.removeMatches(this.sym(t.value),null,null,e),this}removeMany(t,e,r,s,i){for(var o=this.statementsMatching(t,e,r,s,!1),a=[],l=0;l<o.length;l++)a.push(o[l]);for(i&&(a=a.slice(0,i)),l=0;l<a.length;l++)this.remove(a[l])}removeMatches(t,e,r,s){return this.removeMany(t,e,r,s),this}removeStatement(t){for(var e=[t.subject,t.predicate,t.object,t.graph],r=0;r<4;r++){var s=this.canon(e[r]),i=this.id(s);this.index[r][i]&&this.rdfArrayRemove(this.index[r][i],t)}this.rdfArrayRemove(this.statements,t);for(const o of this.dataRemovalCallbacks)o(t);return this}removeStatements(t){for(var e=0;e<t.length;e++)this.remove(t[e]);return this}replaceWith(t,e){for(var r=this.id(t),s=this.id(e),i=function(a){var l=a[r];if(l){var c=a[s];a[s]=c?l.concat(c):l,delete a[r]}},o=0;o<4;o++)i(this.index[o]);if(this.redirections[r]=e,t.value){if(this.aliases[s]||(this.aliases[s]=[]),this.aliases[s].push(t),this.aliases[r])for(o=0;o<this.aliases[r].length;o++)this.redirections[this.id(this.aliases[r][o])]=e,this.aliases[s].push(this.aliases[r][o]);this.add(e,this.sym("http://www.w3.org/2007/ont/link#uri"),t),this.fetcher&&this.fetcher.nowKnownAs(t,e)}return i(this.classActions),i(this.propertyActions),!0}allAliases(t){var e=this.aliases[this.id(this.canon(t))]||[];return e.push(this.canon(t)),e}sameThings(t,e){if(t.equals(e))return!0;var r=this.canon(t);if(!r)return!1;var s=this.canon(e);return!!s&&r.value===s.value}setPrefixForURI(t,e){if(("tab"!==t||!this.namespaces.tab)&&"ns"!==t.slice(0,2)&&"default"!==t.slice(0,7)){for(let r in this.namespaces)this.namespaces[r]==e&&delete this.namespaces[r];this.namespaces[t]=e}}statementsMatching(t,e,r,s,i){var h,d,o=[t,e,r,s],a=[],l=[],c=[],u=[];for(h=0;h<4;h++)a[h]=this.canon(rc.fromValue(o[h])),a[h]?(u.push(h),l[h]=this.id(a[h])):c.push(h);if(0===u.length)return this.statements;if(1===u.length)return(d=this.index[h=u[0]][l[h]])&&i&&d.length>1&&(d=d.slice(0,1)),d||[];var m,b,g=1e10;for(b=0;b<u.length;b++){if(!(d=this.index[h=u[b]][l[h]]))return[];d.length<g&&(g=d.length,m=b)}for(var V=u[m],M=this.index[V][l[V]],D=u.slice(0,m).concat(u.slice(m+1)),J=[],X=["subject","predicate","object","why"],G=0;G<M.length;G++){var K=M[G];for(b=0;b<D.length;b++)if(!this.canon(K[X[h=D[b]]]).equals(a[h])){K=null;break}if(null!=K&&(J.push(K),i))break}return J}uris(t){var e=this.canon(t),r=this.aliases[this.id(e)];if(!e.value)return[];var s=[e.value];if(r)for(var i=0;i<r.length;i++)s.push(r[i].uri);return s}serialize(t,e,r,s){return r5(r,this,t,e,void 0,s={...s||{},namespaces:s?.namespaces?{...this.namespaces,...s.namespaces}:{...this.namespaces}})}}(0,xt.A)(xl,"handleRDFType",void 0),xl.handleRDFType=Iz;const q1=Mr("http://www.w3.org/1999/02/22-rdf-syntax-ns#");function VK(n,t){function e(s,i,o){const a=n.statementsMatching(s,q1("rest"),null,t);if(1!==a.length)throw new Error(`Bad list structure: no rest at ${s}`);const l=n.statementsMatching(s,q1("first"),null,t);if(1!==l.length)throw new Error(`Bad list structure: rest but ${l.length} firsts at ${s}`);const u=[l[0].object].concat(i),h=o.concat(a).concat(l),d=n.statementsMatching(null,q1("rest"),s,t);if(0===d.length){const m=new $a(u);return n.remove(h),void function MK(n,t,e,r){for(const s of n.statementsMatching(e,null,null,r)){const i=new tc(t,s.predicate,s.object,r);n.remove(s),n.add(i)}for(const s of n.statementsMatching(null,e,null,r))n.remove(s),n.add(new tc(s.subject,t,s.object,r));for(const s of n.statementsMatching(null,null,e,r))n.remove(s),n.add(new tc(s.subject,s.predicate,t,r))}(n,m,s,t)}if(1!==d.length)throw new Error(`Bad list structure: ${d.length} pres at ${s}`);const g=d[0].subject;if("BlankNode"!==g.termType)throw new Error(`Bad list element node ${g} type: ${g.termType} `);e(g,u,h)}(function zK(n,t){const e=q1("nil");for(const r of n.statementsMatching(e,null,null,t)){n.remove(r);const s=new $a;n.add(new tc(s,r.predicate,r.object,t))}for(const r of n.statementsMatching(null,null,e,t))if(!r.predicate.sameTerm(q1("rest"))){n.remove(r);const s=new $a;n.add(new tc(r.subject,r.predicate,s,t))}})(n,t),n.statementsMatching(null,q1("rest"),q1("nil"),t).forEach(s=>{if("BlankNode"!==s.subject.termType)throw new Error(`Bad list element node ${s.subject} type: ${s.subject.termType} `);e(s.subject,[],[])})}var t8="http://www.w3.org/2000/10/swap/log#",Li=function(n){return n},Wi=function(n){return n},N0=function(n){if(n.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},oa=function(n){return n.length},n8=function(n,t,e){if(typeof n.slice>"u")throw"@@ mising.js: No .slice function for "+n+" of type "+typeof n;return typeof e>"u"||null==e?n.slice(t):n.slice(t,e)},ju=Error("dummy error stop iteration"),F0=function(n){return this.last=0,this.li=n,this.next=function(){if(this.last==this.li.length)throw ju;return this.li[this.last++]},this},r8=function(n,t){return n.indexOf(t)},J1=function(n,t){if(!n)throw t?"python Assertion failed: "+t:"(python) Assertion failed."};String.prototype.encode=function(n){if("utf-8"!=n)throw"UTF8_converter: can only do utf-8";return function(n){n=n.replace(/\r\n/g,"\n");for(var t="",e=0;e<n.length;e++){var r=n.charCodeAt(e);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(this)},String.prototype.decode=function(n){if("utf-8"!=n)throw"UTF8_converter: can only do utf-8";return this};var s8=function(n,t){return Go(t,n)},bz="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",xz="http://www.w3.org/2002/07/owl#sameAs",Sz="\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~",Q1=Sz+":",i8=new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?([eE][-+]?[0-9]+)?","g"),Hz=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),o8=new RegExp('[\\\\\\r\\n\\"]',"g"),a8=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");const l8=function ZK(n,t,e,r,s,i,o,a){return new jK(n,t,e,r,s,i,o,a)};class jK{constructor(t,e,r,s,i,o,a,l){typeof e>"u"&&(e=null),typeof r>"u"&&(r=""),typeof s>"u"&&(s=null),typeof i>"u"&&(i=""),typeof o>"u"&&(o=null),typeof a>"u"&&(a=""),typeof l>"u"&&(l=null),this._bindings=new N0([]),this._flags=a,""!=r&&(J1(r.indexOf(":")>=0,"Document URI not absolute: "+r),this._bindings[""]=r+"#"),this._store=t,i&&t.setGenPrefix(i),this._thisDoc=r,this.source=t.sym(r),this.lines=0,this.statementCount=0,this.hasNil=!1,this.startOfLine=0,this.previousLine=0,this._genPrefix=i,this.keywords=new Wi(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new N0([]),this._variables=new N0([]),this._parentVariables=new N0([]),this._reason=l,this._reason2=null,this._baseURI=s||r||null,J1(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._genPrefix=this._thisDoc?this._thisDoc+"#_g":RDFSink_uniqueURI()),this._formula=null==e?this._thisDoc?t.formula(r+"#_formula"):t.formula():e,this._context=this._formula,this._parentContext=null}here(t){return this._genPrefix+"_L"+this.lines+"C"+(t-this.startOfLine+1)}formula(){return this._formula}loadStream(t){return this.loadBuf(t.read())}loadBuf(t){return this.startDoc(),this.feed(t),this.endDoc()}feed(t){for(var e=t.decode("utf-8"),r=0;r>=0;){var s=this.skipSpace(e,r);if(s<0)return;if((r=this.directiveOrStatement(e,s))<0)throw vn(this._thisDoc,this.lines,e,s,"expected directive or statement")}}directiveOrStatement(t,e){var s,r=this.skipSpace(t,e);return r<0?r:(s=this.directive(t,r))>=0||(s=this.statement(t,r))>=0?this.checkDot(t,s):s}tok(t,e,r){if("@"==e.slice(r,r+1))r+=1;else if(Sa(this.keywords,t)<0)return-1;var i=r+oa(t);return e.slice(r,i)==t&&Sz.indexOf(e.charAt(i))>=0?i:-1}directive(t,e){if((l=this.skipSpace(t,e))<0)return l;var r=new Wi([]);if((l=this.tok("bind",t,e))>0)throw vn(this._thisDoc,this.lines,t,e,"keyword bind is obsolete: use @prefix");if((l=this.tok("keywords",t,e))>0){if((e=this.commaSeparatedList(t,l,r,!1))<0)throw vn(this._thisDoc,this.lines,t,e,"'@keywords' needs comma separated list of words");return this.setKeywords(n8(r,null,null)),e}if((l=this.tok("forAll",t,e))>0){if((e=this.commaSeparatedList(t,l,r,!0))<0)throw vn(this._thisDoc,this.lines,t,e,"Bad variable list after @forAll");var s=new F0(r);try{for(;;){var i=s.next();(Sa(this._variables,i)<0||Sa(this._parentVariables,i)>=0)&&(this._variables[i]=this._context.newUniversal(i))}}catch(u){if(u!=ju)throw u}return e}if((l=this.tok("forSome",t,e))>0){if((e=this.commaSeparatedList(t,l,r,this.uri_ref2))<0)throw vn(this._thisDoc,this.lines,t,e,"Bad variable list after @forSome");s=new F0(r);try{for(;;)i=s.next(),this._context.declareExistential(i)}catch(h){if(h!=ju)throw h}return e}if((l=this.tok("prefix",t,e))>=0){var l,o=new Wi([]);if((e=this.qname(t,l,o))<0)throw vn(this._thisDoc,this.lines,t,l,"expected qname after @prefix");if((l=this.uri_ref2(t,e,o))<0)throw vn(this._thisDoc,this.lines,t,e,"expected <uriref> after @prefix _qname_");var a=o[1].uri;return this._baseURI?a=s8(this._baseURI,a):J1(a.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS"),J1(a.indexOf(":")>=0),this._bindings[o[0][0]]=a,this.bind(o[0][0],function TK(n){return encodeURI(n)}(a)),l}if((l=this.tok("base",t,e))>=0){if(o=new Wi([]),(e=this.uri_ref2(t,l,o))<0)throw vn(this._thisDoc,this.lines,t,l,"expected <uri> after @base ");if(a=o[0].uri,!this._baseURI)throw vn(this._thisDoc,this.lines,t,l,"With no previous base URI, cannot use relative URI in @base  <"+a+">");return a=s8(this._baseURI,a),J1(a.indexOf(":")>=0),this._baseURI=a,e}return-1}bind(t,e){""==t||this._store.setPrefixForURI(t,e)}setKeywords(t){null==t?this.keywordsSet=0:(this.keywords=t,this.keywordsSet=1)}startDoc(){}endDoc(){return this.hasNil&&this._store.rdfFactory.supports.COLLECTIONS&&VK(this._store,this.source),this._formula}makeStatement(t){t[0].add(t[2],t[1],t[3],this.source),(t[2].uri&&t[2].uri===bz||t[3].uri&&t[3].uri===bz)&&(this.hasNil=!0),this.statementCount+=1}statement(t,s){var r=new Wi([]);if((s=this.object(t,s,r))<0)return s;var i=this.property_list(t,s,r[0]);if(i<0)throw vn(this._thisDoc,this.lines,t,s,"expected propertylist");return i}subject(t,e,r){return this.item(t,e,r)}verb(t,e,r){if((i=this.skipSpace(t,e))<0)return i;var s=new Wi([]);if((i=this.tok("has",t,e))>=0){if((e=this.prop(t,i,s))<0)throw vn(this._thisDoc,this.lines,t,i,"expected property after 'has'");return r.push(new Li(["->",s[0]])),e}if((i=this.tok("is",t,e))>=0){var i;if((e=this.prop(t,i,s))<0)throw vn(this._thisDoc,this.lines,t,i,"expected <property> after 'is'");if((i=this.skipSpace(t,e))<0)throw vn(this._thisDoc,this.lines,t,e,"End of file found, expected property after 'is'");if((i=this.tok("of",t,e=i))<0)throw vn(this._thisDoc,this.lines,t,e,"expected 'of' after 'is' <prop>");return r.push(new Li(["<-",s[0]])),i}if((i=this.tok("a",t,e))>=0)return r.push(new Li(["->",this._store.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")])),i;if("<="==t.slice(e,e+2))return r.push(new Li(["<-",this._store.sym(t8+"implies")])),e+2;if("="==t.slice(e,e+1))return">"==t.slice(e+1,e+2)?(r.push(new Li(["->",this._store.sym(t8+"implies")])),e+2):(r.push(new Li(["->",this._store.sym(xz)])),e+1);if(":="==t.slice(e,e+2))return r.push(new Li(["->",t8+"becomes"])),e+2;if((i=this.prop(t,e,s))>=0)return r.push(new Li(["->",s[0]])),i;if(">-"==t.slice(e,e+2)||"<-"==t.slice(e,e+2))throw vn(this._thisDoc,this.lines,t,i,">- ... -> syntax is obsolete.");return-1}prop(t,e,r){return this.item(t,e,r)}item(t,e,r){return this.path(t,e,r)}blankNode(t){return this._context.bnode(t,this._reason2)}path(t,e,r){if((s=this.nodeOrLiteral(t,e,r))<0)return s;for(;"!^.".indexOf(t.slice(s,s+1))>=0;){var i=t.slice(s,s+1);if("."==i){var o=t.slice(s+1,s+2);if(!o||Q1.indexOf(o)>=0&&":?<[{(".indexOf(o)<0)break}var s,a=r.pop(),l=this.blankNode(this.here(s));if((s=this.node(t,s+1,r))<0)throw vn(this._thisDoc,this.lines,t,s,"EOF found in middle of path syntax");var c=r.pop();this.makeStatement(new Li("^"==i?[this._context,c,l,a]:[this._context,c,a,l])),r.push(l)}return s}anonymousNode(t){if(e=this._anonymousNodes[t])return e;var e=this._store.bnode(t);return this._anonymousNodes[t]=e,e}node(t,o,r,s){typeof s>"u"&&(s=null);var i=s;if((G=this.skipSpace(t,o))<0)return G;var a=t.slice(o=G,o+1);if("["==a){var l=this.here(o);if((G=this.skipSpace(t,o+1))<0)throw vn(this._thisDoc,this.lines,t,o,"EOF after '['");if("="==t.slice(G,G+1)){o=G+1;var c=new Wi([]);if(!((G=this.objectList(t,o,c))>=0))throw vn(this._thisDoc,this.lines,t,o,"objectList expected after [= ");if(i=c[0],oa(c)>1){var u=new F0(c);try{for(;;){var h=u.next();this.makeStatement(new Li([this._context,this._store.sym(xz),i,h]))}}catch(He){if(He!=ju)throw He}}if((G=this.skipSpace(t,G))<0)throw vn(this._thisDoc,this.lines,t,o,"EOF when objectList expected after [ = ");if(";"==t.slice(G,G+1))var G=G+1}if(null==i&&(i=this.blankNode(l)),(o=this.property_list(t,G,i))<0)throw vn(this._thisDoc,this.lines,t,G,"property_list expected");if((G=this.skipSpace(t,o))<0)throw vn(this._thisDoc,this.lines,t,o,"EOF when ']' expected after [ <propertyList>");if("]"!=t.slice(G,G+1))throw vn(this._thisDoc,this.lines,t,G,"']' expected");return r.push(i),G+1}if("{"==a){if("$"==t.slice(o+1,o+2)){G=(o+=1)+1;for(var g=new Wi([]),m=!0;;){if((o=this.skipSpace(t,G))<0)throw vn(this._thisDoc,this.lines,t,o,"needed '$}', found end.");if("$}"==t.slice(o,o+2)){G=o+2;break}if(m)m=!1;else{if(","!=t.slice(o,o+1))throw vn(this._thisDoc,this.lines,t,o,"expected: ','");o+=1}var b=new Wi([]);if((G=this.item(t,o,b))<0)throw vn(this._thisDoc,this.lines,t,o,"expected item in set or '$}'");g.push(b[0])}return r.push(this._store.newSet(g,this._context)),G}G=o+1;var V=this._parentContext;this._parentContext=this._context;var M=this._anonymousNodes,D=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new N0([]),this._variables=this._variables.slice();var J=this._reason2;for(this._reason2=null,null==i&&(i=this._store.formula()),this._context=i;;){if((o=this.skipSpace(t,G))<0)throw vn(this._thisDoc,this.lines,t,o,"needed '}', found end.");if("}"==t.slice(o,o+1)){G=o+1;break}if((G=this.directiveOrStatement(t,o))<0)throw vn(this._thisDoc,this.lines,t,o,"expected statement or '}'")}return this._anonymousNodes=M,this._variables=this._parentVariables,this._parentVariables=D,this._context=this._parentContext,this._reason2=J,this._parentContext=V,r.push(i.close()),G}if("("==a){var X=this._store.list;for("$"==t.slice(o+1,o+2)&&(X=this._store.newSet,o+=1),G=o+1,g=new Wi([]);;){if((o=this.skipSpace(t,G))<0)throw vn(this._thisDoc,this.lines,t,o,"needed ')', found end.");if(")"==t.slice(o,o+1)){G=o+1;break}if(b=new Wi([]),(G=this.item(t,o,b))<0)throw vn(this._thisDoc,this.lines,t,o,"expected item in list or ')'");g.push(b[0])}return r.push(X(g,this._context)),G}if((G=this.tok("this",t,o))>=0)throw vn(this._thisDoc,this.lines,t,o,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");return(G=this.tok("true",t,o))>=0?(r.push(!0),G):(G=this.tok("false",t,o))>=0?(r.push(!1),G):null==i&&(G=this.uri_ref2(t,o,r))>=0?G:-1}property_list(t,e,r){for(;;){if((d=this.skipSpace(t,e))<0)throw vn(this._thisDoc,this.lines,t,e,"EOF found when expected verb in property list");if(":-"!=t.slice(d,d+2)){e=d;var i=new Wi([]);if((d=this.verb(t,e,i))<=0)return e;var o=new Wi([]);if((e=this.objectList(t,d,o))<0)throw vn(this._thisDoc,this.lines,t,d,"objectList expected");var a=new F0(o);try{for(;;){var l=a.next(),c=i[0],h=c[1];this.makeStatement(new Li("->"==c[0]?[this._context,h,r,l]:[this._context,h,l,r]))}}catch(m){if(m!=ju)throw m}if((d=this.skipSpace(t,e))<0)throw vn(this._thisDoc,this.lines,t,d,"EOF found in list of objects");if(";"!=t.slice(e,e+1))return e;e+=1}else{e=d+2;var d,s=new Wi([]);if((d=this.node(t,e,s,r))<0)throw vn(this._thisDoc,this.lines,t,e,"bad {} or () or [] node after :- ");e=d}}}commaSeparatedList(t,e,r,s){if((i=this.skipSpace(t,e))<0)throw vn(this._thisDoc,this.lines,t,i,"EOF found expecting comma sep list");if("."==t.charAt(i))return e;if(s)var i=this.uri_ref2(t,i,r);else i=this.bareWord(t,i,r);if(i<0)return-1;for(;;){if((e=this.skipSpace(t,i))<0)return e;var o=t.slice(e,e+1);if(","!=o)return"."!=o?-1:e;if((i=s?this.uri_ref2(t,e+1,r):this.bareWord(t,e+1,r))<0)throw vn(this._thisDoc,this.lines,t,i,"bad list content")}}objectList(t,s,r){if((s=this.object(t,s,r))<0)return-1;for(;;){var i=this.skipSpace(t,s);if(i<0)throw vn(this._thisDoc,this.lines,t,i,"EOF found after object");if(","!=t.slice(i,i+1))return i;if((s=this.object(t,i+1,r))<0)return s}}checkDot(t,e){var r=this.skipSpace(t,e);if(r<0)return r;if("."==t.slice(r,r+1))return r+1;if("}"==t.slice(r,r+1)||"]"==t.slice(r,r+1))return r;throw vn(this._thisDoc,this.lines,t,r,"expected '.' or '}' or ']' at end of statement")}uri_ref2(t,h,r){var s=new Wi([]);if((i=this.qname(t,h,s))>=0){var o=s[0],a=o[0],l=o[1];if(null==a){J1(0,"not used?");var c=this._baseURI+"#"}else if(!(c=this._bindings[a])){if("_"==a)return r.push(this.anonymousNode(l)),i;throw vn(this._thisDoc,this.lines,t,h,"Prefix "+a+" not bound.")}var u=this._store.sym(c+l);return Sa(this._variables,u)>=0?r.push(this._variables[u]):r.push(u),i}if((h=this.skipSpace(t,h))<0)return-1;if("?"==t.charAt(h)){var d=new Wi([]);return(i=this.variable(t,h,d))>0?(r.push(d[0]),i):-1}if("<"==t.charAt(h)){for(var g=h+=1;h<oa(t);){if(">"==t.charAt(h)){var m=t.slice(g,h);return this._baseURI?m=s8(this._baseURI,m):J1(m.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs"),"#"==t.slice(h-1,h)&&"#"!=n8(m,-1,null)&&(m+="#"),u=this._store.sym(m),Sa(this._variables,u)>=0?r.push(this._variables[u]):r.push(u),h+1}h+=1}throw vn(this._thisDoc,this.lines,t,i,"unterminated URI reference")}if(this.keywordsSet){var i;if(d=new Wi([]),(i=this.bareWord(t,h,d))<0)return-1;if(Sa(this.keywords,d[0])>=0)throw vn(this._thisDoc,this.lines,t,h,'Keyword "'+d[0]+'" not allowed here.');return r.push(this._store.sym(this._bindings[""]+d[0])),i}return-1}skipSpace(t,e){for(var s=e||0;s<t.length;s++){var i=t.charAt(s);if(" \n\r\t\f\v\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000".indexOf(i)<0){if("#"!==t.charAt(s))return s;for(;;s++){if(s===t.length)return-1;if("\n"===t.charAt(s)){this.lines=this.lines+1;break}}}else"\n"===t.charAt(s)&&(this.lines=this.lines+1)}return-1}variable(t,i,r){if((s=this.skipSpace(t,i))<0||"?"!=t.slice(s,s+1))return-1;var s;if(i=s+=1,"0123456789-".indexOf(t.charAt(s))>=0)throw vn(this._thisDoc,this.lines,t,s,"Varible name can't start with '"+t.charAt(s)+"s'");for(;i<oa(t)&&Q1.indexOf(t.charAt(i))<0;)i+=1;if(null==this._parentContext)throw vn(this._thisDoc,this.lines,t,s,"Can't use ?xxx syntax for variable in outermost level: "+t.slice(s-1,i));return r.push(this._store.variable(t.slice(s,i))),i}bareWord(t,o,r){var s=this.skipSpace(t,o);if(s<0)return-1;var i=t.charAt(s);if("0123456789-".indexOf(i)>=0||Q1.indexOf(i)>=0)return-1;for(o=s;o<oa(t)&&Q1.indexOf(t.charAt(o))<0;)o+=1;return r.push(t.slice(s,o)),o}qname(t,s,r){if((s=this.skipSpace(t,s))<0)return-1;var i=t.charAt(s);if("0123456789-+".indexOf(i)>=0)return-1;if(Q1.indexOf(i)<0){var o=i;for(s+=1;s<oa(t)&&(i=t.charAt(s),Q1.indexOf(i)<0);)o+=i,s+=1}else o="";if(s<oa(t)&&":"==t.charAt(s)){var a=o;for(s+=1,o="";s<oa(t)&&(i=t.charAt(s),Q1.indexOf(i)<0);)o+=i,s+=1;return r.push(new Li([a,o])),s}return o&&this.keywordsSet&&Sa(this.keywords,o)<0?(r.push(new Li(["",o])),s):-1}object(t,e,r){if((s=this.subject(t,e,r))>=0)return s;{if((s=this.skipSpace(t,e))<0)return-1;var i=null;let c=t.charAt(e=s);if('"'==c||"'"==c){i=t.slice(e,e+3==c+c)?c+c+c:c,e+=oa(i);var o=this.strconst(t,e,i),s=o[0];return r.push(this._store.literal(o[1])),s}return-1}}nodeOrLiteral(t,e,r){if((s=this.node(t,e,r))>=0)return s;if((s=this.skipSpace(t,e))<0)return-1;var i=t.charAt(e=s);if("-+0987654321".indexOf(i)>=0){if(Hz.lastIndex=0,null!=(o=Hz.exec(t.slice(e))))s=e+(a=o[0]).length,a.indexOf("T")>=0?r.push(this._store.literal(a,this._store.sym("http://www.w3.org/2001/XMLSchema#dateTime"))):r.push(this._store.literal(a,this._store.sym("http://www.w3.org/2001/XMLSchema#date")));else{var a;if(i8.lastIndex=0,null==(o=i8.exec(t.slice(e))))throw vn(this._thisDoc,this.lines,t,e,"Bad number or date syntax");(a=t.slice(e,s=e+i8.lastIndex)).indexOf("e")>=0?r.push(this._store.literal(parseFloat(a),this._store.sym("http://www.w3.org/2001/XMLSchema#double"))):t.slice(e,s).indexOf(".")>=0?r.push(this._store.literal(parseFloat(a),this._store.sym("http://www.w3.org/2001/XMLSchema#decimal"))):r.push(this._store.literal(parseInt(a),this._store.sym("http://www.w3.org/2001/XMLSchema#integer")))}return s}if('"'==t.charAt(e)){if('"""'==t.slice(e,e+3))var l='"""';else l='"';e+=oa(l);var c=null,u=this.strconst(t,e,l),h=u[1],d=null;if("@"==t.slice(s=u[0],s+1)){var o;if(a8.lastIndex=0,null==(o=a8.exec(t.slice(s+1))))throw vn(this._thisDoc,startline,t,e,"Bad language code syntax on string literal, after @");d=t.slice(s+1,e=a8.lastIndex+s+1);var s=e}if("^^"==t.slice(s,s+2)){var g=new Wi([]);s=this.uri_ref2(t,s+2,g),c=g[0]}return r.push(this._store.literal(h,d||c)),s}return-1}strconst(t,e,r){for(var s=e,i="",o=this.lines;s<oa(t);){if(e=s+oa(r),t.slice(s,e)==r)return new Li([e,i]);if('"'!=t.charAt(s)){if(o8.lastIndex=0,!o8.exec(t.slice(s)))throw vn(this._thisDoc,o,t,s,"Closing quote missing in string at ^ in "+t.slice(s-20,s)+"^"+t.slice(s,s+20));if(i+=t.slice(s,e=s+o8.lastIndex-1),'"'!=(l=t.charAt(e)))if("\r"!=l){if("\n"==l){if('"'==r)throw vn(this._thisDoc,o,t,e,"newline found in string literal");this.lines=this.lines+1,i+=l,s=e+1,this.previousLine=this.startOfLine,this.startOfLine=s}else if("\\"==l){if(!(l=t.slice(s=e+1,s+1)))throw vn(this._thisDoc,o,t,e,"unterminated string literal (2)");var c=r8('abfrtvn\\"',l);if(c>=0)i+='a\b\f\r\t\v\n\\"'.charAt(c),s+=1;else if("u"==l)s=(h=this.uEscape(t,s+1,o))[0],i+=l=h[1];else{if("U"!=l)throw vn(this._thisDoc,this.lines,t,e,"bad escape");var h,l;s=(h=this.UEscape(t,s+1,o))[0],i+=l=h[1]}}}else s=e+1;else s=e}else i=i+'"',s=s+1}throw vn(this._thisDoc,this.lines,t,e,"unterminated string literal")}uEscape(t,e,r){for(var s=e,i=0,o=0;i<4;){var l=t.slice(s,s+1).toLowerCase();if(s+=1,""==l)throw vn(this._thisDoc,r,t,e,"unterminated string literal(3)");var c=r8("0123456789abcdef",l);if(c<0)throw vn(this._thisDoc,r,t,e,"bad string literal hex escape");o=16*o+c,i+=1}var u=String.fromCharCode(o);return new Li([s,u])}UEscape(t,e,r){for(var s=e,i=0,o="\\U";i<8;){var l=t.slice(s,s+1).toLowerCase();if(s+=1,""==l)throw vn(this._thisDoc,r,t,e,"unterminated string literal(3)");if(r8("0123456789abcdef",l)<0)throw vn(this._thisDoc,r,t,e,"bad string literal hex escape");o+=l,i+=1}var n,u=(n="0x"+n8(o,2,10)-0,String.fromCharCode(n));return new Li([s,u])}}function vn(n,t,e,r,s){let i=t+1,o="Line "+i+" of <"+n+">: Bad syntax: "+s+'\nat: "'+e.slice(r,r+30)+'"',a=new SyntaxError(o,n,i);return a.lineNo=i,a.characterInFile=r,a.syntaxProblem=s,a}const c8={...Xa,supports:{[Wo.collections]:!0,[Wo.defaultGraphType]:!1,[Wo.equalsMethod]:!0,[Wo.identity]:!1,[Wo.id]:!0,[Wo.reversibleId]:!1,[Wo.variableType]:!0},collection:n=>new $a(n),id(n){return(0,gs.P3)(n)?`( ${n.elements.map(t=>this.id(t)).join(", ")} )`:(0,gs.DZ)(n)?nc.toString(n):Xa.id(n)},termToNQ:n=>n.termType===hn.r0?$a.toNT(n):Xa.termToNQ(n)};function u8(n,t){return"string"==typeof t?n.rdfFactory.literal(t):Object.prototype.hasOwnProperty.call(t,"@list")?!0===n.rdfFactory.supports.COLLECTIONS?function $K(n,t){if(!Array.isArray(t))throw new TypeError("Object must be an array");return n.rdfFactory.collection(t.map(e=>u8(n,e)))}(n,t["@list"]):function UK(n,t){const e=t["@id"]?d8(n,t):n.rdfFactory.blankNode(),r=t["@list"].map(i=>u8(n,i)),s=Cz(n.rdfFactory,e,r);return n.addAll(s),e}(n,t):Object.prototype.hasOwnProperty.call(t,"@id")?d8(n,t):Object.prototype.hasOwnProperty.call(t,"@language")?n.rdfFactory.literal(t["@value"],t["@language"]):Object.prototype.hasOwnProperty.call(t,"@type")?n.rdfFactory.literal(t["@value"],n.rdfFactory.namedNode(t["@type"])):Object.prototype.hasOwnProperty.call(t,"@value")?n.rdfFactory.literal(t["@value"]):n.rdfFactory.literal(t)}function Mz(n,t,e){return h8.apply(this,arguments)}function h8(){return(h8=(0,lo.A)(function*(n,t,e){const r=e&&Object.prototype.hasOwnProperty.call(e,"termType")?e.value:e;return(yield(yield Ve.e(45).then(Ve.t.bind(Ve,1045,23))).default.flatten(JSON.parse(n),null,{base:r})).reduce((o,a)=>zz(o,e,a),t)})).apply(this,arguments)}function d8(n,t){return t["@id"].startsWith("_:")?n.rdfFactory.blankNode(t["@id"].substring(2)):n.rdfFactory.namedNode(t["@id"])}function zz(n,t,e){const r=e["@id"]?d8(n,e):n.rdfFactory.blankNode();for(const s of Object.keys(e)){if("@id"===s)continue;if("@graph"==s){const o=r,a=e[s];for(let l=0;l<a.length;l++)n=zz(n,o,a[l])}const i=e[s];if(Array.isArray(i))for(let o=0;o<i.length;o++)n.addStatement(Vz(n,r,s,i[o],t));else n.addStatement(Vz(n,r,s,i,t))}return n}function Vz(n,t,e,r,s){let i,o;return"@type"===e?(i=n.rdfFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),o=n.rdfFactory.namedNode(r)):(i=n.rdfFactory.namedNode(e),o=u8(n,r)),n.rdfFactory.quad(t,i,o,n.rdfFactory.namedNode(s))}var XK=Ve(6148);const P0="http://www.w3.org/1999/02/22-rdf-syntax-ns#",O0="http://www.w3.org/2001/XMLSchema#",i5="http://www.w3.org/2000/10/swap/",Ya={xsd:{decimal:`${O0}decimal`,boolean:`${O0}boolean`,double:`${O0}double`,integer:`${O0}integer`,string:`${O0}string`},rdf:{type:`${P0}type`,nil:`${P0}nil`,first:`${P0}first`,rest:`${P0}rest`,langString:`${P0}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${i5}reify#forSome`,forAll:`${i5}reify#forAll`},log:{implies:`${i5}log#implies`,isImpliedBy:`${i5}log#isImpliedBy`}},{xsd:o5}=Ya,YK=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Tz={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},KK=/[\x00-\x20<>\\"\{\}\|\^\`]/,qK={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},JK=/$0^/;class QK{constructor(t){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._isImpliedBy=(t=t||{}).isImpliedBy,this._lineMode=!!t.lineMode){this._n3Mode=!1;for(const e in this)!(e in qK)&&this[e]instanceof RegExp&&(this[e]=JK)}else this._n3Mode=!1!==t.n3;this.comments=!!t.comments,this._literalClosingPos=0}_tokenizeToEnd(t,e){let r=this._input,s=r.length;for(;;){let a,l;for(;a=this._newline.exec(r);)this.comments&&(l=this._comment.exec(a[0]))&&i("comment",l[1],"",this._line,a[0].length),r=r.substr(a[0].length,r.length),s=r.length,this._line++;if(!a&&(a=this._whitespace.exec(r))&&(r=r.substr(a[0].length,r.length)),this._endOfFile.test(r))return e&&(this.comments&&(l=this._comment.exec(r))&&i("comment",l[1],"",this._line,r.length),r=null,i("eof","","",this._line,0)),this._input=r;const c=this._line,u=r[0];let h="",d="",g="",m=null,b=0,V=!1;switch(u){case"^":if(r.length<3)break;if("^"!==r[1]){this._n3Mode&&(b=1,h="^");break}if(this._previousMarker="^^",r=r.substr(2),"<"!==r[0]){V=!0;break}case"<":if(m=this._unescapedIri.exec(r))h="IRI",d=m[1];else if(m=this._iri.exec(r)){if(d=this._unescape(m[1]),null===d||KK.test(d))return o(this);h="IRI"}else r.length>1&&"<"===r[1]?(h="<<",b=2):this._n3Mode&&r.length>1&&"="===r[1]&&(b=2,this._isImpliedBy?(h="abbreviation",d="<"):(h="inverse",d=">"));break;case">":r.length>1&&">"===r[1]&&(h=">>",b=2);break;case"_":((m=this._blank.exec(r))||e&&(m=this._blank.exec(`${r} `)))&&(h="blank",g="_",d=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(r))d=m[1];else if(({value:d,matchLength:b}=this._parseLiteral(r)),null===d)return o(this);(null!==m||0!==b)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(r))d=m[1];else if(({value:d,matchLength:b}=this._parseLiteral(r)),null===d)return o(this);(null!==m||0!==b)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(r))&&(h="var",d=m[0]);break;case"@":"literal"===this._previousMarker&&(m=this._langcode.exec(r))?(h="langcode",d=m[1]):(m=this._keyword.exec(r))&&(h=m[0]);break;case".":if(1===r.length?e:r[1]<"0"||r[1]>"9"){h=".",b=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(r)||e&&(m=this._number.exec(`${r} `)))&&(h="literal",d=m[0],g="string"==typeof m[1]?o5.double:"string"==typeof m[2]?o5.decimal:o5.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(r))?h=m[0].toUpperCase():V=!0;break;case"f":case"t":(m=this._boolean.exec(r))?(h="literal",d=m[0],g=o5.boolean):V=!0;break;case"a":(m=this._shortPredicates.exec(r))?(h="abbreviation",d="a"):V=!0;break;case"=":this._n3Mode&&r.length>1&&(h="abbreviation",">"!==r[1]?(b=1,d="="):(b=2,d=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(b=1,h=u);break;case"{":!this._lineMode&&r.length>=2&&("|"===r[1]?(h="{|",b=2):(h=u,b=1));break;case"|":r.length>=2&&"}"===r[1]&&(h="|}",b=2);break;default:V=!0}if(V&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(m=this._prefix.exec(r))?((m=this._prefixed.exec(r))||e&&(m=this._prefixed.exec(`${r} `)))&&(h="prefixed",g=m[1]||"",d=this._unescape(m[2])):(h="prefix",d=m[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return e||!/^'''|^"""/.test(r)&&/\n|\r/.test(r)?o(this):this._input=r;const M=b||m[0].length,D=i(h,d,g,c,M);this.previousToken=D,this._previousMarker=h,r=r.substr(M,r.length)}function i(a,l,c,u,h){const d=r?s-r.length:s,m={type:a,value:l,prefix:c,line:u,start:d,end:d+h};return t(null,m),m}function o(a){t(a._syntaxError(/^\S*/.exec(r)[0]))}}_unescape(t){let e=!1;const r=t.replace(YK,(s,i,o,a)=>{if("string"==typeof i)return String.fromCharCode(Number.parseInt(i,16));if("string"==typeof o){let l=Number.parseInt(o,16);return l<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(1023&l))}return a in Tz?Tz[a]:(e=!0,"")});return e?null:r}_parseLiteral(t){if(t.length>=3){const e=t.match(/^(?:"""|"|'''|'|)/)[0],r=e.length;let s=Math.max(this._literalClosingPos,r);for(;(s=t.indexOf(e,s))>0;){let i=0;for(;"\\"===t[s-i-1];)i++;if(i%2==0){const o=t.substring(r,s),a=o.split(/\r\n|\r|\n/).length-1,l=s+r;if(1===r&&0!==a||3===r&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:l}}s++}this._literalClosingPos=t.length-r+1}return{value:"",matchLength:0}}_syntaxError(t){this._input=null;const e=new Error(`Unexpected "${t}" on line ${this._line}.`);return e.context={token:void 0,line:this._line,previousToken:this.previousToken},e}_readStartingBom(t){return t.startsWith("\ufeff")?t.substr(1):t}tokenize(t,e){if(this._line=1,"string"==typeof t){if(this._input=this._readStartingBom(t),"function"!=typeof e){const r=[];let s;if(this._tokenizeToEnd((i,o)=>i?s=i:r.push(o),!0),s)throw s;return r}queueMicrotask(()=>this._tokenizeToEnd(e,!0))}else this._pendingBuffer=null,"function"==typeof t.setEncoding&&t.setEncoding("utf8"),t.on("data",r=>{null!==this._input&&0!==r.length&&(this._pendingBuffer&&(r=XK.hp.concat([this._pendingBuffer,r]),this._pendingBuffer=null),128&r[r.length-1]?this._pendingBuffer=r:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof r?r:r.toString()):this._input+=r,this._tokenizeToEnd(e,!1)))}),t.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(e,!0)}),t.on("error",e)}}const{rdf:eq,xsd:e2}=Ya;let Uu,tq=0;const nq={namedNode:Dz,blankNode:Bz,variable:Fz,literal:Nz,defaultGraph:function oq(){return Uu},quad:g8,triple:g8,fromTerm:k0,fromQuad:Pz};class Sl{constructor(t){this.id=t}get value(){return this.id}equals(t){return t instanceof Sl?this.id===t.id:!!t&&this.termType===t.termType&&this.value===t.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class Lz extends Sl{get termType(){return"NamedNode"}}class $u extends Sl{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const t=this.id;let e=t.lastIndexOf('"')+1;return e<t.length&&"@"===t[e++]?t.substr(e).toLowerCase():""}get datatype(){return new Lz(this.datatypeString)}get datatypeString(){const t=this.id,e=t.lastIndexOf('"')+1,r=e<t.length?t[e]:"";return"^"===r?t.substr(e+2):"@"!==r?e2.string:eq.langString}equals(t){return t instanceof $u?this.id===t.id:!!t&&!!t.datatype&&this.termType===t.termType&&this.value===t.value&&this.language===t.language&&this.datatype.value===t.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class rq extends Sl{constructor(t){super(`_:${t}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class sq extends Sl{constructor(t){super(`?${t}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}Uu=new class iq extends Sl{constructor(){return super(""),Uu||this}get termType(){return"DefaultGraph"}equals(t){return this===t||!!t&&this.termType===t.termType}};class Rz extends Sl{constructor(t,e,r,s){super(""),this._subject=t,this._predicate=e,this._object=r,this._graph=s||Uu}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(t){return!!t&&this._subject.equals(t.subject)&&this._predicate.equals(t.predicate)&&this._object.equals(t.object)&&this._graph.equals(t.graph)}}function Dz(n){return new Lz(n)}function Bz(n){return new rq(n||"n3-"+tq++)}function Nz(n,t){if("string"==typeof t)return new $u(`"${n}"@${t.toLowerCase()}`);let e=t?t.value:"";return""===e&&("boolean"==typeof n?e=e2.boolean:"number"==typeof n&&(Number.isFinite(n)?e=Number.isInteger(n)?e2.integer:e2.double:(e=e2.double,Number.isNaN(n)||(n=n>0?"INF":"-INF")))),new $u(""===e||e===e2.string?`"${n}"`:`"${n}"^^${e}`)}function Fz(n){return new sq(n)}function g8(n,t,e,r){return new Rz(n,t,e,r)}function k0(n){if(n instanceof Sl)return n;switch(n.termType){case"NamedNode":return Dz(n.value);case"BlankNode":return Bz(n.value);case"Variable":return Fz(n.value);case"DefaultGraph":return Uu;case"Literal":return Nz(n.value,n.language||n.datatype);case"Quad":return Pz(n);default:throw new Error(`Unexpected termType: ${n.termType}`)}}function Pz(n){if(n instanceof Rz)return n;if("Quad"!==n.termType)throw new Error(`Unexpected termType: ${n.termType}`);return g8(k0(n.subject),k0(n.predicate),k0(n.object),k0(n.graph))}let Oz=0;class kz{constructor(t){this._contextStack=[],this._graph=null,this._setBase((t=t||{}).baseIRI),t.factory&&Gz(this,t.factory);const e="string"==typeof t.format?t.format.match(/\w*$/)[0].toLowerCase():"",r=/turtle/.test(e),s=/trig/.test(e),i=/triple/.test(e),o=/quad/.test(e),a=this._n3Mode=/n3/.test(e),l=i||o;(this._supportsNamedGraphs=!(r||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||s||i||a),this._isImpliedBy=t.isImpliedBy,this._supportsRDFStar=""===e||/star|\*$/.test(e),l&&(this._resolveRelativeIRI=c=>null),this._blankNodePrefix="string"!=typeof t.blankNodePrefix?"":t.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=t.lexer||new QK({lineMode:l,n3:a,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!t.explicitQuantifiers}static _resetBlankNodePrefix(){Oz=0}_setBase(t){if(t){const e=t.indexOf("#");e>=0&&(t=t.substr(0,e)),this._base=t,this._basePath=t.indexOf("/")<0?t:t.replace(/[^\/?]*(?:\?.*)?$/,""),t=t.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=t[0],this._baseScheme=t[1]}else this._base="",this._basePath=""}_saveContext(t,e,r,s,i){const o=this._n3Mode;this._contextStack.push({type:t,subject:r,predicate:s,object:i,graph:e,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(t,e){const r=this._contextStack.pop();if(!r||r.type!==t)return this._error(`Unexpected ${e.type}`,e);this._subject=r.subject,this._predicate=r.predicate,this._object=r.object,this._graph=r.graph,this._n3Mode&&(this._inversePredicate=r.inverse,this._prefixes._=r.blankPrefix,this._quantified=r.quantified)}_readInTopContext(t){switch(t.type){case"eof":return null!==this._graph?this._error("Unclosed graph",t):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(t)}}_readEntity(t,e){let r;switch(t.type){case"IRI":case"typeIRI":const s=this._resolveIRI(t.value);if(null===s)return this._error("Invalid IRI",t);r=this._factory.namedNode(s);break;case"type":case"prefixed":const i=this._prefixes[t.prefix];if(void 0===i)return this._error(`Undefined prefix "${t.prefix}:"`,t);r=this._factory.namedNode(i+t.value);break;case"blank":r=this._factory.blankNode(this._prefixes[t.prefix]+t.value);break;case"var":r=this._factory.variable(t.value.substr(1));break;default:return this._error(`Expected entity but got ${t.type}`,t)}return!e&&this._n3Mode&&r.id in this._quantified&&(r=this._quantified[r.id]),r}_readSubject(t){switch(this._predicate=null,t.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",t);case"}":return this._readPunctuation(t);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',t);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',t);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",t);if(0===t.prefix.length)return this._literalValue=t.value,this._completeSubjectLiteral;this._subject=this._factory.literal(t.value,this._factory.namedNode(t.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",t);default:if(void 0===(this._subject=this._readEntity(t)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(t){const e=t.type;switch(e){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[t.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${e}`,t):(this._subject=null,"]"===e?this._readBlankNodeTail(t):this._readPunctuation(t));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",t);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",t);default:if(void 0===(this._predicate=this._readEntity(t)))return}return this._readObject}_readObject(t){switch(t.type){case"literal":if(0===t.prefix.length)return this._literalValue=t.value,this._readDataTypeOrLang;this._object=this._factory.literal(t.value,this._factory.namedNode(t.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",t);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",t);default:if(void 0===(this._object=this._readEntity(t)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(t){return"{"===t.type?this._readGraph(t):this._readPredicate(t)}_readGraph(t){return"{"!==t.type?this._error(`Expected graph but got ${t.type}`,t):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(t){return"]"===t.type?(this._subject=null,this._readBlankNodeTail(t)):(this._predicate=null,this._readPredicate(t))}_readBlankNodeTail(t){if("]"!==t.type)return this._readBlankNodePunctuation(t);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const e=null===this._predicate;return this._restoreContext("blank",t),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:e?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(t){switch(t.type){case".":case"}":return this._subject=null,this._readPunctuation(t);default:return this._readPredicate(t)}}_readListItem(t){let e=null,r=null,s=this._readListItem;const i=this._subject,o=this._contextStack,a=o[o.length-1];switch(t.type){case"[":this._saveContext("blank",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this._subject=e=this._factory.blankNode()),s=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,r=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",t),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(s=this._readPredicate,this._subject===this.RDF_NIL)return s}else if(s=this._getContextEndReader(),this._object===this.RDF_NIL)return s;r=this.RDF_NIL;break;case"literal":0===t.prefix.length?(this._literalValue=t.value,s=this._readListItemDataTypeOrLang):(e=this._factory.literal(t.value,this._factory.namedNode(t.prefix)),s=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",t);default:if(void 0===(e=this._readEntity(t)))return}if(null===r&&(this._subject=r=this._factory.blankNode()),null===i?null===a.predicate?a.subject=r:a.object=r:this._emit(i,this.RDF_REST,r,this._graph),null!==e){if(this._n3Mode&&("IRI"===t.type||"prefixed"===t.type))return this._saveContext("item",this._graph,r,this.RDF_FIRST,e),this._subject=e,this._predicate=null,this._getPathReader(this._readListItem);this._emit(r,this.RDF_FIRST,e,this._graph)}return s}_readDataTypeOrLang(t){return this._completeObjectLiteral(t,!1)}_readListItemDataTypeOrLang(t){return this._completeObjectLiteral(t,!0)}_completeLiteral(t){let e=this._factory.literal(this._literalValue);switch(t.type){case"type":case"typeIRI":const r=this._readEntity(t);if(void 0===r)return;e=this._factory.literal(this._literalValue,r),t=null;break;case"langcode":e=this._factory.literal(this._literalValue,t.value),t=null}return{token:t,literal:e}}_completeSubjectLiteral(t){return this._subject=this._completeLiteral(t).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(t,e){const r=this._completeLiteral(t);if(r)return this._object=r.literal,e&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===r.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(r.token))}_readFormulaTail(t){return"}"!==t.type?this._readPunctuation(t):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",t),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(t){let e,r=this._graph;const s=this._subject,i=this._inversePredicate;switch(t.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",t);if(this._n3Mode)return this._readFormulaTail(t);this._graph=null;case".":this._subject=null,e=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":e=this._readPredicate;break;case",":e=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",t);this._subject=this._factory.quad(s,this._predicate,this._object,this.DEFAULTGRAPH),e=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",t);this._subject=null,e=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(r=this._readEntity(t))){e=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}if(null!==s){const o=this._predicate,a=this._object;i?this._emit(a,o,s,r):this._emit(s,o,a,r)}return e}_readBlankNodePunctuation(t){let e;switch(t.type){case";":e=this._readPredicate;break;case",":e=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}return this._emit(this._subject,this._predicate,this._object,this._graph),e}_readQuadPunctuation(t){return"."!==t.type?this._error("Expected dot to follow quad",t):this._readInTopContext}_readPrefix(t){return"prefix"!==t.type?this._error("Expected prefix to follow @prefix",t):(this._prefix=t.value,this._readPrefixIRI)}_readPrefixIRI(t){if("IRI"!==t.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,t);const e=this._readEntity(t);return this._prefixes[this._prefix]=e.value,this._prefixCallback(this._prefix,e),this._readDeclarationPunctuation}_readBaseIRI(t){const e="IRI"===t.type&&this._resolveIRI(t.value);return e?(this._setBase(e),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",t)}_readNamedGraphLabel(t){switch(t.type){case"IRI":case"blank":case"prefixed":return this._readSubject(t),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",t)}}_readNamedGraphBlankLabel(t){return"]"!==t.type?this._error("Invalid graph label",t):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(t){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(t)):"."!==t.type?this._error("Expected declaration to end with a dot",t):this._readInTopContext}_readQuantifierList(t){let e;switch(t.type){case"IRI":case"prefixed":if(void 0!==(e=this._readEntity(t,!0)))break;default:return this._error(`Unexpected ${t.type}`,t)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,e,this.QUANTIFIERS_GRAPH)):this._quantified[e.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(t){return","===t.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(t))}_getPathReader(t){return this._afterPath=t,this._readPath}_readPath(t){switch(t.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const e=this._contextStack,r=e.length&&e[e.length-1];if(r&&"item"===r.type){const s=this._subject;this._restoreContext("item",t),this._emit(this._subject,this.RDF_FIRST,s,this._graph)}return this._afterPath(t)}}_readForwardPath(t){let e,r;const s=this._factory.blankNode();if(void 0!==(r=this._readEntity(t)))return null===this._predicate?(e=this._subject,this._subject=s):(e=this._object,this._object=s),this._emit(e,r,s,this._graph),this._readPath}_readBackwardPath(t){const e=this._factory.blankNode();let r,s;if(void 0!==(r=this._readEntity(t)))return null===this._predicate?(s=this._subject,this._subject=e):(s=this._object,this._object=e),this._emit(e,r,s,this._graph),this._readPath}_readRDFStarTailOrGraph(t){return">>"!==t.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(t))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,t):this._readRDFStarTail(t)}_readRDFStarTail(t){if(">>"!==t.type)return this._error(`Expected >> but got ${t.type}`,t);const e=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",t),null===this._subject?(this._subject=e,this._readPredicate):(this._object=e,this._getContextEndReader())}_getContextEndReader(){const t=this._contextStack;if(!t.length)return this._readPunctuation;switch(t[t.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(t,e,r,s){this._callback(null,this._factory.quad(t,e,r,s||this.DEFAULTGRAPH))}_error(t,e){const r=new Error(`${t} on line ${e.line}.`);r.context={token:e,line:e.line,previousToken:this._lexer.previousToken},this._callback(r),this._callback=c5}_resolveIRI(t){return/^[a-z][a-z0-9+.-]*:/i.test(t)?t:this._resolveRelativeIRI(t)}_resolveRelativeIRI(t){if(!t.length)return this._base;switch(t[0]){case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return("/"===t[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return/^[^/:]*:/.test(t)?null:this._removeDotSegments(this._basePath+t)}}_removeDotSegments(t){if(!/(^|\/)\.\.?($|[/#?])/.test(t))return t;const e=t.length;let r="",s=-1,i=-1,o=0,a="/";for(;s<e;){switch(a){case":":if(i<0&&"/"===t[++s]&&"/"===t[++s])for(;(i=s+1)<e&&"/"!==t[i];)s=i;break;case"?":case"#":s=e;break;case"/":if("."===t[s+1])switch(a=t[1+ ++s],a){case"/":r+=t.substring(o,s-1),o=s+1;break;case void 0:case"?":case"#":return r+t.substring(o,s)+t.substr(s+1);case".":if(a=t[1+ ++s],void 0===a||"/"===a||"?"===a||"#"===a){if(r+=t.substring(o,s-2),(o=r.lastIndexOf("/"))>=i&&(r=r.substr(0,o)),"/"!==a)return`${r}/${t.substr(s+1)}`;o=s+1}}}a=t[++s]}return r+t.substring(o)}parse(t,e,r){let s,i,o;if(e&&(e.onQuad||e.onPrefix||e.onComment)?(s=e.onQuad,i=e.onPrefix,o=e.onComment):(s=e,i=r),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Oz++}_`,this._prefixCallback=i||c5,this._inversePredicate=!1,this._quantified=Object.create(null),!s){const l=[];let c;if(this._callback=(u,h)=>{u?c=u:h&&l.push(h)},this._lexer.tokenize(t).every(u=>this._readCallback=this._readCallback(u)),c)throw c;return l}let a=(l,c)=>{null!==l?(this._callback(l),this._callback=c5):this._readCallback&&(this._readCallback=this._readCallback(c))};o&&(this._lexer.comments=!0,a=(l,c)=>{null!==l?(this._callback(l),this._callback=c5):this._readCallback&&("comment"===c.type?o(c.value):this._readCallback=this._readCallback(c))}),this._callback=s,this._lexer.tokenize(t,a)}}function c5(){}function Gz(n,t){n._factory=t,n.DEFAULTGRAPH=t.defaultGraph(),n.RDF_FIRST=t.namedNode(Ya.rdf.first),n.RDF_REST=t.namedNode(Ya.rdf.rest),n.RDF_NIL=t.namedNode(Ya.rdf.nil),n.N3_FORALL=t.namedNode(Ya.r.forAll),n.N3_FORSOME=t.namedNode(Ya.r.forSome),n.ABBREVIATIONS={a:t.namedNode(Ya.rdf.type),"=":t.namedNode(Ya.owl.sameAs),">":t.namedNode(Ya.log.implies),"<":t.namedNode(Ya.log.isImpliedBy)},n.QUANTIFIERS_GRAPH=t.namedNode("urn:n3:quantifiers")}if(Gz(kz.prototype,nq),typeof Xc>"u")var Xc={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};class In{constructor(t,e){this.options=e||{},this.kb=t,this.target=e.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+(new Date).getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}addTriple(t,e,r,s){var i,o,a,l;i=typeof e>"u"?Xa.namedNode(this.options.base):this.toRDFNodeObject(e),a=this.toRDFNodeObject(r),o=this.toRDFNodeObject(s),l=Xa.namedNode(this.options.base),this.kb.add(i,a,o,l)}ancestorPath(t){for(var e="";t&&t.nodeType!==Xc.DOCUMENT_NODE;)e="/"+t.localName+e,t=t.parentNode;return e}copyMappings(t){var e={};for(var r in t)e[r]=t[r];return e}copyProperties(){}deriveDateTimeType(t){for(var e=0;e<In.dateTimeTypes.length;e++){var r=In.dateTimeTypes[e].pattern.exec(t);if(r&&r[0].length===t.length)return In.dateTimeTypes[e].type}return null}init(){}newBlankNode(){return this.blankCounter++,"_:"+this.blankCounter}newSubjectOrigin(t,e){}parseCURIE(t,e,r){var i,s=t.indexOf(":");if(s>=0){var o=t.substring(0,s);if(""===o)return(i=e[""])?i+t.substring(s+1):null;if("_"===o)return"_:"+t.substring(s+1);if(In.NCNAME.test(o)&&(i=e[o]))return i+t.substring(s+1)}return null}parseCURIEOrURI(t,e,r){return this.parseCURIE(t,e,r)||this.resolveAndNormalize(r,t)}parsePredicate(t,e,r,s,i,o){if(""===t)return null;var a=this.parseTermOrCURIEOrAbsURI(t,e,o?null:r,s,i);return a&&0===a.indexOf("_:")?null:a}parsePrefixMappings(t,e){for(var r=this.tokenize(t),s=null,i=0;i<r.length;i++)":"===r[i][r[i].length-1]?s=r[i].substring(0,r[i].length-1):s&&(e[s]=this.options.base?Go(r[i],this.options.base):r[i],s=null)}static parseRDFaDOM(t,e,r){var s=new In(e,{base:r});t.baseURI||(t.baseURI=r),s.process(t,{baseURI:r})}parseSafeCURIEOrCURIEOrURI(t,e,r){return"["===(t=this.trim(t)).charAt(0)&&"]"===t.charAt(t.length-1)?0===(t=(t=t.substring(1,t.length-1)).trim(t)).length?null:"_:"===t?this.theOne:this.parseCURIE(t,e,r):this.parseCURIEOrURI(t,e,r)}parseTermOrCURIEOrAbsURI(t,e,r,s,i){t=this.trim(t);var o=this.parseCURIE(t,s,i);if(o)return o;if(r){if(e&&!this.absURIRE.exec(t))return e+t;var a=r[t];if(a)return a;if(a=r[t.toLowerCase()])return a}return this.absURIRE.exec(t)?this.resolveAndNormalize(i,t):null}parseTermOrCURIEOrURI(t,e,r,s,i){t=this.trim(t);var o=this.parseCURIE(t,s,i);if(o)return o;var a=r[t];return a||(a=r[t.toLowerCase()])||(e&&!this.absURIRE.exec(t)?e+t:this.resolveAndNormalize(i,t))}parseURI(t){return t}process(t,e){var r;e=e||{},t.nodeType===Xc.DOCUMENT_NODE?(t.baseURI&&!e.baseURI&&(e.baseURI=t.baseURI),r=t.baseURI,(t=t.documentElement).baseURI||(t.baseURI=r),this.setContext(t)):t.parentNode.nodeType===Xc.DOCUMENT_NODE&&this.setContext(t);var s=[],i=function(Ot){if(!Ot&&e&&e.baseURI)return e.baseURI;var ts=Ot.indexOf("#");return ts>=0&&(Ot=Ot.substring(0,ts)),e&&e.baseURIMap&&(Ot=e.baseURIMap(Ot)),Ot};for(s.push({current:t,context:this.push(null,i(t.baseURI))});s.length>0;){var o=s.shift();if(o.parent){if(o.context.parent&&o.context.parent.listMapping===o.listMapping)continue;for(let Ot in o.listMapping){var a=o.listMapping[Ot];if(0!==a.length){var l=[];for(let ts=0;ts<a.length;ts++)l.push(this.newBlankNode());for(let ts=0;ts<l.length;ts++)this.addTriple(o.parent,l[ts],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",a[ts]),this.addTriple(o.parent,l[ts],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:In.objectURI,value:ts+1<l.length?l[ts+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(o.parent,o.subject,Ot,{type:In.objectURI,value:l[0]})}else this.addTriple(o.parent,o.subject,Ot,{type:In.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"})}}else{var c=o.current,u=o.context,h=!1,d=null,g=null,m=null,b=u.prefixes,V=!1,M=[],D=u.listMapping,J=!u.parent,X=u.language,G=u.vocabulary;r=this.parseURI(i(c.baseURI)),c.item=null;var K=c.getAttributeNode("vocab");if(K){let Ot=this.trim(K.value);Ot.length>0?this.addTriple(c,r.spec,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:In.objectURI,value:G=Ot}):G=this.vocabulary}for(var pe=0;pe<c.attributes.length;pe++){var Me=c.attributes[pe];if("x"===Me.nodeName.charAt(0)&&0===Me.nodeName.indexOf("xmlns:")){V||(b=this.copyMappings(b),V=!0);var ye=Me.nodeName.substring(6),Fe=In.trim(Me.value);b[ye]=this.options.base?Go(Fe,this.options.base):Fe}}var He=c.getAttributeNode("prefix");He&&(V||(b=this.copyMappings(b),V=!0),this.parsePrefixMappings(He.value,b));var ht=null;for(let Ot=0;!ht&&Ot<this.langAttributes.length;Ot++)ht=c.getAttributeNodeNS(this.langAttributes[Ot].namespaceURI,this.langAttributes[Ot].localName);if(ht){let Ot=In.trim(ht.value);X=Ot.length>0?Ot:null}var El,zo,dt=c.getAttributeNode("rel"),Ke=c.getAttributeNode("rev"),Zt=c.getAttributeNode("typeof"),dn=c.getAttributeNode("property"),Is=c.getAttributeNode("datatype"),Ms=this.inHTMLMode?c.getAttributeNode("datetime"):null,zs=c.getAttributeNode("content"),Vs=c.getAttributeNode("about"),Ai=c.getAttributeNode("src"),bi=c.getAttributeNode("resource"),Zi=c.getAttributeNode("href"),po=c.getAttributeNode("inlist"),ai=[];if(dt){zo=this.tokenize(dt.value);for(let Ot=0;Ot<zo.length;Ot++)(El=this.parsePredicate(zo[Ot],G,u.terms,b,r,this.inHTMLMode&&null!==dn))&&ai.push(El)}var Ll=[];if(Ke){zo=this.tokenize(Ke.value);for(let Ot=0;Ot<zo.length;Ot++)(El=this.parsePredicate(zo[Ot],G,u.terms,b,r,this.inHTMLMode&&dn))&&Ll.push(El)}if(this.inHTMLMode&&(dt||Ke)&&dn&&(0===ai.length&&(dt=null),0===Ll.length&&(Ke=null)),dt||Ke?(Vs&&(d=this.parseSafeCURIEOrCURIEOrURI(Vs.value,b,r)),Zt&&(m=d),d||(c.parentNode.nodeType===Xc.DOCUMENT_NODE?d=i(c.baseURI):u.parentObject&&(d=i(c.parentNode.baseURI)===u.parentObject?i(c.baseURI):u.parentObject)),bi&&(g=this.parseSafeCURIEOrCURIEOrURI(bi.value,b,r)),g||(Zi?g=this.resolveAndNormalize(r,encodeURI(Zi.value)):Ai?g=this.resolveAndNormalize(r,encodeURI(Ai.value)):Zt&&!Vs&&!(this.inXHTMLMode&&("head"===c.localName||"body"===c.localName))&&(g=this.newBlankNode())),!Zt||Vs||!this.inXHTMLMode||"head"!==c.localName&&"body"!==c.localName?Zt&&!Vs&&(m=g):m=d):!dn||zs||Is?(Vs&&(d=this.parseSafeCURIEOrCURIEOrURI(Vs.value,b,r)),!d&&bi&&(d=this.parseSafeCURIEOrCURIEOrURI(bi.value,b,r)),!d&&Zi&&(d=this.resolveAndNormalize(r,encodeURI(Zi.value))),!d&&Ai&&(d=this.resolveAndNormalize(r,encodeURI(Ai.value))),d||(c.parentNode.nodeType===Xc.DOCUMENT_NODE?d=i(c.baseURI):!this.inXHTMLMode&&!this.inHTMLMode||"head"!==c.localName&&"body"!==c.localName?Zt?d=this.newBlankNode():u.parentObject&&(d=i(c.parentNode.baseURI)===u.parentObject?i(c.baseURI):u.parentObject,dn||(h=!0)):d=i(c.parentNode.baseURI)===u.parentObject?i(c.baseURI):u.parentObject),Zt&&(m=d)):(Vs&&(d=this.parseSafeCURIEOrCURIEOrURI(Vs.value,b,r),Zt&&(m=d)),d||c.parentNode.nodeType!==Xc.DOCUMENT_NODE?!d&&u.parentObject&&(d=i(c.parentNode.baseURI)===u.parentObject?i(c.baseURI):u.parentObject):(d=i(c.baseURI),Zt&&(m=d)),Zt&&!m&&(bi&&(m=this.parseSafeCURIEOrCURIEOrURI(bi.value,b,r)),!m&&Zi&&(m=this.resolveAndNormalize(r,encodeURI(Zi.value))),!m&&Ai&&(m=this.resolveAndNormalize(r,encodeURI(Ai.value))),!m&&(this.inXHTMLMode||this.inHTMLMode)&&("head"===c.localName||"body"===c.localName)&&(m=d),m||(m=this.newBlankNode()),g=m)),d&&(Vs||bi||m)){var Ch=d;Zt&&!Vs&&!bi&&g&&(Ch=g),this.newSubjectOrigin(c,Ch)}if(m){zo=this.tokenize(Zt.value);for(let Ot=0;Ot<zo.length;Ot++){var JL=this.parseTermOrCURIEOrAbsURI(zo[Ot],G,u.terms,b,r);JL&&this.addTriple(c,m,In.typeURI,{type:In.objectURI,value:JL})}}if(d&&d!==u.parentObject&&(D={},J=!0),g){if(dt&&po)for(let Ot=0;Ot<ai.length;Ot++){let ts=D[ai[Ot]];ts||(ts=[],D[ai[Ot]]=ts),ts.push({type:In.objectURI,value:g})}else if(dt)for(let Ot=0;Ot<ai.length;Ot++)this.addTriple(c,d,ai[Ot],{type:In.objectURI,value:g});if(Ke)for(let Ot=0;Ot<Ll.length;Ot++)this.addTriple(c,g,Ll[Ot],{type:In.objectURI,value:d})}else{if(d&&!g&&(dt||Ke)&&(g=this.newBlankNode()),dt&&po)for(let Ot=0;Ot<ai.length;Ot++){let ts=D[ai[Ot]];ts||(ts=[],D[El]=ts),M.push({predicate:ai[Ot],list:ts})}else if(dt)for(let Ot=0;Ot<ai.length;Ot++)M.push({predicate:ai[Ot],forward:!0});if(Ke)for(let Ot=0;Ot<Ll.length;Ot++)M.push({predicate:Ll[Ot],forward:!1})}if(dn){var li=null,go=null;Is?(li=""===Is.value?In.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(Is.value,G,u.terms,b,r),go=Ms&&!zs?Ms.value:li===In.XMLLiteralURI||li===In.HTMLLiteralURI?null:zs?zs.value:c.textContent):zs?(li=In.PlainLiteralURI,go=zs.value):Ms?(li=In.deriveDateTimeType(go=Ms.value))||(li=In.PlainLiteralURI):!dt&&!Ke&&(bi&&(go=this.parseSafeCURIEOrCURIEOrURI(bi.value,b,r)),!go&&Zi?go=this.resolveAndNormalize(r,encodeURI(Zi.value)):!go&&Ai&&(go=this.resolveAndNormalize(r,encodeURI(Ai.value))),go&&(li=In.objectURI)),li||(Zt&&!Vs?(li=In.objectURI,go=m):(go=c.textContent,this.inHTMLMode&&"time"===c.localName&&(li=In.deriveDateTimeType(go)),li||(li=In.PlainLiteralURI))),zo=this.tokenize(dn.value);for(let Ot=0;Ot<zo.length;Ot++){let ts=this.parsePredicate(zo[Ot],G,u.terms,b,r);if(ts)if(po){let c3=D[ts];c3||(c3=[],D[ts]=c3),c3.push(li===In.XMLLiteralURI||li===In.HTMLLiteralURI?{type:li,value:c.childNodes}:{type:li||In.PlainLiteralURI,value:go,language:X})}else this.addTriple(c,d,ts,li===In.XMLLiteralURI||li===In.HTMLLiteralURI?{type:li,value:c.childNodes}:{type:li||In.PlainLiteralURI,value:go,language:X})}}if(d&&!h)for(let Ot=0;Ot<u.incomplete.length;Ot++)u.incomplete[Ot].list?u.incomplete[Ot].list.push({type:In.objectURI,value:d}):u.incomplete[Ot].forward?this.addTriple(c,u.subject,u.incomplete[Ot].predicate,{type:In.objectURI,value:d}):this.addTriple(c,d,u.incomplete[Ot].predicate,{type:In.objectURI,value:u.subject});var jo=null,QL=d;h?((jo=this.push(u,u.subject)).parentObject=i(c.parentNode.baseURI)===u.parentObject?i(c.baseURI):u.parentObject,jo.incomplete=u.incomplete,jo.language=X,jo.prefixes=b,jo.vocabulary=G):((jo=this.push(u,d)).parentObject=g||d||u.subject,jo.prefixes=b,jo.incomplete=M,g&&(QL=g,D={},J=!0),jo.listMapping=D,jo.language=X,jo.vocabulary=G),J&&s.unshift({parent:c,context:u,subject:QL,listMapping:D});for(var vp=c.lastChild;vp;vp=vp.previousSibling)vp.nodeType===Xc.ELEMENT_NODE&&s.unshift({current:vp,context:jo})}}this.inHTMLMode&&this.copyProperties();for(let Ot=0;Ot<this.finishedHandlers.length;Ot++)this.finishedHandlers[Ot](t)}push(t,e){return{parent:t,subject:e||(t?t.subject:null),parentObject:null,incomplete:[],listMapping:t?t.listMapping:{},language:t?t.language:this.language,prefixes:t?t.prefixes:this.target.graph.prefixes,terms:t?t.terms:this.target.graph.terms,vocabulary:t?t.vocabulary:this.vocabulary}}resolveAndNormalize(t,e){return Go(e,t)}setContext(t){"html"===t.localName&&"XHTML+RDFa 1.1"===t.getAttribute("version")?this.setXHTMLContext():"html"===t.localName||"http://www.w3.org/1999/xhtml"===t.namespaceURI?typeof document<"u"&&document.doctype?"-//W3C//DTD XHTML+RDFa 1.0//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"===document.doctype.systemId?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):"-//W3C//DTD XHTML+RDFa 1.1//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"===document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}setHTMLContext(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}setInitialContext(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}setXHTMLContext(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}setXMLContext(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}tokenize(t){return this.trim(t).split(/\s+/)}static tokenize(t){return this.trim(t).split(/\s+/)}toRDFNodeObject(t){if(!(typeof t>"u")){if("string"==typeof t)return"_:"===t.substring(0,2)?(typeof this.blankNodes[t.substring(2)]>"u"&&(this.blankNodes[t.substring(2)]=new ro(t.substring(2))),this.blankNodes[t.substring(2)]):Xa.namedNode(t);switch(t.type){case In.objectURI:return"_:"===t.value.substring(0,2)?(typeof this.blankNodes[t.value.substring(2)]>"u"&&(this.blankNodes[t.value.substring(2)]=new ro(t.value.substring(2))),this.blankNodes[t.value.substring(2)]):Xa.namedNode(t.value);case In.PlainLiteralURI:return new Ws(t.value,t.language||"");case In.XMLLiteralURI:case In.HTMLLiteralURI:var e="";return Object.keys(t.value).forEach(r=>{e+=Zo.jI(t.value[r],this.htmlOptions)}),new Ws(e,"",new co.A(t.type));default:return new Ws(t.value,"",new co.A(t.type))}}}trim(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}static trim(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}In.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral",In.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML",In.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",In.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object",In.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",In.nameChar="[-A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u10000-\uefffF.0-9\xb7\u0300-\u036f\u203f-\u2040]",In.nameStartChar="[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3\u4e00-\u9fa5\u3007\u3021-\u3029_]",In.NCNAME=new RegExp("^"+In.nameStartChar+In.nameChar+"*$"),In.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];const u5=In.parseRDFaDOM;class Qn{constructor(t){this.store=t,this.bnodes={},this.why=null,this.reify=!1}frameFactory(t,e,r){return{NODE:1,ARC:2,parent:e,parser:t,store:t.store,element:r,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(s,i){i=Go(i,this.base),this.node=this.store.sym(i),this.nodeType=s},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),null!=this.parent.rdfid){var s=this.store.sym(Go("#"+this.parent.rdfid,this.base));this.store.add(s,this.store.sym(Qn.ns.RDF+"type"),this.store.sym(Qn.ns.RDF+"Statement"),this.parser.why),this.store.add(s,this.store.sym(Qn.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(s,this.store.sym(Qn.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(s,this.store.sym(Qn.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return null!=this.parent&&null!=this.parent.parent&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(s){this.addSymbol(this.NODE,s),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(s){this.node=null!=s?null!=this.parser.bnodes[s]?this.parser.bnodes[s]:this.parser.bnodes[s]=this.store.bnode():this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(s){s===Qn.ns.RDF+"li"&&(s=Qn.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,s)},addLiteral:function(s){this.node=this.store.literal(s,this.parent.datatype&&this.parent.datatype!==Qn.ns.RDF+"langString"?this.store.sym(this.parent.datatype):this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}}getAttributeNodeNS(t,e,r){var s=null;if(t.getAttributeNodeNS)s=t.getAttributeNodeNS(e,r);else for(var o,i=t.attributes,l=0;l<i.length;++l)if((o=i[l]).namespaceURI===e&&(o.prefix?o.prefix+":"+r:r)===o.nodeName){s=o;break}return s}parse(t,e,r){var i,s=t.childNodes;if(this.cleanParser(),t.nodeType===Qn.nodeType.DOCUMENT){for(var o=0;o<s.length;o++)if(s[o].nodeType===Qn.nodeType.ELEMENT){i=s[o];break}}else{if(t.nodeType!==Qn.nodeType.ELEMENT)throw new Error("RDFParser: can't find root in "+e+". Halting. ");i=t}this.why=r;var a=this.frameFactory(this);return this.base=e,a.base=e,a.lang=null,this.parseDOM(this.buildFrame(a,i)),!0}parseDOM(t){for(var e,r=function(X){var G="";if(null==X.namespaceURI)throw new Error("RDF/XML syntax error: No namespace for "+X.localName+" in "+this.base);return X.namespaceURI&&(G+=X.namespaceURI),X.localName?G+=X.localName:X.nodeName&&(X.nodeName.indexOf(":")>=0?G+=X.nodeName.split(":")[1]:G+=X.nodeName),G}.bind(this),s=!0;t.parent;){var i=t.element,o=i.attributes;if(i.nodeType===Qn.nodeType.TEXT||i.nodeType===Qn.nodeType.CDATA_SECTION)t.parent.nodeType===t.NODE&&(t.addArc(Qn.ns.RDF+"value"),t=this.buildFrame(t)),t.addLiteral(i.nodeValue);else if(r(i)!==Qn.ns.RDF+"RDF")if(t.parent&&t.parent.collection&&(t.addCollectionArc(),(t=this.buildFrame(t,t.element)).parent.element=null),t.parent&&t.parent.nodeType&&t.parent.nodeType!==t.ARC){t.addArc(r(i)),this.reify&&(e=this.getAttributeNodeNS(i,Qn.ns.RDF,"ID"))&&(t.rdfid=e.nodeValue,i.removeAttributeNode(e));var h=this.getAttributeNodeNS(i,Qn.ns.RDF,"parseType"),d=this.getAttributeNodeNS(i,Qn.ns.RDF,"datatype");if(d&&(t.datatype=d.nodeValue,i.removeAttributeNode(d)),h){var g=h.nodeValue;"Literal"===g?(t.datatype=Qn.ns.RDF+"XMLLiteral",(t=this.buildFrame(t)).addLiteral(i.innerHTML||i.childNodes),s=!1):"Resource"===g?((t=this.buildFrame(t,t.element)).parent.element=null,t.addBNode()):"Collection"===g&&((t=this.buildFrame(t,t.element)).parent.element=null,t.addCollection()),i.removeAttributeNode(h)}if(0!==o.length){var m=this.getAttributeNodeNS(i,Qn.ns.RDF,"resource"),b=this.getAttributeNodeNS(i,Qn.ns.RDF,"nodeID");t=this.buildFrame(t),m?(t.addNode(m.nodeValue),i.removeAttributeNode(m)):b?(t.addBNode(b.nodeValue),i.removeAttributeNode(b)):t.addBNode();for(var V=o.length-1;V>=0;V--){var M=this.buildFrame(t);M.addArc(r(o[V])),r(o[V])===Qn.ns.RDF+"type"?this.buildFrame(M).addNode(o[V].nodeValue):this.buildFrame(M).addLiteral(o[V].nodeValue)}}else 0===i.childNodes.length&&this.buildFrame(t).addLiteral("")}else{var a=this.getAttributeNodeNS(i,Qn.ns.RDF,"about");if(e=this.getAttributeNodeNS(i,Qn.ns.RDF,"ID"),a&&e)throw new Error("RDFParser: "+i.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!a&&e)t.addNode("#"+e.nodeValue),i.removeAttributeNode(e);else if(null==a&&null==e){var l=this.getAttributeNodeNS(i,Qn.ns.RDF,"nodeID");l?(t.addBNode(l.nodeValue),i.removeAttributeNode(l)):t.addBNode()}else t.addNode(a.nodeValue),i.removeAttributeNode(a);var c=this.getAttributeNodeNS(i,Qn.ns.RDF,"type");Qn.ns.RDF+"Description"!==r(i)&&(c={nodeValue:r(i)}),null!=c&&(this.store.add(t.node,this.store.sym(Qn.ns.RDF+"type"),this.store.sym(Go(c.nodeValue,t.base)),this.why),c.nodeName&&i.removeAttributeNode(c));for(var u=o.length-1;u>=0;u--)this.store.add(t.node,this.store.sym(r(o[u])),this.store.literal(o[u].nodeValue,t.lang),this.why)}for(i=t.element;t.parent;){for(var D=t;null==i;)i=(t=t.parent).element;var J=i.childNodes&&i.childNodes[t.lastChild];if(J&&s){if((J.nodeType===Qn.nodeType.ELEMENT||J.nodeType===Qn.nodeType.TEXT||J.nodeType===Qn.nodeType.CDATA_SECTION)&&(J.nodeType!==Qn.nodeType.TEXT&&J.nodeType!==Qn.nodeType.CDATA_SECTION||1===i.childNodes.length)){t.lastChild++,t=this.buildFrame(D,i.childNodes[t.lastChild-1]);break}t.lastChild++}else{if(t.terminateFrame(),!(t=t.parent))break;i=t.element,s=!0}}}}cleanParser(){this.bnodes={},this.why=null}buildFrame(t,e){var r=this.frameFactory(this,t,e);if(t&&(r.base=t.base,r.lang=t.lang),!e||e.nodeType===Qn.nodeType.TEXT||e.nodeType===Qn.nodeType.CDATA_SECTION)return r;var s=e.attributes,i=e.getAttributeNode("xml:base");null!=i&&(r.base=i.nodeValue,e.removeAttribute("xml:base"));var o=e.getAttributeNode("xml:lang");null!=o&&(r.lang=o.nodeValue,e.removeAttribute("xml:lang"));for(var a=s.length-1;a>=0;a--)if("xml"===s[a].nodeName.substr(0,3)){if("xmlns:"===s[a].name.slice(0,6)){var l=s[a].nodeValue;this.base&&(l=Go(l,this.base)),this.store.setPrefixForURI(s[a].name.slice(6),l)}e.removeAttributeNode(s[a])}return r}}function h5(n,t,e){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text/turtle",s=arguments.length>4?arguments[4]:void 0;r=r||hn.sT,r=r.split(";")[0];try{if(r===hn.ny||r===hn.sT)l8(t,t,e,e,null,null,"",null).loadBuf(n),l();else if(r===hn.JG)new Qn(t).parse(Zo.h4(n),e,t.sym(e)),l();else if(r===hn.H)u5(Zo.h4(n,{contentType:hn.H}),t,e),l();else if(r===hn.lc)u5(Zo.h4(n,{contentType:hn.lc}),t,e),l();else if(r===hn.K9||r===hn.Fn)(function aq(n,t,e){var r,s,i,o=["INSERT","DELETE","WHERE"],a=Mr("http://www.w3.org/ns/pim/patch#"),l=l8(t,t,e,e,null,null,"",null),c={},u=function(b,V,M,D,J){return"Line "+(V+1)+" of <"+b+">: Bad syntax:\n   "+J+'\n   at: "'+M.slice(D,D+30)+'"'};r=0;var h=t.sym(e+"#query");for(c.query=h;;){if((s=l.skipSpace(n,r))<0)return c;if(";"===n[s]){if((r=l.skipSpace(n,s+1))<0)return c;s=r}var d=!1;for(i=0;i<o.length;i++){var g=o[i];if(n.slice(s,s+g.length)===g){if((r=l.skipSpace(n,s+g.length))<0)throw u(l._thisDoc,l.lines,n,s+g.length,"found EOF, needed {...} after "+g);if(("INSERT"===g||"DELETE"===g)&&"DATA"===n.slice(r,r+4)){if((s=l.skipSpace(n,r+4))<0)throw u(l._thisDoc,l.lines,n,r+4,"needed {...} after INSERT DATA "+g);r=s}var m=[];if((s=l.node(n,r,m))<0)throw u(l._thisDoc,l.lines,n,r,"bad syntax or EOF in {...} after "+g);c[g.toLowerCase()]=m[0],t.add(h,a(g.toLowerCase()),m[0]),d=!0,r=s}}if(!d&&"@prefix"===n.slice(s,s+7)){if((r=l.directive(n,s))<0)throw u(l._thisDoc,l.lines,n,r,"bad syntax or EOF after @prefix ");r=l.checkDot(n,r),d=!0}if(!d)throw u(l._thisDoc,l.lines,n,s,"Unknown syntax at start of statememt: '"+n.slice(s).slice(0,20)+"'")}})(n,t,e),l();else if(r===hn.i2)Mz(n,t,e).then(l).catch(c);else{if(r!==hn._0&&r!==hn.BR)throw void 0===r?new Error("contentType is undefined"):new Error("Don't know how to parse "+r+" yet");var a=new kz({factory:c8});!function u(d,g){d&&s(d,t);try{a.parse(g,h)}catch(m){s(m,t)}}(null,n)}}catch(d){c(d)}function l(){s&&s(null,t)}function c(d){if(r!==hn.i2||r!==hn._0||r!==hn.BR){if(!s){let g=new Error(d+" while trying to parse <"+e+"> as "+r);throw g.cause=d,g}s(d,t)}}function h(d,g){g?t.add(g.subject,g.predicate,g.object,g.graph):s(d,t)}h5.handled={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/sparql-update":!0,"application/sparql-update-single-match":!0,"application/ld+json":!0,"application/nquads":!0,"application/n-quads":!0}}(0,xt.A)(Qn,"ns",{RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"}),(0,xt.A)(Qn,"nodeType",{ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12});var f8=Ve(8868),lq=Ve.n(f8),Xu=Ve(79);const cq={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},Wz={rdf:hn.JG,owl:hn.JG,n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"},Zz=n=>({link:Mr("http://www.w3.org/2007/ont/link#",n),http:Mr("http://www.w3.org/2007/ont/http#",n),httph:Mr("http://www.w3.org/2007/ont/httph#",n),rdf:Mr("http://www.w3.org/1999/02/22-rdf-syntax-ns#",n),rdfs:Mr("http://www.w3.org/2000/01/rdf-schema#",n),dc:Mr("http://purl.org/dc/elements/1.1/",n),ldp:Mr("http://www.w3.org/ns/ldp#",n)}),Ha=Zz();class Yc{constructor(t,e){(0,xt.A)(this,"response",void 0),(0,xt.A)(this,"dom",void 0),this.response=t,this.dom=e}}(0,xt.A)(Yc,"pattern",void 0);class m8 extends Yc{static toString(){return"RDFXMLHandler"}static register(t){t.mediatypes[hn.JG]={q:.9}}parse(t,e,r){let s=t.store;if(this.dom||(this.dom=Zo.h4(e)),"parsererror"===this.dom.documentElement.nodeName)return t.failFetch(r,"Badly formed XML in "+r.resource.value,"parse_error");let o=new Qn(s);try{o.parse(this.dom,r.original.value,r.original)}catch(a){return t.failFetch(r,"Syntax error parsing RDF/XML! "+a,"parse_error")}return r.noMeta||s.add(r.original,Ha.rdf("type"),Ha.link("RDFDocument"),t.appNode),t.doneFetch(r,this.response)}}m8.pattern=new RegExp("application/rdf\\+xml");class t2 extends Yc{static toString(){return"XHTMLHandler"}static register(t){t.mediatypes[hn.H]={q:.8}}parse(t,e,r){let s,i;this.dom||(this.dom=Zo.h4(e));let o=t.store,a=this.dom.getElementsByTagName("title");a.length>0&&o.add(r.resource,Ha.dc("title"),o.rdfFactory.literal(a[0].textContent),r.resource);let l=this.dom.getElementsByTagName("link");for(let u=l.length-1;u>=0;u--)s=l[u].getAttribute("rel"),i=!1,s||(s=l[u].getAttribute("rev"),i=!0),s&&t.linkData(r.original,s,l[u].getAttribute("href"),r.resource,i);let c=this.dom.getElementsByTagName("script");for(let u=0;u<c.length;u++){let h=c[u].getAttribute("type");cq[h]&&(h5(c[u].textContent,o,r.original.value,h),h5(c[u].textContent,o,r.original.value,h))}if(r.noMeta||o.add(r.resource,Ha.rdf("type"),Ha.link("WebPage"),t.appNode),!r.noRDFa&&u5)try{u5(this.dom,o,r.original.value)}catch(u){return t.failFetch(r,"Error trying to parse "+r.resource+" as RDFa:\n"+u+":\n"+u.stack,"parse_error")}return t.doneFetch(r,this.response)}}t2.pattern=new RegExp("application/xhtml");class Yu extends Yc{static toString(){return"XMLHandler"}static register(t){t.mediatypes["text/xml"]={q:.5},t.mediatypes["application/xml"]={q:.5}}static isElement(t){return t.nodeType===Node.ELEMENT_NODE}parse(t,e,r){let s=Zo.h4(e);for(let o=0;o<s.childNodes.length;o++){const a=s.childNodes[o];if(Yu.isElement(a)){let l=a.namespaceURI;if(l&&l===l.rdf)return t.addStatus(r.req,"Has XML root element in the RDF namespace, so assume RDF/XML."),new m8(this.response,s).parse(t,e,r);break}}if(s.doctype&&"html"===s.doctype.name&&s.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&s.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/))return t.addStatus(r.req,"Has XHTML DOCTYPE. Switching to XHTML Handler.\n"),new t2(this.response,s).parse(t,e,r);let i=s.getElementsByTagName("html")[0];if(i){let o=i.getAttribute("xmlns");if(o&&o.match(/^http:\/\/www.w3.org\/1999\/xhtml/))return t.addStatus(r.req,"Has a default namespace for XHTML. Switching to XHTMLHandler.\n"),new t2(this.response,s).parse(t,e,r)}return t.failFetch(r,"Unsupported dialect of XML: not RDF or XHTML namespace, etc.\n"+e.slice(0,80),901)}}Yu.pattern=new RegExp("(text|application)/(.*)xml");class jz extends Yc{static toString(){return"HTMLHandler"}static register(t){t.mediatypes["text/html"]={q:.8}}parse(t,e,r){let s=t.store;if(Xz(e))return t.addStatus(r.req,"Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.\n"),new t2(this.response).parse(t,e,r);if(function hq(n){const t=n.indexOf("<!DOCTYPE html"),e=n.indexOf(">");return!(-1===t||-1===e||t>e)&&-1!==n.substr(t,e-t).indexOf("XHTML")}(e))return t.addStatus(r.req,"Has XHTML DOCTYPE. Switching to XHTMLHandler.\n"),new t2(this.response).parse(t,e,r);if(function dq(n){return!!n.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/)}(e))return t.addStatus(r.req,"Has default namespace for XHTML, so switching to XHTMLHandler.\n"),new t2(this.response).parse(t,e,r);let i=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(e);return i&&s.add(r.resource,Ha.dc("title"),s.rdfFactory.literal(i[1]),r.resource),s.add(r.resource,Ha.rdf("type"),Ha.link("WebPage"),t.appNode),t.addStatus(r.req,"non-XML HTML document, not parsed for data."),t.doneFetch(r,this.response)}}jz.pattern=new RegExp("text/html");let uq=(()=>{class n extends Yc{static toString(){return"JsonLdHandler"}static register(e){e.mediatypes["application/ld+json"]={q:.9}}parse(e,r,s,i){return(0,lo.A)(function*(){const o=e.store;try{return yield Mz(r,o,s.original.value),e.store.add(s.original,Ha.rdf("type"),Ha.link("RDFDocument"),e.appNode),e.doneFetch(s,i)}catch(a){return e.failFetch(s,"Error trying to parse "+s.resource+" as JSON-LD:\n"+a,"parse_error",i)}})()}}return n.pattern=/application\/(ld\+json|activity\+json)/,n})();class Uz extends Yc{static toString(){return"TextHandler"}static register(t){t.mediatypes["text/plain"]={q:.5}}parse(t,e,r){return Xz(e)?(t.addStatus(r.req,"Warning: "+r.resource+" has an XML declaration. We'll assume it's XML but its content-type wasn't XML.\n"),new Yu(this.response).parse(t,e,r)):e.slice(0,500).match(/xmlns:/)?(t.addStatus(r.req,"May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.\n"),new Yu(this.response).parse(t,e,r)):(t.addStatus(r.req,"Plain text document, no known RDF semantics."),t.doneFetch(r,this.response))}}Uz.pattern=new RegExp("text/plain");class $z extends Yc{static toString(){return"N3Handler"}static register(t){t.mediatypes["text/n3"]={},t.mediatypes["text/turtle"]={}}parse(t,e,r,s){let i=t.store,o=l8(i,i,r.original.value,r.original.value,null,null,"",null);try{o.loadBuf(e)}catch(a){return t.failFetch(r,"Error trying to parse "+r.resource+" as Notation3:\n"+a,"parse_error",s)}return t.addStatus(r.req,"N3 parsed: "+o.statementCount+" triples in "+o.lines+" lines."),t.store.add(r.original,Ha.rdf("type"),Ha.link("RDFDocument"),t.appNode),t.doneFetch(r,this.response)}}$z.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)");const v8={RDFXMLHandler:m8,XHTMLHandler:t2,XMLHandler:Yu,HTMLHandler:jz,TextHandler:Uz,N3Handler:$z,JsonLdHandler:uq};function Xz(n){return!!n.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/)}class Ci{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,xt.A)(this,"store",void 0),(0,xt.A)(this,"timeout",void 0),(0,xt.A)(this,"_fetch",void 0),(0,xt.A)(this,"mediatypes",void 0),(0,xt.A)(this,"appNode",void 0),(0,xt.A)(this,"requested",void 0),(0,xt.A)(this,"timeouts",void 0),(0,xt.A)(this,"redirectedTo",void 0),(0,xt.A)(this,"fetchQueue",void 0),(0,xt.A)(this,"fetchCallbacks",void 0),(0,xt.A)(this,"nonexistent",void 0),(0,xt.A)(this,"lookedUp",void 0),(0,xt.A)(this,"handlers",void 0),(0,xt.A)(this,"ns",void 0),(0,xt.A)(this,"fireCallbacks",void 0),this.store=t||new xl,this.ns=Zz(this.store.rdfFactory),this.timeout=e.timeout||3e4,this._fetch=e.fetch||typeof global<"u"&&(global.solidFetcher||global.solidFetch)||typeof window<"u"&&(window.solidFetcher||window.solidFetch)||lq(),!this._fetch)throw new Error("No _fetch function available for Fetcher");this.appNode=this.store.sym("chrome://TheCurrentSession"),this.store.fetcher=this,this.requested={},this.timeouts={},this.redirectedTo={},this.fetchQueue={},this.fetchCallbacks={},this.nonexistent={},this.lookedUp={},this.handlers=[],this.mediatypes={"image/*":{q:.9},"*/*":{q:.1}},Zo.Kw(this,["request","fail","refresh","retract","done"]),Object.keys(e.handlers||v8).map(r=>this.addHandler(v8[r]))}static crossSiteProxy(t){if(Ci.crossSiteProxyTemplate)return Ci.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(t))}static offlineOverride(t){let e=t;var r;return typeof window<"u"&&window.panes&&(r=window.panes.UI)&&r.preferences&&r.preferences.get("offlineModeUsingLocalhost")&&"http://"===e.slice(0,7)&&"localhost/"!==e.slice(7,17)&&(e="http://localhost/"+e.slice(7),Gi.warn("Localhost kludge for offline use: actually getting <"+e+">")),e}static proxyIfNecessary(t){var e;if(typeof window<"u"&&window.panes&&(e=window.panes.UI)&&e.isExtension)return t;if(typeof $SolidTestEnvironment<"u"&&$SolidTestEnvironment.localSiteMap){let r=t.split("/").slice(2);const s=(o,a)=>{let l=a[o.shift()];return l?"string"==typeof l?l+o.join("/"):o?s(o,l):null:null},i=s(r,$SolidTestEnvironment.localSiteMap);if(i)return i}return Ci.crossSiteProxyTemplate&&typeof document<"u"&&document.location&&"https:"===(""+document.location).slice(0,6)&&"http:"===t.slice(0,5)?Ci.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(t)):t}static unsupportedProtocol(t){let e=gz(t);return"tel"===e||"mailto"===e||"urn"===e}static setCredentials(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0===e.credentials&&(e.credentials=void 0!==e.withCredentials?e.withCredentials?"include":"omit":"include")}load(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=Object.assign({},e),t instanceof Array)return Promise.all(t.map(c=>this.load(c,Object.assign({},e))));let s=(0,Xu.E)(t);s=s.split("#")[0],e=this.initFetchOptions(s,e);const i=this.appNode,o=this.store,a=o.statementsMatching(void 0,this.ns.link("requestedURI"),o.sym(s),i).map(c=>c.subject);for(const c of a){const u=o.any(c,this.ns.link("response"),null,i);if(null!=u){const h=o.statementsMatching(u,this.ns.link("outOfDate"),!0,i);o.remove(h),e.force=!0,e.clearPreviousData=!0}}const l=this.initFetchOptions(s,e);return this.pendingFetchPromise(s,l.baseURI,l)}pendingFetchPromise(t,e,r){var s=this;return(0,lo.A)(function*(){let i;return!r.force&&(yield s.fetchQueue[e])?i=s.fetchQueue[e]:(i=Promise.race([s.setRequestTimeout(t,r),s.fetchUri(t,r)]),s.fetchQueue[e]=i,s.cleanupFetchRequest(e,void 0,s.timeout)),i.then(o=>(t in s.timeouts&&(s.timeouts[t].forEach(clearTimeout),delete s.timeouts[t]),o))})()}cleanupFetchRequest(t,e,r){void 0!==e&&console.warn("_options is deprecated"),this.timeouts[t]=(this.timeouts[t]||[]).concat(setTimeout(()=>{this.isPending(t)||delete this.fetchQueue[t]},r))}initFetchOptions(t,e){let r=this.store;!e.method||"GET"===e.method.toUpperCase()||(e.force=!0),e.resource=r.rdfFactory.namedNode(t),e.baseURI=e.baseURI||t,e.original=r.rdfFactory.namedNode(e.baseURI),e.req=r.bnode(),e.headers=e.headers||{},e.contentType&&(e.headers["content-type"]=e.contentType),e.force&&(e.cache="no-cache");let i=this.acceptString();e.headers.accept=i;let o=Ci.offlineOverride(t);e.requestedURI=o,Ci.setCredentials(o,e);let a=Ci.proxyIfNecessary(o);return o!==a&&(e.proxyUsed=!0),e.actualProxyURI=a,e}fetchUri(t,e){if(!t)return Promise.reject(new Error("Cannot fetch an empty uri"));if(Ci.unsupportedProtocol(t))return this.failFetch(e,"fetcher: Unsupported protocol","unsupported_protocol");let r=this.getState(t);if(e.force)delete this.nonexistent[t];else{if("fetched"===r)return Promise.resolve(this.doneFetch(e,{status:200,ok:!0,statusText:"Already loaded into quadstore."}));if("failed"===r&&404===this.requested[t]){let i="Previously failed: "+this.requested[t],o={url:t,status:this.requested[t],statusText:i,responseText:i,headers:new f8.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.failFetch(e,i,this.requested[t],o)}}this.fireCallbacks("request",[t]),this.requested[t]=!0,e.noMeta||this.saveRequestMetadata(t,e);let{actualProxyURI:s}=e;return this._fetch(s,e).then(i=>this.handleResponse(i,t,e),i=>{let o={url:s,status:999,statusText:(i.name||"network failure")+": "+(i.errno||i.code||i.type),responseText:i.message,headers:new f8.Headers,ok:!1,body:null,bodyUsed:!1,size:0,timeout:0};return this.handleError(o,t,e)})}nowOrWhenFetched(t,e,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=(0,Xu.E)(t);"function"==typeof e?r=e:typeof e>"u"||((0,gs.Y2)(e)?s.referringTerm=e:s=e),this.load(i,s).then(o=>{if(r)if(o)if(o.ok)r(!0,"OK",o);else{let a="HTTP error: Status "+o.status+" ("+o.statusText+")";o.responseText&&(a+=" "+o.responseText),r(!1,a,o)}else r(!1,"@@ nowOrWhenFetched:  no response object!")},function(o){var a=o.message||o.statusText;a="Failed to load  <"+i+"> "+a,o.response&&o.response.status&&(a+=" status: "+o.response.status),r(!1,a,o.response)})}addStatus(t,e){let r=new Date;e="["+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+"."+r.getMilliseconds()+"] "+e;let s=this.store;const i=s.the(t,this.ns.link("status"));(0,gs.P3)(i)?i.append(s.rdfFactory.literal(e)):Gi.warn("web.js: No list to add to: "+i+","+e)}failFetch(t,e,r,s){this.addStatus(t.req,e),t.noMeta||this.store.add(t.original,this.ns.link("error"),this.store.rdfFactory.literal(e));let i=(t.method||"GET").toUpperCase();("GET"===i||"HEAD"===i)&&(t.resource.equals(t.original),this.requested[$c(t.original.value)]=r,this.fireCallbacks("fail",[t.original.value,e]));var a=new Error("Fetcher: "+e);return a.status=r,a.statusText=e,a.response=s,Promise.reject(a)}linkData(t,e,r,s,i){if(!r)return;let a,o=this.store,l=o.rdfFactory.namedNode(Go(r,t.value));if("alternate"===e||"seeAlso"===e||"meta"===e||"describedby"===e){if(l.value===t.value)return;a=this.ns.rdfs("seeAlso")}else a=o.rdfFactory.namedNode("type"===e?"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":Go(encodeURIComponent(e),"http://www.iana.org/assignments/link-relations/"));i?o.add(l,a,t,s):o.add(t,a,l,s)}parseLinkHeader(t,e,r){if(!t)return;const i=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g,o=t.match(/<[^>]*>\s*(\s*;\s*[^()<>@,;:"/[\]?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g);if(null!=o)for(let a=0;a<o.length;a++){let l=o[a].split(">"),c=l[0].substring(1),h=l[1].match(i);if(null==h)return;for(let d=0;d<h.length;d++){let b=h[d].split("=")[1].replace(/["']/g,"");this.linkData(e,b,c,r)}}}doneFetch(t,e){return this.addStatus(t.req,"Done."),this.requested[t.original.value]="done",this.fireCallbacks("done",[t.original.value]),e.req=t.req,e}nowKnownAs(t,e){this.lookedUp[t.value]?this.lookedUp[e.value]||this.lookUpThing(e,t):this.lookedUp[e.value]&&(this.lookedUp[t.value]||this.lookUpThing(t,e))}putBack(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(0,Xu.E)(t);let s=new co.A(r).doc();return e.contentType=e["content-type"]||e["Content-Type"]||e.contentType||hn.sT,"application/ld+json"===e.contentType?new Promise((i,o)=>{r5(s,this.store,s.uri,e.contentType,(a,l)=>{a?o(a):(e.data=l,this.webOperation("PUT",t,e).then(c=>i(c)).catch(c=>o(c)))})}):(e.data=r5(s,this.store,s.value,e.contentType),this.webOperation("PUT",r,e))}webCopy(t,e,r){return this.webOperation("GET",t).then(s=>this.webOperation("PUT",e,{data:s.responseText,contentType:r}))}delete(t,e){return this.webOperation("DELETE",t,e).then(r=>(this.requested[t]=404,this.nonexistent[t]=!0,this.unload(this.store.rdfFactory.namedNode(t)),r))}createIfNotExists(t){var e=arguments,r=this;return(0,lo.A)(function*(){let s=e.length>1&&void 0!==e[1]?e[1]:hn.sT,i=e.length>2&&void 0!==e[2]?e[2]:"";const o=r;try{var a=yield o.load(t)}catch(l){if(404===l.response.status){try{a=yield o.webOperation("PUT",t.value,{data:i,contentType:s})}catch(c){throw c}return delete o.requested[t.value],a}throw l}return a})()}createContainer(t,e,r){let s={"content-type":hn.sT,link:this.ns.ldp("BasicContainer")+'; rel="type"'};e&&(s.slug=e);let i={headers:s};return r&&(i.body=r),this.webOperation("POST",t,i)}invalidateCache(t){const e=(0,Xu.E)(t),r=this;r.fetchQueue&&r.fetchQueue[e]&&delete r.fetchQueue[e],r.requested[e]&&"done"!==r.requested[e]&&"failed"!==r.requested[e]&&404!==r.requested[e]?console.error(`Rdflib: fetcher: Destructive operation on <${r.requested[e]}> file being fetched! `+e):(delete r.requested[e],delete r.nonexistent[e])}webOperation(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=(0,Xu.E)(e);r.method=t,r.body=r.data||r.body,r.force=!0;const i=this;if(r.body&&!r.contentType)throw new Error("Web operation sending data must have a defined contentType.");return r.contentType&&(r.headers=r.headers||{},r.headers["content-type"]=r.contentType),Ci.setCredentials(s,r),new Promise(function(o,a){i._fetch(s,r).then(l=>{if(l.ok)("PUT"===t||"PATCH"===t||"POST"===t||"DELETE"===t)&&i.invalidateCache(s),l.text?l.text().then(c=>{l.responseText=c,o(l)}):o(l);else{let c="Web error: "+l.status;l.statusText&&(c+=" ("+l.statusText+")"),c+=" on "+t+" of <"+s+">",l.responseText&&(c+=": "+l.responseText);let u=new Error(c);u.response=l,a(u)}},l=>{a(new Error("Fetch error for "+t+" of <"+s+">:"+l))})})}lookUpThing(t,e){let r=this.store.uris(t);return r=r.map(s=>$c(s)),r.forEach(s=>{this.lookedUp[s]=!0}),this.load(r,{referringTerm:e})}getHeader(t,e){const r=this.store,s=t.value,i=r.each(void 0,this.ns.link("requestedURI"),r.rdfFactory.literal(s));for(let o=0;o<i.length;o++){let a=i[o];if(void 0!==a){let l=r.any(a,this.ns.link("response"));if(void 0!==l&&r.anyValue(l,this.ns.http("status"))&&r.anyValue(l,this.ns.http("status")).startsWith("2")){let c=r.each(l,this.ns.httph(e.toLowerCase()));return c.length?c.map(u=>u.value):[]}}}}saveRequestMetadata(t,e){let r=e.req,s=this.store,i=e.referringTerm;this.addStatus(e.req,"Accept: "+e.headers.accept),(0,gs.Y2)(i)&&s.add(s.rdfFactory.namedNode(t),this.ns.link("requestedBy"),i,this.appNode),e.original&&e.original.value!==t&&s.add(r,this.ns.link("orginalURI"),s.rdfFactory.literal(e.original.value),this.appNode);const o=new Date,a="["+o.getHours()+":"+o.getMinutes()+":"+o.getSeconds()+"] ";s.add(r,this.ns.rdfs("label"),s.rdfFactory.literal(a+" Request for "+t),this.appNode),s.add(r,this.ns.link("requestedURI"),s.rdfFactory.literal(t),this.appNode),s.add(r,this.ns.link("status"),s.collection(),this.appNode)}saveResponseMetadata(t,e){const r=this.store;let s=r.bnode();return r.add(e.req,this.ns.link("response"),s,this.appNode),r.add(s,this.ns.http("status"),r.rdfFactory.literal(t.status),this.appNode),r.add(s,this.ns.http("statusText"),r.rdfFactory.literal(t.statusText),this.appNode),t.headers.forEach((i,o)=>{r.add(s,this.ns.httph(o),this.store.rdfFactory.literal(i),this.appNode),"content-type"===o&&r.add(e.resource,this.ns.rdf("type"),r.rdfFactory.namedNode(Zo.tE(i).value),this.appNode)}),s}objectRefresh(t){let e=this.store.uris(t);if(typeof e<"u")for(let r=0;r<e.length;r++)this.refresh(this.store.rdfFactory.namedNode($c(e[r])))}refresh(t,e){this.fireCallbacks("refresh",arguments),this.nowOrWhenFetched(t,{force:!0,clearPreviousData:!0},e)}refreshIfExpired(t,e){let r=this.getHeader(t,"Expires");!r||new Date(r[0]).getTime()<=(new Date).getTime()?this.refresh(t,e):e(!0,"Not expired",{})}retract(t){this.store.removeMany(void 0,void 0,void 0,t),t.value&&delete this.requested[$c(t.value)],this.fireCallbacks("retract",arguments)}getState(t){return typeof this.requested[t]>"u"?"unrequested":!0===this.requested[t]?"requested":"done"===this.requested[t]?"fetched":"redirected"===this.requested[t]?this.getState(this.redirectedTo[t]):"failed"}isPending(t){return!0===this.requested[t]}unload(t){this.store.removeDocument(t),delete this.requested[t.value]}addHandler(t){this.handlers.push(t),t.register(this)}retryNoCredentials(t,e){e.retriedWithNoCredentials=!0,delete this.requested[t],delete this.fetchQueue[t];let r=Object.assign({},e,{credentials:"omit"});return this.addStatus(e.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),this.load(t,r)}isCrossSite(t){if(typeof document>"u"||!document.location)return!1;const e=CK,r=""+document.location;return(e(r)&&e(t)&&e(r))!==e(t)}handleError(t,e,r){if(this.isCrossSite(e)){if(r.credentials&&"include"===r.credentials&&!r.retriedWithNoCredentials)return this.retryNoCredentials(e,r);let i=Ci.crossSiteProxy(e);if(i&&!r.proxyUsed)return this.redirectToProxy(i,r)}var s;return t instanceof Error?s="Fetch error: "+t.message:(s=t.statusText,t.responseText&&(s+=` ${t.responseText}`)),this.failFetch(r,s,t.status||998,t)}addType(t,e,r,s){let i=e;if(s){var o=r.any(i,this.ns.link("requestedURI"));o&&o.value!==s&&r.add(r.rdfFactory.namedNode(s),this.ns.rdf("type"),t,this.appNode)}for(;;){const c=r.any(i,this.ns.link("requestedURI"));if(c&&c.value&&r.add(r.rdfFactory.namedNode(c.value),this.ns.rdf("type"),t,this.appNode),i=r.any(void 0,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#redirectedRequest"),i),!i)break;var a=r.any(i,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/link#response"));if(!a)break;var l=r.any(a,r.rdfFactory.namedNode("http://www.w3.org/2007/ont/http#status"));if(!l||"301"!==l&&"302"!==l)break}}handleResponse(t,e,r){const s=this.store,i=t.headers,o=r.req,a=this.saveResponseMetadata(t,r),l=this.normalizedContentType(r,i)||"";let c=i.get("content-location");if(0===t.status)return this.handleError(t,e,r);if(t.status>=400)return 404===t.status&&(this.nonexistent[r.original.value]=!0,this.nonexistent[e]=!0),this.saveErrorResponse(t,a).then(()=>this.failFetch(r,r.resource+" "+t.statusText,t.status,t));var u=null,h=null;if(c&&(h=Go(c,e))!==e&&(u=h),200===t.status){if(this.addType(this.ns.link("Document"),o,s,e),u&&this.addType(this.ns.link("Document"),o,s,u),r.clearPreviousData){const m=s.statementsMatching(void 0,void 0,void 0,r.resource).slice();for(let b=0;b<m.length;b++)s.removeStatement(m[b])}let g=l.includes("image/")||l.includes("application/pdf");l&&g&&(this.addType(s.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),o,s,e),u&&this.addType(s.rdfFactory.namedNode("http://purl.org/dc/terms/Image"),o,s,u))}if(c){if(!r.force&&u&&"done"===this.requested[h])return this.doneFetch(r,t);this.requested[h]=!0}this.parseLinkHeader(i.get("link"),r.original,o);let d=this.handlerForContentType(l,t);return d?t.text().then(g=>(t.responseText=g,d.parse(this,g,r,t))):(this.addStatus(o,"Fetch over. No data handled."),this.doneFetch(r,t))}saveErrorResponse(t,e){let r=this.store;return t.text().then(s=>{s.length>10&&r.add(e,this.ns.http("content"),r.rdfFactory.literal(s),e)})}handlerForContentType(t,e){if(!t)return null;let r=this.handlers.find(s=>t.match(s.pattern));return r?new r(e):null}guessContentType(t){return Wz[t.split(".").pop()]}normalizedContentType(t,e){if(t.forceContentType)return t.forceContentType;let r=e.get("content-type");if(!r||r.includes("application/octet-stream")){let i=this.guessContentType(t.resource.value);if(i)return i}let s=gz(t.resource.value);return!r&&["file","chrome"].includes(s)?"text/xml":r}redirectToProxy(t,e){this.addStatus(e.req,"BLOCKED -> Cross-site Proxy to <"+t+">"),e.proxyUsed=!0;const r=this.store,s=e.req;e.noMeta||(r.add(s,this.ns.link("redirectedTo"),r.rdfFactory.namedNode(t),s),this.addStatus(s,"redirected to new request")),this.requested[e.resource.value]="redirected",this.redirectedTo[e.resource.value]=t;let i=Object.assign({},e);return i.baseURI=e.resource.value,this.fetchUri(t,i).then(o=>(i.noMeta||r.add(s,this.ns.link("redirectedRequest"),i.req,this.appNode),o))}setRequestTimeout(t,e){return new Promise(r=>{this.timeouts[t]=(this.timeouts[t]||[]).concat(setTimeout(()=>{this.isPending(t)&&!e.retriedWithNoCredentials&&!e.proxyUsed&&r(this.failFetch(e,`Request to ${t} timed out`,"timeout"))},this.timeout))})}addFetchCallback(t,e){this.fetchCallbacks[t]?this.fetchCallbacks[t].push(e):this.fetchCallbacks[t]=[e]}acceptString(){let t="";for(let e in this.mediatypes){""!==t&&(t+=", "),t+=e;for(let r in this.mediatypes[e])t+=";"+r+"="+this.mediatypes[e][r]}return t}}(0,xt.A)(Ci,"HANDLERS",void 0),(0,xt.A)(Ci,"CONTENT_TYPE_BY_EXT",void 0),(0,xt.A)(Ci,"crossSiteProxyTemplate",void 0),Ci.HANDLERS=v8,Ci.CONTENT_TYPE_BY_EXT=Wz;const d5={...c8,fetcher:(n,t)=>new Ci(n,t),graph(){return new xl(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,(arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)||{rdfFactory:c8})},lit(n,t,e){return this.literal(""+n,t||e)},st(n,t,e,r){return this.quad(n,t,e,r)}},Yz={};for(const n in d5)"function"==typeof d5[n]&&(Yz[n]=d5[n].bind(d5));const{graph:Kz,lit:w8,namedNode:G0}=Yz;new B0;const W0="http://geonetwork-ui/";function Kc(n,t,e,r,s,i,o){function a(g){return g.language.toLowerCase().substring(0,2)}const l=n.each(t,e,r).filter(g=>g instanceof Ws);if(!l.length)return[null,i];const c=l.find(g=>a(g)===o),u=l.find(g=>!g.language),h=c?.value??u?.value??"(value not found)",d=i??{};for(const g of l){const m=a(g);m===o||!m||(d[s]={...d[s],[m]:g.value})}return[h,d]}function qz(n,t,e,r,s,i){if(n.removeStatements(n.statementsMatching(t,e,null)),n.add(t,e,w8(r,i)),s)for(const o in s)n.add(t,e,w8(s[o],o))}function Jz(n,t,e,r=W0){return new Promise(s=>h5(t,n,r,e,s))}function p5(n,t=window.location.toString()){try{return new URL(n,t)}catch{return null}}function _a(n,t){return n.the(t,L0("primaryTopic"),null)||n.the(null,xo("type"),mr("Dataset"))}function Cq(n,t){return n.the(t,Fs("identifier"),null)?.value}function yq(n,t,e,r){const s=_a(n,t),[i]=Kc(n,s,Fs("title"),null,"title",e,r);return i}function Iq(n,t,e,r){const s=_a(n,t),[i]=Kc(n,s,Fs("description"),null,"abstract",e,r);return i}function Qz(n,t){const e=t.object,r=n.the(e,R0("fn"),null)??n.the(e,R0("title"),null)??n.the(e,R0("organisation-name"),null);let s,i;if(r){const c=H9(r.value);s=c[0],i=c[1]}const o=n.the(e,R0("role"),null),a=n.the(e,R0("hasEmail"),null),l=a?a.value.replace(/^mailto:/,""):"missing@missing.com";return{role:o?.value??"point_of_contact",email:l,...s&&{firstName:s},...i&&{lastName:i}}}function Aq(n,t){return n.statementsMatching(t,mr("contactPoint"),null).map(r=>Qz(n,r))}function bq(n,t){const e=_a(n,t);return n.statementsMatching(e,mr("contactPoint"),null).map(s=>Qz(n,s))}function xq(n,t){const e=_a(n,t),r=n.the(e,mr("landingPage"),null);return null!==r?p5(r.value):void 0}function zq(n,t,e,r){const s=_a(n,t);return n.statementsMatching(s,mr("distribution"),null).map(o=>function Mq(n,t,e){if(n.holds(t,mr("accessService"),null)){const r=n.the(t,mr("accessService"),null);if(n.the(r,Fs("conformsTo"),null))return function _q(n,t,e){const r=n.the(t,mr("accessService"),null),s=n.the(r,Fs("conformsTo"),null),i=n.the(t,mr("accessURL"),null),o={},[a]=Kc(n,t,Fs("description"),null,"description",o,e),[l]=Kc(n,t,Fs("title"),null,"name",o,e);return{url:p5(i?.value),type:"service",accessServiceProtocol:X6(s?.value),...null!==l&&{name:l},...null!==a&&{description:a},translations:o}}(n,t,e)}return n.holds(t,mr("downloadURL"),null)?function Hq(n,t,e){const r=n.the(t,mr("downloadURL"),null),s={},[i]=Kc(n,t,Fs("description"),null,"description",s,e),[o]=Kc(n,t,Fs("title"),null,"name",s,e);return{url:p5(r?.value),type:"download",...null!==o&&{name:o},...null!==i&&{description:i},translations:s}}(n,t,e):function Sq(n,t,e){const r=n.the(t,mr("accessURL"),null),s={},[i]=Kc(n,t,Fs("description"),null,"description",s,e),[o]=Kc(n,t,Fs("title"),null,"name",s,e);return{url:p5(r?.value),type:"link",...null!==o&&{name:o},...null!==i&&{description:i},translations:s}}(n,t,e)}(n,o.object,r))}function Vq(n,t){const e=_a(n,t);return n.statementsMatching(e,Fs("spatial"),null).map(s=>{const i=n.the(s.object,vK("geometry"),null);return i?{geometry:JSON.parse(i.value)}:{description:s.object.value}}).filter(s=>!!s)}function Tq(n,t){const e=_a(n,t);return n.statementsMatching(e,mr("keyword"),null).map(s=>({label:s.object.value,type:"theme"}))}function Eq(n,t){const e=_a(n,t);return n.statementsMatching(e,mr("theme"),null).map(s=>n.the(s.object,mK("prefLabel"),null)?.value??s.object.value)}function Lq(n,t){const e=n.the(t,Fs("issued"),null)?.value;return e?new Date(e):null}function Rq(n,t){const e=n.the(t,Fs("modified"),null)?.value;return e?new Date(e):new Date}function Dq(n,t){const e=_a(n,t),r=n.the(e,Fs("issued"),null)?.value;return r?new Date(r):null}function Bq(n,t){const e=_a(n,t),r=n.the(e,Fs("modified"),null)?.value;return r?new Date(r):null}function Nq(n){const t=n.statementsMatching(null,Fs("publisher"),null);if(!t.length)return null;const e=t[0].object,r=n.the(e,L0("name"),null);return{name:r?r.value:e.value}}function Fq(n,t){const e=_a(n,t);return n.statementsMatching(e,mr("distribution"),null).map(s=>n.the(s.object,Fs("license"),null)).filter(s=>!!s).map(s=>function vq(n){const t=/pddl|public domain dedication and licence/i.test(n),e=/odbl|open database license/i.test(n),r=/odc-by|opendatacommons.org\/licenses\/by/i.test(n),s=/cc-by-sa|creative.*commons.*(by-sa|attribution.*share-alike)/i.test(n),i=/cc-by|cc by|creative.*commons.*(by|attribution)/i.test(n),o=/cc.?0|creative.*commons.*(zero|0)/i.test(n),a=/etalab/i.test(n)&&/v2|2\.0/i.test(n),l=/etalab|open.?licence|licence.?ouverte/i.test(n);if(t)return{text:"Open Data Commons PDDL",url:new URL("https://opendatacommons.org/licenses/pddl/")};if(e)return{text:"Open Data Commons ODbL",url:new URL("https://opendatacommons.org/licenses/odbl/")};if(r)return{text:"Open Data Commons ODC-By",url:new URL("https://opendatacommons.org/licenses/by/")};if(s)return{text:"Creative Commons CC-BY-SA",url:new URL("https://creativecommons.org/licenses/by-sa/4.0/legalcode")};if(i)return{text:"Creative Commons CC-BY",url:new URL("https://creativecommons.org/licenses/by/4.0/legalcode")};if(o)return{text:"Creative Commons CC-0",url:new URL("https://creativecommons.org/publicdomain/zero/1.0/legalcode")};if(a)return{text:"Open Licence v2.0 (Etalab)",url:new URL("https://www.etalab.gouv.fr/wp-content/uploads/2017/04/ETALAB-Licence-Ouverte-v2.0.pdf")};if(l)return{text:"Open Licence (Etalab)",url:new URL("https://www.etalab.gouv.fr/wp-content/uploads/2014/05/Licence_Ouverte.pdf")};const c=/^https?:\/\//.test(n)?new URL(n):void 0;return{text:n,...c&&{url:c}}}(s.value)).filter((s,i,o)=>o.findIndex(a=>a.url?.toString()===s.url?.toString()&&a.text===s.text)===i)}function Pq(n,t){const e=_a(n,t),r=function wq(n,t){return n.the(null,mr("record"),t)||n.the(null,xo("type"),mr("Catalog"))}(n,t);let s=n.statementsMatching(t,Fs("language"),null);if(!s.length&&e&&(s=n.statementsMatching(e,Fs("language"),null)),!s.length&&r&&(s=n.statementsMatching(r,Fs("language"),null)),!s.length)return null;const o=s[0].object.value.split("/").pop().toLowerCase();return U4(o)??o}function eV(n,t,e){let r=t.the(null,xo("type"),mr("Dataset"));r||(r=G0(`${W0}dataset/${n.uniqueIdentifier}`),t.add(r,xo("type"),mr("Dataset")),t.add(e,L0("primaryTopic"),r));const s=function Oq(n,t){if(n.holds(null,xo("type"),mr("Catalog")))return n.the(null,xo("type"),mr("Catalog"));const r=n.add(G0(`${W0}catalog`),xo("type"),mr("Catalog")).subject;return n.add(r,mr("record"),t),r}(t,e);return t.holds(s,mr("dataset"),r)||t.add(s,mr("dataset"),r),r}function kq(n,t,e){!function mq(n,t,e,r){n.removeStatements(n.statementsMatching(t,e,null)),n.add(t,e,w8(r))}(t,e,Fs("identifier"),n.uniqueIdentifier)}function Gq(n,t,e){qz(t,eV(n,t,e),Fs("title"),n.title,n.translations?.title,n.defaultLanguage)}function Wq(n,t,e){qz(t,eV(n,t,e),Fs("description"),n.abstract,n.translations?.abstract,n.defaultLanguage)}function C8(n,t){for(const e in C0)if(t.startsWith(C0[e]))return[e,t.replace(C0[e],"")];for(const e in n.namespaces)if(t.startsWith(n.namespaces[e]))return[e,t.replace(n.namespaces[e],"")];return[null,t]}function tV(n,t){if(t instanceof Ws)return new vi.XmlText(t.value);const e=n.the(t,xo("type"));if(!e)return null;const s=n.statementsMatching(t,null,null).filter(l=>l.predicate.value!==xo("type").value).map(l=>{if(l.object.toString()===l.subject.toString())return null;if(l.predicate.value===L0("primaryTopic").value||l.predicate.value===L0("topic").value||l.predicate.value===mr("servesDataset").value){const[g,m]=C8(n,l.predicate.value);return new vi.XmlElement(`${g}:${m}`,{"rdf:resource":l.object.value})}const[c,u]=C8(n,l.predicate.value),h=tV(n,l.object);if(!h)return new vi.XmlElement(`${c}:${u}`,{"rdf:resource":l.object.value},[]);const d=new vi.XmlElement(`${c}:${u}`,{},[h]);return l.object instanceof Ws&&l.object.language&&(d.attributes["xml:lang"]=l.object.language),d}).filter(l=>!!l),[i,o]=C8(n,e.value);return new vi.XmlElement(`${i}:${o}`,t instanceof ro?{}:{"rdf:about":t.value},s)}class g5 extends G_{constructor(t="application/rdf+xml",e=new k_){super(e),this.contentType=t,this.readers={uniqueIdentifier:Cq,title:yq,abstract:Iq,contacts:Aq,contactsForResource:bq,landingPage:xq,onlineResources:zq,spatialExtents:Vq,keywords:Tq,topics:Eq,resourceIdentifiers:()=>{},recordUpdated:Rq,recordCreated:Lq,resourceUpdated:Bq,resourceCreated:Dq,ownerOrganization:Nq,licenses:Fq,defaultLanguage:Pq,otherLanguages:()=>[],kind:()=>"dataset",recordPublished:()=>{},resourcePublished:()=>{},reuseType:()=>{},legalConstraints:()=>[],securityConstraints:()=>[],otherConstraints:()=>[],status:()=>"completed",updateFrequency:()=>"unknown",overviews:()=>[],lineage:()=>"",temporalExtents:()=>[],spatialRepresentation:()=>{},extras:()=>{},translations:()=>{}},this.writers={uniqueIdentifier:kq,title:Gq,abstract:Wq,kind:()=>{},ownerOrganization:()=>{},recordUpdated:()=>{},recordCreated:()=>{},recordPublished:()=>{},resourceIdentifiers:()=>{},resourceUpdated:()=>{},resourceCreated:()=>{},resourcePublished:()=>{},reuseType:()=>{},contacts:()=>{},contactsForResource:()=>{},keywords:()=>{},topics:()=>{},licenses:()=>{},legalConstraints:()=>{},securityConstraints:()=>{},otherConstraints:()=>{},status:()=>{},updateFrequency:()=>{},spatialRepresentation:()=>{},overviews:()=>{},lineage:()=>{},onlineResources:()=>{},temporalExtents:()=>{},spatialExtents:()=>{},extras:()=>{},landingPage:()=>{},defaultLanguage:()=>{},otherLanguages:()=>{},translations:()=>{}}}readRecord(t){var e=this;return(0,lo.A)(function*(){const r=Kz();yield Jz(r,t,e.contentType);const s=r.the(null,null,mr("CatalogRecord")),i={},o=e.readers.defaultLanguage(r,s,i,null),a=e.readers.uniqueIdentifier(r,s,i,o),l=e.readers.kind(r,s,i,o),c=e.readers.ownerOrganization(r,s,i,o),u=e.readers.title(r,s,i,o),h=e.readers.abstract(r,s,i,o),d=e.readers.contacts(r,s,i,o),g=e.readers.contactsForResource(r,s,i,o),m=e.readers.recordUpdated(r,s,i,o),b=e.readers.recordCreated(r,s,i,o),V=e.readers.recordPublished(r,s,i,o),M=e.readers.resourceCreated(r,s,i,o),D=e.readers.resourceUpdated(r,s,i,o),J=e.readers.resourcePublished(r,s,i,o),X=e.readers.keywords(r,s,i,o),G=e.readers.topics(r,s,i,o),K=e.readers.legalConstraints(r,s,i,o),U=e.readers.otherConstraints(r,s,i,o),pe=e.readers.securityConstraints(r,s,i,o),Me=e.readers.licenses(r,s,i,o),ye=e.readers.overviews(r,s,i,o),Fe=e.readers.landingPage(r,s,i,o),He=e.readers.otherLanguages(r,s,i,o);if("dataset"===l){const ht=e.readers.status(r,s,i,o),dt=e.readers.spatialRepresentation(r,s,i,o),Ke=e.readers.spatialExtents(r,s,i,o),Zt=e.readers.temporalExtents(r,s,i,o);return{uniqueIdentifier:a,kind:l,defaultLanguage:o,otherLanguages:He,...b&&{recordCreated:b},...V&&{recordPublished:V},recordUpdated:m,...M&&{resourceCreated:M},...D&&{resourceUpdated:D},...J&&{resourcePublished:J},status:ht,title:u,abstract:h,ownerOrganization:c,contacts:d,contactsForResource:g,keywords:X,topics:G,licenses:Me,legalConstraints:K,securityConstraints:pe,otherConstraints:U,lineage:e.readers.lineage(r,s,i,o),...dt&&{spatialRepresentation:dt},overviews:ye,spatialExtents:Ke,temporalExtents:Zt,onlineResources:e.readers.onlineResources(r,s,i,o),updateFrequency:e.readers.updateFrequency(r,s,i,o),...Fe&&{landingPage:Fe},translations:i}}return{uniqueIdentifier:a,kind:l,defaultLanguage:o,otherLanguages:He,...b&&{recordCreated:b},...V&&{recordPublished:V},recordUpdated:m,...M&&{resourceCreated:M},...D&&{resourceUpdated:D},...J&&{resourcePublished:J},title:u,abstract:h,ownerOrganization:c,contacts:d,contactsForResource:g,keywords:X,topics:G,licenses:Me,legalConstraints:K,securityConstraints:pe,otherConstraints:U,overviews:ye,onlineResources:e.readers.onlineResources(r,s,i,o),...Fe&&{landingPage:Fe},translations:i}})()}writeRecord(t,e){var r=this;return(0,lo.A)(function*(){const s=Kz();let i;if(e){const a=yield r.readRecord(e);let l;yield Jz(s,e,r.contentType,mr("CatalogRecord").value),i=c=>null===a||!S4(t[c],a[c])||l&&W_(c),l=i("otherLanguages")}else i=()=>!0;let o=s.the(null,xo("type"),mr("CatalogRecord"));return o||(o=s.add(G0(`${W0}record/${t.uniqueIdentifier}`),xo("type"),mr("CatalogRecord")).subject),i("uniqueIdentifier")&&r.writers.uniqueIdentifier(t,s,o),i("kind")&&r.writers.kind(t,s,o),i("defaultLanguage")&&r.writers.defaultLanguage(t,s,o),i("contacts")&&r.writers.contacts(t,s,o),i("ownerOrganization")&&r.writers.ownerOrganization(t,s,o),i("recordUpdated")&&r.writers.recordUpdated(t,s,o),i("recordCreated")&&r.writers.recordCreated(t,s,o),i("recordPublished")&&r.writers.recordPublished(t,s,o),i("title")&&r.writers.title(t,s,o),i("abstract")&&r.writers.abstract(t,s,o),i("resourceCreated")&&r.writers.resourceCreated(t,s,o),i("resourcePublished")&&r.writers.resourcePublished(t,s,o),i("resourceUpdated")&&r.writers.resourceUpdated(t,s,o),i("contactsForResource")&&r.writers.contactsForResource(t,s,o),i("keywords")&&r.writers.keywords(t,s,o),i("topics")&&r.writers.topics(t,s,o),i("legalConstraints")&&r.writers.legalConstraints(t,s,o),i("securityConstraints")&&r.writers.securityConstraints(t,s,o),i("licenses")&&r.writers.licenses(t,s,o),i("otherConstraints")&&r.writers.otherConstraints(t,s,o),i("onlineResources")&&r.writers.onlineResources(t,s,o),"dataset"===t.kind&&(i("status")&&r.writers.status(t,s,o),i("updateFrequency")&&r.writers.updateFrequency(t,s,o),i("spatialRepresentation")&&r.writers.spatialRepresentation(t,s,o),i("overviews")&&r.writers.overviews(t,s,o),i("temporalExtents")&&r.writers.temporalExtents(t,s,o),i("lineage")&&r.writers.lineage(t,s,o)),i("otherLanguages")&&r.writers.otherLanguages(t,s,o),r.contentType.includes("xml")?function Zq(n){let t=n.statementsMatching(null,xo("type"),mr("Catalog"))[0]?.subject;if(!t){const r=n.the(null,xo("type"),mr("CatalogRecord")),s=n.the(null,xo("type"),mr("Dataset"));t=n.add(G0(`${W0}catalog`),xo("type"),mr("Catalog")).subject,n.add(t,mr("record"),r),n.add(t,mr("dataset"),s)}const e=new vi.XmlElement("rdf:RDF",{},[tV(n,t)]);for(const r in n.namespaces)e.attributes[`xmlns:${r}`]=n.namespaces[r];return w0(U6(e))}(s):s.serialize(void 0,r.contentType,null,{})})()}}function nV(n){if(n.indexOf("mdb:MD_Metadata")>0)return new K9;if(n.indexOf("gmd:MD_Metadata")>0)return new k9;if(/@prefix\s*[a-z]+\s*:\s*<http:\/\/www\.w3\.org\/ns\/dcat#>\s*\./.test(n))return new g5("text/turtle");if(/xmlns:[a-z]+="http:\/\/www\.w3\.org\/ns\/dcat#"/.test(n))return new g5("application/rdf+xml");if(/"[a-zA-Z]+"\s*:\s*"http:\/\/www\.w3\.org\/ns\/dcat#/.test(n))return new g5("application/ld+json");throw new Error(`No suitable converter found for the following document:\n${n.substring(0,400)}...`)}function y8(n){return n[n.length-1]}function rV(n){return function jq(n){return n&&ir(n.schedule)}(y8(n))?n.pop():void 0}function qc(n){return this instanceof qc?(this.v=n,this):new qc(n)}function aV(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=n[Symbol.asyncIterator];return t?t.call(n):(n=function x8(n){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(i){e[i]=n[i]&&function(o){return new Promise(function(a,l){!function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}(a,l,(o=n[i](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const lV=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function cV(n){return ir(n?.then)}function uV(n){return ir(n[ct])}function hV(n){return Symbol.asyncIterator&&ir(n?.[Symbol.asyncIterator])}function dV(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const pV=function CJ(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function gV(n){return ir(n?.[pV])}function fV(n){return function oV(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,r=e.apply(n,t||[]),i=[];return s=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(g){return function(m){return Promise.resolve(m).then(g,h)}}),s[Symbol.asyncIterator]=function(){return this},s;function a(g,m){r[g]&&(s[g]=function(b){return new Promise(function(V,M){i.push([g,b,V,M])>1||l(g,b)})},m&&(s[g]=m(s[g])))}function l(g,m){try{!function c(g){g.value instanceof qc?Promise.resolve(g.value.v).then(u,h):d(i[0][2],g)}(r[g](m))}catch(b){d(i[0][3],b)}}function u(g){l("next",g)}function h(g){l("throw",g)}function d(g,m){g(m),i.shift(),i.length&&l(i[0][0],i[0][1])}}(this,arguments,function*(){const e=n.getReader();try{for(;;){const{value:r,done:s}=yield qc(e.read());if(s)return yield qc(void 0);yield yield qc(r)}}finally{e.releaseLock()}})}function mV(n){return ir(n?.getReader)}function Hl(n){if(n instanceof zn)return n;if(null!=n){if(uV(n))return function yJ(n){return new zn(t=>{const e=n[ct]();if(ir(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(lV(n))return function IJ(n){return new zn(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}(n);if(cV(n))return function AJ(n){return new zn(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,qt)})}(n);if(hV(n))return vV(n);if(gV(n))return function bJ(n){return new zn(t=>{for(const e of n)if(t.next(e),t.closed)return;t.complete()})}(n);if(mV(n))return function xJ(n){return vV(fV(n))}(n)}throw dV(n)}function vV(n){return new zn(t=>{(function SJ(n,t){var e,r,s,i;return function sV(n,t,e,r){return new(e||(e=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):function s(i){return i instanceof e?i:new e(function(o){o(i)})}(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=aV(n);!(r=yield e.next()).done;)if(t.next(r.value),t.closed)return}catch(o){s={error:o}}finally{try{r&&!r.done&&(i=e.return)&&(yield i.call(e))}finally{if(s)throw s.error}}t.complete()})})(n,t).catch(e=>t.error(e))})}function Jc(n,t,e,r=0,s=!1){const i=t.schedule(function(){e(),s?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!s)return i}function wV(n,t=0){return xi((e,r)=>{e.subscribe(To(r,s=>Jc(r,n,()=>r.next(s),t),()=>Jc(r,n,()=>r.complete(),t),s=>Jc(r,n,()=>r.error(s),t)))})}function CV(n,t=0){return xi((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function yV(n,t){if(!n)throw new Error("Iterable cannot be null");return new zn(e=>{Jc(e,t,()=>{const r=n[Symbol.asyncIterator]();Jc(e,t,()=>{r.next().then(s=>{s.done?e.complete():e.next(s.value)})},0,!0)})})}function f5(n,t){return t?function TJ(n,t){if(null!=n){if(uV(n))return function HJ(n,t){return Hl(n).pipe(CV(t),wV(t))}(n,t);if(lV(n))return function MJ(n,t){return new zn(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}(n,t);if(cV(n))return function _J(n,t){return Hl(n).pipe(CV(t),wV(t))}(n,t);if(hV(n))return yV(n,t);if(gV(n))return function zJ(n,t){return new zn(e=>{let r;return Jc(e,t,()=>{r=n[pV](),Jc(e,t,()=>{let s,i;try{({value:s,done:i}=r.next())}catch(o){return void e.error(o)}i?e.complete():e.next(s)},0,!0)}),()=>ir(r?.return)&&r.return()})}(n,t);if(mV(n))return function VJ(n,t){return yV(fV(n),t)}(n,t)}throw dV(n)}(n,t):Hl(n)}function Ku(...n){return f5(n,rV(n))}function m5(n,t,e=1/0){return ir(t)?m5((r,s)=>R((i,o)=>t(r,i,s,o))(Hl(n(r,s))),e):("number"==typeof t&&(e=t),xi((r,s)=>function EJ(n,t,e,r,s,i,o,a){const l=[];let c=0,u=0,h=!1;const d=()=>{h&&!l.length&&!c&&t.complete()},g=b=>c<r?m(b):l.push(b),m=b=>{i&&t.next(b),c++;let V=!1;Hl(e(b,u++)).subscribe(To(t,M=>{s?.(M),i?g(M):t.next(M)},()=>{V=!0},void 0,()=>{if(V)try{for(c--;l.length&&c<r;){const M=l.shift();o?Jc(t,o,()=>m(M)):m(M)}d()}catch(M){t.error(M)}}))};return n.subscribe(To(t,g,()=>{h=!0,d()})),()=>{a?.()}}(r,s,n,e)))}function IV(n,t){return ir(t)?m5(n,t,1):m5(n,1)}function AV(n){return xi((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function H8(n,t){return xi((e,r)=>{let s=null,i=0,o=!1;const a=()=>o&&!s&&r.complete();e.subscribe(To(r,l=>{s?.unsubscribe();let c=0;const u=i++;Hl(n(l,u)).subscribe(s=To(r,h=>r.next(t?t(l,h,u,c++):h),()=>{s=null,a()}))},()=>{o=!0,a()}))})}class v5{}class w5{}class jn{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const s=e.slice(0,r),i=s.toLowerCase(),o=e.slice(r+1).trim();this.maybeSetNormalizedName(s,i),this.headers.has(i)?this.headers.get(i).push(o):this.headers.set(i,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,r)=>{this.setHeaderEntries(r,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,r])=>{this.setHeaderEntries(e,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof jn?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new jn;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof jn?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const s=("a"===t.op?this.headers.get(e):void 0)||[];s.push(...r),this.headers.set(e,s);break;case"d":const i=t.value;if(i){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===i.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(t,e){const r=(Array.isArray(e)?e:[e]).map(i=>i.toString()),s=t.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(t,s)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class RJ{encodeKey(t){return bV(t)}encodeValue(t){return bV(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const BJ=/%(\d[a-f0-9])/gi,NJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function bV(n){return encodeURIComponent(n).replace(BJ,(t,e)=>NJ[e]??t)}function C5(n){return`${n}`}class _e{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new RJ,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function DJ(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const i=s.indexOf("="),[o,a]=-1==i?[t.decodeKey(s),""]:[t.decodeKey(s.slice(0,i)),t.decodeValue(s.slice(i+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e],s=Array.isArray(r)?r.map(C5):[C5(r)];this.map.set(e,s)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const s=t[r];Array.isArray(s)?s.forEach(i=>{e.push({param:r,value:i,op:"a"})}):e.push({param:r,value:s,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new _e({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(C5(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const s=r.indexOf(C5(t.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class FJ{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function xV(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function SV(n){return typeof Blob<"u"&&n instanceof Blob}function HV(n){return typeof FormData<"u"&&n instanceof FormData}class Z0{constructor(t,e,r,s){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function PJ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,i=s):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),this.transferCache=i.transferCache),this.headers??=new jn,this.context??=new FJ,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new _e,this.urlWithParams=e}serializeBody(){return null===this.body?null:"string"==typeof this.body||xV(this.body)||SV(this.body)||HV(this.body)||function OJ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof _e?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||HV(this.body)?null:SV(this.body)?this.body.type||null:xV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof _e?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,r=t.url||this.url,s=t.responseType||this.responseType,i=t.transferCache??this.transferCache,o=void 0!==t.body?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress;let c=t.headers||this.headers,u=t.params||this.params;const h=t.context??this.context;return void 0!==t.setHeaders&&(c=Object.keys(t.setHeaders).reduce((d,g)=>d.set(g,t.setHeaders[g]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((d,g)=>d.set(g,t.setParams[g]),u)),new Z0(e,r,o,{params:u,headers:c,context:h,reportProgress:l,responseType:s,withCredentials:a,transferCache:i})}}var Qc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Qc||{});class _8{constructor(t,e=200,r="OK"){this.headers=t.headers||new jn,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class y5 extends _8{constructor(t={}){super(t),this.type=Qc.ResponseHeader}clone(t={}){return new y5({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class n2 extends _8{constructor(t={}){super(t),this.type=Qc.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new n2({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class qu extends _8{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function M8(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let Ir=(()=>{class n{constructor(e){this.handler=e}request(e,r,s={}){let i;if(e instanceof Z0)i=e;else{let l,c;l=s.headers instanceof jn?s.headers:new jn(s.headers),s.params&&(c=s.params instanceof _e?s.params:new _e({fromObject:s.params})),i=new Z0(e,r,void 0!==s.body?s.body:null,{headers:l,context:s.context,params:c,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}const o=Ku(i).pipe(IV(l=>this.handler.handle(l)));if(e instanceof Z0||"events"===s.observe)return o;const a=o.pipe(function LJ(n,t){return xi((e,r)=>{let s=0;e.subscribe(To(r,i=>n.call(t,i,s++)&&r.next(i)))})}(l=>l instanceof n2));switch(s.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(R(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(R(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(R(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(R(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new _e).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,s={}){return this.request("PATCH",e,M8(s,r))}post(e,r,s={}){return this.request("POST",e,M8(s,r))}put(e,r,s={}){return this.request("PUT",e,M8(s,r))}static{this.\u0275fac=function(r){return new(r||n)(Se(v5))}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})();const WJ=/^\)\]\}',?\n/;function MV(n){if(n.url)return n.url;const t="X-Request-URL".toLocaleLowerCase();return n.headers.get(t)}let z8=(()=>{class n{constructor(){this.fetchImpl=v(jJ,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=v($r)}handle(e){return new zn(r=>{const s=new AbortController;return this.doRequest(e,s.signal,r).then(V8,i=>r.error(new qu({error:i}))),()=>s.abort()})}doRequest(e,r,s){var i=this;return(0,lo.A)(function*(){const o=i.createRequestInit(e);let a;try{const m=i.ngZone.runOutsideAngular(()=>i.fetchImpl(e.urlWithParams,{signal:r,...o}));(function UJ(n){n.then(V8,V8)})(m),s.next({type:Qc.Sent}),a=yield m}catch(m){return void s.error(new qu({error:m,status:m.status??0,statusText:m.statusText,url:e.urlWithParams,headers:m.headers}))}const l=new jn(a.headers),c=a.statusText,u=MV(a)??e.urlWithParams;let h=a.status,d=null;if(e.reportProgress&&s.next(new y5({headers:l,status:h,statusText:c,url:u})),a.body){const m=a.headers.get("content-length"),b=[],V=a.body.getReader();let D,J,M=0;const X=typeof Zone<"u"&&Zone.current;yield i.ngZone.runOutsideAngular((0,lo.A)(function*(){for(;;){const{done:K,value:U}=yield V.read();if(K)break;if(b.push(U),M+=U.length,e.reportProgress){J="text"===e.responseType?(J??"")+(D??=new TextDecoder).decode(U,{stream:!0}):void 0;const pe=()=>s.next({type:Qc.DownloadProgress,total:m?+m:void 0,loaded:M,partialText:J});X?X.run(pe):pe()}}}));const G=i.concatChunks(b,M);try{const K=a.headers.get("Content-Type")??"";d=i.parseBody(e,G,K)}catch(K){return void s.error(new qu({error:K,headers:new jn(a.headers),status:a.status,statusText:a.statusText,url:MV(a)??e.urlWithParams}))}}0===h&&(h=d?200:0),h>=200&&h<300?(s.next(new n2({body:d,headers:l,status:h,statusText:c,url:u})),s.complete()):s.error(new qu({error:d,headers:l,status:h,statusText:c,url:u}))})()}parseBody(e,r,s){switch(e.responseType){case"json":const i=(new TextDecoder).decode(r).replace(WJ,"");return""===i?null:JSON.parse(i);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:s});case"arraybuffer":return r.buffer}}createRequestInit(e){const r={},s=e.withCredentials?"include":void 0;if(e.headers.forEach((i,o)=>r[i]=o.join(",")),e.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){const i=e.detectContentTypeHeader();null!==i&&(r["Content-Type"]=i)}return{body:e.serializeBody(),method:e.method,headers:r,credentials:s}}concatChunks(e,r){const s=new Uint8Array(r);let i=0;for(const o of e)s.set(o,i),i+=o.length;return s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})();class jJ{}function V8(){}function zV(n,t){return t(n)}function $J(n,t){return(e,r)=>t.intercept(e,{handle:s=>n(s,r)})}const VV=new At(""),j0=new At(""),TV=new At(""),EV=new At("",{providedIn:"root",factory:()=>!0});function YJ(){let n=null;return(t,e)=>{null===n&&(n=(v(VV,{optional:!0})??[]).reduceRight($J,zV));const r=v(Gl);if(v(EV)){const i=r.add();return n(t,e).pipe(AV(()=>r.remove(i)))}return n(t,e)}}let LV=(()=>{class n extends v5{constructor(e,r){super(),this.backend=e,this.injector=r,this.chain=null,this.pendingTasks=v(Gl),this.contributeToStability=v(EV)}handle(e){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(j0),...this.injector.get(TV,[])]));this.chain=r.reduceRight((s,i)=>function XJ(n,t,e){return(r,s)=>A3(e,()=>t(r,i=>n(i,s)))}(s,i,this.injector),zV)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(e,s=>this.backend.handle(s)).pipe(AV(()=>this.pendingTasks.remove(r)))}return this.chain(e,r=>this.backend.handle(r))}static{this.\u0275fac=function(r){return new(r||n)(Se(w5),Se(Yo))}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})();const eQ=/^\)\]\}',?\n/;let DV=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new ie(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?f5(r.\u0275loadImpl()):Ku(null)).pipe(H8(()=>new zn(i=>{const o=r.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((b,V)=>o.setRequestHeader(b,V.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const b=e.detectContentTypeHeader();null!==b&&o.setRequestHeader("Content-Type",b)}if(e.responseType){const b=e.responseType.toLowerCase();o.responseType="json"!==b?b:"text"}const a=e.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const b=o.statusText||"OK",V=new jn(o.getAllResponseHeaders()),M=function tQ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||e.url;return l=new y5({headers:V,status:o.status,statusText:b,url:M}),l},u=()=>{let{headers:b,status:V,statusText:M,url:D}=c(),J=null;204!==V&&(J=typeof o.response>"u"?o.responseText:o.response),0===V&&(V=J?200:0);let X=V>=200&&V<300;if("json"===e.responseType&&"string"==typeof J){const G=J;J=J.replace(eQ,"");try{J=""!==J?JSON.parse(J):null}catch(K){J=G,X&&(X=!1,J={error:K,text:J})}}X?(i.next(new n2({body:J,headers:b,status:V,statusText:M,url:D||void 0})),i.complete()):i.error(new qu({error:J,headers:b,status:V,statusText:M,url:D||void 0}))},h=b=>{const{url:V}=c(),M=new qu({error:b,status:o.status||0,statusText:o.statusText||"Unknown Error",url:V||void 0});i.error(M)};let d=!1;const g=b=>{d||(i.next(c()),d=!0);let V={type:Qc.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(V.total=b.total),"text"===e.responseType&&o.responseText&&(V.partialText=o.responseText),i.next(V)},m=b=>{let V={type:Qc.UploadProgress,loaded:b.loaded};b.lengthComputable&&(V.total=b.total),i.next(V)};return o.addEventListener("load",u),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),e.reportProgress&&(o.addEventListener("progress",g),null!==a&&o.upload&&o.upload.addEventListener("progress",m)),o.send(a),i.next({type:Qc.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",u),o.removeEventListener("timeout",h),e.reportProgress&&(o.removeEventListener("progress",g),null!==a&&o.upload&&o.upload.removeEventListener("progress",m)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(r){return new(r||n)(Se(f_))}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})();const T8=new At(""),BV=new At("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),NV=new At("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class FV{}let sQ=(()=>{class n{constructor(e,r,s){this.doc=e,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=i_(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(r){return new(r||n)(Se(Gc),Se(hl),Se(BV))}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})();function iQ(n,t){const e=n.url.toLowerCase();if(!v(T8)||"GET"===n.method||"HEAD"===n.method||e.startsWith("http://")||e.startsWith("https://"))return t(n);const r=v(FV).getToken(),s=v(NV);return null!=r&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,r)})),t(n)}var e1=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(e1||{});function r2(n,t){return{\u0275kind:n,\u0275providers:t}}function oQ(...n){const t=[Ir,DV,LV,{provide:v5,useExisting:LV},{provide:w5,useFactory:()=>v(z8,{optional:!0})??v(DV)},{provide:j0,useValue:iQ,multi:!0},{provide:T8,useValue:!0},{provide:FV,useClass:sQ}];for(const e of n)t.push(...e.\u0275providers);return rl(t)}const PV=new At("");function U0(n){return!!n&&(n instanceof zn||ir(n.lift)&&ir(n.subscribe))}new At("basePath");const{isArray:EQ}=Array,{getPrototypeOf:LQ,prototype:RQ,keys:DQ}=Object;const{isArray:FQ}=Array;function kQ(n,t){return n.reduce((e,r,s)=>(e[r]=t[s],e),{})}function $V(...n){const t=function Uq(n){return ir(y8(n))?n.pop():void 0}(n),{args:e,keys:r}=function BQ(n){if(1===n.length){const t=n[0];if(EQ(t))return{args:t,keys:null};if(function NQ(n){return n&&"object"==typeof n&&LQ(n)===RQ}(t)){const e=DQ(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}(n),s=new zn(i=>{const{length:o}=e;if(!o)return void i.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let h=!1;Hl(e[u]).subscribe(To(i,d=>{h||(h=!0,c--),a[u]=d},()=>l--,void 0,()=>{(!l||!h)&&(c||i.next(r?kQ(r,a):a),i.complete())}))}});return t?s.pipe(function OQ(n){return R(t=>function PQ(n,t){return FQ(t)?n(...t):n(t)}(n,t))}(t)):s}function XV(...n){return function WQ(){return function GQ(n=1/0){return m5(Yt,n)}(1)}()(f5(n,rV(n)))}function YV(n){return new zn(t=>{Hl(n()).subscribe(t)})}const KV=new zn(n=>n.complete());function A5(n){return n<=0?()=>KV:xi((t,e)=>{let r=0;t.subscribe(To(e,s=>{++r<=n&&(e.next(s),n<=r&&e.complete())}))})}const E8={now:()=>(E8.delegate||Date).now(),delegate:void 0};class jQ extends Ps{constructor(t=1/0,e=1/0,r=E8){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:i,_windowTime:o}=this;e||(r.push(t),!s&&r.push(i.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:s}=this,i=s.slice();for(let o=0;o<i.length&&!t.closed;o+=r?1:2)t.next(i[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:s}=this,i=(s?1:2)*t;if(t<1/0&&i<r.length&&r.splice(0,r.length-i),!s){const o=e.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function L8(n,t,...e){if(!0===t)return void n();if(!1===t)return;const r=new er({next:()=>{r.unsubscribe(),n()}});return Hl(t(...e)).subscribe(r)}function qV(n,t,e){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:t=1/0,refCount:s=!1,scheduler:e}=n):r=n??1/0,function UQ(n={}){const{connector:t=()=>new Ps,resetOnError:e=!0,resetOnComplete:r=!0,resetOnRefCountZero:s=!0}=n;return i=>{let o,a,l,c=0,u=!1,h=!1;const d=()=>{a?.unsubscribe(),a=void 0},g=()=>{d(),o=l=void 0,u=h=!1},m=()=>{const b=o;g(),b?.unsubscribe()};return xi((b,V)=>{c++,!h&&!u&&d();const M=l=l??t();V.add(()=>{c--,0===c&&!h&&!u&&(a=L8(m,s))}),M.subscribe(V),!o&&c>0&&(o=new er({next:D=>M.next(D),error:D=>{h=!0,d(),a=L8(g,e,D),M.error(D)},complete:()=>{u=!0,d(),a=L8(g,r),M.complete()}}),Hl(b).subscribe(o))})(i)}}({connector:()=>new jQ(r,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}class b5{}let $Q=(()=>{class n extends b5{getTranslation(e){return Ku({})}static \u0275fac=(()=>{let e;return function(s){return(e||(e=ei(n)))(s||n)}})();static \u0275prov=zt({token:n,factory:n.\u0275fac})}return n})();class JV{}let XQ=(()=>{class n{handle(e){return e.key}static \u0275fac=function(r){return new(r||n)};static \u0275prov=zt({token:n,factory:n.\u0275fac})}return n})();function s2(n){return typeof n<"u"&&null!==n}function x5(n){return S5(n)&&!R8(n)&&null!==n}function S5(n){return"object"==typeof n}function R8(n){return Array.isArray(n)}function eT(n){return"string"==typeof n}function D8(n,t){const e=Object.assign({},n);return S5(n)?(S5(n)&&S5(t)&&Object.keys(t).forEach(r=>{x5(t[r])?r in n?e[r]=D8(n[r],t[r]):Object.assign(e,{[r]:t[r]}):Object.assign(e,{[r]:t[r]})}),e):D8({},t)}function B8(n,t){const e=t.split(".");t="";do{t+=e.shift(),s2(n)&&s2(n[t])&&(x5(n[t])||R8(n[t])||!e.length)?(n=n[t],t=""):e.length?t+=".":n=void 0}while(e.length);return n}class H5{}let tT=(()=>{class n extends H5{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,r){return eT(e)?this.interpolateString(e,r):function YQ(n){return"function"==typeof n}(e)?this.interpolateFunction(e,r):void 0}interpolateFunction(e,r){return e(r)}interpolateString(e,r){return r?e.replace(this.templateMatcher,(s,i)=>{const o=B8(r,i);return s2(o)?o:s}):e}static \u0275fac=(()=>{let e;return function(s){return(e||(e=ei(n)))(s||n)}})();static \u0275prov=zt({token:n,factory:n.\u0275fac})}return n})();class Ju{}let qQ=(()=>{class n extends Ju{compile(e,r){return e}compileTranslations(e,r){return e}static \u0275fac=(()=>{let e;return function(s){return(e||(e=ei(n)))(s||n)}})();static \u0275prov=zt({token:n,factory:n.\u0275fac})}return n})();class N8{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Kr;onLangChange=new Kr;onDefaultLangChange=new Kr}const nT=new At("ISOLATE_TRANSLATE_SERVICE"),rT=new At("USE_DEFAULT_LANG"),sT=new At("DEFAULT_LANGUAGE"),iT=new At("USE_EXTEND"),$0=n=>U0(n)?n:Ku(n);let F8=(()=>{class n{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(e){this.store.defaultLang=e}get currentLang(){return this.store.currentLang}set currentLang(e){this.store.currentLang=e}get langs(){return this.store.langs}set langs(e){this.store.langs=e}get translations(){return this.store.translations}set translations(e){this.store.translations=e}constructor(e,r,s,i,o,a=!0,l=!1,c=!1,u){this.store=e,this.currentLoader=r,this.compiler=s,this.parser=i,this.missingTranslationHandler=o,this.useDefaultLang=a,this.extend=c,l&&(this.store=new N8),u&&this.setDefaultLang(u)}setDefaultLang(e){if(e===this.defaultLang)return;const r=this.retrieveTranslations(e);typeof r<"u"?(null==this.defaultLang&&(this.defaultLang=e),r.pipe(A5(1)).subscribe(()=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(this.lastUseLanguage=e,e===this.currentLang)return Ku(this.translations[e]);this.currentLang||(this.currentLang=e);const r=this.retrieveTranslations(e);return U0(r)?(r.pipe(A5(1)).subscribe(()=>{this.changeLang(e)}),r):(this.changeLang(e),Ku(this.translations[e]))}changeLang(e){e===this.lastUseLanguage&&(this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),null==this.defaultLang&&this.changeDefaultLang(e))}retrieveTranslations(e){if(typeof this.translations[e]>"u"||this.extend)return this._translationRequests[e]=this._translationRequests[e]||this.loadAndCompileTranslations(e),this._translationRequests[e]}getTranslation(e){return this.loadAndCompileTranslations(e)}loadAndCompileTranslations(e){this.pending=!0;const r=this.currentLoader.getTranslation(e).pipe(qV(1),A5(1));return this.loadingTranslations=r.pipe(R(s=>this.compiler.compileTranslations(s,e)),qV(1),A5(1)),this.loadingTranslations.subscribe({next:s=>{this.translations[e]=this.extend&&this.translations[e]?{...s,...this.translations[e]}:s,this.updateLangs(),this.pending=!1},error:s=>{this.pending=!1}}),r}setTranslation(e,r,s=!1){const i=this.compiler.compileTranslations(r,e);this.translations[e]=(s||this.extend)&&this.translations[e]?D8(this.translations[e],i):i,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){const r=e.filter(s=>!this.langs.includes(s));r.length>0&&(this.langs=[...this.langs,...r])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(e,r,s){let i;if(e&&(i=this.runInterpolation(B8(e,r),s)),void 0===i&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(i=this.runInterpolation(B8(this.translations[this.defaultLang],r),s)),void 0===i){const o={key:r,translateService:this};typeof s<"u"&&(o.interpolateParams=s),i=this.missingTranslationHandler.handle(o)}return void 0!==i?i:r}runInterpolation(e,r){if(R8(e))return e.map(s=>this.runInterpolation(s,r));if(x5(e)){const s={};for(const i in e){const o=this.runInterpolation(e[i],r);void 0!==o&&(s[i]=o)}return s}return this.parser.interpolate(e,r)}getParsedResult(e,r,s){if(r instanceof Array){const i={};let o=!1;for(const l of r)i[l]=this.getParsedResultForKey(e,l,s),o=o||U0(i[l]);return o?$V(r.map(l=>$0(i[l]))).pipe(R(l=>{const c={};return l.forEach((u,h)=>{c[r[h]]=u}),c})):i}return this.getParsedResultForKey(e,r,s)}get(e,r){if(!s2(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(IV(s=>$0(this.getParsedResult(s,e,r)))):$0(this.getParsedResult(this.translations[this.currentLang],e,r))}getStreamOnTranslationChange(e,r){if(!s2(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return XV(YV(()=>this.get(e,r)),this.onTranslationChange.pipe(H8(s=>{const i=this.getParsedResult(s.translations,e,r);return $0(i)})))}stream(e,r){if(!s2(e)||!e.length)throw new Error('Parameter "key" required');return XV(YV(()=>this.get(e,r)),this.onLangChange.pipe(H8(s=>{const i=this.getParsedResult(s.translations,e,r);return $0(i)})))}instant(e,r){if(!s2(e)||0===e.length)throw new Error('Parameter "key" is required and cannot be empty');const s=this.getParsedResult(this.translations[this.currentLang],e,r);return U0(s)?Array.isArray(e)?e.reduce((i,o)=>(i[o]=o,i),{}):e:s}set(e,r,s=this.currentLang){(function KQ(n,t,e){const r=t.split(".");let s=n;for(let i=0;i<r.length;i++){const o=r[i];i===r.length-1?s[o]=e:((!s[o]||!x5(s[o]))&&(s[o]={}),s=s[o])}})(this.translations[s],e,eT(r)?this.compiler.compile(r,s):this.compiler.compileTranslations(r,s)),this.updateLangs(),this.onTranslationChange.emit({lang:s,translations:this.translations[s]})}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.loadAndCompileTranslations(e)}resetLang(e){delete this._translationRequests[e],delete this.translations[e]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;const e=this.getBrowserCultureLang();return e?e.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(r){return new(r||n)(Se(N8),Se(b5),Se(Ju),Se(H5),Se(JV),Se(rT),Se(nT),Se(iT),Se(sT))};static \u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const JQ=(n={})=>rl([n.loader||{provide:b5,useClass:$Q},n.compiler||{provide:Ju,useClass:qQ},n.parser||{provide:H5,useClass:tT},n.missingTranslationHandler||{provide:JV,useClass:XQ},N8,{provide:nT,useValue:n.isolate},{provide:rT,useValue:n.useDefaultLang},{provide:iT,useValue:n.extend},{provide:sT,useValue:n.defaultLanguage},F8]);var QQ=Ve(517);const eee=new At("MESSAGE_FORMAT_CONFIG"),tee={biDiSupport:!1,formatters:{},strictNumberSign:!1,currency:"USD",strictPluralKeys:!0,throwOnError:!1,fallbackPrefix:void 0};let oT=(()=>{class n extends Ju{constructor(e){super(),this.mfCache=new Map;const{formatters:r,biDiSupport:s,strictNumberSign:i,currency:o,strictPluralKeys:a,throwOnError:l,fallbackPrefix:c}={...tee,...e};this.messageFormatOptions={customFormatters:r,biDiSupport:s,strict:i,currency:o,strictPluralKeys:a},this.throwOnError=!!l,this.fallbackPrefix=c}compile(e,r){if(this.fallbackPrefix&&e.startsWith(this.fallbackPrefix))return e.slice(this.fallbackPrefix.length);let s;try{s=this.getMessageFormatInstance(r).compile(e)}catch(i){if(this.throwOnError)throw i;console.error(i),console.error(`[ngx-translate-messageformat-compiler] Could not compile message for lang '${r}': '${e}'`),s=function ree(n,t){return()=>(console.warn(`[ngx-translate-messageformat-compiler] Falling back to original invalid message: '${n}' ('${t}')`),String(n))}(e,r)}return this.throwOnError||(s=function nee(n,t){return e=>{let r=t;try{r=n(e)}catch(s){console.error(s),console.error(`[ngx-translate-messageformat-compiler] Could not interpolate '${t}' with params '${e}'`)}return r}}(s,e)),s}compileTranslations(e,r){return"string"==typeof e?this.compile(e,r):Object.keys(e).reduce((s,i)=>(s[i]=this.compileTranslations(e[i],r),s),{})}getMessageFormatInstance(e){return this.mfCache.has(e)||this.mfCache.set(e,new QQ(e,this.messageFormatOptions)),this.mfCache.get(e)}static{this.\u0275fac=function(r){return new(r||n)(Se(eee,8))}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})(),iee=(()=>{class n{http;prefix;suffix;constructor(e,r="/assets/i18n/",s=".json"){this.http=e,this.prefix=r,this.suffix=s}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}static \u0275fac=function(r){return new(r||n)(Se(Ir),Se(String),Se(String))};static \u0275prov=zt({token:n,factory:n.\u0275fac})}return n})();function oee(n){return Object.keys(n).reduce((t,e)=>n[e].trim().length?{...t,[e]:n[e]}:t,{})}class aee extends iee{getTranslation(t){const e=t.substring(0,2);return super.getTranslation(e).pipe(R(oee))}}const P8="en",lee="geonetwork-ui-language",uee={compiler:{provide:Ju,useClass:oT},loader:{provide:b5,useFactory:function cee(n){return new aee(n,"./assets/i18n/")},deps:[Ir]}},hee={compiler:{provide:Ju,useClass:oT},parser:{provide:H5,useClass:(()=>{class n extends tT{interpolate(e,r){return r?`${e} {{${Object.keys(r).map(i=>`${i}=${r[i]}`).join(", ")}}}`:e?.toString()}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=ei(n)))(s||n)}})()}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})()}};let dee=(()=>{class n{constructor(e){this.injector=e}intercept(e,r){const s=this.injector.get(F8);return e=e.clone({setHeaders:{"Accept-Language":s.currentLang||P8}}),r.handle(e)}static{this.\u0275fac=function(r){return new(r||n)(Se(Sn))}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac})}}return n})();function pee(n){return()=>{n.setDefaultLang(P8);let t=null;try{t=localStorage.getItem(lee)}catch(e){console.warn(e)}n.use(t||n.getBrowserLang()||P8)}}function gee(n,t=!0){let e=n??uee;"true"===new URL(window.location.toString()).searchParams.get("debugTranslations")&&(e=hee);const r=[oQ(r2(e1.LegacyInterceptors,[{provide:PV,useFactory:YJ},{provide:j0,useExisting:PV,multi:!0}])),{provide:VV,useClass:dee,multi:!0},JQ(e)];return t&&r.push({provide:nH,useFactory:pee,deps:[F8],multi:!0}),rl(r)}const _5={"ISO 19139":k9,"ISO 19115-3":K9,"DCAT-AP":g5};function aT(n){return Object.keys(_5).reduce((t,e)=>n instanceof _5[e]?e:t)}let mee=(()=>{class n{constructor(){this.newRecordNative=new Kr,this.newMetadata=new Kr,this.currentConverter=null,this.status="Standing by."}set recordNative(e){this._currentRecord=e,this.convertRecordToXml(e)}set currentMetadata(e){const r=performance.now();this.status="Converting to CatalogRecord...",this.xmlToRecord(e).then(s=>{this._currentRecord=s,this.newRecordNative.emit(s),this.newMetadata.emit(e);const i=Math.round(performance.now()-r);this.status=`Converting to CatalogRecord... Done (${i} ms).`}).catch(s=>{this.status=`Converting to CatalogRecord... Failed: ${s instanceof Error?s.message:s}`,console.error(s)})}startLoadingFile(){this.status="Loading file from url..."}errorLoadingFile(e){this.status=`Loading file from url... Failed: ${e}`,console.error(e)}startReadingFile(){this.status="Reading file..."}errorReadingFile(){this.status="Reading file... Failed"}changeFormat(e){const r=_5[e];if(!r)throw new Error(`Metadata format ${e} not supported`);this.referenceMetadata="",this.convertRecordToXml(this._currentRecord,new r)}convertRecordToXml(e,r){const s=performance.now(),o=aT(r??this.currentConverter);this.status=`Converting to ${o}...`,this.newMetadata.emit(""),this.recordToXml(e,r).then(a=>{this.newMetadata.emit(a);const l=Math.round(performance.now()-s);this.status=`Converting to ${o}... Done (${l} ms).`}).catch(a=>{this.status=`Converting to ${o}... Failed: ${a instanceof Error?a.message:a}`,console.error(a)})}recordToXml(e,r){try{return this.currentConverter=r||(this.referenceMetadata?nV(this.referenceMetadata):new K9),this.currentConverter.writeRecord(e,this.referenceMetadata)}catch(s){return Promise.reject(s)}}xmlToRecord(e){try{return this.currentConverter=nV(e),this.currentConverter.readRecord(e)}catch(r){return Promise.reject(r)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ro({type:n,selectors:[["gn-ui-status"]],inputs:{recordNative:"recordNative",currentMetadata:"currentMetadata",referenceMetadata:"referenceMetadata"},outputs:{newRecordNative:"newRecordNative",newMetadata:"newMetadata"},decls:2,vars:1,consts:[[1,"font-mono"]],template:function(r,s){1&r&&(gt(0,"div",0),Co(1),ut()),2&r&&(bt(),Fc("> ",s.status,""))}})}}return n})();const{min:vee,max:wee}=Math,o2=(n,t=0,e=1)=>vee(wee(t,n),e),O8=n=>{n._clipped=!1,n._unclipped=n.slice(0);for(let t=0;t<=3;t++)t<3?((n[t]<0||n[t]>255)&&(n._clipped=!0),n[t]=o2(n[t],0,255)):3===t&&(n[t]=o2(n[t],0,1));return n},lT={};for(let n of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])lT[`[object ${n}]`]=n.toLowerCase();function or(n){return lT[Object.prototype.toString.call(n)]||"object"}const Kn=(n,t=null)=>n.length>=3?Array.prototype.slice.call(n):"object"==or(n[0])&&t?t.split("").filter(e=>void 0!==n[0][e]).map(e=>n[0][e]):n[0].slice(0),Qu=n=>{if(n.length<2)return null;const t=n.length-1;return"string"==or(n[t])?n[t].toLowerCase():null},{PI:M5,min:cT,max:uT}=Math,Ma=n=>Math.round(100*n)/100,k8=n=>Math.round(100*n)/100,sc=2*M5,G8=M5/3,Cee=M5/180,yee=180/M5;function hT(n){return[...n.slice(0,3).reverse(),...n.slice(3)]}const Xn={format:{},autodetect:[]},yt=class Iee{constructor(...t){const e=this;if("object"===or(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];let r=Qu(t),s=!1;if(!r){s=!0,Xn.sorted||(Xn.autodetect=Xn.autodetect.sort((i,o)=>o.p-i.p),Xn.sorted=!0);for(let i of Xn.autodetect)if(r=i.test(...t),r)break}if(!Xn.format[r])throw new Error("unknown format: "+t);{const i=Xn.format[r].apply(null,s?t:t.slice(0,-1));e._rgb=O8(i)}3===e._rgb.length&&e._rgb.push(1)}toString(){return"function"==or(this.hex)?this.hex():`[${this._rgb.join(",")}]`}},dT=(...n)=>new yt(...n);dT.version="3.1.2";const Ar=dT,eh={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},bee=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,xee=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,pT=n=>{if(n.match(bee)){(4===n.length||7===n.length)&&(n=n.substr(1)),3===n.length&&(n=(n=n.split(""))[0]+n[0]+n[1]+n[1]+n[2]+n[2]);const t=parseInt(n,16);return[t>>16,t>>8&255,255&t,1]}if(n.match(xee)){(5===n.length||9===n.length)&&(n=n.substr(1)),4===n.length&&(n=(n=n.split(""))[0]+n[0]+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]);const t=parseInt(n,16);return[t>>24&255,t>>16&255,t>>8&255,Math.round((255&t)/255*100)/100]}throw new Error(`unknown hex color: ${n}`)},{round:z5}=Math,gT=(...n)=>{let[t,e,r,s]=Kn(n,"rgba"),i=Qu(n)||"auto";void 0===s&&(s=1),"auto"===i&&(i=s<1?"rgba":"rgb"),t=z5(t),e=z5(e),r=z5(r);let a="000000"+(t<<16|e<<8|r).toString(16);a=a.substr(a.length-6);let l="0"+z5(255*s).toString(16);switch(l=l.substr(l.length-2),i.toLowerCase()){case"rgba":return`#${a}${l}`;case"argb":return`#${l}${a}`;default:return`#${a}`}};yt.prototype.name=function(){const n=gT(this._rgb,"rgb");for(let t of Object.keys(eh))if(eh[t]===n)return t.toLowerCase();return n},Xn.format.named=n=>{if(n=n.toLowerCase(),eh[n])return pT(eh[n]);throw new Error("unknown color name: "+n)},Xn.autodetect.push({p:5,test:(n,...t)=>{if(!t.length&&"string"===or(n)&&eh[n.toLowerCase()])return"named"}}),yt.prototype.alpha=function(n,t=!1){return void 0!==n&&"number"===or(n)?t?(this._rgb[3]=n,this):new yt([this._rgb[0],this._rgb[1],this._rgb[2],n],"rgb"):this._rgb[3]},yt.prototype.clipped=function(){return this._rgb._clipped||!1};const X0={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},th=X0,See=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function ic(n){const t=See.get(String(n).toLowerCase());if(!t)throw new Error("unknown Lab illuminant "+n);X0.labWhitePoint=n,X0.Xn=t[0],X0.Zn=t[1]}function Y0(){return X0.labWhitePoint}const W8=n=>{const t=Math.sign(n);return((n=Math.abs(n))<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)*t},fT=(n,t,e)=>{const{MtxAdaptMa:r,MtxAdaptMaI:s,MtxXYZ2RGB:i,RefWhiteRGB:o,Xn:a,Yn:l,Zn:c}=th,V=(o.X*r.m00+o.Y*r.m10+o.Z*r.m20)/(a*r.m00+l*r.m10+c*r.m20)*(n*r.m00+t*r.m10+e*r.m20),M=(o.X*r.m01+o.Y*r.m11+o.Z*r.m21)/(a*r.m01+l*r.m11+c*r.m21)*(n*r.m01+t*r.m11+e*r.m21),D=(o.X*r.m02+o.Y*r.m12+o.Z*r.m22)/(a*r.m02+l*r.m12+c*r.m22)*(n*r.m02+t*r.m12+e*r.m22),J=V*s.m00+M*s.m10+D*s.m20,X=V*s.m01+M*s.m11+D*s.m21,G=V*s.m02+M*s.m12+D*s.m22;return[255*W8(J*i.m00+X*i.m10+G*i.m20),255*W8(J*i.m01+X*i.m11+G*i.m21),255*W8(J*i.m02+X*i.m12+G*i.m22)]},Z8=(...n)=>{n=Kn(n,"lab");const[t,e,r]=n,[s,i,o]=((n,t,e)=>{const{kE:r,kK:s,kKE:i,Xn:o,Yn:a,Zn:l}=th,c=(n+16)/116,u=.002*t+c,h=c-.005*e,d=u*u*u,g=h*h*h;return[(d>r?d:(116*u-16)/s)*o,(n>i?Math.pow((n+16)/116,3):n/s)*a,(g>r?g:(116*h-16)/s)*l]})(t,e,r),[a,l,c]=fT(s,i,o);return[a,l,c,n.length>3?n[3]:1]};function j8(n){const t=Math.sign(n);return((n=Math.abs(n))<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4))*t}const mT=(n,t,e)=>{n=j8(n/255),t=j8(t/255),e=j8(e/255);const{MtxRGB2XYZ:r,MtxAdaptMa:s,MtxAdaptMaI:i,Xn:o,Yn:a,Zn:l,As:c,Bs:u,Cs:h}=th;let d=n*r.m00+t*r.m10+e*r.m20,g=n*r.m01+t*r.m11+e*r.m21,m=n*r.m02+t*r.m12+e*r.m22,D=d*s.m00+g*s.m10+m*s.m20,J=d*s.m01+g*s.m11+m*s.m21,X=d*s.m02+g*s.m12+m*s.m22;return D*=(o*s.m00+a*s.m10+l*s.m20)/c,J*=(o*s.m01+a*s.m11+l*s.m21)/u,X*=(o*s.m02+a*s.m12+l*s.m22)/h,d=D*i.m00+J*i.m10+X*i.m20,g=D*i.m01+J*i.m11+X*i.m21,m=D*i.m02+J*i.m12+X*i.m22,[d,g,m]},U8=(...n)=>{const[t,e,r,...s]=Kn(n,"rgb"),[i,o,a]=mT(t,e,r),[l,c,u]=function zee(n,t,e){const{Xn:r,Yn:s,Zn:i,kE:o,kK:a}=th,l=n/r,c=t/s,u=e/i,h=l>o?Math.pow(l,1/3):(a*l+16)/116,d=c>o?Math.pow(c,1/3):(a*c+16)/116;return[116*d-16,500*(h-d),200*(d-(u>o?Math.pow(u,1/3):(a*u+16)/116))]}(i,o,a);return[l,c,u,...s.length>0&&s[0]<1?[s[0]]:[]]};yt.prototype.lab=function(){return U8(this._rgb)},Object.assign(Ar,{lab:(...n)=>new yt(...n,"lab"),getLabWhitePoint:Y0,setLabWhitePoint:ic}),Xn.format.lab=Z8,Xn.autodetect.push({p:2,test:(...n)=>{if("array"===or(n=Kn(n,"lab"))&&3===n.length)return"lab"}}),yt.prototype.darken=function(n=1){const e=this.lab();return e[0]-=th.Kn*n,new yt(e,"lab").alpha(this.alpha(),!0)},yt.prototype.brighten=function(n=1){return this.darken(-n)},yt.prototype.darker=yt.prototype.darken,yt.prototype.brighter=yt.prototype.brighten,yt.prototype.get=function(n){const[t,e]=n.split("."),r=this[t]();if(e){const s=t.indexOf(e)-("ok"===t.substr(0,2)?2:0);if(s>-1)return r[s];throw new Error(`unknown channel ${e} in mode ${t}`)}return r};const{pow:Vee}=Math;yt.prototype.luminance=function(n,t="rgb"){if(void 0!==n&&"number"===or(n)){if(0===n)return new yt([0,0,0,this._rgb[3]],"rgb");if(1===n)return new yt([255,255,255,this._rgb[3]],"rgb");let e=this.luminance(),r=20;const s=(o,a)=>{const l=o.interpolate(a,.5,t),c=l.luminance();return Math.abs(n-c)<1e-7||!r--?l:c>n?s(o,l):s(l,a)},i=(e>n?s(new yt([0,0,0]),this):s(this,new yt([255,255,255]))).rgb();return new yt([...i,this._rgb[3]])}return Lee(...this._rgb.slice(0,3))};const Lee=(n,t,e)=>.2126*(n=$8(n))+.7152*(t=$8(t))+.0722*$8(e),$8=n=>(n/=255)<=.03928?n/12.92:Vee((n+.055)/1.055,2.4),uo={},nh=(n,t,e=.5,...r)=>{let s=r[0]||"lrgb";if(!uo[s]&&!r.length&&(s=Object.keys(uo)[0]),!uo[s])throw new Error(`interpolation mode ${s} is not defined`);return"object"!==or(n)&&(n=new yt(n)),"object"!==or(t)&&(t=new yt(t)),uo[s](n,t,e).alpha(n.alpha()+e*(t.alpha()-n.alpha()))};yt.prototype.mix=yt.prototype.interpolate=function(n,t=.5,...e){return nh(this,n,t,...e)},yt.prototype.premultiply=function(n=!1){const t=this._rgb,e=t[3];return n?(this._rgb=[t[0]*e,t[1]*e,t[2]*e,e],this):new yt([t[0]*e,t[1]*e,t[2]*e,e],"rgb")};const{sin:Ree,cos:Dee}=Math,vT=(...n)=>{let[t,e,r]=Kn(n,"lch");return isNaN(r)&&(r=0),r*=Cee,[t,Dee(r)*e,Ree(r)*e]},X8=(...n)=>{n=Kn(n,"lch");const[t,e,r]=n,[s,i,o]=vT(t,e,r),[a,l,c]=Z8(s,i,o);return[a,l,c,n.length>3?n[3]:1]},{sqrt:Nee,atan2:Fee,round:Pee}=Math,wT=(...n)=>{const[t,e,r]=Kn(n,"lab"),s=Nee(e*e+r*r);let i=(Fee(r,e)*yee+360)%360;return 0===Pee(1e4*s)&&(i=Number.NaN),[t,s,i]},Y8=(...n)=>{const[t,e,r,...s]=Kn(n,"rgb"),[i,o,a]=U8(t,e,r),[l,c,u]=wT(i,o,a);return[l,c,u,...s.length>0&&s[0]<1?[s[0]]:[]]};yt.prototype.lch=function(){return Y8(this._rgb)},yt.prototype.hcl=function(){return hT(Y8(this._rgb))},Object.assign(Ar,{lch:(...n)=>new yt(...n,"lch"),hcl:(...n)=>new yt(...n,"hcl")}),Xn.format.lch=X8,Xn.format.hcl=(...n)=>{const t=hT(Kn(n,"hcl"));return X8(...t)},["lch","hcl"].forEach(n=>Xn.autodetect.push({p:2,test:(...t)=>{if("array"===or(t=Kn(t,n))&&3===t.length)return n}})),yt.prototype.saturate=function(n=1){const e=this.lch();return e[1]+=th.Kn*n,e[1]<0&&(e[1]=0),new yt(e,"lch").alpha(this.alpha(),!0)},yt.prototype.desaturate=function(n=1){return this.saturate(-n)},yt.prototype.set=function(n,t,e=!1){const[r,s]=n.split("."),i=this[r]();if(s){const o=r.indexOf(s)-("ok"===r.substr(0,2)?2:0);if(o>-1){if("string"==or(t))switch(t.charAt(0)){case"+":case"-":i[o]+=+t;break;case"*":i[o]*=+t.substr(1);break;case"/":i[o]/=+t.substr(1);break;default:i[o]=+t}else{if("number"!==or(t))throw new Error("unsupported value for Color.set");i[o]=t}const a=new yt(i,r);return e?(this._rgb=a._rgb,this):a}throw new Error(`unknown channel ${s} in mode ${r}`)}return i},yt.prototype.tint=function(n=.5,...t){return nh(this,"white",n,...t)},yt.prototype.shade=function(n=.5,...t){return nh(this,"black",n,...t)},uo.rgb=(n,t,e)=>{const r=n._rgb,s=t._rgb;return new yt(r[0]+e*(s[0]-r[0]),r[1]+e*(s[1]-r[1]),r[2]+e*(s[2]-r[2]),"rgb")};const{sqrt:K8,pow:rh}=Math;uo.lrgb=(n,t,e)=>{const[r,s,i]=n._rgb,[o,a,l]=t._rgb;return new yt(K8(rh(r,2)*(1-e)+rh(o,2)*e),K8(rh(s,2)*(1-e)+rh(a,2)*e),K8(rh(i,2)*(1-e)+rh(l,2)*e),"rgb")},uo.lab=(n,t,e)=>{const r=n.lab(),s=t.lab();return new yt(r[0]+e*(s[0]-r[0]),r[1]+e*(s[1]-r[1]),r[2]+e*(s[2]-r[2]),"lab")};const sh=(n,t,e,r)=>{let s,i,o,a,l,c,u,h,d,g,m,b;return"hsl"===r?(s=n.hsl(),i=t.hsl()):"hsv"===r?(s=n.hsv(),i=t.hsv()):"hcg"===r?(s=n.hcg(),i=t.hcg()):"hsi"===r?(s=n.hsi(),i=t.hsi()):"lch"===r||"hcl"===r?(r="hcl",s=n.hcl(),i=t.hcl()):"oklch"===r&&(s=n.oklch().reverse(),i=t.oklch().reverse()),("h"===r.substr(0,1)||"oklch"===r)&&([o,l,u]=s,[a,c,h]=i),isNaN(o)||isNaN(a)?isNaN(o)?isNaN(a)?g=Number.NaN:(g=a,(1==u||0==u)&&"hsv"!=r&&(d=c)):(g=o,(1==h||0==h)&&"hsv"!=r&&(d=l)):(b=a>o&&a-o>180?a-(o+360):a<o&&o-a>180?a+360-o:a-o,g=o+e*b),void 0===d&&(d=l+e*(c-l)),m=u+e*(h-u),new yt("oklch"===r?[m,d,g]:[g,d,m],r)},CT=(n,t,e)=>sh(n,t,e,"lch");uo.lch=CT,uo.hcl=CT,yt.prototype.num=function(){return((...n)=>{const[t,e,r]=Kn(n,"rgb");return(t<<16)+(e<<8)+r})(this._rgb)},Object.assign(Ar,{num:(...n)=>new yt(...n,"num")}),Xn.format.num=n=>{if("number"==or(n)&&n>=0&&n<=16777215)return[n>>16,n>>8&255,255&n,1];throw new Error("unknown num color: "+n)},Xn.autodetect.push({p:5,test:(...n)=>{if(1===n.length&&"number"===or(n[0])&&n[0]>=0&&n[0]<=16777215)return"num"}}),uo.num=(n,t,e)=>{const r=n.num(),s=t.num();return new yt(r+e*(s-r),"num")};const{floor:Uee}=Math;yt.prototype.hcg=function(){return((...n)=>{const[t,e,r]=Kn(n,"rgb"),s=cT(t,e,r),i=uT(t,e,r),o=i-s;let c;return 0===o?c=Number.NaN:(t===i&&(c=(e-r)/o),e===i&&(c=2+(r-t)/o),r===i&&(c=4+(t-e)/o),c*=60,c<0&&(c+=360)),[c,100*o/255,s/(255-o)*100]})(this._rgb)},Ar.hcg=(...n)=>new yt(...n,"hcg"),Xn.format.hcg=(...n)=>{n=Kn(n,"hcg");let s,i,o,[t,e,r]=n;r*=255;const a=255*e;if(0===e)s=i=o=r;else{360===t&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const l=Uee(t),c=t-l,u=r*(1-e),h=u+a*(1-c),d=u+a*c,g=u+a;switch(l){case 0:[s,i,o]=[g,d,u];break;case 1:[s,i,o]=[h,g,u];break;case 2:[s,i,o]=[u,g,d];break;case 3:[s,i,o]=[u,h,g];break;case 4:[s,i,o]=[d,u,g];break;case 5:[s,i,o]=[g,u,h]}}return[s,i,o,n.length>3?n[3]:1]},Xn.autodetect.push({p:1,test:(...n)=>{if("array"===or(n=Kn(n,"hcg"))&&3===n.length)return"hcg"}}),uo.hcg=(n,t,e)=>sh(n,t,e,"hcg");const{cos:ih}=Math,{min:Jee,sqrt:Qee,acos:ete}=Math;yt.prototype.hsi=function(){return((...n)=>{let s,[t,e,r]=Kn(n,"rgb");t/=255,e/=255,r/=255;const i=Jee(t,e,r),o=(t+e+r)/3,a=o>0?1-i/o:0;return 0===a?s=NaN:(s=(t-e+(t-r))/2,s/=Qee((t-e)*(t-e)+(t-r)*(e-r)),s=ete(s),r>e&&(s=sc-s),s/=sc),[360*s,a,o]})(this._rgb)},Ar.hsi=(...n)=>new yt(...n,"hsi"),Xn.format.hsi=(...n)=>{n=Kn(n,"hsi");let s,i,o,[t,e,r]=n;return isNaN(t)&&(t=0),isNaN(e)&&(e=0),t>360&&(t-=360),t<0&&(t+=360),t/=360,t<1/3?(o=(1-e)/3,s=(1+e*ih(sc*t)/ih(G8-sc*t))/3,i=1-(o+s)):t<2/3?(t-=1/3,s=(1-e)/3,i=(1+e*ih(sc*t)/ih(G8-sc*t))/3,o=1-(s+i)):(t-=2/3,i=(1-e)/3,o=(1+e*ih(sc*t)/ih(G8-sc*t))/3,s=1-(i+o)),s=o2(r*s*3),i=o2(r*i*3),o=o2(r*o*3),[255*s,255*i,255*o,n.length>3?n[3]:1]},Xn.autodetect.push({p:2,test:(...n)=>{if("array"===or(n=Kn(n,"hsi"))&&3===n.length)return"hsi"}}),uo.hsi=(n,t,e)=>sh(n,t,e,"hsi");const q8=(...n)=>{n=Kn(n,"hsl");const[t,e,r]=n;let s,i,o;if(0===e)s=i=o=255*r;else{const a=[0,0,0],l=[0,0,0],c=r<.5?r*(1+e):r+e-r*e,u=2*r-c,h=t/360;a[0]=h+1/3,a[1]=h,a[2]=h-1/3;for(let d=0;d<3;d++)a[d]<0&&(a[d]+=1),a[d]>1&&(a[d]-=1),l[d]=6*a[d]<1?u+6*(c-u)*a[d]:2*a[d]<1?c:3*a[d]<2?u+(c-u)*(2/3-a[d])*6:u;[s,i,o]=[255*l[0],255*l[1],255*l[2]]}return n.length>3?[s,i,o,n[3]]:[s,i,o,1]},yT=(...n)=>{n=Kn(n,"rgba");let[t,e,r]=n;t/=255,e/=255,r/=255;const s=cT(t,e,r),i=uT(t,e,r),o=(i+s)/2;let a,l;return i===s?(a=0,l=Number.NaN):a=o<.5?(i-s)/(i+s):(i-s)/(2-i-s),t==i?l=(e-r)/(i-s):e==i?l=2+(r-t)/(i-s):r==i&&(l=4+(t-e)/(i-s)),l*=60,l<0&&(l+=360),n.length>3&&void 0!==n[3]?[l,a,o,n[3]]:[l,a,o]};yt.prototype.hsl=function(){return yT(this._rgb)},Ar.hsl=(...n)=>new yt(...n,"hsl"),Xn.format.hsl=q8,Xn.autodetect.push({p:2,test:(...n)=>{if("array"===or(n=Kn(n,"hsl"))&&3===n.length)return"hsl"}}),uo.hsl=(n,t,e)=>sh(n,t,e,"hsl");const{floor:ote}=Math,{min:lte,max:cte}=Math;function V5(n,t){let e=n.length;Array.isArray(n[0])||(n=[n]),Array.isArray(t[0])||(t=t.map(o=>[o]));let r=t[0].length,s=t[0].map((o,a)=>t.map(l=>l[a])),i=n.map(o=>s.map(a=>Array.isArray(o)?o.reduce((l,c,u)=>l+c*(a[u]||0),0):a.reduce((l,c)=>l+c*o,0)));return 1===e&&(i=i[0]),1===r?i.map(o=>o[0]):i}yt.prototype.hsv=function(){return((...n)=>{n=Kn(n,"rgb");let[t,e,r]=n;const s=lte(t,e,r),i=cte(t,e,r),o=i-s;let a,l,c;return c=i/255,0===i?(a=Number.NaN,l=0):(l=o/i,t===i&&(a=(e-r)/o),e===i&&(a=2+(r-t)/o),r===i&&(a=4+(t-e)/o),a*=60,a<0&&(a+=360)),[a,l,c]})(this._rgb)},Ar.hsv=(...n)=>new yt(...n,"hsv"),Xn.format.hsv=(...n)=>{n=Kn(n,"hsv");let s,i,o,[t,e,r]=n;if(r*=255,0===e)s=i=o=r;else{360===t&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;const a=ote(t),l=t-a,c=r*(1-e),u=r*(1-e*l),h=r*(1-e*(1-l));switch(a){case 0:[s,i,o]=[r,h,c];break;case 1:[s,i,o]=[u,r,c];break;case 2:[s,i,o]=[c,r,h];break;case 3:[s,i,o]=[c,u,r];break;case 4:[s,i,o]=[h,c,r];break;case 5:[s,i,o]=[r,c,u]}}return[s,i,o,n.length>3?n[3]:1]},Xn.autodetect.push({p:2,test:(...n)=>{if("array"===or(n=Kn(n,"hsv"))&&3===n.length)return"hsv"}}),uo.hsv=(n,t,e)=>sh(n,t,e,"hsv");const J8=(...n)=>{n=Kn(n,"lab");const[t,e,r,...s]=n,[i,o,a]=function gte(n){var r=V5([[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],n);return V5([[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],r.map(s=>s**3))}([t,e,r]),[l,c,u]=fT(i,o,a);return[l,c,u,...s.length>0&&s[0]<1?[s[0]]:[]]};function mte(n){const r=V5([[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],n);return V5([[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r.map(s=>Math.cbrt(s)))}const Q8=(...n)=>{const[t,e,r,...s]=Kn(n,"rgb");return[...mte(mT(t,e,r)),...s.length>0&&s[0]<1?[s[0]]:[]]};yt.prototype.oklab=function(){return Q8(this._rgb)},Object.assign(Ar,{oklab:(...n)=>new yt(...n,"oklab")}),Xn.format.oklab=J8,Xn.autodetect.push({p:2,test:(...n)=>{if("array"===or(n=Kn(n,"oklab"))&&3===n.length)return"oklab"}}),uo.oklab=(n,t,e)=>{const r=n.oklab(),s=t.oklab();return new yt(r[0]+e*(s[0]-r[0]),r[1]+e*(s[1]-r[1]),r[2]+e*(s[2]-r[2]),"oklab")},uo.oklch=(n,t,e)=>sh(n,t,e,"oklch");const{pow:eC,sqrt:tC,PI:nC,cos:IT,sin:AT,atan2:Cte}=Math,{pow:Ate}=Math;function T5(n){let t="rgb",e=Ar("#ccc"),r=0,s=[0,1],i=[],o=[0,0],a=!1,l=[],c=!1,u=0,h=1,d=!1,g={},m=!0,b=1;const V=function(U){if((U=U||["#fff","#000"])&&"string"===or(U)&&Ar.brewer&&Ar.brewer[U.toLowerCase()]&&(U=Ar.brewer[U.toLowerCase()]),"array"===or(U)){1===U.length&&(U=[U[0],U[0]]),U=U.slice(0);for(let pe=0;pe<U.length;pe++)U[pe]=Ar(U[pe]);i.length=0;for(let pe=0;pe<U.length;pe++)i.push(pe/(U.length-1))}return G(),l=U};let D=U=>U,J=U=>U;const X=function(U,pe){let Me,ye;if(null==pe&&(pe=!1),isNaN(U)||null===U)return e;ye=pe?U:a&&a.length>2?function(U){if(null!=a){const pe=a.length-1;let Me=0;for(;Me<pe&&U>=a[Me];)Me++;return Me-1}return 0}(U)/(a.length-2):h!==u?(U-u)/(h-u):1,ye=J(ye),pe||(ye=D(ye)),1!==b&&(ye=Ate(ye,b)),ye=o[0]+ye*(1-o[0]-o[1]),ye=o2(ye,0,1);const Fe=Math.floor(1e4*ye);if(m&&g[Fe])Me=g[Fe];else{if("array"===or(l))for(let He=0;He<i.length;He++){const ht=i[He];if(ye<=ht){Me=l[He];break}if(ye>=ht&&He===i.length-1){Me=l[He];break}if(ye>ht&&ye<i[He+1]){ye=(ye-ht)/(i[He+1]-ht),Me=Ar.interpolate(l[He],l[He+1],ye,t);break}}else"function"===or(l)&&(Me=l(ye));m&&(g[Fe]=Me)}return Me};var G=()=>g={};V(n);const K=function(U){const pe=Ar(X(U));return c&&pe[c]?pe[c]():pe};return K.classes=function(U){if(null!=U){if("array"===or(U))a=U,s=[U[0],U[U.length-1]];else{const pe=Ar.analyze(s);a=0===U?[pe.min,pe.max]:Ar.limits(pe,"e",U)}return K}return a},K.domain=function(U){if(!arguments.length)return s;u=U[0],h=U[U.length-1],i=[];const pe=l.length;if(U.length===pe&&u!==h)for(let Me of Array.from(U))i.push((Me-u)/(h-u));else{for(let Me=0;Me<pe;Me++)i.push(Me/(pe-1));if(U.length>2){const Me=U.map((Fe,He)=>He/(U.length-1)),ye=U.map(Fe=>(Fe-u)/(h-u));ye.every((Fe,He)=>Me[He]===Fe)||(J=Fe=>{if(Fe<=0||Fe>=1)return Fe;let He=0;for(;Fe>=ye[He+1];)He++;return Me[He]+(Fe-ye[He])/(ye[He+1]-ye[He])*(Me[He+1]-Me[He])})}}return s=[u,h],K},K.mode=function(U){return arguments.length?(t=U,G(),K):t},K.range=function(U,pe){return V(U),K},K.out=function(U){return c=U,K},K.spread=function(U){return arguments.length?(r=U,K):r},K.correctLightness=function(U){return null==U&&(U=!0),d=U,G(),D=d?function(pe){const Me=X(0,!0).lab()[0],ye=X(1,!0).lab()[0],Fe=Me>ye;let He=X(pe,!0).lab()[0];const ht=Me+(ye-Me)*pe;let dt=He-ht,Ke=0,Zt=1,dn=20;for(;Math.abs(dt)>.01&&dn-- >0;)Fe&&(dt*=-1),dt<0?(Ke=pe,pe+=.5*(Zt-pe)):(Zt=pe,pe+=.5*(Ke-pe)),He=X(pe,!0).lab()[0],dt=He-ht;return pe}:pe=>pe,K},K.padding=function(U){return null!=U?("number"===or(U)&&(U=[U,U]),o=U,K):o},K.colors=function(U,pe){arguments.length<2&&(pe="hex");let Me=[];if(0===arguments.length)Me=l.slice(0);else if(1===U)Me=[K(.5)];else if(U>1){const ye=s[0],Fe=s[1]-ye;Me=function bte(n,t,e){let r=[],s=n<t,i=e?s?t+1:t-1:t;for(let o=n;s?o<i:o>i;s?o++:o--)r.push(o);return r}(0,U,!1).map(He=>K(ye+He/(U-1)*Fe))}else{n=[];let ye=[];if(a&&a.length>2)for(let Fe=1,He=a.length,ht=1<=He;ht?Fe<He:Fe>He;ht?Fe++:Fe--)ye.push(.5*(a[Fe-1]+a[Fe]));else ye=s;Me=ye.map(Fe=>K(Fe))}return Ar[pe]&&(Me=Me.map(ye=>ye[pe]())),Me},K.cache=function(U){return null!=U?(m=U,K):m},K.gamma=function(U){return null!=U?(b=U,K):b},K.nodata=function(U){return null!=U?(e=Ar(U),K):e},K}const{round:bT}=Math;yt.prototype.rgb=function(n=!0){return!1===n?this._rgb.slice(0,3):this._rgb.slice(0,3).map(bT)},yt.prototype.rgba=function(n=!0){return this._rgb.slice(0,4).map((t,e)=>e<3?!1===n?t:bT(t):t)},Object.assign(Ar,{rgb:(...n)=>new yt(...n,"rgb")}),Xn.format.rgb=(...n)=>{const t=Kn(n,"rgba");return void 0===t[3]&&(t[3]=1),t},Xn.autodetect.push({p:3,test:(...n)=>{if("array"===or(n=Kn(n,"rgba"))&&(3===n.length||4===n.length&&"number"==or(n[3])&&n[3]>=0&&n[3]<=1))return"rgb"}});const Ka=(n,t,e)=>{if(!Ka[e])throw new Error("unknown blend mode "+e);return Ka[e](n,t)},t1=n=>(t,e)=>{const r=Ar(e).rgb(),s=Ar(t).rgb();return Ar.rgb(n(r,s))},n1=n=>(t,e)=>{const r=[];return r[0]=n(t[0],e[0]),r[1]=n(t[1],e[1]),r[2]=n(t[2],e[2]),r};Ka.normal=t1(n1(n=>n)),Ka.multiply=t1(n1((n,t)=>n*t/255)),Ka.screen=t1(n1((n,t)=>255*(1-(1-n/255)*(1-t/255)))),Ka.overlay=t1(n1((n,t)=>t<128?2*n*t/255:255*(1-2*(1-n/255)*(1-t/255)))),Ka.darken=t1(n1((n,t)=>n>t?t:n)),Ka.lighten=t1(n1((n,t)=>n>t?n:t)),Ka.dodge=t1(n1((n,t)=>255===n||(n=t/255*255/(1-n/255))>255?255:n)),Ka.burn=t1(n1((n,t)=>255*(1-(1-t/255)/(n/255))));const Dte=Ka,{pow:Bte,sin:Nte,cos:Fte}=Math,{floor:kte,random:Gte}=Math,{log:xT,pow:Zte,floor:jte,abs:Ute}=Math;function ST(n,t=null){const e={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===or(n)&&(n=Object.values(n)),n.forEach(r=>{t&&"object"===or(r)&&(r=r[t]),null!=r&&!isNaN(r)&&(e.values.push(r),e.sum+=r,r<e.min&&(e.min=r),r>e.max&&(e.max=r),e.count+=1)}),e.domain=[e.min,e.max],e.limits=(r,s)=>HT(e,r,s),e}function HT(n,t="equal",e=7){"array"==or(n)&&(n=ST(n));const{min:r,max:s}=n,i=n.values.sort((a,l)=>a-l);if(1===e)return[r,s];const o=[];if("c"===t.substr(0,1)&&(o.push(r),o.push(s)),"e"===t.substr(0,1)){o.push(r);for(let a=1;a<e;a++)o.push(r+a/e*(s-r));o.push(s)}else if("l"===t.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");const a=Math.LOG10E*xT(r),l=Math.LOG10E*xT(s);o.push(r);for(let c=1;c<e;c++)o.push(Zte(10,a+c/e*(l-a)));o.push(s)}else if("q"===t.substr(0,1)){o.push(r);for(let a=1;a<e;a++){const l=(i.length-1)*a/e,c=jte(l);if(c===l)o.push(i[c]);else{const u=l-c;o.push(i[c]*(1-u)+i[c+1]*u)}}o.push(s)}else if("k"===t.substr(0,1)){let a;const l=i.length,c=new Array(l),u=new Array(e);let h=!0,d=0,g=null;g=[],g.push(r);for(let V=1;V<e;V++)g.push(r+V/e*(s-r));for(g.push(s);h;){for(let M=0;M<e;M++)u[M]=0;for(let M=0;M<l;M++){const D=i[M];let X,J=Number.MAX_VALUE;for(let G=0;G<e;G++){const K=Ute(g[G]-D);K<J&&(J=K,X=G),u[X]++,c[M]=X}}const V=new Array(e);for(let M=0;M<e;M++)V[M]=null;for(let M=0;M<l;M++)a=c[M],null===V[a]?V[a]=i[M]:V[a]+=i[M];for(let M=0;M<e;M++)V[M]*=1/u[M];h=!1;for(let M=0;M<e;M++)if(V[M]!==g[M]){h=!0;break}g=V,d++,d>200&&(h=!1)}const m={};for(let V=0;V<e;V++)m[V]=[];for(let V=0;V<l;V++)a=c[V],m[a].push(i[V]);let b=[];for(let V=0;V<e;V++)b.push(m[V][0]),b.push(m[V][m[V].length-1]);b=b.sort((V,M)=>V-M),o.push(b[0]);for(let V=1;V<b.length;V+=2){const M=b[V];!isNaN(M)&&-1===o.indexOf(M)&&o.push(M)}}return o}const E5=.022;function VT(n,t,e){return.2126729*Math.pow(n/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(e/255,2.4)}const{sqrt:oc,pow:yi,min:qte,max:Jte,atan2:TT,abs:ET,cos:L5,sin:LT,exp:Qte,PI:RT}=Math,rne={cool:()=>T5([Ar.hsl(180,1,.9),Ar.hsl(250,.7,.4)]),hot:()=>T5(["#000","#f00","#ff0","#fff"]).mode("rgb")},rC={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},DT=Object.keys(rC),BT=new Map(DT.map(n=>[n.toLowerCase(),n])),sne="function"==typeof Proxy?new Proxy(rC,{get(n,t){const e=t.toLowerCase();if(BT.has(e))return n[BT.get(e)]},getOwnPropertyNames:()=>Object.getOwnPropertyNames(DT)}):rC,{max:NT}=Math;yt.prototype.cmyk=function(){return((...n)=>{let[t,e,r]=Kn(n,"rgb");t/=255,e/=255,r/=255;const s=1-NT(t,NT(e,r)),i=s<1?1/(1-s):0;return[(1-t-s)*i,(1-e-s)*i,(1-r-s)*i,s]})(this._rgb)},Object.assign(Ar,{cmyk:(...n)=>new yt(...n,"cmyk")}),Xn.format.cmyk=(...n)=>{n=Kn(n,"cmyk");const[t,e,r,s]=n,i=n.length>4?n[4]:1;return 1===s?[0,0,0,i]:[t>=1?0:255*(1-t)*(1-s),e>=1?0:255*(1-e)*(1-s),r>=1?0:255*(1-r)*(1-s),i]},Xn.autodetect.push({p:2,test:(...n)=>{if("array"===or(n=Kn(n,"cmyk"))&&4===n.length)return"cmyk"}});const FT=(...n)=>{const[t,e,r,...s]=Kn(n,"rgb"),[i,o,a]=Q8(t,e,r),[l,c,u]=wT(i,o,a);return[l,c,u,...s.length>0&&s[0]<1?[s[0]]:[]]},{round:sC}=Math,PT=(...n)=>{n=Kn(n,"lch");const[t,e,r,...s]=n,[i,o,a]=vT(t,e,r),[l,c,u]=J8(i,o,a);return[l,c,u,...s.length>0&&s[0]<1?[s[0]]:[]]},ac=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,qa=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,R5=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,za=/\s*/.source,oh=/\s+/.source,iC=/\s*,\s*/.source,D5=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,ah=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,OT=new RegExp("^rgba?\\("+za+[ac,ac,ac].join(oh)+ah+"\\)$"),kT=new RegExp("^rgb\\("+za+[ac,ac,ac].join(iC)+za+"\\)$"),GT=new RegExp("^rgba\\("+za+[ac,ac,ac,qa].join(iC)+za+"\\)$"),WT=new RegExp("^hsla?\\("+za+[D5,R5,R5].join(oh)+ah+"\\)$"),ZT=new RegExp("^hsl?\\("+za+[D5,R5,R5].join(iC)+za+"\\)$"),jT=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,UT=new RegExp("^lab\\("+za+[qa,qa,qa].join(oh)+ah+"\\)$"),$T=new RegExp("^lch\\("+za+[qa,qa,D5].join(oh)+ah+"\\)$"),XT=new RegExp("^oklab\\("+za+[qa,qa,qa].join(oh)+ah+"\\)$"),YT=new RegExp("^oklch\\("+za+[qa,qa,D5].join(oh)+ah+"\\)$"),{round:KT}=Math,lh=n=>n.map((t,e)=>e<=2?o2(KT(t),0,255):t),Ii=(n,t=0,e=100,r=!1)=>("string"==typeof n&&n.endsWith("%")&&(n=parseFloat(n.substring(0,n.length-1))/100,n=r?t+.5*(n+1)*(e-t):t+n*(e-t)),+n),Ho=(n,t)=>"none"===n?t:n,qT=n=>{if("transparent"===(n=n.toLowerCase().trim()))return[0,0,0,0];let t;if(Xn.format.named)try{return Xn.format.named(n)}catch{}if((t=n.match(OT))||(t=n.match(kT))){let e=t.slice(1,4);for(let s=0;s<3;s++)e[s]=+Ii(Ho(e[s],0),0,255);e=lh(e);const r=void 0!==t[4]?+Ii(t[4],0,1):1;return e[3]=r,e}if(t=n.match(GT)){const e=t.slice(1,5);for(let r=0;r<4;r++)e[r]=+Ii(e[r],0,255);return e}if((t=n.match(WT))||(t=n.match(ZT))){const e=t.slice(1,4);e[0]=+Ho(e[0].replace("deg",""),0),e[1]=.01*+Ii(Ho(e[1],0),0,100),e[2]=.01*+Ii(Ho(e[2],0),0,100);const r=lh(q8(e)),s=void 0!==t[4]?+Ii(t[4],0,1):1;return r[3]=s,r}if(t=n.match(jT)){const e=t.slice(1,4);e[1]*=.01,e[2]*=.01;const r=q8(e);for(let s=0;s<3;s++)r[s]=KT(r[s]);return r[3]=+t[4],r}if(t=n.match(UT)){const e=t.slice(1,4);e[0]=Ii(Ho(e[0],0),0,100),e[1]=Ii(Ho(e[1],0),-125,125,!0),e[2]=Ii(Ho(e[2],0),-125,125,!0);const r=Y0();ic("d50");const s=lh(Z8(e));ic(r);const i=void 0!==t[4]?+Ii(t[4],0,1):1;return s[3]=i,s}if(t=n.match($T)){const e=t.slice(1,4);e[0]=Ii(e[0],0,100),e[1]=Ii(Ho(e[1],0),0,150,!1),e[2]=+Ho(e[2].replace("deg",""),0);const r=Y0();ic("d50");const s=lh(X8(e));ic(r);const i=void 0!==t[4]?+Ii(t[4],0,1):1;return s[3]=i,s}if(t=n.match(XT)){const e=t.slice(1,4);e[0]=Ii(Ho(e[0],0),0,1),e[1]=Ii(Ho(e[1],0),-.4,.4,!0),e[2]=Ii(Ho(e[2],0),-.4,.4,!0);const r=lh(J8(e)),s=void 0!==t[4]?+Ii(t[4],0,1):1;return r[3]=s,r}if(t=n.match(YT)){const e=t.slice(1,4);e[0]=Ii(Ho(e[0],0),0,1),e[1]=Ii(Ho(e[1],0),0,.4,!1),e[2]=+Ho(e[2].replace("deg",""),0);const r=lh(PT(e)),s=void 0!==t[4]?+Ii(t[4],0,1):1;return r[3]=s,r}};qT.test=n=>OT.test(n)||WT.test(n)||UT.test(n)||$T.test(n)||XT.test(n)||YT.test(n)||kT.test(n)||GT.test(n)||ZT.test(n)||jT.test(n)||"transparent"===n;const JT=qT;yt.prototype.css=function(n){return((...n)=>{const t=Kn(n,"rgba");let e=Qu(n)||"rgb";if("hsl"===e.substr(0,3))return((...n)=>{const t=Kn(n,"hsla");let e=Qu(n)||"lsa";return t[0]=Ma(t[0]||0)+"deg",t[1]=Ma(100*t[1])+"%",t[2]=Ma(100*t[2])+"%","hsla"===e||t.length>3&&t[3]<1?(t[3]="/ "+(t.length>3?t[3]:1),e="hsla"):t.length=3,`${e.substr(0,3)}(${t.join(" ")})`})(yT(t),e);if("lab"===e.substr(0,3)){const r=Y0();ic("d50");const s=((...n)=>{const t=Kn(n,"lab");let e=Qu(n)||"lab";return t[0]=Ma(t[0])+"%",t[1]=Ma(t[1]),t[2]=Ma(t[2]),"laba"===e||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lab(${t.join(" ")})`})(U8(t),e);return ic(r),s}if("lch"===e.substr(0,3)){const r=Y0();ic("d50");const s=((...n)=>{const t=Kn(n,"lch");let e=Qu(n)||"lab";return t[0]=Ma(t[0])+"%",t[1]=Ma(t[1]),t[2]=isNaN(t[2])?"none":Ma(t[2])+"deg","lcha"===e||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lch(${t.join(" ")})`})(Y8(t),e);return ic(r),s}return"oklab"===e.substr(0,5)?((...n)=>{const t=Kn(n,"lab");return t[0]=Ma(100*t[0])+"%",t[1]=k8(t[1]),t[2]=k8(t[2]),t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklab(${t.join(" ")})`})(Q8(t)):"oklch"===e.substr(0,5)?((...n)=>{const t=Kn(n,"lch");return t[0]=Ma(100*t[0])+"%",t[1]=k8(t[1]),t[2]=isNaN(t[2])?"none":Ma(t[2])+"deg",t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklch(${t.join(" ")})`})(FT(t)):(t[0]=sC(t[0]),t[1]=sC(t[1]),t[2]=sC(t[2]),("rgba"===e||t.length>3&&t[3]<1)&&(t[3]="/ "+(t.length>3?t[3]:1),e="rgba"),`${e.substr(0,3)}(${t.slice(0,"rgb"===e?3:4).join(" ")})`)})(this._rgb,n)},Ar.css=(...n)=>new yt(...n,"css"),Xn.format.css=JT,Xn.autodetect.push({p:5,test:(n,...t)=>{if(!t.length&&"string"===or(n)&&JT.test(n))return"css"}}),Xn.format.gl=(...n)=>{const t=Kn(n,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t},Ar.gl=(...n)=>new yt(...n,"gl"),yt.prototype.gl=function(){const n=this._rgb;return[n[0]/255,n[1]/255,n[2]/255,n[3]]},yt.prototype.hex=function(n){return gT(this._rgb,n)},Ar.hex=(...n)=>new yt(...n,"hex"),Xn.format.hex=pT,Xn.autodetect.push({p:4,test:(n,...t)=>{if(!t.length&&"string"===or(n)&&[3,4,5,6,7,8,9].indexOf(n.length)>=0)return"hex"}});const{log:B5}=Math,QT=n=>{const t=n/100;let e,r,s;return t<66?(e=255,r=t<6?0:-155.25485562709179-.44596950469579133*(r=t-2)+104.49216199393888*B5(r),s=t<20?0:.8274096064007395*(s=t-10)-254.76935184120902+115.67994401066147*B5(s)):(e=351.97690566805693+.114206453784165*(e=t-55)-40.25366309332127*B5(e),r=325.4494125711974+.07943456536662342*(r=t-50)-28.0852963507957*B5(r),s=255),[e,r,s,1]},{round:mne}=Math;yt.prototype.temp=yt.prototype.kelvin=yt.prototype.temperature=function(){return(()=>{const t=Kn([this._rgb],"rgb"),e=t[0],r=t[2];let a,s=1e3,i=4e4;for(;i-s>.4;){a=.5*(i+s);const l=QT(a);l[2]/l[0]>=r/e?i=a:s=a}return mne(a)})()};const oC=(...n)=>new yt(...n,"temp");Object.assign(Ar,{temp:oC,kelvin:oC,temperature:oC}),Xn.format.temp=Xn.format.kelvin=Xn.format.temperature=QT,yt.prototype.oklch=function(){return FT(this._rgb)},Object.assign(Ar,{oklch:(...n)=>new yt(...n,"oklch")}),Xn.format.oklch=PT,Xn.autodetect.push({p:2,test:(...n)=>{if("array"===or(n=Kn(n,"oklch"))&&3===n.length)return"oklch"}}),Object.assign(Ar,{analyze:ST,average:(n,t="lrgb",e=null)=>{const r=n.length;e||(e=Array.from(new Array(r)).map(()=>1));const s=r/e.reduce(function(h,d){return h+d});if(e.forEach((h,d)=>{e[d]*=s}),n=n.map(h=>new yt(h)),"lrgb"===t)return((n,t)=>{const e=n.length,r=[0,0,0,0];for(let s=0;s<n.length;s++){const o=t[s]/e,a=n[s]._rgb;r[0]+=eC(a[0],2)*o,r[1]+=eC(a[1],2)*o,r[2]+=eC(a[2],2)*o,r[3]+=a[3]*o}return r[0]=tC(r[0]),r[1]=tC(r[1]),r[2]=tC(r[2]),r[3]>.9999999&&(r[3]=1),new yt(O8(r))})(n,e);const i=n.shift(),o=i.get(t),a=[];let l=0,c=0;for(let h=0;h<o.length;h++)if(o[h]=(o[h]||0)*e[0],a.push(isNaN(o[h])?0:e[0]),"h"===t.charAt(h)&&!isNaN(o[h])){const d=o[h]/180*nC;l+=IT(d)*e[0],c+=AT(d)*e[0]}let u=i.alpha()*e[0];n.forEach((h,d)=>{const g=h.get(t);u+=h.alpha()*e[d+1];for(let m=0;m<o.length;m++)if(!isNaN(g[m]))if(a[m]+=e[d+1],"h"===t.charAt(m)){const b=g[m]/180*nC;l+=IT(b)*e[d+1],c+=AT(b)*e[d+1]}else o[m]+=g[m]*e[d+1]});for(let h=0;h<o.length;h++)if("h"===t.charAt(h)){let d=Cte(c/a[h],l/a[h])/nC*180;for(;d<0;)d+=360;for(;d>=360;)d-=360;o[h]=d}else o[h]=o[h]/a[h];return u/=r,new yt(o,t).alpha(u>.99999?1:u,!0)},bezier:n=>{const t=function(n){let t,e,r,s;if(2===(n=n.map(i=>new yt(i))).length)[e,r]=n.map(i=>i.lab()),t=function(i){const o=[0,1,2].map(a=>e[a]+i*(r[a]-e[a]));return new yt(o,"lab")};else if(3===n.length)[e,r,s]=n.map(i=>i.lab()),t=function(i){const o=[0,1,2].map(a=>(1-i)*(1-i)*e[a]+2*(1-i)*i*r[a]+i*i*s[a]);return new yt(o,"lab")};else if(4===n.length){let i;[e,r,s,i]=n.map(o=>o.lab()),t=function(o){const a=[0,1,2].map(l=>(1-o)*(1-o)*(1-o)*e[l]+3*(1-o)*(1-o)*o*r[l]+3*(1-o)*o*o*s[l]+o*o*o*i[l]);return new yt(a,"lab")}}else{if(!(n.length>=5))throw new RangeError("No point in running bezier with only one color.");{let i,o,a;i=n.map(l=>l.lab()),a=n.length-1,o=function(n){let t=[1,1];for(let e=1;e<n;e++){let r=[1];for(let s=1;s<=t.length;s++)r[s]=(t[s]||0)+t[s-1];t=r}return t}(a),t=function(l){const c=1-l,u=[0,1,2].map(h=>i.reduce((d,g,m)=>d+o[m]*c**(a-m)*l**m*g[h],0));return new yt(u,"lab")}}}return t}(n);return t.scale=()=>T5(t),t},blend:Dte,brewer:sne,Color:yt,colors:eh,contrast:(n,t)=>{n=new yt(n),t=new yt(t);const e=n.luminance(),r=t.luminance();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},contrastAPCA:(n,t)=>{n=new yt(n),t=new yt(t),n.alpha()<1&&(n=nh(t,n,n.alpha(),"rgb"));const e=VT(...n.rgb()),r=VT(...t.rgb()),s=e>=E5?e:e+Math.pow(E5-e,1.414),i=r>=E5?r:r+Math.pow(E5-r,1.414),o=Math.pow(i,.56)-Math.pow(s,.57),a=Math.pow(i,.65)-Math.pow(s,.62),l=Math.abs(i-s)<5e-4?0:s<i?1.14*o:1.14*a;return 100*(Math.abs(l)<.1?0:l>0?l-.027:l+.027)},cubehelix:function Pte(n=300,t=-1.5,e=1,r=1,s=[0,1]){let o,i=0;"array"===or(s)?o=s[1]-s[0]:(o=0,s=[s,s]);const a=function(l){const c=sc*((n+120)/360+t*l),u=Bte(s[0]+o*l,r),d=(0!==i?e[0]+l*i:e)*u*(1-u)/2,g=Fte(c),m=Nte(c);return Ar(O8([255*(u+d*(-.14861*g+1.78277*m)),255*(u+d*(-.29227*g-.90649*m)),255*(u+d*(1.97294*g)),1]))};return a.start=function(l){return null==l?n:(n=l,a)},a.rotations=function(l){return null==l?t:(t=l,a)},a.gamma=function(l){return null==l?r:(r=l,a)},a.hue=function(l){return null==l?e:("array"===or(e=l)?(i=e[1]-e[0],0===i&&(e=e[1])):i=0,a)},a.lightness=function(l){return null==l?s:("array"===or(l)?(s=l,o=l[1]-l[0]):(s=[l,l],o=0),a)},a.scale=()=>Ar.scale(a),a.hue(e),a},deltaE:function ene(n,t,e=1,r=1,s=1){var i=function(bi){return 360*bi/(2*RT)},o=function(bi){return 2*RT*bi/360};n=new yt(n),t=new yt(t);const[a,l,c]=Array.from(n.lab()),[u,h,d]=Array.from(t.lab()),g=(a+u)/2,V=(oc(yi(l,2)+yi(c,2))+oc(yi(h,2)+yi(d,2)))/2,M=.5*(1-oc(yi(V,7)/(yi(V,7)+yi(25,7)))),D=l*(1+M),J=h*(1+M),X=oc(yi(D,2)+yi(c,2)),G=oc(yi(J,2)+yi(d,2)),K=(X+G)/2,U=i(TT(c,D)),pe=i(TT(d,J)),Me=U>=0?U:U+360,ye=pe>=0?pe:pe+360,Fe=ET(Me-ye)>180?(Me+ye+360)/2:(Me+ye)/2,He=1-.17*L5(o(Fe-30))+.24*L5(o(2*Fe))+.32*L5(o(3*Fe+6))-.2*L5(o(4*Fe-63));let ht=ye-Me;ht=ET(ht)<=180?ht:ye<=Me?ht+360:ht-360,ht=2*oc(X*G)*LT(o(ht)/2);const dt=u-a,Ke=G-X,Zt=1+.015*yi(g-50,2)/oc(20+yi(g-50,2)),dn=1+.045*K,Is=1+.015*K*He,Ms=30*Qte(-yi((Fe-275)/25,2)),Vs=-2*oc(yi(K,7)/(yi(K,7)+yi(25,7)))*LT(2*o(Ms)),Ai=oc(yi(dt/(e*Zt),2)+yi(Ke/(r*dn),2)+yi(ht/(s*Is),2)+Vs*(Ke/(r*dn))*(ht/(s*Is)));return Jte(0,qte(100,Ai))},distance:function tne(n,t,e="lab"){n=new yt(n),t=new yt(t);const r=n.get(e),s=t.get(e);let i=0;for(let o in r){const a=(r[o]||0)-(s[o]||0);i+=a*a}return Math.sqrt(i)},input:Xn,interpolate:nh,limits:HT,mix:nh,random:()=>{let n="#";for(let t=0;t<6;t++)n+="0123456789abcdef".charAt(kte(16*Gte()));return new yt(n,"hex")},scale:T5,scales:rne,valid:(...n)=>{try{return new yt(...n),!0}catch{return!1}}});const oi=Ar;let wne=(()=>{class n{static getColor(e){return document.documentElement.style.getPropertyValue(`--color-${e}`)}static generateBgOpacityClasses(e,r,s=[0,10,25,50,75]){const i=oi(r),o=document.createElement("style");o.innerHTML=s.reduce((a,l)=>(a+=`.bg-${e}-opacity-${l}{background-color:${i.alpha(l/100).css()};}`)+`.hover-bg-${e}-opacity-${l}:hover {background-color:${i.alpha(l/100).css()};}`,""),document.getElementsByTagName("head")[0].appendChild(o)}static applyCssVariables(e,r,s,i,o,a,l){const c=(g,m)=>{document.documentElement.style.setProperty(`--color-${g}`,m.css())},u=oi("black"),h=oi("white");c("primary",oi(e)),c("primary-lighter",oi.scale([e,h]).mode("lab")(.3)),c("primary-lightest",oi.scale([e,h]).mode("lab")(.6)),c("primary-white",oi.scale([e,h]).mode("lab")(.85)),c("primary-darker",oi.scale([e,u]).mode("lab")(.3)),c("primary-darkest",oi.scale([e,u]).mode("lab")(.6)),c("primary-black",oi.scale([e,u]).mode("lab")(.85)),c("secondary",oi(r)),c("secondary-lighter",oi.scale([r,h]).mode("lab")(.3)),c("secondary-lightest",oi.scale([r,h]).mode("lab")(.6)),c("secondary-white",oi.scale([r,h]).mode("lab")(.85)),c("secondary-darker",oi.scale([r,u]).mode("lab")(.3)),c("secondary-darkest",oi.scale([r,u]).mode("lab")(.6)),c("secondary-black",oi.scale([r,u]).mode("lab")(.85)),c("main",oi(s)),c("background",oi(i));const d=oi.scale([i,s]).mode("lrgb");if(c("gray-50",d(.05)),c("gray-100",d(.1)),c("gray-200",d(.2)),c("gray-300",d(.3)),c("gray-400",d(.4)),c("gray-500",d(.5)),c("gray-600",d(.6)),c("gray-700",d(.7)),c("gray-800",d(.8)),c("gray-900",d(.9)),c("gray-950",d(.95)),o&&document.documentElement.style.setProperty("--font-family-main",o),a&&document.documentElement.style.setProperty("--font-family-title",a),l){const g=document.createElement("link");g.href=l,g.rel="stylesheet",g.type="text/css",document.head.append(g)}}static generateLabelColor(e,r,s){let i=0;for(let o=0;o<e.length;o++)i+=e.charCodeAt(o);return oi.hsl(i%360,r,s).css()}static setFavicon(e){const r=document.querySelector("link[rel*='icon']")||document.createElement("link");r.rel="icon",r.href=e,document.getElementsByTagName("head")[0].appendChild(r)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=zt({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();new At("proxyPath");let Ane=0;var _l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aC={},N5={},F5={};Object.defineProperty(F5,"__esModule",{value:!0}),F5.StringScanner=void 0;const xne=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;F5.StringScanner=class Sne{constructor(t){if(this.charCount=this.charLength(t,!0),this.charIndex=0,this.length=t.length,this.multiByteMode=this.charCount!==this.length,this.string=t,this.multiByteMode){let e=[];for(let r=0,s=0;s<this.charCount;++s)e[s]=r,r+=t.codePointAt(r)>65535?2:1;this.charsToBytes=e}}get isEnd(){return this.charIndex>=this.charCount}charLength(t,e=this.multiByteMode){return e?t.replace(xne,"_").length:t.length}advance(t=1){this.charIndex=Math.min(this.charCount,this.charIndex+t)}charIndexToByteIndex(t=this.charIndex){return this.multiByteMode?this.charsToBytes[t]??1/0:t}consume(t=1){let e=this.peek(t);return this.advance(t),e}consumeMatch(t){if(!t.sticky)throw new Error('`regex` must have a sticky flag ("y")');t.lastIndex=this.charIndexToByteIndex();let e=t.exec(this.string);if(null===e||0===e.length)return"";let r=e[0];return this.advance(this.charLength(r)),r}consumeMatchFn(t){let e,r="";for(;(e=this.peek())&&t(e);)r+=e,this.advance();return r}consumeString(t){if(this.consumeStringFast(t))return t;if(this.multiByteMode){let{length:e}=t,r=this.charLength(t);if(r!==e&&t===this.peek(r))return this.advance(r),t}return""}consumeStringFast(t){let{length:e}=t;return this.peek(e)===t?(this.advance(e),t):""}consumeUntilMatch(t){let e=this.string.slice(this.charIndexToByteIndex()),r=e.search(t);if(r<=0)return"";let s=e.slice(0,r);return this.advance(this.charLength(s)),s}consumeUntilString(t){let{string:e}=this,r=this.charIndexToByteIndex(),s=e.indexOf(t,r);if(s<=0)return"";let i=e.slice(r,s);return this.advance(this.charLength(i)),i}peek(t=1){let{charIndex:e,multiByteMode:r,string:s}=this;return r?e>=this.charCount?"":s.slice(this.charIndexToByteIndex(e),this.charIndexToByteIndex(e+t)):s.slice(e,e+t)}reset(t=0){this.charIndex=t>=0?Math.min(this.charCount,t):Math.max(0,this.charIndex+t)}};var qs={};function eE(n){let t=lC(n);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||45===t||46===t||183===t||t>=768&&t<=879||t>=8255&&t<=8256||tE(n,t)}function tE(n,t=lC(n)){return t>=97&&t<=122||t>=65&&t<=90||58===t||95===t||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=767||t>=880&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function lC(n){return n.codePointAt(0)||-1}Object.defineProperty(qs,"__esModule",{value:!0}),qs.isXmlCodePoint=qs.isWhitespace=qs.isReferenceChar=qs.isNameStartChar=qs.isNameChar=qs.predefinedEntities=qs.endCharData=qs.attValueNormalizedWhitespace=qs.attValueCharSingleQuote=qs.attValueCharDoubleQuote=void 0,qs.attValueCharDoubleQuote=/[^"&<]+/y,qs.attValueCharSingleQuote=/[^'&<]+/y,qs.attValueNormalizedWhitespace=/\r\n|[\n\r\t]/g,qs.endCharData=/<|&|]]>/,qs.predefinedEntities=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'})),qs.isNameChar=eE,qs.isNameStartChar=tE,qs.isReferenceChar=function Hne(n){return"#"===n||eE(n)},qs.isWhitespace=function _ne(n){let t=lC(n);return 32===t||9===t||10===t||13===t},qs.isXmlCodePoint=function Mne(n){return 9===n||10===n||13===n||n>=32&&n<=55295||n>=57344&&n<=65533||n>=65536&&n<=1114111};var K0={},aa={};Object.defineProperty(aa,"__esModule",{value:!0}),aa.XmlNode=void 0;class Ja{constructor(){this.parent=null,this.start=-1,this.end=-1}get document(){var t;return(null==(t=this.parent)?void 0:t.document)??null}get isRootNode(){return null!==this.parent&&this.parent===this.document&&this.type===Ja.TYPE_ELEMENT}get preserveWhitespace(){var t;return!(null==(t=this.parent)||!t.preserveWhitespace)}get type(){return""}toJSON(){let t={type:this.type};return this.isRootNode&&(t.isRootNode=!0),this.preserveWhitespace&&(t.preserveWhitespace=!0),-1!==this.start&&(t.start=this.start,t.end=this.end),t}}aa.XmlNode=Ja,Ja.TYPE_CDATA="cdata",Ja.TYPE_COMMENT="comment",Ja.TYPE_DOCUMENT="document",Ja.TYPE_DOCUMENT_TYPE="doctype",Ja.TYPE_ELEMENT="element",Ja.TYPE_PROCESSING_INSTRUCTION="pi",Ja.TYPE_TEXT="text",Ja.TYPE_XML_DECLARATION="xmldecl";var ch={};Object.defineProperty(ch,"__esModule",{value:!0}),ch.XmlText=void 0;const cC=aa;ch.XmlText=class zne extends cC.XmlNode{constructor(t=""){super(),this.text=t}get type(){return cC.XmlNode.TYPE_TEXT}toJSON(){return Object.assign(cC.XmlNode.prototype.toJSON.call(this),{text:this.text})}},Object.defineProperty(K0,"__esModule",{value:!0}),K0.XmlCdata=void 0;const Vne=aa,Tne=ch;K0.XmlCdata=class Ene extends Tne.XmlText{get type(){return Vne.XmlNode.TYPE_CDATA}};var q0={};Object.defineProperty(q0,"__esModule",{value:!0}),q0.XmlComment=void 0;const uC=aa;q0.XmlComment=class Lne extends uC.XmlNode{constructor(t=""){super(),this.content=t}get type(){return uC.XmlNode.TYPE_COMMENT}toJSON(){return Object.assign(uC.XmlNode.prototype.toJSON.call(this),{content:this.content})}};var J0={};Object.defineProperty(J0,"__esModule",{value:!0}),J0.XmlDeclaration=void 0;const hC=aa;J0.XmlDeclaration=class Rne extends hC.XmlNode{constructor(t,e,r){super(),this.version=t,this.encoding=e??null,this.standalone=r??null}get type(){return hC.XmlNode.TYPE_XML_DECLARATION}toJSON(){let t=hC.XmlNode.prototype.toJSON.call(this);t.version=this.version;for(let e of["encoding","standalone"])null!==this[e]&&(t[e]=this[e]);return t}};var Q0={},uh={};Object.defineProperty(uh,"__esModule",{value:!0}),uh.XmlElement=void 0;const dC=aa;class pC extends dC.XmlNode{constructor(t,e=Object.create(null),r=[]){super(),this.name=t,this.attributes=e,this.children=r}get isEmpty(){return 0===this.children.length}get preserveWhitespace(){let t=this;for(;t instanceof pC;){if("xml:space"in t.attributes)return"preserve"===t.attributes["xml:space"];t=t.parent}return!1}get text(){return this.children.map(t=>"text"in t?t.text:"").join("")}get type(){return dC.XmlNode.TYPE_ELEMENT}toJSON(){return Object.assign(dC.XmlNode.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(t=>t.toJSON())})}}uh.XmlElement=pC,Object.defineProperty(Q0,"__esModule",{value:!0}),Q0.XmlDocument=void 0;const Dne=uh,gC=aa;Q0.XmlDocument=class Bne extends gC.XmlNode{constructor(t=[]){super(),this.children=t}get document(){return this}get root(){for(let t of this.children)if(t instanceof Dne.XmlElement)return t;return null}get text(){return this.children.map(t=>"text"in t?t.text:"").join("")}get type(){return gC.XmlNode.TYPE_DOCUMENT}toJSON(){return Object.assign(gC.XmlNode.prototype.toJSON.call(this),{children:this.children.map(t=>t.toJSON())})}};var ep={};Object.defineProperty(ep,"__esModule",{value:!0}),ep.XmlDocumentType=void 0;const fC=aa;ep.XmlDocumentType=class Nne extends fC.XmlNode{constructor(t,e,r,s){super(),this.name=t,this.publicId=e??null,this.systemId=r??null,this.internalSubset=s??null}get type(){return fC.XmlNode.TYPE_DOCUMENT_TYPE}toJSON(){let t=fC.XmlNode.prototype.toJSON.call(this);t.name=this.name;for(let e of["publicId","systemId","internalSubset"])null!==this[e]&&(t[e]=this[e]);return t}};var tp={};Object.defineProperty(tp,"__esModule",{value:!0}),tp.XmlError=void 0;class Fne extends Error{constructor(t,e,r){let s=1,i="",o=1;for(let c=0;c<e;++c){let u=r[c];"\n"===u?(s=1,i="",o+=1):(s+=1,i+=u)}let a=r.indexOf("\n",e);i+=-1===a?r.slice(e):r.slice(e,a);let l=0;i.length>50&&(s<40?i=i.slice(0,50):(l=s-20,i=i.slice(l,s+30))),super(`${t} (line ${o}, column ${s})\n  ${i}\n`+" ".repeat(s-l+1)+"^\n"),this.column=s,this.excerpt=i,this.line=o,this.name="XmlError",this.pos=e}}tp.XmlError=Fne;var np={};Object.defineProperty(np,"__esModule",{value:!0}),np.XmlProcessingInstruction=void 0;const mC=aa;np.XmlProcessingInstruction=class Pne extends mC.XmlNode{constructor(t,e=""){super(),this.name=t,this.content=e}get type(){return mC.XmlNode.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(mC.XmlNode.prototype.toJSON.call(this),{name:this.name,content:this.content})}};var One=_l&&_l.__createBinding||(Object.create?function(n,t,e,r){void 0===r&&(r=e);var s=Object.getOwnPropertyDescriptor(t,e);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,r,s)}:function(n,t,e,r){void 0===r&&(r=e),n[r]=t[e]}),kne=_l&&_l.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Gne=_l&&_l.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var e in n)"default"!==e&&Object.prototype.hasOwnProperty.call(n,e)&&One(t,n,e);return kne(t,n),t};Object.defineProperty(N5,"__esModule",{value:!0}),N5.Parser=void 0;const Wne=F5,Qa=Gne(qs),Zne=K0,jne=q0,Une=J0,$ne=Q0,Xne=ep,Yne=uh,Kne=tp,qne=aa,nE=np,Jne=ch;function P5(n){let t=0;for(;-1!==(t=n.indexOf("\r",t));)n="\n"===n[t+1]?n.slice(0,t)+n.slice(t+1):n.slice(0,t)+"\n"+n.slice(t+1);return n}N5.Parser=class Qne{constructor(t,e={}){let r=this.document=new $ne.XmlDocument,s=this.scanner=new Wne.StringScanner(t);if(this.currentNode=r,this.options=e,this.options.includeOffsets&&(r.start=0,r.end=t.length),s.consumeStringFast("\ufeff"),this.consumeProlog(),!this.consumeElement())throw this.error("Root element is missing or invalid");for(;this.consumeMisc(););if(!s.isEnd)throw this.error("Extra content at the end of the document")}addNode(t,e){return t.parent=this.currentNode,this.options.includeOffsets&&(t.start=this.scanner.charIndexToByteIndex(e),t.end=this.scanner.charIndexToByteIndex()),this.currentNode.children.push(t),!0}addText(t,e){let{children:r}=this.currentNode,{length:s}=r;if(t=P5(t),s>0){let i=r[s-1];if(i?.type===qne.XmlNode.TYPE_TEXT){let o=i;return o.text+=t,this.options.includeOffsets&&(o.end=this.scanner.charIndexToByteIndex()),!0}}return this.addNode(new Jne.XmlText(t),e)}consumeAttributes(){let t=Object.create(null);for(;this.consumeWhitespace();){let e=this.consumeName();if(!e)break;let r=this.consumeEqual()&&this.consumeAttributeValue();if(!1===r)throw this.error("Attribute value expected");if(e in t)throw this.error(`Duplicate attribute: ${e}`);if("xml:space"===e&&"default"!==r&&"preserve"!==r)throw this.error('Value of the `xml:space` attribute must be "default" or "preserve"');t[e]=r}if(this.options.sortAttributes){let e=Object.keys(t).sort(),r=Object.create(null);for(let s=0;s<e.length;++s){let i=e[s];r[i]=t[i]}t=r}return t}consumeAttributeValue(){let{scanner:t}=this,e=t.peek();if('"'!==e&&"'"!==e)return!1;t.advance();let r,s=!1,i="",o='"'===e?Qa.attValueCharDoubleQuote:Qa.attValueCharSingleQuote;e:for(;!t.isEnd;)switch(r=t.consumeMatch(o),r&&(this.validateChars(r),i+=r.replace(Qa.attValueNormalizedWhitespace," ")),t.peek()){case e:s=!0;break e;case"&":i+=this.consumeReference();continue;case"<":throw this.error("Unescaped `<` is not allowed in an attribute value");case"":break e}if(!s)throw this.error("Unclosed attribute");return t.advance(),i}consumeCdataSection(){let{scanner:t}=this,e=t.charIndex;if(!t.consumeStringFast("<![CDATA["))return!1;let r=t.consumeUntilString("]]>");if(this.validateChars(r),!t.consumeStringFast("]]>"))throw this.error("Unclosed CDATA section");return this.options.preserveCdata?this.addNode(new Zne.XmlCdata(P5(r)),e):this.addText(r,e)}consumeCharData(){let{scanner:t}=this,e=t.charIndex,r=t.consumeUntilMatch(Qa.endCharData);if(!r)return!1;if(this.validateChars(r),"]]>"===t.peek(3))throw this.error("Element content may not contain the CDATA section close delimiter `]]>`");return this.addText(r,e)}consumeComment(){let{scanner:t}=this,e=t.charIndex;if(!t.consumeStringFast("\x3c!--"))return!1;let r=t.consumeUntilString("--");if(this.validateChars(r),!t.consumeStringFast("--\x3e"))throw"--"===t.peek(2)?this.error("The string `--` isn't allowed inside a comment"):this.error("Unclosed comment");return!this.options.preserveComments||this.addNode(new jne.XmlComment(P5(r)),e)}consumeContentReference(){let t=this.scanner.charIndex,e=this.consumeReference();return!!e&&this.addText(e,t)}consumeDoctypeDeclaration(){let{scanner:t}=this,e=t.charIndex;if(!t.consumeStringFast("<!DOCTYPE"))return!1;let s,i,o,r=this.consumeWhitespace()&&this.consumeName();if(!r)throw this.error("Expected a name");if(this.consumeWhitespace()){if(t.consumeStringFast("PUBLIC")){if(s=this.consumeWhitespace()&&this.consumePubidLiteral(),!1===s)throw this.error("Expected a public identifier");this.consumeWhitespace()}if(void 0!==s||t.consumeStringFast("SYSTEM")){if(this.consumeWhitespace(),i=this.consumeSystemLiteral(),!1===i)throw this.error("Expected a system identifier");this.consumeWhitespace()}}if(t.consumeStringFast("[")){if(o=t.consumeUntilMatch(/\][\x20\t\r\n]*>/),!t.consumeStringFast("]"))throw this.error("Unclosed internal subset");this.consumeWhitespace()}if(!t.consumeStringFast(">"))throw this.error("Unclosed doctype declaration");return!this.options.preserveDocumentType||this.addNode(new Xne.XmlDocumentType(r,s,i,o),e)}consumeElement(){let{scanner:t}=this,e=t.charIndex;if(!t.consumeStringFast("<"))return!1;let r=this.consumeName();if(!r)return t.reset(e),!1;let s=this.consumeAttributes(),i=!!t.consumeStringFast("/>"),o=new Yne.XmlElement(r,s);if(o.parent=this.currentNode,!i){if(!t.consumeStringFast(">"))throw this.error(`Unclosed start tag for element \`${r}\``);this.currentNode=o;do{this.consumeCharData()}while(this.consumeElement()||this.consumeContentReference()||this.consumeCdataSection()||this.consumeProcessingInstruction()||this.consumeComment());let l,a=t.charIndex;if(!t.consumeStringFast("</")||!(l=this.consumeName())||l!==r)throw t.reset(a),this.error(`Missing end tag for element ${r}`);if(this.consumeWhitespace(),!t.consumeStringFast(">"))throw this.error(`Unclosed end tag for element ${r}`);this.currentNode=o.parent}return this.addNode(o,e)}consumeEqual(){return this.consumeWhitespace(),!!this.scanner.consumeStringFast("=")&&(this.consumeWhitespace(),!0)}consumeMisc(){return this.consumeComment()||this.consumeProcessingInstruction()||this.consumeWhitespace()}consumeName(){return Qa.isNameStartChar(this.scanner.peek())?this.scanner.consumeMatchFn(Qa.isNameChar):""}consumeProcessingInstruction(){let{scanner:t}=this,e=t.charIndex;if(!t.consumeStringFast("<?"))return!1;let r=this.consumeName();if(!r)throw this.error("Invalid processing instruction");if("xml"===r.toLowerCase())throw t.reset(e),this.error("XML declaration isn't allowed here");if(!this.consumeWhitespace()){if(t.consumeStringFast("?>"))return this.addNode(new nE.XmlProcessingInstruction(r),e);throw this.error("Whitespace is required after a processing instruction name")}let s=t.consumeUntilString("?>");if(this.validateChars(s),!t.consumeStringFast("?>"))throw this.error("Unterminated processing instruction");return this.addNode(new nE.XmlProcessingInstruction(r,P5(s)),e)}consumeProlog(){let{scanner:t}=this,e=t.charIndex;for(this.consumeXmlDeclaration();this.consumeMisc(););if(this.consumeDoctypeDeclaration())for(;this.consumeMisc(););return e<t.charIndex}consumePubidLiteral(){let t=this.scanner.charIndex,e=this.consumeSystemLiteral();if(!1!==e&&!/^[-\x20\r\na-zA-Z0-9'()+,./:=?;!*#@$_%]*$/.test(e))throw this.scanner.reset(t),this.error("Invalid character in public identifier");return e}consumeReference(){let{scanner:t}=this;if(!t.consumeStringFast("&"))return!1;let r,e=t.consumeMatchFn(Qa.isReferenceChar);if(";"!==t.consume())throw this.error("Unterminated reference (a reference must end with `;`)");if("#"===e[0]){let s="x"===e[1]?parseInt(e.slice(2),16):parseInt(e.slice(1),10);if(isNaN(s))throw this.error("Invalid character reference");if(!Qa.isXmlCodePoint(s))throw this.error("Character reference resolves to an invalid character");r=String.fromCodePoint(s)}else if(r=Qa.predefinedEntities[e],void 0===r){let{ignoreUndefinedEntities:s,resolveUndefinedEntity:i}=this.options,o=`&${e};`;if(i){let a=i(o);if(null!=a){let l=typeof a;if("string"!==l)throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${l}`);return a}}if(s)return o;throw t.reset(-o.length),this.error(`Named entity isn't defined: ${o}`)}return r}consumeSystemLiteral(){let{scanner:t}=this,e=t.consumeStringFast('"')||t.consumeStringFast("'");if(!e)return!1;let r=t.consumeUntilString(e);if(this.validateChars(r),!t.consumeStringFast(e))throw this.error("Missing end quote");return r}consumeWhitespace(){return!!this.scanner.consumeMatchFn(Qa.isWhitespace)}consumeXmlDeclaration(){let{scanner:t}=this,e=t.charIndex;if(!t.consumeStringFast("<?xml"))return!1;if(!this.consumeWhitespace())throw this.error("Invalid XML declaration");let s,i,r=!!t.consumeStringFast("version")&&this.consumeEqual()&&this.consumeSystemLiteral();if(!1===r)throw this.error("XML version is missing or invalid");if(!/^1\.[0-9]+$/.test(r))throw this.error("Invalid character in version number");if(this.consumeWhitespace()&&(s=!!t.consumeStringFast("encoding")&&this.consumeEqual()&&this.consumeSystemLiteral(),s&&this.consumeWhitespace(),i=!!t.consumeStringFast("standalone")&&this.consumeEqual()&&this.consumeSystemLiteral(),i)){if("yes"!==i&&"no"!==i)throw this.error('Only "yes" and "no" are permitted as values of `standalone`');this.consumeWhitespace()}if(!t.consumeStringFast("?>"))throw this.error("Invalid or unclosed XML declaration");return!this.options.preserveXmlDeclaration||this.addNode(new Une.XmlDeclaration(r,s||void 0,i||void 0),e)}error(t){let{scanner:e}=this;return new Kne.XmlError(t,e.charIndex,e.string)}validateChars(t){let{length:e}=t;for(let r=0;r<e;++r){let s=t.codePointAt(r);if(!Qa.isXmlCodePoint(s))throw this.scanner.reset(-([...t].length-r)),this.error("Invalid character");s>65535&&(r+=1)}}};var rE={};Object.defineProperty(rE,"__esModule",{value:!0}),function(n){var t=_l&&_l.__createBinding||(Object.create?function(b,V,M,D){void 0===D&&(D=M);var J=Object.getOwnPropertyDescriptor(V,M);(!J||("get"in J?!V.__esModule:J.writable||J.configurable))&&(J={enumerable:!0,get:function(){return V[M]}}),Object.defineProperty(b,D,J)}:function(b,V,M,D){void 0===D&&(D=M),b[D]=V[M]}),e=_l&&_l.__exportStar||function(b,V){for(var M in b)"default"!==M&&!Object.prototype.hasOwnProperty.call(V,M)&&t(V,b,M)};Object.defineProperty(n,"__esModule",{value:!0}),n.parseXml=n.XmlText=n.XmlProcessingInstruction=n.XmlNode=n.XmlError=n.XmlElement=n.XmlDocumentType=n.XmlDocument=n.XmlDeclaration=n.XmlComment=n.XmlCdata=void 0;const r=N5;e(rE,n);var s=K0;Object.defineProperty(n,"XmlCdata",{enumerable:!0,get:function(){return s.XmlCdata}});var i=q0;Object.defineProperty(n,"XmlComment",{enumerable:!0,get:function(){return i.XmlComment}});var o=J0;Object.defineProperty(n,"XmlDeclaration",{enumerable:!0,get:function(){return o.XmlDeclaration}});var a=Q0;Object.defineProperty(n,"XmlDocument",{enumerable:!0,get:function(){return a.XmlDocument}});var l=ep;Object.defineProperty(n,"XmlDocumentType",{enumerable:!0,get:function(){return l.XmlDocumentType}});var c=uh;Object.defineProperty(n,"XmlElement",{enumerable:!0,get:function(){return c.XmlElement}});var u=tp;Object.defineProperty(n,"XmlError",{enumerable:!0,get:function(){return u.XmlError}});var h=aa;Object.defineProperty(n,"XmlNode",{enumerable:!0,get:function(){return h.XmlNode}});var d=np;Object.defineProperty(n,"XmlProcessingInstruction",{enumerable:!0,get:function(){return d.XmlProcessingInstruction}});var g=ch;Object.defineProperty(n,"XmlText",{enumerable:!0,get:function(){return g.XmlText}}),n.parseXml=function m(b,V){return new r.Parser(b,V).document}}(aC);class ere extends Error{constructor(t){super(t)}}function Va(n){const t=n.indexOf(":");return t>-1?n.substr(t+1):n}function ys(n){return n.children[0]}function Ml(n){return n.name||""}function xn(n,t,e=!1){const r=Va(t);return n&&Array.isArray(n.children)?n.children.reduce(function s(i,o){return Va(Ml(o))===r&&i.push(o),e&&Array.isArray(o.children)?[...i,...o.children.reduce(s,[])]:i},[]):[]}function me(n,t,e=!1){return xn(n,t,e)[0]||null}function zl(n){return n&&Array.isArray(n.children)?[...n.children.filter(t=>t instanceof aC.XmlElement)]:[]}function rt(n){const t=n&&Array.isArray(n.children)?n.children.find(e=>"text"===e.type):null;return t?t.text:""}function Lt(n,t){return n&&n.attributes[t]||""}class Un extends Error{constructor(t,e,r){super(t),this.httpStatus=e,this.isCrossOriginRelated=r,this.name="EndpointError"}}class wC extends Error{constructor(t,e,r,s,i){super(t),this.requestUrl=e,this.code=r,this.locator=s,this.response=i,this.name="ServiceExceptionError"}}function iE(n,t){const e=Lt(n,"code")||Lt(n,"exceptionCode"),r=Lt(n,"locator"),i=rt(me(n,"ExceptionText")||n).trim();return new wC(i,t,e,r,n.document)}function CC(n,t){const e=ys(n),r=Va(Ml(e));if("ServiceExceptionReport"===r){const s=me(e,"ServiceException");if(s)throw iE(s,t)}if("ExceptionReport"===r){const s=me(e,"Exception");if(s)throw iE(s,t)}return n}const rp=new EventTarget;function ip(n,t,e){const r=typeof WorkerGlobalScope<"u",s=function(){var i=(0,lo.A)(function*(o){if(o.taskName===n){let a,l;try{a=yield e(o.params)}catch(u){l=function tre(n){const t={message:n.message,stack:n.stack,name:n.name};return n instanceof wC?{...t,code:n.code,locator:n.locator,response:n.response,requestUrl:n.requestUrl}:n instanceof Un?{...t,httpStatus:n.httpStatus,isCrossOriginRelated:n.isCrossOriginRelated}:t}(u)}const c={taskName:n,requestId:o.requestId,...a&&{response:a},...l&&{error:l}};r?t.postMessage(c):rp.dispatchEvent(new CustomEvent("ogc-client.response",{detail:c}))}});return function(a){return i.apply(this,arguments)}}();r?t.addEventListener("message",i=>s(i.data)):rp.addEventListener("ogc-client.request",i=>s(i.detail))}const oE=["utf-8","utf-16","iso-8859-1"],O5=new Map;let yC={},op=null;function lE(){return yC}function hh(n){return function k5(n,t="GET",e,r){let s=`${t}#${n}`;if((e||r)&&(s=`${t}#asJson#${n}`),O5.has(s))return O5.get(s);const i={...lE()};i.method=t,r?(i.headers="headers"in i?i.headers:{},i.headers.Accept=r):e&&(i.headers="headers"in i?i.headers:{},i.headers.Accept="application/json,application/schema+json");const o=fetch(n,i).catch(a=>a).then(a=>(O5.delete(s),a));return O5.set(s,o),o.then(a=>{if(a instanceof Error)throw a;return a.clone()})}(n).catch(()=>fetch(n,{...lE(),method:"HEAD",mode:"no-cors"}).catch(t=>{throw new Un(`Fetching the document failed either due to network errors or unreachable host, error is: ${t.message}`,0,!1)}).then(()=>{throw new Un("The document could not be fetched due to CORS limitations",0,!0)})).then(function(){var t=(0,lo.A)(function*(e){if(!e.ok){const i=yield e.text();throw new Un(`Received an error with code ${e.status}: ${i}`,e.status,!1)}return function sre(n,t){const e=t?function rre(n){const t=/charset=([^;]+)/.exec(n);return t?t[1]:null}(t):null,r=e?[e,...oE]:oE;for(const s of r)try{return new TextDecoder(s,{fatal:!0}).decode(n)}catch{}return console.warn("[ogc-client] XML document encoding could not be determined, falling back to utf-8."),new TextDecoder("utf-8").decode(n)}(yield e.arrayBuffer(),e.headers.get("Content-Type"))});return function(e){return t.apply(this,arguments)}}()).then(t=>function sE(n){let t=null;try{t=aC.parseXml(n)}catch(e){throw new ere(e.message)}return t}(t))}function Vl(n,t){const e=n.match(/(https?%3A%2F%2F[^/]+)$/);if(e){const a=e[1],l=Vl(decodeURIComponent(a),t);return n.replace(a,encodeURIComponent(l))}const r=new URL(n),s=Object.keys(t),i=s.map(a=>a.toLowerCase()),o=[];for(const a of r.searchParams.keys())i.indexOf(a.toLowerCase())>-1&&o.push(a);return o.map(a=>r.searchParams.delete(a)),s.forEach(a=>r.searchParams.set(a,!0===t[a]?"":t[a])),r.search=r.search.replace(/\+/g,"%20"),r.toString()}const cE="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICAvKiEgQHJncm92ZS9wYXJzZS14bWwgdjQuMS4wIHwgSVNDIExpY2Vuc2UgfCBDb3B5cmlnaHQgUnlhbiBHcm92ZSAqLwogIHZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7CiAgdmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwogIHZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzOwogIHZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwogIHZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4gewogICAgZm9yICh2YXIgbmFtZSBpbiBhbGwpCiAgICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7CiAgfTsKICB2YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4gewogICAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09ICJvYmplY3QiIHx8IHR5cGVvZiBmcm9tID09PSAiZnVuY3Rpb24iKSB7CiAgICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSkKICAgICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KQogICAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pOwogICAgfQogICAgcmV0dXJuIHRvOwogIH07CiAgdmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpOwogIHZhciBzcmNfZXhwb3J0cyA9IHt9OwogIF9fZXhwb3J0KHNyY19leHBvcnRzLCB7CiAgICBYbWxDZGF0YTogKCkgPT4gWG1sQ2RhdGEsCiAgICBYbWxDb21tZW50OiAoKSA9PiBYbWxDb21tZW50LAogICAgWG1sRGVjbGFyYXRpb246ICgpID0+IFhtbERlY2xhcmF0aW9uLAogICAgWG1sRG9jdW1lbnQ6ICgpID0+IFhtbERvY3VtZW50LAogICAgWG1sRG9jdW1lbnRUeXBlOiAoKSA9PiBYbWxEb2N1bWVudFR5cGUsCiAgICBYbWxFbGVtZW50OiAoKSA9PiBYbWxFbGVtZW50LAogICAgWG1sRXJyb3I6ICgpID0+IFhtbEVycm9yLAogICAgWG1sTm9kZTogKCkgPT4gWG1sTm9kZSwKICAgIFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbjogKCkgPT4gWG1sUHJvY2Vzc2luZ0luc3RydWN0aW9uLAogICAgWG1sVGV4dDogKCkgPT4gWG1sVGV4dCwKICAgIHBhcnNlWG1sOiAoKSA9PiBwYXJzZVhtbAogIH0pOwogIHZhciBicm93c2VyID0gX190b0NvbW1vbkpTKHNyY19leHBvcnRzKTsKICB2YXIgZW1wdHlTdHJpbmcgPSAiIjsKICB2YXIgc3Vycm9nYXRlUGFpciA9IC9bXHVEODAwLVx1REJGRl1bXHVEQzAwLVx1REZGRl0vZzsKICB2YXIgU3RyaW5nU2Nhbm5lciA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKHN0cmluZykgewogICAgICB0aGlzLmsgPSB0aGlzLnEoc3RyaW5nLCB0cnVlKTsKICAgICAgdGhpcy5kID0gMDsKICAgICAgdGhpcy5sZW5ndGggPSBzdHJpbmcubGVuZ3RoOwogICAgICB0aGlzLm4gPSB0aGlzLmsgIT09IHRoaXMubGVuZ3RoOwogICAgICB0aGlzLm0gPSBzdHJpbmc7CiAgICAgIGlmICh0aGlzLm4pIHsKICAgICAgICBsZXQgY2hhcnNUb0J5dGVzID0gW107CiAgICAgICAgZm9yIChsZXQgYnl0ZUluZGV4ID0gMCwgY2hhckluZGV4ID0gMDsgY2hhckluZGV4IDwgdGhpcy5rOyArK2NoYXJJbmRleCkgewogICAgICAgICAgY2hhcnNUb0J5dGVzW2NoYXJJbmRleF0gPSBieXRlSW5kZXg7CiAgICAgICAgICBieXRlSW5kZXggKz0gc3RyaW5nLmNvZGVQb2ludEF0KGJ5dGVJbmRleCkgPiA2NTUzNSA/IDIgOiAxOwogICAgICAgIH0KICAgICAgICB0aGlzLnkgPSBjaGFyc1RvQnl0ZXM7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogV2hldGhlciB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaW5kZXggaXMgYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQgc3RyaW5nLgogICAgICovCiAgICBnZXQgeigpIHsKICAgICAgcmV0dXJuIHRoaXMuZCA+PSB0aGlzLms7CiAgICB9CiAgICAvLyAtLSBQcm90ZWN0ZWQgTWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgaW4gdGhlIGdpdmVuIHN0cmluZywgd2hpY2ggbWF5IGRpZmZlciBmcm9tCiAgICAgKiB0aGUgYnl0ZSBsZW5ndGggaWYgdGhlIHN0cmluZyBjb250YWlucyBtdWx0aWJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgcShzdHJpbmcsIG11bHRpQnl0ZVNhZmUgPSB0aGlzLm4pIHsKICAgICAgcmV0dXJuIG11bHRpQnl0ZVNhZmUgPyBzdHJpbmcucmVwbGFjZShzdXJyb2dhdGVQYWlyLCAiXyIpLmxlbmd0aCA6IHN0cmluZy5sZW5ndGg7CiAgICB9CiAgICAvLyAtLSBQdWJsaWMgTWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogQWR2YW5jZXMgdGhlIHNjYW5uZXIgYnkgdGhlIGdpdmVuIG51bWJlciBvZiBjaGFyYWN0ZXJzLCBzdG9wcGluZyBpZiB0aGUgZW5kCiAgICAgKiBvZiB0aGUgc3RyaW5nIGlzIHJlYWNoZWQuCiAgICAgKi8KICAgIGcoY291bnQgPSAxKSB7CiAgICAgIHRoaXMuZCA9IE1hdGgubWluKHRoaXMuaywgdGhpcy5kICsgY291bnQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBieXRlIGluZGV4IG9mIHRoZSBnaXZlbiBjaGFyYWN0ZXIgaW5kZXggaW4gdGhlIHN0cmluZy4gVGhlIHR3bwogICAgICogbWF5IGRpZmZlciBpbiBzdHJpbmdzIHRoYXQgY29udGFpbiBtdWx0aWJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgaShjaGFySW5kZXggPSB0aGlzLmQpIHsKICAgICAgdmFyIF9hOwogICAgICByZXR1cm4gdGhpcy5uID8gKF9hID0gdGhpcy55W2NoYXJJbmRleF0pICE9IG51bGwgPyBfYSA6IEluZmluaXR5IDogY2hhckluZGV4OwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbmQgcmV0dXJucyB0aGUgZ2l2ZW4gbnVtYmVyIG9mIGNoYXJhY3RlcnMgaWYgcG9zc2libGUsIGFkdmFuY2luZwogICAgICogdGhlIHNjYW5uZXIgYW5kIHN0b3BwaW5nIGlmIHRoZSBlbmQgb2YgdGhlIHN0cmluZyBpcyByZWFjaGVkLgogICAgICoKICAgICAqIElmIG5vIGNoYXJhY3RlcnMgY291bGQgYmUgY29uc3VtZWQsIGFuIGVtcHR5IHN0cmluZyB3aWxsIGJlIHJldHVybmVkLgogICAgICovCiAgICBGKGNvdW50ID0gMSkgewogICAgICBsZXQgY2hhcnMgPSB0aGlzLmgoY291bnQpOwogICAgICB0aGlzLmcoY291bnQpOwogICAgICByZXR1cm4gY2hhcnM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgbWF0Y2ggZm9yIHRoZSBnaXZlbiBzdGlja3kgcmVnZXgsIGFkdmFuY2VzIHRoZSBzY2FubmVyLCB1cGRhdGVzCiAgICAgKiB0aGUgYGxhc3RJbmRleGAgcHJvcGVydHkgb2YgdGhlIHJlZ2V4LCBhbmQgcmV0dXJucyB0aGUgbWF0Y2hpbmcgc3RyaW5nLgogICAgICoKICAgICAqIFRoZSByZWdleCBtdXN0IGhhdmUgYSBzdGlja3kgZmxhZyAoInkiKSBzbyB0aGF0IGl0cyBgbGFzdEluZGV4YCBwcm9wIGNhbiBiZQogICAgICogdXNlZCB0byBhbmNob3IgdGhlIG1hdGNoIGF0IHRoZSBjdXJyZW50IHNjYW5uZXIgcG9zaXRpb24uCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgY29uc3VtZWQgc3RyaW5nLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKi8KICAgIEcocmVnZXgpIHsKICAgICAgaWYgKCFyZWdleC5zdGlja3kpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ByZWdleGAgbXVzdCBoYXZlIGEgc3RpY2t5IGZsYWcgKCJ5IiknKTsKICAgICAgfQogICAgICByZWdleC5sYXN0SW5kZXggPSB0aGlzLmkoKTsKICAgICAgbGV0IHJlc3VsdCA9IHJlZ2V4LmV4ZWModGhpcy5tKTsKICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICB9CiAgICAgIGxldCBtYXRjaCA9IHJlc3VsdFswXTsKICAgICAgdGhpcy5nKHRoaXMucShtYXRjaCkpOwogICAgICByZXR1cm4gbWF0Y2g7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGFuZCByZXR1cm5zIGFsbCBjaGFyYWN0ZXJzIGZvciB3aGljaCB0aGUgZ2l2ZW4gZnVuY3Rpb24gcmV0dXJucyBhCiAgICAgKiB0cnV0aHkgdmFsdWUsIHN0b3BwaW5nIG9uIHRoZSBmaXJzdCBmYWxzeSByZXR1cm4gdmFsdWUgb3IgaWYgdGhlIGVuZCBvZiB0aGUKICAgICAqIGlucHV0IGlzIHJlYWNoZWQuCiAgICAgKi8KICAgIHYoZm4pIHsKICAgICAgbGV0IGNoYXI7CiAgICAgIGxldCBtYXRjaCA9IGVtcHR5U3RyaW5nOwogICAgICB3aGlsZSAoKGNoYXIgPSB0aGlzLmgoKSkgJiYgZm4oY2hhcikpIHsKICAgICAgICBtYXRjaCArPSBjaGFyOwogICAgICAgIHRoaXMuZygpOwogICAgICB9CiAgICAgIHJldHVybiBtYXRjaDsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgdGhlIGdpdmVuIHN0cmluZyBpZiBpdCBleGlzdHMgYXQgdGhlIGN1cnJlbnQgY2hhcmFjdGVyIGluZGV4LCBhbmQKICAgICAqIGFkdmFuY2VzIHRoZSBzY2FubmVyLgogICAgICoKICAgICAqIElmIHRoZSBnaXZlbiBzdHJpbmcgZG9lc24ndCBleGlzdCBhdCB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaW5kZXgsIGFuIGVtcHR5CiAgICAgKiBzdHJpbmcgd2lsbCBiZSByZXR1cm5lZCBhbmQgdGhlIHNjYW5uZXIgd2lsbCBub3QgYmUgYWR2YW5jZWQuCiAgICAgKi8KICAgIFEoc3RyaW5nVG9Db25zdW1lKSB7CiAgICAgIGlmICh0aGlzLmIoc3RyaW5nVG9Db25zdW1lKSkgewogICAgICAgIHJldHVybiBzdHJpbmdUb0NvbnN1bWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubikgewogICAgICAgIGxldCB7IGxlbmd0aCB9ID0gc3RyaW5nVG9Db25zdW1lOwogICAgICAgIGxldCBjaGFyTGVuZ3RoVG9NYXRjaCA9IHRoaXMucShzdHJpbmdUb0NvbnN1bWUpOwogICAgICAgIGlmIChjaGFyTGVuZ3RoVG9NYXRjaCAhPT0gbGVuZ3RoICYmIHN0cmluZ1RvQ29uc3VtZSA9PT0gdGhpcy5oKGNoYXJMZW5ndGhUb01hdGNoKSkgewogICAgICAgICAgdGhpcy5nKGNoYXJMZW5ndGhUb01hdGNoKTsKICAgICAgICAgIHJldHVybiBzdHJpbmdUb0NvbnN1bWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBlbXB0eVN0cmluZzsKICAgIH0KICAgIC8qKgogICAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBgY29uc3VtZVN0cmluZygpYCwgYnV0IGRvZXNuJ3Qgc3VwcG9ydCBjb25zdW1pbmcKICAgICAqIG11bHRpYnl0ZSBjaGFyYWN0ZXJzLiBUaGlzIGNhbiBiZSBmYXN0ZXIgaWYgeW91IG9ubHkgbmVlZCB0byBtYXRjaCBzaW5nbGUKICAgICAqIGJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgYihzdHJpbmdUb0NvbnN1bWUpIHsKICAgICAgbGV0IHsgbGVuZ3RoIH0gPSBzdHJpbmdUb0NvbnN1bWU7CiAgICAgIGlmICh0aGlzLmgobGVuZ3RoKSA9PT0gc3RyaW5nVG9Db25zdW1lKSB7CiAgICAgICAgdGhpcy5nKGxlbmd0aCk7CiAgICAgICAgcmV0dXJuIHN0cmluZ1RvQ29uc3VtZTsKICAgICAgfQogICAgICByZXR1cm4gZW1wdHlTdHJpbmc7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGNoYXJhY3RlcnMgdW50aWwgdGhlIGdpdmVuIGdsb2JhbCByZWdleCBpcyBtYXRjaGVkLCBhZHZhbmNpbmcgdGhlCiAgICAgKiBzY2FubmVyIHVwIHRvIChidXQgbm90IGJleW9uZCkgdGhlIGJlZ2lubmluZyBvZiB0aGUgbWF0Y2guIElmIHRoZSByZWdleAogICAgICogZG9lc24ndCBtYXRjaCwgbm90aGluZyB3aWxsIGJlIGNvbnN1bWVkLgogICAgICoKICAgICAqIFJldHVybnMgdGhlIGNvbnN1bWVkIHN0cmluZywgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIGNvbnN1bWVkLgogICAgICovCiAgICBBKHJlZ2V4KSB7CiAgICAgIGxldCByZXN0T2ZTdHJpbmcgPSB0aGlzLm0uc2xpY2UodGhpcy5pKCkpOwogICAgICBsZXQgbWF0Y2hCeXRlSW5kZXggPSByZXN0T2ZTdHJpbmcuc2VhcmNoKHJlZ2V4KTsKICAgICAgaWYgKG1hdGNoQnl0ZUluZGV4IDw9IDApIHsKICAgICAgICByZXR1cm4gZW1wdHlTdHJpbmc7CiAgICAgIH0KICAgICAgbGV0IHJlc3VsdCA9IHJlc3RPZlN0cmluZy5zbGljZSgwLCBtYXRjaEJ5dGVJbmRleCk7CiAgICAgIHRoaXMuZyh0aGlzLnEocmVzdWx0KSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGNoYXJhY3RlcnMgdW50aWwgdGhlIGdpdmVuIHN0cmluZyBpcyBmb3VuZCwgYWR2YW5jaW5nIHRoZSBzY2FubmVyCiAgICAgKiB1cCB0byAoYnV0IG5vdCBiZXlvbmQpIHRoYXQgcG9pbnQuIElmIHRoZSBzdHJpbmcgaXMgbmV2ZXIgZm91bmQsIG5vdGhpbmcKICAgICAqIHdpbGwgYmUgY29uc3VtZWQuCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgY29uc3VtZWQgc3RyaW5nLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKi8KICAgIHQoc2VhcmNoU3RyaW5nKSB7CiAgICAgIGxldCB7IG06IHN0cmluZyB9ID0gdGhpczsKICAgICAgbGV0IGJ5dGVJbmRleCA9IHRoaXMuaSgpOwogICAgICBsZXQgbWF0Y2hCeXRlSW5kZXggPSBzdHJpbmcuaW5kZXhPZihzZWFyY2hTdHJpbmcsIGJ5dGVJbmRleCk7CiAgICAgIGlmIChtYXRjaEJ5dGVJbmRleCA8PSAwKSB7CiAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICB9CiAgICAgIGxldCByZXN1bHQgPSBzdHJpbmcuc2xpY2UoYnl0ZUluZGV4LCBtYXRjaEJ5dGVJbmRleCk7CiAgICAgIHRoaXMuZyh0aGlzLnEocmVzdWx0KSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGdpdmVuIG51bWJlciBvZiBjaGFyYWN0ZXJzIHN0YXJ0aW5nIGF0IHRoZSBjdXJyZW50IGNoYXJhY3RlcgogICAgICogaW5kZXgsIHdpdGhvdXQgYWR2YW5jaW5nIHRoZSBzY2FubmVyIGFuZCB3aXRob3V0IGV4Y2VlZGluZyB0aGUgZW5kIG9mIHRoZQogICAgICogaW5wdXQgc3RyaW5nLgogICAgICovCiAgICBoKGNvdW50ID0gMSkgewogICAgICBsZXQgeyBkOiBjaGFySW5kZXgsIG46IG11bHRpQnl0ZU1vZGUsIG06IHN0cmluZyB9ID0gdGhpczsKICAgICAgaWYgKG11bHRpQnl0ZU1vZGUpIHsKICAgICAgICBpZiAoY2hhckluZGV4ID49IHRoaXMuaykgewogICAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKAogICAgICAgICAgdGhpcy5pKGNoYXJJbmRleCksCiAgICAgICAgICB0aGlzLmkoY2hhckluZGV4ICsgY291bnQpCiAgICAgICAgKTsKICAgICAgfQogICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKGNoYXJJbmRleCwgY2hhckluZGV4ICsgY291bnQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXNldHMgdGhlIHNjYW5uZXIgcG9zaXRpb24gdG8gdGhlIGdpdmVuIGNoYXJhY3RlciBfaW5kZXhfLCBvciB0byB0aGUgc3RhcnQKICAgICAqIG9mIHRoZSBpbnB1dCBzdHJpbmcgaWYgbm8gaW5kZXggaXMgZ2l2ZW4uCiAgICAgKgogICAgICogSWYgX2luZGV4XyBpcyBuZWdhdGl2ZSwgdGhlIHNjYW5uZXIgcG9zaXRpb24gd2lsbCBiZSBtb3ZlZCBiYWNrd2FyZCBieSB0aGF0CiAgICAgKiBtYW55IGNoYXJhY3RlcnMsIHN0b3BwaW5nIGlmIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZyBpcyByZWFjaGVkLgogICAgICovCiAgICBvKGluZGV4ID0gMCkgewogICAgICB0aGlzLmQgPSBpbmRleCA+PSAwID8gTWF0aC5taW4odGhpcy5rLCBpbmRleCkgOiBNYXRoLm1heCgwLCB0aGlzLmQgKyBpbmRleCk7CiAgICB9CiAgfTsKICB2YXIgYXR0VmFsdWVDaGFyRG91YmxlUXVvdGUgPSAvW14iJjxdKy95OwogIHZhciBhdHRWYWx1ZUNoYXJTaW5nbGVRdW90ZSA9IC9bXicmPF0rL3k7CiAgdmFyIGF0dFZhbHVlTm9ybWFsaXplZFdoaXRlc3BhY2UgPSAvXHJcbnxbXG5cclx0XS9nOwogIHZhciBlbmRDaGFyRGF0YSA9IC88fCZ8XV0+LzsKICB2YXIgcHJlZGVmaW5lZEVudGl0aWVzID0gT2JqZWN0LmZyZWV6ZShPYmplY3QuYXNzaWduKC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLCB7CiAgICBhbXA6ICImIiwKICAgIGFwb3M6ICInIiwKICAgIGd0OiAiPiIsCiAgICBsdDogIjwiLAogICAgcXVvdDogJyInCiAgfSkpOwogIGZ1bmN0aW9uIGlzTmFtZUNoYXIoY2hhcikgewogICAgbGV0IGNwID0gZ2V0Q29kZVBvaW50KGNoYXIpOwogICAgcmV0dXJuIGNwID49IDk3ICYmIGNwIDw9IDEyMiB8fCBjcCA+PSA2NSAmJiBjcCA8PSA5MCB8fCBjcCA+PSA0OCAmJiBjcCA8PSA1NyB8fCBjcCA9PT0gNDUgfHwgY3AgPT09IDQ2IHx8IGNwID09PSAxODMgfHwgY3AgPj0gNzY4ICYmIGNwIDw9IDg3OSB8fCBjcCA+PSA4MjU1ICYmIGNwIDw9IDgyNTYgfHwgaXNOYW1lU3RhcnRDaGFyKGNoYXIsIGNwKTsKICB9CiAgZnVuY3Rpb24gaXNOYW1lU3RhcnRDaGFyKGNoYXIsIGNwID0gZ2V0Q29kZVBvaW50KGNoYXIpKSB7CiAgICByZXR1cm4gY3AgPj0gOTcgJiYgY3AgPD0gMTIyIHx8IGNwID49IDY1ICYmIGNwIDw9IDkwIHx8IGNwID09PSA1OCB8fCBjcCA9PT0gOTUgfHwgY3AgPj0gMTkyICYmIGNwIDw9IDIxNCB8fCBjcCA+PSAyMTYgJiYgY3AgPD0gMjQ2IHx8IGNwID49IDI0OCAmJiBjcCA8PSA3NjcgfHwgY3AgPj0gODgwICYmIGNwIDw9IDg5MyB8fCBjcCA+PSA4OTUgJiYgY3AgPD0gODE5MSB8fCBjcCA+PSA4MjA0ICYmIGNwIDw9IDgyMDUgfHwgY3AgPj0gODMwNCAmJiBjcCA8PSA4NTkxIHx8IGNwID49IDExMjY0ICYmIGNwIDw9IDEyMjcxIHx8IGNwID49IDEyMjg5ICYmIGNwIDw9IDU1Mjk1IHx8IGNwID49IDYzNzQ0ICYmIGNwIDw9IDY0OTc1IHx8IGNwID49IDY1MDA4ICYmIGNwIDw9IDY1NTMzIHx8IGNwID49IDY1NTM2ICYmIGNwIDw9IDk4MzAzOTsKICB9CiAgZnVuY3Rpb24gaXNSZWZlcmVuY2VDaGFyKGNoYXIpIHsKICAgIHJldHVybiBjaGFyID09PSAiIyIgfHwgaXNOYW1lQ2hhcihjaGFyKTsKICB9CiAgZnVuY3Rpb24gaXNXaGl0ZXNwYWNlKGNoYXIpIHsKICAgIGxldCBjcCA9IGdldENvZGVQb2ludChjaGFyKTsKICAgIHJldHVybiBjcCA9PT0gMzIgfHwgY3AgPT09IDkgfHwgY3AgPT09IDEwIHx8IGNwID09PSAxMzsKICB9CiAgZnVuY3Rpb24gaXNYbWxDb2RlUG9pbnQoY3ApIHsKICAgIHJldHVybiBjcCA9PT0gOSB8fCBjcCA9PT0gMTAgfHwgY3AgPT09IDEzIHx8IGNwID49IDMyICYmIGNwIDw9IDU1Mjk1IHx8IGNwID49IDU3MzQ0ICYmIGNwIDw9IDY1NTMzIHx8IGNwID49IDY1NTM2ICYmIGNwIDw9IDExMTQxMTE7CiAgfQogIGZ1bmN0aW9uIGdldENvZGVQb2ludChjaGFyKSB7CiAgICByZXR1cm4gY2hhci5jb2RlUG9pbnRBdCgwKSB8fCAtMTsKICB9CiAgdmFyIF9YbWxOb2RlID0gY2xhc3MgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMucGFyZW50ID0gbnVsbDsKICAgICAgdGhpcy5zdGFydCA9IC0xOwogICAgICB0aGlzLmVuZCA9IC0xOwogICAgfQogICAgLyoqCiAgICAgKiBEb2N1bWVudCB0aGF0IGNvbnRhaW5zIHRoaXMgbm9kZSwgb3IgYG51bGxgIGlmIHRoaXMgbm9kZSBpcyBub3QgYXNzb2NpYXRlZAogICAgICogd2l0aCBhIGRvY3VtZW50LgogICAgICovCiAgICBnZXQgZG9jdW1lbnQoKSB7CiAgICAgIHZhciBfYSwgX2I7CiAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLnBhcmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmRvY3VtZW50KSAhPSBudWxsID8gX2IgOiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoaXMgbm9kZSBpcyB0aGUgcm9vdCBub2RlIG9mIHRoZSBkb2N1bWVudCAoYWxzbyBrbm93biBhcyB0aGUKICAgICAqIGRvY3VtZW50IGVsZW1lbnQpLgogICAgICovCiAgICBnZXQgaXNSb290Tm9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFyZW50ICE9PSBudWxsICYmIHRoaXMucGFyZW50ID09PSB0aGlzLmRvY3VtZW50ICYmIHRoaXMudHlwZSA9PT0gX1htbE5vZGUuVFlQRV9FTEVNRU5UOwogICAgfQogICAgLyoqCiAgICAgKiBXaGV0aGVyIHdoaXRlc3BhY2Ugc2hvdWxkIGJlIHByZXNlcnZlZCBpbiB0aGUgY29udGVudCBvZiB0aGlzIGVsZW1lbnQgYW5kCiAgICAgKiBpdHMgY2hpbGRyZW4uCiAgICAgKgogICAgICogVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHRoZSB2YWx1ZSBvZiB0aGUgc3BlY2lhbCBgeG1sOnNwYWNlYCBhdHRyaWJ1dGUsIGFuZAogICAgICogd2lsbCBiZSBgdHJ1ZWAgZm9yIGFueSBub2RlIHdob3NlIGB4bWw6c3BhY2VgIGF0dHJpYnV0ZSBpcyBzZXQgdG8KICAgICAqICJwcmVzZXJ2ZSIuIElmIGEgbm9kZSBoYXMgbm8gc3VjaCBhdHRyaWJ1dGUsIGl0IHdpbGwgaW5oZXJpdCB0aGUgdmFsdWUgb2YKICAgICAqIHRoZSBuZWFyZXN0IGFuY2VzdG9yIHRoYXQgZG9lcyAoaWYgYW55KS4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy13aGl0ZS1zcGFjZQogICAgICovCiAgICBnZXQgcHJlc2VydmVXaGl0ZXNwYWNlKCkgewogICAgICB2YXIgX2E7CiAgICAgIHJldHVybiAhISgoX2EgPSB0aGlzLnBhcmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnByZXNlcnZlV2hpdGVzcGFjZSk7CiAgICB9CiAgICAvKioKICAgICAqIFR5cGUgb2YgdGhpcyBub2RlLgogICAgICoKICAgICAqIFRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IGlzIGEgc3RyaW5nIHRoYXQgbWF0Y2hlcyBvbmUgb2YgdGhlIHN0YXRpYwogICAgICogYFRZUEVfKmAgcHJvcGVydGllcyBvbiB0aGUgYFhtbE5vZGVgIGNsYXNzIChlLmcuIGBUWVBFX0VMRU1FTlRgLAogICAgICogYFRZUEVfVEVYVGAsIGV0Yy4pLgogICAgICoKICAgICAqIFRoZSBgWG1sTm9kZWAgY2xhc3MgaXRzZWxmIGlzIGEgYmFzZSBjbGFzcyBhbmQgZG9lc24ndCBoYXZlIGl0cyBvd24gdHlwZQogICAgICogbmFtZS4KICAgICAqLwogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiAiIjsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIG9iamVjdCByZXByZXNlbnRpbmcgdGhpcyBub2RlLCBtaW51cyBwcm9wZXJ0aWVzCiAgICAgKiB0aGF0IGNvdWxkIHJlc3VsdCBpbiBjaXJjdWxhciByZWZlcmVuY2VzLgogICAgICovCiAgICB0b0pTT04oKSB7CiAgICAgIGxldCBqc29uID0gewogICAgICAgIHR5cGU6IHRoaXMudHlwZQogICAgICB9OwogICAgICBpZiAodGhpcy5pc1Jvb3ROb2RlKSB7CiAgICAgICAganNvbi5pc1Jvb3ROb2RlID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAodGhpcy5wcmVzZXJ2ZVdoaXRlc3BhY2UpIHsKICAgICAgICBqc29uLnByZXNlcnZlV2hpdGVzcGFjZSA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc3RhcnQgIT09IC0xKSB7CiAgICAgICAganNvbi5zdGFydCA9IHRoaXMuc3RhcnQ7CiAgICAgICAganNvbi5lbmQgPSB0aGlzLmVuZDsKICAgICAgfQogICAgICByZXR1cm4ganNvbjsKICAgIH0KICB9OwogIHZhciBYbWxOb2RlID0gX1htbE5vZGU7CiAgWG1sTm9kZS5UWVBFX0NEQVRBID0gImNkYXRhIjsKICBYbWxOb2RlLlRZUEVfQ09NTUVOVCA9ICJjb21tZW50IjsKICBYbWxOb2RlLlRZUEVfRE9DVU1FTlQgPSAiZG9jdW1lbnQiOwogIFhtbE5vZGUuVFlQRV9ET0NVTUVOVF9UWVBFID0gImRvY3R5cGUiOwogIFhtbE5vZGUuVFlQRV9FTEVNRU5UID0gImVsZW1lbnQiOwogIFhtbE5vZGUuVFlQRV9QUk9DRVNTSU5HX0lOU1RSVUNUSU9OID0gInBpIjsKICBYbWxOb2RlLlRZUEVfVEVYVCA9ICJ0ZXh0IjsKICBYbWxOb2RlLlRZUEVfWE1MX0RFQ0xBUkFUSU9OID0gInhtbGRlY2wiOwogIHZhciBYbWxUZXh0ID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKHRleHQgPSAiIikgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLnRleHQgPSB0ZXh0OwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfVEVYVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICB0ZXh0OiB0aGlzLnRleHQKICAgICAgfSk7CiAgICB9CiAgfTsKICB2YXIgWG1sQ2RhdGEgPSBjbGFzcyBleHRlbmRzIFhtbFRleHQgewogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfQ0RBVEE7CiAgICB9CiAgfTsKICB2YXIgWG1sQ29tbWVudCA9IGNsYXNzIGV4dGVuZHMgWG1sTm9kZSB7CiAgICBjb25zdHJ1Y3Rvcihjb250ZW50ID0gIiIpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX0NPTU1FTlQ7CiAgICB9CiAgICB0b0pTT04oKSB7CiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKFhtbE5vZGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpLCB7CiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50CiAgICAgIH0pOwogICAgfQogIH07CiAgdmFyIFhtbERlY2xhcmF0aW9uID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKHZlcnNpb24sIGVuY29kaW5nLCBzdGFuZGFsb25lKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247CiAgICAgIHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZyAhPSBudWxsID8gZW5jb2RpbmcgOiBudWxsOwogICAgICB0aGlzLnN0YW5kYWxvbmUgPSBzdGFuZGFsb25lICE9IG51bGwgPyBzdGFuZGFsb25lIDogbnVsbDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX1hNTF9ERUNMQVJBVElPTjsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgbGV0IGpzb24gPSBYbWxOb2RlLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTsKICAgICAganNvbi52ZXJzaW9uID0gdGhpcy52ZXJzaW9uOwogICAgICBmb3IgKGxldCBrZXkgb2YgWyJlbmNvZGluZyIsICJzdGFuZGFsb25lIl0pIHsKICAgICAgICBpZiAodGhpc1trZXldICE9PSBudWxsKSB7CiAgICAgICAgICBqc29uW2tleV0gPSB0aGlzW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBqc29uOwogICAgfQogIH07CiAgdmFyIFhtbEVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIFhtbE5vZGUgewogICAgY29uc3RydWN0b3IobmFtZSwgYXR0cmlidXRlcyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLCBjaGlsZHJlbiA9IFtdKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgIH0KICAgIC8qKgogICAgICogV2hldGhlciB0aGlzIGVsZW1lbnQgaXMgZW1wdHkgKG1lYW5pbmcgaXQgaGFzIG5vIGNoaWxkcmVuKS4KICAgICAqLwogICAgZ2V0IGlzRW1wdHkoKSB7CiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmxlbmd0aCA9PT0gMDsKICAgIH0KICAgIGdldCBwcmVzZXJ2ZVdoaXRlc3BhY2UoKSB7CiAgICAgIGxldCBub2RlID0gdGhpczsKICAgICAgd2hpbGUgKG5vZGUgaW5zdGFuY2VvZiBYbWxFbGVtZW50KSB7CiAgICAgICAgaWYgKCJ4bWw6c3BhY2UiIGluIG5vZGUuYXR0cmlidXRlcykgewogICAgICAgICAgcmV0dXJuIG5vZGUuYXR0cmlidXRlc1sieG1sOnNwYWNlIl0gPT09ICJwcmVzZXJ2ZSI7CiAgICAgICAgfQogICAgICAgIG5vZGUgPSBub2RlLnBhcmVudDsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFRleHQgY29udGVudCBvZiB0aGlzIGVsZW1lbnQgYW5kIGFsbCBpdHMgZGVzY2VuZGFudHMuCiAgICAgKi8KICAgIGdldCB0ZXh0KCkgewogICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiAidGV4dCIgaW4gY2hpbGQgPyBjaGlsZC50ZXh0IDogIiIpLmpvaW4oIiIpOwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfRUxFTUVOVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgYXR0cmlidXRlczogdGhpcy5hdHRyaWJ1dGVzLAogICAgICAgIGNoaWxkcmVuOiB0aGlzLmNoaWxkcmVuLm1hcCgoY2hpbGQpID0+IGNoaWxkLnRvSlNPTigpKQogICAgICB9KTsKICAgIH0KICB9OwogIHZhciBYbWxEb2N1bWVudCA9IGNsYXNzIGV4dGVuZHMgWG1sTm9kZSB7CiAgICBjb25zdHJ1Y3RvcihjaGlsZHJlbiA9IFtdKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgIH0KICAgIGdldCBkb2N1bWVudCgpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJvb3QgZWxlbWVudCBvZiB0aGlzIGRvY3VtZW50LCBvciBgbnVsbGAgaWYgdGhpcyBkb2N1bWVudCBpcyBlbXB0eS4KICAgICAqLwogICAgZ2V0IHJvb3QoKSB7CiAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHsKICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBYbWxFbGVtZW50KSB7CiAgICAgICAgICByZXR1cm4gY2hpbGQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBUZXh0IGNvbnRlbnQgb2YgdGhpcyBkb2N1bWVudCBhbmQgYWxsIGl0cyBkZXNjZW5kYW50cy4KICAgICAqLwogICAgZ2V0IHRleHQoKSB7CiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLm1hcCgoY2hpbGQpID0+ICJ0ZXh0IiBpbiBjaGlsZCA/IGNoaWxkLnRleHQgOiAiIikuam9pbigiIik7CiAgICB9CiAgICBnZXQgdHlwZSgpIHsKICAgICAgcmV0dXJuIFhtbE5vZGUuVFlQRV9ET0NVTUVOVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBjaGlsZHJlbjogdGhpcy5jaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiBjaGlsZC50b0pTT04oKSkKICAgICAgfSk7CiAgICB9CiAgfTsKICB2YXIgWG1sRG9jdW1lbnRUeXBlID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKG5hbWUsIHB1YmxpY0lkLCBzeXN0ZW1JZCwgaW50ZXJuYWxTdWJzZXQpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5uYW1lID0gbmFtZTsKICAgICAgdGhpcy5wdWJsaWNJZCA9IHB1YmxpY0lkICE9IG51bGwgPyBwdWJsaWNJZCA6IG51bGw7CiAgICAgIHRoaXMuc3lzdGVtSWQgPSBzeXN0ZW1JZCAhPSBudWxsID8gc3lzdGVtSWQgOiBudWxsOwogICAgICB0aGlzLmludGVybmFsU3Vic2V0ID0gaW50ZXJuYWxTdWJzZXQgIT0gbnVsbCA/IGludGVybmFsU3Vic2V0IDogbnVsbDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX0RPQ1VNRU5UX1RZUEU7CiAgICB9CiAgICB0b0pTT04oKSB7CiAgICAgIGxldCBqc29uID0gWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7CiAgICAgIGpzb24ubmFtZSA9IHRoaXMubmFtZTsKICAgICAgZm9yIChsZXQga2V5IG9mIFsicHVibGljSWQiLCAic3lzdGVtSWQiLCAiaW50ZXJuYWxTdWJzZXQiXSkgewogICAgICAgIGlmICh0aGlzW2tleV0gIT09IG51bGwpIHsKICAgICAgICAgIGpzb25ba2V5XSA9IHRoaXNba2V5XTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGpzb247CiAgICB9CiAgfTsKICB2YXIgWG1sRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHsKICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGNoYXJJbmRleCwgeG1sKSB7CiAgICAgIGxldCBjb2x1bW4gPSAxOwogICAgICBsZXQgZXhjZXJwdCA9ICIiOwogICAgICBsZXQgbGluZSA9IDE7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckluZGV4OyArK2kpIHsKICAgICAgICBsZXQgY2hhciA9IHhtbFtpXTsKICAgICAgICBpZiAoY2hhciA9PT0gIlxuIikgewogICAgICAgICAgY29sdW1uID0gMTsKICAgICAgICAgIGV4Y2VycHQgPSAiIjsKICAgICAgICAgIGxpbmUgKz0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29sdW1uICs9IDE7CiAgICAgICAgICBleGNlcnB0ICs9IGNoYXI7CiAgICAgICAgfQogICAgICB9CiAgICAgIGxldCBlb2wgPSB4bWwuaW5kZXhPZigiXG4iLCBjaGFySW5kZXgpOwogICAgICBleGNlcnB0ICs9IGVvbCA9PT0gLTEgPyB4bWwuc2xpY2UoY2hhckluZGV4KSA6IHhtbC5zbGljZShjaGFySW5kZXgsIGVvbCk7CiAgICAgIGxldCBleGNlcnB0U3RhcnQgPSAwOwogICAgICBpZiAoZXhjZXJwdC5sZW5ndGggPiA1MCkgewogICAgICAgIGlmIChjb2x1bW4gPCA0MCkgewogICAgICAgICAgZXhjZXJwdCA9IGV4Y2VycHQuc2xpY2UoMCwgNTApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBleGNlcnB0U3RhcnQgPSBjb2x1bW4gLSAyMDsKICAgICAgICAgIGV4Y2VycHQgPSBleGNlcnB0LnNsaWNlKGV4Y2VycHRTdGFydCwgY29sdW1uICsgMzApOwogICAgICAgIH0KICAgICAgfQogICAgICBzdXBlcigKICAgICAgICBgJHttZXNzYWdlfSAobGluZSAke2xpbmV9LCBjb2x1bW4gJHtjb2x1bW59KQogICR7ZXhjZXJwdH0KYCArICIgIi5yZXBlYXQoY29sdW1uIC0gZXhjZXJwdFN0YXJ0ICsgMSkgKyAiXlxuIgogICAgICApOwogICAgICB0aGlzLmNvbHVtbiA9IGNvbHVtbjsKICAgICAgdGhpcy5leGNlcnB0ID0gZXhjZXJwdDsKICAgICAgdGhpcy5saW5lID0gbGluZTsKICAgICAgdGhpcy5uYW1lID0gIlhtbEVycm9yIjsKICAgICAgdGhpcy5wb3MgPSBjaGFySW5kZXg7CiAgICB9CiAgfTsKICB2YXIgWG1sUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRlbnQgPSAiIikgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50OwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfUFJPQ0VTU0lOR19JTlNUUlVDVElPTjsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50CiAgICAgIH0pOwogICAgfQogIH07CiAgdmFyIGVtcHR5U3RyaW5nMiA9ICIiOwogIHZhciBQYXJzZXIgPSBjbGFzcyB7CiAgICAvKioKICAgICAqIEBwYXJhbSB4bWwgWE1MIHN0cmluZyB0byBwYXJzZS4KICAgICAqIEBwYXJhbSBvcHRpb25zIFBhcnNlciBvcHRpb25zLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcih4bWwsIG9wdGlvbnMgPSB7fSkgewogICAgICBsZXQgZG9jID0gdGhpcy5kb2N1bWVudCA9IG5ldyBYbWxEb2N1bWVudCgpOwogICAgICBsZXQgc2Nhbm5lciA9IHRoaXMuYyA9IG5ldyBTdHJpbmdTY2FubmVyKHhtbCk7CiAgICAgIHRoaXMubCA9IGRvYzsKICAgICAgdGhpcy5mID0gb3B0aW9uczsKICAgICAgaWYgKHRoaXMuZi5pbmNsdWRlT2Zmc2V0cykgewogICAgICAgIGRvYy5zdGFydCA9IDA7CiAgICAgICAgZG9jLmVuZCA9IHhtbC5sZW5ndGg7CiAgICAgIH0KICAgICAgc2Nhbm5lci5iKCJcdUZFRkYiKTsKICAgICAgdGhpcy5IKCk7CiAgICAgIGlmICghdGhpcy5CKCkpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlJvb3QgZWxlbWVudCBpcyBtaXNzaW5nIG9yIGludmFsaWQiKTsKICAgICAgfQogICAgICB3aGlsZSAodGhpcy53KCkpIHsKICAgICAgfQogICAgICBpZiAoIXNjYW5uZXIueikgewogICAgICAgIHRocm93IHRoaXMuYSgiRXh0cmEgY29udGVudCBhdCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudCIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFkZHMgdGhlIGdpdmVuIGBYbWxOb2RlYCBhcyBhIGNoaWxkIG9mIGB0aGlzLmN1cnJlbnROb2RlYC4KICAgICAqLwogICAgaihub2RlLCBjaGFySW5kZXgpIHsKICAgICAgbm9kZS5wYXJlbnQgPSB0aGlzLmw7CiAgICAgIGlmICh0aGlzLmYuaW5jbHVkZU9mZnNldHMpIHsKICAgICAgICBub2RlLnN0YXJ0ID0gdGhpcy5jLmkoY2hhckluZGV4KTsKICAgICAgICBub2RlLmVuZCA9IHRoaXMuYy5pKCk7CiAgICAgIH0KICAgICAgdGhpcy5sLmNoaWxkcmVuLnB1c2gobm9kZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIHRoZSBnaXZlbiBfdGV4dF8gdG8gdGhlIGRvY3VtZW50LCBlaXRoZXIgYnkgYXBwZW5kaW5nIGl0IHRvIGEKICAgICAqIHByZWNlZGluZyBgWG1sVGV4dGAgbm9kZSAoaWYgcG9zc2libGUpIG9yIGJ5IGNyZWF0aW5nIGEgbmV3IGBYbWxUZXh0YCBub2RlLgogICAgICovCiAgICB4KHRleHQsIGNoYXJJbmRleCkgewogICAgICBsZXQgeyBjaGlsZHJlbiB9ID0gdGhpcy5sOwogICAgICBsZXQgeyBsZW5ndGggfSA9IGNoaWxkcmVuOwogICAgICB0ZXh0ID0gbm9ybWFsaXplTGluZUJyZWFrcyh0ZXh0KTsKICAgICAgaWYgKGxlbmd0aCA+IDApIHsKICAgICAgICBsZXQgcHJldk5vZGUgPSBjaGlsZHJlbltsZW5ndGggLSAxXTsKICAgICAgICBpZiAoKHByZXZOb2RlID09IG51bGwgPyB2b2lkIDAgOiBwcmV2Tm9kZS50eXBlKSA9PT0gWG1sTm9kZS5UWVBFX1RFWFQpIHsKICAgICAgICAgIGxldCB0ZXh0Tm9kZSA9IHByZXZOb2RlOwogICAgICAgICAgdGV4dE5vZGUudGV4dCArPSB0ZXh0OwogICAgICAgICAgaWYgKHRoaXMuZi5pbmNsdWRlT2Zmc2V0cykgewogICAgICAgICAgICB0ZXh0Tm9kZS5lbmQgPSB0aGlzLmMuaSgpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFRleHQodGV4dCksIGNoYXJJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGVsZW1lbnQgYXR0cmlidXRlcy4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1zdGFydHRhZ3MKICAgICAqLwogICAgSSgpIHsKICAgICAgbGV0IGF0dHJpYnV0ZXMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgd2hpbGUgKHRoaXMuZSgpKSB7CiAgICAgICAgbGV0IGF0dHJOYW1lID0gdGhpcy5yKCk7CiAgICAgICAgaWYgKCFhdHRyTmFtZSkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGxldCBhdHRyVmFsdWUgPSB0aGlzLnUoKSAmJiB0aGlzLkooKTsKICAgICAgICBpZiAoYXR0clZhbHVlID09PSBmYWxzZSkgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJBdHRyaWJ1dGUgdmFsdWUgZXhwZWN0ZWQiKTsKICAgICAgICB9CiAgICAgICAgaWYgKGF0dHJOYW1lIGluIGF0dHJpYnV0ZXMpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgRHVwbGljYXRlIGF0dHJpYnV0ZTogJHthdHRyTmFtZX1gKTsKICAgICAgICB9CiAgICAgICAgaWYgKGF0dHJOYW1lID09PSAieG1sOnNwYWNlIiAmJiBhdHRyVmFsdWUgIT09ICJkZWZhdWx0IiAmJiBhdHRyVmFsdWUgIT09ICJwcmVzZXJ2ZSIpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgnVmFsdWUgb2YgdGhlIGB4bWw6c3BhY2VgIGF0dHJpYnV0ZSBtdXN0IGJlICJkZWZhdWx0IiBvciAicHJlc2VydmUiJyk7CiAgICAgICAgfQogICAgICAgIGF0dHJpYnV0ZXNbYXR0ck5hbWVdID0gYXR0clZhbHVlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmYuc29ydEF0dHJpYnV0ZXMpIHsKICAgICAgICBsZXQgYXR0ck5hbWVzID0gT2JqZWN0LmtleXMoYXR0cmlidXRlcykuc29ydCgpOwogICAgICAgIGxldCBzb3J0ZWRBdHRyaWJ1dGVzID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyTmFtZXMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgIGxldCBhdHRyTmFtZSA9IGF0dHJOYW1lc1tpXTsKICAgICAgICAgIHNvcnRlZEF0dHJpYnV0ZXNbYXR0ck5hbWVdID0gYXR0cmlidXRlc1thdHRyTmFtZV07CiAgICAgICAgfQogICAgICAgIGF0dHJpYnV0ZXMgPSBzb3J0ZWRBdHRyaWJ1dGVzOwogICAgICB9CiAgICAgIHJldHVybiBhdHRyaWJ1dGVzOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbiBgQXR0VmFsdWVgIChhdHRyaWJ1dGUgdmFsdWUpIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zCiAgICAgKiAgIENvbnRlbnRzIG9mIHRoZSBgQXR0VmFsdWVgIG1pbnVzIHF1b3Rlcywgb3IgYGZhbHNlYCBpZiBub3RoaW5nIHdhcwogICAgICogICBjb25zdW1lZC4gQW4gZW1wdHkgc3RyaW5nIGluZGljYXRlcyB0aGF0IGFuIGBBdHRWYWx1ZWAgd2FzIGNvbnN1bWVkIGJ1dAogICAgICogICB3YXMgZW1wdHkuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1BdHRWYWx1ZQogICAgICovCiAgICBKKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgcXVvdGUgPSBzY2FubmVyLmgoKTsKICAgICAgaWYgKHF1b3RlICE9PSAnIicgJiYgcXVvdGUgIT09ICInIikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBzY2FubmVyLmcoKTsKICAgICAgbGV0IGNoYXJzOwogICAgICBsZXQgaXNDbG9zZWQgPSBmYWxzZTsKICAgICAgbGV0IHZhbHVlID0gZW1wdHlTdHJpbmcyOwogICAgICBsZXQgcmVnZXggPSBxdW90ZSA9PT0gJyInID8gYXR0VmFsdWVDaGFyRG91YmxlUXVvdGUgOiBhdHRWYWx1ZUNoYXJTaW5nbGVRdW90ZTsKICAgICAgbWF0Y2hMb29wOgogICAgICAgIHdoaWxlICghc2Nhbm5lci56KSB7CiAgICAgICAgICBjaGFycyA9IHNjYW5uZXIuRyhyZWdleCk7CiAgICAgICAgICBpZiAoY2hhcnMpIHsKICAgICAgICAgICAgdGhpcy5wKGNoYXJzKTsKICAgICAgICAgICAgdmFsdWUgKz0gY2hhcnMucmVwbGFjZShhdHRWYWx1ZU5vcm1hbGl6ZWRXaGl0ZXNwYWNlLCAiICIpOwogICAgICAgICAgfQogICAgICAgICAgc3dpdGNoIChzY2FubmVyLmgoKSkgewogICAgICAgICAgICBjYXNlIHF1b3RlOgogICAgICAgICAgICAgIGlzQ2xvc2VkID0gdHJ1ZTsKICAgICAgICAgICAgICBicmVhayBtYXRjaExvb3A7CiAgICAgICAgICAgIGNhc2UgIiYiOgogICAgICAgICAgICAgIHZhbHVlICs9IHRoaXMuQygpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBjYXNlICI8IjoKICAgICAgICAgICAgICB0aHJvdyB0aGlzLmEoIlVuZXNjYXBlZCBgPGAgaXMgbm90IGFsbG93ZWQgaW4gYW4gYXR0cmlidXRlIHZhbHVlIik7CiAgICAgICAgICAgIGNhc2UgZW1wdHlTdHJpbmcyOgogICAgICAgICAgICAgIGJyZWFrIG1hdGNoTG9vcDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIGlmICghaXNDbG9zZWQpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlVuY2xvc2VkIGF0dHJpYnV0ZSIpOwogICAgICB9CiAgICAgIHNjYW5uZXIuZygpOwogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgQ0RBVEEgc2VjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgQ0RBVEEgc2VjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1jZGF0YS1zZWN0CiAgICAgKi8KICAgIEsoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCFbQ0RBVEFbIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IHRleHQgPSBzY2FubmVyLnQoIl1dPiIpOwogICAgICB0aGlzLnAodGV4dCk7CiAgICAgIGlmICghc2Nhbm5lci5iKCJdXT4iKSkgewogICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgQ0RBVEEgc2VjdGlvbiIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmYucHJlc2VydmVDZGF0YSA/IHRoaXMuaihuZXcgWG1sQ2RhdGEobm9ybWFsaXplTGluZUJyZWFrcyh0ZXh0KSksIHN0YXJ0SW5kZXgpIDogdGhpcy54KHRleHQsIHN0YXJ0SW5kZXgpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBjaGFyYWN0ZXIgZGF0YSBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGNoYXJhY3RlciBkYXRhIHdhcyBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jZHQtY2hhcmRhdGEKICAgICAqLwogICAgTCgpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSBzY2FubmVyLmQ7CiAgICAgIGxldCBjaGFyRGF0YSA9IHNjYW5uZXIuQShlbmRDaGFyRGF0YSk7CiAgICAgIGlmICghY2hhckRhdGEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy5wKGNoYXJEYXRhKTsKICAgICAgaWYgKHNjYW5uZXIuaCgzKSA9PT0gIl1dPiIpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIkVsZW1lbnQgY29udGVudCBtYXkgbm90IGNvbnRhaW4gdGhlIENEQVRBIHNlY3Rpb24gY2xvc2UgZGVsaW1pdGVyIGBdXT5gIik7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMueChjaGFyRGF0YSwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgY29tbWVudCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgY29tbWVudCB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULUNvbW1lbnQKICAgICAqLwogICAgRCgpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSBzY2FubmVyLmQ7CiAgICAgIGlmICghc2Nhbm5lci5iKCI8IS0tIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IGNvbnRlbnQgPSBzY2FubmVyLnQoIi0tIik7CiAgICAgIHRoaXMucChjb250ZW50KTsKICAgICAgaWYgKCFzY2FubmVyLmIoIi0tPiIpKSB7CiAgICAgICAgaWYgKHNjYW5uZXIuaCgyKSA9PT0gIi0tIikgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJUaGUgc3RyaW5nIGAtLWAgaXNuJ3QgYWxsb3dlZCBpbnNpZGUgYSBjb21tZW50Iik7CiAgICAgICAgfQogICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgY29tbWVudCIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmYucHJlc2VydmVDb21tZW50cyA/IHRoaXMuaihuZXcgWG1sQ29tbWVudChub3JtYWxpemVMaW5lQnJlYWtzKGNvbnRlbnQpKSwgc3RhcnRJbmRleCkgOiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhIHJlZmVyZW5jZSBpbiBhIGNvbnRlbnQgY29udGV4dCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGRpZmZlcnMgZnJvbSBgY29uc3VtZVJlZmVyZW5jZSgpYCBpbiB0aGF0IGEgY29uc3VtZWQgcmVmZXJlbmNlIHdpbGwgYmUKICAgICAqIGFkZGVkIHRvIHRoZSBkb2N1bWVudCBhcyBhIHRleHQgbm9kZSBpbnN0ZWFkIG9mIHJldHVybmVkLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSByZWZlcmVuY2Ugd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNlbnRwcm9jCiAgICAgKi8KICAgIE0oKSB7CiAgICAgIGxldCBzdGFydEluZGV4ID0gdGhpcy5jLmQ7CiAgICAgIGxldCByZWYgPSB0aGlzLkMoKTsKICAgICAgcmV0dXJuIHJlZiA/IHRoaXMueChyZWYsIHN0YXJ0SW5kZXgpIDogZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgZG9jdHlwZSBkZWNsYXJhdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGlzIGEgbG9vc2UgaW1wbGVtZW50YXRpb24gc2luY2UgZG9jdHlwZSBkZWNsYXJhdGlvbnMgYXJlIGN1cnJlbnRseQogICAgICogZGlzY2FyZGVkIHdpdGhvdXQgZnVydGhlciBwYXJzaW5nLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSBkb2N0eXBlIGRlY2xhcmF0aW9uIHdhcyBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jZHRkCiAgICAgKi8KICAgIE4oKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCFET0NUWVBFIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IG5hbWUgPSB0aGlzLmUoKSAmJiB0aGlzLnIoKTsKICAgICAgaWYgKCFuYW1lKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJFeHBlY3RlZCBhIG5hbWUiKTsKICAgICAgfQogICAgICBsZXQgcHVibGljSWQ7CiAgICAgIGxldCBzeXN0ZW1JZDsKICAgICAgaWYgKHRoaXMuZSgpKSB7CiAgICAgICAgaWYgKHNjYW5uZXIuYigiUFVCTElDIikpIHsKICAgICAgICAgIHB1YmxpY0lkID0gdGhpcy5lKCkgJiYgdGhpcy5PKCk7CiAgICAgICAgICBpZiAocHVibGljSWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHRocm93IHRoaXMuYSgiRXhwZWN0ZWQgYSBwdWJsaWMgaWRlbnRpZmllciIpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5lKCk7CiAgICAgICAgfQogICAgICAgIGlmIChwdWJsaWNJZCAhPT0gdm9pZCAwIHx8IHNjYW5uZXIuYigiU1lTVEVNIikpIHsKICAgICAgICAgIHRoaXMuZSgpOwogICAgICAgICAgc3lzdGVtSWQgPSB0aGlzLnMoKTsKICAgICAgICAgIGlmIChzeXN0ZW1JZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgdGhyb3cgdGhpcy5hKCJFeHBlY3RlZCBhIHN5c3RlbSBpZGVudGlmaWVyIik7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmUoKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgbGV0IGludGVybmFsU3Vic2V0OwogICAgICBpZiAoc2Nhbm5lci5iKCJbIikpIHsKICAgICAgICBpbnRlcm5hbFN1YnNldCA9IHNjYW5uZXIuQSgvXF1bXHgyMFx0XHJcbl0qPi8pOwogICAgICAgIGlmICghc2Nhbm5lci5iKCJdIikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgaW50ZXJuYWwgc3Vic2V0Iik7CiAgICAgICAgfQogICAgICAgIHRoaXMuZSgpOwogICAgICB9CiAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlVuY2xvc2VkIGRvY3R5cGUgZGVjbGFyYXRpb24iKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5mLnByZXNlcnZlRG9jdW1lbnRUeXBlID8gdGhpcy5qKG5ldyBYbWxEb2N1bWVudFR5cGUobmFtZSwgcHVibGljSWQsIHN5c3RlbUlkLCBpbnRlcm5hbFN1YnNldCksIHN0YXJ0SW5kZXgpIDogdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYW4gZWxlbWVudCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGFuIGVsZW1lbnQgd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1lbGVtZW50CiAgICAgKi8KICAgIEIoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCIpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGxldCBuYW1lID0gdGhpcy5yKCk7CiAgICAgIGlmICghbmFtZSkgewogICAgICAgIHNjYW5uZXIubyhzdGFydEluZGV4KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IGF0dHJpYnV0ZXMgPSB0aGlzLkkoKTsKICAgICAgbGV0IGlzRW1wdHkgPSAhIXNjYW5uZXIuYigiLz4iKTsKICAgICAgbGV0IGVsZW1lbnQgPSBuZXcgWG1sRWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzKTsKICAgICAgZWxlbWVudC5wYXJlbnQgPSB0aGlzLmw7CiAgICAgIGlmICghaXNFbXB0eSkgewogICAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgVW5jbG9zZWQgc3RhcnQgdGFnIGZvciBlbGVtZW50IFxgJHtuYW1lfVxgYCk7CiAgICAgICAgfQogICAgICAgIHRoaXMubCA9IGVsZW1lbnQ7CiAgICAgICAgZG8gewogICAgICAgICAgdGhpcy5MKCk7CiAgICAgICAgfSB3aGlsZSAodGhpcy5CKCkgfHwgdGhpcy5NKCkgfHwgdGhpcy5LKCkgfHwgdGhpcy5FKCkgfHwgdGhpcy5EKCkpOwogICAgICAgIGxldCBlbmRUYWdNYXJrID0gc2Nhbm5lci5kOwogICAgICAgIGxldCBlbmRUYWdOYW1lOwogICAgICAgIGlmICghc2Nhbm5lci5iKCI8LyIpIHx8ICEoZW5kVGFnTmFtZSA9IHRoaXMucigpKSB8fCBlbmRUYWdOYW1lICE9PSBuYW1lKSB7CiAgICAgICAgICBzY2FubmVyLm8oZW5kVGFnTWFyayk7CiAgICAgICAgICB0aHJvdyB0aGlzLmEoYE1pc3NpbmcgZW5kIHRhZyBmb3IgZWxlbWVudCAke25hbWV9YCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuZSgpOwogICAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgVW5jbG9zZWQgZW5kIHRhZyBmb3IgZWxlbWVudCAke25hbWV9YCk7CiAgICAgICAgfQogICAgICAgIHRoaXMubCA9IGVsZW1lbnQucGFyZW50OwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmooZWxlbWVudCwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGFuIGBFcWAgcHJvZHVjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGFuIGBFcWAgcHJvZHVjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULUVxCiAgICAgKi8KICAgIHUoKSB7CiAgICAgIHRoaXMuZSgpOwogICAgICBpZiAodGhpcy5jLmIoIj0iKSkgewogICAgICAgIHRoaXMuZSgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYE1pc2NgIGNvbnRlbnQgaWYgcG9zc2libGUuCiAgICAgKgogICAgICogQHJldHVybnMgV2hldGhlciBhbnl0aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULU1pc2MKICAgICAqLwogICAgdygpIHsKICAgICAgcmV0dXJuIHRoaXMuRCgpIHx8IHRoaXMuRSgpIHx8IHRoaXMuZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBvbmUgb3IgbW9yZSBgTmFtZWAgY2hhcmFjdGVycyBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBgTmFtZWAgY2hhcmFjdGVycywgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIG5vbmUgd2VyZSBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jTlQtTmFtZQogICAgICovCiAgICByKCkgewogICAgICByZXR1cm4gaXNOYW1lU3RhcnRDaGFyKHRoaXMuYy5oKCkpID8gdGhpcy5jLnYoaXNOYW1lQ2hhcikgOiBlbXB0eVN0cmluZzI7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1waQogICAgICovCiAgICBFKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgc3RhcnRJbmRleCA9IHNjYW5uZXIuZDsKICAgICAgaWYgKCFzY2FubmVyLmIoIjw/IikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IG5hbWUgPSB0aGlzLnIoKTsKICAgICAgaWYgKG5hbWUpIHsKICAgICAgICBpZiAobmFtZS50b0xvd2VyQ2FzZSgpID09PSAieG1sIikgewogICAgICAgICAgc2Nhbm5lci5vKHN0YXJ0SW5kZXgpOwogICAgICAgICAgdGhyb3cgdGhpcy5hKCJYTUwgZGVjbGFyYXRpb24gaXNuJ3QgYWxsb3dlZCBoZXJlIik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBwcm9jZXNzaW5nIGluc3RydWN0aW9uIik7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmUoKSkgewogICAgICAgIGlmIChzY2FubmVyLmIoIj8+IikpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbihuYW1lKSwgc3RhcnRJbmRleCk7CiAgICAgICAgfQogICAgICAgIHRocm93IHRoaXMuYSgiV2hpdGVzcGFjZSBpcyByZXF1aXJlZCBhZnRlciBhIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbmFtZSIpOwogICAgICB9CiAgICAgIGxldCBjb250ZW50ID0gc2Nhbm5lci50KCI/PiIpOwogICAgICB0aGlzLnAoY29udGVudCk7CiAgICAgIGlmICghc2Nhbm5lci5iKCI/PiIpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJVbnRlcm1pbmF0ZWQgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbihuYW1lLCBub3JtYWxpemVMaW5lQnJlYWtzKGNvbnRlbnQpKSwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgcHJvbG9nIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSBwcm9sb2cgd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNzZWMtcHJvbG9nLWR0ZAogICAgICovCiAgICBIKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgc3RhcnRJbmRleCA9IHNjYW5uZXIuZDsKICAgICAgdGhpcy5QKCk7CiAgICAgIHdoaWxlICh0aGlzLncoKSkgewogICAgICB9CiAgICAgIGlmICh0aGlzLk4oKSkgewogICAgICAgIHdoaWxlICh0aGlzLncoKSkgewogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3RhcnRJbmRleCA8IHNjYW5uZXIuZDsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYSBwdWJsaWMgaWRlbnRpZmllciBsaXRlcmFsIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zCiAgICAgKiAgIFZhbHVlIG9mIHRoZSBwdWJsaWMgaWRlbnRpZmllciBsaXRlcmFsIG1pbnVzIHF1b3Rlcywgb3IgYGZhbHNlYCBpZgogICAgICogICBub3RoaW5nIHdhcyBjb25zdW1lZC4gQW4gZW1wdHkgc3RyaW5nIGluZGljYXRlcyB0aGF0IGEgcHVibGljIGlkIGxpdGVyYWwKICAgICAqICAgd2FzIGNvbnN1bWVkIGJ1dCB3YXMgZW1wdHkuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1QdWJpZExpdGVyYWwKICAgICAqLwogICAgTygpIHsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSB0aGlzLmMuZDsKICAgICAgbGV0IHZhbHVlID0gdGhpcy5zKCk7CiAgICAgIGlmICh2YWx1ZSAhPT0gZmFsc2UgJiYgIS9eWy1ceDIwXHJcbmEtekEtWjAtOScoKSssLi86PT87ISojQCRfJV0qJC8udGVzdCh2YWx1ZSkpIHsKICAgICAgICB0aGlzLmMubyhzdGFydEluZGV4KTsKICAgICAgICB0aHJvdyB0aGlzLmEoIkludmFsaWQgY2hhcmFjdGVyIGluIHB1YmxpYyBpZGVudGlmaWVyIik7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhIHJlZmVyZW5jZSBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGRpZmZlcnMgZnJvbSBgY29uc3VtZUNvbnRlbnRSZWZlcmVuY2UoKWAgaW4gdGhhdCBhIGNvbnN1bWVkIHJlZmVyZW5jZQogICAgICogd2lsbCBiZSByZXR1cm5lZCByYXRoZXIgdGhhbiBhZGRlZCB0byB0aGUgZG9jdW1lbnQuCiAgICAgKgogICAgICogQHJldHVybnMKICAgICAqICAgUGFyc2VkIHJlZmVyZW5jZSB2YWx1ZSwgb3IgYGZhbHNlYCBpZiBub3RoaW5nIHdhcyBjb25zdW1lZCAodG8KICAgICAqICAgZGlzdGluZ3Vpc2ggZnJvbSBhIHJlZmVyZW5jZSB0aGF0IHJlc29sdmVzIHRvIGFuIGVtcHR5IHN0cmluZykuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1SZWZlcmVuY2UKICAgICAqLwogICAgQygpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgaWYgKCFzY2FubmVyLmIoIiYiKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBsZXQgcmVmID0gc2Nhbm5lci52KGlzUmVmZXJlbmNlQ2hhcik7CiAgICAgIGlmIChzY2FubmVyLkYoKSAhPT0gIjsiKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJVbnRlcm1pbmF0ZWQgcmVmZXJlbmNlIChhIHJlZmVyZW5jZSBtdXN0IGVuZCB3aXRoIGA7YCkiKTsKICAgICAgfQogICAgICBsZXQgcGFyc2VkVmFsdWU7CiAgICAgIGlmIChyZWZbMF0gPT09ICIjIikgewogICAgICAgIGxldCBjb2RlUG9pbnQgPSByZWZbMV0gPT09ICJ4IiA/IHBhcnNlSW50KHJlZi5zbGljZSgyKSwgMTYpIDogcGFyc2VJbnQocmVmLnNsaWNlKDEpLCAxMCk7CiAgICAgICAgaWYgKGlzTmFOKGNvZGVQb2ludCkpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBjaGFyYWN0ZXIgcmVmZXJlbmNlIik7CiAgICAgICAgfQogICAgICAgIGlmICghaXNYbWxDb2RlUG9pbnQoY29kZVBvaW50KSkgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJDaGFyYWN0ZXIgcmVmZXJlbmNlIHJlc29sdmVzIHRvIGFuIGludmFsaWQgY2hhcmFjdGVyIik7CiAgICAgICAgfQogICAgICAgIHBhcnNlZFZhbHVlID0gU3RyaW5nLmZyb21Db2RlUG9pbnQoY29kZVBvaW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYXJzZWRWYWx1ZSA9IHByZWRlZmluZWRFbnRpdGllc1tyZWZdOwogICAgICAgIGlmIChwYXJzZWRWYWx1ZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICBsZXQgewogICAgICAgICAgICBpZ25vcmVVbmRlZmluZWRFbnRpdGllcywKICAgICAgICAgICAgcmVzb2x2ZVVuZGVmaW5lZEVudGl0eQogICAgICAgICAgfSA9IHRoaXMuZjsKICAgICAgICAgIGxldCB3cmFwcGVkUmVmID0gYCYke3JlZn07YDsKICAgICAgICAgIGlmIChyZXNvbHZlVW5kZWZpbmVkRW50aXR5KSB7CiAgICAgICAgICAgIGxldCByZXNvbHZlZFZhbHVlID0gcmVzb2x2ZVVuZGVmaW5lZEVudGl0eSh3cmFwcGVkUmVmKTsKICAgICAgICAgICAgaWYgKHJlc29sdmVkVmFsdWUgIT09IG51bGwgJiYgcmVzb2x2ZWRWYWx1ZSAhPT0gdm9pZCAwKSB7CiAgICAgICAgICAgICAgbGV0IHR5cGUgPSB0eXBlb2YgcmVzb2x2ZWRWYWx1ZTsKICAgICAgICAgICAgICBpZiAodHlwZSAhPT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFxgcmVzb2x2ZVVuZGVmaW5lZEVudGl0eSgpXGAgbXVzdCByZXR1cm4gYSBzdHJpbmcsIFxgbnVsbFxgLCBvciBcYHVuZGVmaW5lZFxgLCBidXQgcmV0dXJuZWQgYSB2YWx1ZSBvZiB0eXBlICR7dHlwZX1gKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVkVmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChpZ25vcmVVbmRlZmluZWRFbnRpdGllcykgewogICAgICAgICAgICByZXR1cm4gd3JhcHBlZFJlZjsKICAgICAgICAgIH0KICAgICAgICAgIHNjYW5uZXIubygtd3JhcHBlZFJlZi5sZW5ndGgpOwogICAgICAgICAgdGhyb3cgdGhpcy5hKGBOYW1lZCBlbnRpdHkgaXNuJ3QgZGVmaW5lZDogJHt3cmFwcGVkUmVmfWApOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcGFyc2VkVmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgYFN5c3RlbUxpdGVyYWxgIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEEgYFN5c3RlbUxpdGVyYWxgIGlzIHNpbWlsYXIgdG8gYW4gYXR0cmlidXRlIHZhbHVlLCBidXQgYWxsb3dzIHRoZQogICAgICogY2hhcmFjdGVycyBgPGAgYW5kIGAmYCBhbmQgZG9lc24ndCByZXBsYWNlIHJlZmVyZW5jZXMuCiAgICAgKgogICAgICogQHJldHVybnMKICAgICAqICAgVmFsdWUgb2YgdGhlIGBTeXN0ZW1MaXRlcmFsYCBtaW51cyBxdW90ZXMsIG9yIGBmYWxzZWAgaWYgbm90aGluZyB3YXMKICAgICAqICAgY29uc3VtZWQuIEFuIGVtcHR5IHN0cmluZyBpbmRpY2F0ZXMgdGhhdCBhIGBTeXN0ZW1MaXRlcmFsYCB3YXMgY29uc3VtZWQKICAgICAqICAgYnV0IHdhcyBlbXB0eS4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULVN5c3RlbUxpdGVyYWwKICAgICAqLwogICAgcygpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHF1b3RlID0gc2Nhbm5lci5iKCciJykgfHwgc2Nhbm5lci5iKCInIik7CiAgICAgIGlmICghcXVvdGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IHZhbHVlID0gc2Nhbm5lci50KHF1b3RlKTsKICAgICAgdGhpcy5wKHZhbHVlKTsKICAgICAgaWYgKCFzY2FubmVyLmIocXVvdGUpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJNaXNzaW5nIGVuZCBxdW90ZSIpOwogICAgICB9CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgb25lIG9yIG1vcmUgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYW55IHdoaXRlc3BhY2UgY2hhcmFjdGVycyB3ZXJlIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyN3aGl0ZQogICAgICovCiAgICBlKCkgewogICAgICByZXR1cm4gISF0aGlzLmMudihpc1doaXRlc3BhY2UpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbiBYTUwgZGVjbGFyYXRpb24gaWYgcG9zc2libGUuCiAgICAgKgogICAgICogQHJldHVybnMgV2hldGhlciBhbiBYTUwgZGVjbGFyYXRpb24gd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1YTUxEZWNsCiAgICAgKi8KICAgIFAoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPD94bWwiKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoIXRoaXMuZSgpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJJbnZhbGlkIFhNTCBkZWNsYXJhdGlvbiIpOwogICAgICB9CiAgICAgIGxldCB2ZXJzaW9uID0gISFzY2FubmVyLmIoInZlcnNpb24iKSAmJiB0aGlzLnUoKSAmJiB0aGlzLnMoKTsKICAgICAgaWYgKHZlcnNpb24gPT09IGZhbHNlKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJYTUwgdmVyc2lvbiBpcyBtaXNzaW5nIG9yIGludmFsaWQiKTsKICAgICAgfSBlbHNlIGlmICghL14xXC5bMC05XSskLy50ZXN0KHZlcnNpb24pKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJJbnZhbGlkIGNoYXJhY3RlciBpbiB2ZXJzaW9uIG51bWJlciIpOwogICAgICB9CiAgICAgIGxldCBlbmNvZGluZzsKICAgICAgbGV0IHN0YW5kYWxvbmU7CiAgICAgIGlmICh0aGlzLmUoKSkgewogICAgICAgIGVuY29kaW5nID0gISFzY2FubmVyLmIoImVuY29kaW5nIikgJiYgdGhpcy51KCkgJiYgdGhpcy5zKCk7CiAgICAgICAgaWYgKGVuY29kaW5nKSB7CiAgICAgICAgICB0aGlzLmUoKTsKICAgICAgICB9CiAgICAgICAgc3RhbmRhbG9uZSA9ICEhc2Nhbm5lci5iKCJzdGFuZGFsb25lIikgJiYgdGhpcy51KCkgJiYgdGhpcy5zKCk7CiAgICAgICAgaWYgKHN0YW5kYWxvbmUpIHsKICAgICAgICAgIGlmIChzdGFuZGFsb25lICE9PSAieWVzIiAmJiBzdGFuZGFsb25lICE9PSAibm8iKSB7CiAgICAgICAgICAgIHRocm93IHRoaXMuYSgnT25seSAieWVzIiBhbmQgIm5vIiBhcmUgcGVybWl0dGVkIGFzIHZhbHVlcyBvZiBgc3RhbmRhbG9uZWAnKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZSgpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIXNjYW5uZXIuYigiPz4iKSkgewogICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBvciB1bmNsb3NlZCBYTUwgZGVjbGFyYXRpb24iKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5mLnByZXNlcnZlWG1sRGVjbGFyYXRpb24gPyB0aGlzLmoobmV3IFhtbERlY2xhcmF0aW9uKAogICAgICAgIHZlcnNpb24sCiAgICAgICAgZW5jb2RpbmcgfHwgdm9pZCAwLAogICAgICAgIHN0YW5kYWxvbmUgfHwgdm9pZCAwCiAgICAgICksIHN0YXJ0SW5kZXgpIDogdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbiBgWG1sRXJyb3JgIGZvciB0aGUgY3VycmVudCBzY2FubmVyIHBvc2l0aW9uLgogICAgICovCiAgICBhKG1lc3NhZ2UpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBYbWxFcnJvcihtZXNzYWdlLCBzY2FubmVyLmQsIHNjYW5uZXIubSk7CiAgICB9CiAgICAvKioKICAgICAqIFRocm93cyBhbiBpbnZhbGlkIGNoYXJhY3RlciBlcnJvciBpZiBhbnkgY2hhcmFjdGVyIGluIHRoZSBnaXZlbiBfc3RyaW5nXwogICAgICogaXNuJ3QgYSB2YWxpZCBYTUwgY2hhcmFjdGVyLgogICAgICovCiAgICBwKHN0cmluZykgewogICAgICBsZXQgeyBsZW5ndGggfSA9IHN0cmluZzsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgICAgIGxldCBjcCA9IHN0cmluZy5jb2RlUG9pbnRBdChpKTsKICAgICAgICBpZiAoIWlzWG1sQ29kZVBvaW50KGNwKSkgewogICAgICAgICAgdGhpcy5jLm8oLShbLi4uc3RyaW5nXS5sZW5ndGggLSBpKSk7CiAgICAgICAgICB0aHJvdyB0aGlzLmEoIkludmFsaWQgY2hhcmFjdGVyIik7CiAgICAgICAgfQogICAgICAgIGlmIChjcCA+IDY1NTM1KSB7CiAgICAgICAgICBpICs9IDE7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKICBmdW5jdGlvbiBub3JtYWxpemVMaW5lQnJlYWtzKHRleHQpIHsKICAgIGxldCBpID0gMDsKICAgIHdoaWxlICgoaSA9IHRleHQuaW5kZXhPZigiXHIiLCBpKSkgIT09IC0xKSB7CiAgICAgIHRleHQgPSB0ZXh0W2kgKyAxXSA9PT0gIlxuIiA/IHRleHQuc2xpY2UoMCwgaSkgKyB0ZXh0LnNsaWNlKGkgKyAxKSA6IHRleHQuc2xpY2UoMCwgaSkgKyAiXG4iICsgdGV4dC5zbGljZShpICsgMSk7CiAgICB9CiAgICByZXR1cm4gdGV4dDsKICB9CiAgZnVuY3Rpb24gcGFyc2VYbWwoeG1sLCBvcHRpb25zKSB7CiAgICByZXR1cm4gbmV3IFBhcnNlcih4bWwsIG9wdGlvbnMpLmRvY3VtZW50OwogIH0KICBjbGFzcyBYbWxQYXJzZUVycm9yIGV4dGVuZHMgRXJyb3IgewogICAgY29uc3RydWN0b3IobWVzc2FnZSkgewogICAgICBzdXBlcihtZXNzYWdlKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gcGFyc2VYbWxTdHJpbmcoeG1sU3RyaW5nKSB7CiAgICBsZXQgZG9jID0gbnVsbDsKICAgIHRyeSB7CiAgICAgIGRvYyA9IGJyb3dzZXIucGFyc2VYbWwoeG1sU3RyaW5nKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgbmV3IFhtbFBhcnNlRXJyb3IoZS5tZXNzYWdlKTsKICAgIH0KICAgIHJldHVybiBkb2M7CiAgfQogIGZ1bmN0aW9uIHN0cmlwTmFtZXNwYWNlKG5hbWUpIHsKICAgIGNvbnN0IGNvbG9uID0gbmFtZS5pbmRleE9mKCI6Iik7CiAgICByZXR1cm4gY29sb24gPiAtMSA/IG5hbWUuc3Vic3RyKGNvbG9uICsgMSkgOiBuYW1lOwogIH0KICBmdW5jdGlvbiBnZXRSb290RWxlbWVudCh4bWxEb2MpIHsKICAgIHJldHVybiB4bWxEb2MuY2hpbGRyZW5bMF07CiAgfQogIGZ1bmN0aW9uIGdldEVsZW1lbnROYW1lKGVsZW1lbnQpIHsKICAgIHJldHVybiBlbGVtZW50Lm5hbWUgfHwgIiI7CiAgfQogIGZ1bmN0aW9uIGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgbmFtZSwgbmVzdGVkID0gZmFsc2UpIHsKICAgIGNvbnN0IHN0cmlwcGVkTmFtZSA9IHN0cmlwTmFtZXNwYWNlKG5hbWUpOwogICAgZnVuY3Rpb24gcmVkdWNlcihwcmV2LCBjdXJyKSB7CiAgICAgIGlmIChzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShjdXJyKSkgPT09IHN0cmlwcGVkTmFtZSkgewogICAgICAgIHByZXYucHVzaChjdXJyKTsKICAgICAgfQogICAgICBpZiAobmVzdGVkICYmIEFycmF5LmlzQXJyYXkoY3Vyci5jaGlsZHJlbikpIHsKICAgICAgICByZXR1cm4gWy4uLnByZXYsIC4uLmN1cnIuY2hpbGRyZW4ucmVkdWNlKHJlZHVjZXIsIFtdKV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHByZXY7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBlbGVtZW50ICYmIEFycmF5LmlzQXJyYXkoZWxlbWVudC5jaGlsZHJlbikgPyBlbGVtZW50LmNoaWxkcmVuLnJlZHVjZShyZWR1Y2VyLCBbXSkgOiBbXTsKICB9CiAgZnVuY3Rpb24gZmluZENoaWxkRWxlbWVudChlbGVtZW50LCBuYW1lLCBuZXN0ZWQgPSBmYWxzZSkgewogICAgcmV0dXJuIGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgbmFtZSwgbmVzdGVkKVswXSB8fCBudWxsOwogIH0KICBmdW5jdGlvbiBnZXRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCkgewogICAgcmV0dXJuIGVsZW1lbnQgJiYgQXJyYXkuaXNBcnJheShlbGVtZW50LmNoaWxkcmVuKSA/IFsKICAgICAgLi4uZWxlbWVudC5jaGlsZHJlbi5maWx0ZXIoCiAgICAgICAgKGVsKSA9PiBlbCBpbnN0YW5jZW9mIGJyb3dzZXIuWG1sRWxlbWVudAogICAgICApCiAgICBdIDogW107CiAgfQogIGZ1bmN0aW9uIGdldEVsZW1lbnRUZXh0KGVsZW1lbnQpIHsKICAgIGNvbnN0IHRleHROb2RlID0gZWxlbWVudCAmJiBBcnJheS5pc0FycmF5KGVsZW1lbnQuY2hpbGRyZW4pID8gZWxlbWVudC5jaGlsZHJlbi5maW5kKChub2RlKSA9PiBub2RlLnR5cGUgPT09ICJ0ZXh0IikgOiBudWxsOwogICAgcmV0dXJuIHRleHROb2RlID8gdGV4dE5vZGUudGV4dCA6ICIiOwogIH0KICBmdW5jdGlvbiBnZXRFbGVtZW50QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJOYW1lKSB7CiAgICByZXR1cm4gZWxlbWVudCAmJiBlbGVtZW50LmF0dHJpYnV0ZXNbYXR0ck5hbWVdIHx8ICIiOwogIH0KICBjbGFzcyBFbmRwb2ludEVycm9yIGV4dGVuZHMgRXJyb3IgewogICAgY29uc3RydWN0b3IobWVzc2FnZSwgaHR0cFN0YXR1cywgaXNDcm9zc09yaWdpblJlbGF0ZWQpIHsKICAgICAgc3VwZXIobWVzc2FnZSk7CiAgICAgIHRoaXMuaHR0cFN0YXR1cyA9IGh0dHBTdGF0dXM7CiAgICAgIHRoaXMuaXNDcm9zc09yaWdpblJlbGF0ZWQgPSBpc0Nyb3NzT3JpZ2luUmVsYXRlZDsKICAgICAgdGhpcy5uYW1lID0gIkVuZHBvaW50RXJyb3IiOwogICAgfQogIH0KICBjbGFzcyBTZXJ2aWNlRXhjZXB0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKiBAcGFyYW0gbWVzc2FnZSBFcnJvciBtZXNzYWdlCiAgICAgKiBAcGFyYW0gcmVxdWVzdFVybCBVUkwgd2hpY2ggcmVzdWx0ZWQgaW4gdGhlIFNlcnZpY2VFeGNlcHRpb24KICAgICAqIEBwYXJhbSBjb2RlIE9wdGlvbmFsIFNlcnZpY2VFeGNlcHRpb24gY29kZQogICAgICogQHBhcmFtIGxvY2F0b3IgT3B0aW9uYWwgU2VydmljZUV4Y2VwdGlvbiBsb2NhdG9yCiAgICAgKiBAcGFyYW0gcmVzcG9uc2UgT3B0aW9uYWwgcmVzcG9uc2UgY29udGVudCByZWNlaXZlZAogICAgICovCiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXF1ZXN0VXJsLCBjb2RlLCBsb2NhdG9yLCByZXNwb25zZSkgewogICAgICBzdXBlcihtZXNzYWdlKTsKICAgICAgdGhpcy5yZXF1ZXN0VXJsID0gcmVxdWVzdFVybDsKICAgICAgdGhpcy5jb2RlID0gY29kZTsKICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjsKICAgICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlOwogICAgICB0aGlzLm5hbWUgPSAiU2VydmljZUV4Y2VwdGlvbkVycm9yIjsKICAgIH0KICB9CiAgZnVuY3Rpb24gcGFyc2Uoc2VydmljZUV4Y2VwdGlvbiwgdXJsKSB7CiAgICBjb25zdCBlcnJvckNvZGUgPSBnZXRFbGVtZW50QXR0cmlidXRlKHNlcnZpY2VFeGNlcHRpb24sICJjb2RlIikgfHwgZ2V0RWxlbWVudEF0dHJpYnV0ZShzZXJ2aWNlRXhjZXB0aW9uLCAiZXhjZXB0aW9uQ29kZSIpOwogICAgY29uc3QgZXJyb3JMb2NhdG9yID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShzZXJ2aWNlRXhjZXB0aW9uLCAibG9jYXRvciIpOwogICAgY29uc3QgdGV4dEVsZW1lbnQgPSBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VFeGNlcHRpb24sICJFeGNlcHRpb25UZXh0IikgfHwgc2VydmljZUV4Y2VwdGlvbjsKICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGdldEVsZW1lbnRUZXh0KHRleHRFbGVtZW50KS50cmltKCk7CiAgICByZXR1cm4gbmV3IFNlcnZpY2VFeGNlcHRpb25FcnJvcigKICAgICAgZXJyb3JNZXNzYWdlLAogICAgICB1cmwsCiAgICAgIGVycm9yQ29kZSwKICAgICAgZXJyb3JMb2NhdG9yLAogICAgICBzZXJ2aWNlRXhjZXB0aW9uLmRvY3VtZW50CiAgICApOwogIH0KICBmdW5jdGlvbiBjaGVjayhyZXNwb25zZSwgdXJsKSB7CiAgICBjb25zdCByb290RWwgPSBnZXRSb290RWxlbWVudChyZXNwb25zZSk7CiAgICBjb25zdCByb290RWxOYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUocm9vdEVsKSk7CiAgICBpZiAocm9vdEVsTmFtZSA9PT0gIlNlcnZpY2VFeGNlcHRpb25SZXBvcnQiKSB7CiAgICAgIGNvbnN0IGVycm9yID0gZmluZENoaWxkRWxlbWVudChyb290RWwsICJTZXJ2aWNlRXhjZXB0aW9uIik7CiAgICAgIGlmIChlcnJvcikgewogICAgICAgIHRocm93IHBhcnNlKGVycm9yLCB1cmwpOwogICAgICB9CiAgICB9CiAgICBpZiAocm9vdEVsTmFtZSA9PT0gIkV4Y2VwdGlvblJlcG9ydCIpIHsKICAgICAgY29uc3QgZXJyb3IgPSBmaW5kQ2hpbGRFbGVtZW50KHJvb3RFbCwgIkV4Y2VwdGlvbiIpOwogICAgICBpZiAoZXJyb3IpIHsKICAgICAgICB0aHJvdyBwYXJzZShlcnJvciwgdXJsKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0KICBmdW5jdGlvbiBlbmNvZGVFcnJvcihlcnJvcikgewogICAgY29uc3QgYmFzZSA9IHsKICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLAogICAgICBuYW1lOiBlcnJvci5uYW1lCiAgICB9OwogICAgaWYgKGVycm9yIGluc3RhbmNlb2YgU2VydmljZUV4Y2VwdGlvbkVycm9yKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgLi4uYmFzZSwKICAgICAgICBjb2RlOiBlcnJvci5jb2RlLAogICAgICAgIGxvY2F0b3I6IGVycm9yLmxvY2F0b3IsCiAgICAgICAgcmVzcG9uc2U6IGVycm9yLnJlc3BvbnNlLAogICAgICAgIHJlcXVlc3RVcmw6IGVycm9yLnJlcXVlc3RVcmwKICAgICAgfTsKICAgIH0KICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVuZHBvaW50RXJyb3IpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5iYXNlLAogICAgICAgIGh0dHBTdGF0dXM6IGVycm9yLmh0dHBTdGF0dXMsCiAgICAgICAgaXNDcm9zc09yaWdpblJlbGF0ZWQ6IGVycm9yLmlzQ3Jvc3NPcmlnaW5SZWxhdGVkCiAgICAgIH07CiAgICB9CiAgICByZXR1cm4gYmFzZTsKICB9CiAgY29uc3QgZmFsbGJhY2tFdmVudFRhcmdldCA9IG5ldyBFdmVudFRhcmdldCgpOwogIGZ1bmN0aW9uIGFkZFRhc2tIYW5kbGVyKHRhc2tOYW1lLCBzY29wZSwgaGFuZGxlcikgewogICAgY29uc3QgdXNlV29ya2VyID0gdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAidW5kZWZpbmVkIjsKICAgIGNvbnN0IGV2ZW50SGFuZGxlciA9IGFzeW5jIChyZXF1ZXN0KSA9PiB7CiAgICAgIGlmIChyZXF1ZXN0LnRhc2tOYW1lID09PSB0YXNrTmFtZSkgewogICAgICAgIGxldCByZXNwb25zZSwgZXJyb3I7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJlc3BvbnNlID0gYXdhaXQgaGFuZGxlcihyZXF1ZXN0LnBhcmFtcyk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgZXJyb3IgPSBlbmNvZGVFcnJvcihlKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgbWVzc2FnZSA9ICgKICAgICAgICAgIC8qKiBAdHlwZSB7V29ya2VyUmVzcG9uc2V9ICovCiAgICAgICAgICB7CiAgICAgICAgICAgIHRhc2tOYW1lLAogICAgICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3QucmVxdWVzdElkLAogICAgICAgICAgICAuLi5yZXNwb25zZSAmJiB7IHJlc3BvbnNlIH0sCiAgICAgICAgICAgIC4uLmVycm9yICYmIHsgZXJyb3IgfQogICAgICAgICAgfQogICAgICAgICk7CiAgICAgICAgaWYgKHVzZVdvcmtlcikgewogICAgICAgICAgc2NvcGUucG9zdE1lc3NhZ2UobWVzc2FnZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZhbGxiYWNrRXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudCgKICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KCJvZ2MtY2xpZW50LnJlc3BvbnNlIiwgewogICAgICAgICAgICAgIGRldGFpbDogbWVzc2FnZQogICAgICAgICAgICB9KQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBpZiAodXNlV29ya2VyKSB7CiAgICAgIHNjb3BlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCAoZXZlbnQpID0+IGV2ZW50SGFuZGxlcihldmVudC5kYXRhKSk7CiAgICB9IGVsc2UgewogICAgICBmYWxsYmFja0V2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoCiAgICAgICAgIm9nYy1jbGllbnQucmVxdWVzdCIsCiAgICAgICAgKGV2ZW50KSA9PiBldmVudEhhbmRsZXIoZXZlbnQuZGV0YWlsKQogICAgICApOwogICAgfQogIH0KICBjb25zdCBFTkNPRElOR1MgPSBbInV0Zi04IiwgInV0Zi0xNiIsICJpc28tODg1OS0xIl07CiAgY29uc3QgRkFMTEJBQ0tfRU5DT0RJTkcgPSAidXRmLTgiOwogIGZ1bmN0aW9uIGV4dHJhY3RFbmNvZGluZyhjb250ZW50VHlwZSkgewogICAgY29uc3QgbWF0Y2hlcyA9IC9jaGFyc2V0PShbXjtdKykvLmV4ZWMoY29udGVudFR5cGUpOwogICAgcmV0dXJuIG1hdGNoZXMgPyBtYXRjaGVzWzFdIDogbnVsbDsKICB9CiAgZnVuY3Rpb24gZGVjb2RlU3RyaW5nKGJ1ZmZlciwgY29udGVudFR5cGUpIHsKICAgIGNvbnN0IGVuY29kaW5nSGludCA9IGNvbnRlbnRUeXBlID8gZXh0cmFjdEVuY29kaW5nKGNvbnRlbnRUeXBlKSA6IG51bGw7CiAgICBjb25zdCBlbmNvZGluZ0F0dGVtcHRzID0gZW5jb2RpbmdIaW50ID8gW2VuY29kaW5nSGludCwgLi4uRU5DT0RJTkdTXSA6IEVOQ09ESU5HUzsKICAgIGZvciAoY29uc3QgZW5jb2Rpbmcgb2YgZW5jb2RpbmdBdHRlbXB0cykgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmcsIHsgZmF0YWw6IHRydWUgfSk7CiAgICAgICAgcmV0dXJuIGRlY29kZXIuZGVjb2RlKGJ1ZmZlcik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgfQogICAgfQogICAgY29uc29sZS53YXJuKAogICAgICBgW29nYy1jbGllbnRdIFhNTCBkb2N1bWVudCBlbmNvZGluZyBjb3VsZCBub3QgYmUgZGV0ZXJtaW5lZCwgZmFsbGluZyBiYWNrIHRvICR7RkFMTEJBQ0tfRU5DT0RJTkd9LmAKICAgICk7CiAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKEZBTExCQUNLX0VOQ09ESU5HKS5kZWNvZGUoYnVmZmVyKTsKICB9CiAgY29uc3QgZmV0Y2hQcm9taXNlcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgbGV0IGZldGNoT3B0aW9ucyA9IHt9OwogIGZ1bmN0aW9uIHNldEZldGNoT3B0aW9ucyhvcHRpb25zKSB7CiAgICBmZXRjaE9wdGlvbnMgPSBvcHRpb25zOwogIH0KICBmdW5jdGlvbiBnZXRGZXRjaE9wdGlvbnMoKSB7CiAgICByZXR1cm4gZmV0Y2hPcHRpb25zOwogIH0KICBmdW5jdGlvbiBzaGFyZWRGZXRjaCh1cmwsIG1ldGhvZCA9ICJHRVQiLCBhc0pzb24sIGN1c3RvbUFjY2VwdEhlYWRlcikgewogICAgbGV0IGZldGNoS2V5ID0gYCR7bWV0aG9kfSMke3VybH1gOwogICAgaWYgKGFzSnNvbiB8fCBjdXN0b21BY2NlcHRIZWFkZXIpIHsKICAgICAgZmV0Y2hLZXkgPSBgJHttZXRob2R9I2FzSnNvbiMke3VybH1gOwogICAgfQogICAgaWYgKGZldGNoUHJvbWlzZXMuaGFzKGZldGNoS2V5KSkgewogICAgICByZXR1cm4gZmV0Y2hQcm9taXNlcy5nZXQoZmV0Y2hLZXkpOwogICAgfQogICAgY29uc3Qgb3B0aW9ucyA9IHsgLi4uZ2V0RmV0Y2hPcHRpb25zKCkgfTsKICAgIG9wdGlvbnMubWV0aG9kID0gbWV0aG9kOwogICAgaWYgKGN1c3RvbUFjY2VwdEhlYWRlcikgewogICAgICBvcHRpb25zLmhlYWRlcnMgPSAiaGVhZGVycyIgaW4gb3B0aW9ucyA/IG9wdGlvbnMuaGVhZGVycyA6IHt9OwogICAgICBvcHRpb25zLmhlYWRlcnNbIkFjY2VwdCJdID0gY3VzdG9tQWNjZXB0SGVhZGVyOwogICAgfSBlbHNlIGlmIChhc0pzb24pIHsKICAgICAgb3B0aW9ucy5oZWFkZXJzID0gImhlYWRlcnMiIGluIG9wdGlvbnMgPyBvcHRpb25zLmhlYWRlcnMgOiB7fTsKICAgICAgb3B0aW9ucy5oZWFkZXJzWyJBY2NlcHQiXSA9ICJhcHBsaWNhdGlvbi9qc29uLGFwcGxpY2F0aW9uL3NjaGVtYStqc29uIjsKICAgIH0KICAgIGNvbnN0IHByb21pc2UgPSBmZXRjaCh1cmwsIG9wdGlvbnMpLmNhdGNoKChlKSA9PiBlKS50aGVuKChyZXNwKSA9PiB7CiAgICAgIGZldGNoUHJvbWlzZXMuZGVsZXRlKGZldGNoS2V5KTsKICAgICAgcmV0dXJuIHJlc3A7CiAgICB9KTsKICAgIGZldGNoUHJvbWlzZXMuc2V0KGZldGNoS2V5LCBwcm9taXNlKTsKICAgIHJldHVybiBwcm9taXNlLnRoZW4oKHJlc3ApID0+IHsKICAgICAgaWYgKHJlc3AgaW5zdGFuY2VvZiBFcnJvcikKICAgICAgICB0aHJvdyByZXNwOwogICAgICByZXR1cm4gcmVzcC5jbG9uZSgpOwogICAgfSk7CiAgfQogIGZ1bmN0aW9uIHF1ZXJ5WG1sRG9jdW1lbnQodXJsKSB7CiAgICByZXR1cm4gc2hhcmVkRmV0Y2godXJsKS5jYXRjaCgKICAgICAgKCkgPT4gKAogICAgICAgIC8vIGF0dGVtcHQgYSBIRUFEIHRvIHNlZSBpZiB0aGUgZmFpbHVyZSBjb21lcyBmcm9tIENPUlMgb3IgdGhlIHNlcnZpY2UgaXMgZ2VuZXJhbGx5IHVucmVhY2hhYmxlCiAgICAgICAgZmV0Y2godXJsLCB7IC4uLmdldEZldGNoT3B0aW9ucygpLCBtZXRob2Q6ICJIRUFEIiwgbW9kZTogIm5vLWNvcnMiIH0pLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhyb3cgbmV3IEVuZHBvaW50RXJyb3IoCiAgICAgICAgICAgIGBGZXRjaGluZyB0aGUgZG9jdW1lbnQgZmFpbGVkIGVpdGhlciBkdWUgdG8gbmV0d29yayBlcnJvcnMgb3IgdW5yZWFjaGFibGUgaG9zdCwgZXJyb3IgaXM6ICR7ZXJyb3IubWVzc2FnZX1gLAogICAgICAgICAgICAwLAogICAgICAgICAgICBmYWxzZQogICAgICAgICAgKTsKICAgICAgICB9KS50aGVuKCgpID0+IHsKICAgICAgICAgIHRocm93IG5ldyBFbmRwb2ludEVycm9yKAogICAgICAgICAgICBgVGhlIGRvY3VtZW50IGNvdWxkIG5vdCBiZSBmZXRjaGVkIGR1ZSB0byBDT1JTIGxpbWl0YXRpb25zYCwKICAgICAgICAgICAgMCwKICAgICAgICAgICAgdHJ1ZQogICAgICAgICAgKTsKICAgICAgICB9KQogICAgICApCiAgICApLnRoZW4oYXN5bmMgKHJlc3ApID0+IHsKICAgICAgaWYgKCFyZXNwLm9rKSB7CiAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3AudGV4dCgpOwogICAgICAgIHRocm93IG5ldyBFbmRwb2ludEVycm9yKAogICAgICAgICAgYFJlY2VpdmVkIGFuIGVycm9yIHdpdGggY29kZSAke3Jlc3Auc3RhdHVzfTogJHt0ZXh0fWAsCiAgICAgICAgICByZXNwLnN0YXR1cywKICAgICAgICAgIGZhbHNlCiAgICAgICAgKTsKICAgICAgfQogICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCByZXNwLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlSGVhZGVyID0gcmVzcC5oZWFkZXJzLmdldCgiQ29udGVudC1UeXBlIik7CiAgICAgIHJldHVybiBkZWNvZGVTdHJpbmcoYnVmZmVyLCBjb250ZW50VHlwZUhlYWRlcik7CiAgICB9KS50aGVuKCh4bWwpID0+IHBhcnNlWG1sU3RyaW5nKHhtbCkpOwogIH0KICBmdW5jdGlvbiBzZXRRdWVyeVBhcmFtcyh1cmwsIHBhcmFtcykgewogICAgY29uc3QgZW5jb2RlZFVybE1hdGNoID0gdXJsLm1hdGNoKC8oaHR0cHM/JTNBJTJGJTJGW14vXSspJC8pOwogICAgaWYgKGVuY29kZWRVcmxNYXRjaCkgewogICAgICBjb25zdCBlbmNvZGVkVXJsID0gZW5jb2RlZFVybE1hdGNoWzFdOwogICAgICBjb25zdCBtb2RpZmllZFVybCA9IHNldFF1ZXJ5UGFyYW1zKGRlY29kZVVSSUNvbXBvbmVudChlbmNvZGVkVXJsKSwgcGFyYW1zKTsKICAgICAgcmV0dXJuIHVybC5yZXBsYWNlKGVuY29kZWRVcmwsIGVuY29kZVVSSUNvbXBvbmVudChtb2RpZmllZFVybCkpOwogICAgfQogICAgY29uc3QgdXJsT2JqID0gbmV3IFVSTCh1cmwpOwogICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHBhcmFtcyk7CiAgICBjb25zdCBrZXlzTG93ZXIgPSBrZXlzLm1hcCgoa2V5KSA9PiBrZXkudG9Mb3dlckNhc2UoKSk7CiAgICBjb25zdCB0b0RlbGV0ZSA9IFtdOwogICAgZm9yIChjb25zdCBwYXJhbSBvZiB1cmxPYmouc2VhcmNoUGFyYW1zLmtleXMoKSkgewogICAgICBpZiAoa2V5c0xvd2VyLmluZGV4T2YocGFyYW0udG9Mb3dlckNhc2UoKSkgPiAtMSkgewogICAgICAgIHRvRGVsZXRlLnB1c2gocGFyYW0pOwogICAgICB9CiAgICB9CiAgICB0b0RlbGV0ZS5tYXAoKHBhcmFtKSA9PiB1cmxPYmouc2VhcmNoUGFyYW1zLmRlbGV0ZShwYXJhbSkpOwogICAga2V5cy5mb3JFYWNoKAogICAgICAoa2V5KSA9PiB1cmxPYmouc2VhcmNoUGFyYW1zLnNldCgKICAgICAgICBrZXksCiAgICAgICAgcGFyYW1zW2tleV0gPT09IHRydWUgPyAiIiA6IHBhcmFtc1trZXldCiAgICAgICkKICAgICk7CiAgICB1cmxPYmouc2VhcmNoID0gdXJsT2JqLnNlYXJjaC5yZXBsYWNlKC9cKy9nLCAiJTIwIik7CiAgICByZXR1cm4gdXJsT2JqLnRvU3RyaW5nKCk7CiAgfQogIGNvbnN0IExhdExvbkNyc0xpc3QgPSBbCiAgICAiRVBTRzo0MDQ2IiwKICAgIC8vIFJHUkRDIDIwMDUKICAgICJFUFNHOjQwNzUiLAogICAgLy8gU1JFRjk4CiAgICAiRVBTRzo0MTIwIiwKICAgIC8vIEdyZWVrCiAgICAiRVBTRzo0MTIyIiwKICAgIC8vIEFUUzc3CiAgICAiRVBTRzo0MTI0IiwKICAgIC8vIFJUOTAKICAgICJFUFNHOjQxMjYiLAogICAgLy8gTEtTOTQgKEVUUlM4OSkKICAgICJFUFNHOjQxNDkiLAogICAgLy8gQ0gxOTAzCiAgICAiRVBTRzo0MTUxIiwKICAgIC8vIENIVFJGOTUKICAgICJFUFNHOjQxNTMiLAogICAgLy8gUmFzc2FkaXJhbgogICAgIkVQU0c6NDE1NSIsCiAgICAvLyBEYWJvbGEgMTk4MQogICAgIkVQU0c6NDE1NyIsCiAgICAvLyBNb3VudCBEaWxsb24KICAgICJFUFNHOjQxNTkiLAogICAgLy8gRUxENzkKICAgICJFUFNHOjQxNjEiLAogICAgLy8gUGFtcGEgZGVsIENhc3RpbGxvCiAgICAiRVBTRzo0MTYzIiwKICAgIC8vIFllbWVuIE5HTjk2CiAgICAiRVBTRzo0MTY1IiwKICAgIC8vIEJpc3NhdQogICAgIkVQU0c6NDE2NyIsCiAgICAvLyBOWkdEMjAwMAogICAgIkVQU0c6NDE2OSIsCiAgICAvLyBBbWVyaWNhbiBTYW1vYSAxOTYyCiAgICAiRVBTRzo0MTcxIiwKICAgIC8vIFJHRjkzCiAgICAiRVBTRzo0MTczIiwKICAgIC8vIElSRU5FVDk1CiAgICAiRVBTRzo0MTc1IiwKICAgIC8vIFNpZXJyYSBMZW9uZSAxOTY4CiAgICAiRVBTRzo0MTc4IiwKICAgIC8vIFB1bGtvdm8gMTk0Mig4MykKICAgICJFUFNHOjQxODAiLAogICAgLy8gRVNUOTcKICAgICJFUFNHOjQxODIiLAogICAgLy8gQXpvcmVzIE9jY2lkZW50YWwgMTkzOQogICAgIkVQU0c6NDE4NCIsCiAgICAvLyBBem9yZXMgT3JpZW50YWwgMTk0MAogICAgIkVQU0c6NDE4OCIsCiAgICAvLyBPU05JIDE5NTIKICAgICJFUFNHOjQxOTAiLAogICAgLy8gUE9TR0FSIDk4CiAgICAiRVBTRzo0MTkxIiwKICAgIC8vIEFsYmFuaWFuIDE5ODcKICAgICJFUFNHOjQxOTYiLAogICAgLy8gQW1tYXNzYWxpayAxOTU4CiAgICAiRVBTRzo0MTk4IiwKICAgIC8vIEtvdXNzZXJpCiAgICAiRVBTRzo0MjAyIiwKICAgIC8vIEFHRDY2CiAgICAiRVBTRzo0MjEwIiwKICAgIC8vIEFyYyAxOTYwCiAgICAiRVBTRzo0MjExIiwKICAgIC8vIEJhdGF2aWEKICAgICJFUFNHOjQyMTQiLAogICAgLy8gQmVpamluZyAxOTU0CiAgICAiRVBTRzo0MjI2IiwKICAgIC8vIENvdGUgZCdJdm9pcmUKICAgICJFUFNHOjQyMjkiLAogICAgLy8gRWd5cHQgMTkwNwogICAgIkVQU0c6NDIzMSIsCiAgICAvLyBFRDg3CiAgICAiRVBTRzo0MjMzIiwKICAgIC8vIEdhbmRhamlrYSAxOTcwCiAgICAiRVBTRzo0MjM2IiwKICAgIC8vIEh1IFR6dSBTaGFuIDE5NTAKICAgICJFUFNHOjQyMzgiLAogICAgLy8gSUQ3NAogICAgIkVQU0c6NDI0MCIsCiAgICAvLyBJbmRpYW4gMTk3NQogICAgIkVQU0c6NDI0MiIsCiAgICAvLyBKQUQ2OQogICAgIkVQU0c6NDI0NCIsCiAgICAvLyBLYW5kYXdhbGEKICAgICJFUFNHOjQyNDYiLAogICAgLy8gS09DCiAgICAiRVBTRzo0MjQ4IiwKICAgIC8vIFBTQUQ1NgogICAgIkVQU0c6NDI1MCIsCiAgICAvLyBMZWlnb24KICAgICJFUFNHOjQyNTIiLAogICAgLy8gTG9tZQogICAgIkVQU0c6NDI1NSIsCiAgICAvLyBIZXJhdCBOb3J0aAogICAgIkVQU0c6NDI1OCIsCiAgICAvLyBFVFJTODkKICAgICJFUFNHOjQyNjEiLAogICAgLy8gTWVyY2hpY2gKICAgICJFUFNHOjQyNjQiLAogICAgLy8gTWhhc3QKICAgICJFUFNHOjQyNjciLAogICAgLy8gTkFEMjcKICAgICJFUFNHOjQyNzAiLAogICAgLy8gTmFocndhbiAxOTY3CiAgICAiRVBTRzo0MjczIiwKICAgIC8vIE5HTyAxOTQ4CiAgICAiRVBTRzo0Mjc2IiwKICAgIC8vIE5TV0MgOVotMgogICAgIkVQU0c6NDI3OSIsCiAgICAvLyBPUyhTTik4MAogICAgIkVQU0c6NDI4MSIsCiAgICAvLyBQYWxlc3RpbmUgMTkyMwogICAgIkVQU0c6NDI4NCIsCiAgICAvLyBQdWxrb3ZvIDE5NDIKICAgICJFUFNHOjQyODYiLAogICAgLy8gUWF0YXIgMTk0OAogICAgIkVQU0c6NDI4OCIsCiAgICAvLyBMb21hIFF1aW50YW5hCiAgICAiRVBTRzo0MjkyIiwKICAgIC8vIFNhcHBlciBIaWxsIDE5NDMKICAgICJFUFNHOjQyOTUiLAogICAgLy8gU2VyaW5kdW5nCiAgICAiRVBTRzo0Mjk3IiwKICAgIC8vIFRhbmFuYXJpdmUKICAgICJFUFNHOjQyOTkiLAogICAgLy8gVE02NQogICAgIkVQU0c6NDMwMiIsCiAgICAvLyBUcmluaWRhZCAxOTAzCiAgICAiRVBTRzo0MzI0IiwKICAgIC8vIFdHUyA3MkJFCiAgICAiRVBTRzo0MzI2IgogICAgLy8gV0dTIDg0CiAgXTsKICBmdW5jdGlvbiBoYXNJbnZlcnRlZENvb3JkaW5hdGVzKGNyc05hbWUpIHsKICAgIHJldHVybiBMYXRMb25DcnNMaXN0LmluZGV4T2Yoc2ltcGxpZnlFcHNnVXJuKGNyc05hbWUpKSA+IC0xOwogIH0KICBmdW5jdGlvbiBzaW1wbGlmeUVwc2dVcm4oZnVsbENyc05hbWUpIHsKICAgIGlmICgvXnVybjooPzp4LSk/b2djOmRlZjpjcnM6ZXBzZzovLnRlc3QoZnVsbENyc05hbWUudG9Mb3dlckNhc2UoKSkpIHsKICAgICAgY29uc3QgY29kZSA9IC8oWzAtOV0rKSQvLmV4ZWMoZnVsbENyc05hbWUpWzFdOwogICAgICByZXR1cm4gYEVQU0c6JHtjb2RlfWA7CiAgICB9CiAgICByZXR1cm4gZnVsbENyc05hbWU7CiAgfQogIGZ1bmN0aW9uIHJlYWRPcGVyYXRpb25VcmxzRnJvbUNhcGFiaWxpdGllcyQxKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3QgdXJscyA9IHt9OwogICAgY29uc3QgY2FwYWJpbGl0eSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJDYXBhYmlsaXR5IgogICAgKTsKICAgIGNvbnN0IHJlcXVlc3QgPSBmaW5kQ2hpbGRFbGVtZW50KGNhcGFiaWxpdHksICJSZXF1ZXN0Iik7CiAgICBnZXRDaGlsZHJlbkVsZW1lbnQocmVxdWVzdCkuZm9yRWFjaCgob3BlcmF0aW9uKSA9PiB7CiAgICAgIGNvbnN0IG9wZXJhdGlvbk5hbWUgPSBzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShvcGVyYXRpb24pKTsKICAgICAgdXJsc1tvcGVyYXRpb25OYW1lXSA9IHBhcnNlT3BlcmF0aW9uKG9wZXJhdGlvbik7CiAgICB9KTsKICAgIHJldHVybiB1cmxzOwogIH0KICBmdW5jdGlvbiByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpIHsKICAgIHJldHVybiBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLmF0dHJpYnV0ZXNbInZlcnNpb24iXTsKICB9CiAgZnVuY3Rpb24gcmVhZExheWVyc0Zyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHZlcnNpb24gPSByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3QgY2FwYWJpbGl0eSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJDYXBhYmlsaXR5IgogICAgKTsKICAgIHJldHVybiBmaW5kQ2hpbGRyZW5FbGVtZW50KGNhcGFiaWxpdHksICJMYXllciIpLm1hcCgKICAgICAgKGxheWVyRWwpID0+IHBhcnNlTGF5ZXIobGF5ZXJFbCwgdmVyc2lvbikKICAgICk7CiAgfQogIGZ1bmN0aW9uIHJlYWRPdXRwdXRGb3JtYXRzRnJvbUNhcGFiaWxpdGllcyQxKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3QgY2FwYWJpbGl0eSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJDYXBhYmlsaXR5IgogICAgKTsKICAgIGNvbnN0IGdldE1hcCA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY2FwYWJpbGl0eSwgIlJlcXVlc3QiKSwKICAgICAgIkdldE1hcCIKICAgICk7CiAgICBjb25zdCBvdXRwdXRGb3JtYXRzID0gZmluZENoaWxkcmVuRWxlbWVudChnZXRNYXAsICJGb3JtYXQiKS5tYXAoCiAgICAgIGdldEVsZW1lbnRUZXh0CiAgICApOwogICAgcmV0dXJuIG91dHB1dEZvcm1hdHM7CiAgfQogIGZ1bmN0aW9uIHJlYWRJbmZvRm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCBjYXBhYmlsaXR5ID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgIkNhcGFiaWxpdHkiCiAgICApOwogICAgY29uc3QgZ2V0RmVhdHVyZUluZm8gPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KGNhcGFiaWxpdHksICJSZXF1ZXN0IiksCiAgICAgICJHZXRGZWF0dXJlSW5mbyIKICAgICk7CiAgICBjb25zdCBvdXRwdXRGb3JtYXRzID0gZmluZENoaWxkcmVuRWxlbWVudChnZXRGZWF0dXJlSW5mbywgIkZvcm1hdCIpLm1hcCgKICAgICAgZ2V0RWxlbWVudFRleHQKICAgICk7CiAgICByZXR1cm4gb3V0cHV0Rm9ybWF0czsKICB9CiAgZnVuY3Rpb24gcmVhZEV4Y2VwdGlvbkZvcm1hdHNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3QgY2FwYWJpbGl0eSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJDYXBhYmlsaXR5IgogICAgKTsKICAgIGNvbnN0IGV4Y2VwdGlvbiA9IGZpbmRDaGlsZEVsZW1lbnQoY2FwYWJpbGl0eSwgIkV4Y2VwdGlvbiIpOwogICAgY29uc3QgZXhjZXB0aW9uRm9ybWF0cyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZXhjZXB0aW9uLCAiRm9ybWF0IikubWFwKAogICAgICBnZXRFbGVtZW50VGV4dAogICAgKTsKICAgIHJldHVybiBleGNlcHRpb25Gb3JtYXRzOwogIH0KICBmdW5jdGlvbiByZWFkSW5mb0Zyb21DYXBhYmlsaXRpZXMkMihjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHNlcnZpY2UgPSBmaW5kQ2hpbGRFbGVtZW50KGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksICJTZXJ2aWNlIik7CiAgICBjb25zdCBvdXRwdXRGb3JtYXRzID0gcmVhZE91dHB1dEZvcm1hdHNGcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IGluZm9Gb3JtYXRzID0gcmVhZEluZm9Gb3JtYXRzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3QgZXhjZXB0aW9uRm9ybWF0cyA9IHJlYWRFeGNlcHRpb25Gb3JtYXRzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3Qga2V5d29yZHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJLZXl3b3JkTGlzdCIpLAogICAgICAiS2V5d29yZCIKICAgICkubWFwKGdldEVsZW1lbnRUZXh0KS5maWx0ZXIoKHYsIGksIGFycikgPT4gYXJyLmluZGV4T2YodikgPT09IGkpOwogICAgY29uc3QgcHJvdmlkZXIgPSByZWFkUHJvdmlkZXJGcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKTsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJUaXRsZSIpKSwKICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiTmFtZSIpKSwKICAgICAgYWJzdHJhY3Q6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkFic3RyYWN0IikpLAogICAgICBvdXRwdXRGb3JtYXRzLAogICAgICBpbmZvRm9ybWF0cywKICAgICAgZXhjZXB0aW9uRm9ybWF0cywKICAgICAgZmVlczogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiRmVlcyIpKSwKICAgICAgY29uc3RyYWludHM6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkFjY2Vzc0NvbnN0cmFpbnRzIikpLAogICAgICBwcm92aWRlciwKICAgICAga2V5d29yZHMKICAgIH07CiAgfQogIGZ1bmN0aW9uIHBhcnNlT3BlcmF0aW9uKG9wZXJhdGlvbikgewogICAgY29uc3QgdXJscyA9IHt9OwogICAgY29uc3QgZGNwVHlwZSA9IGZpbmRDaGlsZHJlbkVsZW1lbnQob3BlcmF0aW9uLCAiRENQVHlwZSIpOwogICAgY29uc3QgaHR0cCA9IGRjcFR5cGUuZmxhdE1hcCgoZCkgPT4gZmluZENoaWxkRWxlbWVudChkLCAiSFRUUCIpKTsKICAgIGNvbnN0IG1ldGhvZHMgPSBodHRwLmZsYXRNYXAoKGgpID0+IGdldENoaWxkcmVuRWxlbWVudChoKSk7CiAgICBtZXRob2RzLmZvckVhY2goKG1ldGhvZCkgPT4gewogICAgICBjb25zdCBvbmxpbmVSZXNvdXJjZSA9IGZpbmRDaGlsZEVsZW1lbnQobWV0aG9kLCAiT25saW5lUmVzb3VyY2UiKTsKICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IHN0cmlwTmFtZXNwYWNlKGdldEVsZW1lbnROYW1lKG1ldGhvZCkpOwogICAgICB1cmxzW21ldGhvZE5hbWVdID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShvbmxpbmVSZXNvdXJjZSwgInhsaW5rOmhyZWYiKTsKICAgIH0pOwogICAgcmV0dXJuIHVybHM7CiAgfQogIGZ1bmN0aW9uIHBhcnNlTGF5ZXIobGF5ZXJFbCwgdmVyc2lvbiwgaW5oZXJpdGVkU3JzID0gW10sIGluaGVyaXRlZFN0eWxlcyA9IFtdLCBpbmhlcml0ZWRBdHRyaWJ1dGlvbiA9IG51bGwsIGluaGVyaXRlZEJvdW5kaW5nQm94ZXMgPSBudWxsLCBpbmhlcml0ZWRNYXhTY2FsZURlbm9tID0gbnVsbCwgaW5oZXJpdGVkTWluU2NhbGVEZW5vbSA9IG51bGwpIHsKICAgIGNvbnN0IHNyc1RhZyA9IHZlcnNpb24gPT09ICIxLjMuMCIgPyAiQ1JTIiA6ICJTUlMiOwogICAgY29uc3Qgc3JzTGlzdCA9IGZpbmRDaGlsZHJlbkVsZW1lbnQobGF5ZXJFbCwgc3JzVGFnKS5tYXAoZ2V0RWxlbWVudFRleHQpOwogICAgY29uc3QgYXZhaWxhYmxlQ3JzID0gc3JzTGlzdC5sZW5ndGggPiAwID8gc3JzTGlzdCA6IGluaGVyaXRlZFNyczsKICAgIGNvbnN0IGxheWVyU3R5bGVzID0gZmluZENoaWxkcmVuRWxlbWVudChsYXllckVsLCAiU3R5bGUiKS5tYXAoCiAgICAgIHBhcnNlTGF5ZXJTdHlsZQogICAgKTsKICAgIGNvbnN0IHN0eWxlcyA9IGxheWVyU3R5bGVzLmxlbmd0aCA+IDAgPyBsYXllclN0eWxlcyA6IGluaGVyaXRlZFN0eWxlczsKICAgIGZ1bmN0aW9uIHBhcnNlQkJveDIoYmJveEVsKSB7CiAgICAgIGNvbnN0IHNycyA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoYmJveEVsLCBzcnNUYWcpOwogICAgICBjb25zdCBhdHRycyA9IGhhc0ludmVydGVkQ29vcmRpbmF0ZXMoc3JzKSAmJiB2ZXJzaW9uID09PSAiMS4zLjAiID8gWyJtaW55IiwgIm1pbngiLCAibWF4eSIsICJtYXh4Il0gOiBbIm1pbngiLCAibWlueSIsICJtYXh4IiwgIm1heHkiXTsKICAgICAgcmV0dXJuIGF0dHJzLm1hcCgobmFtZSkgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShiYm94RWwsIG5hbWUpKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlRXhHZW9ncmFwaGljQm91bmRpbmdCb3goYmJveEVsKSB7CiAgICAgIHJldHVybiBbCiAgICAgICAgIndlc3RCb3VuZExvbmdpdHVkZSIsCiAgICAgICAgInNvdXRoQm91bmRMYXRpdHVkZSIsCiAgICAgICAgImVhc3RCb3VuZExvbmdpdHVkZSIsCiAgICAgICAgIm5vcnRoQm91bmRMYXRpdHVkZSIKICAgICAgXS5tYXAoKG5hbWUpID0+IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYmJveEVsLCBuYW1lKSkpOwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VMYXRMb25Cb3VuZGluZ0JveChiYm94RWwpIHsKICAgICAgcmV0dXJuIFsibWlueCIsICJtaW55IiwgIm1heHgiLCAibWF4eSJdLm1hcCgKICAgICAgICAobmFtZSkgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShiYm94RWwsIG5hbWUpCiAgICAgICk7CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZVNjYWxlSGludFZhbHVlKHRleHRWYWx1ZSwgZGVmYXVsdFZhbHVlKSB7CiAgICAgIGlmICh0ZXh0VmFsdWUgPT09ICIiKSB7CiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTsKICAgICAgfQogICAgICByZXR1cm4gTWF0aC5zcXJ0KDAuNSAqIHBhcnNlRmxvYXQodGV4dFZhbHVlKSAqKiAyKSAvIDI4ZS01OwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VTY2FsZUhpbnQoKSB7CiAgICAgIGNvbnN0IHNjYWxlSGludCA9IGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgIlNjYWxlSGludCIpOwogICAgICBpZiAoIXNjYWxlSGludCkgewogICAgICAgIHJldHVybiBbaW5oZXJpdGVkTWluU2NhbGVEZW5vbSwgaW5oZXJpdGVkTWF4U2NhbGVEZW5vbV07CiAgICAgIH0KICAgICAgY29uc3QgbWluID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShzY2FsZUhpbnQsICJtaW4iKTsKICAgICAgY29uc3QgbWF4ID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShzY2FsZUhpbnQsICJtYXgiKTsKICAgICAgcmV0dXJuIFsKICAgICAgICBwYXJzZVNjYWxlSGludFZhbHVlKG1pbiwgaW5oZXJpdGVkTWluU2NhbGVEZW5vbSksCiAgICAgICAgcGFyc2VTY2FsZUhpbnRWYWx1ZShtYXgsIGluaGVyaXRlZE1heFNjYWxlRGVub20pCiAgICAgIF07CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZVNjYWxlRGVub21pbmF0b3IobmFtZSwgaW5oZXJpdGVkVmFsdWUpIHsKICAgICAgY29uc3QgdGV4dFZhbHVlID0gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChsYXllckVsLCBuYW1lKSk7CiAgICAgIHJldHVybiB0ZXh0VmFsdWUgPT09ICIiID8gaW5oZXJpdGVkVmFsdWUgOiBwYXJzZUZsb2F0KHRleHRWYWx1ZSk7CiAgICB9CiAgICBjb25zdCBhdHRyaWJ1dGlvbkVsID0gZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiQXR0cmlidXRpb24iKTsKICAgIGNvbnN0IGF0dHJpYnV0aW9uID0gYXR0cmlidXRpb25FbCAhPT0gbnVsbCA/IHBhcnNlTGF5ZXJBdHRyaWJ1dGlvbihhdHRyaWJ1dGlvbkVsKSA6IGluaGVyaXRlZEF0dHJpYnV0aW9uOwogICAgY29uc3QgbGF0TG9uQmJveEVsID0gdmVyc2lvbiA9PT0gIjEuMy4wIiA/IGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgIkVYX0dlb2dyYXBoaWNCb3VuZGluZ0JveCIpIDogZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiTGF0TG9uQm91bmRpbmdCb3giKTsKICAgIGNvbnN0IGJhc2VCb3VuZGluZ0JveCA9IHt9OwogICAgaWYgKGxhdExvbkJib3hFbCkgewogICAgICBiYXNlQm91bmRpbmdCb3hbIkVQU0c6NDMyNiJdID0gdmVyc2lvbiA9PT0gIjEuMy4wIiA/IHBhcnNlRXhHZW9ncmFwaGljQm91bmRpbmdCb3gobGF0TG9uQmJveEVsKSA6IHBhcnNlTGF0TG9uQm91bmRpbmdCb3gobGF0TG9uQmJveEVsKTsKICAgIH0KICAgIGxldCBib3VuZGluZ0JveGVzID0gZmluZENoaWxkcmVuRWxlbWVudChsYXllckVsLCAiQm91bmRpbmdCb3giKS5yZWR1Y2UoCiAgICAgIChwcmV2LCBiYm94RWwpID0+ICh7CiAgICAgICAgLi4ucHJldiwKICAgICAgICBbZ2V0RWxlbWVudEF0dHJpYnV0ZShiYm94RWwsIHNyc1RhZyldOiBwYXJzZUJCb3gyKGJib3hFbCkKICAgICAgfSksCiAgICAgIGJhc2VCb3VuZGluZ0JveAogICAgKTsKICAgIGJvdW5kaW5nQm94ZXMgPSBPYmplY3Qua2V5cyhib3VuZGluZ0JveGVzKS5sZW5ndGggPiAwIHx8IGluaGVyaXRlZEJvdW5kaW5nQm94ZXMgPT09IG51bGwgPyBib3VuZGluZ0JveGVzIDogaW5oZXJpdGVkQm91bmRpbmdCb3hlczsKICAgIGNvbnN0IHF1ZXJ5YWJsZSA9IGxheWVyRWwuYXR0cmlidXRlcy5xdWVyeWFibGUgPT09ICIxIiB8fCBsYXllckVsLmF0dHJpYnV0ZXMucXVlcnlhYmxlID09PSAidHJ1ZSIgPyB0cnVlIDogZmFsc2U7CiAgICBjb25zdCBvcGFxdWUgPSBsYXllckVsLmF0dHJpYnV0ZXMub3BhcXVlID09PSAiMSIgfHwgbGF5ZXJFbC5hdHRyaWJ1dGVzLm9wYXF1ZSA9PT0gInRydWUiID8gdHJ1ZSA6IGZhbHNlOwogICAgY29uc3Qga2V5d29yZHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsICJLZXl3b3JkTGlzdCIpLAogICAgICAiS2V5d29yZCIKICAgICkubWFwKGdldEVsZW1lbnRUZXh0KS5maWx0ZXIoKHYsIGksIGFycikgPT4gYXJyLmluZGV4T2YodikgPT09IGkpOwogICAgbGV0IG1pblNjYWxlRGVub21pbmF0b3IsIG1heFNjYWxlRGVub21pbmF0b3I7CiAgICBpZiAodmVyc2lvbiA9PT0gIjEuMy4wIikgewogICAgICBtaW5TY2FsZURlbm9taW5hdG9yID0gcGFyc2VTY2FsZURlbm9taW5hdG9yKAogICAgICAgICJNaW5TY2FsZURlbm9taW5hdG9yIiwKICAgICAgICBpbmhlcml0ZWRNaW5TY2FsZURlbm9tCiAgICAgICk7CiAgICAgIG1heFNjYWxlRGVub21pbmF0b3IgPSBwYXJzZVNjYWxlRGVub21pbmF0b3IoCiAgICAgICAgIk1heFNjYWxlRGVub21pbmF0b3IiLAogICAgICAgIGluaGVyaXRlZE1heFNjYWxlRGVub20KICAgICAgKTsKICAgIH0gZWxzZSB7CiAgICAgIFttaW5TY2FsZURlbm9taW5hdG9yLCBtYXhTY2FsZURlbm9taW5hdG9yXSA9IHBhcnNlU2NhbGVIaW50KCk7CiAgICB9CiAgICBjb25zdCBtZXRhZGF0YSA9IGZpbmRDaGlsZHJlbkVsZW1lbnQobGF5ZXJFbCwgIk1ldGFkYXRhVVJMIikubWFwKAogICAgICAobWV0YWRhdGFVcmxFbCkgPT4gKHsKICAgICAgICB0eXBlOiBnZXRFbGVtZW50QXR0cmlidXRlKG1ldGFkYXRhVXJsRWwsICJ0eXBlIiksCiAgICAgICAgZm9ybWF0OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KG1ldGFkYXRhVXJsRWwsICJGb3JtYXQiKSksCiAgICAgICAgdXJsOiBnZXRFbGVtZW50QXR0cmlidXRlKAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChtZXRhZGF0YVVybEVsLCAiT25saW5lUmVzb3VyY2UiKSwKICAgICAgICAgICJ4bGluazpocmVmIgogICAgICAgICkKICAgICAgfSkKICAgICk7CiAgICBjb25zdCBjaGlsZHJlbiA9IGZpbmRDaGlsZHJlbkVsZW1lbnQobGF5ZXJFbCwgIkxheWVyIikubWFwKAogICAgICAobGF5ZXIpID0+IHBhcnNlTGF5ZXIoCiAgICAgICAgbGF5ZXIsCiAgICAgICAgdmVyc2lvbiwKICAgICAgICBhdmFpbGFibGVDcnMsCiAgICAgICAgc3R5bGVzLAogICAgICAgIGF0dHJpYnV0aW9uLAogICAgICAgIGJvdW5kaW5nQm94ZXMsCiAgICAgICAgbWF4U2NhbGVEZW5vbWluYXRvciwKICAgICAgICBtaW5TY2FsZURlbm9taW5hdG9yCiAgICAgICkKICAgICk7CiAgICByZXR1cm4gewogICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsICJOYW1lIikpLAogICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiVGl0bGUiKSksCiAgICAgIGFic3RyYWN0OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsICJBYnN0cmFjdCIpKSwKICAgICAgYXZhaWxhYmxlQ3JzLAogICAgICBzdHlsZXMsCiAgICAgIGF0dHJpYnV0aW9uLAogICAgICBib3VuZGluZ0JveGVzLAogICAgICBrZXl3b3JkcywKICAgICAgcXVlcnlhYmxlLAogICAgICBvcGFxdWUsCiAgICAgIC4uLm1pblNjYWxlRGVub21pbmF0b3IgIT09IG51bGwgPyB7IG1pblNjYWxlRGVub21pbmF0b3IgfSA6IHt9LAogICAgICAuLi5tYXhTY2FsZURlbm9taW5hdG9yICE9PSBudWxsID8geyBtYXhTY2FsZURlbm9taW5hdG9yIH0gOiB7fSwKICAgICAgLi4ubWV0YWRhdGEubGVuZ3RoICYmIHsgbWV0YWRhdGEgfSwKICAgICAgLi4uY2hpbGRyZW4ubGVuZ3RoICYmIHsgY2hpbGRyZW4gfQogICAgfTsKICB9CiAgZnVuY3Rpb24gcGFyc2VMYXllclN0eWxlKHN0eWxlRWwpIHsKICAgIGNvbnN0IGxlZ2VuZFVybCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZmluZENoaWxkRWxlbWVudChzdHlsZUVsLCAiTGVnZW5kVVJMIiksICJPbmxpbmVSZXNvdXJjZSIpLAogICAgICAieGxpbms6aHJlZiIKICAgICk7CiAgICBjb25zdCBhYnN0cmFjdCA9IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc3R5bGVFbCwgIkFic3RyYWN0IikpOwogICAgcmV0dXJuIHsKICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzdHlsZUVsLCAiTmFtZSIpKSwKICAgICAgdGl0bGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc3R5bGVFbCwgIlRpdGxlIikpLAogICAgICAuLi5hYnN0cmFjdCAmJiB7IGFic3RyYWN0IH0sCiAgICAgIC4uLmxlZ2VuZFVybCAmJiB7IGxlZ2VuZFVybCB9CiAgICB9OwogIH0KICBmdW5jdGlvbiBwYXJzZUxheWVyQXR0cmlidXRpb24oYXR0cmlidXRpb25FbCkgewogICAgY29uc3QgbG9nb1VybCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgICAgZmluZENoaWxkRWxlbWVudChhdHRyaWJ1dGlvbkVsLCAiTG9nb1VSTCIpLAogICAgICAgICJPbmxpbmVSZXNvdXJjZSIKICAgICAgKSwKICAgICAgInhsaW5rOmhyZWYiCiAgICApOwogICAgY29uc3QgdXJsID0gZ2V0RWxlbWVudEF0dHJpYnV0ZSgKICAgICAgZmluZENoaWxkRWxlbWVudChhdHRyaWJ1dGlvbkVsLCAiT25saW5lUmVzb3VyY2UiKSwKICAgICAgInhsaW5rOmhyZWYiCiAgICApOwogICAgY29uc3QgdGl0bGUgPSBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGF0dHJpYnV0aW9uRWwsICJUaXRsZSIpKTsKICAgIHJldHVybiB7CiAgICAgIC4uLnRpdGxlICYmIHsgdGl0bGUgfSwKICAgICAgLi4udXJsICYmIHsgdXJsIH0sCiAgICAgIC4uLmxvZ29VcmwgJiYgeyBsb2dvVXJsIH0KICAgIH07CiAgfQogIGZ1bmN0aW9uIHJlYWRQcm92aWRlckZyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHNlcnZpY2UgPSBmaW5kQ2hpbGRFbGVtZW50KGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksICJTZXJ2aWNlIik7CiAgICBjb25zdCBjb250YWN0SW5mb3JtYXRpb24gPSBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJDb250YWN0SW5mb3JtYXRpb24iKTsKICAgIGNvbnN0IGNvbnRhY3RQZXJzb25QcmltYXJ5ID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgY29udGFjdEluZm9ybWF0aW9uLAogICAgICAiQ29udGFjdFBlcnNvblByaW1hcnkiCiAgICApOwogICAgY29uc3QgYWRkcmVzcyA9IGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdEluZm9ybWF0aW9uLCAiQ29udGFjdEFkZHJlc3MiKTsKICAgIHJldHVybiB7CiAgICAgIGNvbnRhY3Q6IHsKICAgICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdFBlcnNvblByaW1hcnksICJDb250YWN0UGVyc29uIikKICAgICAgICApLAogICAgICAgIG9yZ2FuaXphdGlvbjogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RQZXJzb25QcmltYXJ5LCAiQ29udGFjdE9yZ2FuaXphdGlvbiIpCiAgICAgICAgKSwKICAgICAgICBwb3NpdGlvbjogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RJbmZvcm1hdGlvbiwgIkNvbnRhY3RQb3NpdGlvbiIpCiAgICAgICAgKSwKICAgICAgICBwaG9uZTogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RJbmZvcm1hdGlvbiwgIkNvbnRhY3RWb2ljZVRlbGVwaG9uZSIpCiAgICAgICAgKSwKICAgICAgICBmYXg6IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChjb250YWN0SW5mb3JtYXRpb24sICJDb250YWN0RmFjc2ltaWxlVGVsZXBob25lIikKICAgICAgICApLAogICAgICAgIGFkZHJlc3M6IHsKICAgICAgICAgIGRlbGl2ZXJ5UG9pbnQ6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIkFkZHJlc3MiKSksCiAgICAgICAgICBjaXR5OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJDaXR5IikpLAogICAgICAgICAgYWRtaW5pc3RyYXRpdmVBcmVhOiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgICAgZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiU3RhdGVPclByb3ZpbmNlIikKICAgICAgICAgICksCiAgICAgICAgICBwb3N0YWxDb2RlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJQb3N0Q29kZSIpKSwKICAgICAgICAgIGNvdW50cnk6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIkNvdW50cnkiKSkKICAgICAgICB9LAogICAgICAgIGVtYWlsOiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdEluZm9ybWF0aW9uLCAiQ29udGFjdEVsZWN0cm9uaWNNYWlsQWRkcmVzcyIpCiAgICAgICAgKQogICAgICB9CiAgICB9OwogIH0KICBmdW5jdGlvbiByZWFkUHJvdmlkZXJGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3Qgc2VydmljZVByb3ZpZGVyID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgIlNlcnZpY2VQcm92aWRlciIKICAgICk7CiAgICBjb25zdCBzZXJ2aWNlQ29udGFjdCA9IGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZVByb3ZpZGVyLCAiU2VydmljZUNvbnRhY3QiKTsKICAgIGNvbnN0IGNvbnRhY3RJbmZvID0gZmluZENoaWxkRWxlbWVudChzZXJ2aWNlQ29udGFjdCwgIkNvbnRhY3RJbmZvIik7CiAgICBjb25zdCBwaG9uZSA9IGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdEluZm8sICJQaG9uZSIpOwogICAgY29uc3QgYWRkcmVzcyA9IGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdEluZm8sICJBZGRyZXNzIik7CiAgICByZXR1cm4gewogICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VQcm92aWRlciwgIlByb3ZpZGVyTmFtZSIpKSwKICAgICAgc2l0ZTogZ2V0RWxlbWVudEF0dHJpYnV0ZSgKICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VQcm92aWRlciwgIlByb3ZpZGVyU2l0ZSIpLAogICAgICAgICJ4bGluazpocmVmIgogICAgICApLAogICAgICBjb250YWN0OiB7CiAgICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlQ29udGFjdCwgIkluZGl2aWR1YWxOYW1lIikpLAogICAgICAgIHBvc2l0aW9uOiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZUNvbnRhY3QsICJQb3NpdGlvbk5hbWUiKQogICAgICAgICksCiAgICAgICAgcGhvbmU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQocGhvbmUsICJWb2ljZSIpKSwKICAgICAgICBmYXg6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQocGhvbmUsICJGYWNzaW1pbGUiKSksCiAgICAgICAgYWRkcmVzczogewogICAgICAgICAgZGVsaXZlcnlQb2ludDogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIkRlbGl2ZXJ5UG9pbnQiKQogICAgICAgICAgKSwKICAgICAgICAgIGNpdHk6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIkNpdHkiKSksCiAgICAgICAgICBhZG1pbmlzdHJhdGl2ZUFyZWE6IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJBZG1pbmlzdHJhdGl2ZUFyZWEiKQogICAgICAgICAgKSwKICAgICAgICAgIHBvc3RhbENvZGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIlBvc3RhbENvZGUiKSksCiAgICAgICAgICBjb3VudHJ5OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJDb3VudHJ5IikpCiAgICAgICAgfSwKICAgICAgICBlbWFpbDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiRWxlY3Ryb25pY01haWxBZGRyZXNzIikpCiAgICAgIH0KICAgIH07CiAgfQogIGZ1bmN0aW9uIHJlYWRPcGVyYXRpb25VcmxzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHVybHMgPSB7fTsKICAgIGNvbnN0IGNhcGFiaWxpdGllcyA9IGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBvcGVyYXRpb25zTWV0YWRhdGEgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBjYXBhYmlsaXRpZXMsCiAgICAgICJPcGVyYXRpb25zTWV0YWRhdGEiCiAgICApOwogICAgaWYgKG9wZXJhdGlvbnNNZXRhZGF0YSkgewogICAgICBmaW5kQ2hpbGRyZW5FbGVtZW50KG9wZXJhdGlvbnNNZXRhZGF0YSwgIk9wZXJhdGlvbiIpLmZvckVhY2goCiAgICAgICAgKG9wZXJhdGlvbikgPT4gewogICAgICAgICAgY29uc3QgbmFtZSA9IGdldEVsZW1lbnRBdHRyaWJ1dGUob3BlcmF0aW9uLCAibmFtZSIpOwogICAgICAgICAgdXJsc1tuYW1lXSA9IHBhcnNlT3BlcmF0aW9uMTEwKG9wZXJhdGlvbik7CiAgICAgICAgfQogICAgICApOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgY2FwYWJpbGl0eSA9IGZpbmRDaGlsZEVsZW1lbnQoY2FwYWJpbGl0aWVzLCAiQ2FwYWJpbGl0eSIpOwogICAgICBjb25zdCByZXF1ZXN0ID0gZmluZENoaWxkRWxlbWVudChjYXBhYmlsaXR5LCAiUmVxdWVzdCIpOwogICAgICBnZXRDaGlsZHJlbkVsZW1lbnQocmVxdWVzdCkuZm9yRWFjaCgob3BlcmF0aW9uKSA9PiB7CiAgICAgICAgY29uc3QgbmFtZSA9IHN0cmlwTmFtZXNwYWNlKGdldEVsZW1lbnROYW1lKG9wZXJhdGlvbikpOwogICAgICAgIHVybHNbbmFtZV0gPSBwYXJzZU9wZXJhdGlvbjEwMChvcGVyYXRpb24pOwogICAgICB9KTsKICAgIH0KICAgIHJldHVybiB1cmxzOwogIH0KICBmdW5jdGlvbiByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICByZXR1cm4gZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKS5hdHRyaWJ1dGVzWyJ2ZXJzaW9uIl07CiAgfQogIGZ1bmN0aW9uIHJlYWRPdXRwdXRGb3JtYXRzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHZlcnNpb24gPSByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGxldCBvdXRwdXRGb3JtYXRzOwogICAgaWYgKHZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikpIHsKICAgICAgY29uc3QgZ2V0RmVhdHVyZSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgICAgZmluZENoaWxkRWxlbWVudCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwgIkNhcGFiaWxpdHkiKSwKICAgICAgICAgICJSZXF1ZXN0IgogICAgICAgICksCiAgICAgICAgIkdldEZlYXR1cmUiCiAgICAgICk7CiAgICAgIG91dHB1dEZvcm1hdHMgPSBnZXRDaGlsZHJlbkVsZW1lbnQoCiAgICAgICAgZmluZENoaWxkRWxlbWVudChnZXRGZWF0dXJlLCAiUmVzdWx0Rm9ybWF0IikKICAgICAgKS5tYXAoZ2V0RWxlbWVudE5hbWUpOwogICAgfSBlbHNlIHsKICAgICAgY29uc3Qgb3BlcmF0aW9ucyA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgICAiT3BlcmF0aW9uc01ldGFkYXRhIgogICAgICApOwogICAgICBjb25zdCBnZXRGZWF0dXJlID0gZmluZENoaWxkcmVuRWxlbWVudChvcGVyYXRpb25zLCAiT3BlcmF0aW9uIikuZmluZCgKICAgICAgICAoZWwpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWwsICJuYW1lIikgPT09ICJHZXRGZWF0dXJlIgogICAgICApOwogICAgICBjb25zdCBwYXJhbWV0ZXIgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGdldEZlYXR1cmUsICJQYXJhbWV0ZXIiKS5maW5kKAogICAgICAgIChlbCkgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgIm5hbWUiKSA9PT0gIm91dHB1dEZvcm1hdCIKICAgICAgKTsKICAgICAgb3V0cHV0Rm9ybWF0cyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQocGFyYW1ldGVyLCAiVmFsdWUiLCB0cnVlKS5tYXAoCiAgICAgICAgZ2V0RWxlbWVudFRleHQKICAgICAgKTsKICAgIH0KICAgIHJldHVybiBvdXRwdXRGb3JtYXRzOwogIH0KICBmdW5jdGlvbiByZWFkSW5mb0Zyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHZlcnNpb24gPSByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IHNlcnZpY2VUYWcgPSB2ZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpID8gIlNlcnZpY2UiIDogIlNlcnZpY2VJZGVudGlmaWNhdGlvbiI7CiAgICBjb25zdCBuYW1lVGFnID0gdmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSA/ICJOYW1lIiA6ICJTZXJ2aWNlVHlwZSI7CiAgICBjb25zdCBzZXJ2aWNlID0gZmluZENoaWxkRWxlbWVudChnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLCBzZXJ2aWNlVGFnKTsKICAgIGxldCBrZXl3b3JkczsKICAgIGlmICh2ZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpKSB7CiAgICAgIGtleXdvcmRzID0gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiS2V5d29yZHMiKSkuc3BsaXQoIiwiKS5tYXAoKGtleXdvcmQpID0+IGtleXdvcmQudHJpbSgpKTsKICAgIH0gZWxzZSB7CiAgICAgIGtleXdvcmRzID0gZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJLZXl3b3JkcyIpLAogICAgICAgICJLZXl3b3JkIgogICAgICApLm1hcChnZXRFbGVtZW50VGV4dCk7CiAgICB9CiAgICBsZXQgcHJvdmlkZXI7CiAgICBpZiAodmVyc2lvbiAhPT0gIjEuMC4wIikgewogICAgICBwcm92aWRlciA9IHJlYWRQcm92aWRlckZyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJUaXRsZSIpKSwKICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCBuYW1lVGFnKSksCiAgICAgIGFic3RyYWN0OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJBYnN0cmFjdCIpKSwKICAgICAgZmVlczogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiRmVlcyIpKSwKICAgICAgY29uc3RyYWludHM6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkFjY2Vzc0NvbnN0cmFpbnRzIikpLAogICAgICBrZXl3b3JkcywKICAgICAgcHJvdmlkZXIsCiAgICAgIG91dHB1dEZvcm1hdHM6IHJlYWRPdXRwdXRGb3JtYXRzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpCiAgICB9OwogIH0KICBmdW5jdGlvbiByZWFkRmVhdHVyZVR5cGVzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHZlcnNpb24gPSByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IG91dHB1dEZvcm1hdHMgPSByZWFkT3V0cHV0Rm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAiRmVhdHVyZVR5cGVMaXN0IgogICAgKTsKICAgIHJldHVybiBmaW5kQ2hpbGRyZW5FbGVtZW50KGNhcGFiaWxpdHksICJGZWF0dXJlVHlwZSIpLm1hcCgKICAgICAgKGZlYXR1cmVUeXBlRWwpID0+IHBhcnNlRmVhdHVyZVR5cGUoZmVhdHVyZVR5cGVFbCwgdmVyc2lvbiwgb3V0cHV0Rm9ybWF0cykKICAgICk7CiAgfQogIGZ1bmN0aW9uIHBhcnNlT3BlcmF0aW9uMTAwKG9wZXJhdGlvbikgewogICAgY29uc3QgdXJscyA9IHt9OwogICAgY29uc3QgZGNwVHlwZSA9IGZpbmRDaGlsZHJlbkVsZW1lbnQob3BlcmF0aW9uLCAiRENQVHlwZSIpOwogICAgY29uc3QgaHR0cCA9IGRjcFR5cGUuZmxhdE1hcCgoZCkgPT4gZmluZENoaWxkcmVuRWxlbWVudChkLCAiSFRUUCIpKTsKICAgIGNvbnN0IG1ldGhvZHMgPSBodHRwLmZsYXRNYXAoKGgpID0+IGdldENoaWxkcmVuRWxlbWVudChoKSk7CiAgICBtZXRob2RzLmZvckVhY2goKG1ldGhvZCkgPT4gewogICAgICBjb25zdCBtZXRob2ROYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUobWV0aG9kKSk7CiAgICAgIHVybHNbbWV0aG9kTmFtZV0gPSBnZXRFbGVtZW50QXR0cmlidXRlKG1ldGhvZCwgIm9ubGluZVJlc291cmNlIik7CiAgICB9KTsKICAgIHJldHVybiB1cmxzOwogIH0KICBmdW5jdGlvbiBwYXJzZU9wZXJhdGlvbjExMChvcGVyYXRpb24pIHsKICAgIGNvbnN0IHVybHMgPSB7fTsKICAgIGNvbnN0IGRjcFR5cGUgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KG9wZXJhdGlvbiwgIkRDUCIpOwogICAgY29uc3QgaHR0cCA9IGRjcFR5cGUuZmxhdE1hcCgoZCkgPT4gZmluZENoaWxkRWxlbWVudChkLCAiSFRUUCIpKTsKICAgIGNvbnN0IG1ldGhvZHMgPSBodHRwLmZsYXRNYXAoKGgpID0+IGdldENoaWxkcmVuRWxlbWVudChoKSk7CiAgICBtZXRob2RzLmZvckVhY2goKG1ldGhvZCkgPT4gewogICAgICBjb25zdCBtZXRob2ROYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUobWV0aG9kKSk7CiAgICAgIHVybHNbbWV0aG9kTmFtZV0gPSBnZXRFbGVtZW50QXR0cmlidXRlKG1ldGhvZCwgInhsaW5rOmhyZWYiKTsKICAgIH0pOwogICAgcmV0dXJuIHVybHM7CiAgfQogIGZ1bmN0aW9uIHBhcnNlRmVhdHVyZVR5cGUoZmVhdHVyZVR5cGVFbCwgc2VydmljZVZlcnNpb24sIGRlZmF1bHRPdXRwdXRGb3JtYXRzKSB7CiAgICBjb25zdCBzcnNUYWcgPSBzZXJ2aWNlVmVyc2lvbi5zdGFydHNXaXRoKCIyLiIpID8gIkNSUyIgOiAiU1JTIjsKICAgIGNvbnN0IGRlZmF1bHRTcnNUYWcgPSBzZXJ2aWNlVmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSA/ICJTUlMiIDogYERlZmF1bHQke3Nyc1RhZ31gOwogICAgZnVuY3Rpb24gcGFyc2VCQm94MTAwKCkgewogICAgICBjb25zdCBiYm94RWwgPSBmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJMYXRMb25nQm91bmRpbmdCb3giKTsKICAgICAgcmV0dXJuIFsibWlueCIsICJtaW55IiwgIm1heHgiLCAibWF4eSJdLm1hcCgobmFtZSkgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShiYm94RWwsIG5hbWUpKS5tYXAocGFyc2VGbG9hdCk7CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZUJCb3gyKCkgewogICAgICBjb25zdCBiYm94RWwgPSBmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJXR1M4NEJvdW5kaW5nQm94Iik7CiAgICAgIHJldHVybiBbIkxvd2VyQ29ybmVyIiwgIlVwcGVyQ29ybmVyIl0ubWFwKChlbE5hbWUpID0+IGZpbmRDaGlsZEVsZW1lbnQoYmJveEVsLCBlbE5hbWUpKS5tYXAoKGNvcm5lckVsKSA9PiBnZXRFbGVtZW50VGV4dChjb3JuZXJFbCkuc3BsaXQoIiAiKSkucmVkdWNlKChwcmV2LCBjdXJyKSA9PiBbLi4ucHJldiwgLi4uY3Vycl0pLm1hcChwYXJzZUZsb2F0KTsKICAgIH0KICAgIGNvbnN0IG90aGVyQ3JzID0gc2VydmljZVZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikgPyBbXSA6IGZpbmRDaGlsZHJlbkVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgYE90aGVyJHtzcnNUYWd9YCkubWFwKGdldEVsZW1lbnRUZXh0KS5tYXAoc2ltcGxpZnlFcHNnVXJuKTsKICAgIGNvbnN0IG91dHB1dEZvcm1hdHMgPSBzZXJ2aWNlVmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSA/IFtdIDogZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiT3V0cHV0Rm9ybWF0cyIpLAogICAgICAiRm9ybWF0IgogICAgKS5tYXAoZ2V0RWxlbWVudFRleHQpOwogICAgY29uc3Qga2V5d29yZHMgPSBzZXJ2aWNlVmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSA/IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIktleXdvcmRzIikpLnNwbGl0KCIsIikubWFwKChrZXl3b3JkKSA9PiBrZXl3b3JkLnRyaW0oKSkgOiBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJLZXl3b3JkcyIpLAogICAgICAiS2V5d29yZCIKICAgICkubWFwKGdldEVsZW1lbnRUZXh0KS5maWx0ZXIoKHYsIGksIGFycikgPT4gYXJyLmluZGV4T2YodikgPT09IGkpOwogICAgY29uc3QgbWV0YWRhdGEgPSBzZXJ2aWNlVmVyc2lvbiA9PT0gIjIuMC4wIiA/IGZpbmRDaGlsZHJlbkVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIk1ldGFkYXRhVVJMIikubWFwKAogICAgICAobWV0YWRhdGFVcmxFbCkgPT4gKHsKICAgICAgICB1cmw6IGdldEVsZW1lbnRBdHRyaWJ1dGUobWV0YWRhdGFVcmxFbCwgInhsaW5rOmhyZWYiKQogICAgICB9KQogICAgKSA6IGZpbmRDaGlsZHJlbkVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIk1ldGFkYXRhVVJMIikubWFwKAogICAgICAobWV0YWRhdGFVcmxFbCkgPT4gKHsKICAgICAgICBmb3JtYXQ6IGdldEVsZW1lbnRBdHRyaWJ1dGUobWV0YWRhdGFVcmxFbCwgImZvcm1hdCIpLAogICAgICAgIHR5cGU6IGdldEVsZW1lbnRBdHRyaWJ1dGUobWV0YWRhdGFVcmxFbCwgInR5cGUiKSwKICAgICAgICB1cmw6IGdldEVsZW1lbnRUZXh0KG1ldGFkYXRhVXJsRWwpLnRyaW0oKQogICAgICB9KQogICAgKTsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIk5hbWUiKSksCiAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJUaXRsZSIpKSwKICAgICAgYWJzdHJhY3Q6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIkFic3RyYWN0IikpLAogICAgICBkZWZhdWx0Q3JzOiBzaW1wbGlmeUVwc2dVcm4oCiAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCBkZWZhdWx0U3JzVGFnKSkKICAgICAgKSwKICAgICAgb3RoZXJDcnMsCiAgICAgIG91dHB1dEZvcm1hdHM6IG91dHB1dEZvcm1hdHMubGVuZ3RoID4gMCA/IG91dHB1dEZvcm1hdHMgOiBkZWZhdWx0T3V0cHV0Rm9ybWF0cywKICAgICAgbGF0TG9uQm91bmRpbmdCb3g6IHNlcnZpY2VWZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpID8gcGFyc2VCQm94MTAwKCkgOiBwYXJzZUJCb3gyKCksCiAgICAgIGtleXdvcmRzLAogICAgICAuLi5tZXRhZGF0YS5sZW5ndGggJiYgeyBtZXRhZGF0YSB9CiAgICB9OwogIH0KICBmdW5jdGlvbiBwYXJzZUJCb3goeG1sRWxlbWVudCkgewogICAgY29uc3QgcmVzdWx0ID0gWyJMb3dlckNvcm5lciIsICJVcHBlckNvcm5lciJdLm1hcCgoZWxOYW1lKSA9PiBmaW5kQ2hpbGRFbGVtZW50KHhtbEVsZW1lbnQsIGVsTmFtZSkpLm1hcCgoY29ybmVyRWwpID0+IGdldEVsZW1lbnRUZXh0KGNvcm5lckVsKS5zcGxpdCgiICIpKS5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IFsuLi5wcmV2LCAuLi5jdXJyXSkubWFwKHBhcnNlRmxvYXQpOwogICAgaWYgKHJlc3VsdC5zb21lKE51bWJlci5pc05hTikpCiAgICAgIHJldHVybiBudWxsOwogICAgcmV0dXJuIHJlc3VsdDsKICB9CiAgZnVuY3Rpb24gcmVhZEluZm9Gcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3Qgcm9vdEVsID0gZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IHNlcnZpY2UgPSBmaW5kQ2hpbGRFbGVtZW50KHJvb3RFbCwgIlNlcnZpY2VJZGVudGlmaWNhdGlvbiIpOwogICAgY29uc3Qga2V5d29yZHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJLZXl3b3JkcyIpLAogICAgICAiS2V5d29yZCIKICAgICkubWFwKGdldEVsZW1lbnRUZXh0KTsKICAgIGNvbnN0IG1ldGFkYXRhID0gZmluZENoaWxkRWxlbWVudChyb290RWwsICJPcGVyYXRpb25zTWV0YWRhdGEiKTsKICAgIGNvbnN0IGdldFRpbGVPcGVyYXRpb24gPSBmaW5kQ2hpbGRyZW5FbGVtZW50KG1ldGFkYXRhLCAiT3BlcmF0aW9uIikuZmluZCgKICAgICAgKGVsKSA9PiBnZXRFbGVtZW50QXR0cmlidXRlKGVsLCAibmFtZSIpID09ICJHZXRUaWxlIgogICAgKTsKICAgIGNvbnN0IGdldFRpbGVVcmxzID0gZmluZENoaWxkcmVuRWxlbWVudChnZXRUaWxlT3BlcmF0aW9uLCAiR2V0IiwgdHJ1ZSkucmVkdWNlKAogICAgICAocHJldiwgY3VycikgPT4gewogICAgICAgIGNvbnN0IGVuY29kaW5nVHlwZSA9IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChjdXJyLCAiVmFsdWUiLCB0cnVlKQogICAgICAgICk7CiAgICAgICAgY29uc3QgdXJsID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShjdXJyLCAieGxpbms6aHJlZiIpOwogICAgICAgIGlmIChlbmNvZGluZ1R5cGUudG9Mb3dlckNhc2UoKSA9PT0gInJlc3RmdWwiKQogICAgICAgICAgcmV0dXJuIHsgLi4ucHJldiwgcmVzdDogdXJsIH07CiAgICAgICAgcmV0dXJuIHsgLi4ucHJldiwga3ZwOiB1cmwgfTsKICAgICAgfSwKICAgICAge30KICAgICk7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiVGl0bGUiKSksCiAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIlNlcnZpY2VUeXBlIikpLAogICAgICBhYnN0cmFjdDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiQWJzdHJhY3QiKSksCiAgICAgIGZlZXM6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkZlZXMiKSksCiAgICAgIGNvbnN0cmFpbnRzOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJBY2Nlc3NDb25zdHJhaW50cyIpKSwKICAgICAga2V5d29yZHMsCiAgICAgIHByb3ZpZGVyOiByZWFkUHJvdmlkZXJGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyksCiAgICAgIGdldFRpbGVVcmxzCiAgICB9OwogIH0KICBmdW5jdGlvbiByZWFkTWF0cml4U2V0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBmdW5jdGlvbiBwYXJzZU1hdHJpeFNldChlbGVtZW50KSB7CiAgICAgIGNvbnN0IHRvcExlZnQgPSBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJUb3BMZWZ0Q29ybmVyIikpLnNwbGl0KCIgIikubWFwKHBhcnNlRmxvYXQpOwogICAgICByZXR1cm4gewogICAgICAgIGlkZW50aWZpZXI6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIklkZW50aWZpZXIiKSksCiAgICAgICAgdGlsZVdpZHRoOiBwYXJzZUludCgKICAgICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIlRpbGVXaWR0aCIpKQogICAgICAgICksCiAgICAgICAgdGlsZUhlaWdodDogcGFyc2VJbnQoCiAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJUaWxlSGVpZ2h0IikpCiAgICAgICAgKSwKICAgICAgICBtYXRyaXhXaWR0aDogcGFyc2VJbnQoCiAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJNYXRyaXhXaWR0aCIpKQogICAgICAgICksCiAgICAgICAgbWF0cml4SGVpZ2h0OiBwYXJzZUludCgKICAgICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIk1hdHJpeEhlaWdodCIpKQogICAgICAgICksCiAgICAgICAgc2NhbGVEZW5vbWluYXRvcjogcGFyc2VGbG9hdCgKICAgICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIlNjYWxlRGVub21pbmF0b3IiKSkKICAgICAgICApLAogICAgICAgIHRvcExlZnQKICAgICAgfTsKICAgIH0KICAgIGNvbnN0IGNvbnRlbnRzID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgIkNvbnRlbnRzIgogICAgKTsKICAgIGNvbnN0IG1hdHJpeFNldHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGNvbnRlbnRzLCAiVGlsZU1hdHJpeFNldCIpOwogICAgcmV0dXJuIG1hdHJpeFNldHMubWFwKChlbGVtZW50KSA9PiB7CiAgICAgIGNvbnN0IHdlbGxLbm93blNjYWxlU2V0ID0gZ2V0RWxlbWVudFRleHQoCiAgICAgICAgZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiV2VsbEtub3duU2NhbGVTZXQiKQogICAgICApOwogICAgICBjb25zdCBib3VuZGluZ0JveCA9IHBhcnNlQkJveChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJCb3VuZGluZ0JveCIpKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZGVudGlmaWVyOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJJZGVudGlmaWVyIikpLAogICAgICAgIGNyczogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiU3VwcG9ydGVkQ1JTIikpLAogICAgICAgIHRpbGVNYXRyaWNlczogZmluZENoaWxkcmVuRWxlbWVudChlbGVtZW50LCAiVGlsZU1hdHJpeCIpLm1hcCgKICAgICAgICAgIHBhcnNlTWF0cml4U2V0CiAgICAgICAgKSwKICAgICAgICAuLi5ib3VuZGluZ0JveCAmJiB7IGJvdW5kaW5nQm94IH0sCiAgICAgICAgLi4ud2VsbEtub3duU2NhbGVTZXQgJiYgeyB3ZWxsS25vd25TY2FsZVNldCB9CiAgICAgIH07CiAgICB9KTsKICB9CiAgZnVuY3Rpb24gcmVhZExheWVyc0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCByb290RWwgPSBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3QgY29udGVudHNFbCA9IGZpbmRDaGlsZEVsZW1lbnQocm9vdEVsLCAiQ29udGVudHMiKTsKICAgIGZ1bmN0aW9uIGdldE1hdHJpeFNldENycyhjb250ZW50c0VsMiwgaWRlbnRpZmllcikgewogICAgICBjb25zdCBtYXRyaXhTZXQgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGNvbnRlbnRzRWwyLCAiVGlsZU1hdHJpeFNldCIpLmZpbmQoCiAgICAgICAgKG1hdHJpeFNldEVsKSA9PiB7CiAgICAgICAgICBjb25zdCBpZGVudGlmaWVyRWwgPSBmaW5kQ2hpbGRFbGVtZW50KG1hdHJpeFNldEVsLCAiSWRlbnRpZmllciIpOwogICAgICAgICAgcmV0dXJuIGdldEVsZW1lbnRUZXh0KGlkZW50aWZpZXJFbCkgPT09IGlkZW50aWZpZXI7CiAgICAgICAgfQogICAgICApOwogICAgICByZXR1cm4gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChtYXRyaXhTZXQsICJTdXBwb3J0ZWRDUlMiKSk7CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZU1hdHJpeFNldExpbmsoZWxlbWVudCkgewogICAgICBjb25zdCBpZGVudGlmaWVyID0gZ2V0RWxlbWVudFRleHQoCiAgICAgICAgZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiVGlsZU1hdHJpeFNldCIpCiAgICAgICk7CiAgICAgIGNvbnN0IGNycyA9IGdldE1hdHJpeFNldENycyhjb250ZW50c0VsLCBpZGVudGlmaWVyKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZGVudGlmaWVyLAogICAgICAgIGNycywKICAgICAgICBsaW1pdHM6IGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgIlRpbGVNYXRyaXhMaW1pdHMiLCB0cnVlKS5tYXAoCiAgICAgICAgICAoZWxlbWVudDIpID0+ICh7CiAgICAgICAgICAgIHRpbGVNYXRyaXg6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJUaWxlTWF0cml4IikpLAogICAgICAgICAgICBtaW5UaWxlUm93OiBwYXJzZUludCgKICAgICAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiTWluVGlsZVJvdyIpKQogICAgICAgICAgICApLAogICAgICAgICAgICBtaW5UaWxlQ29sOiBwYXJzZUludCgKICAgICAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiTWluVGlsZUNvbCIpKQogICAgICAgICAgICApLAogICAgICAgICAgICBtYXhUaWxlUm93OiBwYXJzZUludCgKICAgICAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiTWF4VGlsZVJvdyIpKQogICAgICAgICAgICApLAogICAgICAgICAgICBtYXhUaWxlQ29sOiBwYXJzZUludCgKICAgICAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiTWF4VGlsZUNvbCIpKQogICAgICAgICAgICApCiAgICAgICAgICB9KQogICAgICAgICkKICAgICAgfTsKICAgIH0KICAgIGNvbnN0IGdldFRpbGVPcGVyYXRpb24gPSBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KHJvb3RFbCwgIk9wZXJhdGlvbnNNZXRhZGF0YSIpLAogICAgICAiT3BlcmF0aW9uIgogICAgKS5maW5kKChlbCkgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgIm5hbWUiKSA9PSAiR2V0VGlsZSIpOwogICAgY29uc3QgZ2V0S3ZwRWx0ID0gZmluZENoaWxkcmVuRWxlbWVudChnZXRUaWxlT3BlcmF0aW9uLCAiR2V0IiwgdHJ1ZSkuZmlsdGVyKAogICAgICAoZWx0KSA9PiB7CiAgICAgICAgY29uc3QgZW5jb2RpbmdUeXBlID0gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbHQsICJWYWx1ZSIsIHRydWUpKTsKICAgICAgICByZXR1cm4gZW5jb2RpbmdUeXBlLnRvTG93ZXJDYXNlKCkgPT09ICJrdnAiOwogICAgICB9CiAgICApWzBdOwogICAgY29uc3QgZ2V0S3ZwVXJsID0gZ2V0S3ZwRWx0ID8gZ2V0RWxlbWVudEF0dHJpYnV0ZShnZXRLdnBFbHQsICJ4bGluazpocmVmIikgOiAiIjsKICAgIGNvbnN0IGNvbnRlbnRzID0gZmluZENoaWxkRWxlbWVudChyb290RWwsICJDb250ZW50cyIpOwogICAgY29uc3QgbGF5ZXJzID0gZmluZENoaWxkcmVuRWxlbWVudChjb250ZW50cywgIkxheWVyIik7CiAgICByZXR1cm4gbGF5ZXJzLm1hcCgoZWxlbWVudCkgPT4gewogICAgICBjb25zdCBsYXRMb25Cb3VuZGluZ0JveCA9IHBhcnNlQkJveCgKICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJXR1M4NEJvdW5kaW5nQm94IikKICAgICAgKTsKICAgICAgbGV0IGRlZmF1bHRTdHlsZSA9ICIiOwogICAgICBjb25zdCBzdHlsZXMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGVsZW1lbnQsICJTdHlsZSIpLm1hcCgoZWxlbWVudDIpID0+IHsKICAgICAgICBjb25zdCBsZWdlbmRVcmwgPSBnZXRFbGVtZW50QXR0cmlidXRlKAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIkxlZ2VuZFVSTCIpLAogICAgICAgICAgInhsaW5rOmhyZWYiCiAgICAgICAgKTsKICAgICAgICBjb25zdCBhYnN0cmFjdCA9IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJBYnN0cmFjdCIpKTsKICAgICAgICBjb25zdCBzdHlsZSA9IHsKICAgICAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiVGl0bGUiKSksCiAgICAgICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiSWRlbnRpZmllciIpKSwKICAgICAgICAgIC4uLmFic3RyYWN0ICYmIHsgYWJzdHJhY3QgfSwKICAgICAgICAgIC4uLmxlZ2VuZFVybCAmJiB7IGxlZ2VuZFVybCB9CiAgICAgICAgfTsKICAgICAgICBpZiAoZ2V0RWxlbWVudEF0dHJpYnV0ZShlbGVtZW50MiwgImlzRGVmYXVsdCIpID09PSAidHJ1ZSIpIHsKICAgICAgICAgIGRlZmF1bHRTdHlsZSA9IHN0eWxlLm5hbWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdHlsZTsKICAgICAgfSk7CiAgICAgIGNvbnN0IG91dHB1dEZvcm1hdHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGVsZW1lbnQsICJGb3JtYXQiKS5tYXAoCiAgICAgICAgZ2V0RWxlbWVudFRleHQKICAgICAgKTsKICAgICAgY29uc3QgcmVzb3VyY2VMaW5rcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoCiAgICAgICAgZWxlbWVudCwKICAgICAgICAiUmVzb3VyY2VVUkwiCiAgICAgICkuZmlsdGVyKAogICAgICAgIChlbGVtZW50MikgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShlbGVtZW50MiwgInJlc291cmNlVHlwZSIpID09PSAidGlsZSIKICAgICAgKS5tYXAoKGVsZW1lbnQyKSA9PiB7CiAgICAgICAgY29uc3QgZm9ybWF0ID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShlbGVtZW50MiwgImZvcm1hdCIpOwogICAgICAgIGNvbnN0IHVybCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWxlbWVudDIsICJ0ZW1wbGF0ZSIpOwogICAgICAgIHJldHVybiB7IGZvcm1hdCwgdXJsLCBlbmNvZGluZzogIlJFU1QiIH07CiAgICAgIH0pOwogICAgICBpZiAoZ2V0S3ZwVXJsKSB7CiAgICAgICAgcmVzb3VyY2VMaW5rcy5wdXNoKAogICAgICAgICAgLi4ub3V0cHV0Rm9ybWF0cy5tYXAoKGZvcm1hdCkgPT4gKHsKICAgICAgICAgICAgZW5jb2Rpbmc6ICJLVlAiLAogICAgICAgICAgICB1cmw6IGdldEt2cFVybCwKICAgICAgICAgICAgZm9ybWF0CiAgICAgICAgICB9KSkKICAgICAgICApOwogICAgICB9CiAgICAgIGNvbnN0IG1hdHJpeFNldHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGVsZW1lbnQsICJUaWxlTWF0cml4U2V0TGluayIpLm1hcCgKICAgICAgICBwYXJzZU1hdHJpeFNldExpbmsKICAgICAgKTsKICAgICAgY29uc3QgZGltZW5zaW9ucyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgIkRpbWVuc2lvbiIpLm1hcCgKICAgICAgICAoZWxlbWVudDIpID0+IHsKICAgICAgICAgIGNvbnN0IGlkZW50aWZpZXIgPSBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgICAgZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIklkZW50aWZpZXIiKQogICAgICAgICAgKTsKICAgICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiRGVmYXVsdCIpCiAgICAgICAgICApOwogICAgICAgICAgY29uc3QgdmFsdWVzID0gZmluZENoaWxkcmVuRWxlbWVudChlbGVtZW50MiwgIlZhbHVlcyIpLm1hcCgKICAgICAgICAgICAgZ2V0RWxlbWVudFRleHQKICAgICAgICAgICk7CiAgICAgICAgICByZXR1cm4geyBpZGVudGlmaWVyLCBkZWZhdWx0VmFsdWUsIHZhbHVlcyB9OwogICAgICAgIH0KICAgICAgKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJJZGVudGlmaWVyIikpLAogICAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJUaXRsZSIpKSwKICAgICAgICBhYnN0cmFjdDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiQWJzdHJhY3QiKSksCiAgICAgICAgc3R5bGVzLAogICAgICAgIHJlc291cmNlTGlua3MsCiAgICAgICAgbWF0cml4U2V0cywKICAgICAgICBkZWZhdWx0U3R5bGUsCiAgICAgICAgLi4ubGF0TG9uQm91bmRpbmdCb3ggJiYgeyBsYXRMb25Cb3VuZGluZ0JveCB9LAogICAgICAgIC4uLmRpbWVuc2lvbnMgJiYgeyBkaW1lbnNpb25zIH0KICAgICAgfTsKICAgIH0pOwogIH0KICBmdW5jdGlvbiBwYXJzZUZlYXR1cmVQcm9wcyhnZXRGZWF0dXJlc0RvYywgZmVhdHVyZVR5cGVGdWxsLCBzZXJ2aWNlVmVyc2lvbikgewogICAgY29uc3QgY29sbGVjdGlvbiA9IGdldFJvb3RFbGVtZW50KGdldEZlYXR1cmVzRG9jKTsKICAgIGxldCBtZW1iZXJzOwogICAgaWYgKHNlcnZpY2VWZXJzaW9uLnN0YXJ0c1dpdGgoIjIuMCIpKSB7CiAgICAgIG1lbWJlcnMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGNvbGxlY3Rpb24sICJtZW1iZXIiKS5tYXAoCiAgICAgICAgKHBhcmVudCkgPT4gZ2V0Q2hpbGRyZW5FbGVtZW50KHBhcmVudClbMF0KICAgICAgKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IG1lbWJlcnNSb290ID0gZmluZENoaWxkRWxlbWVudChjb2xsZWN0aW9uLCAiZmVhdHVyZU1lbWJlcnMiKTsKICAgICAgbWVtYmVycyA9IG1lbWJlcnNSb290ID8gZ2V0Q2hpbGRyZW5FbGVtZW50KG1lbWJlcnNSb290KSA6IGZpbmRDaGlsZHJlbkVsZW1lbnQoY29sbGVjdGlvbiwgImZlYXR1cmVNZW1iZXIiKS5tYXAoCiAgICAgICAgKHBhcmVudCkgPT4gZ2V0Q2hpbGRyZW5FbGVtZW50KHBhcmVudClbMF0KICAgICAgKTsKICAgIH0KICAgIGNvbnN0IGlkQXR0ciA9IHNlcnZpY2VWZXJzaW9uID09PSAiMS4wLjAiID8gImZpZCIgOiAiZ21sOmlkIjsKICAgIGZ1bmN0aW9uIGlzRWxlbWVudFByb3BlcnR5KHByb3BOYW1lKSB7CiAgICAgIHJldHVybiBwcm9wTmFtZSBpbiBmZWF0dXJlVHlwZUZ1bGwucHJvcGVydGllczsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlRWxlbWVudFByb3BlcnR5VmFsdWUocHJvcE5hbWUsIHZhbHVlQXNTdHJpbmcpIHsKICAgICAgY29uc3QgdHlwZSA9IGZlYXR1cmVUeXBlRnVsbC5wcm9wZXJ0aWVzW3Byb3BOYW1lXTsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSAiaW50ZWdlciI6CiAgICAgICAgICByZXR1cm4gcGFyc2VJbnQodmFsdWVBc1N0cmluZyk7CiAgICAgICAgY2FzZSAiZmxvYXQiOgogICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWVBc1N0cmluZyk7CiAgICAgICAgY2FzZSAiYm9vbGVhbiI6CiAgICAgICAgICByZXR1cm4gdmFsdWVBc1N0cmluZyA9PT0gInRydWUiOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gdmFsdWVBc1N0cmluZzsKICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gZ2V0UHJvcGVydGllcyhtZW1iZXJFbCkgewogICAgICByZXR1cm4gZ2V0Q2hpbGRyZW5FbGVtZW50KG1lbWJlckVsKS5maWx0ZXIoKGVsKSA9PiBpc0VsZW1lbnRQcm9wZXJ0eShzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShlbCkpKSkucmVkdWNlKChwcmV2LCBjdXJyKSA9PiB7CiAgICAgICAgY29uc3QgcHJvcE5hbWUgPSBzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShjdXJyKSk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIC4uLnByZXYsCiAgICAgICAgICBbcHJvcE5hbWVdOiBwYXJzZUVsZW1lbnRQcm9wZXJ0eVZhbHVlKHByb3BOYW1lLCBnZXRFbGVtZW50VGV4dChjdXJyKSkKICAgICAgICB9OwogICAgICB9LCB7fSk7CiAgICB9CiAgICByZXR1cm4gbWVtYmVycy5tYXAoKGVsKSA9PiAoewogICAgICBpZDogZ2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgaWRBdHRyKSwKICAgICAgcHJvcGVydGllczogZ2V0UHJvcGVydGllcyhlbCkKICAgIH0pKTsKICB9CiAgZnVuY3Rpb24gY29tcHV0ZUZlYXR1cmVQcm9wc0RldGFpbHMoZmVhdHVyZXNXaXRoUHJvcHMpIHsKICAgIHJldHVybiBmZWF0dXJlc1dpdGhQcm9wcy5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IHsKICAgICAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiBjdXJyLnByb3BlcnRpZXMpIHsKICAgICAgICBjb25zdCBwcm9wVmFsdWUgPSBjdXJyLnByb3BlcnRpZXNbcHJvcE5hbWVdOwogICAgICAgIGlmICghKHByb3BOYW1lIGluIHByZXYpKSB7CiAgICAgICAgICBwcmV2W3Byb3BOYW1lXSA9IHsgdW5pcXVlVmFsdWVzOiBbXSB9OwogICAgICAgIH0KICAgICAgICBjb25zdCB1bmlxdWVWYWx1ZSA9IHByZXZbcHJvcE5hbWVdLnVuaXF1ZVZhbHVlcy5maW5kKAogICAgICAgICAgKHYpID0+IHYudmFsdWUgPT09IHByb3BWYWx1ZQogICAgICAgICk7CiAgICAgICAgaWYgKHVuaXF1ZVZhbHVlKQogICAgICAgICAgdW5pcXVlVmFsdWUuY291bnQrKzsKICAgICAgICBlbHNlCiAgICAgICAgICBwcmV2W3Byb3BOYW1lXS51bmlxdWVWYWx1ZXMucHVzaCh7IHZhbHVlOiBwcm9wVmFsdWUsIGNvdW50OiAxIH0pOwogICAgICB9CiAgICAgIHJldHVybiBwcmV2OwogICAgfSwge30pOwogIH0KICBmdW5jdGlvbiBnZW5lcmF0ZUdldEZlYXR1cmVVcmwoc2VydmljZVVybCwgdmVyc2lvbiwgZmVhdHVyZVR5cGUsIG91dHB1dEZvcm1hdCwgbWF4RmVhdHVyZXMsIGF0dHJpYnV0ZXMsIGhpdHNPbmx5LCBvdXRwdXRDcnMsIGV4dGVudCwgZXh0ZW50Q3JzLCBzdGFydEluZGV4LCBzb3J0QnkpIHsKICAgIGNvbnN0IHR5cGVQYXJhbSA9IHZlcnNpb24gPT09ICIyLjAuMCIgPyAiVFlQRU5BTUVTIiA6ICJUWVBFTkFNRSI7CiAgICBjb25zdCBjb3VudFBhcmFtID0gdmVyc2lvbiA9PT0gIjIuMC4wIiA/ICJDT1VOVCIgOiAiTUFYRkVBVFVSRVMiOwogICAgY29uc3QgbmV3UGFyYW1zID0gewogICAgICBTRVJWSUNFOiAiV0ZTIiwKICAgICAgUkVRVUVTVDogIkdldEZlYXR1cmUiLAogICAgICBWRVJTSU9OOiB2ZXJzaW9uLAogICAgICBbdHlwZVBhcmFtXTogZmVhdHVyZVR5cGUKICAgIH07CiAgICBpZiAob3V0cHV0Rm9ybWF0ICE9PSB2b2lkIDApCiAgICAgIG5ld1BhcmFtcy5PVVRQVVRGT1JNQVQgPSBvdXRwdXRGb3JtYXQ7CiAgICBpZiAoYXR0cmlidXRlcyAhPT0gdm9pZCAwKQogICAgICBuZXdQYXJhbXMuUFJPUEVSVFlOQU1FID0gYXR0cmlidXRlcy5qb2luKCIsIik7CiAgICBpZiAoaGl0c09ubHkpIHsKICAgICAgbmV3UGFyYW1zLlJFU1VMVFRZUEUgPSAiaGl0cyI7CiAgICAgIG5ld1BhcmFtc1tjb3VudFBhcmFtXSA9ICIxIjsKICAgIH0gZWxzZSBpZiAobWF4RmVhdHVyZXMgIT09IHZvaWQgMCkKICAgICAgbmV3UGFyYW1zW2NvdW50UGFyYW1dID0gbWF4RmVhdHVyZXMudG9TdHJpbmcoMTApOwogICAgaWYgKG91dHB1dENycykgewogICAgICBuZXdQYXJhbXMuU1JTTkFNRSA9IG91dHB1dENyczsKICAgIH0KICAgIGlmIChleHRlbnQpIHsKICAgICAgY29uc3QgZXh0ZW50Sm9pbmVkID0gZXh0ZW50LmpvaW4oIiwiKTsKICAgICAgbmV3UGFyYW1zLkJCT1ggPSBleHRlbnRDcnMgPyBgJHtleHRlbnRKb2luZWR9LCR7ZXh0ZW50Q3JzfWAgOiBleHRlbnRKb2luZWQ7CiAgICB9CiAgICBpZiAoc3RhcnRJbmRleCkgewogICAgICBuZXdQYXJhbXMuU1RBUlRJTkRFWCA9IHN0YXJ0SW5kZXgudG9TdHJpbmcoMTApOwogICAgfQogICAgY29uc3QgdXJsID0gbmV3IFVSTChzZXRRdWVyeVBhcmFtcyhzZXJ2aWNlVXJsLCBuZXdQYXJhbXMpKTsKICAgIGlmIChBcnJheS5pc0FycmF5KHNvcnRCeSkgJiYgc29ydEJ5Lmxlbmd0aCA+IDApIHsKICAgICAgY29uc3Qgc29ydHMgPSBzb3J0QnkubWFwKChmaWVsZFNvcnQpID0+IGAke2ZpZWxkU29ydFsxXX0gJHtmaWVsZFNvcnRbMF19YCkuam9pbigiLCIpOwogICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgiU09SVEJZIiwgc29ydHMpOwogICAgfQogICAgcmV0dXJuIHVybC50b1N0cmluZygpOwogIH0KICBhZGRUYXNrSGFuZGxlcigKICAgICJwYXJzZVdtc0NhcGFiaWxpdGllcyIsCiAgICBnbG9iYWxUaGlzLAogICAgKHsgdXJsIH0pID0+IHF1ZXJ5WG1sRG9jdW1lbnQodXJsKS50aGVuKCh4bWxEb2MpID0+IGNoZWNrKHhtbERvYywgdXJsKSkudGhlbigoeG1sRG9jKSA9PiAoewogICAgICBpbmZvOiByZWFkSW5mb0Zyb21DYXBhYmlsaXRpZXMkMih4bWxEb2MpLAogICAgICBsYXllcnM6IHJlYWRMYXllcnNGcm9tQ2FwYWJpbGl0aWVzJDEoeG1sRG9jKSwKICAgICAgdXJsOiByZWFkT3BlcmF0aW9uVXJsc0Zyb21DYXBhYmlsaXRpZXMkMSh4bWxEb2MpLAogICAgICB2ZXJzaW9uOiByZWFkVmVyc2lvbkZyb21DYXBhYmlsaXRpZXMkMSh4bWxEb2MpCiAgICB9KSkKICApOwogIGFkZFRhc2tIYW5kbGVyKAogICAgInBhcnNlV2ZzQ2FwYWJpbGl0aWVzIiwKICAgIGdsb2JhbFRoaXMsCiAgICAoeyB1cmwgfSkgPT4gcXVlcnlYbWxEb2N1bWVudCh1cmwpLnRoZW4oKHhtbERvYykgPT4gY2hlY2soeG1sRG9jLCB1cmwpKS50aGVuKCh4bWxEb2MpID0+ICh7CiAgICAgIGluZm86IHJlYWRJbmZvRnJvbUNhcGFiaWxpdGllcyQxKHhtbERvYyksCiAgICAgIGZlYXR1cmVUeXBlczogcmVhZEZlYXR1cmVUeXBlc0Zyb21DYXBhYmlsaXRpZXMoeG1sRG9jKSwKICAgICAgdXJsOiByZWFkT3BlcmF0aW9uVXJsc0Zyb21DYXBhYmlsaXRpZXMoeG1sRG9jKSwKICAgICAgdmVyc2lvbjogcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzKHhtbERvYykKICAgIH0pKQogICk7CiAgYWRkVGFza0hhbmRsZXIoCiAgICAicXVlcnlXZnNGZWF0dXJlVHlwZURldGFpbHMiLAogICAgZ2xvYmFsVGhpcywKICAgICh7CiAgICAgIHVybCwKICAgICAgc2VydmljZVZlcnNpb24sCiAgICAgIGZlYXR1cmVUeXBlRnVsbAogICAgfSkgPT4gewogICAgICBjb25zdCBnZXRGZWF0dXJlVXJsID0gZ2VuZXJhdGVHZXRGZWF0dXJlVXJsKAogICAgICAgIHVybCwKICAgICAgICBzZXJ2aWNlVmVyc2lvbiwKICAgICAgICBmZWF0dXJlVHlwZUZ1bGwubmFtZSwKICAgICAgICB2b2lkIDAsCiAgICAgICAgdm9pZCAwLAogICAgICAgIE9iamVjdC5rZXlzKGZlYXR1cmVUeXBlRnVsbC5wcm9wZXJ0aWVzKQogICAgICApOwogICAgICByZXR1cm4gcXVlcnlYbWxEb2N1bWVudChnZXRGZWF0dXJlVXJsKS50aGVuKChnZXRGZWF0dXJlRG9jKSA9PiAoewogICAgICAgIHByb3BzOiBjb21wdXRlRmVhdHVyZVByb3BzRGV0YWlscygKICAgICAgICAgIHBhcnNlRmVhdHVyZVByb3BzKGdldEZlYXR1cmVEb2MsIGZlYXR1cmVUeXBlRnVsbCwgc2VydmljZVZlcnNpb24pCiAgICAgICAgKQogICAgICB9KSk7CiAgICB9CiAgKTsKICBhZGRUYXNrSGFuZGxlcigKICAgICJ1cGRhdGVGZXRjaE9wdGlvbnMiLAogICAgZ2xvYmFsVGhpcywKICAgICh7IG9wdGlvbnMgfSkgPT4gewogICAgICBzZXRGZXRjaE9wdGlvbnMob3B0aW9ucyk7CiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe30pOwogICAgfQogICk7CiAgYWRkVGFza0hhbmRsZXIoCiAgICAicGFyc2VXbXRzQ2FwYWJpbGl0aWVzIiwKICAgIGdsb2JhbFRoaXMsCiAgICAoeyB1cmwgfSkgPT4gcXVlcnlYbWxEb2N1bWVudCh1cmwpLnRoZW4oKHhtbERvYykgPT4gY2hlY2soeG1sRG9jLCB1cmwpKS50aGVuKCh4bWxEb2MpID0+ICh7CiAgICAgIGluZm86IHJlYWRJbmZvRnJvbUNhcGFiaWxpdGllcyh4bWxEb2MpLAogICAgICBsYXllcnM6IHJlYWRMYXllcnNGcm9tQ2FwYWJpbGl0aWVzKHhtbERvYyksCiAgICAgIG1hdHJpeFNldHM6IHJlYWRNYXRyaXhTZXRzRnJvbUNhcGFiaWxpdGllcyh4bWxEb2MpCiAgICB9KSkKICApOwp9KSgpOwo=",uE=typeof window<"u"&&window.Blob&&new Blob([atob(cE)],{type:"text/javascript;charset=utf-8"});function are(n){let t;try{if(t=uE&&(window.URL||window.webkitURL).createObjectURL(uE),!t)throw"";const e=new Worker(t,{name:n?.name});return e.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(t)}),e}catch{return new Worker("data:text/javascript;base64,"+cE,{name:n?.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}let IC,hE=!1;function dh(){return hE?null:(IC||(IC=new are),IC)}function MC(n,t,e,r,s,i,o,a,l,c,u,h){const d="2.0.0"===t?"TYPENAMES":"TYPENAME",g="2.0.0"===t?"COUNT":"MAXFEATURES",m={SERVICE:"WFS",REQUEST:"GetFeature",VERSION:t,[d]:e};if(void 0!==r&&(m.OUTPUTFORMAT=r),void 0!==i&&(m.PROPERTYNAME=i.join(",")),o?(m.RESULTTYPE="hits",m[g]="1"):void 0!==s&&(m[g]=s.toString(10)),a&&(m.SRSNAME=a),l){const V=l.join(",");m.BBOX=c?`${V},${c}`:V}u&&(m.STARTINDEX=u.toString(10));const b=new URL(Vl(n,m));if(Array.isArray(h)&&h.length>0){const V=h.map(M=>`${M[1]} ${M[0]}`).join(",");b.searchParams.set("SORTBY",V)}return b.toString()}!function ore(n){op=n}(n=>{dh()&&function sp(n,t,e){return new Promise((r,s)=>{const i=function bne(){return Ane++}(),o={requestId:i,taskName:n,params:e};null===t?rp.dispatchEvent(new CustomEvent("ogc-client.request",{detail:o})):t.postMessage(o);const a=u=>{u.requestId===i&&(null===t?rp.removeEventListener("ogc-client.response",l):t.removeEventListener("message",c),"error"in u?s(function nre(n){if("ServiceExceptionError"===n.name){const e=new wC(n.message,n.requestUrl,n.code,n.locator,n.response);return e.stack=n.stack,e}if("EndpointError"===n.name){const e=new Un(n.message,n.httpStatus,n.isCrossOriginRelated);return e.stack=n.stack,e}const t=new Error(n.message);return t.stack=n.stack,t}(u.error)):r(u.response))},l=u=>a(u.detail),c=u=>a(u.data);null===t?rp.addEventListener("ogc-client.response",l):t.addEventListener("message",c)})}("updateFetchOptions",dh(),{options:n})});const Xre=["EPSG:4046","EPSG:4075","EPSG:4120","EPSG:4122","EPSG:4124","EPSG:4126","EPSG:4149","EPSG:4151","EPSG:4153","EPSG:4155","EPSG:4157","EPSG:4159","EPSG:4161","EPSG:4163","EPSG:4165","EPSG:4167","EPSG:4169","EPSG:4171","EPSG:4173","EPSG:4175","EPSG:4178","EPSG:4180","EPSG:4182","EPSG:4184","EPSG:4188","EPSG:4190","EPSG:4191","EPSG:4196","EPSG:4198","EPSG:4202","EPSG:4210","EPSG:4211","EPSG:4214","EPSG:4226","EPSG:4229","EPSG:4231","EPSG:4233","EPSG:4236","EPSG:4238","EPSG:4240","EPSG:4242","EPSG:4244","EPSG:4246","EPSG:4248","EPSG:4250","EPSG:4252","EPSG:4255","EPSG:4258","EPSG:4261","EPSG:4264","EPSG:4267","EPSG:4270","EPSG:4273","EPSG:4276","EPSG:4279","EPSG:4281","EPSG:4284","EPSG:4286","EPSG:4288","EPSG:4292","EPSG:4295","EPSG:4297","EPSG:4299","EPSG:4302","EPSG:4324","EPSG:4326"];function FC(n){return/^urn:(?:x-)?ogc:def:crs:epsg:/.test(n.toLowerCase())?`EPSG:${/([0-9]+)$/.exec(n)[1]}`:n}function Kre(n){const t={},e=me(ys(n),"Capability");return zl(me(e,"Request")).forEach(s=>{const i=Va(Ml(s));t[i]=function nse(n){const t={};return xn(n,"DCPType").flatMap(i=>me(i,"HTTP")).flatMap(i=>zl(i)).forEach(i=>{const o=me(i,"OnlineResource"),a=Va(Ml(i));t[a]=Lt(o,"xlink:href")}),t}(s)}),t}function _E(n){return ys(n).attributes.version}function qre(n){const t=_E(n);return xn(me(ys(n),"Capability"),"Layer").map(r=>ME(r,t))}function tse(n){const t=me(ys(n),"Service"),e=function Jre(n){const t=me(ys(n),"Capability");return xn(me(me(t,"Request"),"GetMap"),"Format").map(rt)}(n),r=function Qre(n){const t=me(ys(n),"Capability");return xn(me(me(t,"Request"),"GetFeatureInfo"),"Format").map(rt)}(n),s=function ese(n){const t=me(ys(n),"Capability");return xn(me(t,"Exception"),"Format").map(rt)}(n),i=xn(me(t,"KeywordList"),"Keyword").map(rt).filter((a,l,c)=>c.indexOf(a)===l),o=function ise(n){const t=me(ys(n),"Service"),e=me(t,"ContactInformation"),r=me(e,"ContactPersonPrimary"),s=me(e,"ContactAddress");return{contact:{name:rt(me(r,"ContactPerson")),organization:rt(me(r,"ContactOrganization")),position:rt(me(e,"ContactPosition")),phone:rt(me(e,"ContactVoiceTelephone")),fax:rt(me(e,"ContactFacsimileTelephone")),address:{deliveryPoint:rt(me(s,"Address")),city:rt(me(s,"City")),administrativeArea:rt(me(s,"StateOrProvince")),postalCode:rt(me(s,"PostCode")),country:rt(me(s,"Country"))},email:rt(me(e,"ContactElectronicMailAddress"))}}}(n);return{title:rt(me(t,"Title")),name:rt(me(t,"Name")),abstract:rt(me(t,"Abstract")),outputFormats:e,infoFormats:r,exceptionFormats:s,fees:rt(me(t,"Fees")),constraints:rt(me(t,"AccessConstraints")),provider:o,keywords:i}}function ME(n,t,e=[],r=[],s=null,i=null,o=null,a=null){const l="1.3.0"===t?"CRS":"SRS",c=xn(n,l).map(rt),u=c.length>0?c:e,h=xn(n,"Style").map(rse),d=h.length>0?h:r;function g(Ke){return(function Yre(n){return Xre.indexOf(FC(n))>-1}(Lt(Ke,l))&&"1.3.0"===t?["miny","minx","maxy","maxx"]:["minx","miny","maxx","maxy"]).map(Is=>Lt(Ke,Is))}function V(Ke,Zt){return""===Ke?Zt:Math.sqrt(.5*parseFloat(Ke)**2)/28e-5}function D(Ke,Zt){const dn=rt(me(n,Ke));return""===dn?Zt:parseFloat(dn)}const J=me(n,"Attribution"),X=null!==J?function sse(n){const t=Lt(me(me(n,"LogoURL"),"OnlineResource"),"xlink:href"),e=Lt(me(n,"OnlineResource"),"xlink:href"),r=rt(me(n,"Title"));return{...r&&{title:r},...e&&{url:e},...t&&{logoUrl:t}}}(J):s,G=me(n,"1.3.0"===t?"EX_GeographicBoundingBox":"LatLonBoundingBox"),K={};G&&(K["EPSG:4326"]="1.3.0"===t?function m(Ke){return["westBoundLongitude","southBoundLatitude","eastBoundLongitude","northBoundLatitude"].map(Zt=>rt(me(Ke,Zt)))}(G):function b(Ke){return["minx","miny","maxx","maxy"].map(Zt=>Lt(Ke,Zt))}(G));let U=xn(n,"BoundingBox").reduce((Ke,Zt)=>({...Ke,[Lt(Zt,l)]:g(Zt)}),K);U=Object.keys(U).length>0||null===i?U:i;const pe="1"===n.attributes.queryable||"true"===n.attributes.queryable,Me="1"===n.attributes.opaque||"true"===n.attributes.opaque,ye=xn(me(n,"KeywordList"),"Keyword").map(rt).filter((Ke,Zt,dn)=>dn.indexOf(Ke)===Zt);let Fe,He;"1.3.0"===t?(Fe=D("MinScaleDenominator",a),He=D("MaxScaleDenominator",o)):[Fe,He]=function M(){const Ke=me(n,"ScaleHint");if(!Ke)return[a,o];const Zt=Lt(Ke,"min"),dn=Lt(Ke,"max");return[V(Zt,a),V(dn,o)]}();const ht=xn(n,"MetadataURL").map(Ke=>({type:Lt(Ke,"type"),format:rt(me(Ke,"Format")),url:Lt(me(Ke,"OnlineResource"),"xlink:href")})),dt=xn(n,"Layer").map(Ke=>ME(Ke,t,u,d,X,U,He,Fe));return{name:rt(me(n,"Name")),title:rt(me(n,"Title")),abstract:rt(me(n,"Abstract")),availableCrs:u,styles:d,attribution:X,boundingBoxes:U,keywords:ye,queryable:pe,opaque:Me,...null!==Fe?{minScaleDenominator:Fe}:{},...null!==He?{maxScaleDenominator:He}:{},...ht.length&&{metadata:ht},...dt.length&&{children:dt}}}function rse(n){const t=Lt(me(me(n,"LegendURL"),"OnlineResource"),"xlink:href"),e=rt(me(n,"Abstract"));return{name:rt(me(n,"Name")),title:rt(me(n,"Title")),...e&&{abstract:e},...t&&{legendUrl:t}}}function zE(n){const t=me(ys(n),"ServiceProvider"),e=me(t,"ServiceContact"),r=me(e,"ContactInfo"),s=me(r,"Phone"),i=me(r,"Address");return{name:rt(me(t,"ProviderName")),site:Lt(me(t,"ProviderSite"),"xlink:href"),contact:{name:rt(me(e,"IndividualName")),position:rt(me(e,"PositionName")),phone:rt(me(s,"Voice")),fax:rt(me(s,"Facsimile")),address:{deliveryPoint:rt(me(i,"DeliveryPoint")),city:rt(me(i,"City")),administrativeArea:rt(me(i,"AdministrativeArea")),postalCode:rt(me(i,"PostalCode")),country:rt(me(i,"Country"))},email:rt(me(i,"ElectronicMailAddress"))}}}function ose(n){const t={},e=ys(n),r=me(e,"OperationsMetadata");if(r)xn(r,"Operation").forEach(s=>{const i=Lt(s,"name");t[i]=function use(n){const t={};return xn(n,"DCP").flatMap(i=>me(i,"HTTP")).flatMap(i=>zl(i)).forEach(i=>{const o=Va(Ml(i));t[o]=Lt(i,"xlink:href")}),t}(s)});else{const s=me(e,"Capability");zl(me(s,"Request")).forEach(o=>{const a=Va(Ml(o));t[a]=function cse(n){const t={};return xn(n,"DCPType").flatMap(i=>xn(i,"HTTP")).flatMap(i=>zl(i)).forEach(i=>{const o=Va(Ml(i));t[o]=Lt(i,"onlineResource")}),t}(o)})}return t}function j5(n){return ys(n).attributes.version}function VE(n){let e;if(j5(n).startsWith("1.0")){const r=me(me(me(ys(n),"Capability"),"Request"),"GetFeature");e=zl(me(r,"ResultFormat")).map(Ml)}else{const s=xn(me(ys(n),"OperationsMetadata"),"Operation").find(o=>"GetFeature"===Lt(o,"name")),i=xn(s,"Parameter").find(o=>"outputFormat"===Lt(o,"name"));e=xn(i,"Value",!0).map(rt)}return e}function ase(n){const t=j5(n),e=t.startsWith("1.0")?"Service":"ServiceIdentification",r=t.startsWith("1.0")?"Name":"ServiceType",s=me(ys(n),e);let i,o;return i=t.startsWith("1.0")?rt(me(s,"Keywords")).split(",").map(a=>a.trim()):xn(me(s,"Keywords"),"Keyword").map(rt),"1.0.0"!==t&&(o=zE(n)),{title:rt(me(s,"Title")),name:rt(me(s,r)),abstract:rt(me(s,"Abstract")),fees:rt(me(s,"Fees")),constraints:rt(me(s,"AccessConstraints")),keywords:i,provider:o,outputFormats:VE(n)}}function lse(n){const t=j5(n),e=VE(n);return xn(me(ys(n),"FeatureTypeList"),"FeatureType").map(s=>function hse(n,t,e){const r=t.startsWith("2.")?"CRS":"SRS",s=t.startsWith("1.0")?"SRS":`Default${r}`;const a=t.startsWith("1.0")?[]:xn(n,`Other${r}`).map(rt).map(FC),l=t.startsWith("1.0")?[]:xn(me(n,"OutputFormats"),"Format").map(rt),c=t.startsWith("1.0")?rt(me(n,"Keywords")).split(",").map(h=>h.trim()):xn(me(n,"Keywords"),"Keyword").map(rt).filter((h,d,g)=>g.indexOf(h)===d),u="2.0.0"===t?xn(n,"MetadataURL").map(h=>({url:Lt(h,"xlink:href")})):xn(n,"MetadataURL").map(h=>({format:Lt(h,"format"),type:Lt(h,"type"),url:rt(h).trim()}));return{name:rt(me(n,"Name")),title:rt(me(n,"Title")),abstract:rt(me(n,"Abstract")),defaultCrs:FC(rt(me(n,s))),otherCrs:a,outputFormats:l.length>0?l:e,latLonBoundingBox:t.startsWith("1.0")?function i(){const h=me(n,"LatLongBoundingBox");return["minx","miny","maxx","maxy"].map(d=>Lt(h,d)).map(parseFloat)}():function o(){const h=me(n,"WGS84BoundingBox");return["LowerCorner","UpperCorner"].map(d=>me(h,d)).map(d=>rt(d).split(" ")).reduce((d,g)=>[...d,...g]).map(parseFloat)}(),keywords:c,...u.length&&{metadata:u}}}(s,t,e))}function TE(n){const t=["LowerCorner","UpperCorner"].map(e=>me(n,e)).map(e=>rt(e).split(" ")).reduce((e,r)=>[...e,...r]).map(parseFloat);return t.some(Number.isNaN)?null:t}function dse(n){const t=ys(n),e=me(t,"ServiceIdentification"),r=xn(me(e,"Keywords"),"Keyword").map(rt),i=xn(me(t,"OperationsMetadata"),"Operation").find(a=>"GetTile"==Lt(a,"name")),o=xn(i,"Get",!0).reduce((a,l)=>{const c=rt(me(l,"Value",!0)),u=Lt(l,"xlink:href");return"restful"===c.toLowerCase()?{...a,rest:u}:{...a,kvp:u}},{});return{title:rt(me(e,"Title")),name:rt(me(e,"ServiceType")),abstract:rt(me(e,"Abstract")),fees:rt(me(e,"Fees")),constraints:rt(me(e,"AccessConstraints")),keywords:r,provider:zE(n),getTileUrls:o}}function pse(n){function t(s){const i=rt(me(s,"TopLeftCorner")).split(" ").map(parseFloat);return{identifier:rt(me(s,"Identifier")),tileWidth:parseInt(rt(me(s,"TileWidth"))),tileHeight:parseInt(rt(me(s,"TileHeight"))),matrixWidth:parseInt(rt(me(s,"MatrixWidth"))),matrixHeight:parseInt(rt(me(s,"MatrixHeight"))),scaleDenominator:parseFloat(rt(me(s,"ScaleDenominator"))),topLeft:i}}return xn(me(ys(n),"Contents"),"TileMatrixSet").map(s=>{const i=rt(me(s,"WellKnownScaleSet")),o=TE(me(s,"BoundingBox"));return{identifier:rt(me(s,"Identifier")),crs:rt(me(s,"SupportedCRS")),tileMatrices:xn(s,"TileMatrix").map(t),...o&&{boundingBox:o},...i&&{wellKnownScaleSet:i}}})}function gse(n){const t=ys(n),e=me(t,"Contents");function s(u){const h=rt(me(u,"TileMatrixSet")),d=function r(u,h){const d=xn(u,"TileMatrixSet").find(g=>rt(me(g,"Identifier"))===h);return rt(me(d,"SupportedCRS"))}(e,h);return{identifier:h,crs:d,limits:xn(u,"TileMatrixLimits",!0).map(g=>({tileMatrix:rt(me(g,"TileMatrix")),minTileRow:parseInt(rt(me(g,"MinTileRow"))),minTileCol:parseInt(rt(me(g,"MinTileCol"))),maxTileRow:parseInt(rt(me(g,"MaxTileRow"))),maxTileCol:parseInt(rt(me(g,"MaxTileCol")))}))}}const i=xn(me(t,"OperationsMetadata"),"Operation").find(u=>"GetTile"==Lt(u,"name")),o=xn(i,"Get",!0).filter(u=>"kvp"===rt(me(u,"Value",!0)).toLowerCase())[0],a=o?Lt(o,"xlink:href"):"";return xn(me(t,"Contents"),"Layer").map(u=>{const h=TE(me(u,"WGS84BoundingBox"));let d="";const g=xn(u,"Style").map(D=>{const J=Lt(me(D,"LegendURL"),"xlink:href"),X=rt(me(D,"Abstract")),G={title:rt(me(D,"Title")),name:rt(me(D,"Identifier")),...X&&{abstract:X},...J&&{legendUrl:J}};return"true"===Lt(D,"isDefault")&&(d=G.name),G}),m=xn(u,"Format").map(rt),b=xn(u,"ResourceURL").filter(D=>"tile"===Lt(D,"resourceType")).map(D=>({format:Lt(D,"format"),url:Lt(D,"template"),encoding:"REST"}));a&&b.push(...m.map(D=>({encoding:"KVP",url:a,format:D})));const V=xn(u,"TileMatrixSetLink").map(s),M=xn(u,"Dimension").map(D=>({identifier:rt(me(D,"Identifier")),defaultValue:rt(me(D,"Default")),values:xn(D,"Values").map(rt)}));return{name:rt(me(u,"Identifier")),title:rt(me(u,"Title")),abstract:rt(me(u,"Abstract")),styles:g,resourceLinks:b,matrixSets:V,defaultStyle:d,...h&&{latLonBoundingBox:h},...M&&{dimensions:M}}})}function fse(n,t,e){const r=ys(n);let s;if(e.startsWith("2.0"))s=xn(r,"member").map(c=>zl(c)[0]);else{const c=me(r,"featureMembers");s=c?zl(c):xn(r,"featureMember").map(u=>zl(u)[0])}const i="1.0.0"===e?"fid":"gml:id";function a(c,u){switch(t.properties[c]){case"integer":return parseInt(u);case"float":return parseFloat(u);case"boolean":return"true"===u;default:return u}}function l(c){return zl(c).filter(u=>function o(c){return c in t.properties}(Va(Ml(u)))).reduce((u,h)=>{const d=Va(Ml(h));return{...u,[d]:a(d,rt(h))}},{})}return s.map(c=>({id:Lt(c,i),properties:l(c)}))}function mse(n){return n.reduce((t,e)=>{for(const r in e.properties){const s=e.properties[r];r in t||(t[r]={uniqueValues:[]});const i=t[r].uniqueValues.find(o=>o.value===s);i?i.count++:t[r].uniqueValues.push({value:s,count:1})}return t},{})}ip("parseWmsCapabilities",globalThis,({url:n})=>hh(n).then(t=>CC(t,n)).then(t=>({info:tse(t),layers:qre(t),url:Kre(t),version:_E(t)}))),ip("parseWfsCapabilities",globalThis,({url:n})=>hh(n).then(t=>CC(t,n)).then(t=>({info:ase(t),featureTypes:lse(t),url:ose(t),version:j5(t)}))),ip("queryWfsFeatureTypeDetails",globalThis,({url:n,serviceVersion:t,featureTypeFull:e})=>hh(MC(n,t,e.name,void 0,void 0,Object.keys(e.properties))).then(s=>({props:mse(fse(s,e,t))}))),ip("updateFetchOptions",globalThis,({options:n})=>(function ire(n){yC=n,op&&op(n)}(n),Promise.resolve({}))),ip("parseWmtsCapabilities",globalThis,({url:n})=>hh(n).then(t=>CC(t,n)).then(t=>({info:dse(t),layers:gse(t),matrixSets:pse(t)}))),function lre(){hE=!0}();"2.8.0-dev".split("-");const xse=["*"];let U5=(()=>{class n{constructor(){this.btnClass="gn-ui-btn-default",this.disabled=!1,this.extraClass="",this.buttonClick=new Kr}set type(e){switch(e){case"primary":this.btnClass="gn-ui-btn-primary";break;case"secondary":this.btnClass="gn-ui-btn-secondary";break;case"outline":this.btnClass="gn-ui-btn-outline";break;case"light":this.btnClass="gn-ui-btn-light";break;case"gray":this.btnClass="gn-ui-btn-gray";break;case"black":this.btnClass="gn-ui-btn-black";break;default:this.btnClass="gn-ui-btn-default"}}get classList(){return`${this.btnClass} ${this.extraClass}`}handleClick(e){this.buttonClick.emit(e),e.preventDefault(),e.currentTarget.blur(),function Cne(n){n.stopPropagation(),setTimeout(()=>{window.document.dispatchEvent(n)},0)}(e)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ro({type:n,selectors:[["gn-ui-button"]],inputs:{type:"type",disabled:"disabled",extraClass:"extraClass"},outputs:{buttonClick:"buttonClick"},standalone:!0,features:[Yw],ngContentSelectors:xse,decls:2,vars:3,consts:[["type","button",3,"click","disabled"]],template:function(r,s){1&r&&(Ow(),gt(0,"button",0),Ht("click",function(o){return s.handleClick(o)}),kw(1),ut()),2&r&&(hx(s.classList),tt("disabled",s.disabled))},changeDetection:0})}}return n})();class Sse extends Ie{constructor(t,e){super()}schedule(t,e=0){return this}}const $5={setInterval(n,t,...e){const{delegate:r}=$5;return r?.setInterval?r.setInterval(n,t,...e):setInterval(n,t,...e)},clearInterval(n){const{delegate:t}=$5;return(t?.clearInterval||clearInterval)(n)},delegate:void 0};class dp{constructor(t,e=dp.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,r){return new this.schedulerActionCtor(this,t).schedule(r,e)}}dp.now=E8.now;const Mse=new class _se extends dp{constructor(t,e=dp.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}}(class Hse extends Sse{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;const s=this.id,i=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(i,s,e)),this.pending=!0,this.delay=e,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,r=0){return $5.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return e;null!=e&&$5.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let s,r=!1;try{this.work(t)}catch(i){r=!0,s=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,le(r,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}});let BE=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(r){return new(r||n)(Tt(Lc),Tt(ea))}}static{this.\u0275dir=Rn({type:n})}}return n})(),u2=(()=>{class n extends BE{static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=ei(n)))(s||n)}})()}static{this.\u0275dir=Rn({type:n,features:[qr]})}}return n})();const Tl=new At(""),Tse={provide:Tl,useExisting:Br(()=>X5),multi:!0},Lse=new At("");let X5=(()=>{class n extends BE{constructor(e,r,s){super(e,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ese(){const n=d0()?d0().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(r){return new(r||n)(Tt(Lc),Tt(ea),Tt(Lse,8))}}static{this.\u0275dir=Rn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){1&r&&Ht("input",function(o){return s._handleInput(o.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(o){return s._compositionEnd(o.target.value)})},features:[Bs([Tse]),qr]})}}return n})();const ho=new At(""),s1=new At("");function $E(n){return null!=n}function XE(n){return Yf(n)?f5(n):n}function YE(n){let t={};return n.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function KE(n,t){return t.map(e=>e(n))}function qE(n){return n.map(t=>function Dse(n){return!n.validate}(t)?t:e=>t.validate(e))}function OC(n){return null!=n?function JE(n){if(!n)return null;const t=n.filter($E);return 0==t.length?null:function(e){return YE(KE(e,t))}}(qE(n)):null}function kC(n){return null!=n?function QE(n){if(!n)return null;const t=n.filter($E);return 0==t.length?null:function(e){return $V(KE(e,t).map(XE)).pipe(R(YE))}}(qE(n)):null}function eL(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function GC(n){return n?Array.isArray(n)?n:[n]:[]}function K5(n,t){return Array.isArray(n)?n.includes(t):n===t}function rL(n,t){const e=GC(t);return GC(n).forEach(s=>{K5(e,s)||e.push(s)}),e}function sL(n,t){return GC(t).filter(e=>!K5(n,e))}class iL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=OC(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=kC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Mo extends iL{get formDirective(){return null}get path(){return null}}class o1 extends iL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class oL{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let aL=(()=>{class n extends oL{constructor(e){super(e)}static{this.\u0275fac=function(r){return new(r||n)(Tt(o1,2))}}static{this.\u0275dir=Rn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){2&r&&Ef("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[qr]})}}return n})();const pp="VALID",J5="INVALID",mh="PENDING",gp="DISABLED";class vh{}class cL extends vh{constructor(t,e){super(),this.value=t,this.source=e}}class jC extends vh{constructor(t,e){super(),this.pristine=t,this.source=e}}class UC extends vh{constructor(t,e){super(),this.touched=t,this.source=e}}class Q5 extends vh{constructor(t,e){super(),this.status=t,this.source=e}}function e3(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class YC{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=h0(()=>this.statusReactive()),this.statusReactive=pu(void 0),this._pristine=h0(()=>this.pristineReactive()),this.pristineReactive=pu(!0),this._touched=h0(()=>this.touchedReactive()),this.touchedReactive=pu(!1),this._events=new Ps,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Al(this.statusReactive)}set status(t){Al(()=>this.statusReactive.set(t))}get valid(){return this.status===pp}get invalid(){return this.status===J5}get pending(){return this.status==mh}get disabled(){return this.status===gp}get enabled(){return this.status!==gp}get pristine(){return Al(this.pristineReactive)}set pristine(t){Al(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return Al(this.touchedReactive)}set touched(t){Al(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(rL(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(rL(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(sL(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(sL(t,this._rawAsyncValidators))}hasValidator(t){return K5(this._rawValidators,t)}hasAsyncValidator(t){return K5(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){const e=!1===this.touched;this.touched=!0;const r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched({...t,sourceControl:r}),e&&!1!==t.emitEvent&&this._events.next(new UC(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){const e=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=t.sourceControl??this;this._forEachChild(s=>{s.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&!1!==t.emitEvent&&this._events.next(new UC(!1,r))}markAsDirty(t={}){const e=!0===this.pristine;this.pristine=!1;const r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty({...t,sourceControl:r}),e&&!1!==t.emitEvent&&this._events.next(new jC(!1,r))}markAsPristine(t={}){const e=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=t.sourceControl??this;this._forEachChild(s=>{s.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&!1!==t.emitEvent&&this._events.next(new jC(!0,r))}markAsPending(t={}){this.status=mh;const e=t.sourceControl??this;!1!==t.emitEvent&&(this._events.next(new Q5(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending({...t,sourceControl:e})}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=gp,this.errors=null,this._forEachChild(s=>{s.disable({...t,onlySelf:!0})}),this._updateValue();const r=t.sourceControl??this;!1!==t.emitEvent&&(this._events.next(new cL(this.value,r)),this._events.next(new Q5(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e},this),this._onDisabledChange.forEach(s=>s(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=pp,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pp||this.status===mh)&&this._runAsyncValidator(r,t.emitEvent)}const e=t.sourceControl??this;!1!==t.emitEvent&&(this._events.next(new cL(this.value,e)),this._events.next(new Q5(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity({...t,sourceControl:e})}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gp:pp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=mh,this._hasOwnPendingAsyncValidator={emitEvent:!1!==e};const r=XE(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(s=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(s,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent,this,e.shouldHaveEmitted)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((r,s)=>r&&r._find(s),this)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Q5(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new Kr,this.statusChanges=new Kr}_calculateStatus(){return this._allControlsDisabled()?gp:this.errors?J5:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mh)?mh:this._anyControlsHaveStatus(J5)?J5:pp}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){const r=!this._anyControlsDirty(),s=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),s&&this._events.next(new jC(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new UC(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){e3(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function Wse(n){return Array.isArray(n)?OC(n):n||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function Zse(n){return Array.isArray(n)?kC(n):n||null}(this._rawAsyncValidators)}}const wh=new At("CallSetDisabledState",{providedIn:"root",factory:()=>t3}),t3="always";function fp(n,t,e=t3){(function qC(n,t){const e=function tL(n){return n._rawValidators}(n);null!==t.validator?n.setValidators(eL(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=function nL(n){return n._rawAsyncValidators}(n);null!==t.asyncValidator?n.setAsyncValidators(eL(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();s3(t._rawValidators,s),s3(t._rawAsyncValidators,s)})(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(n.disabled),function $se(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&dL(n,t)})}(n,t),function Yse(n,t){const e=(r,s)=>{t.valueAccessor.writeValue(r),s&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function Xse(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&dL(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Use(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function s3(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function dL(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function fL(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}function mL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}Promise.resolve();const vL=class extends YC{constructor(t=null,e,r){super(function $C(n){return(e3(n)?n.validators:n)||null}(e),function XC(n,t){return(e3(t)?t.asyncValidators:n)||null}(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),e3(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=mL(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){fL(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){fL(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){mL(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},rie={provide:o1,useExisting:Br(()=>n7)},yL=Promise.resolve();let n7=(()=>{class n extends o1{constructor(e,r,s,i,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new vL,this._registered=!1,this.name="",this.update=new Kr,this._parent=e,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function e7(n,t){if(!t)return null;let e,r,s;return Array.isArray(t),t.forEach(i=>{i.constructor===X5?e=i:function Jse(n){return Object.getPrototypeOf(n.constructor)===u2}(i)?r=i:s=i}),s||r||e||null}(0,i)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function QC(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){fp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){yL.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const r=e.isDisabled.currentValue,s=0!==r&&function w6(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(r);yL.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function n3(n,t){return[...t.path,n]}(e,this._parent):[e]}static{this.\u0275fac=function(r){return new(r||n)(Tt(Mo,9),Tt(ho,10),Tt(s1,10),Tt(Tl,10),Tt(u6,8),Tt(wh,8))}}static{this.\u0275dir=Rn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Bs([rie]),qr,il]})}}return n})();const iie={provide:Tl,useExisting:Br(()=>r7),multi:!0};let r7=(()=>{class n extends u2{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=r=>{e(""==r?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=ei(n)))(s||n)}})()}static{this.\u0275dir=Rn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){1&r&&Ht("input",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},features:[Bs([iie]),qr]})}}return n})();const gie={provide:Tl,useExisting:Br(()=>o3),multi:!0};function _L(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let o3=(()=>{class n extends u2{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const s=_L(this._getOptionId(e),e);this.setProperty("value",s)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){const r=function fie(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r):e}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=ei(n)))(s||n)}})()}static{this.\u0275dir=Rn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){1&r&&Ht("change",function(o){return s.onChange(o.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Bs([gie]),qr]})}}return n})(),ML=(()=>{class n{constructor(e,r,s){this._element=e,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(_L(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Tt(ea),Tt(Lc),Tt(o3,9))}}static{this.\u0275dir=Rn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();const mie={provide:Tl,useExisting:Br(()=>a7),multi:!0};function zL(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let a7=(()=>{class n extends u2{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let r;if(this.value=e,Array.isArray(e)){const s=e.map(i=>this._getOptionId(i));r=(i,o)=>{i._setSelected(s.indexOf(o.toString())>-1)}}else r=(s,i)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{const s=[],i=r.selectedOptions;if(void 0!==i){const o=i;for(let a=0;a<o.length;a++){const c=this._getOptionValue(o[a].value);s.push(c)}}else{const o=r.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const c=this._getOptionValue(l.value);s.push(c)}}}this.value=s,e(s)}}_registerOption(e){const r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){const r=function vie(n){return n.split(":")[0]}(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}static{this.\u0275fac=(()=>{let e;return function(s){return(e||(e=ei(n)))(s||n)}})()}static{this.\u0275dir=Rn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){1&r&&Ht("change",function(o){return s.onChange(o.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Bs([mie]),qr]})}}return n})(),VL=(()=>{class n{constructor(e,r,s){this._element=e,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(zL(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(zL(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Tt(ea),Tt(Lc),Tt(a7,9))}}static{this.\u0275dir=Rn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),Hie=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pr({type:n})}static{this.\u0275inj=pa({})}}return n})(),Mie=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:wh,useValue:e.callSetDisabledState??t3}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pr({type:n})}static{this.\u0275inj=pa({imports:[Hie]})}}return n})();function zie(n,t){if(1&n){const e=gr();gt(0,"input",10),Ht("ngModelChange",function(s){return Be(e),Ne(nt(2).fieldValueChange.next(s))}),ut()}if(2&n){const e=nt(2);tt("readonly",e.readonly)("ngModel",e.fieldValue)}}function Vie(n,t){if(1&n){const e=gr();gt(0,"input",10),Ht("ngModelChange",function(s){Be(e);const i=nt(2);return Ne(i.fieldValueChange.next(i.toURL(s)))}),ut()}if(2&n){const e=nt(2);tt("readonly",e.readonly)("ngModel",e.fieldValue.toString())}}function Tie(n,t){if(1&n){const e=gr();gt(0,"textarea",11),Ht("ngModelChange",function(s){return Be(e),Ne(nt(2).fieldValueChange.next(s))}),ut()}if(2&n){const e=nt(2);tt("readonly",e.readonly)("ngModel",e.fieldValue)}}function Eie(n,t){if(1&n){const e=gr();gt(0,"input",12),Ht("ngModelChange",function(s){Be(e);const i=nt(2);return Ne(i.fieldValueChange.next(i.toDate(s)))}),ut()}if(2&n){const e=nt(2);tt("readonly",e.readonly)("ngModel",null==e.fieldValue?null:e.fieldValue.toISOString().substring(0,16))}}function Lie(n,t){if(1&n&&(gt(0,"option",15),Co(1),ut()),2&n){const e=t.$implicit;tt("selected",e===nt(3).fieldValue)("ngValue",e),bt(),Fc(" ",e," ")}}function Rie(n,t){if(1&n){const e=gr();gt(0,"select",13),Ht("ngModelChange",function(s){return Be(e),Ne(nt(2).fieldValueChange.next(s))}),gi(1,Lie,2,3,"option",14),ut()}if(2&n){const e=nt(2);tt("ngModel",e.fieldValue),bt(),tt("ngForOf",e.options)}}function Die(n,t){if(1&n){const e=gr();gt(0,"input",16),Ht("ngModelChange",function(s){Be(e);const i=nt(2);return Ne(i.fieldValueChange.next(i.toNumber(s)))}),ut()}if(2&n){const e=nt(2);tt("readonly",e.readonly)("ngModel",e.fieldValue)}}function Bie(n,t){if(1&n&&(gt(0,"div",2)(1,"label",3)(2,"span",4),Co(3),ut(),gi(4,zie,1,2,"input",5)(5,Vie,1,2,"input",5)(6,Tie,1,2,"textarea",6)(7,Eie,1,2,"input",7)(8,Rie,2,2,"select",8)(9,Die,1,2,"input",9),ut()()),2&n){const e=nt();bt(3),Zw(e.label),bt(),tt("ngIf",e.isSimpleText),bt(),tt("ngIf",e.isURL),bt(),tt("ngIf",e.isRichText),bt(),tt("ngIf",e.isDate),bt(),tt("ngIf",e.hasOptions),bt(),tt("ngIf",e.isNumber)}}function Nie(n,t){if(1&n){const e=gr();gt(0,"gn-ui-button",17),Ht("buttonClick",function(){return Be(e),Ne(nt().addValue())}),gt(1,"span")(2,"span",18),Co(3,"Add value for"),ut(),Co(4),ut()()}if(2&n){const e=nt();tt("type","outline"),bt(4),Fc(" ",e.label,"")}}let Fie=(()=>{class n{constructor(){this.fieldValueChange=new Kr,this.readonly=!1,this.type="text",this.confirm=this.fieldValueChange.pipe(function zse(n,t=Mse){return xi((e,r)=>{let s=null,i=null,o=null;const a=()=>{if(s){s.unsubscribe(),s=null;const c=i;i=null,r.next(c)}};function l(){const c=o+n,u=t.now();if(u<c)return s=this.schedule(void 0,c-u),void r.add(s);a()}e.subscribe(To(r,c=>{i=c,o=t.now(),s||(s=t.schedule(l,n),r.add(s))},()=>{a(),r.complete()},void 0,()=>{i=s=null}))})}(300),R(()=>{}))}get hasOptions(){return Array.isArray(this.options)}get isMissing(){return void 0===this.fieldValue&&!this.hasOptions}get isSimpleText(){return!this.hasOptions&&!this.isMissing&&"text"===this.type}get isRichText(){return!this.hasOptions&&!this.isMissing&&"rich"===this.type}get isURL(){return!this.hasOptions&&!this.isMissing&&"url"===this.type}get isDate(){return!this.hasOptions&&!this.isMissing&&"date"===this.type}get isNumber(){return!this.hasOptions&&!this.isMissing&&"number"===this.type}toDate(e){return new Date(e)}toURL(e){return new URL(e,window.location.toString())}toNumber(e){return parseFloat(e)||0}addValue(){switch(this.type){case"url":this.fieldValue=new URL("",window.location.toString());break;case"date":this.fieldValue=new Date;break;default:this.fieldValue=""}this.fieldValueChange.emit(this.fieldValue)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ro({type:n,selectors:[["gn-ui-record-field-simple"]],inputs:{label:"label",fieldValue:"fieldValue",readonly:"readonly",type:"type",options:"options"},outputs:{fieldValueChange:"fieldValueChange",confirm:"confirm"},decls:2,vars:2,consts:[["class","border border-gray-400 rounded-sm m-2 shadow-sm bg-white",4,"ngIf"],["extraClass","m-2 py-[0.5em] px-[1em]",3,"type","buttonClick",4,"ngIf"],[1,"border","border-gray-400","rounded-sm","m-2","shadow-sm","bg-white"],[1,"block","leading-tight","text-right","relative"],[1,"absolute","top-[0.25em]","right-[0.5em]","text-[0.9em]","text-gray-700","uppercase","pointer-events-none"],["type","text",3,"readonly","ngModel","ngModelChange",4,"ngIf"],["rows","4",3,"readonly","ngModel","ngModelChange",4,"ngIf"],["type","datetime-local",3,"readonly","ngModel","ngModelChange",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["type","number",3,"readonly","ngModel","ngModelChange",4,"ngIf"],["type","text",3,"ngModelChange","readonly","ngModel"],["rows","4",3,"ngModelChange","readonly","ngModel"],["type","datetime-local",3,"ngModelChange","readonly","ngModel"],[3,"ngModelChange","ngModel"],[3,"selected","ngValue",4,"ngFor","ngForOf"],[3,"selected","ngValue"],["type","number",3,"ngModelChange","readonly","ngModel"],["extraClass","m-2 py-[0.5em] px-[1em]",3,"buttonClick","type"],[1,"opacity-70"]],template:function(r,s){1&r&&gi(0,Bie,10,7,"div",0)(1,Nie,5,2,"gn-ui-button",1),2&r&&(tt("ngIf",!s.isMissing),bt(),tt("ngIf",s.isMissing))},dependencies:[y4,g0,ML,VL,X5,r7,o3,aL,n7,U5],styles:["input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.3em .5em .3em}input[readonly][_ngcontent-%COMP%]{background-color:var(--color-gray-50);color:var(--color-gray-700)}"],changeDetection:0})}}return n})();const Pie=["*"];let c7=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ro({type:n,selectors:[["gn-ui-record-field-group"]],inputs:{label:"label"},ngContentSelectors:Pie,decls:4,vars:1,consts:[[1,"outer","p-[0.25em]","m-2"],[1,"p-[0.5em]","pb-0","uppercase","font-medium","text-gray-900","text-center"]],template:function(r,s){1&r&&(Ow(),gt(0,"div",0)(1,"div",1),Co(2),ut(),kw(3),ut()),2&r&&(bt(2),Fc(" ",s.label," "))},styles:['.outer[_ngcontent-%COMP%]{position:relative;background:#ebebeb7f}.outer[_ngcontent-%COMP%]:before{position:absolute;top:0;bottom:0;left:0;width:10px;border-radius:.125rem;border-width:1px;border-right-width:0px;border-color:var(--color-gray-400);content:""}.outer[_ngcontent-%COMP%]:after{position:absolute;top:0;bottom:0;right:0;width:10px;border-radius:.125rem;border-width:1px;border-left-width:0px;border-color:var(--color-gray-400);content:""}'],changeDetection:0})}}return n})();function Oie(n){return null==n?"":/^\d+$/.test(n)?`${n}px`:n}new At("Ng Glyph Config"),new At("NgGlyphsToken");const ZL=new At("Ng Icon Pre Processor"),jL=new At("Ng Icon Post Processor"),UL=new At("Ng Icon Logger");class jie{log(t){console.log(t)}warn(t){console.warn(t)}error(t){console.error(t)}}const $L=new At("Ng Icon Config");function Xie(n,...t){return[{provide:$L,useValue:n},t.map(e=>e.\u0275providers)]}const XL=new At("Ng Icon Loader Token"),YL=new At("Ng Icon Cache Token");function Qie(n){return[{provide:a3,useFactory:(t=v(a3,{optional:!0,skipSelf:!0}))=>({...t?.reduce((e,r)=>({...e,...r}),{}),...n}),multi:!0}]}const a3=new At("Icons Token");let u7=(()=>{class n{constructor(){this.config=function Yie(){return v($L,{optional:!0})??{}}(),this.icons=function eoe(){return v(a3,{optional:!0})??[]}(),this.loader=function qie(){return v(XL,{optional:!0})}(),this.cache=function Jie(){return v(YL,{optional:!0})}(),this.preProcessor=function kie(){return v(ZL,{optional:!0})??(n=>n)}(),this.postProcessor=function Gie(){return v(jL,{optional:!0})??(()=>{})}(),this.injector=v(Sn),this.renderer=v(Lc),this.platform=v(hl),this.elementRef=v(ea),this.logger=function $ie(){return v(UL,{optional:!0})??new jie}(),this.name=X2(),this.svg=X2(),this.size=X2(this.config.size,{transform:Oie}),this.strokeWidth=X2(this.config.strokeWidth),this.color=X2(this.config.color),YH(()=>this.updateIcon())}ngOnDestroy(){this.svgElement=void 0}updateIcon(){var e=this;return(0,lo.A)(function*(){const r=e.name(),s=e.svg();if(void 0!==s)return void e.setSvg(s);if(void 0===r)return;const i=function noe(n){return n.replace(/([^a-zA-Z0-9])+(.)?/g,(t,e,r)=>r?r.toUpperCase():"").replace(/[^a-zA-Z\d]/g,"").replace(/^([A-Z])/,t=>t.toLowerCase())}(r);for(const o of[...e.icons].reverse())if(o[i])return void e.setSvg(o[i]);if(e.loader){const o=yield e.requestIconFromLoader(r);if(null!==o)return void e.setSvg(o)}e.logger.warn(`No icon named ${r} was found. You may need to import it using the withIcons function.`)})()}setSvg(e){if(R6(this.platform))return this.elementRef.nativeElement.innerHTML=e,void this.elementRef.nativeElement.setAttribute("data-ng-icon-ssr","");if(this.elementRef.nativeElement.hasAttribute("data-ng-icon-ssr")&&(this.elementRef.nativeElement.removeAttribute("data-ng-icon-ssr"),this.svgElement=this.elementRef.nativeElement.querySelector("svg")??void 0,this.elementRef.nativeElement.innerHTML===e)||(this.svgElement&&this.renderer.removeChild(this.elementRef.nativeElement,this.svgElement),""===e))return;const r=this.renderer.createElement("template");this.renderer.setProperty(r,"innerHTML",this.preProcessor(e)),this.svgElement=r.content.firstElementChild,this.postProcessor(this.svgElement),this.renderer.appendChild(this.elementRef.nativeElement,this.svgElement)}requestIconFromLoader(e){var r=this;return new Promise(s=>{A3(this.injector,(0,lo.A)(function*(){if(r.cache){const a=r.cache.get(e);if("string"==typeof a)return void s(a);if(a instanceof Promise){const l=yield a;return void s(l)}}const i=function toe(n){return"string"==typeof n?Promise.resolve(n):U0(n)?n.toPromise():n}(r.loader(e));r.cache?.set(e,i);const o=yield i;r.cache?.set(e,o),s(o)}))})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ro({type:n,selectors:[["ng-icon"]],hostVars:6,hostBindings:function(r,s){2&r&&Ew("--ng-icon__stroke-width",s.strokeWidth())("--ng-icon__size",s.size())("--ng-icon__color",s.color())},inputs:{name:[1,"name"],svg:[1,"svg"],size:[1,"size"],strokeWidth:[1,"strokeWidth"],color:[1,"color"]},standalone:!0,features:[Yw],decls:0,vars:0,template:function(r,s){},styles:["[_nghost-%COMP%]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-%COMP%]     svg{width:inherit;height:inherit;vertical-align:inherit}@layer ng-icon{[_nghost-%COMP%]{color:var(--ng-icon__color, currentColor)}}"],changeDetection:0})}}return n})(),roe=(()=>{class n{constructor(e){if(0===Object.keys(e).length)throw new Error("No icons have been provided. Ensure to include some icons by importing them using NgIconsModule.withIcons({ ... }).")}static withIcons(e){return{ngModule:n,providers:Qie(e)}}static{this.\u0275fac=function(r){return new(r||n)(Se(a3))}}static{this.\u0275mod=pr({type:n})}static{this.\u0275inj=pa({})}}return n})();const soe=(n,t)=>({getValue:n,setValue:t});function ioe(n,t){if(1&n){const e=gr();gt(0,"div",5),Nf(1,6),gt(2,"gn-ui-button",7),Ht("buttonClick",function(){const s=Be(e).index;return Ne(nt().removeItem(s))}),Lu(3,"ng-icon",8),ut()()}if(2&n){const e=t.index,r=nt();bt(),tt("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",Kw(3,soe,r.valueGetterByIndex(e),r.valueSetterByIndex(e))),bt(),tt("type","outline")}}let ooe=(()=>{class n{constructor(){this.fieldValueChange=new Kr,this.confirm=new Kr}addItem(){this.fieldValue=[...this.fieldValue,this.defaultItem],this.fieldValueChange.emit(this.fieldValue),this.confirm.emit()}removeItem(e){this.fieldValue=this.fieldValue.filter((r,s)=>s!==e),this.fieldValueChange.emit(this.fieldValue),this.confirm.emit()}valueGetterByIndex(e){return()=>this.fieldValue[e]}valueSetterByIndex(e){return(r,s,i)=>{this.fieldValue[e]=s&&i?{...this.fieldValue[e],[s]:{...this.fieldValue[e][s],[i]:r}}:s?{...this.fieldValue[e],[s]:r}:r}}trackBy(e){return e}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ro({type:n,selectors:[["gn-ui-record-field-array"]],inputs:{label:"label",fieldValue:"fieldValue",itemTemplate:"itemTemplate",defaultItem:"defaultItem"},outputs:{fieldValueChange:"fieldValueChange",confirm:"confirm"},decls:6,vars:4,consts:[[3,"label"],[1,"text-[0.9em]"],["class","relative pr-[2.8em]",4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-2"],["extraClass","py-[0.5em] px-[1em]",3,"buttonClick","type"],[1,"relative","pr-[2.8em]"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["extraClass","!p-[0.5em]","title","Delete this item",1,"absolute","top-0","right-1",3,"buttonClick","type"],["name","matDeleteForeverSharp"]],template:function(r,s){1&r&&(gt(0,"gn-ui-record-field-group",0)(1,"div",1),gi(2,ioe,4,6,"div",2),gt(3,"div",3)(4,"gn-ui-button",4),Ht("buttonClick",function(){return s.addItem()}),Co(5," Add new item... "),ut()()()()),2&r&&(tt("label",s.label),bt(2),tt("ngForOf",s.fieldValue)("ngForTrackBy",s.trackBy),bt(2),tt("type","primary"))},dependencies:[y4,T6,u7,U5,c7],styles:['.outer[_ngcontent-%COMP%]{position:relative;background:#ebebeb7f}.outer[_ngcontent-%COMP%]:before{position:absolute;top:0;bottom:0;left:0;width:10px;border-radius:.125rem;border-width:1px;border-right-width:0px;border-color:var(--color-gray-400);content:""}'],changeDetection:0})}}return n})();const aoe=(n,t)=>({getValue:n,setValue:t});function loe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-button",7),Ht("buttonClick",function(){return Be(e),Ne(nt(2).deleteObject())}),Lu(1,"ng-icon",8),ut()}2&n&&tt("type","outline")}function coe(n,t){if(1&n&&(gt(0,"div",4),Nf(1,5),gi(2,loe,2,1,"gn-ui-button",6),ut()),2&n){const e=nt();bt(),tt("ngTemplateOutlet",e.itemTemplate)("ngTemplateOutletContext",Kw(3,aoe,e.valueGetter(),e.valueSetter())),bt(),tt("ngIf",e.optional)}}function uoe(n,t){if(1&n){const e=gr();gt(0,"div",9)(1,"gn-ui-button",10),Ht("buttonClick",function(){return Be(e),Ne(nt().createObject())}),Co(2," Create... "),ut()()}2&n&&(bt(),tt("type","primary"))}let hoe=(()=>{class n{constructor(){this.fieldValueChange=new Kr,this.confirm=new Kr}createObject(){this.fieldValue={},this.fieldValueChange.emit(this.fieldValue),this.confirm.emit()}deleteObject(){this.fieldValue=void 0,this.fieldValueChange.emit(this.fieldValue),this.confirm.emit()}valueGetter(){return()=>this.fieldValue}valueSetter(){return(e,r)=>{r?this.fieldValue[r]=e:this.fieldValue=e}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ro({type:n,selectors:[["gn-ui-record-field-object"]],inputs:{label:"label",fieldValue:"fieldValue",itemTemplate:"itemTemplate",defaultItem:"defaultItem",optional:"optional"},outputs:{fieldValueChange:"fieldValueChange",confirm:"confirm"},decls:4,vars:3,consts:[[3,"label"],[1,"text-[0.9em]"],["class","relative pr-[2.8em]",4,"ngIf"],["class","p-2",4,"ngIf"],[1,"relative","pr-[2.8em]"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","absolute top-0 right-1","extraClass","!p-[0.5em]","title","Delete this item",3,"type","buttonClick",4,"ngIf"],["extraClass","!p-[0.5em]","title","Delete this item",1,"absolute","top-0","right-1",3,"buttonClick","type"],["name","matDeleteForeverSharp"],[1,"p-2"],["extraClass","py-[0.5em] px-[1em]",3,"buttonClick","type"]],template:function(r,s){1&r&&(gt(0,"gn-ui-record-field-group",0)(1,"div",1),gi(2,coe,3,6,"div",2)(3,uoe,3,1,"div",3),ut()()),2&r&&(tt("label",s.label),bt(2),tt("ngIf",s.fieldValue),bt(),tt("ngIf",!s.fieldValue))},dependencies:[g0,T6,u7,U5,c7],styles:['.outer[_ngcontent-%COMP%]{position:relative;background:#ebebeb7f}.outer[_ngcontent-%COMP%]:before{position:absolute;top:0;bottom:0;left:0;width:10px;border-radius:.125rem;border-width:1px;border-right-width:0px;border-color:var(--color-gray-400);content:""}.outer[_ngcontent-%COMP%]:after{position:absolute;top:0;bottom:0;right:0;width:10px;border-radius:.125rem;border-width:1px;border-left-width:0px;border-color:var(--color-gray-400);content:""}'],changeDetection:0})}}return n})();const doe=()=>["dataset","service"],KL=()=>({name:"org"}),qL=n=>({firstName:"first",lastName:"last",email:"email@domain.com",organization:n,role:"unspecified"}),poe=()=>({label:"change me!",type:"other"}),l3=()=>({text:"change me!"}),goe=()=>["other","theme","place","temporal"],foe=()=>["grid","vector","tin","table","point"],moe=()=>["service","download","link"],voe=()=>({url:"",accessServiceProtocol:"OGC:WMS"}),woe=()=>["endpoint","link"];function Coe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-button",29),Ht("buttonClick",function(){return Be(e),Ne(nt().addOwnerOrg())}),gt(1,"span",30),Co(2,"Add a owner organization to this record"),ut()()}2&n&&tt("type","outline")}function yoe(n,t){if(1&n){const e=gr();Df(0),gt(1,"gn-ui-record-field-simple",31),ss("fieldValueChange",function(s){Be(e);const i=nt();return us(i.record.ownerOrganization.name,s)||(i.record.ownerOrganization.name=s),Ne(s)}),Ht("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),gt(2,"gn-ui-record-field-simple",32),ss("fieldValueChange",function(s){Be(e);const i=nt();return us(i.record.ownerOrganization.description,s)||(i.record.ownerOrganization.description=s),Ne(s)}),Ht("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),gt(3,"gn-ui-record-field-simple",33),ss("fieldValueChange",function(s){Be(e);const i=nt();return us(i.record.ownerOrganization.website,s)||(i.record.ownerOrganization.website=s),Ne(s)}),Ht("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),gt(4,"gn-ui-record-field-simple",34),ss("fieldValueChange",function(s){Be(e);const i=nt();return us(i.record.ownerOrganization.logoUrl,s)||(i.record.ownerOrganization.logoUrl=s),Ne(s)}),Ht("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),Bf()}if(2&n){const e=nt();bt(),rs("fieldValue",e.record.ownerOrganization.name),bt(),rs("fieldValue",e.record.ownerOrganization.description),bt(),rs("fieldValue",e.record.ownerOrganization.website),tt("type","url"),bt(),rs("fieldValue",e.record.ownerOrganization.logoUrl),tt("type","url")}}function Ioe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-group",42)(1,"gn-ui-record-field-simple",31),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"organization","name"))})("confirm",function(){return Be(e),Ne(nt(2).emitChangedRecord())}),ut(),gt(2,"gn-ui-record-field-simple",32),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"organization","description"))})("confirm",function(){return Be(e),Ne(nt(2).emitChangedRecord())}),ut(),gt(3,"gn-ui-record-field-simple",33),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"organization","website"))})("confirm",function(){return Be(e),Ne(nt(2).emitChangedRecord())}),ut(),gt(4,"gn-ui-record-field-simple",34),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"organization","logoUrl"))})("confirm",function(){return Be(e),Ne(nt(2).emitChangedRecord())}),ut()()}if(2&n){const e=nt().getValue;bt(),tt("fieldValue",e().organization.name),bt(),tt("fieldValue",e().organization.description),bt(),tt("fieldValue",e().organization.website)("type","url"),bt(),tt("fieldValue",e().organization.logoUrl)("type","url")}}function Aoe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-group",35)(1,"gn-ui-record-field-simple",36),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"firstName"))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),gt(2,"gn-ui-record-field-simple",37),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"lastName"))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),gt(3,"gn-ui-record-field-simple",38),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"email"))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),gt(4,"gn-ui-record-field-simple",39),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"role"))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),gt(5,"gn-ui-record-field-simple",40),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"position"))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),gi(6,Ioe,5,6,"gn-ui-record-field-group",41),ut()}if(2&n){const e=t.getValue,r=nt();bt(),tt("fieldValue",e().firstName),bt(),tt("fieldValue",e().lastName),bt(),tt("fieldValue",e().email),bt(),tt("fieldValue",e().role)("options",r.roleOptions),bt(),tt("fieldValue",e().position),bt(),tt("ngIf",e().organization)}}function boe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-simple",43),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut()}2&n&&tt("fieldValue",(0,t.getValue)())}function xoe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-group")(1,"gn-ui-record-field-simple",44),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"label"))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),gt(2,"gn-ui-record-field-simple",45),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"type"))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),gt(3,"gn-ui-record-field-object",46),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"thesaurus"))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut()()}if(2&n){const e=t.getValue;nt();const r=Nc(35);bt(),tt("fieldValue",e().label)("type","text"),bt(),tt("options",ko(7,goe))("fieldValue",e().type),bt(),tt("optional",!0)("itemTemplate",r)("fieldValue",e().thesaurus)}}function Soe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-simple",47),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"id"))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),gt(1,"gn-ui-record-field-simple",48),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"name"))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),gt(2,"gn-ui-record-field-simple",49),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"url"))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut()}if(2&n){const e=t.getValue;tt("fieldValue",e().id)("type","text"),bt(),tt("fieldValue",e().name)("type","text"),bt(),tt("fieldValue",e().url)("type","url")}}function Hoe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-group")(1,"gn-ui-record-field-simple",50),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"text"))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut(),gt(2,"gn-ui-record-field-simple",49),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"url"))})("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut()()}if(2&n){const e=t.getValue;bt(),tt("fieldValue",e().text)("type","rich"),bt(),tt("fieldValue",e().url)("type","url")}}function _oe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-simple",65),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"url"))})("confirm",function(){return Be(e),Ne(nt(3).emitChangedRecord())}),ut()}if(2&n){const e=nt().getValue;tt("type","url")("fieldValue",e().url)}}function Moe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-simple",66),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"accessServiceProtocol"))})("confirm",function(){return Be(e),Ne(nt(3).emitChangedRecord())}),ut()}2&n&&tt("fieldValue",(0,nt().getValue)().accessServiceProtocol)}function zoe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-simple",67),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"identifierInService"))})("confirm",function(){return Be(e),Ne(nt(3).emitChangedRecord())}),ut()}2&n&&tt("fieldValue",(0,nt().getValue)().identifierInService)}function Voe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-simple",68),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"url"))})("confirm",function(){return Be(e),Ne(nt(3).emitChangedRecord())}),ut()}if(2&n){const e=nt().getValue;tt("type","url")("fieldValue",e().url)}}function Toe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-simple",69),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"mimeType"))})("confirm",function(){return Be(e),Ne(nt(3).emitChangedRecord())}),ut()}2&n&&tt("fieldValue",(0,nt().getValue)().mimeType)}function Eoe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-simple",70),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"sizeBytes"))})("confirm",function(){return Be(e),Ne(nt(3).emitChangedRecord())}),ut()}if(2&n){const e=nt().getValue;tt("type","number")("fieldValue",e().sizeBytes)}}function Loe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-simple",71),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"url"))})("confirm",function(){return Be(e),Ne(nt(3).emitChangedRecord())}),ut()}if(2&n){const e=nt().getValue;tt("type","url")("fieldValue",e().url)}}function Roe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-group",56)(1,"gn-ui-record-field-simple",45),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(nt(2).getOnlineResourceForType(s)))})("confirm",function(){return Be(e),Ne(nt(2).emitChangedRecord())}),ut(),gi(2,_oe,1,2,"gn-ui-record-field-simple",57)(3,Moe,1,1,"gn-ui-record-field-simple",58)(4,zoe,1,1,"gn-ui-record-field-simple",59)(5,Voe,1,2,"gn-ui-record-field-simple",60)(6,Toe,1,1,"gn-ui-record-field-simple",61)(7,Eoe,1,2,"gn-ui-record-field-simple",62)(8,Loe,1,2,"gn-ui-record-field-simple",63),gt(9,"gn-ui-record-field-simple",31),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"name"))})("confirm",function(){return Be(e),Ne(nt(2).emitChangedRecord())}),ut(),gt(10,"gn-ui-record-field-simple",64),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"description"))})("confirm",function(){return Be(e),Ne(nt(2).emitChangedRecord())}),ut()()}if(2&n){const e=t.getValue;bt(),tt("options",ko(12,moe))("fieldValue",e().type),bt(),tt("ngIf","service"===e().type),bt(),tt("ngIf","service"===e().type),bt(),tt("ngIf","service"===e().type),bt(),tt("ngIf","download"===e().type),bt(),tt("ngIf","download"===e().type),bt(),tt("ngIf","download"===e().type),bt(),tt("ngIf","link"===e().type),bt(),tt("fieldValue",e().name),bt(),tt("type","rich")("fieldValue",e().description)}}function Doe(n,t){if(1&n){const e=gr();gt(0,"div")(1,"p",51),Co(2," Dataset record specific fields "),ut(),gt(3,"p")(4,"gn-ui-record-field-simple",52),ss("fieldValueChange",function(s){Be(e);const i=nt();return us(i.record.status,s)||(i.record.status=s),Ne(s)}),Ht("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut()(),gt(5,"p")(6,"gn-ui-record-field-simple",53),ss("fieldValueChange",function(s){Be(e);const i=nt();return us(i.record.spatialRepresentation,s)||(i.record.spatialRepresentation=s),Ne(s)}),Ht("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut()(),gt(7,"p")(8,"gn-ui-record-field-simple",54),ss("fieldValueChange",function(s){Be(e);const i=nt();return us(i.record.lineage,s)||(i.record.lineage=s),Ne(s)}),Ht("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),ut()(),gt(9,"p")(10,"gn-ui-record-field-array",55),ss("fieldValueChange",function(s){Be(e);const i=nt();return us(i.record.distributions,s)||(i.record.distributions=s),Ne(s)}),Ht("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),gi(11,Roe,11,13,"ng-template",null,5,Pc),ut()()()}if(2&n){const e=Nc(12),r=nt();bt(4),rs("fieldValue",r.record.status),tt("options",r.statusOptions),bt(2),rs("fieldValue",r.record.spatialRepresentation),tt("options",ko(9,foe)),bt(2),rs("fieldValue",r.record.lineage),tt("type","rich"),bt(2),rs("fieldValue",r.record.distributions),tt("itemTemplate",e)("defaultItem",r.getOnlineResourceForType("download"))}}function Boe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-simple",77),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"url"))})("confirm",function(){return Be(e),Ne(nt(3).emitChangedRecord())}),ut()}if(2&n){const e=nt().getValue;tt("type","url")("fieldValue",e().url)}}function Noe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-simple",78),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"protocol"))})("confirm",function(){return Be(e),Ne(nt(3).emitChangedRecord())}),ut()}2&n&&tt("fieldValue",(0,nt().getValue)().accessServiceProtocol)}function Foe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-simple",31),Ht("fieldValueChange",function(s){return Be(e),Ne((0,nt().setValue)(s,"name"))})("confirm",function(){return Be(e),Ne(nt(3).emitChangedRecord())}),ut()}2&n&&tt("fieldValue",(0,nt().getValue)().name)}function Poe(n,t){if(1&n){const e=gr();gt(0,"gn-ui-record-field-group",73)(1,"gn-ui-record-field-simple",45),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(nt(2).getOnlineResourceForType(s)))})("confirm",function(){return Be(e),Ne(nt(2).emitChangedRecord())}),ut(),gi(2,Boe,1,2,"gn-ui-record-field-simple",74)(3,Noe,1,1,"gn-ui-record-field-simple",75)(4,Foe,1,1,"gn-ui-record-field-simple",76),gt(5,"gn-ui-record-field-simple",64),Ht("fieldValueChange",function(s){return Ne((0,Be(e).setValue)(s,"description"))})("confirm",function(){return Be(e),Ne(nt(2).emitChangedRecord())}),ut()()}if(2&n){const e=t.getValue;bt(),tt("options",ko(7,woe))("fieldValue",e().type),bt(),tt("ngIf","endpoint"===e().type),bt(),tt("ngIf","endpoint"===e().type),bt(),tt("ngIf","link"===e().type),bt(),tt("type","rich")("fieldValue",e().description)}}function Ooe(n,t){if(1&n){const e=gr();gt(0,"div")(1,"p",51),Co(2," Service record specific fields "),ut(),gt(3,"p")(4,"gn-ui-record-field-array",72),ss("fieldValueChange",function(s){Be(e);const i=nt();return us(i.record.onlineResources,s)||(i.record.onlineResources=s),Ne(s)}),Ht("confirm",function(){return Be(e),Ne(nt().emitChangedRecord())}),gi(5,Poe,6,8,"ng-template",null,6,Pc),ut()()()}if(2&n){const e=Nc(6),r=nt();bt(4),rs("fieldValue",r.record.onlineResources),tt("itemTemplate",e)("defaultItem",ko(3,voe))}}let koe=(()=>{class n{get isDatasetRecord(){return"dataset"===this.record.kind}get isServiceRecord(){return"service"===this.record.kind}constructor(){this.recordChanged=new Kr,this.statusOptions=e$,this.roleOptions=JU,this.switchToRecordKind("dataset")}ngAfterViewInit(){setTimeout(()=>{this.recordChanged.emit(this.record)},100)}emitChangedRecord(){this.recordChanged.emit(this.record)}getOnlineResourceForType(e){switch(e){case"download":case"link":default:return{type:e,url:new URL("",window.location.toString())};case"service":case"endpoint":return{type:e,url:new URL("",window.location.toString()),accessServiceProtocol:"other"}}}switchToRecordKind(e){const r=!!this.record,s={uniqueIdentifier:r?this.record.uniqueIdentifier:"0000-0000-0000-0000",title:r?this.record.title:"My Record",abstract:r?this.record.abstract:"",recordUpdated:r?this.record.recordUpdated:new Date,ownerOrganization:r?this.record.ownerOrganization:{name:"My Organization"},contacts:r?this.record.contacts:[],contactsForResource:r?this.record.contactsForResource:[],licenses:r?[...this.record.licenses]:[],legalConstraints:r?[...this.record.legalConstraints]:[],securityConstraints:r?[...this.record.securityConstraints]:[],otherConstraints:r?[...this.record.otherConstraints]:[],keywords:r?this.record.keywords:[],topics:r?this.record.topics:[],onlineResources:[],otherLanguages:[],defaultLanguage:"en",overviews:[]};this.record="dataset"===e?{...s,kind:"dataset",status:"under_development",updateFrequency:"unknown",lineage:"",spatialExtents:[],temporalExtents:[]}:{...s,kind:"service",spatialExtents:[]},this.recordChanged.emit(this.record)}addOwnerOrg(){this.record={...this.record,ownerOrganization:{name:"My Organization"}},this.recordChanged.emit(this.record)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ro({type:n,selectors:[["gn-ui-record-form"]],inputs:{record:"record"},outputs:{recordChanged:"recordChanged"},decls:48,vars:58,consts:[["contactTpl",""],["topicTpl",""],["keywordTpl",""],["thesaurusTpl",""],["constraintTpl",""],["distributionTpl",""],["endpointTpl",""],["label","Unique identifier",3,"fieldValueChange","confirm","fieldValue"],["label","Title",3,"fieldValueChange","confirm","fieldValue"],["label","Abstract",3,"fieldValueChange","confirm","fieldValue","type"],["label","Kind",3,"fieldValueChange","options","fieldValue"],["label","Owner Organization"],["extraClass","m-2 py-[0.5em] px-[1em]",3,"type","buttonClick",4,"ngIf"],[4,"ngIf"],["label","Contacts",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Contacts for resource",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],[1,"grid","grid-cols-3"],["label","Record created on",3,"fieldValueChange","confirm","fieldValue","type"],["label","Record updated on",3,"fieldValueChange","confirm","fieldValue","type"],["label","Record published on",3,"fieldValueChange","confirm","fieldValue","type"],["label","Resource created on",3,"fieldValueChange","confirm","fieldValue","type"],["label","Resource updated on",3,"fieldValueChange","confirm","fieldValue","type"],["label","Resource published on",3,"fieldValueChange","confirm","fieldValue","type"],["label","Topics",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Keywords",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Licenses",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Legal constraints",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Security constraints",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Other constraints",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["extraClass","m-2 py-[0.5em] px-[1em]",3,"buttonClick","type"],[1,"opacity-70"],["label","Name",3,"fieldValueChange","confirm","fieldValue"],["label","Description",3,"fieldValueChange","confirm","fieldValue"],["label","Website",3,"fieldValueChange","confirm","fieldValue","type"],["label","Logo URL",3,"fieldValueChange","confirm","fieldValue","type"],["label","Contact"],["label","First Name",3,"fieldValueChange","confirm","fieldValue"],["label","Last Name",3,"fieldValueChange","confirm","fieldValue"],["label","Email",3,"fieldValueChange","confirm","fieldValue"],["label","Role",3,"fieldValueChange","confirm","fieldValue","options"],["label","Position",3,"fieldValueChange","confirm","fieldValue"],["label","Organisation",4,"ngIf"],["label","Organisation"],["label","Topic",3,"fieldValueChange","confirm","fieldValue"],["label","Label",3,"fieldValueChange","confirm","fieldValue","type"],["label","Type",3,"fieldValueChange","confirm","options","fieldValue"],["label","Thesaurus",3,"fieldValueChange","confirm","optional","itemTemplate","fieldValue"],["label","Identifier",3,"fieldValueChange","confirm","fieldValue","type"],["label","Name",3,"fieldValueChange","confirm","fieldValue","type"],["label","URL",3,"fieldValueChange","confirm","fieldValue","type"],["label","Text",3,"fieldValueChange","confirm","fieldValue","type"],[1,"text-xl","font-bold","font-title","mt-8","mb-0","m-2"],["label","Status",3,"fieldValueChange","confirm","fieldValue","options"],["label","Spatial Representation Type",3,"fieldValueChange","confirm","fieldValue","options"],["label","Lineage",3,"fieldValueChange","confirm","fieldValue","type"],["label","Distributions",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Distribution"],["label","Access Service URL",3,"type","fieldValue","fieldValueChange","confirm",4,"ngIf"],["label","Access Service Protocol",3,"fieldValue","fieldValueChange","confirm",4,"ngIf"],["label","Identifier In Service",3,"fieldValue","fieldValueChange","confirm",4,"ngIf"],["label","Download URL",3,"type","fieldValue","fieldValueChange","confirm",4,"ngIf"],["label","Mime Type",3,"fieldValue","fieldValueChange","confirm",4,"ngIf"],["label","Size In Bytes",3,"type","fieldValue","fieldValueChange","confirm",4,"ngIf"],["label","Link URL",3,"type","fieldValue","fieldValueChange","confirm",4,"ngIf"],["label","Description",3,"fieldValueChange","confirm","type","fieldValue"],["label","Access Service URL",3,"fieldValueChange","confirm","type","fieldValue"],["label","Access Service Protocol",3,"fieldValueChange","confirm","fieldValue"],["label","Identifier In Service",3,"fieldValueChange","confirm","fieldValue"],["label","Download URL",3,"fieldValueChange","confirm","type","fieldValue"],["label","Mime Type",3,"fieldValueChange","confirm","fieldValue"],["label","Size In Bytes",3,"fieldValueChange","confirm","type","fieldValue"],["label","Link URL",3,"fieldValueChange","confirm","type","fieldValue"],["label","Online Resources",3,"fieldValueChange","confirm","fieldValue","itemTemplate","defaultItem"],["label","Online Resource"],["label","Endpoint URL",3,"type","fieldValue","fieldValueChange","confirm",4,"ngIf"],["label","Protocol",3,"fieldValue","fieldValueChange","confirm",4,"ngIf"],["label","Name",3,"fieldValue","fieldValueChange","confirm",4,"ngIf"],["label","Endpoint URL",3,"fieldValueChange","confirm","type","fieldValue"],["label","Protocol",3,"fieldValueChange","confirm","fieldValue"]],template:function(r,s){if(1&r){const i=gr();gt(0,"p")(1,"gn-ui-record-field-simple",7),ss("fieldValueChange",function(a){return Be(i),us(s.record.uniqueIdentifier,a)||(s.record.uniqueIdentifier=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut()(),gt(2,"p")(3,"gn-ui-record-field-simple",8),ss("fieldValueChange",function(a){return Be(i),us(s.record.title,a)||(s.record.title=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut()(),gt(4,"p")(5,"gn-ui-record-field-simple",9),ss("fieldValueChange",function(a){return Be(i),us(s.record.abstract,a)||(s.record.abstract=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut()(),gt(6,"p")(7,"gn-ui-record-field-simple",10),Ht("fieldValueChange",function(a){return Be(i),Ne(s.switchToRecordKind(a))}),ut()(),gt(8,"p")(9,"gn-ui-record-field-group",11),gi(10,Coe,3,1,"gn-ui-button",12)(11,yoe,5,6,"ng-container",13),ut()(),gt(12,"p")(13,"gn-ui-record-field-array",14),ss("fieldValueChange",function(a){return Be(i),us(s.record.contacts,a)||(s.record.contacts=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut()(),gt(14,"p")(15,"gn-ui-record-field-array",15),ss("fieldValueChange",function(a){return Be(i),us(s.record.contactsForResource,a)||(s.record.contactsForResource=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut()(),gi(16,Aoe,7,7,"ng-template",null,0,Pc),gt(18,"p",16)(19,"gn-ui-record-field-simple",17),ss("fieldValueChange",function(a){return Be(i),us(s.record.recordCreated,a)||(s.record.recordCreated=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut(),gt(20,"gn-ui-record-field-simple",18),ss("fieldValueChange",function(a){return Be(i),us(s.record.recordUpdated,a)||(s.record.recordUpdated=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut(),gt(21,"gn-ui-record-field-simple",19),ss("fieldValueChange",function(a){return Be(i),us(s.record.recordPublished,a)||(s.record.recordPublished=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut()(),gt(22,"p",16)(23,"gn-ui-record-field-simple",20),ss("fieldValueChange",function(a){return Be(i),us(s.record.resourceCreated,a)||(s.record.resourceCreated=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut(),gt(24,"gn-ui-record-field-simple",21),ss("fieldValueChange",function(a){return Be(i),us(s.record.resourceUpdated,a)||(s.record.resourceUpdated=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut(),gt(25,"gn-ui-record-field-simple",22),ss("fieldValueChange",function(a){return Be(i),us(s.record.resourcePublished,a)||(s.record.resourcePublished=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut()(),gt(26,"p")(27,"gn-ui-record-field-array",23),ss("fieldValueChange",function(a){return Be(i),us(s.record.topics,a)||(s.record.topics=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),gi(28,boe,1,1,"ng-template",null,1,Pc),ut()(),gt(30,"p")(31,"gn-ui-record-field-array",24),ss("fieldValueChange",function(a){return Be(i),us(s.record.keywords,a)||(s.record.keywords=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut()(),gi(32,xoe,4,8,"ng-template",null,2,Pc)(34,Soe,3,6,"ng-template",null,3,Pc)(36,Hoe,3,4,"ng-template",null,4,Pc),gt(38,"p")(39,"gn-ui-record-field-array",25),ss("fieldValueChange",function(a){return Be(i),us(s.record.licenses,a)||(s.record.licenses=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut()(),gt(40,"p")(41,"gn-ui-record-field-array",26),ss("fieldValueChange",function(a){return Be(i),us(s.record.legalConstraints,a)||(s.record.legalConstraints=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut()(),gt(42,"p")(43,"gn-ui-record-field-array",27),ss("fieldValueChange",function(a){return Be(i),us(s.record.securityConstraints,a)||(s.record.securityConstraints=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut()(),gt(44,"p")(45,"gn-ui-record-field-array",28),ss("fieldValueChange",function(a){return Be(i),us(s.record.otherConstraints,a)||(s.record.otherConstraints=a),Ne(a)}),Ht("confirm",function(){return Be(i),Ne(s.emitChangedRecord())}),ut()(),gi(46,Doe,13,10,"div",13)(47,Ooe,7,4,"div",13)}if(2&r){const i=Nc(17),o=Nc(29),a=Nc(33),l=Nc(37);bt(),rs("fieldValue",s.record.uniqueIdentifier),bt(2),rs("fieldValue",s.record.title),bt(2),rs("fieldValue",s.record.abstract),tt("type","rich"),bt(2),tt("options",ko(46,doe))("fieldValue",s.record.kind),bt(3),tt("ngIf",!s.record.ownerOrganization),bt(),tt("ngIf",s.record.ownerOrganization),bt(2),rs("fieldValue",s.record.contacts),tt("itemTemplate",i)("defaultItem",Zf(48,qL,ko(47,KL))),bt(2),rs("fieldValue",s.record.contactsForResource),tt("itemTemplate",i)("defaultItem",Zf(51,qL,ko(50,KL))),bt(4),rs("fieldValue",s.record.recordCreated),tt("type","date"),bt(),rs("fieldValue",s.record.recordUpdated),tt("type","date"),bt(),rs("fieldValue",s.record.recordPublished),tt("type","date"),bt(2),rs("fieldValue",s.record.resourceCreated),tt("type","date"),bt(),rs("fieldValue",s.record.resourceUpdated),tt("type","date"),bt(),rs("fieldValue",s.record.resourcePublished),tt("type","date"),bt(2),rs("fieldValue",s.record.topics),tt("itemTemplate",o)("defaultItem","change me!"),bt(4),rs("fieldValue",s.record.keywords),tt("itemTemplate",a)("defaultItem",ko(53,poe)),bt(8),rs("fieldValue",s.record.licenses),tt("itemTemplate",l)("defaultItem",ko(54,l3)),bt(2),rs("fieldValue",s.record.legalConstraints),tt("itemTemplate",l)("defaultItem",ko(55,l3)),bt(2),rs("fieldValue",s.record.securityConstraints),tt("itemTemplate",l)("defaultItem",ko(56,l3)),bt(2),rs("fieldValue",s.record.otherConstraints),tt("itemTemplate",l)("defaultItem",ko(57,l3)),bt(),tt("ngIf",s.isDatasetRecord),bt(),tt("ngIf",s.isServiceRecord)}},dependencies:[g0,U5,Fie,c7,ooe,hoe],styles:["[_nghost-%COMP%]{font-size:14px}"]})}}return n})();const Goe=["codeBlock"];let Woe=(()=>{class n{set recordXml(e){const s=window.hljs.highlight(e,{language:"xml"}).value;this.codeBlockEl.nativeElement.innerHTML=s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ro({type:n,selectors:[["gn-ui-record-output-xml"]],viewQuery:function(r,s){if(1&r&&Qd(Goe,5),2&r){let i;e0(i=t0())&&(s.codeBlockEl=i.first)}},inputs:{recordXml:"recordXml"},decls:2,vars:0,consts:[["codeBlock",""],[1,"text-[14px]","hljs","overflow-auto","min-h-[80vh]","whitespace-pre-wrap"]],template:function(r,s){1&r&&Lu(0,"pre",1,0)}})}}return n})();const Zoe=["status"],joe=["output"],Uoe=["form"],$oe=n=>({"font-bold":n});function Xoe(n,t){1&n&&(gt(0,"span"),Co(1,"(native)"),ut())}function Yoe(n,t){if(1&n){const e=gr();gt(0,"label",15)(1,"input",16),Ht("change",function(s){return Be(e),Ne(nt().onFormatChange(s.target.value))}),ut(),Co(2),gi(3,Xoe,2,0,"span",17),ut()}if(2&n){const e=t.$implicit,r=nt();tt("ngClass",Zf(5,$oe,e.key===r.originalFormat)),bt(),tt("checked",e.key===r.currentFormat)("value",e.key),bt(),Fc(" ",e.key," "),bt(),tt("ngIf",e.key===r.originalFormat)}}let Koe=(()=>{class n{constructor(){this.formats=_5}get originalFormat(){const e=this.statusComponent?.currentConverter;return aT(e)}onRecordChange(e){this.statusComponent.recordNative=e}onRecordOutputReceived(e){this.outputComponent.recordXml=e,this.currentFormat=this.originalFormat}onRecordNativeReceived(e){this.formComponent.record=e}onFileSelect(e){const r=e.target.files;if(0===r.length)return void console.warn("no file selected");const s=r[0],i=new FileReader;this.statusComponent.startReadingFile(),i.readAsText(s,"UTF-8"),i.onload=o=>{const a=o.target.result;this.statusComponent.referenceMetadata=a,this.statusComponent.currentMetadata=a},i.onerror=()=>this.statusComponent.errorReadingFile()}onFileUrlInput(e){!e||!e.startsWith("http://")&&!e.startsWith("https://")||(this.statusComponent.startLoadingFile(),fetch(e).then(r=>r.text()).then(r=>{this.statusComponent.referenceMetadata=r,this.statusComponent.currentMetadata=r}).catch(r=>this.statusComponent.errorLoadingFile(r.message)))}onFormatChange(e){this.statusComponent.changeFormat(e)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ro({type:n,selectors:[["gn-ui-root"]],viewQuery:function(r,s){if(1&r&&(Qd(Zoe,5),Qd(joe,5),Qd(Uoe,5)),2&r){let i;e0(i=t0())&&(s.statusComponent=i.first),e0(i=t0())&&(s.outputComponent=i.first),e0(i=t0())&&(s.formComponent=i.first)}},decls:18,vars:3,consts:[["status",""],["form",""],["output",""],[1,"grid","grid-cols-3","grid-rows-auto","auto-rows-min","h-full"],[1,"col-span-3","flex","flex-row","items-start"],[1,"text-[50px]","font-bold","font-title","my-6","mx-10"],[1,"whitespace-nowrap"],[1,"font-main","font-normal","text-gray-900","text-[16px]",3,"newMetadata","newRecordNative"],[1,"grow","shrink-0","p-3","min-w-[50%]"],["type","file","accept",".xml, .rdf, application/xml, application/rdf+xml, .jsonld, application/ld+json, application/json, .ttl, text/turtle, .n3, text/n3, .nt, application/n-triples","placeholder","Upload a record from your computer",1,"mb-3","border","border-gray-500","rounded-sm","w-full","bg-white","p-2",3,"change"],["type","text","placeholder","...or enter a URL pointing to a metadata record",1,"mb-3","border","border-gray-500","rounded-sm","w-full","bg-white","p-2",3,"change"],[1,"w-full"],["class","mr-4",3,"ngClass",4,"ngFor","ngForOf"],[1,"overflow-auto",3,"recordChanged"],[1,"col-span-2"],[1,"mr-4",3,"ngClass"],["type","radio","name","format",3,"change","checked","value"],[4,"ngIf"]],template:function(r,s){if(1&r){const i=gr();gt(0,"div",3)(1,"header",4)(2,"div")(3,"h1",5)(4,"div",6),Co(5,"Simple metadata editor"),ut(),gt(6,"gn-ui-status",7,0),Ht("newMetadata",function(a){return Be(i),Ne(s.onRecordOutputReceived(a))})("newRecordNative",function(a){return Be(i),Ne(s.onRecordNativeReceived(a))}),ut()()(),gt(8,"div",8)(9,"input",9),Ht("change",function(a){return Be(i),Ne(s.onFileSelect(a))}),ut(),gt(10,"input",10),Ht("change",function(a){return Be(i),Ne(s.onFileUrlInput(a.target.value))}),ut(),gt(11,"div",11),gi(12,Yoe,4,7,"label",12),function LS(n,t){const e=Jn();let r;const s=n+on;e.firstCreatePass?(r=function $O(n,t){if(t)for(let e=t.length-1;e>=0;e--){const r=t[e];if(n===r.name)return r}}(t,e.pipeRegistry),e.data[s]=r,r.onDestroy&&(e.destroyHooks??=[]).push(s,r.onDestroy)):r=e.data[s];const i=r.factory||(r.factory=lr(r.type)),a=Ui(Tt);try{const l=nd(!1),c=i();return nd(l),function Ww(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}(e,We(),s,c),c}finally{Ui(a)}}(13,"keyvalue"),ut()()(),gt(14,"gn-ui-record-form",13,1),Ht("recordChanged",function(a){return Be(i),Ne(s.onRecordChange(a))}),ut(),Lu(16,"gn-ui-record-output-xml",14,2),ut()}2&r&&(bt(12),tt("ngForOf",RS(13,1,s.formats)))},dependencies:[a_,y4,g0,koe,Woe,mee,d_]})}}return n})(),Joe=(()=>{class n{constructor(){wne.applyCssVariables("#c82850","#001638","#212029","#fdfbff","'Rubik', sans-serif","'Readex Pro', sans-serif","https://fonts.googleapis.com/css2?family=Readex+Pro&family=Rubik&display=swap")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pr({type:n,bootstrap:[Koe]})}static{this.\u0275inj=pa({providers:[gee(),Xie({size:"1.5em"})],imports:[Aj,Mie,roe.withIcons({matDeleteForeverSharp:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6 21h12V7H6v14zm2.46-9.12l1.41-1.41L12 12.59l2.12-2.12l1.41 1.41L13.41 14l2.12 2.12l-1.41 1.41L12 15.41l-2.12 2.12l-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4h-3.5z"></path></svg>'})]})}}return n})();yj().bootstrapModule(Joe).catch(n=>console.error(n))},6998:function(Fn,at){var Ve,Ue;void 0!==(Ue="function"==typeof(Ve=function(){"use strict";function lt(_,ge,p,Oe){this.message=_,this.expected=ge,this.found=p,this.location=Oe,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,lt)}return function Je(_,ge){function p(){this.constructor=_}p.prototype=ge.prototype,_.prototype=new p}(lt,Error),lt.buildMessage=function(_,ge){var p={literal:function(ae){return'"'+Xe(ae.text)+'"'},class:function(ae){var St,be="";for(St=0;St<ae.parts.length;St++)be+=ae.parts[St]instanceof Array?ue(ae.parts[St][0])+"-"+ue(ae.parts[St][1]):ue(ae.parts[St]);return"["+(ae.inverted?"^":"")+be+"]"},any:function(ae){return"any character"},end:function(ae){return"end of input"},other:function(ae){return ae.description}};function Oe(ae){return ae.charCodeAt(0).toString(16).toUpperCase()}function Xe(ae){return ae.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(be){return"\\x0"+Oe(be)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(be){return"\\x"+Oe(be)})}function ue(ae){return ae.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(be){return"\\x0"+Oe(be)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(be){return"\\x"+Oe(be)})}function ke(ae){return p[ae.type](ae)}return"Expected "+function se(ae){var St,ee,be=new Array(ae.length);for(St=0;St<ae.length;St++)be[St]=ke(ae[St]);if(be.sort(),be.length>0){for(St=1,ee=1;St<be.length;St++)be[St-1]!==be[St]&&(be[ee]=be[St],ee++);be.length=ee}switch(be.length){case 1:return be[0];case 2:return be[0]+" or "+be[1];default:return be.slice(0,-1).join(", ")+", or "+be[be.length-1]}}(_)+" but "+function q(ae){return ae?'"'+Xe(ae)+'"':"end of input"}(ge)+" found."},{SyntaxError:lt,parse:function Pe(_,ge){ge=void 0!==ge?ge:{};var g1,p={},Oe={turtleDoc:z2},Xe=z2,ue=function(w){var H=Tr.toJSON();return H["@graph"]=[],w.filter(z=>Array.isArray(z)).forEach(z=>{z.forEach(B=>{H["@graph"].push(B)})}),1===H["@graph"].length&&(Object.assign(H,H["@graph"][0]),delete H["@graph"]),H},ke="\ufeff",se=On("\ufeff",!1),q=".",ae=On(".",!1),be=function(w){return w},St="#",ee=On("#",!1),ve=/^[^\n]/,xe=lr(["\n"],!0,!1),Ee="\n",et=On("\n",!1),Ct=function(w){return w.join("")},mt="@prefix",Nt=On("@prefix",!1),Re=function(w,H){return Tr.addPrefix(""===w?"0":w,H),{}},$e="@base",Ye=On("@base",!1),Wt=function(w){return Tr.addBase(w),{}},ne=/^[Bb]/,De=lr(["B","b"],!1,!1),It=/^[Aa]/,kt=lr(["A","a"],!1,!1),Dt=/^[Ss]/,F=lr(["S","s"],!1,!1),j=/^[Ee]/,Te=lr(["E","e"],!1,!1),qe=/^[Pp]/,st=lr(["P","p"],!1,!1),ln=/^[Rr]/,Xt=lr(["R","r"],!1,!1),pn=/^[Ff]/,jr=lr(["F","f"],!1,!1),Ts=/^[Ii]/,Pn=lr(["I","i"],!1,!1),os=/^[Xx]/,Zs=lr(["X","x"],!1,!1),ji=function(w,H){var z={};return"string"==typeof w&&"[]"!==w?z["@id"]=w:"object"==typeof w&&Object.assign(z,w),H&&Object.assign(z,H),[z]},ir=function(w,H){var z={};return w&&Object.assign(z,w),H&&Object.assign(z,H),[z]},Hn=";",P=On(";",!1),le=function(w,H,z,B){var W={};return W[z]=B,W},Ie=function(w,H,z){return z},_t=function(w,H,z){var B={};return z.unshift(function rl(w,H){var z={};return z[w]=H,z}(w,H)),z.forEach(W=>{W&&Object.keys(W).forEach(Y=>{W[Y].forEach(Q=>{"@type"===Y&&void 0!==Q["@id"]&&(Q=Q["@id"]),void 0===B[Y]?B[Y]=Q:Array.isArray(B[Y])?B[Y].push(Q):B[Y]=[B[Y],Q]})})}),B},sn=",",Dn=On(",",!1),Bn=function(w,H){return H},Jt=function(w,H){return H.unshift(w),H},qt="a",En=On("a",!1),Nn=function(){return"@type"},Rr=function(w){return Cc(w,!0)},fs=function(w){return Cc(w,!1)},L=function(w){return"[]"===w?{}:{"@id":w}},A=function(w){return{"@id":w}},S="[",O=On("[",!1),re="]",Ae=On("]",!1),je="(",jt=On("(",!1),er=")",qn=On(")",!1),te=function(w){return{"@list":w}},he=function(w,H){return{"@value":w,"@language":H}},Qe="^^",ct=On("^^",!1),Yt=function(w,H){if("http://www.w3.org/2001/XMLSchema#boolean"===H&&"true"===w)return!0;if("http://www.w3.org/2001/XMLSchema#boolean"===H&&"false"===w)return!1;if("http://www.w3.org/2001/XMLSchema#integer"===H)return parseInt(w);if("http://www.w3.org/2001/XMLSchema#double"===H)return parseFloat(w);const z=Tr.resolve(H,!0);if(z){const B=H.split(":")[0];if("http://www.w3.org/2001/XMLSchema#boolean"===z&&"true"===w)return Tr.decrement(B),!0;if("http://www.w3.org/2001/XMLSchema#boolean"===z&&"false"===w)return Tr.decrement(B),!1;if("http://www.w3.org/2001/XMLSchema#integer"===z)return Tr.decrement(B),parseInt(w);if("http://www.w3.org/2001/XMLSchema#double"===z)return Tr.decrement(B),parseFloat(w)}return{"@value":w,"@type":H}},Ln="true",ar=On("true",!1),zn=function(){return!0},hr="false",Vr=On("false",!1),js=function(){return!1},Ri=function(w){return w+":"},Ps="<",Di=On("<",!1),Vo=/^[^\0- <>"{}|\^`\\]/,tl=lr([["\0"," "],"<",">",'"',"{","}","|","^","`","\\"],!0,!1),xi=">",To=On(">",!1),E=function(w){const H=w.map(B=>65536<=B.codePointAt(0)&&B.codePointAt(0)<=983039?"a":1===B.length?B:6===B.length?String.fromCharCode("0x"+B.substring(2)):10===B.length?String.fromCodePoint("0x"+B.substring(2)):B).join("");if(H.match(/^[^\u0000-\u0020<>"{}|^`\\]*$/)){var z=w.join("");try{return Tr.resolve(z)}catch{fc("Invalid IRIREF "+z)}}else fc("Invalid IRIREF "+w.join("")+" / "+H)},R=":",$=On(":",!1),ze=function(w){return!1===Tr.hasPrefix(w=w||"0")&&fc("undefined prefix "+w),w},ie=function(w){return w||""},cn=function(w,H){return Tr.increment(w),Tr.resolve(w+":"+H)},vr="_:",Js=On("_:",!1),br=/^[0-9]/,xr=lr([["0","9"]],!1,!1),io="@",Us=On("@",!1),Si=/^[a-zA-Z]/,Hi=lr([["a","z"],["A","Z"]],!1,!1),Es="-",ot=On("-",!1),Ls=/^[a-zA-Z0-9]/,tr=lr([["a","z"],["A","Z"],["0","9"]],!1,!1),Rs=function(w,H){return"-"+H.join("")},Ut=function(w,H){return w.join("")+H.join("")},Bi=/^[+\-]/,d2=lr(["+","-"],!1,!1),Dr=function(w){return w.match(/^[0+][0-9]+$/)?{"@value":w,"@type":"http://www.w3.org/2001/XMLSchema#integer"}:parseInt(w)},wp=function(w){return{"@value":w,"@type":"http://www.w3.org/2001/XMLSchema#decimal"}},$s=function(w){return{"@value":w,"@type":"http://www.w3.org/2001/XMLSchema#double"}},p2=/^[eE]/,u3=lr(["e","E"],!1,!1),a1='"',Br=On('"',!1),wn=/^[^"\\\n\r]/,uc=lr(['"',"\\","\n","\r"],!0,!1),_i="'",g2=On("'",!1),yh=/^[^'\\\n\r]/,Cp=lr(["'","\\","\n","\r"],!0,!1),Eo="'''",yp=On("'''",!1),ca=/^[^'\\]/,ua=lr(["'","\\"],!0,!1),f2="''",Ih=On("''",!1),Ip=function(w,H){return"''"+H.join("")},Ah=function(w,H){return"'"+H.join("")},Ap=function(w,H){return w.join("")+H.join("")},Mi='"""',mn=On('"""',!1),ha=/^[^"\\]/,da=lr(['"',"\\"],!0,!1),m2='""',bp=On('""',!1),xp=function(w,H){return'""'+H.join("")},zt=function(w,H){return'"'+H.join("")},Sp="\\U",pa=On("\\U",!1),l1=function(w){return String.fromCodePoint(parseInt(w.join(""),16))},Hp="\\u",bh=On("\\u",!1),_p=function(w){return String.fromCharCode(parseInt(w.join(""),16))},hc="\\t",c1=On("\\t",!1),v2=function(){return"\t"},w2="\\b",Mp=On("\\b",!1),At=function(){return"\b"},u1="\\n",C2=On("\\n",!1),xh=function(){return"\n"},h1="\\r",zp=On("\\r",!1),y2=function(){return"\r"},Vp="\\f",h3=On("\\f",!1),d3=function(){return"\f"},Tp='\\"',I2=On('\\"',!1),dc=function(){return'"'},d1="\\'",A2=On("\\'",!1),Sh=function(){return"'"},Uo="\\\\",pc=On("\\\\",!1),Hh=function(){return"\\"},Vn=/^[ \t\r\n]/,Sr=lr([" ","\t","\r","\n"],!1,!1),p3=function(){return"[]"},Ep=/^[\uD800-\uDBFF]/,Lp=lr([["\ud800","\udbff"]],!1,!1),g3=/^[\uDC00-\uDFFF]/,Rp=lr([["\udc00","\udfff"]],!1,!1),b2=function(w,H){return w+H},nr=/^[A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,x2=lr([["A","Z"],["a","z"],["\xc0","\xd6"],["\xd8","\xf6"],["\xf8","\u02ff"],["\u0370","\u037d"],["\u037f","\u1fff"],["\u200c","\u200d"],["\u2070","\u218f"],["\u2c00","\u2fef"],["\u3001","\ud7ff"],["\uf900","\ufdcf"],["\ufdf0","\ufffd"]],!1,!1),_h="_",Ui=On("_",!1),Mh="\xb7",f3=On("\xb7",!1),m3=/^[\u0300-\u036F]/,gc=lr([["\u0300","\u036f"]],!1,!1),S2=/^[\u203F-\u2040]/,p1=lr([["\u203f","\u2040"]],!1,!1),zh=function(w,H,z,B){return z.join("")+B.join("")},Dp=function(w,H,z){return w+H.join("")+z.join("")},Bp="%",Vh=On("%",!1),Rl=/^[0-9A-Fa-f]/,Np=lr([["0","9"],["A","F"],["a","f"]],!1,!1),Ta="\\",Fp=On("\\",!1),Se=/^[_~.!$&'()*+,;=\/?#@%\-]/,Th=lr(["_","~",".","!","$","&","'","(",")","*","+",",",";","=","/","?","#","@","%","-"],!1,!1),v=0,Mt=0,Dl=[{line:1,column:1}],$i=0,H2=[],we=0;if("startRule"in ge){if(!(ge.startRule in Oe))throw new Error("Can't start parsing from rule \""+ge.startRule+'".');Xe=Oe[ge.startRule]}function fc(w,H){throw function M2(w,H){return new lt(w,null,null,H)}(w,H=void 0!==H?H:Ea(Mt,v))}function On(w,H){return{type:"literal",text:w,ignoreCase:H}}function lr(w,H,z){return{type:"class",parts:w,inverted:H,ignoreCase:z}}function _2(w){var z,H=Dl[w];if(H)return H;for(z=w-1;!Dl[z];)z--;for(H={line:(H=Dl[z]).line,column:H.column};z<w;)10===_.charCodeAt(z)?(H.line++,H.column=1):H.column++,z++;return Dl[w]=H,H}function Ea(w,H){var z=_2(w),B=_2(H);return{start:{offset:w,line:z.line,column:z.column},end:{offset:H,line:B.line,column:B.column}}}function fe(w){v<$i||(v>$i&&($i=v,H2=[]),H2.push(w))}function z2(){var w,H,z,B,W;for(w=v,H=[],z=Op();z!==p;)H.push(z),z=Op();if(H!==p){for(z=[],B=Yi();B!==p;)z.push(B),B=Yi();if(z!==p){for(B=[],W=Vt();W!==p;)B.push(W),W=Vt();B!==p?(Mt=w,w=H=ue(z)):(v=w,w=p)}else v=w,w=p}else v=w,w=p;return w}function Op(){var w;return 65279===_.charCodeAt(v)?(w=ke,v++):(w=p,0===we&&fe(se)),w}function Yi(){var w,H,z,B;if((w=function y3(){var w;return(w=function Lh(){var w,H,z,B,W,Y,Q,Z,Rt;for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();if(H!==p)if(_.substr(v,7)===mt?(z=mt,v+=7):(z=p,0===we&&fe(Nt)),z!==p){for(B=[],W=Vt();W!==p;)B.push(W),W=Vt();if(B!==p)if((W=D2())!==p){for(Y=[],Q=Vt();Q!==p;)Y.push(Q),Q=Vt();if(Y!==p)if((Q=Ni())!==p){for(Z=[],Rt=Vt();Rt!==p;)Z.push(Rt),Rt=Vt();Z!==p?(46===_.charCodeAt(v)?(Rt=q,v++):(Rt=p,0===we&&fe(ae)),Rt!==p?(Mt=w,w=H=Re(W,Q)):(v=w,w=p)):(v=w,w=p)}else v=w,w=p;else v=w,w=p}else v=w,w=p;else v=w,w=p}else v=w,w=p;else v=w,w=p;return w}())===p&&(w=function $o(){var w,H,z,B,W,Y,Q;for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();if(H!==p)if(_.substr(v,5)===$e?(z=$e,v+=5):(z=p,0===we&&fe(Ye)),z!==p){for(B=[],W=Vt();W!==p;)B.push(W),W=Vt();if(B!==p)if((W=Ni())!==p){for(Y=[],Q=Vt();Q!==p;)Y.push(Q),Q=Vt();Y!==p?(46===_.charCodeAt(v)?(Q=q,v++):(Q=p,0===we&&fe(ae)),Q!==p?(Mt=w,w=H=Wt(W)):(v=w,w=p)):(v=w,w=p)}else v=w,w=p;else v=w,w=p}else v=w,w=p;else v=w,w=p;return w}())===p&&(w=function ga(){var w,H,z,B,W,Y,Q,Z,Rt,Nr,fa,Xo;for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();if(H!==p)if(qe.test(_.charAt(v))?(z=_.charAt(v),v++):(z=p,0===we&&fe(st)),z!==p)if(ln.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(Xt)),B!==p)if(j.test(_.charAt(v))?(W=_.charAt(v),v++):(W=p,0===we&&fe(Te)),W!==p)if(pn.test(_.charAt(v))?(Y=_.charAt(v),v++):(Y=p,0===we&&fe(jr)),Y!==p)if(Ts.test(_.charAt(v))?(Q=_.charAt(v),v++):(Q=p,0===we&&fe(Pn)),Q!==p)if(os.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(Zs)),Z!==p){for(Rt=[],Nr=Vt();Nr!==p;)Rt.push(Nr),Nr=Vt();if(Rt!==p)if((Nr=D2())!==p){for(fa=[],Xo=Vt();Xo!==p;)fa.push(Xo),Xo=Vt();fa!==p&&(Xo=Ni())!==p?(Mt=w,w=H=Re(Nr,Xo)):(v=w,w=p)}else v=w,w=p;else v=w,w=p}else v=w,w=p;else v=w,w=p;else v=w,w=p;else v=w,w=p;else v=w,w=p;else v=w,w=p;else v=w,w=p;return w}())===p&&(w=function dr(){var w,H,z,B,W,Y,Q,Z;for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();if(H!==p)if(ne.test(_.charAt(v))?(z=_.charAt(v),v++):(z=p,0===we&&fe(De)),z!==p)if(It.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(kt)),B!==p)if(Dt.test(_.charAt(v))?(W=_.charAt(v),v++):(W=p,0===we&&fe(F)),W!==p)if(j.test(_.charAt(v))?(Y=_.charAt(v),v++):(Y=p,0===we&&fe(Te)),Y!==p){for(Q=[],Z=Vt();Z!==p;)Q.push(Z),Z=Vt();Q!==p&&(Z=Ni())!==p?(Mt=w,w=H=Wt(Z)):(v=w,w=p)}else v=w,w=p;else v=w,w=p;else v=w,w=p;else v=w,w=p;else v=w,w=p;return w}()),w}())===p)if(w=v,(H=function Rh(){var w,H,z;return w=v,(H=function Lo(){var w,H;return w=v,(H=L2())!==p&&(Mt=w,H=Rr(H)),(w=H)===p&&(w=Nh())===p&&(w=Pl()),w}())!==p&&(z=mc())!==p?(Mt=w,w=H=ji(H,z)):(v=w,w=p),w===p&&(w=v,(H=E2())!==p?((z=mc())===p&&(z=null),z!==p?(Mt=w,w=H=ir(H,z)):(v=w,w=p)):(v=w,w=p)),w}())!==p){for(z=[],B=Vt();B!==p;)z.push(B),B=Vt();z!==p?(46===_.charCodeAt(v)?(B=q,v++):(B=p,0===we&&fe(ae)),B!==p?(Mt=w,w=H=be(H)):(v=w,w=p)):(v=w,w=p)}else v=w,w=p;return w}function Vt(){var w;return(w=function Rn(){var w;return Vn.test(_.charAt(v))?(w=_.charAt(v),v++):(w=p,0===we&&fe(Sr)),w}())===p&&(w=function V2(){var w,H,z,B;if(w=v,35===_.charCodeAt(v)?(H=St,v++):(H=p,0===we&&fe(ee)),H!==p){for(z=[],ve.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(xe));B!==p;)z.push(B),ve.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(xe));z!==p?(10===_.charCodeAt(v)?(B=Ee,v++):(B=p,0===we&&fe(et)),B!==p?(Mt=w,w=H=Ct(z)):(v=w,w=p)):(v=w,w=p)}else v=w,w=p;return w}()),w}function mc(){var w,H,z,B,W,Y,Q,Z,Rt,Nr;if(w=v,(H=Fl())!==p)if((z=Nl())!==p){for(B=[],W=v,Y=[],Q=Vt();Q!==p;)Y.push(Q),Q=Vt();for(Y!==p?(59===_.charCodeAt(v)?(Q=Hn,v++):(Q=p,0===we&&fe(P)),Q!==p?(Z=v,(Rt=Fl())!==p&&(Nr=Nl())!==p?(Mt=Z,Z=Rt=le(H,z,Rt,Nr)):(v=Z,Z=p),Z===p&&(Z=null),Z!==p?(Mt=W,W=Y=Ie(H,z,Z)):(v=W,W=p)):(v=W,W=p)):(v=W,W=p);W!==p;){for(B.push(W),W=v,Y=[],Q=Vt();Q!==p;)Y.push(Q),Q=Vt();Y!==p?(59===_.charCodeAt(v)?(Q=Hn,v++):(Q=p,0===we&&fe(P)),Q!==p?(Z=v,(Rt=Fl())!==p&&(Nr=Nl())!==p?(Mt=Z,Z=Rt=le(H,z,Rt,Nr)):(v=Z,Z=p),Z===p&&(Z=null),Z!==p?(Mt=W,W=Y=Ie(H,z,Z)):(v=W,W=p)):(v=W,W=p)):(v=W,W=p)}B!==p?(Mt=w,w=H=_t(H,z,B)):(v=w,w=p)}else v=w,w=p;else v=w,w=p;return w}function Nl(){var w,H,z,B,W,Y,Q;if(w=v,(H=vc())!==p){for(z=[],B=v,W=[],Y=Vt();Y!==p;)W.push(Y),Y=Vt();for(W!==p?(44===_.charCodeAt(v)?(Y=sn,v++):(Y=p,0===we&&fe(Dn)),Y!==p&&(Q=vc())!==p?(Mt=B,B=W=Bn(H,Q)):(v=B,B=p)):(v=B,B=p);B!==p;){for(z.push(B),B=v,W=[],Y=Vt();Y!==p;)W.push(Y),Y=Vt();W!==p?(44===_.charCodeAt(v)?(Y=sn,v++):(Y=p,0===we&&fe(Dn)),Y!==p&&(Q=vc())!==p?(Mt=B,B=W=Bn(H,Q)):(v=B,B=p)):(v=B,B=p)}z!==p?(Mt=w,w=H=Jt(H,z)):(v=w,w=p)}else v=w,w=p;return w}function Fl(){var w,H,z;if(w=v,(H=function La(){var w,H,z;for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();return H!==p&&(z=Pl())!==p?(Mt=w,w=H=be(z)):(v=w,w=p),w}())!==p&&(Mt=w,H=be(H)),(w=H)===p){for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();H!==p?(97===_.charCodeAt(v)?(z=qt,v++):(z=p,0===we&&fe(En)),z!==p?(Mt=w,w=H=Nn()):(v=w,w=p)):(v=w,w=p)}return w}function vc(){var w,H;return(w=function T2(){var w;return(w=function Dh(){var w,H,z,B,W,Y,Q;for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();if(H!==p)if((z=R2())!==p){for(B=[],W=Vt();W!==p;)B.push(W),W=Vt();B!==p&&(W=function Zp(){var w,H,z,B,W,Y,Q,Z;if(w=v,64===_.charCodeAt(v)?(H=io,v++):(H=p,0===we&&fe(Us)),H!==p){if(z=[],Si.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(Hi)),B!==p)for(;B!==p;)z.push(B),Si.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(Hi));else z=p;if(z!==p){if(B=[],W=v,45===_.charCodeAt(v)?(Y=Es,v++):(Y=p,0===we&&fe(ot)),Y!==p){if(Q=[],Ls.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(tr)),Z!==p)for(;Z!==p;)Q.push(Z),Ls.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(tr));else Q=p;Q!==p?(Mt=W,W=Y=Rs(z,Q)):(v=W,W=p)}else v=W,W=p;for(;W!==p;)if(B.push(W),W=v,45===_.charCodeAt(v)?(Y=Es,v++):(Y=p,0===we&&fe(ot)),Y!==p){if(Q=[],Ls.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(tr)),Z!==p)for(;Z!==p;)Q.push(Z),Ls.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(tr));else Q=p;Q!==p?(Mt=W,W=Y=Rs(z,Q)):(v=W,W=p)}else v=W,W=p;B!==p?(Mt=w,w=H=Ut(z,B)):(v=w,w=p)}else v=w,w=p}else v=w,w=p;return w}())!==p?(Mt=w,w=H=he(z,W)):(v=w,w=p)}else v=w,w=p;else v=w,w=p;if(w===p){for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();if(H!==p)if((z=R2())!==p){for(B=[],W=Vt();W!==p;)B.push(W),W=Vt();if(B!==p)if(_.substr(v,2)===Qe?(W=Qe,v+=2):(W=p,0===we&&fe(ct)),W!==p){for(Y=[],Q=Vt();Q!==p;)Y.push(Q),Q=Vt();Y!==p&&(Q=Pl())!==p?(Mt=w,w=H=Yt(z,Q)):(v=w,w=p)}else v=w,w=p;else v=w,w=p}else v=w,w=p;else v=w,w=p;if(w===p){for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();H!==p&&(z=R2())!==p?(Mt=w,w=H=be(z)):(v=w,w=p)}}return w}())===p&&(w=function wc(){var w,H,z;for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();return H!==p?((z=function Up(){var w,H,z,B,W,Y,Q,Z,Rt;if(w=v,H=v,z=v,Bi.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(d2)),B===p&&(B=null),B!==p){if(W=v,Y=[],br.test(_.charAt(v))?(Q=_.charAt(v),v++):(Q=p,0===we&&fe(xr)),Q!==p)for(;Q!==p;)Y.push(Q),br.test(_.charAt(v))?(Q=_.charAt(v),v++):(Q=p,0===we&&fe(xr));else Y=p;if(Y!==p)if(46===_.charCodeAt(v)?(Q=q,v++):(Q=p,0===we&&fe(ae)),Q!==p){for(Z=[],br.test(_.charAt(v))?(Rt=_.charAt(v),v++):(Rt=p,0===we&&fe(xr));Rt!==p;)Z.push(Rt),br.test(_.charAt(v))?(Rt=_.charAt(v),v++):(Rt=p,0===we&&fe(xr));Z!==p&&(Rt=B2())!==p?W=Y=[Y,Q,Z,Rt]:(v=W,W=p)}else v=W,W=p;else v=W,W=p;if(W===p){if(W=v,46===_.charCodeAt(v)?(Y=q,v++):(Y=p,0===we&&fe(ae)),Y!==p){if(Q=[],br.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(xr)),Z!==p)for(;Z!==p;)Q.push(Z),br.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(xr));else Q=p;Q!==p&&(Z=B2())!==p?W=Y=[Y,Q,Z]:(v=W,W=p)}else v=W,W=p;if(W===p){if(W=v,Y=[],br.test(_.charAt(v))?(Q=_.charAt(v),v++):(Q=p,0===we&&fe(xr)),Q!==p)for(;Q!==p;)Y.push(Q),br.test(_.charAt(v))?(Q=_.charAt(v),v++):(Q=p,0===we&&fe(xr));else Y=p;Y!==p&&(Q=B2())!==p?W=Y=[Y,Q]:(v=W,W=p)}}W!==p?z=B=[B,W]:(v=z,z=p)}else v=z,z=p;return(H=z!==p?_.substring(H,v):z)!==p&&(Mt=w,H=$s(H)),H}())===p&&(z=function Ph(){var w,H,z,B,W,Y,Q,Z;if(w=v,H=v,z=v,Bi.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(d2)),B===p&&(B=null),B!==p){for(W=[],br.test(_.charAt(v))?(Y=_.charAt(v),v++):(Y=p,0===we&&fe(xr));Y!==p;)W.push(Y),br.test(_.charAt(v))?(Y=_.charAt(v),v++):(Y=p,0===we&&fe(xr));if(W!==p)if(46===_.charCodeAt(v)?(Y=q,v++):(Y=p,0===we&&fe(ae)),Y!==p){if(Q=[],br.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(xr)),Z!==p)for(;Z!==p;)Q.push(Z),br.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(xr));else Q=p;Q!==p?z=B=[B,W,Y,Q]:(v=z,z=p)}else v=z,z=p;else v=z,z=p}else v=z,z=p;return(H=z!==p?_.substring(H,v):z)!==p&&(Mt=w,H=wp(H)),H}())===p&&(z=function jp(){var w,H,z,B,W,Y;if(w=v,H=v,z=v,Bi.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(d2)),B===p&&(B=null),B!==p){if(W=[],br.test(_.charAt(v))?(Y=_.charAt(v),v++):(Y=p,0===we&&fe(xr)),Y!==p)for(;Y!==p;)W.push(Y),br.test(_.charAt(v))?(Y=_.charAt(v),v++):(Y=p,0===we&&fe(xr));else W=p;W!==p?z=B=[B,W]:(v=z,z=p)}else v=z,z=p;return(H=z!==p?_.substring(H,v):z)!==p&&(Mt=w,H=Dr(H)),H}()),z!==p?(Mt=w,w=H=be(z)):(v=w,w=p)):(v=w,w=p),w}())===p&&(w=function Bh(){var w,H,z;for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();if(H!==p?(_.substr(v,4)===Ln?(z=Ln,v+=4):(z=p,0===we&&fe(ar)),z!==p?(Mt=w,w=H=zn()):(v=w,w=p)):(v=w,w=p),w===p){for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();H!==p?(_.substr(v,5)===hr?(z=hr,v+=5):(z=p,0===we&&fe(Vr)),z!==p?(Mt=w,w=H=js()):(v=w,w=p)):(v=w,w=p)}return w}()),w}())===p&&(w=v,(H=L2())!==p&&(Mt=w,H=fs(H)),(w=H)===p&&(w=v,(H=Nh())!==p&&(Mt=w,H=L(H)),(w=H)===p&&(w=v,(H=E2())!==p&&(Mt=w,H=be(H)),(w=H)===p&&(w=v,(H=Pl())!==p&&(Mt=w,H=A(H)),w=H)))),w}function E2(){var w,H,z,B,W,Y;for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();if(H!==p)if(91===_.charCodeAt(v)?(z=S,v++):(z=p,0===we&&fe(O)),z!==p)if((B=mc())!==p){for(W=[],Y=Vt();Y!==p;)W.push(Y),Y=Vt();W!==p?(93===_.charCodeAt(v)?(Y=re,v++):(Y=p,0===we&&fe(Ae)),Y!==p?(Mt=w,w=H=be(B)):(v=w,w=p)):(v=w,w=p)}else v=w,w=p;else v=w,w=p;else v=w,w=p;return w}function L2(){var w,H,z,B,W,Y;for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();if(H!==p)if(40===_.charCodeAt(v)?(z=je,v++):(z=p,0===we&&fe(jt)),z!==p){for(B=[],W=vc();W!==p;)B.push(W),W=vc();if(B!==p){for(W=[],Y=Vt();Y!==p;)W.push(Y),Y=Vt();W!==p?(41===_.charCodeAt(v)?(Y=er,v++):(Y=p,0===we&&fe(qn)),Y!==p?(Mt=w,w=H=te(B)):(v=w,w=p)):(v=w,w=p)}else v=w,w=p}else v=w,w=p;else v=w,w=p;return w}function R2(){var w,H,z;for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();return H!==p?((z=function Xp(){var w,H,z,B,W,Y,Q,Z;if(w=v,_.substr(v,3)===Eo?(H=Eo,v+=3):(H=p,0===we&&fe(yp)),H!==p){for(z=[],ca.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(ua)),B===p&&(B=ns())===p&&(B=pr());B!==p;)z.push(B),ca.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(ua)),B===p&&(B=ns())===p&&(B=pr());if(z!==p){if(B=[],W=v,_.substr(v,2)===f2?(Y=f2,v+=2):(Y=p,0===we&&fe(Ih)),Y!==p){if(Q=[],ca.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(ua)),Z===p&&(Z=ns())===p&&(Z=pr()),Z!==p)for(;Z!==p;)Q.push(Z),ca.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(ua)),Z===p&&(Z=ns())===p&&(Z=pr());else Q=p;Q!==p?(Mt=W,W=Y=Ip(z,Q)):(v=W,W=p)}else v=W,W=p;if(W===p)if(W=v,39===_.charCodeAt(v)?(Y=_i,v++):(Y=p,0===we&&fe(g2)),Y!==p){if(Q=[],ca.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(ua)),Z===p&&(Z=ns())===p&&(Z=pr()),Z!==p)for(;Z!==p;)Q.push(Z),ca.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(ua)),Z===p&&(Z=ns())===p&&(Z=pr());else Q=p;Q!==p?(Mt=W,W=Y=Ah(z,Q)):(v=W,W=p)}else v=W,W=p;for(;W!==p;){if(B.push(W),W=v,_.substr(v,2)===f2?(Y=f2,v+=2):(Y=p,0===we&&fe(Ih)),Y!==p){if(Q=[],ca.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(ua)),Z===p&&(Z=ns())===p&&(Z=pr()),Z!==p)for(;Z!==p;)Q.push(Z),ca.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(ua)),Z===p&&(Z=ns())===p&&(Z=pr());else Q=p;Q!==p?(Mt=W,W=Y=Ip(z,Q)):(v=W,W=p)}else v=W,W=p;if(W===p)if(W=v,39===_.charCodeAt(v)?(Y=_i,v++):(Y=p,0===we&&fe(g2)),Y!==p){if(Q=[],ca.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(ua)),Z===p&&(Z=ns())===p&&(Z=pr()),Z!==p)for(;Z!==p;)Q.push(Z),ca.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(ua)),Z===p&&(Z=ns())===p&&(Z=pr());else Q=p;Q!==p?(Mt=W,W=Y=Ah(z,Q)):(v=W,W=p)}else v=W,W=p}B!==p?(_.substr(v,3)===Eo?(W=Eo,v+=3):(W=p,0===we&&fe(yp)),W!==p?(Mt=w,w=H=Ap(z,B)):(v=w,w=p)):(v=w,w=p)}else v=w,w=p}else v=w,w=p;return w}())===p&&(z=function Yp(){var w,H,z,B,W,Y,Q,Z;if(w=v,_.substr(v,3)===Mi?(H=Mi,v+=3):(H=p,0===we&&fe(mn)),H!==p){for(z=[],ha.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(da)),B===p&&(B=ns())===p&&(B=pr());B!==p;)z.push(B),ha.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(da)),B===p&&(B=ns())===p&&(B=pr());if(z!==p){if(B=[],W=v,_.substr(v,2)===m2?(Y=m2,v+=2):(Y=p,0===we&&fe(bp)),Y!==p){if(Q=[],ha.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(da)),Z===p&&(Z=ns())===p&&(Z=pr()),Z!==p)for(;Z!==p;)Q.push(Z),ha.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(da)),Z===p&&(Z=ns())===p&&(Z=pr());else Q=p;Q!==p?(Mt=W,W=Y=xp(z,Q)):(v=W,W=p)}else v=W,W=p;if(W===p)if(W=v,34===_.charCodeAt(v)?(Y=a1,v++):(Y=p,0===we&&fe(Br)),Y!==p){if(Q=[],ha.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(da)),Z===p&&(Z=ns())===p&&(Z=pr()),Z!==p)for(;Z!==p;)Q.push(Z),ha.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(da)),Z===p&&(Z=ns())===p&&(Z=pr());else Q=p;Q!==p?(Mt=W,W=Y=zt(z,Q)):(v=W,W=p)}else v=W,W=p;for(;W!==p;){if(B.push(W),W=v,_.substr(v,2)===m2?(Y=m2,v+=2):(Y=p,0===we&&fe(bp)),Y!==p){if(Q=[],ha.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(da)),Z===p&&(Z=ns())===p&&(Z=pr()),Z!==p)for(;Z!==p;)Q.push(Z),ha.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(da)),Z===p&&(Z=ns())===p&&(Z=pr());else Q=p;Q!==p?(Mt=W,W=Y=xp(z,Q)):(v=W,W=p)}else v=W,W=p;if(W===p)if(W=v,34===_.charCodeAt(v)?(Y=a1,v++):(Y=p,0===we&&fe(Br)),Y!==p){if(Q=[],ha.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(da)),Z===p&&(Z=ns())===p&&(Z=pr()),Z!==p)for(;Z!==p;)Q.push(Z),ha.test(_.charAt(v))?(Z=_.charAt(v),v++):(Z=p,0===we&&fe(da)),Z===p&&(Z=ns())===p&&(Z=pr());else Q=p;Q!==p?(Mt=W,W=Y=zt(z,Q)):(v=W,W=p)}else v=W,W=p}B!==p?(_.substr(v,3)===Mi?(W=Mi,v+=3):(W=p,0===we&&fe(mn)),W!==p?(Mt=w,w=H=Ap(z,B)):(v=w,w=p)):(v=w,w=p)}else v=w,w=p}else v=w,w=p;return w}())===p&&(z=function Ro(){var w,H,z,B;if(w=v,39===_.charCodeAt(v)?(H=_i,v++):(H=p,0===we&&fe(g2)),H!==p){for(z=[],yh.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(Cp)),B===p&&(B=ns())===p&&(B=pr());B!==p;)z.push(B),yh.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(Cp)),B===p&&(B=ns())===p&&(B=pr());z!==p?(39===_.charCodeAt(v)?(B=_i,v++):(B=p,0===we&&fe(g2)),B!==p?(Mt=w,w=H=Ct(z)):(v=w,w=p)):(v=w,w=p)}else v=w,w=p;return w}())===p&&(z=function $p(){var w,H,z,B;if(w=v,34===_.charCodeAt(v)?(H=a1,v++):(H=p,0===we&&fe(Br)),H!==p){for(z=[],wn.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(uc)),B===p&&(B=ns())===p&&(B=pr());B!==p;)z.push(B),wn.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(uc)),B===p&&(B=ns())===p&&(B=pr());z!==p?(34===_.charCodeAt(v)?(B=a1,v++):(B=p,0===we&&fe(Br)),B!==p?(Mt=w,w=H=Ct(z)):(v=w,w=p)):(v=w,w=p)}else v=w,w=p;return w}()),z!==p?(Mt=w,w=H=be(z)):(v=w,w=p)):(v=w,w=p),w}function Pl(){var w,H,z;for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();if(H!==p&&(z=Ni())!==p?(Mt=w,w=H=be(z)):(v=w,w=p),w===p){for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();H!==p&&(z=function kp(){var w,H;return(w=function Gp(){var w,H,z;return w=v,(H=Fh())!==p&&(z=function zi(){var w,H,z,B,W,Y,Q,Z;if(w=v,(H=Ds())===p&&(58===_.charCodeAt(v)?(H=R,v++):(H=p,0===we&&fe($)),H===p&&(br.test(_.charAt(v))?(H=_.charAt(v),v++):(H=p,0===we&&fe(xr)),H===p&&(H=Da()))),H!==p){for(z=[],(B=cr())===p&&(58===_.charCodeAt(v)?(B=R,v++):(B=p,0===we&&fe($)),B===p&&(B=Da()));B!==p;)z.push(B),(B=cr())===p&&(58===_.charCodeAt(v)?(B=R,v++):(B=p,0===we&&fe($)),B===p&&(B=Da()));if(z!==p){if(B=[],W=v,Y=[],46===_.charCodeAt(v)?(Q=q,v++):(Q=p,0===we&&fe(ae)),Q!==p)for(;Q!==p;)Y.push(Q),46===_.charCodeAt(v)?(Q=q,v++):(Q=p,0===we&&fe(ae));else Y=p;if(Y!==p){if(Q=[],(Z=cr())===p&&(58===_.charCodeAt(v)?(Z=R,v++):(Z=p,0===we&&fe($)),Z===p&&(Z=Da())),Z!==p)for(;Z!==p;)Q.push(Z),(Z=cr())===p&&(58===_.charCodeAt(v)?(Z=R,v++):(Z=p,0===we&&fe($)),Z===p&&(Z=Da()));else Q=p;Q!==p?(Mt=W,W=Y=zh(H,z,Y,Q)):(v=W,W=p)}else v=W,W=p;for(;W!==p;){if(B.push(W),W=v,Y=[],46===_.charCodeAt(v)?(Q=q,v++):(Q=p,0===we&&fe(ae)),Q!==p)for(;Q!==p;)Y.push(Q),46===_.charCodeAt(v)?(Q=q,v++):(Q=p,0===we&&fe(ae));else Y=p;if(Y!==p){if(Q=[],(Z=cr())===p&&(58===_.charCodeAt(v)?(Z=R,v++):(Z=p,0===we&&fe($)),Z===p&&(Z=Da())),Z!==p)for(;Z!==p;)Q.push(Z),(Z=cr())===p&&(58===_.charCodeAt(v)?(Z=R,v++):(Z=p,0===we&&fe($)),Z===p&&(Z=Da()));else Q=p;Q!==p?(Mt=W,W=Y=zh(H,z,Y,Q)):(v=W,W=p)}else v=W,W=p}B!==p?(Mt=w,w=H=Dp(H,z,B)):(v=w,w=p)}else v=w,w=p}else v=w,w=p;return w}())!==p?(Mt=w,w=H=cn(H,z)):(v=w,w=p),w}())===p&&(w=v,(H=Fh())!==p&&(Mt=w,H=Ri(H)),w=H),w}())!==p?(Mt=w,w=H=be(z)):(v=w,w=p)}return w}function Nh(){var w,H,z;for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();if(H!==p&&(z=function Wp(){var w,H,z,B,W,Y,Q,Z,Rt,Nr;if(w=v,H=v,_.substr(v,2)===vr?(z=vr,v+=2):(z=p,0===we&&fe(Js)),z!==p)if((B=Ds())===p&&(br.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(xr))),B!==p){for(W=[],Y=cr();Y!==p;)W.push(Y),Y=cr();if(W!==p){if(Y=[],Q=v,Z=[],46===_.charCodeAt(v)?(Rt=q,v++):(Rt=p,0===we&&fe(ae)),Rt!==p)for(;Rt!==p;)Z.push(Rt),46===_.charCodeAt(v)?(Rt=q,v++):(Rt=p,0===we&&fe(ae));else Z=p;if(Z!==p){if(Rt=[],(Nr=cr())!==p)for(;Nr!==p;)Rt.push(Nr),Nr=cr();else Rt=p;Rt!==p?Q=Z=[Z,Rt]:(v=Q,Q=p)}else v=Q,Q=p;for(;Q!==p;){if(Y.push(Q),Q=v,Z=[],46===_.charCodeAt(v)?(Rt=q,v++):(Rt=p,0===we&&fe(ae)),Rt!==p)for(;Rt!==p;)Z.push(Rt),46===_.charCodeAt(v)?(Rt=q,v++):(Rt=p,0===we&&fe(ae));else Z=p;if(Z!==p){if(Rt=[],(Nr=cr())!==p)for(;Nr!==p;)Rt.push(Nr),Nr=cr();else Rt=p;Rt!==p?Q=Z=[Z,Rt]:(v=Q,Q=p)}else v=Q,Q=p}Y!==p?H=z=[z,B,W,Y]:(v=H,H=p)}else v=H,H=p}else v=H,H=p;else v=H,H=p;return H!==p?_.substring(w,v):H}())!==p?(Mt=w,w=H=be(z)):(v=w,w=p),w===p){for(w=v,H=[],z=Vt();z!==p;)H.push(z),z=Vt();H!==p&&(z=function Ki(){var w,H,z,B;if(w=v,91===_.charCodeAt(v)?(H=S,v++):(H=p,0===we&&fe(O)),H!==p){for(z=[],B=Vt();B!==p;)z.push(B),B=Vt();z!==p?(93===_.charCodeAt(v)?(B=re,v++):(B=p,0===we&&fe(Ae)),B!==p?(Mt=w,w=H=p3()):(v=w,w=p)):(v=w,w=p)}else v=w,w=p;return w}())!==p?(Mt=w,w=H=be(z)):(v=w,w=p)}return w}function Ni(){var w,H,z,B;if(w=v,60===_.charCodeAt(v)?(H=Ps,v++):(H=p,0===we&&fe(Di)),H!==p){for(z=[],Vo.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(tl)),B===p&&(B=pr());B!==p;)z.push(B),Vo.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(tl)),B===p&&(B=pr());z!==p?(62===_.charCodeAt(v)?(B=xi,v++):(B=p,0===we&&fe(To)),B!==p?(Mt=w,w=H=E(z)):(v=w,w=p)):(v=w,w=p)}else v=w,w=p;return w}function Fh(){var w,H,z;return w=v,(H=Ra())===p&&(H=null),H!==p?(58===_.charCodeAt(v)?(z=R,v++):(z=p,0===we&&fe($)),z!==p?(Mt=w,w=H=ze(H)):(v=w,w=p)):(v=w,w=p),w}function D2(){var w,H,z;return w=v,(H=Ra())===p&&(H=null),H!==p?(58===_.charCodeAt(v)?(z=R,v++):(z=p,0===we&&fe($)),z!==p?(Mt=w,w=H=ie(H)):(v=w,w=p)):(v=w,w=p),w}function B2(){var w,H,z,B,W,Y;if(w=v,H=v,p2.test(_.charAt(v))?(z=_.charAt(v),v++):(z=p,0===we&&fe(u3)),z!==p)if(Bi.test(_.charAt(v))?(B=_.charAt(v),v++):(B=p,0===we&&fe(d2)),B===p&&(B=null),B!==p){if(W=[],br.test(_.charAt(v))?(Y=_.charAt(v),v++):(Y=p,0===we&&fe(xr)),Y!==p)for(;Y!==p;)W.push(Y),br.test(_.charAt(v))?(Y=_.charAt(v),v++):(Y=p,0===we&&fe(xr));else W=p;W!==p?H=z=[z,B,W]:(v=H,H=p)}else v=H,H=p;else v=H,H=p;return H!==p?_.substring(w,v):H}function pr(){var w,H,z,B,W,Y,Q,Z,Rt,Nr,fa;return w=v,_.substr(v,2)===Sp?(H=Sp,v+=2):(H=p,0===we&&fe(pa)),H!==p?(z=v,(B=ci())!==p&&(W=ci())!==p&&(Y=ci())!==p&&(Q=ci())!==p&&(Z=ci())!==p&&(Rt=ci())!==p&&(Nr=ci())!==p&&(fa=ci())!==p?z=B=[B,W,Y,Q,Z,Rt,Nr,fa]:(v=z,z=p),z!==p?(Mt=w,w=H=l1(z)):(v=w,w=p)):(v=w,w=p),w===p&&(w=v,_.substr(v,2)===Hp?(H=Hp,v+=2):(H=p,0===we&&fe(bh)),H!==p?(z=v,(B=ci())!==p&&(W=ci())!==p&&(Y=ci())!==p&&(Q=ci())!==p?z=B=[B,W,Y,Q]:(v=z,z=p),z!==p?(Mt=w,w=H=_p(z)):(v=w,w=p)):(v=w,w=p)),w}function ns(){var w,H;return w=v,_.substr(v,2)===hc?(H=hc,v+=2):(H=p,0===we&&fe(c1)),H!==p&&(Mt=w,H=v2()),(w=H)===p&&(w=v,_.substr(v,2)===w2?(H=w2,v+=2):(H=p,0===we&&fe(Mp)),H!==p&&(Mt=w,H=At()),(w=H)===p&&(w=v,_.substr(v,2)===u1?(H=u1,v+=2):(H=p,0===we&&fe(C2)),H!==p&&(Mt=w,H=xh()),(w=H)===p&&(w=v,_.substr(v,2)===h1?(H=h1,v+=2):(H=p,0===we&&fe(zp)),H!==p&&(Mt=w,H=y2()),(w=H)===p&&(w=v,_.substr(v,2)===Vp?(H=Vp,v+=2):(H=p,0===we&&fe(h3)),H!==p&&(Mt=w,H=d3()),(w=H)===p&&(w=v,_.substr(v,2)===Tp?(H=Tp,v+=2):(H=p,0===we&&fe(I2)),H!==p&&(Mt=w,H=dc()),(w=H)===p&&(w=v,_.substr(v,2)===d1?(H=d1,v+=2):(H=p,0===we&&fe(A2)),H!==p&&(Mt=w,H=Sh()),(w=H)===p&&(w=v,_.substr(v,2)===Uo?(H=Uo,v+=2):(H=p,0===we&&fe(pc)),H!==p&&(Mt=w,H=Hh()),w=H))))))),w}function $n(){var w,H,z;return w=v,Ep.test(_.charAt(v))?(H=_.charAt(v),v++):(H=p,0===we&&fe(Lp)),H!==p?(g3.test(_.charAt(v))?(z=_.charAt(v),v++):(z=p,0===we&&fe(Rp)),z!==p?(Mt=w,w=H=b2(H,z)):(v=w,w=p)):(v=w,w=p),w===p&&(nr.test(_.charAt(v))?(w=_.charAt(v),v++):(w=p,0===we&&fe(x2))),w}function Ds(){var w;return(w=$n())===p&&(95===_.charCodeAt(v)?(w=_h,v++):(w=p,0===we&&fe(Ui))),w}function cr(){var w;return(w=Ds())===p&&(45===_.charCodeAt(v)?(w=Es,v++):(w=p,0===we&&fe(ot)),w===p&&(br.test(_.charAt(v))?(w=_.charAt(v),v++):(w=p,0===we&&fe(xr)),w===p&&(183===_.charCodeAt(v)?(w=Mh,v++):(w=p,0===we&&fe(f3)),w===p&&(m3.test(_.charAt(v))?(w=_.charAt(v),v++):(w=p,0===we&&fe(gc)),w===p&&(S2.test(_.charAt(v))?(w=_.charAt(v),v++):(w=p,0===we&&fe(p1))))))),w}function Ra(){var w,H,z,B,W,Y,Q,Z,Rt;if(w=v,H=v,(z=$n())!==p){for(B=[],W=cr();W!==p;)B.push(W),W=cr();if(B!==p){if(W=[],Y=v,Q=[],46===_.charCodeAt(v)?(Z=q,v++):(Z=p,0===we&&fe(ae)),Z!==p)for(;Z!==p;)Q.push(Z),46===_.charCodeAt(v)?(Z=q,v++):(Z=p,0===we&&fe(ae));else Q=p;if(Q!==p){if(Z=[],(Rt=cr())!==p)for(;Rt!==p;)Z.push(Rt),Rt=cr();else Z=p;Z!==p?Y=Q=[Q,Z]:(v=Y,Y=p)}else v=Y,Y=p;for(;Y!==p;){if(W.push(Y),Y=v,Q=[],46===_.charCodeAt(v)?(Z=q,v++):(Z=p,0===we&&fe(ae)),Z!==p)for(;Z!==p;)Q.push(Z),46===_.charCodeAt(v)?(Z=q,v++):(Z=p,0===we&&fe(ae));else Q=p;if(Q!==p){if(Z=[],(Rt=cr())!==p)for(;Rt!==p;)Z.push(Rt),Rt=cr();else Z=p;Z!==p?Y=Q=[Q,Z]:(v=Y,Y=p)}else v=Y,Y=p}W!==p?H=z=[z,B,W]:(v=H,H=p)}else v=H,H=p}else v=H,H=p;return H!==p?_.substring(w,v):H}function Da(){var w;return(w=function Oh(){var w,H,z,B,W;return w=v,H=v,37===_.charCodeAt(v)?(z=Bp,v++):(z=p,0===we&&fe(Vh)),z!==p&&(B=ci())!==p&&(W=ci())!==p?H=z=[z,B,W]:(v=H,H=p),H!==p?_.substring(w,v):H}())===p&&(w=function Kp(){var w,H,z;return w=v,92===_.charCodeAt(v)?(H=Ta,v++):(H=p,0===we&&fe(Fp)),H!==p?(Se.test(_.charAt(v))?(z=_.charAt(v),v++):(z=p,0===we&&fe(Th)),z!==p?(Mt=w,w=H=be(z)):(v=w,w=p)):(v=w,w=p),w}()),w}function ci(){var w;return Rl.test(_.charAt(v))?(w=_.charAt(v),v++):(w=p,0===we&&fe(Np)),w}var kh=function(w){return w.match(/^[a-z](.*?):(.+?)/g)},Tr={base:[],data:{},addBase:function(w){if(0===Tr.base.length)return void Tr.base.push(w);const H=Tr.base[Tr.base.length-1];H!==w&&Tr.base.push(new URL(w,H).toString())},addPrefix:function(w,H){const z=Tr.data[w];void 0===z?Tr.data[w]=[{uri:H,count:0}]:z[z.length-1].uri!==H&&z.push({uri:H,count:0})},hasPrefix:function(w){return void 0!==this.data[w]},resolve:function(w,H){const z=Object.keys(Tr.data).find(W=>0===w.indexOf(W+":"));if(void 0!==z){const W=Tr.data[z];return 1===W.length&&!0!==H&&kh(W[0].uri)?w:w.replace(z+":",W[W.length-1].uri)}var B=0===Tr.base.length?ge.baseIRI:Tr.base[Tr.base.length-1];return!B||w.match(/^(http:|https:|urn:|file:)/)?w:0===w.indexOf("//")&&B?B.split("//")[0]+w:new URL(w,B).toString()},increment:function(w){const H=Tr.data[w];void 0!==H&&H[H.length-1].count++},decrement:function(w){const H=Tr.data[w];void 0!==H&&H[H.length-1].count--},toJSON:function(){const w={};return Tr.base.length>0&&(void 0===w["@context"]&&(w["@context"]={}),w["@context"]["@base"]=Tr.base[0]),Object.keys(Tr.data).forEach(H=>{const z=Tr.data[H][0];"http://www.w3.org/2001/XMLSchema#"===z.uri&&z.count<1||kh(z.uri)&&(void 0===w["@context"]&&(w["@context"]={}),w["@context"][H]=z.uri)}),w}};function Cc(w,H){if(void 0===w["@list"]||!H&&!w["@list"].find(W=>void 0!==W["@list"]))return w;if(0===w["@list"].length)return{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"};var z={},B=null;return w["@list"].forEach(W=>{null===B?B=z:(B["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={},B=B["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]),B["http://www.w3.org/1999/02/22-rdf-syntax-ns#first"]=Cc(W,!0),B["http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"]={"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}),z}if((g1=Xe())!==p&&v===_.length)return g1;throw g1!==p&&v<_.length&&fe({type:"end"}),function Pp(w,H,z){return new lt(lt.buildMessage(w,H),w,H,z)}(H2,$i<_.length?_.charAt($i):null,Ea($i,$i<_.length?$i+1:$i))}}})?Ve.apply(at,[]):Ve)&&(Fn.exports=Ue)},517:function(Fn){Fn.exports=function(){"use strict";var at=function(){return at=Object.assign||function(C){for(var y,I=1,x=arguments.length;I<x;I++)for(var T in y=arguments[I])Object.prototype.hasOwnProperty.call(y,T)&&(C[T]=y[T]);return C},at.apply(this,arguments)};function Ve(f){var C="function"==typeof Symbol&&Symbol.iterator,y=C&&f[C],I=0;if(y)return y.call(f);if(f&&"number"==typeof f.length)return{next:function(){return f&&I>=f.length&&(f=void 0),{value:f&&f[I++],done:!f}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(f,C){var y="function"==typeof Symbol&&f[Symbol.iterator];if(!y)return f;var x,k,I=y.call(f),T=[];try{for(;(void 0===C||C-- >0)&&!(x=I.next()).done;)T.push(x.value)}catch(oe){k={error:oe}}finally{try{x&&!x.done&&(y=I.return)&&y.call(I)}finally{if(k)throw k.error}}return T}function Ue(f,C,y){if(y||2===arguments.length)for(var T,I=0,x=C.length;I<x;I++)(T||!(I in C))&&(T||(T=Array.prototype.slice.call(C,0,I)),T[I]=C[I]);return f.concat(T||Array.prototype.slice.call(C))}"function"==typeof SuppressedError&&SuppressedError;class Je extends Error{constructor(C,y,I){super(C),this.token=y,this.type=I||"error"}}const lt=f=>f<4?"short":4===f?"long":"narrow",Pe=f=>f%2==0?"2-digit":"numeric";function ge(f,C){switch(f.width){case 1:return"numeric";case 2:return"2-digit";case 3:return"short";case 4:return"long";case 5:return"narrow";default:return void C(`${f.desc} is not supported with width ${f.width}`)}}function p(f,C){const{char:y,desc:I,width:x}=f;if("d"===y)return Pe(x);C(`${I} is not supported`)}function Oe(f,C){const{char:y,desc:I,width:x}=f;return("c"===y||"e"===y)&&x<3&&C(`Numeric value is not supported for ${I}; falling back to weekday:short`,Je.WARNING),lt(x)}function ue(f,C){const{char:y,desc:I,width:x}=f;switch(y){case"v":case"z":return 4===x?"long":"short";case"V":return 4===x?"long":void C(`${I} is not supported with width ${x}`);case"X":return void C(`${I} is not supported`)}return"short"}function ke(f,C){switch(f.field){case"era":return{era:lt(f.width)};case"year":return function _(f,C){switch(f.char){case"y":return{year:Pe(f.width)};case"r":return{calendar:"gregory",year:"numeric"};default:return C(`${f.desc} is not supported; falling back to year:numeric`,Je.WARNING),{year:"numeric"}}}(f,C);case"month":return{month:ge(f,C)};case"day":return{day:p(f,C)};case"weekday":return{weekday:Oe(f,C)};case"period":return;case"hour":return function Xe(f){const C=Pe(f.width);let y;switch(f.char){case"h":y="h12";break;case"H":y="h23";break;case"k":y="h24";break;case"K":y="h11"}return y?{hour:C,hourCycle:y}:{hour:C}}(f);case"min":return{minute:Pe(f.width)};case"sec":return{second:Pe(f.width)};case"tz":return{timeZoneName:ue(f,C)};case"quarter":case"week":case"sec-frac":case"ms":C(`${f.desc} is not supported`)}}function se(f,C){let y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T=>{throw T};const I={timeZone:C},x=[];for(const T of f){const{error:k,field:oe,str:Le}=T;if(k){const tn=new Je(k.message,T);tn.stack=k.stack,y(tn)}Le&&y(new Je(`Ignoring string part: ${Le}`,T,Je.WARNING)),oe&&(-1===x.indexOf(oe)?x.push(oe):y(new Je(`Duplicate ${oe} token`,T)));const wt=ke(T,(tn,Tn)=>y(new Je(tn,T,Tn)));wt&&Object.assign(I,wt)}return I}const q={G:{field:"era",desc:"Era"},y:{field:"year",desc:"Year"},Y:{field:"year",desc:'Year of "Week of Year"'},u:{field:"year",desc:"Extended year"},U:{field:"year",desc:"Cyclic year name"},r:{field:"year",desc:"Related Gregorian year"},Q:{field:"quarter",desc:"Quarter"},q:{field:"quarter",desc:"Stand-alone quarter"},M:{field:"month",desc:"Month in year"},L:{field:"month",desc:"Stand-alone month in year"},w:{field:"week",desc:"Week of year"},W:{field:"week",desc:"Week of month"},d:{field:"day",desc:"Day in month"},D:{field:"day",desc:"Day of year"},F:{field:"day",desc:"Day of week in month"},g:{field:"day",desc:"Modified julian day"},E:{field:"weekday",desc:"Day of week"},e:{field:"weekday",desc:"Local day of week"},c:{field:"weekday",desc:"Stand-alone local day of week"},a:{field:"period",desc:"AM/PM marker"},b:{field:"period",desc:"AM/PM/noon/midnight marker"},B:{field:"period",desc:"Flexible day period"},h:{field:"hour",desc:"Hour in AM/PM (1~12)"},H:{field:"hour",desc:"Hour in day (0~23)"},k:{field:"hour",desc:"Hour in day (1~24)"},K:{field:"hour",desc:"Hour in AM/PM (0~11)"},j:{field:"hour",desc:"Hour in preferred cycle"},J:{field:"hour",desc:"Hour in preferred cycle without marker"},C:{field:"hour",desc:"Hour in preferred cycle with flexible marker"},m:{field:"min",desc:"Minute in hour"},s:{field:"sec",desc:"Second in minute"},S:{field:"sec-frac",desc:"Fractional second"},A:{field:"ms",desc:"Milliseconds in day"},z:{field:"tz",desc:"Time Zone: specific non-location"},Z:{field:"tz",desc:"Time Zone"},O:{field:"tz",desc:"Time Zone: localized"},v:{field:"tz",desc:"Time Zone: generic non-location"},V:{field:"tz",desc:"Time Zone: ID"},X:{field:"tz",desc:"Time Zone: ISO8601 with Z"},x:{field:"tz",desc:"Time Zone: ISO8601"}},ae=f=>f>="A"&&f<="Z"||f>="a"&&f<="z";function ee(f,C){const y=f[C];if(!y)return null;if(ae(y))return function be(f,C){const y=f[C];let I=1;for(;f[++C]===y;)++I;const x=q[y];return x?{char:y,field:x.field,desc:x.desc,width:I}:{char:y,error:new Error(`The letter ${y} is not a valid field identifier`),width:I}}(f,C);if("'"===y)return function St(f,C){let y=f[++C],I=2;if("'"===y)return{char:"'",str:y,width:I};for(;;){const x=f[++C];if(++I,void 0===x)return{char:"'",error:new Error(`Unterminated quoted literal in pattern: ${y||f}`),str:y,width:I};if("'"===x){if("'"!==f[++C])return{char:"'",str:y,width:I};++I}y+=x}}(f,C);let I=y,x=1;for(;;){const T=f[++C];if(!T||ae(T)||"'"===T)return{char:y,str:I,width:x};I+=T,x+=1}}function ve(f){const C=[];let y=0;for(;;){const I=ee(f,y);if(!I)return C;C.push(I),y+=I.width}}class et extends Error{constructor(C,y){super(y),this.code=C}}class Ct extends et{constructor(C,y){super("BAD_OPTION",`Unknown ${C} option: ${y}`),this.stem=C,this.option=y}}class mt extends et{constructor(C){super("BAD_STEM",`Unknown stem: ${C}`),this.stem=C}}class Nt extends et{constructor(C,y){super("MASKED_VALUE",`Value for ${C} is set multiple times`),this.type=C,this.prev=y}}class Re extends et{constructor(C){super("MISSING_OPTION",`Required option missing for ${C}`),this.stem=C}}class $e extends et{constructor(C,y){super("BAD_PATTERN",y),this.char=C}}class Ye extends et{constructor(C,y,I){super("TOO_MANY_OPTIONS",`Token ${C} only supports ${I>1?`${I} options`:"one option"} (got ${y.length})`),this.stem=C,this.options=y}}class Wt extends et{constructor(C,y){super("UNSUPPORTED",`The stem ${C} is not supported`),this.stem=C,y&&(this.message+=` with value ${y}`,this.source=y)}}function ne(f,C){let{numberingSystem:y}=C;return Array.isArray(f)||(f=[f]),y?f.map(I=>{const x=-1===I.indexOf("-u-")?"u-nu":"nu";return`${I}-${x}-${y}`}).concat(f):f}function It(f){let{scale:C,unit:y}=f,I="number"==typeof C&&C>=0?C:1;return y&&"percent"===y.style&&(I*=.01),I}function F(f,C){const{decimal:y,group:I,integerWidth:x,notation:T,precision:k,roundingMode:oe,sign:Le,unit:wt,unitPer:tn,unitWidth:Tn}=f,kn=(Gr,ms)=>{C&&C(new Wt(Gr,ms))},Ft={};if(wt)switch(wt.style){case"base-unit":Ft.style="decimal";break;case"currency":Ft.style="currency",Ft.currency=wt.currency;break;case"measure-unit":Ft.style="unit",Ft.unit=wt.unit.replace(/.*-/,""),tn&&(Ft.unit+="-per-"+tn.replace(/.*-/,""));break;case"percent":Ft.style="percent";break;case"permille":kn("permille")}switch(Tn){case"unit-width-full-name":Ft.currencyDisplay="name",Ft.unitDisplay="long";break;case"unit-width-hidden":kn(Tn);break;case"unit-width-iso-code":Ft.currencyDisplay="code";break;case"unit-width-narrow":Ft.currencyDisplay="narrowSymbol",Ft.unitDisplay="narrow";break;case"unit-width-short":Ft.currencyDisplay="symbol",Ft.unitDisplay="short"}switch(I){case"group-off":Ft.useGrouping=!1;break;case"group-auto":Ft.useGrouping=!0;break;case"group-min2":case"group-on-aligned":case"group-thousands":kn(I),Ft.useGrouping=!0}if(k)switch(k.style){case"precision-fraction":{const{minFraction:Gr,maxFraction:ms,minSignificant:Os,maxSignificant:Pi,source:Bo}=k;"number"==typeof Gr&&(Ft.minimumFractionDigits=Gr,"number"==typeof Os&&kn("precision-fraction",Bo)),"number"==typeof ms&&(Ft.maximumFractionDigits=ms),"number"==typeof Os&&(Ft.minimumSignificantDigits=Os),"number"==typeof Pi&&(Ft.maximumSignificantDigits=Pi);break}case"precision-integer":Ft.maximumFractionDigits=0;break;case"precision-unlimited":Ft.maximumFractionDigits=20;break;case"precision-increment":break;case"precision-currency-standard":Ft.trailingZeroDisplay=k.trailingZero;break;case"precision-currency-cash":kn(k.style)}if(T)switch(T.style){case"compact-short":Ft.notation="compact",Ft.compactDisplay="short";break;case"compact-long":Ft.notation="compact",Ft.compactDisplay="long";break;case"notation-simple":Ft.notation="standard";break;case"scientific":case"engineering":{const{expDigits:Gr,expSign:ms,source:Os,style:Pi}=T;Ft.notation=Pi,(Gr&&Gr>1||ms&&"sign-auto"!==ms)&&kn(Pi,Os);break}}if(x){const{min:Gr,max:ms,source:Os}=x;Gr>0&&(Ft.minimumIntegerDigits=Gr),Number(ms)>0&&(3!==ms||"engineering"!==Ft.notation&&"scientific"!==Ft.notation?kn("integer-width",Os):Ft.notation="engineering")}switch(Le){case"sign-auto":Ft.signDisplay="auto";break;case"sign-always":Ft.signDisplay="always";break;case"sign-except-zero":Ft.signDisplay="exceptZero";break;case"sign-never":Ft.signDisplay="never";break;case"sign-accounting":Ft.currencySign="accounting";break;case"sign-accounting-always":Ft.currencySign="accounting",Ft.signDisplay="always";break;case"sign-accounting-except-zero":Ft.currencySign="accounting",Ft.signDisplay="exceptZero"}return"decimal-always"===y&&kn(y),oe&&kn(oe),Ft}function j(f,C,y){const I=f[C];switch(I){case"%":return{char:"%",style:"percent",width:1};case"\u2030":return{char:"%",style:"permille",width:1};case"\xa4":{let x=1;for(;"\xa4"===f[++C];)++x;switch(x){case 1:return{char:I,currency:"default",width:x};case 2:return{char:I,currency:"iso-code",width:x};case 3:return{char:I,currency:"full-name",width:x};case 5:return{char:I,currency:"narrow",width:x};default:return y(new $e("\xa4",`Invalid number (${x}) of \xa4 chars in pattern`)),null}}case"*":{const x=f[C+1];if(x)return{char:I,pad:x,width:2};break}case"+":case"-":return{char:I,width:1};case"'":{let x=f[++C],T=2;if("'"===x)return{char:I,str:x,width:T};for(;;){const k=f[++C];if(++T,void 0===k)return y(new $e("'",`Unterminated quoted literal in pattern: ${x}`)),{char:I,str:x,width:T};if("'"===k){if("'"!==f[++C])return{char:I,str:x,width:T};++T}x+=k}}}return null}const Te=f=>f>="0"&&f<="9";function qe(f,C){const y=f[C];if(Te(y)){let I=y;for(;;){const x=f[++C];if(!Te(x))return{char:"0",digits:I,width:I.length};I+=x}}switch(y){case"#":{let I=1;for(;"#"===f[++C];)++I;return{char:y,width:I}}case"@":{let I=1;for(;"@"===f[++C];)++I;let x=I;for(C-=1;"#"===f[++C];)++x;return{char:y,min:I,width:x}}case"E":{const I="+"===f[C+1];I&&++C;let x=0;for(;"0"===f[++C];)++x;if(x)return{char:y,expDigits:x,plus:I,width:(I?2:1)+x};break}case".":case",":return{char:y,width:1}}return null}function st(f,C,y){let I;var wt;(wt=I||(I={}))[wt.Prefix=0]="Prefix",wt[wt.Number=1]="Number",wt[wt.Suffix=2]="Suffix";const x=[],T=[],k=[];let oe=I.Prefix,Le="";for(;C<f.length;){const wt=f[C];if(";"===wt){C+=1;break}switch(oe){case I.Prefix:{const tn=j(f,C,y);if(tn)Le&&(x.push({char:"'",str:Le,width:Le.length}),Le=""),x.push(tn),C+=tn.width;else{const Tn=qe(f,C);Tn?(Le&&(x.push({char:"'",str:Le,width:Le.length}),Le=""),oe=I.Number,T.push(Tn),C+=Tn.width):(Le+=wt,C+=1)}break}case I.Number:{const tn=qe(f,C);tn?(T.push(tn),C+=tn.width):oe=I.Suffix;break}case I.Suffix:{const tn=j(f,C,y);tn?(Le&&(k.push({char:"'",str:Le,width:Le.length}),Le=""),k.push(tn),C+=tn.width):(Le+=wt,C+=1);break}}}return Le&&k.push({char:"'",str:Le,width:Le.length}),{pattern:{prefix:x,number:T,suffix:k},pos:C}}function pn(f,C,y,I,x){let T=!1,k="";for(const oe of f)switch(oe.char){case"%":C.unit={style:oe.style},x?T=!0:k="";break;case"\xa4":if(!y){I(new $e("\xa4","The \xa4 pattern requires a currency"));break}switch(C.unit={style:"currency",currency:y},oe.currency){case"iso-code":C.unitWidth="unit-width-iso-code";break;case"full-name":C.unitWidth="unit-width-full-name";break;case"narrow":C.unitWidth="unit-width-narrow"}x?T=!0:k="";break;case"*":break;case"+":T||(k+="+");break;case"'":T||(k+=oe.str)}return k}function jr(f,C){let y=!1,I="";for(const x of f)switch(x.char){case"%":case"\xa4":C?y=!0:I="";break;case"-":y||(I+="-");break;case"'":y||(I+=x.str)}return I}function Ts(f,C){let y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le=>{throw Le};const{tokens:I,negative:x}=function ln(f,C){const{pattern:y,pos:I}=st(f,0,C);if(I<f.length){const{pattern:x}=st(f,I,C);return{tokens:y,negative:x}}return{tokens:y}}(f,y),T=function Xt(f,C){const y={};let I=!1,x=!1,T=0,k="",oe=-1,Le="",wt=0;for(let Tn=0;Tn<f.length;++Tn){const kn=f[Tn];switch(kn.char){case"#":-1===oe?(k&&C(new $e("#","Pattern has # after integer digits")),T+=kn.width):wt+=kn.width;break;case"0":-1===oe?k+=kn.digits:(wt&&C(new $e("0","Pattern has digits after # in fraction")),Le+=kn.digits);break;case"@":y.precision&&C(new Nt("precision",y.precision)),y.precision={style:"precision-fraction",minSignificant:kn.min,maxSignificant:kn.width};break;case",":I=!0;break;case".":1===oe&&C(new $e(".","Pattern has more than one decimal separator")),oe=Tn;break;case"E":x&&C(new Nt("exponent",y.notation)),I&&C(new $e("E","Exponential patterns may not contain grouping separators")),y.notation={style:"scientific"},kn.expDigits>1&&(y.notation.expDigits=kn.expDigits),kn.plus&&(y.notation.expSign="sign-always"),x=!0}}I?y.group="group-auto":T+k.length>3&&(y.group="group-off");const tn=+`${k||"0"}.${Le}`;if(tn&&(y.precision={style:"precision-increment",increment:tn}),x)if((!y.precision||tn)&&(y.integerWidth=T?{min:1,max:T+k.length}:{min:Math.max(1,k.length)}),y.precision)tn||(y.integerWidth={min:1,max:1});else{const Tn=k.length+Le.length;-1===oe?Tn>0&&(y.precision={style:"precision-fraction",maxSignificant:Tn}):(y.precision={style:"precision-fraction",maxSignificant:Math.max(1,Tn)+wt},Tn>1&&(y.precision.minSignificant=Tn))}else k.length>1&&(y.integerWidth={min:k.length}),!y.precision&&(Le.length||wt)&&(y.precision={style:"precision-fraction",minFraction:Le.length,maxFraction:Le.length+wt});return y}(I.number,y),k=pn(I.prefix,T,C,y,!0),oe=pn(I.suffix,T,C,y,!1);if(x){const Le=jr(x.prefix,!0),wt=jr(x.suffix,!1);T.affix={pos:[k,oe],neg:[Le,wt]},T.sign="sign-never"}else(k||oe)&&(T.affix={pos:[k,oe]});return T}function os(f){const[y]=f.split("-",1);return-1!==["acceleration","angle","area","concentr","consumption","digital","duration","electric","energy","force","frequency","graphics","length","light","mass","power","pressure","speed","temperature","torque","volume"].indexOf(y)}const Zs={"compact-short":0,"compact-long":0,"notation-simple":0,scientific:2,engineering:2,percent:0,permille:0,"base-unit":0,currency:1,"measure-unit":1,"per-measure-unit":1,"unit-width-narrow":0,"unit-width-short":0,"unit-width-full-name":0,"unit-width-iso-code":0,"unit-width-hidden":0,"precision-integer":0,"precision-unlimited":0,"precision-currency-standard":1,"precision-currency-cash":0,"precision-increment":1,"rounding-mode-ceiling":0,"rounding-mode-floor":0,"rounding-mode-down":0,"rounding-mode-up":0,"rounding-mode-half-even":0,"rounding-mode-half-down":0,"rounding-mode-half-up":0,"rounding-mode-unnecessary":0,"integer-width":1,scale:1,"group-off":0,"group-min2":0,"group-auto":0,"group-on-aligned":0,"group-thousands":0,latin:0,"numbering-system":1,"sign-auto":0,"sign-always":0,"sign-never":0,"sign-accounting":0,"sign-accounting-always":0,"sign-except-zero":0,"sign-accounting-except-zero":0,"decimal-auto":0,"decimal-always":0},ji={currency:1,"integer-width":1,"measure-unit":1,"numbering-system":1,"per-measure-unit":1,"precision-increment":1,scale:1};function P(f,C,y){if(function ir(f){return f in Zs}(f)){const I=Zs[f];if(C.length>I){if(0===I)for(const x of C)y(new Ct(f,x));else y(new Ye(f,C,I));return!1}if(function Hn(f){return f in ji}(f)&&C.length<ji[f])return y(new Re(f)),!1}return!0}function le(f,C){const I=f&&f.match("fraction"===C?/^\.(0*)(\+|#*)$/:/^(@+)(\+|#*)$/);if(I){const x=I[1].length;switch(I[2].charAt(0)){case"":return{min:x,max:x};case"+":return{min:x,max:null};case"#":return{min:x,max:x+I[2].length}}}return null}class _t{constructor(C){this.skeleton={},this.onError=C}badOption(C,y){this.onError(new Ct(C,y))}assertEmpty(C){const y=this.skeleton[C];y&&this.onError(new Nt(C,y))}parseToken(C,y){if(!P(C,y,this.onError))return;const I=y[0],x=this.skeleton;switch(C){case"compact-short":case"compact-long":case"notation-simple":this.assertEmpty("notation"),x.notation={style:C};break;case"scientific":case"engineering":{let k,T=null;for(const Le of y)switch(Le){case"sign-auto":case"sign-always":case"sign-never":case"sign-accounting":case"sign-accounting-always":case"sign-except-zero":case"sign-accounting-except-zero":k=Le;break;default:/^\+e+$/.test(Le)?T=Le.length-1:this.badOption(C,Le)}this.assertEmpty("notation");const oe=y.join("/");x.notation=T&&k?{style:C,source:oe,expDigits:T,expSign:k}:T?{style:C,source:oe,expDigits:T}:k?{style:C,source:oe,expSign:k}:{style:C,source:oe};break}case"percent":case"permille":case"base-unit":this.assertEmpty("unit"),x.unit={style:C};break;case"currency":/^[A-Z]{3}$/.test(I)?(this.assertEmpty("unit"),x.unit={style:C,currency:I}):this.badOption(C,I);break;case"measure-unit":os(I)?(this.assertEmpty("unit"),x.unit={style:C,unit:I}):this.badOption(C,I);break;case"per-measure-unit":os(I)?(this.assertEmpty("unitPer"),x.unitPer=I):this.badOption(C,I);break;case"unit-width-narrow":case"unit-width-short":case"unit-width-full-name":case"unit-width-iso-code":case"unit-width-hidden":this.assertEmpty("unitWidth"),x.unitWidth=C;break;case"precision-integer":case"precision-unlimited":case"precision-currency-cash":this.assertEmpty("precision"),x.precision={style:C};break;case"precision-currency-standard":this.assertEmpty("precision"),x.precision="w"===I?{style:C,trailingZero:"stripIfInteger"}:{style:C};break;case"precision-increment":{const T=Number(I);T>0?(this.assertEmpty("precision"),x.precision={style:C,increment:T}):this.badOption(C,I);break}case"rounding-mode-ceiling":case"rounding-mode-floor":case"rounding-mode-down":case"rounding-mode-up":case"rounding-mode-half-even":case"rounding-mode-half-odd":case"rounding-mode-half-ceiling":case"rounding-mode-half-floor":case"rounding-mode-half-down":case"rounding-mode-half-up":case"rounding-mode-unnecessary":this.assertEmpty("roundingMode"),x.roundingMode=C;break;case"integer-width":if(/^\+0*$/.test(I))this.assertEmpty("integerWidth"),x.integerWidth={source:I,min:I.length-1};else{const T=I.match(/^#*(0*)$/);T?(this.assertEmpty("integerWidth"),x.integerWidth={source:I,min:T[1].length,max:T[0].length}):this.badOption(C,I)}break;case"scale":{const T=Number(I);T>0?(this.assertEmpty("scale"),x.scale=T):this.badOption(C,I);break}case"group-off":case"group-min2":case"group-auto":case"group-on-aligned":case"group-thousands":this.assertEmpty("group"),x.group=C;break;case"latin":this.assertEmpty("numberingSystem"),x.numberingSystem="latn";break;case"numbering-system":!function Pn(f){return-1!==["arab","arabext","bali","beng","deva","fullwide","gujr","guru","hanidec","khmr","knda","laoo","latn","limb","mlym","mong","mymr","orya","tamldec","telu","thai","tibt"].indexOf(f)}(I)?this.badOption(C,I):(this.assertEmpty("numberingSystem"),x.numberingSystem=I);break;case"sign-auto":case"sign-always":case"sign-never":case"sign-accounting":case"sign-accounting-always":case"sign-except-zero":case"sign-accounting-except-zero":this.assertEmpty("sign"),x.sign=C;break;case"decimal-auto":case"decimal-always":this.assertEmpty("decimal"),x.decimal=C;break;default:{const T=function Ie(f,C,y){const I=le(f,"fraction");if(I){C.length>1&&y(new Ye(f,C,1));const T={style:"precision-fraction",source:f,minFraction:I.min};null!=I.max&&(T.maxFraction=I.max);const k=C[0],oe=le(k,"significant");return oe?(T.source=`${f}/${k}`,T.minSignificant=oe.min,null!=oe.max&&(T.maxSignificant=oe.max)):k&&y(new Ct(f,k)),T}const x=le(f,"significant");if(x){for(const k of C)y(new Ct(f,k));const T={style:"precision-fraction",source:f,minSignificant:x.min};return null!=x.max&&(T.maxSignificant=x.max),T}return null}(C,y,this.onError);T?(this.assertEmpty("precision"),x.precision=T):this.onError(new mt(C))}}}}function sn(f){let C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x=>{throw x};const y=[];for(const x of f.split(" "))if(x){const T=x.split("/"),k=T.shift()||"";y.push({stem:k,options:T})}const I=new _t(C);for(const{stem:x,options:T}of y)I.parseToken(x,T);return I.skeleton}function Dn(f,C,y,I){"string"==typeof C&&(C=0===C.indexOf("::")?sn(C.slice(2),I):Ts(C,y,I));const x=ne(f,C),T=F(C,I),k=function kt(f){const C=It(f),{precision:y}=f;return y&&"precision-increment"===y.style?I=>function De(f,C){const y=+f+C/2;return y-y%+C}(I,y.increment)*C:I=>I*C}(C),oe=new Intl.NumberFormat(x,T);if(C.affix){const[Le,wt]=C.affix.pos,[tn,Tn]=C.affix.neg||["",""];return kn=>{const Ft=oe.format(k(kn));return kn<0?`${tn}${Ft}${Tn}`:`${Le}${Ft}${wt}`}}return Le=>oe.format(k(Le))}function Bn(f,C,y,I){"string"==typeof C&&(C=0===C.indexOf("::")?sn(C.slice(2),I):Ts(C,y,I));const x=ne(f,C),T=F(C,I),k=function Dt(f){const C=It(f),{precision:y}=f;if(y&&"precision-increment"===y.style){let x=`x - (x % +${y.increment})`;return 1!==C&&(x=`(${x}) * ${C}`),`function(n) { var x = ${"+n + "+y.increment/2}; return ${x}; }`}return 1!==C?`function(n) { return n * ${C}; }`:null}(C),oe=["(function() {",`var opt = ${JSON.stringify(T)};`,`var nf = new Intl.NumberFormat(${JSON.stringify(x)}, opt);`];let Le="nf.format(value)";if(k&&(oe.push(`var mod = ${k};`),Le="nf.format(mod(value))"),C.affix){const[wt,tn]=C.affix.pos.map(Tn=>JSON.stringify(Tn));if(C.affix.neg){const[Tn,kn]=C.affix.neg.map(Ft=>JSON.stringify(Ft));Le=`value < 0 ? ${Tn} + ${Le} + ${kn} : ${wt} + ${Le} + ${tn}`}else Le=`${wt} + ${Le} + ${tn}`}return oe.push(`return function(value) { return ${Le}; }`),oe.join("\n  ")+"\n})()"}var Jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qt(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var f,C,y,En={},Nn={},Rr={exports:{}};C=Jt,y=function(){var C=Object.prototype.hasOwnProperty,y=Object.prototype.toString,I="boolean"==typeof(new RegExp).sticky;function x(Ge){return Ge&&"[object RegExp]"===y.call(Ge)}function T(Ge){return Ge&&"object"==typeof Ge&&!x(Ge)&&!Array.isArray(Ge)}function oe(Ge){return new RegExp("|"+Ge).exec("").length-1}function Le(Ge){return"("+Ge+")"}function wt(Ge){return Ge.length?"(?:"+Ge.map(function(nn){return"(?:"+nn+")"}).join("|")+")":"(?!)"}function tn(Ge){if("string"==typeof Ge)return"(?:"+function k(Ge){return Ge.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}(Ge)+")";if(x(Ge)){if(Ge.ignoreCase)throw new Error("RegExp /i flag not allowed");if(Ge.global)throw new Error("RegExp /g flag is implied");if(Ge.sticky)throw new Error("RegExp /y flag is implied");if(Ge.multiline)throw new Error("RegExp /m flag is implied");return Ge.source}throw new Error("Not a pattern: "+Ge)}function Tn(Ge,Et){return Ge.length>Et?Ge:Array(Et-Ge.length+1).join(" ")+Ge}function ms(Ge,Et){if(T(Et)||(Et={match:Et}),Et.include)throw new Error("Matching rules cannot also include states");var nn={defaultType:Ge,lineBreaks:!!Et.error||!!Et.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var Cn in Et)C.call(Et,Cn)&&(nn[Cn]=Et[Cn]);if("string"==typeof nn.type&&Ge!==nn.type)throw new Error("Type transform cannot be a string (type '"+nn.type+"' for token '"+Ge+"')");var Gn=nn.match;return nn.match=Array.isArray(Gn)?Gn:Gn?[Gn]:[],nn.match.sort(function(An,rr){return x(An)&&x(rr)?0:x(rr)?-1:x(An)?1:rr.length-An.length}),nn}function Os(Ge){return Array.isArray(Ge)?function Gr(Ge){for(var Et=[],nn=0;nn<Ge.length;nn++){var Cn=Ge[nn];if(Cn.include)for(var Gn=[].concat(Cn.include),An=0;An<Gn.length;An++)Et.push({include:Gn[An]});else{if(!Cn.type)throw new Error("Rule has no type: "+JSON.stringify(Cn));Et.push(ms(Cn.type,Cn))}}return Et}(Ge):function Ft(Ge){for(var Et=Object.getOwnPropertyNames(Ge),nn=[],Cn=0;Cn<Et.length;Cn++){var Gn=Et[Cn],rr=[].concat(Ge[Gn]);if("include"!==Gn){var wr=[];rr.forEach(function(Zn){T(Zn)?(wr.length&&nn.push(ms(Gn,wr)),nn.push(ms(Gn,Zn)),wr=[]):wr.push(Zn)}),wr.length&&nn.push(ms(Gn,wr))}else for(var cs=0;cs<rr.length;cs++)nn.push({include:rr[cs]})}return nn}(Ge)}var Pi=ms("error",{lineBreaks:!0,shouldThrow:!0});function Bo(Ge,Et){for(var nn=null,Cn=Object.create(null),Gn=!0,An=null,rr=[],cs=[],wr=0;wr<Ge.length;wr++)Ge[wr].fallback&&(Gn=!1);for(wr=0;wr<Ge.length;wr++){var Zn=Ge[wr];if(Zn.include)throw new Error("Inheritance is not allowed in stateless lexers");if(Zn.error||Zn.fallback){if(nn)throw!Zn.fallback==!nn.fallback?new Error("Multiple "+(Zn.fallback?"fallback":"error")+" rules not allowed (for token '"+Zn.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+Zn.defaultType+"')");nn=Zn}var Vi=Zn.match.slice();if(Gn)for(;Vi.length&&"string"==typeof Vi[0]&&1===Vi[0].length;)Cn[Vi.shift().charCodeAt(0)]=Zn;if(Zn.pop||Zn.push||Zn.next){if(!Et)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+Zn.defaultType+"')");if(Zn.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+Zn.defaultType+"')")}if(0!==Vi.length){Gn=!1,rr.push(Zn);for(var No=0;No<Vi.length;No++){var ti=Vi[No];if(x(ti))if(null===An)An=ti.unicode;else if(An!==ti.unicode&&!1===Zn.fallback)throw new Error("If one rule is /u then all must be")}var pi=wt(Vi.map(tn)),Fo=new RegExp(pi);if(Fo.test(""))throw new Error("RegExp matches empty string: "+Fo);if(oe(pi)>0)throw new Error("RegExp has capture groups: "+Fo+"\nUse (?: \u2026 ) instead");if(!Zn.lineBreaks&&Fo.test("\n"))throw new Error("Rule should declare lineBreaks: "+Fo);cs.push(Le(pi))}}var Tc=nn&&nn.fallback,au=I&&!Tc?"ym":"gm",Ad=I||Tc?"":"|";return!0===An&&(au+="u"),{regexp:new RegExp(wt(cs)+Ad,au),groups:rr,fast:Cn,error:nn||Pi}}function ka(Ge,Et,nn){var Cn=Ge&&(Ge.push||Ge.next);if(Cn&&!nn[Cn])throw new Error("Missing state '"+Cn+"' (in token '"+Ge.defaultType+"' of state '"+Et+"')");if(Ge&&Ge.pop&&1!=+Ge.pop)throw new Error("pop must be 1 (in token '"+Ge.defaultType+"' of state '"+Et+"')")}var ks=function(Ge,Et){this.startState=Et,this.states=Ge,this.buffer="",this.stack=[],this.reset()};ks.prototype.reset=function(Ge,Et){return this.buffer=Ge||"",this.index=0,this.line=Et?Et.line:1,this.col=Et?Et.col:1,this.queuedToken=Et?Et.queuedToken:null,this.queuedText=Et?Et.queuedText:"",this.queuedThrow=Et?Et.queuedThrow:null,this.setState(Et?Et.state:this.startState),this.stack=Et&&Et.stack?Et.stack.slice():[],this},ks.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},ks.prototype.setState=function(Ge){if(Ge&&this.state!==Ge){this.state=Ge;var Et=this.states[Ge];this.groups=Et.groups,this.error=Et.error,this.re=Et.regexp,this.fast=Et.fast}},ks.prototype.popState=function(){this.setState(this.stack.pop())},ks.prototype.pushState=function(Ge){this.stack.push(this.state),this.setState(Ge)};var Vc=I?function(Ge,Et){return Ge.exec(Et)}:function(Ge,Et){var nn=Ge.exec(Et);return 0===nn[0].length?null:nn};function Id(){return this.value}if(ks.prototype._getGroup=function(Ge){for(var Et=this.groups.length,nn=0;nn<Et;nn++)if(void 0!==Ge[nn+1])return this.groups[nn];throw new Error("Cannot find token type for matched text")},ks.prototype.next=function(){var Ge=this.index;if(this.queuedGroup){var Et=this._token(this.queuedGroup,this.queuedText,Ge);return this.queuedGroup=null,this.queuedText="",Et}var nn=this.buffer;if(Ge!==nn.length){if(rr=this.fast[nn.charCodeAt(Ge)])return this._token(rr,nn.charAt(Ge),Ge);var Cn=this.re;Cn.lastIndex=Ge;var Gn=Vc(Cn,nn),An=this.error;if(null==Gn)return this._token(An,nn.slice(Ge,nn.length),Ge);var rr=this._getGroup(Gn),cs=Gn[0];return An.fallback&&Gn.index!==Ge?(this.queuedGroup=rr,this.queuedText=cs,this._token(An,nn.slice(Ge,Gn.index),Ge)):this._token(rr,cs,Ge)}},ks.prototype._token=function(Ge,Et,nn){var Cn=0;if(Ge.lineBreaks){var Gn=/\n/g,An=1;if("\n"===Et)Cn=1;else for(;Gn.exec(Et);)Cn++,An=Gn.lastIndex}var rr={type:"function"==typeof Ge.type&&Ge.type(Et)||Ge.defaultType,value:"function"==typeof Ge.value?Ge.value(Et):Et,text:Et,toString:Id,offset:nn,lineBreaks:Cn,line:this.line,col:this.col},cs=Et.length;if(this.index+=cs,this.line+=Cn,0!==Cn?this.col=cs-An+1:this.col+=cs,Ge.shouldThrow)throw new Error(this.formatError(rr,"invalid syntax"));return Ge.pop?this.popState():Ge.push?this.pushState(Ge.push):Ge.next&&this.setState(Ge.next),rr},typeof Symbol<"u"&&Symbol.iterator){var fl=function(Ge){this.lexer=Ge};fl.prototype.next=function(){var Ge=this.lexer.next();return{value:Ge,done:!Ge}},fl.prototype[Symbol.iterator]=function(){return this},ks.prototype[Symbol.iterator]=function(){return new fl(this)}}return ks.prototype.formatError=function(Ge,Et){if(null==Ge){var nn=this.buffer.slice(this.index);Ge={text:nn,offset:this.index,lineBreaks:-1===nn.indexOf("\n")?0:1,line:this.line,col:this.col}}var Gn=Math.max(Ge.line-2,1),rr=String(Ge.line+2).length,cs=function kn(Ge,Et){for(var nn=Ge.length,Cn=0;;){var Gn=Ge.lastIndexOf("\n",nn-1);if(-1===Gn||(nn=Gn,++Cn===Et)||0===nn)break}return Ge.substring(Cn<Et?0:nn+1).split("\n")}(this.buffer,this.line-Ge.line+2+1).slice(0,5),wr=[];wr.push(Et+" at line "+Ge.line+" col "+Ge.col+":"),wr.push("");for(var Zn=0;Zn<cs.length;Zn++){var Vi=cs[Zn],ml=Gn+Zn;wr.push(Tn(String(ml),rr)+"  "+Vi),ml===Ge.line&&wr.push(Tn("",rr+Ge.col+1)+"^")}return wr.join("\n")},ks.prototype.clone=function(){return new ks(this.states,this.state)},ks.prototype.has=function(Ge){return!0},{compile:function pl(Ge){var Et=Bo(Os(Ge));return new ks({start:Et},"start")},states:function ta(Ge,Et){var nn=Ge.$all?Os(Ge.$all):[];delete Ge.$all;var Cn=Object.getOwnPropertyNames(Ge);Et||(Et=Cn[0]);for(var Gn=Object.create(null),An=0;An<Cn.length;An++)Gn[rr=Cn[An]]=Os(Ge[rr]).concat(nn);for(An=0;An<Cn.length;An++)for(var cs=Gn[rr=Cn[An]],wr=Object.create(null),Zn=0;Zn<cs.length;Zn++){var Vi=cs[Zn];if(Vi.include){var ml=[Zn,1];if(Vi.include!==rr&&!wr[Vi.include]){wr[Vi.include]=!0;var No=Gn[Vi.include];if(!No)throw new Error("Cannot include nonexistent state '"+Vi.include+"' (in state '"+rr+"')");for(var ti=0;ti<No.length;ti++){var pi=No[ti];-1===cs.indexOf(pi)&&ml.push(pi)}}cs.splice.apply(cs,ml),Zn--}}var Fo=Object.create(null);for(An=0;An<Cn.length;An++){var rr;Fo[rr=Cn[An]]=Bo(Gn[rr],!0)}for(An=0;An<Cn.length;An++){var ou=Cn[An],Tc=Fo[ou],au=Tc.groups;for(Zn=0;Zn<au.length;Zn++)ka(au[Zn],ou,Fo);var Ad=Object.getOwnPropertyNames(Tc.fast);for(Zn=0;Zn<Ad.length;Zn++)ka(Tc.fast[Ad[Zn]],ou,Fo)}return new ks(Fo,Et)},error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:function gl(Ge){for(var Et=typeof Map<"u",nn=Et?new Map:Object.create(null),Cn=Object.getOwnPropertyNames(Ge),Gn=0;Gn<Cn.length;Gn++){var An=Cn[Gn],rr=Ge[An];(Array.isArray(rr)?rr:[rr]).forEach(function(wr){if("string"!=typeof wr)throw new Error("keyword must be string (in keyword '"+An+"')");Et?nn.set(wr,An):nn[wr]=An})}return function(wr){return Et?nn.get(wr):nn[wr]}}}},(f=Rr).exports?f.exports=y():C.moo=y();var fs=Rr.exports;(function(f){var C=Jt&&Jt.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(f,"__esModule",{value:!0}),f.lexer=f.states=void 0;const y=C(fs);f.states={body:{doubleapos:{match:"''",value:()=>"'"},quoted:{lineBreaks:!0,match:/'[{}#](?:[^]*?[^'])?'(?!')/u,value:I=>I.slice(1,-1).replace(/''/g,"'")},argument:{lineBreaks:!0,match:/\{\s*[^\p{Pat_Syn}\p{Pat_WS}]+\s*/u,push:"arg",value:I=>I.substring(1).trim()},octothorpe:"#",end:{match:"}",pop:1},content:{lineBreaks:!0,match:/[^][^{}#']*/u}},arg:{select:{lineBreaks:!0,match:/,\s*(?:plural|select|selectordinal)\s*,\s*/u,next:"select",value:I=>I.split(",")[1].trim()},"func-args":{lineBreaks:!0,match:/,\s*[^\p{Pat_Syn}\p{Pat_WS}]+\s*,/u,next:"body",value:I=>I.split(",")[1].trim()},"func-simple":{lineBreaks:!0,match:/,\s*[^\p{Pat_Syn}\p{Pat_WS}]+\s*/u,value:I=>I.substring(1).trim()},end:{match:"}",pop:1}},select:{offset:{lineBreaks:!0,match:/\s*offset\s*:\s*\d+\s*/u,value:I=>I.split(":")[1].trim()},case:{lineBreaks:!0,match:/\s*(?:=\d+|[^\p{Pat_Syn}\p{Pat_WS}]+)\s*\{/u,push:"body",value:I=>I.substring(0,I.indexOf("{")).trim()},end:{match:/\s*\}/u,pop:1}}},f.lexer=y.default.states(f.states)})(Nn),Object.defineProperty(En,"__esModule",{value:!0});var L=En.parse=En.ParseError=void 0;const A=Nn,S=f=>({offset:f.offset,line:f.line,col:f.col,text:f.text,lineBreaks:f.lineBreaks}),O=f=>"plural"===f||"select"===f||"selectordinal"===f;const Ae=["number","date","time","spellout","ordinal","duration"],je=["zero","one","two","few","many","other"];class jt extends Error{constructor(C,y){super(A.lexer.formatError(C,y))}}En.ParseError=jt;class er{constructor(C,y){var I,x,T,k;this.lexer=A.lexer.reset(C),this.cardinalKeys=null!==(I=y?.cardinal)&&void 0!==I?I:je,this.ordinalKeys=null!==(x=y?.ordinal)&&void 0!==x?x:je,this.strict=null!==(T=y?.strict)&&void 0!==T&&T,this.strictPluralKeys=null===(k=y?.strictPluralKeys)||void 0===k||k}parse(){return this.parseBody(!1,!0)}checkSelectKey(C,y,I){if("="===I[0]){if("select"===y)throw new jt(C,`The case ${I} is not valid with select`)}else if("select"!==y){const x="plural"===y?this.cardinalKeys:this.ordinalKeys;if(this.strictPluralKeys&&x.length>0&&!x.includes(I))throw new jt(C,`The ${y} case ${I} is not valid in this locale`)}}parseSelect(C,y,I,x){let{value:T}=C;const k={type:x,arg:T,cases:[],ctx:I};"plural"===x||"selectordinal"===x?y=!0:this.strict&&(y=!1);for(const oe of this.lexer)switch(oe.type){case"offset":if("select"===x)throw new jt(oe,"Unexpected plural offset for select");if(k.cases.length>0)throw new jt(oe,"Plural offset must be set before cases");k.pluralOffset=Number(oe.value),I.text+=oe.text,I.lineBreaks+=oe.lineBreaks;break;case"case":this.checkSelectKey(oe,x,oe.value),k.cases.push({key:oe.value,tokens:this.parseBody(y),ctx:S(oe)});break;case"end":return k;default:throw new jt(oe,`Unexpected lexer token: ${oe.type}`)}throw new jt(null,"Unexpected message end")}parseArgToken(C,y){const I=S(C),x=this.lexer.next();if(!x)throw new jt(null,"Unexpected message end");if(I.text+=x.text,I.lineBreaks+=x.lineBreaks,this.strict&&("func-simple"===x.type||"func-args"===x.type)&&!Ae.includes(x.value))throw new jt(C,`Invalid strict mode function arg type: ${x.value}`);switch(x.type){case"end":return{type:"argument",arg:C.value,ctx:I};case"func-simple":{const T=this.lexer.next();if(!T)throw new jt(null,"Unexpected message end");if("end"!==T.type)throw new jt(T,`Unexpected lexer token: ${T.type}`);if(I.text+=T.text,O(x.value.toLowerCase()))throw new jt(x,`Invalid type identifier: ${x.value}`);return{type:"function",arg:C.value,key:x.value,ctx:I}}case"func-args":{if(O(x.value.toLowerCase()))throw new jt(x,`Invalid type identifier: ${x.value}`);let T=this.parseBody(!this.strict&&y);return this.strict&&T.length>0&&(T=function re(f,C){let y="",I="";for(const T of C){const k=T.ctx.text;switch(I+=k,T.type){case"content":y+=T.value;break;case"argument":case"function":case"octothorpe":y+=k;break;default:throw new jt(f,`Unsupported part in strict mode function arg style: ${k}`)}}return[{type:"content",value:y.trim(),ctx:Object.assign({},C[0].ctx,{text:I})}]}(C,T)),{type:"function",arg:C.value,key:x.value,param:T,ctx:I}}case"select":if(O(x.value))return this.parseSelect(C,y,I,x.value);throw new jt(x,`Unexpected select type ${x.value}`);default:throw new jt(x,`Unexpected lexer token: ${x.type}`)}}parseBody(C,y){const I=[];let x=null;for(const T of this.lexer)if("argument"===T.type)x&&(x=null),I.push(this.parseArgToken(T,C));else if("octothorpe"===T.type&&C)x&&(x=null),I.push({type:"octothorpe",ctx:S(T)});else{if("end"===T.type&&!y)return I;{let k=T.value;if(!C&&"quoted"===T.type&&"#"===k[0]){if(k.includes("{"))throw new jt(T,`Unsupported escape pattern: ${k}`);k=T.text}x?(x.value+=k,x.ctx.text+=T.text,x.ctx.lineBreaks+=T.lineBreaks):(x={type:"content",value:k,ctx:S(T)},I.push(x))}}if(y)return I;throw new jt(null,"Unexpected message end")}}function te(f){return te[f]||(te[f]=new Intl.NumberFormat(f))}L=En.parse=function qn(f){return new er(f,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).parse()};var ar=Object.freeze({__proto__:null,_nf:te,number:function he(f,C,y){return te(f).format(C-y)},plural:function ct(f,C,y,I,x){if({}.hasOwnProperty.call(I,f))return I[f];C&&(f-=C);var T=y(f,x);return T in I?I[T]:I.other},reqArgs:function Ln(f,C){for(var y=0;y<f.length;++y)if(!C||void 0===C[f[y]])throw new Error("Message requires argument '".concat(f[y],"'"))},select:function Yt(f,C){return{}.hasOwnProperty.call(C,f)?C[f]:C.other},strictNumber:function Qe(f,C,y,I){var x=C-y;if(isNaN(x))throw new Error("`"+I+"` or its offset is not a number");return te(f).format(x)}});var Vr={};function js(f,C){var y=String(f)+JSON.stringify(C);return Vr[y]||(Vr[y]=new Intl.NumberFormat(f,C)),Vr[y]}var xi=Object.freeze({__proto__:null,date:function zn(f,C,y){var I={day:"numeric",month:"short",year:"numeric"};switch(y){case"full":I.weekday="long";case"long":I.month="long";break;case"short":I.month="numeric"}return new Date(f).toLocaleDateString(C,I)},duration:function hr(f){if("number"!=typeof f&&(f=Number(f)),!isFinite(f))return String(f);var C="";f<0?(C="-",f=Math.abs(f)):f=Number(f);var y=f%60,I=[Math.round(y)===y?y:y.toFixed(3)];return f<60?I.unshift(0):(f=Math.round((f-Number(I[0]))/60),I.unshift(f%60),f>=60&&(f=Math.round((f-Number(I[0]))/60),I.unshift(f))),C+I.shift()+":"+I.map(function(T){return Number(T)<10?"0"+String(T):String(T)}).join(":")},numberCurrency:function(f,C,y){return js(C,{style:"currency",currency:y,minimumFractionDigits:2,maximumFractionDigits:2}).format(f)},numberFmt:function Ri(f,C,y,I){var x=y&&y.split(":")||[],T=x[0],k=x[1];return js(C,{integer:{maximumFractionDigits:0},percent:{style:"percent"},currency:{style:"currency",currency:k&&k.trim()||I,minimumFractionDigits:2,maximumFractionDigits:2}}[T]||{}).format(f)},numberInteger:function(f,C){return js(C,{maximumFractionDigits:0}).format(f)},numberPercent:function(f,C){return js(C,{style:"percent"}).format(f)},time:function tl(f,C,y){var I={second:"numeric",minute:"numeric",hour:"numeric"};switch(y){case"full":case"long":I.timeZoneName="short";break;case"short":delete I.second}return new Date(f).toLocaleTimeString(C,I)}}),$=qt({ES3:{break:!0,continue:!0,delete:!0,else:!0,for:!0,function:!0,if:!0,in:!0,new:!0,return:!0,this:!0,typeof:!0,var:!0,void:!0,while:!0,with:!0,case:!0,catch:!0,default:!0,do:!0,finally:!0,instanceof:!0,switch:!0,throw:!0,try:!0},ESnext:{await:!0,debugger:!0,class:!0,enum:!0,extends:!0,super:!0,const:!0,export:!0,import:!0,null:!0,true:!0,false:!0,implements:!0,let:!0,private:!0,public:!0,yield:!0,interface:!0,package:!0,protected:!0,static:!0}});function ie(f,C){C&&(f+=" "+function ze(f){let C=0;for(let y=0;y<f.length;++y)C=(C<<5)-C+f.charCodeAt(y),C|=0;return C}(f).toString(36));const y=f.trim().replace(/\W+/g,"_");return $.ES3[y]||$.ESnext[y]||/^\d/.test(y)?"_"+y:y}function cn(f,C){if(/^[A-Z_$][0-9A-Z_$]*$/i.test(C)&&!$.ES3[C])return f?f+"."+C:C;{const y=JSON.stringify(C);return f?f+"["+y+"]":y}}var Js=new RegExp("^"+["ar","ckb","fa","he","ks($|[^bfh])","lrc","mzn","pa-Arab","ps","ug","ur","uz-Arab","yi"].join("|^"));var Us="@messageformat/runtime/lib/plurals",Hi=function(){function f(C){this.arguments=[],this.runtime={},this.options=C}return f.prototype.compile=function(C,y,I){var x,T,k=this,oe=this.options,Le=oe.localeCodeFromKey,wt=oe.requireAllArguments,tn=oe.strict,Tn=oe.strictPluralKeys;if("object"==typeof C){var kn={};try{for(var Ft=Ve(Object.keys(C)),Gr=Ft.next();!Gr.done;Gr=Ft.next()){var ms=Gr.value,Os=Le?Le(ms):ms;kn[ms]=this.compile(C[ms],I&&Os&&I[Os]||y,I)}}catch(ks){x={error:ks}}finally{try{Gr&&!Gr.done&&(T=Ft.return)&&T.call(Ft)}finally{if(x)throw x.error}}return kn}this.plural=y;var Bo={cardinal:y.cardinals,ordinal:y.ordinals,strict:tn,strictPluralKeys:Tn};this.arguments=[];var pl=L(C,Bo).map(function(ks){return k.token(ks,null)}),ka=this.arguments.length>0,ta=this.concatenate(pl,!0);if(wt&&ka){this.setRuntimeFn("reqArgs");var gl=JSON.stringify(this.arguments);return"(d) => { reqArgs(".concat(gl,", d); return ").concat(ta,"; }")}return"(".concat(ka?"d":"",") => ").concat(ta)},f.prototype.cases=function(C,y){var I=this,x=!0,T=C.cases.map(function(tn){var Tn=tn.key;"other"===Tn&&(x=!1);var Ft=tn.tokens.map(function(Gr){return I.token(Gr,y)});return"".concat(cn(null,Tn.replace(/^=/,"")),": ").concat(I.concatenate(Ft,!1))});if(x){var k=C.type,oe=this.plural,wt=oe.ordinals;if("select"===k||"plural"===k&&oe.cardinals.includes("other")||"selectordinal"===k&&wt.includes("other"))throw new Error("No 'other' form found in ".concat(JSON.stringify(C)))}return"{ ".concat(T.join(", ")," }")},f.prototype.concatenate=function(C,y){return"values"===this.options.returnType&&(y||C.length>1)?"["+C.join(", ")+"]":C.join(" + ")||'""'},f.prototype.token=function(C,y){if("content"===C.type)return JSON.stringify(C.value);var k,oe,I=this.plural,x=I.id,T=I.lc;switch("arg"in C?(this.arguments.push(C.arg),k=[cn("d",C.arg)]):k=[],C.type){case"argument":return this.options.biDiSupport?function br(f,C){var y=Js.test(C),I=JSON.stringify(y?"\u200f":"\u200e");return"".concat(I," + ").concat(f," + ").concat(I)}(String(k[0]),T):String(k[0]);case"select":oe="select",y&&this.options.strict&&(y=null),k.push(this.cases(C,y)),this.setRuntimeFn("select");break;case"selectordinal":oe="plural",k.push(C.pluralOffset||0,x,this.cases(C,C),1),this.setLocale(x,!0),this.setRuntimeFn("plural");break;case"plural":oe="plural",k.push(C.pluralOffset||0,x,this.cases(C,C)),this.setLocale(x,!1),this.setRuntimeFn("plural");break;case"function":var Le=this.options.customFormatters[C.key],wt=Le&&"module"in Le&&"function"==typeof Le.module;if(!Le){if("date"===C.key){oe=this.setDateFormatter(C,k,y);break}if("number"===C.key){oe=this.setNumberFormatter(C,k,y);break}}if(k.push(JSON.stringify(this.plural.locale)),C.param){y&&this.options.strict&&(y=null);var tn=this.getFormatterArg(C,y);tn&&k.push(tn)}oe=wt?ie("".concat(C.key,"__").concat(this.plural.locale)):C.key,this.setFormatter(oe,C.key);break;case"octothorpe":if(!y)return'"#"';k=[JSON.stringify(this.plural.locale),cn("d",y.arg),y.pluralOffset||0],this.options.strict?(oe="strictNumber",k.push(JSON.stringify(y.arg)),this.setRuntimeFn("strictNumber")):(oe="number",this.setRuntimeFn("number"))}if(!oe)throw new Error("Parser error for token "+JSON.stringify(C));return"".concat(oe,"(").concat(k.join(", "),")")},f.prototype.runtimeIncludes=function(C,y){if(ie(C)!==C)throw new SyntaxError("Reserved word used as ".concat(y," identifier: ").concat(C));var I=this.runtime[C];if(!I||I.type===y)return I;throw new TypeError("Cannot override ".concat(I.type," runtime function as ").concat(y,": ").concat(C))},f.prototype.setLocale=function(C,y){var Le,wt,tn,I=this.runtimeIncludes(C,"locale"),x=this.plural,T=x.getCardinal,k=x.getPlural,oe=x.isDefault;if(!y&&oe&&T){if(I)return;Le=function(Tn){return T(Tn)},wt="@messageformat/runtime/lib/cardinals",tn=function(){return String(T)}}else{if(I&&(!oe||I.module===Us))return;Le=function(Tn,kn){return k(Tn,kn)},wt=oe?Us:k.module||null,tn=function(){return String(k)}}this.runtime[C]=Object.assign(Le,{id:C,module:wt,toString:tn,type:"locale"})},f.prototype.setRuntimeFn=function(C){this.runtimeIncludes(C,"runtime")||(this.runtime[C]=Object.assign(ar[C],{id:C,module:"@messageformat/runtime",type:"runtime"}))},f.prototype.getFormatterArg=function(C,y){var I,x,T,k,oe=this,Le=C.key,wt=C.param,tn=this.options.customFormatters[Le]||Es(Le)&&xi[Le];if(!tn||!wt)return null;var Tn="arg"in tn&&tn.arg||"string";if("options"===Tn){var kn="";try{for(var Ft=Ve(wt),Gr=Ft.next();!Gr.done;Gr=Ft.next()){var ms=Gr.value;if("content"!==ms.type)throw new SyntaxError("Expected literal options for ".concat(Le," formatter"));kn+=ms.value}}catch(fl){I={error:fl}}finally{try{Gr&&!Gr.done&&(x=Ft.return)&&x.call(Ft)}finally{if(I)throw I.error}}var Os={};try{for(var Pi=Ve(kn.split(",")),Bo=Pi.next();!Bo.done;Bo=Pi.next()){var pl=Bo.value,ka=pl.indexOf(":");if(-1===ka)Os[pl.trim()]=null;else{var ta=pl.substring(0,ka).trim(),gl=pl.substring(ka+1).trim();if("true"===gl)Os[ta]=!0;else if("false"===gl)Os[ta]=!1;else if("null"===gl)Os[ta]=null;else{var ks=Number(gl);Os[ta]=Number.isFinite(ks)?ks:gl}}}}catch(fl){T={error:fl}}finally{try{Bo&&!Bo.done&&(k=Pi.return)&&k.call(Pi)}finally{if(T)throw T.error}}return JSON.stringify(Os)}var Vc=wt.map(function(fl){return oe.token(fl,y)});if("raw"===Tn)return"[".concat(Vc.join(", "),"]");var Id=Vc.join(" + ");return Id?"(".concat(Id,").trim()"):'""'},f.prototype.setFormatter=function(C,y){if(!this.runtimeIncludes(C,"formatter")){var I=this.options.customFormatters[y||C];if(I){var x="function"==typeof I?{formatter:I}:I;this.runtime[C]=Object.assign(x.formatter.bind({}),at(at({},x.formatter.prototype),{toString:function(){return String(x.formatter)}}),{type:"formatter"},"module"in I&&I.module&&I.id?{id:ie(I.id),module:"function"==typeof I.module?I.module(this.plural.locale):I.module}:{id:null,module:null})}else{if(!Es(C))throw new Error("Formatting function not found: ".concat(C));this.runtime[C]=Object.assign(xi[C],{type:"formatter"},{id:C,module:"@messageformat/runtime/lib/formatters"})}}},f.prototype.setDateFormatter=function(C,y,I){var x=this,T=C.param,k=this.plural.locale,oe=T&&1===T.length&&T[0];if(oe&&"content"===oe.type&&/^\s*::/.test(oe.value)){var Le=oe.value.trim().substr(2),wt=ie("date_".concat(k,"_").concat(Le),!0);if(!this.runtimeIncludes(wt,"formatter")){var tn=function xe(f,C,y,I){"string"==typeof C&&(C=ve(C)),"function"==typeof y&&(I=y,y=void 0);const x=se(C,y,I),T=new Intl.DateTimeFormat(f,x);return k=>T.format(k)}(k,Le,this.options.timeZone);this.runtime[wt]=Object.assign(tn,{id:wt,module:null,toString:function(){return function Ee(f,C,y,I){"string"==typeof C&&(C=ve(C)),"function"==typeof y&&(I=y,y=void 0);const x=se(C,y,I);return["(function() {",`var opt = ${JSON.stringify(x)};`,`var dtf = new Intl.DateTimeFormat(${JSON.stringify(f)}, opt);`,"return function(value) { return dtf.format(value); }"].join("\n  ")+"\n})()"}(k,Le,x.options.timeZone)},type:"formatter"})}return wt}if(y.push(JSON.stringify(k)),T&&T.length>0){I&&this.options.strict&&(I=null);var Tn=T.map(function(kn){return x.token(kn,I)});y.push("("+(Tn.join(" + ")||'""')+").trim()")}return this.setFormatter("date"),"date"},f.prototype.setNumberFormatter=function(C,y,I){var x=this,T=C.param,k=this.plural.locale;if(!T||0===T.length)return y.unshift(JSON.stringify(k)),y.push("0"),this.setRuntimeFn("number"),"number";if(y.push(JSON.stringify(k)),1===T.length&&"content"===T[0].type){var oe=T[0].value.trim();switch(oe){case"currency":return y.push(JSON.stringify(this.options.currency)),this.setFormatter("numberCurrency"),"numberCurrency";case"integer":return this.setFormatter("numberInteger"),"numberInteger";case"percent":return this.setFormatter("numberPercent"),"numberPercent"}var Le=oe.match(/^currency:([A-Z]+)$/);if(Le)return y.push(JSON.stringify(Le[1])),this.setFormatter("numberCurrency"),"numberCurrency";var wt=ie("number_".concat(k,"_").concat(oe),!0);if(!this.runtimeIncludes(wt,"formatter")){var tn=this.options.currency,Tn=Dn(k,oe,tn);this.runtime[wt]=Object.assign(Tn,{id:null,module:null,toString:function(){return Bn(k,oe,tn)},type:"formatter"})}return wt}I&&this.options.strict&&(I=null);var kn=T.map(function(Ft){return x.token(Ft,I)});return y.push("("+(kn.join(" + ")||'""')+").trim()"),y.push(JSON.stringify(this.options.currency)),this.setFormatter("numberFmt"),"numberFmt"},f}();function Es(f){return f in xi}const ot=f=>1==f?"one":"other",Ls=f=>0==f||1==f?"one":"other",tr=f=>f>=0&&f<=1?"one":"other",Rs=f=>{const C=String(f).split(".");return 1!=f||C[1]?"other":"one"},Ut=f=>"other",Bi=f=>1==f?"one":2==f?"two":"other";var Ko=Object.freeze({__proto__:null,af:ot,ak:Ls,am:tr,an:ot,ar:f=>{const C=String(f).split("."),I=Number(C[0])==f&&C[0].slice(-2);return 0==f?"zero":1==f?"one":2==f?"two":I>=3&&I<=10?"few":I>=11&&I<=99?"many":"other"},ars:f=>{const C=String(f).split("."),I=Number(C[0])==f&&C[0].slice(-2);return 0==f?"zero":1==f?"one":2==f?"two":I>=3&&I<=10?"few":I>=11&&I<=99?"many":"other"},as:tr,asa:ot,ast:Rs,az:ot,bal:ot,be:f=>{const C=String(f).split("."),y=Number(C[0])==f,I=y&&C[0].slice(-1),x=y&&C[0].slice(-2);return 1==I&&11!=x?"one":I>=2&&I<=4&&(x<12||x>14)?"few":y&&0==I||I>=5&&I<=9||x>=11&&x<=14?"many":"other"},bem:ot,bez:ot,bg:ot,bho:Ls,bm:Ut,bn:tr,bo:Ut,br:f=>{const C=String(f).split("."),y=Number(C[0])==f,I=y&&C[0].slice(-1),x=y&&C[0].slice(-2),T=y&&C[0].slice(-6);return 1==I&&11!=x&&71!=x&&91!=x?"one":2==I&&12!=x&&72!=x&&92!=x?"two":(3==I||4==I||9==I)&&(x<10||x>19)&&(x<70||x>79)&&(x<90||x>99)?"few":0!=f&&y&&0==T?"many":"other"},brx:ot,bs:f=>{const C=String(f).split("."),y=C[0],I=C[1]||"",x=!C[1],T=y.slice(-1),k=y.slice(-2),oe=I.slice(-1),Le=I.slice(-2);return x&&1==T&&11!=k||1==oe&&11!=Le?"one":x&&T>=2&&T<=4&&(k<12||k>14)||oe>=2&&oe<=4&&(Le<12||Le>14)?"few":"other"},ca:f=>{const C=String(f).split("."),y=C[0],I=!C[1],x=y.slice(-6);return 1==f&&I?"one":0!=y&&0==x&&I?"many":"other"},ce:ot,ceb:f=>{const C=String(f).split("."),y=C[0],I=C[1]||"",x=!C[1],T=y.slice(-1),k=I.slice(-1);return x&&(1==y||2==y||3==y)||x&&4!=T&&6!=T&&9!=T||!x&&4!=k&&6!=k&&9!=k?"one":"other"},cgg:ot,chr:ot,ckb:ot,cs:f=>{const C=String(f).split("."),y=C[0],I=!C[1];return 1==f&&I?"one":y>=2&&y<=4&&I?"few":I?"other":"many"},cy:f=>0==f?"zero":1==f?"one":2==f?"two":3==f?"few":6==f?"many":"other",da:f=>{const C=String(f).split("."),y=C[0],I=Number(C[0])==f;return 1!=f&&(I||0!=y&&1!=y)?"other":"one"},de:Rs,doi:tr,dsb:f=>{const C=String(f).split("."),I=C[1]||"",x=!C[1],T=C[0].slice(-2),k=I.slice(-2);return x&&1==T||1==k?"one":x&&2==T||2==k?"two":x&&(3==T||4==T)||3==k||4==k?"few":"other"},dv:ot,dz:Ut,ee:ot,el:ot,en:Rs,eo:ot,es:f=>{const C=String(f).split("."),y=C[0],I=!C[1],x=y.slice(-6);return 1==f?"one":0!=y&&0==x&&I?"many":"other"},et:Rs,eu:ot,fa:tr,ff:f=>f>=0&&f<2?"one":"other",fi:Rs,fil:f=>{const C=String(f).split("."),y=C[0],I=C[1]||"",x=!C[1],T=y.slice(-1),k=I.slice(-1);return x&&(1==y||2==y||3==y)||x&&4!=T&&6!=T&&9!=T||!x&&4!=k&&6!=k&&9!=k?"one":"other"},fo:ot,fr:f=>{const C=String(f).split("."),y=C[0],I=!C[1],x=y.slice(-6);return f>=0&&f<2?"one":0!=y&&0==x&&I?"many":"other"},fur:ot,fy:Rs,ga:f=>{const C=String(f).split("."),y=Number(C[0])==f;return 1==f?"one":2==f?"two":y&&f>=3&&f<=6?"few":y&&f>=7&&f<=10?"many":"other"},gd:f=>{const C=String(f).split("."),y=Number(C[0])==f;return 1==f||11==f?"one":2==f||12==f?"two":y&&f>=3&&f<=10||y&&f>=13&&f<=19?"few":"other"},gl:Rs,gsw:ot,gu:tr,guw:Ls,gv:f=>{const C=String(f).split("."),y=C[0],I=!C[1],x=y.slice(-1),T=y.slice(-2);return I&&1==x?"one":I&&2==x?"two":!I||0!=T&&20!=T&&40!=T&&60!=T&&80!=T?I?"other":"many":"few"},ha:ot,haw:ot,he:f=>{const C=String(f).split("."),y=C[0],I=!C[1];return 1==y&&I||0==y&&!I?"one":2==y&&I?"two":"other"},hi:tr,hnj:Ut,hr:f=>{const C=String(f).split("."),y=C[0],I=C[1]||"",x=!C[1],T=y.slice(-1),k=y.slice(-2),oe=I.slice(-1),Le=I.slice(-2);return x&&1==T&&11!=k||1==oe&&11!=Le?"one":x&&T>=2&&T<=4&&(k<12||k>14)||oe>=2&&oe<=4&&(Le<12||Le>14)?"few":"other"},hsb:f=>{const C=String(f).split("."),I=C[1]||"",x=!C[1],T=C[0].slice(-2),k=I.slice(-2);return x&&1==T||1==k?"one":x&&2==T||2==k?"two":x&&(3==T||4==T)||3==k||4==k?"few":"other"},hu:ot,hy:f=>f>=0&&f<2?"one":"other",ia:Rs,id:Ut,ig:Ut,ii:Ut,io:Rs,is:f=>{const C=String(f).split("."),y=C[0],I=(C[1]||"").replace(/0+$/,""),x=Number(C[0])==f,T=y.slice(-1),k=y.slice(-2);return x&&1==T&&11!=k||I%10==1&&I%100!=11?"one":"other"},it:f=>{const C=String(f).split("."),y=C[0],I=!C[1],x=y.slice(-6);return 1==f&&I?"one":0!=y&&0==x&&I?"many":"other"},iu:Bi,ja:Ut,jbo:Ut,jgo:ot,jmc:ot,jv:Ut,jw:Ut,ka:ot,kab:f=>f>=0&&f<2?"one":"other",kaj:ot,kcg:ot,kde:Ut,kea:Ut,kk:ot,kkj:ot,kl:ot,km:Ut,kn:tr,ko:Ut,ks:ot,ksb:ot,ksh:f=>0==f?"zero":1==f?"one":"other",ku:ot,kw:f=>{const C=String(f).split("."),y=Number(C[0])==f,I=y&&C[0].slice(-2),x=y&&C[0].slice(-3),T=y&&C[0].slice(-5),k=y&&C[0].slice(-6);return 0==f?"zero":1==f?"one":2==I||22==I||42==I||62==I||82==I||y&&0==x&&(T>=1e3&&T<=2e4||4e4==T||6e4==T||8e4==T)||0!=f&&1e5==k?"two":3==I||23==I||43==I||63==I||83==I?"few":1==f||1!=I&&21!=I&&41!=I&&61!=I&&81!=I?"other":"many"},ky:ot,lag:f=>{const y=String(f).split(".")[0];return 0==f?"zero":0!=y&&1!=y||0==f?"other":"one"},lb:ot,lg:ot,lij:Rs,lkt:Ut,ln:Ls,lo:Ut,lt:f=>{const C=String(f).split("."),y=C[1]||"",I=Number(C[0])==f,x=I&&C[0].slice(-1),T=I&&C[0].slice(-2);return 1==x&&(T<11||T>19)?"one":x>=2&&x<=9&&(T<11||T>19)?"few":0!=y?"many":"other"},lv:f=>{const C=String(f).split("."),y=C[1]||"",I=y.length,x=Number(C[0])==f,T=x&&C[0].slice(-1),k=x&&C[0].slice(-2),oe=y.slice(-2),Le=y.slice(-1);return x&&0==T||k>=11&&k<=19||2==I&&oe>=11&&oe<=19?"zero":1==T&&11!=k||2==I&&1==Le&&11!=oe||2!=I&&1==Le?"one":"other"},mas:ot,mg:Ls,mgo:ot,mk:f=>{const C=String(f).split("."),y=C[0],I=C[1]||"",x=!C[1],T=y.slice(-1),k=y.slice(-2),oe=I.slice(-1),Le=I.slice(-2);return x&&1==T&&11!=k||1==oe&&11!=Le?"one":"other"},ml:ot,mn:ot,mo:f=>{const C=String(f).split("."),y=!C[1],x=Number(C[0])==f&&C[0].slice(-2);return 1==f&&y?"one":!y||0==f||1!=f&&x>=1&&x<=19?"few":"other"},mr:ot,ms:Ut,mt:f=>{const C=String(f).split("."),I=Number(C[0])==f&&C[0].slice(-2);return 1==f?"one":2==f?"two":0==f||I>=3&&I<=10?"few":I>=11&&I<=19?"many":"other"},my:Ut,nah:ot,naq:Bi,nb:ot,nd:ot,ne:ot,nl:Rs,nn:ot,nnh:ot,no:ot,nqo:Ut,nr:ot,nso:Ls,ny:ot,nyn:ot,om:ot,or:ot,os:ot,osa:Ut,pa:Ls,pap:ot,pcm:tr,pl:f=>{const C=String(f).split("."),y=C[0],I=!C[1],x=y.slice(-1),T=y.slice(-2);return 1==f&&I?"one":I&&x>=2&&x<=4&&(T<12||T>14)?"few":I&&1!=y&&(0==x||1==x)||I&&x>=5&&x<=9||I&&T>=12&&T<=14?"many":"other"},prg:f=>{const C=String(f).split("."),y=C[1]||"",I=y.length,x=Number(C[0])==f,T=x&&C[0].slice(-1),k=x&&C[0].slice(-2),oe=y.slice(-2),Le=y.slice(-1);return x&&0==T||k>=11&&k<=19||2==I&&oe>=11&&oe<=19?"zero":1==T&&11!=k||2==I&&1==Le&&11!=oe||2!=I&&1==Le?"one":"other"},ps:ot,pt:f=>{const C=String(f).split("."),y=C[0],I=!C[1],x=y.slice(-6);return 0==y||1==y?"one":0!=y&&0==x&&I?"many":"other"},pt_PT:f=>{const C=String(f).split("."),y=C[0],I=!C[1],x=y.slice(-6);return 1==f&&I?"one":0!=y&&0==x&&I?"many":"other"},rm:ot,ro:f=>{const C=String(f).split("."),y=!C[1],x=Number(C[0])==f&&C[0].slice(-2);return 1==f&&y?"one":!y||0==f||1!=f&&x>=1&&x<=19?"few":"other"},rof:ot,ru:f=>{const C=String(f).split("."),y=C[0],I=!C[1],x=y.slice(-1),T=y.slice(-2);return I&&1==x&&11!=T?"one":I&&x>=2&&x<=4&&(T<12||T>14)?"few":I&&0==x||I&&x>=5&&x<=9||I&&T>=11&&T<=14?"many":"other"},rwk:ot,sah:Ut,saq:ot,sat:Bi,sc:Rs,scn:Rs,sd:ot,sdh:ot,se:Bi,seh:ot,ses:Ut,sg:Ut,sh:f=>{const C=String(f).split("."),y=C[0],I=C[1]||"",x=!C[1],T=y.slice(-1),k=y.slice(-2),oe=I.slice(-1),Le=I.slice(-2);return x&&1==T&&11!=k||1==oe&&11!=Le?"one":x&&T>=2&&T<=4&&(k<12||k>14)||oe>=2&&oe<=4&&(Le<12||Le>14)?"few":"other"},shi:f=>{const C=String(f).split("."),y=Number(C[0])==f;return f>=0&&f<=1?"one":y&&f>=2&&f<=10?"few":"other"},si:f=>{const C=String(f).split(".");return 0==f||1==f||0==C[0]&&1==(C[1]||"")?"one":"other"},sk:f=>{const C=String(f).split("."),y=C[0],I=!C[1];return 1==f&&I?"one":y>=2&&y<=4&&I?"few":I?"other":"many"},sl:f=>{const C=String(f).split("."),I=!C[1],x=C[0].slice(-2);return I&&1==x?"one":I&&2==x?"two":I&&(3==x||4==x)||!I?"few":"other"},sma:Bi,smi:Bi,smj:Bi,smn:Bi,sms:Bi,sn:ot,so:ot,sq:ot,sr:f=>{const C=String(f).split("."),y=C[0],I=C[1]||"",x=!C[1],T=y.slice(-1),k=y.slice(-2),oe=I.slice(-1),Le=I.slice(-2);return x&&1==T&&11!=k||1==oe&&11!=Le?"one":x&&T>=2&&T<=4&&(k<12||k>14)||oe>=2&&oe<=4&&(Le<12||Le>14)?"few":"other"},ss:ot,ssy:ot,st:ot,su:Ut,sv:Rs,sw:Rs,syr:ot,ta:ot,te:ot,teo:ot,th:Ut,ti:Ls,tig:ot,tk:ot,tl:f=>{const C=String(f).split("."),y=C[0],I=C[1]||"",x=!C[1],T=y.slice(-1),k=I.slice(-1);return x&&(1==y||2==y||3==y)||x&&4!=T&&6!=T&&9!=T||!x&&4!=k&&6!=k&&9!=k?"one":"other"},tn:ot,to:Ut,tpi:Ut,tr:ot,ts:ot,tzm:f=>{const C=String(f).split("."),y=Number(C[0])==f;return 0==f||1==f||y&&f>=11&&f<=99?"one":"other"},ug:ot,uk:f=>{const C=String(f).split("."),y=C[0],I=!C[1],x=y.slice(-1),T=y.slice(-2);return I&&1==x&&11!=T?"one":I&&x>=2&&x<=4&&(T<12||T>14)?"few":I&&0==x||I&&x>=5&&x<=9||I&&T>=11&&T<=14?"many":"other"},und:Ut,ur:Rs,uz:ot,ve:ot,vec:f=>{const C=String(f).split("."),y=C[0],I=!C[1],x=y.slice(-6);return 1==f&&I?"one":0!=y&&0==x&&I?"many":"other"},vi:Ut,vo:ot,vun:ot,wa:Ls,wae:ot,wo:Ut,xh:ot,xog:ot,yi:Rs,yo:Ut,yue:Ut,zh:Ut,zu:tr});const as="zero",ft="one",kr="two",Kt="few",un="many",Ze="other",Ce={cardinal:[ft,Ze],ordinal:[Ze]},qo={cardinal:[ft,Ze],ordinal:[ft,Ze]},Hr={cardinal:[Ze],ordinal:[Ze]},qi={cardinal:[ft,kr,Ze],ordinal:[Ze]};var Mg=Object.freeze({__proto__:null,af:Ce,ak:Ce,am:Ce,an:Ce,ar:{cardinal:[as,ft,kr,Kt,un,Ze],ordinal:[Ze]},ars:{cardinal:[as,ft,kr,Kt,un,Ze],ordinal:[Ze]},as:{cardinal:[ft,Ze],ordinal:[ft,kr,Kt,un,Ze]},asa:Ce,ast:Ce,az:{cardinal:[ft,Ze],ordinal:[ft,Kt,un,Ze]},bal:qo,be:{cardinal:[ft,Kt,un,Ze],ordinal:[Kt,Ze]},bem:Ce,bez:Ce,bg:Ce,bho:Ce,bm:Hr,bn:{cardinal:[ft,Ze],ordinal:[ft,kr,Kt,un,Ze]},bo:Hr,br:{cardinal:[ft,kr,Kt,un,Ze],ordinal:[Ze]},brx:Ce,bs:{cardinal:[ft,Kt,Ze],ordinal:[Ze]},ca:{cardinal:[ft,un,Ze],ordinal:[ft,kr,Kt,Ze]},ce:Ce,ceb:Ce,cgg:Ce,chr:Ce,ckb:Ce,cs:{cardinal:[ft,Kt,un,Ze],ordinal:[Ze]},cy:{cardinal:[as,ft,kr,Kt,un,Ze],ordinal:[as,ft,kr,Kt,un,Ze]},da:Ce,de:Ce,doi:Ce,dsb:{cardinal:[ft,kr,Kt,Ze],ordinal:[Ze]},dv:Ce,dz:Hr,ee:Ce,el:Ce,en:{cardinal:[ft,Ze],ordinal:[ft,kr,Kt,Ze]},eo:Ce,es:{cardinal:[ft,un,Ze],ordinal:[Ze]},et:Ce,eu:Ce,fa:Ce,ff:Ce,fi:Ce,fil:qo,fo:Ce,fr:{cardinal:[ft,un,Ze],ordinal:[ft,Ze]},fur:Ce,fy:Ce,ga:{cardinal:[ft,kr,Kt,un,Ze],ordinal:[ft,Ze]},gd:{cardinal:[ft,kr,Kt,Ze],ordinal:[ft,kr,Kt,Ze]},gl:Ce,gsw:Ce,gu:{cardinal:[ft,Ze],ordinal:[ft,kr,Kt,un,Ze]},guw:Ce,gv:{cardinal:[ft,kr,Kt,un,Ze],ordinal:[Ze]},ha:Ce,haw:Ce,he:qi,hi:{cardinal:[ft,Ze],ordinal:[ft,kr,Kt,un,Ze]},hnj:Hr,hr:{cardinal:[ft,Kt,Ze],ordinal:[Ze]},hsb:{cardinal:[ft,kr,Kt,Ze],ordinal:[Ze]},hu:qo,hy:qo,ia:Ce,id:Hr,ig:Hr,ii:Hr,io:Ce,is:Ce,it:{cardinal:[ft,un,Ze],ordinal:[un,Ze]},iu:qi,ja:Hr,jbo:Hr,jgo:Ce,jmc:Ce,jv:Hr,jw:Hr,ka:{cardinal:[ft,Ze],ordinal:[ft,un,Ze]},kab:Ce,kaj:Ce,kcg:Ce,kde:Hr,kea:Hr,kk:{cardinal:[ft,Ze],ordinal:[un,Ze]},kkj:Ce,kl:Ce,km:Hr,kn:Ce,ko:Hr,ks:Ce,ksb:Ce,ksh:{cardinal:[as,ft,Ze],ordinal:[Ze]},ku:Ce,kw:{cardinal:[as,ft,kr,Kt,un,Ze],ordinal:[ft,un,Ze]},ky:Ce,lag:{cardinal:[as,ft,Ze],ordinal:[Ze]},lb:Ce,lg:Ce,lij:{cardinal:[ft,Ze],ordinal:[un,Ze]},lkt:Hr,ln:Ce,lo:{cardinal:[Ze],ordinal:[ft,Ze]},lt:{cardinal:[ft,Kt,un,Ze],ordinal:[Ze]},lv:{cardinal:[as,ft,Ze],ordinal:[Ze]},mas:Ce,mg:Ce,mgo:Ce,mk:{cardinal:[ft,Ze],ordinal:[ft,kr,un,Ze]},ml:Ce,mn:Ce,mo:{cardinal:[ft,Kt,Ze],ordinal:[ft,Ze]},mr:{cardinal:[ft,Ze],ordinal:[ft,kr,Kt,Ze]},ms:{cardinal:[Ze],ordinal:[ft,Ze]},mt:{cardinal:[ft,kr,Kt,un,Ze],ordinal:[Ze]},my:Hr,nah:Ce,naq:qi,nb:Ce,nd:Ce,ne:qo,nl:Ce,nn:Ce,nnh:Ce,no:Ce,nqo:Hr,nr:Ce,nso:Ce,ny:Ce,nyn:Ce,om:Ce,or:{cardinal:[ft,Ze],ordinal:[ft,kr,Kt,un,Ze]},os:Ce,osa:Hr,pa:Ce,pap:Ce,pcm:Ce,pl:{cardinal:[ft,Kt,un,Ze],ordinal:[Ze]},prg:{cardinal:[as,ft,Ze],ordinal:[Ze]},ps:Ce,pt:{cardinal:[ft,un,Ze],ordinal:[Ze]},pt_PT:{cardinal:[ft,un,Ze],ordinal:[Ze]},rm:Ce,ro:{cardinal:[ft,Kt,Ze],ordinal:[ft,Ze]},rof:Ce,ru:{cardinal:[ft,Kt,un,Ze],ordinal:[Ze]},rwk:Ce,sah:Hr,saq:Ce,sat:qi,sc:{cardinal:[ft,Ze],ordinal:[un,Ze]},scn:{cardinal:[ft,Ze],ordinal:[un,Ze]},sd:Ce,sdh:Ce,se:qi,seh:Ce,ses:Hr,sg:Hr,sh:{cardinal:[ft,Kt,Ze],ordinal:[Ze]},shi:{cardinal:[ft,Kt,Ze],ordinal:[Ze]},si:Ce,sk:{cardinal:[ft,Kt,un,Ze],ordinal:[Ze]},sl:{cardinal:[ft,kr,Kt,Ze],ordinal:[Ze]},sma:qi,smi:qi,smj:qi,smn:qi,sms:qi,sn:Ce,so:Ce,sq:{cardinal:[ft,Ze],ordinal:[ft,un,Ze]},sr:{cardinal:[ft,Kt,Ze],ordinal:[Ze]},ss:Ce,ssy:Ce,st:Ce,su:Hr,sv:qo,sw:Ce,syr:Ce,ta:Ce,te:Ce,teo:Ce,th:Hr,ti:Ce,tig:Ce,tk:{cardinal:[ft,Ze],ordinal:[Kt,Ze]},tl:qo,tn:Ce,to:Hr,tpi:Hr,tr:Ce,ts:Ce,tzm:Ce,ug:Ce,uk:{cardinal:[ft,Kt,un,Ze],ordinal:[Kt,Ze]},und:Hr,ur:Ce,uz:Ce,ve:Ce,vec:{cardinal:[ft,un,Ze],ordinal:[un,Ze]},vi:{cardinal:[Ze],ordinal:[ft,Ze]},vo:Ce,vun:Ce,wa:Ce,wae:Ce,wo:Hr,xh:Ce,xog:Ce,yi:Ce,yo:Hr,yue:Hr,zh:Hr,zu:Ce});const Bt=(f,C)=>C?"other":1==f?"one":"other",cl=(f,C)=>C?"other":0==f||1==f?"one":"other",kl=(f,C)=>C?"other":f>=0&&f<=1?"one":"other",fo=(f,C)=>{const y=String(f).split(".");return C||1!=f||y[1]?"other":"one"},Sn=(f,C)=>"other",ul=(f,C)=>C?"other":1==f?"one":2==f?"two":"other";var V1=Object.freeze({__proto__:null,af:Bt,ak:cl,am:kl,an:Bt,ar:(f,C)=>{const y=String(f).split("."),x=Number(y[0])==f&&y[0].slice(-2);return C?"other":0==f?"zero":1==f?"one":2==f?"two":x>=3&&x<=10?"few":x>=11&&x<=99?"many":"other"},ars:(f,C)=>{const y=String(f).split("."),x=Number(y[0])==f&&y[0].slice(-2);return C?"other":0==f?"zero":1==f?"one":2==f?"two":x>=3&&x<=10?"few":x>=11&&x<=99?"many":"other"},as:(f,C)=>C?1==f||5==f||7==f||8==f||9==f||10==f?"one":2==f||3==f?"two":4==f?"few":6==f?"many":"other":f>=0&&f<=1?"one":"other",asa:Bt,ast:fo,az:(f,C)=>{const I=String(f).split(".")[0],x=I.slice(-1),T=I.slice(-2),k=I.slice(-3);return C?1==x||2==x||5==x||7==x||8==x||20==T||50==T||70==T||80==T?"one":3==x||4==x||100==k||200==k||300==k||400==k||500==k||600==k||700==k||800==k||900==k?"few":0==I||6==x||40==T||60==T||90==T?"many":"other":1==f?"one":"other"},bal:(f,C)=>1==f?"one":"other",be:(f,C)=>{const y=String(f).split("."),I=Number(y[0])==f,x=I&&y[0].slice(-1),T=I&&y[0].slice(-2);return C?2!=x&&3!=x||12==T||13==T?"other":"few":1==x&&11!=T?"one":x>=2&&x<=4&&(T<12||T>14)?"few":I&&0==x||x>=5&&x<=9||T>=11&&T<=14?"many":"other"},bem:Bt,bez:Bt,bg:Bt,bho:cl,bm:Sn,bn:(f,C)=>C?1==f||5==f||7==f||8==f||9==f||10==f?"one":2==f||3==f?"two":4==f?"few":6==f?"many":"other":f>=0&&f<=1?"one":"other",bo:Sn,br:(f,C)=>{const y=String(f).split("."),I=Number(y[0])==f,x=I&&y[0].slice(-1),T=I&&y[0].slice(-2),k=I&&y[0].slice(-6);return C?"other":1==x&&11!=T&&71!=T&&91!=T?"one":2==x&&12!=T&&72!=T&&92!=T?"two":(3==x||4==x||9==x)&&(T<10||T>19)&&(T<70||T>79)&&(T<90||T>99)?"few":0!=f&&I&&0==k?"many":"other"},brx:Bt,bs:(f,C)=>{const y=String(f).split("."),I=y[0],x=y[1]||"",T=!y[1],k=I.slice(-1),oe=I.slice(-2),Le=x.slice(-1),wt=x.slice(-2);return C?"other":T&&1==k&&11!=oe||1==Le&&11!=wt?"one":T&&k>=2&&k<=4&&(oe<12||oe>14)||Le>=2&&Le<=4&&(wt<12||wt>14)?"few":"other"},ca:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1],T=I.slice(-6);return C?1==f||3==f?"one":2==f?"two":4==f?"few":"other":1==f&&x?"one":0!=I&&0==T&&x?"many":"other"},ce:Bt,ceb:(f,C)=>{const y=String(f).split("."),I=y[0],x=y[1]||"",T=!y[1],k=I.slice(-1),oe=x.slice(-1);return C?"other":T&&(1==I||2==I||3==I)||T&&4!=k&&6!=k&&9!=k||!T&&4!=oe&&6!=oe&&9!=oe?"one":"other"},cgg:Bt,chr:Bt,ckb:Bt,cs:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1];return C?"other":1==f&&x?"one":I>=2&&I<=4&&x?"few":x?"other":"many"},cy:(f,C)=>C?0==f||7==f||8==f||9==f?"zero":1==f?"one":2==f?"two":3==f||4==f?"few":5==f||6==f?"many":"other":0==f?"zero":1==f?"one":2==f?"two":3==f?"few":6==f?"many":"other",da:(f,C)=>{const y=String(f).split("."),I=y[0],x=Number(y[0])==f;return C||1!=f&&(x||0!=I&&1!=I)?"other":"one"},de:fo,doi:kl,dsb:(f,C)=>{const y=String(f).split("."),x=y[1]||"",T=!y[1],k=y[0].slice(-2),oe=x.slice(-2);return C?"other":T&&1==k||1==oe?"one":T&&2==k||2==oe?"two":T&&(3==k||4==k)||3==oe||4==oe?"few":"other"},dv:Bt,dz:Sn,ee:Bt,el:Bt,en:(f,C)=>{const y=String(f).split("."),I=!y[1],x=Number(y[0])==f,T=x&&y[0].slice(-1),k=x&&y[0].slice(-2);return C?1==T&&11!=k?"one":2==T&&12!=k?"two":3==T&&13!=k?"few":"other":1==f&&I?"one":"other"},eo:Bt,es:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1],T=I.slice(-6);return C?"other":1==f?"one":0!=I&&0==T&&x?"many":"other"},et:fo,eu:Bt,fa:kl,ff:(f,C)=>C?"other":f>=0&&f<2?"one":"other",fi:fo,fil:(f,C)=>{const y=String(f).split("."),I=y[0],x=y[1]||"",T=!y[1],k=I.slice(-1),oe=x.slice(-1);return C?1==f?"one":"other":T&&(1==I||2==I||3==I)||T&&4!=k&&6!=k&&9!=k||!T&&4!=oe&&6!=oe&&9!=oe?"one":"other"},fo:Bt,fr:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1],T=I.slice(-6);return C?1==f?"one":"other":f>=0&&f<2?"one":0!=I&&0==T&&x?"many":"other"},fur:Bt,fy:fo,ga:(f,C)=>{const y=String(f).split("."),I=Number(y[0])==f;return C?1==f?"one":"other":1==f?"one":2==f?"two":I&&f>=3&&f<=6?"few":I&&f>=7&&f<=10?"many":"other"},gd:(f,C)=>{const y=String(f).split("."),I=Number(y[0])==f;return C?1==f||11==f?"one":2==f||12==f?"two":3==f||13==f?"few":"other":1==f||11==f?"one":2==f||12==f?"two":I&&f>=3&&f<=10||I&&f>=13&&f<=19?"few":"other"},gl:fo,gsw:Bt,gu:(f,C)=>C?1==f?"one":2==f||3==f?"two":4==f?"few":6==f?"many":"other":f>=0&&f<=1?"one":"other",guw:cl,gv:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1],T=I.slice(-1),k=I.slice(-2);return C?"other":x&&1==T?"one":x&&2==T?"two":!x||0!=k&&20!=k&&40!=k&&60!=k&&80!=k?x?"other":"many":"few"},ha:Bt,haw:Bt,he:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1];return C?"other":1==I&&x||0==I&&!x?"one":2==I&&x?"two":"other"},hi:(f,C)=>C?1==f?"one":2==f||3==f?"two":4==f?"few":6==f?"many":"other":f>=0&&f<=1?"one":"other",hnj:Sn,hr:(f,C)=>{const y=String(f).split("."),I=y[0],x=y[1]||"",T=!y[1],k=I.slice(-1),oe=I.slice(-2),Le=x.slice(-1),wt=x.slice(-2);return C?"other":T&&1==k&&11!=oe||1==Le&&11!=wt?"one":T&&k>=2&&k<=4&&(oe<12||oe>14)||Le>=2&&Le<=4&&(wt<12||wt>14)?"few":"other"},hsb:(f,C)=>{const y=String(f).split("."),x=y[1]||"",T=!y[1],k=y[0].slice(-2),oe=x.slice(-2);return C?"other":T&&1==k||1==oe?"one":T&&2==k||2==oe?"two":T&&(3==k||4==k)||3==oe||4==oe?"few":"other"},hu:(f,C)=>C?1==f||5==f?"one":"other":1==f?"one":"other",hy:(f,C)=>C?1==f?"one":"other":f>=0&&f<2?"one":"other",ia:fo,id:Sn,ig:Sn,ii:Sn,io:fo,is:(f,C)=>{const y=String(f).split("."),I=y[0],x=(y[1]||"").replace(/0+$/,""),T=Number(y[0])==f,k=I.slice(-1),oe=I.slice(-2);return C?"other":T&&1==k&&11!=oe||x%10==1&&x%100!=11?"one":"other"},it:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1],T=I.slice(-6);return C?11==f||8==f||80==f||800==f?"many":"other":1==f&&x?"one":0!=I&&0==T&&x?"many":"other"},iu:ul,ja:Sn,jbo:Sn,jgo:Bt,jmc:Bt,jv:Sn,jw:Sn,ka:(f,C)=>{const I=String(f).split(".")[0],x=I.slice(-2);return C?1==I?"one":0==I||x>=2&&x<=20||40==x||60==x||80==x?"many":"other":1==f?"one":"other"},kab:(f,C)=>C?"other":f>=0&&f<2?"one":"other",kaj:Bt,kcg:Bt,kde:Sn,kea:Sn,kk:(f,C)=>{const y=String(f).split("."),I=Number(y[0])==f,x=I&&y[0].slice(-1);return C?6==x||9==x||I&&0==x&&0!=f?"many":"other":1==f?"one":"other"},kkj:Bt,kl:Bt,km:Sn,kn:kl,ko:Sn,ks:Bt,ksb:Bt,ksh:(f,C)=>C?"other":0==f?"zero":1==f?"one":"other",ku:Bt,kw:(f,C)=>{const y=String(f).split("."),I=Number(y[0])==f,x=I&&y[0].slice(-2),T=I&&y[0].slice(-3),k=I&&y[0].slice(-5),oe=I&&y[0].slice(-6);return C?I&&f>=1&&f<=4||x>=1&&x<=4||x>=21&&x<=24||x>=41&&x<=44||x>=61&&x<=64||x>=81&&x<=84?"one":5==f||5==x?"many":"other":0==f?"zero":1==f?"one":2==x||22==x||42==x||62==x||82==x||I&&0==T&&(k>=1e3&&k<=2e4||4e4==k||6e4==k||8e4==k)||0!=f&&1e5==oe?"two":3==x||23==x||43==x||63==x||83==x?"few":1==f||1!=x&&21!=x&&41!=x&&61!=x&&81!=x?"other":"many"},ky:Bt,lag:(f,C)=>{const I=String(f).split(".")[0];return C?"other":0==f?"zero":0!=I&&1!=I||0==f?"other":"one"},lb:Bt,lg:Bt,lij:(f,C)=>{const y=String(f).split("."),I=!y[1],x=Number(y[0])==f;return C?11==f||8==f||x&&f>=80&&f<=89||x&&f>=800&&f<=899?"many":"other":1==f&&I?"one":"other"},lkt:Sn,ln:cl,lo:(f,C)=>C&&1==f?"one":"other",lt:(f,C)=>{const y=String(f).split("."),I=y[1]||"",x=Number(y[0])==f,T=x&&y[0].slice(-1),k=x&&y[0].slice(-2);return C?"other":1==T&&(k<11||k>19)?"one":T>=2&&T<=9&&(k<11||k>19)?"few":0!=I?"many":"other"},lv:(f,C)=>{const y=String(f).split("."),I=y[1]||"",x=I.length,T=Number(y[0])==f,k=T&&y[0].slice(-1),oe=T&&y[0].slice(-2),Le=I.slice(-2),wt=I.slice(-1);return C?"other":T&&0==k||oe>=11&&oe<=19||2==x&&Le>=11&&Le<=19?"zero":1==k&&11!=oe||2==x&&1==wt&&11!=Le||2!=x&&1==wt?"one":"other"},mas:Bt,mg:cl,mgo:Bt,mk:(f,C)=>{const y=String(f).split("."),I=y[0],x=y[1]||"",T=!y[1],k=I.slice(-1),oe=I.slice(-2),Le=x.slice(-1),wt=x.slice(-2);return C?1==k&&11!=oe?"one":2==k&&12!=oe?"two":7!=k&&8!=k||17==oe||18==oe?"other":"many":T&&1==k&&11!=oe||1==Le&&11!=wt?"one":"other"},ml:Bt,mn:Bt,mo:(f,C)=>{const y=String(f).split("."),I=!y[1],T=Number(y[0])==f&&y[0].slice(-2);return C?1==f?"one":"other":1==f&&I?"one":!I||0==f||1!=f&&T>=1&&T<=19?"few":"other"},mr:(f,C)=>C?1==f?"one":2==f||3==f?"two":4==f?"few":"other":1==f?"one":"other",ms:(f,C)=>C&&1==f?"one":"other",mt:(f,C)=>{const y=String(f).split("."),x=Number(y[0])==f&&y[0].slice(-2);return C?"other":1==f?"one":2==f?"two":0==f||x>=3&&x<=10?"few":x>=11&&x<=19?"many":"other"},my:Sn,nah:Bt,naq:ul,nb:Bt,nd:Bt,ne:(f,C)=>{const y=String(f).split("."),I=Number(y[0])==f;return C?I&&f>=1&&f<=4?"one":"other":1==f?"one":"other"},nl:fo,nn:Bt,nnh:Bt,no:Bt,nqo:Sn,nr:Bt,nso:cl,ny:Bt,nyn:Bt,om:Bt,or:(f,C)=>{const y=String(f).split("."),I=Number(y[0])==f;return C?1==f||5==f||I&&f>=7&&f<=9?"one":2==f||3==f?"two":4==f?"few":6==f?"many":"other":1==f?"one":"other"},os:Bt,osa:Sn,pa:cl,pap:Bt,pcm:kl,pl:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1],T=I.slice(-1),k=I.slice(-2);return C?"other":1==f&&x?"one":x&&T>=2&&T<=4&&(k<12||k>14)?"few":x&&1!=I&&(0==T||1==T)||x&&T>=5&&T<=9||x&&k>=12&&k<=14?"many":"other"},prg:(f,C)=>{const y=String(f).split("."),I=y[1]||"",x=I.length,T=Number(y[0])==f,k=T&&y[0].slice(-1),oe=T&&y[0].slice(-2),Le=I.slice(-2),wt=I.slice(-1);return C?"other":T&&0==k||oe>=11&&oe<=19||2==x&&Le>=11&&Le<=19?"zero":1==k&&11!=oe||2==x&&1==wt&&11!=Le||2!=x&&1==wt?"one":"other"},ps:Bt,pt:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1],T=I.slice(-6);return C?"other":0==I||1==I?"one":0!=I&&0==T&&x?"many":"other"},pt_PT:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1],T=I.slice(-6);return C?"other":1==f&&x?"one":0!=I&&0==T&&x?"many":"other"},rm:Bt,ro:(f,C)=>{const y=String(f).split("."),I=!y[1],T=Number(y[0])==f&&y[0].slice(-2);return C?1==f?"one":"other":1==f&&I?"one":!I||0==f||1!=f&&T>=1&&T<=19?"few":"other"},rof:Bt,ru:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1],T=I.slice(-1),k=I.slice(-2);return C?"other":x&&1==T&&11!=k?"one":x&&T>=2&&T<=4&&(k<12||k>14)?"few":x&&0==T||x&&T>=5&&T<=9||x&&k>=11&&k<=14?"many":"other"},rwk:Bt,sah:Sn,saq:Bt,sat:ul,sc:(f,C)=>{const y=String(f).split(".");return C?11==f||8==f||80==f||800==f?"many":"other":1!=f||y[1]?"other":"one"},scn:(f,C)=>{const y=String(f).split(".");return C?11==f||8==f||80==f||800==f?"many":"other":1!=f||y[1]?"other":"one"},sd:Bt,sdh:Bt,se:ul,seh:Bt,ses:Sn,sg:Sn,sh:(f,C)=>{const y=String(f).split("."),I=y[0],x=y[1]||"",T=!y[1],k=I.slice(-1),oe=I.slice(-2),Le=x.slice(-1),wt=x.slice(-2);return C?"other":T&&1==k&&11!=oe||1==Le&&11!=wt?"one":T&&k>=2&&k<=4&&(oe<12||oe>14)||Le>=2&&Le<=4&&(wt<12||wt>14)?"few":"other"},shi:(f,C)=>{const y=String(f).split("."),I=Number(y[0])==f;return C?"other":f>=0&&f<=1?"one":I&&f>=2&&f<=10?"few":"other"},si:(f,C)=>{const y=String(f).split(".");return C?"other":0==f||1==f||0==y[0]&&1==(y[1]||"")?"one":"other"},sk:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1];return C?"other":1==f&&x?"one":I>=2&&I<=4&&x?"few":x?"other":"many"},sl:(f,C)=>{const y=String(f).split("."),x=!y[1],T=y[0].slice(-2);return C?"other":x&&1==T?"one":x&&2==T?"two":x&&(3==T||4==T)||!x?"few":"other"},sma:ul,smi:ul,smj:ul,smn:ul,sms:ul,sn:Bt,so:Bt,sq:(f,C)=>{const y=String(f).split("."),I=Number(y[0])==f,x=I&&y[0].slice(-1),T=I&&y[0].slice(-2);return C?1==f?"one":4==x&&14!=T?"many":"other":1==f?"one":"other"},sr:(f,C)=>{const y=String(f).split("."),I=y[0],x=y[1]||"",T=!y[1],k=I.slice(-1),oe=I.slice(-2),Le=x.slice(-1),wt=x.slice(-2);return C?"other":T&&1==k&&11!=oe||1==Le&&11!=wt?"one":T&&k>=2&&k<=4&&(oe<12||oe>14)||Le>=2&&Le<=4&&(wt<12||wt>14)?"few":"other"},ss:Bt,ssy:Bt,st:Bt,su:Sn,sv:(f,C)=>{const y=String(f).split("."),I=!y[1],x=Number(y[0])==f,T=x&&y[0].slice(-1),k=x&&y[0].slice(-2);return C?1!=T&&2!=T||11==k||12==k?"other":"one":1==f&&I?"one":"other"},sw:fo,syr:Bt,ta:Bt,te:Bt,teo:Bt,th:Sn,ti:cl,tig:Bt,tk:(f,C)=>{const y=String(f).split("."),x=Number(y[0])==f&&y[0].slice(-1);return C?6==x||9==x||10==f?"few":"other":1==f?"one":"other"},tl:(f,C)=>{const y=String(f).split("."),I=y[0],x=y[1]||"",T=!y[1],k=I.slice(-1),oe=x.slice(-1);return C?1==f?"one":"other":T&&(1==I||2==I||3==I)||T&&4!=k&&6!=k&&9!=k||!T&&4!=oe&&6!=oe&&9!=oe?"one":"other"},tn:Bt,to:Sn,tpi:Sn,tr:Bt,ts:Bt,tzm:(f,C)=>{const y=String(f).split("."),I=Number(y[0])==f;return C?"other":0==f||1==f||I&&f>=11&&f<=99?"one":"other"},ug:Bt,uk:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1],T=Number(y[0])==f,k=T&&y[0].slice(-1),oe=T&&y[0].slice(-2),Le=I.slice(-1),wt=I.slice(-2);return C?3==k&&13!=oe?"few":"other":x&&1==Le&&11!=wt?"one":x&&Le>=2&&Le<=4&&(wt<12||wt>14)?"few":x&&0==Le||x&&Le>=5&&Le<=9||x&&wt>=11&&wt<=14?"many":"other"},und:Sn,ur:fo,uz:Bt,ve:Bt,vec:(f,C)=>{const y=String(f).split("."),I=y[0],x=!y[1],T=I.slice(-6);return C?11==f||8==f||80==f||800==f?"many":"other":1==f&&x?"one":0!=I&&0==T&&x?"many":"other"},vi:(f,C)=>C&&1==f?"one":"other",vo:Bt,vun:Bt,wa:cl,wae:Bt,wo:Sn,xh:Bt,xog:Bt,yi:fo,yo:Sn,yue:Sn,zh:Sn,zu:kl});function Mc(f){if("string"!=typeof f||f.length<2)throw new RangeError("Invalid language tag: ".concat(f));if(f.startsWith("pt-PT"))return"pt-PT";var C=f.match(/.+?(?=[-_])/);return C?C[0]:f}function iu(f){if("function"==typeof f){var C=Mc(f.name);return{isDefault:!1,id:ie(C),lc:C,locale:f.name,getPlural:f,cardinals:f.cardinals||[],ordinals:f.ordinals||[]}}var y=Mc(f),I=ie(y);return function zc(f){return f in V1}(I)?{isDefault:!0,id:I,lc:y,locale:f,getCardinal:Ko[I],getPlural:V1[I],cardinals:Mg[I].cardinal,ordinals:Mg[I].ordinal}:null}function vv(f){return ie(Mc(f))in V1}var wv=function(){function f(C,y){if(this.plurals=[],this.options=Object.assign({biDiSupport:!1,currency:"USD",customFormatters:{},localeCodeFromKey:null,requireAllArguments:!1,returnType:"string",strict:y&&y.strictNumberSign||!1,strictPluralKeys:!0},y),"*"===C?this.plurals=function yd(f){var C=Object.keys(V1).filter(function(y){return y!==f});return C.unshift(f),C.map(iu)}(f.defaultLocale):Array.isArray(C)?this.plurals=C.map(iu).filter(Boolean):C&&(I=iu(C))&&(this.plurals=[I]),0===this.plurals.length){var I=iu(f.defaultLocale);this.plurals=[I]}}return f.escape=function(C,y){var I=y?/[#{}]/g:/[{}]/g;return String(C).replace(I,"'$&'")},f.supportedLocalesOf=function(C){return(Array.isArray(C)?C:[C]).filter(vv)},f.prototype.resolvedOptions=function(){return at(at({},this.options),{locale:this.plurals[0].locale,plurals:this.plurals})},f.prototype.compile=function(C){var y,I,x=new Hi(this.options),T="return "+x.compile(C,this.plurals[0]),k=[],oe=[];try{for(var Le=Ve(Object.entries(x.runtime)),wt=Le.next();!wt.done;wt=Le.next()){var tn=ce(wt.value,2),kn=tn[1];k.push(tn[0]),oe.push(kn)}}catch(Gr){y={error:Gr}}finally{try{wt&&!wt.done&&(I=Le.return)&&I.call(Le)}finally{if(y)throw y.error}}return(new(Function.bind.apply(Function,Ue(Ue([void 0],ce(k),!1),[T],!1)))).apply(void 0,Ue([],ce(oe),!1))},f.defaultLocale="en",f}();return wv}()},7059:Fn=>{"use strict";var F,at=Object.defineProperty,Ve=Object.getOwnPropertyDescriptor,ce=Object.getOwnPropertyNames,Ue=Object.prototype.hasOwnProperty,_={};((F,j)=>{for(var Te in j)at(F,Te,{get:j[Te],enumerable:!0})})(_,{XmlCdata:()=>Ct,XmlComment:()=>mt,XmlDeclaration:()=>Nt,XmlDocument:()=>$e,XmlDocumentType:()=>Ye,XmlElement:()=>Re,XmlError:()=>Wt,XmlNode:()=>Ee,XmlProcessingInstruction:()=>ne,XmlText:()=>et,parseXml:()=>Dt}),Fn.exports=(F=_,((F,j,Te,qe)=>{if(j&&"object"==typeof j||"function"==typeof j)for(let st of ce(j))!Ue.call(F,st)&&undefined!==st&&at(F,st,{get:()=>j[st],enumerable:!(qe=Ve(j,st))||qe.enumerable});return F})(at({},"__esModule",{value:!0}),F));var p=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Oe=class{constructor(F){if(this.k=this.u(F,!0),this.d=0,this.length=F.length,this.l=this.k!==this.length,this.h=F,this.l){let j=[];for(let Te=0,qe=0;qe<this.k;++qe)j[qe]=Te,Te+=F.codePointAt(Te)>65535?2:1;this.A=j}}get B(){return this.d>=this.k}u(F,j=this.l){return j?F.replace(p,"_").length:F.length}p(F=1){this.d=Math.min(this.k,this.d+F)}f(F=this.d){var j;return this.l?null!=(j=this.A[F])?j:1/0:F}G(F=1){let j=this.m(F);return this.p(F),j}v(F){let j=this.f(),Te=this.h.slice(j,j+F);return this.p(this.u(Te)),Te}w(F){let{length:j,l:Te,h:qe}=this,st=this.f(),ln=st;if(Te)for(;ln<j;){let Xt=qe[ln],pn=Xt>="\ud800"&&Xt<="\udbff";if(pn&&(Xt+=qe[ln+1]),!F(Xt))break;ln+=pn?2:1}else for(;ln<j&&F(qe[ln]);)++ln;return this.v(ln-st)}b(F){let{length:j}=F,Te=this.f();return F===this.h.slice(Te,Te+j)?(this.p(1===j?1:this.u(F)),F):""}x(F){let j=this.h.slice(this.f()).search(F);return j>0?this.v(j):""}s(F){let j=this.f(),Te=this.h.indexOf(F,j);return Te>0?this.v(Te-j):""}m(F=1){let{d:j,h:Te}=this;return this.l?Te.slice(this.f(j),this.f(j+F)):Te.slice(j,j+F)}n(F=0){this.d=F>=0?Math.min(this.k,F):Math.max(0,this.d+F)}},Xe=/["&<]/,ue=/['&<]/,ke=/\r\n|[\n\r\t]/g,se=/<|&|]]>/,q=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));function ae(F){let j=F.codePointAt(0);return j>=97&&j<=122||j>=65&&j<=90||j>=48&&j<=57||45===j||46===j||183===j||j>=768&&j<=879||8255===j||8256===j||be(F,j)}function be(F,j=F.codePointAt(0)){return j>=97&&j<=122||j>=65&&j<=90||58===j||95===j||j>=192&&j<=214||j>=216&&j<=246||j>=248&&j<=767||j>=880&&j<=893||j>=895&&j<=8191||8204===j||8205===j||j>=8304&&j<=8591||j>=11264&&j<=12271||j>=12289&&j<=55295||j>=63744&&j<=64975||j>=65008&&j<=65533||j>=65536&&j<=983039}function St(F){return"#"===F||ae(F)}function ee(F){let j=F.codePointAt(0);return 32===j||9===j||10===j||13===j}function ve(F){return F>=32&&F<=55295||10===F||9===F||13===F||F>=57344&&F<=65533||F>=65536&&F<=1114111}var xe=(()=>{let F=class eR{constructor(){this.parent=null,this.start=-1,this.end=-1}get document(){var Te,qe;return null!=(qe=null==(Te=this.parent)?void 0:Te.document)?qe:null}get isRootNode(){return null!==this.parent&&this.parent===this.document&&this.type===eR.TYPE_ELEMENT}get preserveWhitespace(){var Te;return!(null==(Te=this.parent)||!Te.preserveWhitespace)}get type(){return""}toJSON(){let Te={type:this.type};return this.isRootNode&&(Te.isRootNode=!0),this.preserveWhitespace&&(Te.preserveWhitespace=!0),-1!==this.start&&(Te.start=this.start,Te.end=this.end),Te}};return F.TYPE_CDATA="cdata",F.TYPE_COMMENT="comment",F.TYPE_DOCUMENT="document",F.TYPE_DOCUMENT_TYPE="doctype",F.TYPE_ELEMENT="element",F.TYPE_PROCESSING_INSTRUCTION="pi",F.TYPE_TEXT="text",F.TYPE_XML_DECLARATION="xmldecl",F})(),Ee=xe,et=class extends Ee{constructor(F=""){super(),this.text=F}get type(){return Ee.TYPE_TEXT}toJSON(){return Object.assign(Ee.prototype.toJSON.call(this),{text:this.text})}},Ct=class extends et{get type(){return Ee.TYPE_CDATA}},mt=class extends Ee{constructor(F=""){super(),this.content=F}get type(){return Ee.TYPE_COMMENT}toJSON(){return Object.assign(Ee.prototype.toJSON.call(this),{content:this.content})}},Nt=class extends Ee{constructor(F,j,Te){super(),this.version=F,this.encoding=j??null,this.standalone=Te??null}get type(){return Ee.TYPE_XML_DECLARATION}toJSON(){let F=Ee.prototype.toJSON.call(this);F.version=this.version;for(let j of["encoding","standalone"])null!==this[j]&&(F[j]=this[j]);return F}},Re=class tR extends Ee{constructor(j,Te=Object.create(null),qe=[]){super(),this.name=j,this.attributes=Te,this.children=qe}get isEmpty(){return 0===this.children.length}get preserveWhitespace(){let j=this;for(;j instanceof tR;){if("xml:space"in j.attributes)return"preserve"===j.attributes["xml:space"];j=j.parent}return!1}get text(){return this.children.map(j=>"text"in j?j.text:"").join("")}get type(){return Ee.TYPE_ELEMENT}toJSON(){return Object.assign(Ee.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(j=>j.toJSON())})}},$e=class extends Ee{constructor(F=[]){super(),this.children=F}get document(){return this}get root(){for(let F of this.children)if(F instanceof Re)return F;return null}get text(){return this.children.map(F=>"text"in F?F.text:"").join("")}get type(){return Ee.TYPE_DOCUMENT}toJSON(){return Object.assign(Ee.prototype.toJSON.call(this),{children:this.children.map(F=>F.toJSON())})}},Ye=class extends Ee{constructor(F,j,Te,qe){super(),this.name=F,this.publicId=j??null,this.systemId=Te??null,this.internalSubset=qe??null}get type(){return Ee.TYPE_DOCUMENT_TYPE}toJSON(){let F=Ee.prototype.toJSON.call(this);F.name=this.name;for(let j of["publicId","systemId","internalSubset"])null!==this[j]&&(F[j]=this[j]);return F}},Wt=class extends Error{constructor(F,j,Te){let qe=1,st="",ln=1;for(let jr=0;jr<j;++jr){let Ts=Te[jr];"\n"===Ts?(qe=1,st="",ln+=1):(qe+=1,st+=Ts)}let Xt=Te.indexOf("\n",j);st+=-1===Xt?Te.slice(j):Te.slice(j,Xt);let pn=0;st.length>50&&(qe<40?st=st.slice(0,50):(pn=qe-20,st=st.slice(pn,qe+30))),super(`${F} (line ${ln}, column ${qe})\n  ${st}\n`+" ".repeat(qe-pn+1)+"^\n"),this.column=qe,this.excerpt=st,this.line=ln,this.name="XmlError",this.pos=j}},ne=class extends Ee{constructor(F,j=""){super(),this.name=F,this.content=j}get type(){return Ee.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(Ee.prototype.toJSON.call(this),{name:this.name,content:this.content})}},It=class{constructor(F,j={}){let Te=this.document=new $e;this.j=Te,this.g=j,this.c=new Oe(F),this.g.includeOffsets&&(Te.start=0,Te.end=F.length),this.parse()}i(F,j){return F.parent=this.j,this.g.includeOffsets&&(F.start=this.c.f(j),F.end=this.c.f()),this.j.children.push(F),!0}y(F,j){let{children:Te}=this.j,{length:qe}=Te;if(F=kt(F),qe>0){let st=Te[qe-1];if(st?.type===Ee.TYPE_TEXT){let ln=st;return ln.text+=F,this.g.includeOffsets&&(ln.end=this.c.f()),!0}}return this.i(new et(F),j)}H(){let F=Object.create(null);for(;this.e();){let j=this.q();if(!j)break;let Te=this.t()&&this.I();if(!1===Te)throw this.a("Attribute value expected");if(j in F)throw this.a(`Duplicate attribute: ${j}`);if("xml:space"===j&&"default"!==Te&&"preserve"!==Te)throw this.a('Value of the `xml:space` attribute must be "default" or "preserve"');F[j]=Te}if(this.g.sortAttributes){let j=Object.keys(F).sort(),Te=Object.create(null);for(let qe=0;qe<j.length;++qe){let st=j[qe];Te[st]=F[st]}F=Te}return F}I(){let{c:F}=this,j=F.m();if('"'!==j&&"'"!==j)return!1;F.p();let Te,qe=!1,st="",ln='"'===j?Xe:ue;e:for(;!F.B;)switch(Te=F.x(ln),Te&&(this.o(Te),st+=Te.replace(ke," ")),F.m()){case j:qe=!0;break e;case"&":st+=this.C();continue;case"<":throw this.a("Unescaped `<` is not allowed in an attribute value");default:break e}if(!qe)throw this.a("Unclosed attribute");return F.p(),st}J(){let{c:F}=this,j=F.d;if(!F.b("<![CDATA["))return!1;let Te=F.s("]]>");if(this.o(Te),!F.b("]]>"))throw this.a("Unclosed CDATA section");return this.g.preserveCdata?this.i(new Ct(kt(Te)),j):this.y(Te,j)}K(){let{c:F}=this,j=F.d,Te=F.x(se);if(!Te)return!1;if(this.o(Te),"]]>"===F.m(3))throw this.a("Element content may not contain the CDATA section close delimiter `]]>`");return this.y(Te,j)}D(){let{c:F}=this,j=F.d;if(!F.b("\x3c!--"))return!1;let Te=F.s("--");if(this.o(Te),!F.b("--\x3e"))throw"--"===F.m(2)?this.a("The string `--` isn't allowed inside a comment"):this.a("Unclosed comment");return!this.g.preserveComments||this.i(new mt(kt(Te)),j)}L(){let F=this.c.d,j=this.C();return!!j&&this.y(j,F)}M(){let{c:F}=this,j=F.d;if(!F.b("<!DOCTYPE"))return!1;let qe,st,ln,Te=this.e()&&this.q();if(!Te)throw this.a("Expected a name");if(this.e()){if(F.b("PUBLIC")){if(qe=this.e()&&this.N(),!1===qe)throw this.a("Expected a public identifier");this.e()}if(void 0!==qe||F.b("SYSTEM")){if(this.e(),st=this.r(),!1===st)throw this.a("Expected a system identifier");this.e()}}if(F.b("[")){if(ln=F.x(/\][\x20\t\r\n]*>/),!F.b("]"))throw this.a("Unclosed internal subset");this.e()}if(!F.b(">"))throw this.a("Unclosed doctype declaration");return!this.g.preserveDocumentType||this.i(new Ye(Te,qe,st,ln),j)}E(){let{c:F}=this,j=F.d;if(!F.b("<"))return!1;let Te=this.q();if(!Te)return F.n(j),!1;let qe=this.H(),st=!!F.b("/>"),ln=new Re(Te,qe);if(ln.parent=this.j,!st){if(!F.b(">"))throw this.a(`Unclosed start tag for element \`${Te}\``);this.j=ln;do{this.K()}while(this.E()||this.L()||this.J()||this.F()||this.D());let pn,Xt=F.d;if(!F.b("</")||!(pn=this.q())||pn!==Te)throw F.n(Xt),this.a(`Missing end tag for element ${Te}`);if(this.e(),!F.b(">"))throw this.a(`Unclosed end tag for element ${Te}`);this.j=ln.parent}return this.i(ln,j)}t(){return this.e(),!!this.c.b("=")&&(this.e(),!0)}z(){return this.D()||this.F()||this.e()}q(){return be(this.c.m())?this.c.w(ae):""}F(){let{c:F}=this,j=F.d;if(!F.b("<?"))return!1;let Te=this.q();if(!Te)throw this.a("Invalid processing instruction");if("xml"===Te.toLowerCase())throw F.n(j),this.a("XML declaration isn't allowed here");if(!this.e()){if(F.b("?>"))return this.i(new ne(Te),j);throw this.a("Whitespace is required after a processing instruction name")}let qe=F.s("?>");if(this.o(qe),!F.b("?>"))throw this.a("Unterminated processing instruction");return this.i(new ne(Te,kt(qe)),j)}O(){let{c:F}=this,j=F.d;for(this.P();this.z(););if(this.M())for(;this.z(););return j<F.d}N(){let F=this.c.d,j=this.r();if(!1!==j&&!/^[-\x20\r\na-zA-Z0-9'()+,./:=?;!*#@$_%]*$/.test(j))throw this.c.n(F),this.a("Invalid character in public identifier");return j}C(){let{c:F}=this;if(!F.b("&"))return!1;let Te,j=F.w(St);if(";"!==F.G())throw this.a("Unterminated reference (a reference must end with `;`)");if("#"===j[0]){let qe="x"===j[1]?parseInt(j.slice(2),16):parseInt(j.slice(1),10);if(isNaN(qe))throw this.a("Invalid character reference");if(!ve(qe))throw this.a("Character reference resolves to an invalid character");Te=String.fromCodePoint(qe)}else if(Te=q[j],void 0===Te){let{ignoreUndefinedEntities:qe,resolveUndefinedEntity:st}=this.g,ln=`&${j};`;if(st){let Xt=st(ln);if(null!=Xt){let pn=typeof Xt;if("string"!==pn)throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${pn}`);return Xt}}if(qe)return ln;throw F.n(-ln.length),this.a(`Named entity isn't defined: ${ln}`)}return Te}r(){let{c:F}=this,j=F.b('"')||F.b("'");if(!j)return!1;let Te=F.s(j);if(this.o(Te),!F.b(j))throw this.a("Missing end quote");return Te}e(){return!!this.c.w(ee)}P(){let{c:F}=this,j=F.d;if(!F.b("<?xml"))return!1;if(!this.e())throw this.a("Invalid XML declaration");let qe,st,Te=!!F.b("version")&&this.t()&&this.r();if(!1===Te)throw this.a("XML version is missing or invalid");if(!/^1\.[0-9]+$/.test(Te))throw this.a("Invalid character in version number");if(this.e()){if(qe=!!F.b("encoding")&&this.t()&&this.r(),qe){if(!/^[A-Za-z][\w.-]*$/.test(qe))throw this.a("Invalid character in encoding name");this.e()}if(st=!!F.b("standalone")&&this.t()&&this.r(),st){if("yes"!==st&&"no"!==st)throw this.a('Only "yes" and "no" are permitted as values of `standalone`');this.e()}}if(!F.b("?>"))throw this.a("Invalid or unclosed XML declaration");return!this.g.preserveXmlDeclaration||this.i(new Nt(Te,qe||void 0,st||void 0),j)}a(F){let{c:j}=this;return new Wt(F,j.d,j.h)}parse(){if(this.c.b("\ufeff"),this.O(),!this.E())throw this.a("Root element is missing or invalid");for(;this.z(););if(!this.c.B)throw this.a("Extra content at the end of the document")}o(F){let{length:j}=F;for(let Te=0;Te<j;++Te){let qe=F.codePointAt(Te);if(!ve(qe))throw this.c.n(-([...F].length-Te)),this.a("Invalid character");qe>65535&&(Te+=1)}}};function kt(F){let j=0;for(;-1!==(j=F.indexOf("\r",j));)F="\n"===F[j+1]?F.slice(0,j)+F.slice(j+1):F.slice(0,j)+"\n"+F.slice(j+1);return F}function Dt(F,j){return new It(F,j).document}},2834:(Fn,at)=>{"use strict";function ce(Pe,_){return void 0===_&&(_=Object),_&&"function"==typeof _.freeze?_.freeze(Pe):Pe}var Je=ce({HTML:"text/html",isHTML:function(Pe){return Pe===Je.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),lt=ce({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(Pe){return Pe===lt.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});at.assign=function Ue(Pe,_){if(null===Pe||"object"!=typeof Pe)throw new TypeError("target is not an object");for(var ge in _)Object.prototype.hasOwnProperty.call(_,ge)&&(Pe[ge]=_[ge]);return Pe},at.find=function Ve(Pe,_,ge){if(void 0===ge&&(ge=Array.prototype),Pe&&"function"==typeof ge.find)return ge.find.call(Pe,_);for(var p=0;p<Pe.length;p++)if(Object.prototype.hasOwnProperty.call(Pe,p)){var Oe=Pe[p];if(_.call(void 0,Oe,p,Pe))return Oe}},at.freeze=ce,at.MIME_TYPE=Je,at.NAMESPACE=lt},7044:(Fn,at,Ve)=>{var Ue=Ve(2834),Je=Ve(8486),lt=Ve(6443),Pe=Ve(3742),_=Je.DOMImplementation,ge=Ue.NAMESPACE,p=Pe.ParseError,Oe=Pe.XMLReader;function Xe(ee){return ee.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function ue(ee){this.options=ee||{locator:{}}}function se(){this.cdata=!1}function q(ee,ve){ve.lineNumber=ee.lineNumber,ve.columnNumber=ee.columnNumber}function ae(ee){if(ee)return"\n@"+(ee.systemId||"")+"#[line:"+ee.lineNumber+",col:"+ee.columnNumber+"]"}function be(ee,ve,xe){return"string"==typeof ee?ee.substr(ve,xe):ee.length>=ve+xe||ve?new java.lang.String(ee,ve,xe)+"":ee}function St(ee,ve){ee.currentElement?ee.currentElement.appendChild(ve):ee.doc.appendChild(ve)}ue.prototype.parseFromString=function(ee,ve){var xe=this.options,Ee=new Oe,et=xe.domBuilder||new se,Ct=xe.errorHandler,mt=xe.locator,Nt=xe.xmlns||{},Re=/\/x?html?$/.test(ve),$e=Re?lt.HTML_ENTITIES:lt.XML_ENTITIES;return mt&&et.setDocumentLocator(mt),Ee.errorHandler=function ke(ee,ve,xe){if(!ee){if(ve instanceof se)return ve;ee=ve}var Ee={},et=ee instanceof Function;function Ct(mt){var Nt=ee[mt];!Nt&&et&&(Nt=2==ee.length?function(Re){ee(mt,Re)}:ee),Ee[mt]=Nt&&function(Re){Nt("[xmldom "+mt+"]\t"+Re+ae(xe))}||function(){}}return xe=xe||{},Ct("warning"),Ct("error"),Ct("fatalError"),Ee}(Ct,et,mt),Ee.domBuilder=xe.domBuilder||et,Re&&(Nt[""]=ge.HTML),Nt.xml=Nt.xml||ge.XML,ee&&"string"==typeof ee?Ee.parse((xe.normalizeLineEndings||Xe)(ee),Nt,$e):Ee.errorHandler.error("invalid doc source"),et.doc},se.prototype={startDocument:function(){this.doc=(new _).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(ee,ve,xe,Ee){var et=this.doc,Ct=et.createElementNS(ee,xe||ve),mt=Ee.length;St(this,Ct),this.currentElement=Ct,this.locator&&q(this.locator,Ct);for(var Nt=0;Nt<mt;Nt++){ee=Ee.getURI(Nt);var Re=Ee.getValue(Nt),$e=(xe=Ee.getQName(Nt),et.createAttributeNS(ee,xe));this.locator&&q(Ee.getLocator(Nt),$e),$e.value=$e.nodeValue=Re,Ct.setAttributeNode($e)}},endElement:function(ee,ve,xe){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(ee,ve){},endPrefixMapping:function(ee){},processingInstruction:function(ee,ve){var xe=this.doc.createProcessingInstruction(ee,ve);this.locator&&q(this.locator,xe),St(this,xe)},ignorableWhitespace:function(ee,ve,xe){},characters:function(ee,ve,xe){if(ee=be.apply(this,arguments)){if(this.cdata)var Ee=this.doc.createCDATASection(ee);else Ee=this.doc.createTextNode(ee);this.currentElement?this.currentElement.appendChild(Ee):/^\s*$/.test(ee)&&this.doc.appendChild(Ee),this.locator&&q(this.locator,Ee)}},skippedEntity:function(ee){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(ee){(this.locator=ee)&&(ee.lineNumber=0)},comment:function(ee,ve,xe){ee=be.apply(this,arguments);var Ee=this.doc.createComment(ee);this.locator&&q(this.locator,Ee),St(this,Ee)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(ee,ve,xe){var Ee=this.doc.implementation;if(Ee&&Ee.createDocumentType){var et=Ee.createDocumentType(ee,ve,xe);this.locator&&q(this.locator,et),St(this,et),this.doc.doctype=et}},warning:function(ee){console.warn("[xmldom warning]\t"+ee,ae(this.locator))},error:function(ee){console.error("[xmldom error]\t"+ee,ae(this.locator))},fatalError:function(ee){throw new p(ee,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(ee){se.prototype[ee]=function(){return null}}),at.DOMParser=ue},8486:(Fn,at,Ve)=>{var ce=Ve(2834),Ue=ce.find,Je=ce.NAMESPACE;function lt(E){return""!==E}function _(E,R){return E.hasOwnProperty(R)||(E[R]=!0),E}function ge(E){if(!E)return[];var R=function Pe(E){return E?E.split(/[\t\n\f\r ]+/).filter(lt):[]}(E);return Object.keys(R.reduce(_,{}))}function Oe(E,R){for(var $ in E)Object.prototype.hasOwnProperty.call(E,$)&&(R[$]=E[$])}function Xe(E,R){var $=E.prototype;if(!($ instanceof R)){let ie=function(){};ie.prototype=R.prototype,ie=new ie,Oe($,ie),E.prototype=$=ie}$.constructor!=E&&("function"!=typeof E&&console.error("unknown Class:"+E),$.constructor=E)}var ue={},ke=ue.ELEMENT_NODE=1,se=ue.ATTRIBUTE_NODE=2,q=ue.TEXT_NODE=3,ae=ue.CDATA_SECTION_NODE=4,be=ue.ENTITY_REFERENCE_NODE=5,St=ue.ENTITY_NODE=6,ee=ue.PROCESSING_INSTRUCTION_NODE=7,ve=ue.COMMENT_NODE=8,xe=ue.DOCUMENT_NODE=9,Ee=ue.DOCUMENT_TYPE_NODE=10,et=ue.DOCUMENT_FRAGMENT_NODE=11,Ct=ue.NOTATION_NODE=12,mt={},Nt={},Ye=(mt.INDEX_SIZE_ERR=(Nt[1]="Index size error",1),mt.DOMSTRING_SIZE_ERR=(Nt[2]="DOMString size error",2),mt.HIERARCHY_REQUEST_ERR=(Nt[3]="Hierarchy request error",3)),kt=(mt.WRONG_DOCUMENT_ERR=(Nt[4]="Wrong document",4),mt.INVALID_CHARACTER_ERR=(Nt[5]="Invalid character",5),mt.NO_DATA_ALLOWED_ERR=(Nt[6]="No data allowed",6),mt.NO_MODIFICATION_ALLOWED_ERR=(Nt[7]="No modification allowed",7),mt.NOT_FOUND_ERR=(Nt[8]="Not found",8)),F=(mt.NOT_SUPPORTED_ERR=(Nt[9]="Not supported",9),mt.INUSE_ATTRIBUTE_ERR=(Nt[10]="Attribute in use",10));function Xt(E,R){if(R instanceof Error)var $=R;else $=this,Error.call(this,Nt[E]),this.message=Nt[E],Error.captureStackTrace&&Error.captureStackTrace(this,Xt);return $.code=E,R&&(this.message=this.message+": "+R),$}function pn(){}function jr(E,R){this._node=E,this._refresh=R,Ts(this)}function Ts(E){var R=E._node._inc||E._node.ownerDocument._inc;if(E._inc!==R){var $=E._refresh(E._node);if(xi(E,"length",$.length),!E.$$length||$.length<E.$$length)for(var ze=$.length;ze in E;ze++)Object.prototype.hasOwnProperty.call(E,ze)&&delete E[ze];Oe($,E),E._inc=R}}function Pn(){}function os(E,R){for(var $=E.length;$--;)if(E[$]===R)return $}function Zs(E,R,$,ze){if(ze?R[os(R,ze)]=$:R[R.length++]=$,E){$.ownerElement=E;var ie=E.ownerDocument;ie&&(ze&&sn(ie,E,ze),function _t(E,R,$){E&&E._inc++,$.namespaceURI===Je.XMLNS&&(R._nsMap[$.prefix?$.localName:""]=$.value)}(ie,E,$))}}function ji(E,R,$){var ze=os(R,$);if(!(ze>=0))throw new Xt(kt,new Error(E.tagName+"@"+$));for(var ie=R.length-1;ze<ie;)R[ze]=R[++ze];if(R.length=ie,E){var cn=E.ownerDocument;cn&&(sn(cn,E,$),$.ownerElement=null)}}function ir(){}function Hn(){}function P(E){return("<"==E?"&lt;":">"==E&&"&gt;")||"&"==E&&"&amp;"||'"'==E&&"&quot;"||"&#"+E.charCodeAt()+";"}function le(E,R){if(R(E))return!0;if(E=E.firstChild)do{if(le(E,R))return!0}while(E=E.nextSibling)}function Ie(){this.ownerDocument=this}function sn(E,R,$,ze){E&&E._inc++,$.namespaceURI===Je.XMLNS&&delete R._nsMap[$.prefix?$.localName:""]}function Dn(E,R,$){if(E&&E._inc){E._inc++;var ze=R.childNodes;if($)ze[ze.length++]=$;else{for(var ie=R.firstChild,cn=0;ie;)ze[cn++]=ie,ie=ie.nextSibling;ze.length=cn,delete ze[ze.length]}}}function Bn(E,R){var $=R.previousSibling,ze=R.nextSibling;return $?$.nextSibling=ze:E.firstChild=ze,ze?ze.previousSibling=$:E.lastChild=$,R.parentNode=null,R.previousSibling=null,R.nextSibling=null,Dn(E.ownerDocument,E),R}function En(E){return E&&E.nodeType===Hn.DOCUMENT_TYPE_NODE}function Nn(E){return E&&E.nodeType===Hn.ELEMENT_NODE}function Rr(E){return E&&E.nodeType===Hn.TEXT_NODE}function fs(E,R){var $=E.childNodes||[];if(Ue($,Nn)||En(R))return!1;var ze=Ue($,En);return!(R&&ze&&$.indexOf(ze)>$.indexOf(R))}function L(E,R){var $=E.childNodes||[];if(Ue($,function ze(cn){return Nn(cn)&&cn!==R}))return!1;var ie=Ue($,En);return!(R&&ie&&$.indexOf(ie)>$.indexOf(R))}function S(E,R,$){var ze=E.childNodes||[],ie=R.childNodes||[];if(R.nodeType===Hn.DOCUMENT_FRAGMENT_NODE){var cn=ie.filter(Nn);if(cn.length>1||Ue(ie,Rr))throw new Xt(Ye,"More than one element or text in fragment");if(1===cn.length&&!fs(E,$))throw new Xt(Ye,"Element in fragment can not be inserted before doctype")}if(Nn(R)&&!fs(E,$))throw new Xt(Ye,"Only one element can be added and only after doctype");if(En(R)){if(Ue(ze,En))throw new Xt(Ye,"Only one doctype is allowed");var vr=Ue(ze,Nn);if($&&ze.indexOf(vr)<ze.indexOf($))throw new Xt(Ye,"Doctype can only be inserted before an element");if(!$&&vr)throw new Xt(Ye,"Doctype can not be appended since element is present")}}function O(E,R,$){var ze=E.childNodes||[],ie=R.childNodes||[];if(R.nodeType===Hn.DOCUMENT_FRAGMENT_NODE){var cn=ie.filter(Nn);if(cn.length>1||Ue(ie,Rr))throw new Xt(Ye,"More than one element or text in fragment");if(1===cn.length&&!L(E,$))throw new Xt(Ye,"Element in fragment can not be inserted before doctype")}if(Nn(R)&&!L(E,$))throw new Xt(Ye,"Only one element can be added and only after doctype");if(En(R)){if(Ue(ze,function(xr){return En(xr)&&xr!==$}))throw new Xt(Ye,"Only one doctype is allowed");var vr=Ue(ze,Nn);if($&&ze.indexOf(vr)<ze.indexOf($))throw new Xt(Ye,"Doctype can only be inserted before an element")}}function re(E,R,$,ze){(function A(E,R,$){if(!function Jt(E){return E&&(E.nodeType===Hn.DOCUMENT_NODE||E.nodeType===Hn.DOCUMENT_FRAGMENT_NODE||E.nodeType===Hn.ELEMENT_NODE)}(E))throw new Xt(Ye,"Unexpected parent node type "+E.nodeType);if($&&$.parentNode!==E)throw new Xt(kt,"child not in parent");if(!function qt(E){return E&&(Nn(E)||Rr(E)||En(E)||E.nodeType===Hn.DOCUMENT_FRAGMENT_NODE||E.nodeType===Hn.COMMENT_NODE||E.nodeType===Hn.PROCESSING_INSTRUCTION_NODE)}(R)||En(R)&&E.nodeType!==Hn.DOCUMENT_NODE)throw new Xt(Ye,"Unexpected node type "+R.nodeType+" for parent node type "+E.nodeType)})(E,R,$),E.nodeType===Hn.DOCUMENT_NODE&&(ze||S)(E,R,$);var ie=R.parentNode;if(ie&&ie.removeChild(R),R.nodeType===et){var cn=R.firstChild;if(null==cn)return R;var vr=R.lastChild}else cn=vr=R;var Js=$?$.previousSibling:E.lastChild;cn.previousSibling=Js,vr.nextSibling=$,Js?Js.nextSibling=cn:E.firstChild=cn,null==$?E.lastChild=vr:$.previousSibling=vr;do{cn.parentNode=E,Ae(cn,E.ownerDocument||E)}while(cn!==vr&&(cn=cn.nextSibling));return Dn(E.ownerDocument||E,E),R.nodeType==et&&(R.firstChild=R.lastChild=null),R}function Ae(E,R){if(E.ownerDocument!==R){if(E.ownerDocument=R,E.nodeType===ke&&E.attributes)for(var $=0;$<E.attributes.length;$++){var ze=E.attributes.item($);ze&&(ze.ownerDocument=R)}for(var ie=E.firstChild;ie;)Ae(ie,R),ie=ie.nextSibling}}function jt(){this._nsMap={}}function er(){}function qn(){}function te(){}function he(){}function Qe(){}function ct(){}function Yt(){}function Ln(){}function ar(){}function zn(){}function hr(){}function Vr(){}function js(E,R){var $=[],ze=9==this.nodeType&&this.documentElement||this,ie=ze.prefix,cn=ze.namespaceURI;if(cn&&null==ie&&null==(ie=ze.lookupPrefix(cn)))var vr=[{namespace:cn,prefix:null}];return Di(this,$,E,R,vr),$.join("")}function Ri(E,R,$){var ze=E.prefix||"",ie=E.namespaceURI;if(!ie||"xml"===ze&&ie===Je.XML||ie===Je.XMLNS)return!1;for(var cn=$.length;cn--;){var vr=$[cn];if(vr.prefix===ze)return vr.namespace!==ie}return!0}function Ps(E,R,$){E.push(" ",R,'="',$.replace(/[<>&"\t\n\r]/g,P),'"')}function Di(E,R,$,ze,ie){if(ie||(ie=[]),ze){if(!(E=ze(E)))return;if("string"==typeof E)return void R.push(E)}switch(E.nodeType){case ke:var cn=E.attributes,vr=cn.length,tr=E.firstChild,Js=E.tagName,br=Js;if(!($=Je.isHTML(E.namespaceURI)||$)&&!E.prefix&&E.namespaceURI){for(var xr,io=0;io<cn.length;io++)if("xmlns"===cn.item(io).name){xr=cn.item(io).value;break}if(!xr)for(var Us=ie.length-1;Us>=0;Us--)if(""===(Si=ie[Us]).prefix&&Si.namespace===E.namespaceURI){xr=Si.namespace;break}if(xr!==E.namespaceURI)for(Us=ie.length-1;Us>=0;Us--){var Si;if((Si=ie[Us]).namespace===E.namespaceURI){Si.prefix&&(br=Si.prefix+":"+Js);break}}}R.push("<",br);for(var Hi=0;Hi<vr;Hi++)"xmlns"==(Es=cn.item(Hi)).prefix?ie.push({prefix:Es.localName,namespace:Es.value}):"xmlns"==Es.nodeName&&ie.push({prefix:"",namespace:Es.value});for(Hi=0;Hi<vr;Hi++){var Es,ot,Ls;Ri(Es=cn.item(Hi),0,ie)&&(Ps(R,(ot=Es.prefix||"")?"xmlns:"+ot:"xmlns",Ls=Es.namespaceURI),ie.push({prefix:ot,namespace:Ls})),Di(Es,R,$,ze,ie)}if(Js===br&&Ri(E,0,ie)&&(Ps(R,(ot=E.prefix||"")?"xmlns:"+ot:"xmlns",Ls=E.namespaceURI),ie.push({prefix:ot,namespace:Ls})),tr||$&&!/^(?:meta|link|img|br|hr|input)$/i.test(Js)){if(R.push(">"),$&&/^script$/i.test(Js))for(;tr;)tr.data?R.push(tr.data):Di(tr,R,$,ze,ie.slice()),tr=tr.nextSibling;else for(;tr;)Di(tr,R,$,ze,ie.slice()),tr=tr.nextSibling;R.push("</",br,">")}else R.push("/>");return;case xe:case et:for(tr=E.firstChild;tr;)Di(tr,R,$,ze,ie.slice()),tr=tr.nextSibling;return;case se:return Ps(R,E.name,E.value);case q:return R.push(E.data.replace(/[<&>]/g,P));case ae:return R.push("<![CDATA[",E.data,"]]>");case ve:return R.push("\x3c!--",E.data,"--\x3e");case Ee:var Rs=E.publicId,Ut=E.systemId;if(R.push("<!DOCTYPE ",E.name),Rs)R.push(" PUBLIC ",Rs),Ut&&"."!=Ut&&R.push(" ",Ut),R.push(">");else if(Ut&&"."!=Ut)R.push(" SYSTEM ",Ut,">");else{var Bi=E.internalSubset;Bi&&R.push(" [",Bi,"]"),R.push(">")}return;case ee:return R.push("<?",E.target," ",E.data,"?>");case be:return R.push("&",E.nodeName,";");default:R.push("??",E.nodeName)}}function Vo(E,R,$){var ze;switch(R.nodeType){case ke:(ze=R.cloneNode(!1)).ownerDocument=E;case et:break;case se:$=!0}if(ze||(ze=R.cloneNode(!1)),ze.ownerDocument=E,ze.parentNode=null,$)for(var ie=R.firstChild;ie;)ze.appendChild(Vo(E,ie,$)),ie=ie.nextSibling;return ze}function tl(E,R,$){var ze=new R.constructor;for(var ie in R)if(Object.prototype.hasOwnProperty.call(R,ie)){var cn=R[ie];"object"!=typeof cn&&cn!=ze[ie]&&(ze[ie]=cn)}switch(R.childNodes&&(ze.childNodes=new pn),ze.ownerDocument=E,ze.nodeType){case ke:var vr=R.attributes,Js=ze.attributes=new Pn,br=vr.length;Js._ownerElement=ze;for(var xr=0;xr<br;xr++)ze.setAttributeNode(tl(E,vr.item(xr),!0));break;case se:$=!0}if($)for(var io=R.firstChild;io;)ze.appendChild(tl(E,io,$)),io=io.nextSibling;return ze}function xi(E,R,$){E[R]=$}mt.INVALID_STATE_ERR=(Nt[11]="Invalid state",11),mt.SYNTAX_ERR=(Nt[12]="Syntax error",12),mt.INVALID_MODIFICATION_ERR=(Nt[13]="Invalid modification",13),mt.NAMESPACE_ERR=(Nt[14]="Invalid namespace",14),mt.INVALID_ACCESS_ERR=(Nt[15]="Invalid access",15),Xt.prototype=Error.prototype,Oe(mt,Xt),pn.prototype={length:0,item:function(E){return E>=0&&E<this.length?this[E]:null},toString:function(E,R){for(var $=[],ze=0;ze<this.length;ze++)Di(this[ze],$,E,R);return $.join("")},filter:function(E){return Array.prototype.filter.call(this,E)},indexOf:function(E){return Array.prototype.indexOf.call(this,E)}},jr.prototype.item=function(E){return Ts(this),this[E]||null},Xe(jr,pn),Pn.prototype={length:0,item:pn.prototype.item,getNamedItem:function(E){for(var R=this.length;R--;){var $=this[R];if($.nodeName==E)return $}},setNamedItem:function(E){var R=E.ownerElement;if(R&&R!=this._ownerElement)throw new Xt(F);var $=this.getNamedItem(E.nodeName);return Zs(this._ownerElement,this,E,$),$},setNamedItemNS:function(E){var $,R=E.ownerElement;if(R&&R!=this._ownerElement)throw new Xt(F);return $=this.getNamedItemNS(E.namespaceURI,E.localName),Zs(this._ownerElement,this,E,$),$},removeNamedItem:function(E){var R=this.getNamedItem(E);return ji(this._ownerElement,this,R),R},removeNamedItemNS:function(E,R){var $=this.getNamedItemNS(E,R);return ji(this._ownerElement,this,$),$},getNamedItemNS:function(E,R){for(var $=this.length;$--;){var ze=this[$];if(ze.localName==R&&ze.namespaceURI==E)return ze}return null}},ir.prototype={hasFeature:function(E,R){return!0},createDocument:function(E,R,$){var ze=new Ie;if(ze.implementation=this,ze.childNodes=new pn,ze.doctype=$||null,$&&ze.appendChild($),R){var ie=ze.createElementNS(E,R);ze.appendChild(ie)}return ze},createDocumentType:function(E,R,$){var ze=new ct;return ze.name=E,ze.nodeName=E,ze.publicId=R||"",ze.systemId=$||"",ze}},Hn.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(E,R){return re(this,E,R)},replaceChild:function(E,R){re(this,E,R,O),R&&this.removeChild(R)},removeChild:function(E){return Bn(this,E)},appendChild:function(E){return this.insertBefore(E,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(E){return tl(this.ownerDocument||this,this,E)},normalize:function(){for(var E=this.firstChild;E;){var R=E.nextSibling;R&&R.nodeType==q&&E.nodeType==q?(this.removeChild(R),E.appendData(R.data)):(E.normalize(),E=R)}},isSupported:function(E,R){return this.ownerDocument.implementation.hasFeature(E,R)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(E){for(var R=this;R;){var $=R._nsMap;if($)for(var ze in $)if(Object.prototype.hasOwnProperty.call($,ze)&&$[ze]===E)return ze;R=R.nodeType==se?R.ownerDocument:R.parentNode}return null},lookupNamespaceURI:function(E){for(var R=this;R;){var $=R._nsMap;if($&&Object.prototype.hasOwnProperty.call($,E))return $[E];R=R.nodeType==se?R.ownerDocument:R.parentNode}return null},isDefaultNamespace:function(E){return null==this.lookupPrefix(E)}},Oe(ue,Hn),Oe(ue,Hn.prototype),Ie.prototype={nodeName:"#document",nodeType:xe,doctype:null,documentElement:null,_inc:1,insertBefore:function(E,R){if(E.nodeType==et){for(var $=E.firstChild;$;){var ze=$.nextSibling;this.insertBefore($,R),$=ze}return E}return re(this,E,R),Ae(E,this),null===this.documentElement&&E.nodeType===ke&&(this.documentElement=E),E},removeChild:function(E){return this.documentElement==E&&(this.documentElement=null),Bn(this,E)},replaceChild:function(E,R){re(this,E,R,O),Ae(E,this),R&&this.removeChild(R),Nn(E)&&(this.documentElement=E)},importNode:function(E,R){return Vo(this,E,R)},getElementById:function(E){var R=null;return le(this.documentElement,function($){if($.nodeType==ke&&$.getAttribute("id")==E)return R=$,!0}),R},getElementsByClassName:function(E){var R=ge(E);return new jr(this,function($){var ze=[];return R.length>0&&le($.documentElement,function(ie){if(ie!==$&&ie.nodeType===ke){var cn=ie.getAttribute("class");if(cn){var vr=E===cn;if(!vr){var Js=ge(cn);vr=R.every(function p(E){return function(R){return E&&-1!==E.indexOf(R)}}(Js))}vr&&ze.push(ie)}}}),ze})},createElement:function(E){var R=new jt;return R.ownerDocument=this,R.nodeName=E,R.tagName=E,R.localName=E,R.childNodes=new pn,(R.attributes=new Pn)._ownerElement=R,R},createDocumentFragment:function(){var E=new zn;return E.ownerDocument=this,E.childNodes=new pn,E},createTextNode:function(E){var R=new te;return R.ownerDocument=this,R.appendData(E),R},createComment:function(E){var R=new he;return R.ownerDocument=this,R.appendData(E),R},createCDATASection:function(E){var R=new Qe;return R.ownerDocument=this,R.appendData(E),R},createProcessingInstruction:function(E,R){var $=new hr;return $.ownerDocument=this,$.tagName=$.nodeName=$.target=E,$.nodeValue=$.data=R,$},createAttribute:function(E){var R=new er;return R.ownerDocument=this,R.name=E,R.nodeName=E,R.localName=E,R.specified=!0,R},createEntityReference:function(E){var R=new ar;return R.ownerDocument=this,R.nodeName=E,R},createElementNS:function(E,R){var $=new jt,ze=R.split(":"),ie=$.attributes=new Pn;return $.childNodes=new pn,$.ownerDocument=this,$.nodeName=R,$.tagName=R,$.namespaceURI=E,2==ze.length?($.prefix=ze[0],$.localName=ze[1]):$.localName=R,ie._ownerElement=$,$},createAttributeNS:function(E,R){var $=new er,ze=R.split(":");return $.ownerDocument=this,$.nodeName=R,$.name=R,$.namespaceURI=E,$.specified=!0,2==ze.length?($.prefix=ze[0],$.localName=ze[1]):$.localName=R,$}},Xe(Ie,Hn),Ie.prototype.getElementsByTagName=(jt.prototype={nodeType:ke,hasAttribute:function(E){return null!=this.getAttributeNode(E)},getAttribute:function(E){var R=this.getAttributeNode(E);return R&&R.value||""},getAttributeNode:function(E){return this.attributes.getNamedItem(E)},setAttribute:function(E,R){var $=this.ownerDocument.createAttribute(E);$.value=$.nodeValue=""+R,this.setAttributeNode($)},removeAttribute:function(E){var R=this.getAttributeNode(E);R&&this.removeAttributeNode(R)},appendChild:function(E){return E.nodeType===et?this.insertBefore(E,null):function je(E,R){return R.parentNode&&R.parentNode.removeChild(R),R.parentNode=E,R.previousSibling=E.lastChild,R.nextSibling=null,R.previousSibling?R.previousSibling.nextSibling=R:E.firstChild=R,E.lastChild=R,Dn(E.ownerDocument,E,R),Ae(R,E.ownerDocument||E),R}(this,E)},setAttributeNode:function(E){return this.attributes.setNamedItem(E)},setAttributeNodeNS:function(E){return this.attributes.setNamedItemNS(E)},removeAttributeNode:function(E){return this.attributes.removeNamedItem(E.nodeName)},removeAttributeNS:function(E,R){var $=this.getAttributeNodeNS(E,R);$&&this.removeAttributeNode($)},hasAttributeNS:function(E,R){return null!=this.getAttributeNodeNS(E,R)},getAttributeNS:function(E,R){var $=this.getAttributeNodeNS(E,R);return $&&$.value||""},setAttributeNS:function(E,R,$){var ze=this.ownerDocument.createAttributeNS(E,R);ze.value=ze.nodeValue=""+$,this.setAttributeNode(ze)},getAttributeNodeNS:function(E,R){return this.attributes.getNamedItemNS(E,R)},getElementsByTagName:function(E){return new jr(this,function(R){var $=[];return le(R,function(ze){ze!==R&&ze.nodeType==ke&&("*"===E||ze.tagName==E)&&$.push(ze)}),$})},getElementsByTagNameNS:function(E,R){return new jr(this,function($){var ze=[];return le($,function(ie){ie!==$&&ie.nodeType===ke&&("*"===E||ie.namespaceURI===E)&&("*"===R||ie.localName==R)&&ze.push(ie)}),ze})}}).getElementsByTagName,Ie.prototype.getElementsByTagNameNS=jt.prototype.getElementsByTagNameNS,Xe(jt,Hn),er.prototype.nodeType=se,Xe(er,Hn),qn.prototype={data:"",substringData:function(E,R){return this.data.substring(E,E+R)},appendData:function(E){this.nodeValue=this.data=E=this.data+E,this.length=E.length},insertData:function(E,R){this.replaceData(E,0,R)},appendChild:function(E){throw new Error(Nt[Ye])},deleteData:function(E,R){this.replaceData(E,R,"")},replaceData:function(E,R,$){var ze=this.data.substring(0,E),ie=this.data.substring(E+R);this.nodeValue=this.data=$=ze+$+ie,this.length=$.length}},Xe(qn,Hn),te.prototype={nodeName:"#text",nodeType:q,splitText:function(E){var R=this.data,$=R.substring(E);R=R.substring(0,E),this.data=this.nodeValue=R,this.length=R.length;var ze=this.ownerDocument.createTextNode($);return this.parentNode&&this.parentNode.insertBefore(ze,this.nextSibling),ze}},Xe(te,qn),he.prototype={nodeName:"#comment",nodeType:ve},Xe(he,qn),Qe.prototype={nodeName:"#cdata-section",nodeType:ae},Xe(Qe,qn),ct.prototype.nodeType=Ee,Xe(ct,Hn),Yt.prototype.nodeType=Ct,Xe(Yt,Hn),Ln.prototype.nodeType=St,Xe(Ln,Hn),ar.prototype.nodeType=be,Xe(ar,Hn),zn.prototype.nodeName="#document-fragment",zn.prototype.nodeType=et,Xe(zn,Hn),hr.prototype.nodeType=ee,Xe(hr,Hn),Vr.prototype.serializeToString=function(E,R,$){return js.call(E,R,$)},Hn.prototype.toString=js;try{if(Object.defineProperty){let E=function(R){switch(R.nodeType){case ke:case et:var $=[];for(R=R.firstChild;R;)7!==R.nodeType&&8!==R.nodeType&&$.push(E(R)),R=R.nextSibling;return $.join("");default:return R.nodeValue}};Object.defineProperty(jr.prototype,"length",{get:function(){return Ts(this),this.$$length}}),Object.defineProperty(Hn.prototype,"textContent",{get:function(){return E(this)},set:function(R){switch(this.nodeType){case ke:case et:for(;this.firstChild;)this.removeChild(this.firstChild);(R||String(R))&&this.appendChild(this.ownerDocument.createTextNode(R));break;default:this.data=R,this.value=R,this.nodeValue=R}}}),xi=function(R,$,ze){R["$$"+$]=ze}}}catch{}at.DocumentType=ct,at.DOMException=Xt,at.DOMImplementation=ir,at.Element=jt,at.Node=Hn,at.NodeList=pn,at.XMLSerializer=Vr},6443:(Fn,at,Ve)=>{"use strict";var ce=Ve(2834).freeze;at.XML_ENTITIES=ce({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),at.HTML_ENTITIES=ce({Aacute:"\xc1",aacute:"\xe1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\xc2",acirc:"\xe2",acute:"\xb4",Acy:"\u0410",acy:"\u0430",AElig:"\xc6",aelig:"\xe6",af:"\u2061",Afr:"\u{1d504}",afr:"\u{1d51e}",Agrave:"\xc0",agrave:"\xe0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",AMP:"&",amp:"&",And:"\u2a53",and:"\u2227",andand:"\u2a55",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsd:"\u2221",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\xc5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1d538}",aopf:"\u{1d552}",ap:"\u2248",apacir:"\u2a6f",apE:"\u2a70",ape:"\u224a",apid:"\u224b",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\xc5",aring:"\xe5",Ascr:"\u{1d49c}",ascr:"\u{1d4b6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\xc3",atilde:"\xe3",Auml:"\xc4",auml:"\xe4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",Barwed:"\u2306",barwed:"\u2305",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",Because:"\u2235",because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\u{1d505}",bfr:"\u{1d51f}",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\u{1d539}",bopf:"\u{1d553}",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxDL:"\u2557",boxDl:"\u2556",boxdL:"\u2555",boxdl:"\u2510",boxDR:"\u2554",boxDr:"\u2553",boxdR:"\u2552",boxdr:"\u250c",boxH:"\u2550",boxh:"\u2500",boxHD:"\u2566",boxHd:"\u2564",boxhD:"\u2565",boxhd:"\u252c",boxHU:"\u2569",boxHu:"\u2567",boxhU:"\u2568",boxhu:"\u2534",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxUL:"\u255d",boxUl:"\u255c",boxuL:"\u255b",boxul:"\u2518",boxUR:"\u255a",boxUr:"\u2559",boxuR:"\u2558",boxur:"\u2514",boxV:"\u2551",boxv:"\u2502",boxVH:"\u256c",boxVh:"\u256b",boxvH:"\u256a",boxvh:"\u253c",boxVL:"\u2563",boxVl:"\u2562",boxvL:"\u2561",boxvl:"\u2524",boxVR:"\u2560",boxVr:"\u255f",boxvR:"\u255e",boxvr:"\u251c",bprime:"\u2035",Breve:"\u02d8",breve:"\u02d8",brvbar:"\xa6",Bscr:"\u212c",bscr:"\u{1d4b7}",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsol:"\\",bsolb:"\u29c5",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",Cap:"\u22d2",cap:"\u2229",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\xc7",ccedil:"\xe7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\xb8",Cedilla:"\xb8",cemptyv:"\u29b2",cent:"\xa2",CenterDot:"\xb7",centerdot:"\xb7",Cfr:"\u212d",cfr:"\u{1d520}",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",cir:"\u25cb",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\xae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",Colon:"\u2237",colon:":",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",Conint:"\u222f",conint:"\u222e",ContourIntegral:"\u222e",Copf:"\u2102",copf:"\u{1d554}",coprod:"\u2210",Coproduct:"\u2210",COPY:"\xa9",copy:"\xa9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",Cross:"\u2a2f",cross:"\u2717",Cscr:"\u{1d49e}",cscr:"\u{1d4b8}",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",Cup:"\u22d3",cup:"\u222a",cupbrcap:"\u2a48",CupCap:"\u224d",cupcap:"\u2a46",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\xa4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",Dagger:"\u2021",dagger:"\u2020",daleth:"\u2138",Darr:"\u21a1",dArr:"\u21d3",darr:"\u2193",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",DD:"\u2145",dd:"\u2146",ddagger:"\u2021",ddarr:"\u21ca",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\xb0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\u{1d507}",dfr:"\u{1d521}",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\xb4",DiacriticalDot:"\u02d9",DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",Diamond:"\u22c4",diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\xa8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\xf7",divide:"\xf7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\u{1d53b}",dopf:"\u{1d555}",Dot:"\xa8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\xa8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrow:"\u2193",Downarrow:"\u21d3",downarrow:"\u2193",DownArrowBar:"\u2913",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVector:"\u21bd",DownLeftVectorBar:"\u2956",DownRightTeeVector:"\u295f",DownRightVector:"\u21c1",DownRightVectorBar:"\u2957",DownTee:"\u22a4",DownTeeArrow:"\u21a7",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\u{1d49f}",dscr:"\u{1d4b9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\xc9",eacute:"\xe9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",ecir:"\u2256",Ecirc:"\xca",ecirc:"\xea",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",eDot:"\u2251",edot:"\u0117",ee:"\u2147",efDot:"\u2252",Efr:"\u{1d508}",efr:"\u{1d522}",eg:"\u2a9a",Egrave:"\xc8",egrave:"\xe8",egs:"\u2a96",egsdot:"\u2a98",el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp:"\u2003",emsp13:"\u2004",emsp14:"\u2005",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1d53c}",eopf:"\u{1d556}",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",Escr:"\u2130",escr:"\u212f",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\xd0",eth:"\xf0",Euml:"\xcb",euml:"\xeb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",ExponentialE:"\u2147",exponentiale:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\u{1d509}",ffr:"\u{1d523}",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\u{1d53d}",fopf:"\u{1d557}",ForAll:"\u2200",forall:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\xbd",frac13:"\u2153",frac14:"\xbc",frac15:"\u2155",frac16:"\u2159",frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\xbe",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",Fscr:"\u2131",fscr:"\u{1d4bb}",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",gE:"\u2267",ge:"\u2265",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",geqq:"\u2267",geqslant:"\u2a7e",ges:"\u2a7e",gescc:"\u2aa9",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\u{1d50a}",gfr:"\u{1d524}",Gg:"\u22d9",gg:"\u226b",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gl:"\u2277",gla:"\u2aa5",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gnE:"\u2269",gne:"\u2a88",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\u{1d53e}",gopf:"\u{1d558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\u{1d4a2}",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",Gt:"\u226b",GT:">",gt:">",gtcc:"\u2aa7",gtcir:"\u2a7a",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\xbd",hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",hArr:"\u21d4",harr:"\u2194",harrcir:"\u2948",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",Hfr:"\u210c",hfr:"\u{1d525}",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",Hopf:"\u210d",hopf:"\u{1d559}",horbar:"\u2015",HorizontalLine:"\u2500",Hscr:"\u210b",hscr:"\u{1d4bd}",hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xcd",iacute:"\xed",ic:"\u2063",Icirc:"\xce",icirc:"\xee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xa1",iff:"\u21d4",Ifr:"\u2111",ifr:"\u{1d526}",Igrave:"\xcc",igrave:"\xec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Im:"\u2111",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",in:"\u2208",incare:"\u2105",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",Int:"\u222c",int:"\u222b",intcal:"\u22ba",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\u{1d540}",iopf:"\u{1d55a}",Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\xbf",Iscr:"\u2110",iscr:"\u{1d4be}",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xcf",iuml:"\xef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1d50d}",jfr:"\u{1d527}",jmath:"\u0237",Jopf:"\u{1d541}",jopf:"\u{1d55b}",Jscr:"\u{1d4a5}",jscr:"\u{1d4bf}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\u{1d50e}",kfr:"\u{1d528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\u{1d542}",kopf:"\u{1d55c}",Kscr:"\u{1d4a6}",kscr:"\u{1d4c0}",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",Lang:"\u27ea",lang:"\u27e8",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",Laplacetrf:"\u2112",laquo:"\xab",Larr:"\u219e",lArr:"\u21d0",larr:"\u2190",larrb:"\u21e4",larrbfs:"\u291f",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",lat:"\u2aab",lAtail:"\u291b",latail:"\u2919",late:"\u2aad",lates:"\u2aad\ufe00",lBarr:"\u290e",lbarr:"\u290c",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",lE:"\u2266",le:"\u2264",LeftAngleBracket:"\u27e8",LeftArrow:"\u2190",Leftarrow:"\u21d0",leftarrow:"\u2190",LeftArrowBar:"\u21e4",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVector:"\u21c3",LeftDownVectorBar:"\u2959",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrow:"\u2194",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTee:"\u22a3",LeftTeeArrow:"\u21a4",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangle:"\u22b2",LeftTriangleBar:"\u29cf",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVector:"\u21bf",LeftUpVectorBar:"\u2958",LeftVector:"\u21bc",LeftVectorBar:"\u2952",lEg:"\u2a8b",leg:"\u22da",leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",les:"\u2a7d",lescc:"\u2aa8",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\u{1d50f}",lfr:"\u{1d529}",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",Ll:"\u22d8",ll:"\u226a",llarr:"\u21c7",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoust:"\u23b0",lmoustache:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lnE:"\u2268",lne:"\u2a87",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftarrow:"\u27f5",LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longleftrightarrow:"\u27f7",longmapsto:"\u27fc",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",longrightarrow:"\u27f6",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\u{1d543}",lopf:"\u{1d55d}",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",lrtri:"\u22bf",lsaquo:"\u2039",Lscr:"\u2112",lscr:"\u{1d4c1}",Lsh:"\u21b0",lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",Lt:"\u226a",LT:"<",lt:"<",ltcc:"\u2aa6",ltcir:"\u2a79",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\xaf",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\u{1d510}",mfr:"\u{1d52a}",mho:"\u2127",micro:"\xb5",mid:"\u2223",midast:"*",midcir:"\u2af0",middot:"\xb7",minus:"\u2212",minusb:"\u229f",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\u{1d544}",mopf:"\u{1d55e}",mp:"\u2213",Mscr:"\u2133",mscr:"\u{1d4c2}",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natur:"\u266e",natural:"\u266e",naturals:"\u2115",nbsp:"\xa0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",ne:"\u2260",nearhk:"\u2924",neArr:"\u21d7",nearr:"\u2197",nearrow:"\u2197",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1d511}",nfr:"\u{1d52b}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nhArr:"\u21ce",nharr:"\u21ae",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlArr:"\u21cd",nlarr:"\u219a",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nLeftarrow:"\u21cd",nleftarrow:"\u219a",nLeftrightarrow:"\u21ce",nleftrightarrow:"\u21ae",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xa0",Nopf:"\u2115",nopf:"\u{1d55f}",Not:"\u2aec",not:"\xac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangle:"\u22ea",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangle:"\u22eb",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",npar:"\u2226",nparallel:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",npre:"\u2aaf\u0338",nprec:"\u2280",npreceq:"\u2aaf\u0338",nrArr:"\u21cf",nrarr:"\u219b",nrarrc:"\u2933\u0338",nrarrw:"\u219d\u0338",nRightarrow:"\u21cf",nrightarrow:"\u219b",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\u{1d4a9}",nscr:"\u{1d4c3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\xd1",ntilde:"\xf1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nVDash:"\u22af",nVdash:"\u22ae",nvDash:"\u22ad",nvdash:"\u22ac",nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwArr:"\u21d6",nwarr:"\u2196",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xd3",oacute:"\xf3",oast:"\u229b",ocir:"\u229a",Ocirc:"\xd4",ocirc:"\xf4",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29bf",Ofr:"\u{1d512}",ofr:"\u{1d52c}",ogon:"\u02db",Ograve:"\xd2",ograve:"\xf2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\u{1d546}",oopf:"\u{1d560}",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",Or:"\u2a54",or:"\u2228",orarr:"\u21bb",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\xaa",ordm:"\xba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\u{1d4aa}",oscr:"\u2134",Oslash:"\xd8",oslash:"\xf8",osol:"\u2298",Otilde:"\xd5",otilde:"\xf5",Otimes:"\u2a37",otimes:"\u2297",otimesas:"\u2a36",Ouml:"\xd6",ouml:"\xf6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",par:"\u2225",para:"\xb6",parallel:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\u{1d513}",pfr:"\u{1d52d}",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plus:"+",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\xb1",plusmn:"\xb1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\xb1",Poincareplane:"\u210c",pointint:"\u2a15",Popf:"\u2119",popf:"\u{1d561}",pound:"\xa3",Pr:"\u2abb",pr:"\u227a",prap:"\u2ab7",prcue:"\u227c",prE:"\u2ab3",pre:"\u2aaf",prec:"\u227a",precapprox:"\u2ab7",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",precsim:"\u227e",Prime:"\u2033",prime:"\u2032",primes:"\u2119",prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportion:"\u2237",Proportional:"\u221d",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\u{1d4ab}",pscr:"\u{1d4c5}",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\u{1d514}",qfr:"\u{1d52e}",qint:"\u2a0c",Qopf:"\u211a",qopf:"\u{1d562}",qprime:"\u2057",Qscr:"\u{1d4ac}",qscr:"\u{1d4c6}",quaternions:"\u210d",quatint:"\u2a16",quest:"?",questeq:"\u225f",QUOT:'"',quot:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",Rang:"\u27eb",rang:"\u27e9",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\xbb",Rarr:"\u21a0",rArr:"\u21d2",rarr:"\u2192",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",rAtail:"\u291c",ratail:"\u291a",ratio:"\u2236",rationals:"\u211a",RBarr:"\u2910",rBarr:"\u290f",rbarr:"\u290d",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",Re:"\u211c",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",rect:"\u25ad",REG:"\xae",reg:"\xae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",Rfr:"\u211c",rfr:"\u{1d52f}",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrow:"\u2192",Rightarrow:"\u21d2",rightarrow:"\u2192",RightArrowBar:"\u21e5",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVector:"\u21c2",RightDownVectorBar:"\u2955",RightFloor:"\u230b",rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTee:"\u22a2",RightTeeArrow:"\u21a6",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangle:"\u22b3",RightTriangleBar:"\u29d0",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVector:"\u21be",RightUpVectorBar:"\u2954",RightVector:"\u21c0",RightVectorBar:"\u2953",ring:"\u02da",risingdotseq:"\u2253",rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoust:"\u23b1",rmoustache:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",Ropf:"\u211d",ropf:"\u{1d563}",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",Rscr:"\u211b",rscr:"\u{1d4c7}",Rsh:"\u21b1",rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",Sc:"\u2abc",sc:"\u227b",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",sccue:"\u227d",scE:"\u2ab4",sce:"\u2ab0",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdot:"\u22c5",sdotb:"\u22a1",sdote:"\u2a66",searhk:"\u2925",seArr:"\u21d8",searr:"\u2198",searrow:"\u2198",sect:"\xa7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1d516}",sfr:"\u{1d530}",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",sol:"/",solb:"\u29c4",solbar:"\u233f",Sopf:"\u{1d54a}",sopf:"\u{1d564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",squ:"\u25a1",Square:"\u25a1",square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squf:"\u25aa",srarr:"\u2192",Sscr:"\u{1d4ae}",sscr:"\u{1d4c8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",straightphi:"\u03d5",strns:"\xaf",Sub:"\u22d0",sub:"\u2282",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",Subset:"\u22d0",subset:"\u2282",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succ:"\u227b",succapprox:"\u2ab8",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",Sum:"\u2211",sum:"\u2211",sung:"\u266a",Sup:"\u22d1",sup:"\u2283",sup1:"\xb9",sup2:"\xb2",sup3:"\xb3",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",Supset:"\u22d1",supset:"\u2283",supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swArr:"\u21d9",swarr:"\u2199",swarrow:"\u2199",swnwar:"\u292a",szlig:"\xdf",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\u{1d517}",tfr:"\u{1d531}",there4:"\u2234",Therefore:"\u2234",therefore:"\u2234",Theta:"\u0398",theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",thinsp:"\u2009",ThinSpace:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\xde",thorn:"\xfe",Tilde:"\u223c",tilde:"\u02dc",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",times:"\xd7",timesb:"\u22a0",timesbar:"\u2a31",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",top:"\u22a4",topbot:"\u2336",topcir:"\u2af1",Topf:"\u{1d54b}",topf:"\u{1d565}",topfork:"\u2ada",tosa:"\u2929",tprime:"\u2034",TRADE:"\u2122",trade:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\u{1d4af}",tscr:"\u{1d4c9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",twoheadrightarrow:"\u21a0",Uacute:"\xda",uacute:"\xfa",Uarr:"\u219f",uArr:"\u21d1",uarr:"\u2191",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\xdb",ucirc:"\xfb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\u{1d518}",ufr:"\u{1d532}",Ugrave:"\xd9",ugrave:"\xf9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",Umacr:"\u016a",umacr:"\u016b",uml:"\xa8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1d54c}",uopf:"\u{1d566}",UpArrow:"\u2191",Uparrow:"\u21d1",uparrow:"\u2191",UpArrowBar:"\u2912",UpArrowDownArrow:"\u21c5",UpDownArrow:"\u2195",Updownarrow:"\u21d5",updownarrow:"\u2195",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",Upsi:"\u03d2",upsi:"\u03c5",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTee:"\u22a5",UpTeeArrow:"\u21a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\u{1d4b0}",uscr:"\u{1d4ca}",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\xdc",uuml:"\xfc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",varpropto:"\u221d",vArr:"\u21d5",varr:"\u2195",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",Vbar:"\u2aeb",vBar:"\u2ae8",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",VDash:"\u22ab",Vdash:"\u22a9",vDash:"\u22a8",vdash:"\u22a2",Vdashl:"\u2ae6",Vee:"\u22c1",vee:"\u2228",veebar:"\u22bb",veeeq:"\u225a",vellip:"\u22ee",Verbar:"\u2016",verbar:"|",Vert:"\u2016",vert:"|",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\u{1d519}",vfr:"\u{1d533}",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\u{1d54d}",vopf:"\u{1d567}",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\u{1d4b1}",vscr:"\u{1d4cb}",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",Wedge:"\u22c0",wedge:"\u2227",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1d51a}",wfr:"\u{1d534}",Wopf:"\u{1d54e}",wopf:"\u{1d568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1d4b2}",wscr:"\u{1d4cc}",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\u{1d51b}",xfr:"\u{1d535}",xhArr:"\u27fa",xharr:"\u27f7",Xi:"\u039e",xi:"\u03be",xlArr:"\u27f8",xlarr:"\u27f5",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\u{1d54f}",xopf:"\u{1d569}",xoplus:"\u2a01",xotime:"\u2a02",xrArr:"\u27f9",xrarr:"\u27f6",Xscr:"\u{1d4b3}",xscr:"\u{1d4cd}",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\xdd",yacute:"\xfd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\xa5",Yfr:"\u{1d51c}",yfr:"\u{1d536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1d550}",yopf:"\u{1d56a}",Yscr:"\u{1d4b4}",yscr:"\u{1d4ce}",YUcy:"\u042e",yucy:"\u044e",Yuml:"\u0178",yuml:"\xff",Zacute:"\u0179",zacute:"\u017a",Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",Zfr:"\u2128",zfr:"\u{1d537}",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",Zopf:"\u2124",zopf:"\u{1d56b}",Zscr:"\u{1d4b5}",zscr:"\u{1d4cf}",zwj:"\u200d",zwnj:"\u200c"}),at.entityMap=at.HTML_ENTITIES},2502:(Fn,at,Ve)=>{Ve(8486);at.DOMParser=Ve(7044).DOMParser},3742:(Fn,at,Ve)=>{var ce=Ve(2834).NAMESPACE,Ue=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Je=new RegExp("[\\-\\.0-9"+Ue.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),lt=new RegExp("^"+Ue.source+Je.source+"*(?::"+Ue.source+Je.source+"*)?$");function se(Re,$e){this.message=Re,this.locator=$e,Error.captureStackTrace&&Error.captureStackTrace(this,se)}function q(){}function be(Re,$e){return $e.lineNumber=Re.lineNumber,$e.columnNumber=Re.columnNumber,$e}function St(Re,$e,Ye,Wt,ne,De){function It(st,ln,Xt){Ye.attributeNames.hasOwnProperty(st)&&De.fatalError("Attribute "+st+" redefined"),Ye.addValue(st,ln.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,ne),Xt)}for(var kt,F=++$e,j=0;;){var Te=Re.charAt(F);switch(Te){case"=":if(1===j)kt=Re.slice($e,F),j=3;else{if(2!==j)throw new Error("attribute equal must after attrName");j=3}break;case"'":case'"':if(3===j||1===j){if(1===j&&(De.warning('attribute value must after "="'),kt=Re.slice($e,F)),!((F=Re.indexOf(Te,$e=F+1))>0))throw new Error("attribute value no end '"+Te+"' match");It(kt,Dt=Re.slice($e,F),$e-1),j=5}else{if(4!=j)throw new Error('attribute value must after "="');It(kt,Dt=Re.slice($e,F),$e),De.warning('attribute "'+kt+'" missed start quot('+Te+")!!"),$e=F+1,j=5}break;case"/":switch(j){case 0:Ye.setTagName(Re.slice($e,F));case 5:case 6:case 7:j=7,Ye.closed=!0;case 4:case 1:break;case 2:Ye.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return De.error("unexpected end of input"),0==j&&Ye.setTagName(Re.slice($e,F)),F;case">":switch(j){case 0:Ye.setTagName(Re.slice($e,F));case 5:case 6:case 7:break;case 4:case 1:"/"===(Dt=Re.slice($e,F)).slice(-1)&&(Ye.closed=!0,Dt=Dt.slice(0,-1));case 2:2===j&&(Dt=kt),4==j?(De.warning('attribute "'+Dt+'" missed quot(")!'),It(kt,Dt,$e)):((!ce.isHTML(Wt[""])||!Dt.match(/^(?:disabled|checked|selected)$/i))&&De.warning('attribute "'+Dt+'" missed value!! "'+Dt+'" instead!!'),It(Dt,Dt,$e));break;case 3:throw new Error("attribute value missed!!")}return F;case"\x80":Te=" ";default:if(Te<=" ")switch(j){case 0:Ye.setTagName(Re.slice($e,F)),j=6;break;case 1:kt=Re.slice($e,F),j=2;break;case 4:var Dt=Re.slice($e,F);De.warning('attribute "'+Dt+'" missed quot(")!!'),It(kt,Dt,$e);case 5:j=6}else switch(j){case 2:(!ce.isHTML(Wt[""])||!kt.match(/^(?:disabled|checked|selected)$/i))&&De.warning('attribute "'+kt+'" missed value!! "'+kt+'" instead2!!'),It(kt,kt,$e),$e=F,j=1;break;case 5:De.warning('attribute space is required"'+kt+'"!!');case 6:j=1,$e=F;break;case 3:j=4,$e=F;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}F++}}function ee(Re,$e,Ye){for(var Wt=Re.tagName,ne=null,Te=Re.length;Te--;){var De=Re[Te],It=De.qName,kt=De.value;if((qe=It.indexOf(":"))>0)var Dt=De.prefix=It.slice(0,qe),F=It.slice(qe+1),j="xmlns"===Dt&&F;else F=It,Dt=null,j="xmlns"===It&&"";De.localName=F,!1!==j&&(null==ne&&(ne={},Ee(Ye,Ye={})),Ye[j]=ne[j]=kt,De.uri=ce.XMLNS,$e.startPrefixMapping(j,kt))}for(Te=Re.length;Te--;)(Dt=(De=Re[Te]).prefix)&&("xml"===Dt&&(De.uri=ce.XML),"xmlns"!==Dt&&(De.uri=Ye[Dt||""]));var qe;(qe=Wt.indexOf(":"))>0?(Dt=Re.prefix=Wt.slice(0,qe),F=Re.localName=Wt.slice(qe+1)):(Dt=null,F=Re.localName=Wt);var st=Re.uri=Ye[Dt||""];if($e.startElement(st,F,Wt,Re),!Re.closed)return Re.currentNSMap=Ye,Re.localNSMap=ne,!0;if($e.endElement(st,F,Wt),ne)for(Dt in ne)Object.prototype.hasOwnProperty.call(ne,Dt)&&$e.endPrefixMapping(Dt)}function ve(Re,$e,Ye,Wt,ne){if(/^(?:script|textarea)$/i.test(Ye)){var De=Re.indexOf("</"+Ye+">",$e),It=Re.substring($e+1,De);if(/[&<]/.test(It))return/^script$/i.test(Ye)?(ne.characters(It,0,It.length),De):(It=It.replace(/&#?\w+;/g,Wt),ne.characters(It,0,It.length),De)}return $e+1}function xe(Re,$e,Ye,Wt){var ne=Wt[Ye];return null==ne&&((ne=Re.lastIndexOf("</"+Ye+">"))<$e&&(ne=Re.lastIndexOf("</"+Ye)),Wt[Ye]=ne),ne<$e}function Ee(Re,$e){for(var Ye in Re)Object.prototype.hasOwnProperty.call(Re,Ye)&&($e[Ye]=Re[Ye])}function et(Re,$e,Ye,Wt){if("-"===Re.charAt($e+2))return"-"===Re.charAt($e+3)?(De=Re.indexOf("--\x3e",$e+4))>$e?(Ye.comment(Re,$e+4,De-$e-4),De+3):(Wt.error("Unclosed comment"),-1):-1;if("CDATA["==Re.substr($e+3,6)){var De=Re.indexOf("]]>",$e+9);return Ye.startCDATA(),Ye.characters(Re,$e+9,De-$e-9),Ye.endCDATA(),De+3}var It=function Nt(Re,$e){var Ye,Wt=[],ne=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(ne.lastIndex=$e,ne.exec(Re);Ye=ne.exec(Re);)if(Wt.push(Ye),Ye[1])return Wt}(Re,$e),kt=It.length;if(kt>1&&/!doctype/i.test(It[0][0])){var Dt=It[1][0],F=!1,j=!1;kt>3&&(/^public$/i.test(It[2][0])?(F=It[3][0],j=kt>4&&It[4][0]):/^system$/i.test(It[2][0])&&(j=It[3][0]));var Te=It[kt-1];return Ye.startDTD(Dt,F,j),Ye.endDTD(),Te.index+Te[0].length}return-1}function Ct(Re,$e,Ye){var Wt=Re.indexOf("?>",$e);if(Wt){var ne=Re.substring($e,Wt).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return ne?(Ye.processingInstruction(ne[1],ne[2]),Wt+2):-1}return-1}function mt(){this.attributeNames={}}(se.prototype=new Error).name=se.name,q.prototype={parse:function(Re,$e,Ye){var Wt=this.domBuilder;Wt.startDocument(),Ee($e,$e={}),function ae(Re,$e,Ye,Wt,ne){function It(Jt){var qt=Jt.slice(1,-1);return Object.hasOwnProperty.call(Ye,qt)?Ye[qt]:"#"===qt.charAt(0)?function De(Jt){return Jt>65535?(Jt-=65536,String.fromCharCode(55296+(Jt>>10),56320+(1023&Jt))):String.fromCharCode(Jt)}(parseInt(qt.substr(1).replace("x","0x"))):(ne.error("entity not found:"+Jt),Jt)}function kt(Jt){if(Jt>Xt){var qt=Re.substring(Xt,Jt).replace(/&#?\w+;/g,It);qe&&Dt(Xt),Wt.characters(qt,0,Jt-Xt),Xt=Jt}}function Dt(Jt,qt){for(;Jt>=j&&(qt=Te.exec(Re));)j=(F=qt.index)+qt[0].length,qe.lineNumber++;qe.columnNumber=Jt-F+1}for(var F=0,j=0,Te=/.*(?:\r\n?|\n)|.*$/g,qe=Wt.locator,st=[{currentNSMap:$e}],ln={},Xt=0;;){try{var pn=Re.indexOf("<",Xt);if(pn<0){if(!Re.substr(Xt).match(/^\s*$/)){var jr=Wt.doc,Ts=jr.createTextNode(Re.substr(Xt));jr.appendChild(Ts),Wt.currentElement=Ts}return}switch(pn>Xt&&kt(pn),Re.charAt(pn+1)){case"/":var Ie=Re.indexOf(">",pn+3),Pn=Re.substring(pn+2,Ie).replace(/[ \t\n\r]+$/g,""),os=st.pop();Ie<0?(Pn=Re.substring(pn+2).replace(/[\s<].*/,""),ne.error("end tag name: "+Pn+" is not complete:"+os.tagName),Ie=pn+1+Pn.length):Pn.match(/\s</)&&(Pn=Pn.replace(/[\s<].*/,""),ne.error("end tag name: "+Pn+" maybe not complete"),Ie=pn+1+Pn.length);var Zs=os.localNSMap,ji=os.tagName==Pn;if(ji||os.tagName&&os.tagName.toLowerCase()==Pn.toLowerCase()){if(Wt.endElement(os.uri,os.localName,Pn),Zs)for(var Hn in Zs)Object.prototype.hasOwnProperty.call(Zs,Hn)&&Wt.endPrefixMapping(Hn);ji||ne.fatalError("end tag name: "+Pn+" is not match the current start tagName:"+os.tagName)}else st.push(os);Ie++;break;case"?":qe&&Dt(pn),Ie=Ct(Re,pn,Wt);break;case"!":qe&&Dt(pn),Ie=et(Re,pn,Wt,ne);break;default:qe&&Dt(pn);var P=new mt,le=st[st.length-1].currentNSMap,_t=(Ie=St(Re,pn,P,le,It,ne),P.length);if(!P.closed&&xe(Re,Ie,P.tagName,ln)&&(P.closed=!0,Ye.nbsp||ne.warning("unclosed xml attribute")),qe&&_t){for(var sn=be(qe,{}),Dn=0;Dn<_t;Dn++){var Bn=P[Dn];Dt(Bn.offset),Bn.locator=be(qe,{})}Wt.locator=sn,ee(P,Wt,le)&&st.push(P),Wt.locator=qe}else ee(P,Wt,le)&&st.push(P);ce.isHTML(P.uri)&&!P.closed?Ie=ve(Re,Ie,P.tagName,It,Wt):Ie++}}catch(Jt){if(Jt instanceof se)throw Jt;ne.error("element parse error: "+Jt),Ie=-1}Ie>Xt?Xt=Ie:kt(Math.max(pn,Xt)+1)}}(Re,$e,Ye,Wt,this.errorHandler),Wt.endDocument()}},mt.prototype={setTagName:function(Re){if(!lt.test(Re))throw new Error("invalid tagName:"+Re);this.tagName=Re},addValue:function(Re,$e,Ye){if(!lt.test(Re))throw new Error("invalid attribute:"+Re);this.attributeNames[Re]=this.length,this[this.length++]={qName:Re,value:$e,offset:Ye}},length:0,getLocalName:function(Re){return this[Re].localName},getLocator:function(Re){return this[Re].locator},getQName:function(Re){return this[Re].qName},getURI:function(Re){return this[Re].uri},getValue:function(Re){return this[Re].value}},at.XMLReader=q,at.ParseError=se},3450:(Fn,at)=>{"use strict";at.byteLength=function ge(se){var q=_(se),be=q[1];return 3*(q[0]+be)/4-be},at.toByteArray=function Oe(se){var q,Ee,ae=_(se),be=ae[0],St=ae[1],ee=new Ue(function p(se,q,ae){return 3*(q+ae)/4-ae}(0,be,St)),ve=0,xe=St>0?be-4:be;for(Ee=0;Ee<xe;Ee+=4)q=ce[se.charCodeAt(Ee)]<<18|ce[se.charCodeAt(Ee+1)]<<12|ce[se.charCodeAt(Ee+2)]<<6|ce[se.charCodeAt(Ee+3)],ee[ve++]=q>>16&255,ee[ve++]=q>>8&255,ee[ve++]=255&q;return 2===St&&(q=ce[se.charCodeAt(Ee)]<<2|ce[se.charCodeAt(Ee+1)]>>4,ee[ve++]=255&q),1===St&&(q=ce[se.charCodeAt(Ee)]<<10|ce[se.charCodeAt(Ee+1)]<<4|ce[se.charCodeAt(Ee+2)]>>2,ee[ve++]=q>>8&255,ee[ve++]=255&q),ee},at.fromByteArray=function ke(se){for(var q,ae=se.length,be=ae%3,St=[],ve=0,xe=ae-be;ve<xe;ve+=16383)St.push(ue(se,ve,ve+16383>xe?xe:ve+16383));return 1===be?St.push(Ve[(q=se[ae-1])>>2]+Ve[q<<4&63]+"=="):2===be&&St.push(Ve[(q=(se[ae-2]<<8)+se[ae-1])>>10]+Ve[q>>4&63]+Ve[q<<2&63]+"="),St.join("")};for(var Ve=[],ce=[],Ue=typeof Uint8Array<"u"?Uint8Array:Array,Je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lt=0;lt<64;++lt)Ve[lt]=Je[lt],ce[Je.charCodeAt(lt)]=lt;function _(se){var q=se.length;if(q%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=se.indexOf("=");return-1===ae&&(ae=q),[ae,ae===q?0:4-ae%4]}function Xe(se){return Ve[se>>18&63]+Ve[se>>12&63]+Ve[se>>6&63]+Ve[63&se]}function ue(se,q,ae){for(var St=[],ee=q;ee<ae;ee+=3)St.push(Xe((se[ee]<<16&16711680)+(se[ee+1]<<8&65280)+(255&se[ee+2])));return St.join("")}ce[45]=62,ce[95]=63},351:(Fn,at)=>{at.read=function(Ve,ce,Ue,Je,lt){var Pe,_,ge=8*lt-Je-1,p=(1<<ge)-1,Oe=p>>1,Xe=-7,ue=Ue?lt-1:0,ke=Ue?-1:1,se=Ve[ce+ue];for(ue+=ke,Pe=se&(1<<-Xe)-1,se>>=-Xe,Xe+=ge;Xe>0;Pe=256*Pe+Ve[ce+ue],ue+=ke,Xe-=8);for(_=Pe&(1<<-Xe)-1,Pe>>=-Xe,Xe+=Je;Xe>0;_=256*_+Ve[ce+ue],ue+=ke,Xe-=8);if(0===Pe)Pe=1-Oe;else{if(Pe===p)return _?NaN:1/0*(se?-1:1);_+=Math.pow(2,Je),Pe-=Oe}return(se?-1:1)*_*Math.pow(2,Pe-Je)},at.write=function(Ve,ce,Ue,Je,lt,Pe){var _,ge,p,Oe=8*Pe-lt-1,Xe=(1<<Oe)-1,ue=Xe>>1,ke=23===lt?Math.pow(2,-24)-Math.pow(2,-77):0,se=Je?0:Pe-1,q=Je?1:-1,ae=ce<0||0===ce&&1/ce<0?1:0;for(ce=Math.abs(ce),isNaN(ce)||ce===1/0?(ge=isNaN(ce)?1:0,_=Xe):(_=Math.floor(Math.log(ce)/Math.LN2),ce*(p=Math.pow(2,-_))<1&&(_--,p*=2),(ce+=_+ue>=1?ke/p:ke*Math.pow(2,1-ue))*p>=2&&(_++,p/=2),_+ue>=Xe?(ge=0,_=Xe):_+ue>=1?(ge=(ce*p-1)*Math.pow(2,lt),_+=ue):(ge=ce*Math.pow(2,ue-1)*Math.pow(2,lt),_=0));lt>=8;Ve[Ue+se]=255&ge,se+=q,ge/=256,lt-=8);for(_=_<<lt|ge,Oe+=lt;Oe>0;Ve[Ue+se]=255&_,se+=q,_/=256,Oe-=8);Ve[Ue+se-q]|=128*ae}},6148:(Fn,at,Ve)=>{"use strict";const Ue=Ve(3450),Je=Ve(351),lt="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;at.hp=p,at.IS=50;const Pe=2147483647;function ge(L){if(L>Pe)throw new RangeError('The value "'+L+'" is invalid for option "size"');const A=new Uint8Array(L);return Object.setPrototypeOf(A,p.prototype),A}function p(L,A,S){if("number"==typeof L){if("string"==typeof A)throw new TypeError('The "string" argument must be of type string. Received type number');return ke(L)}return Oe(L,A,S)}function Oe(L,A,S){if("string"==typeof L)return function se(L,A){if(("string"!=typeof A||""===A)&&(A="utf8"),!p.isEncoding(A))throw new TypeError("Unknown encoding: "+A);const S=0|xe(L,A);let O=ge(S);const re=O.write(L,A);return re!==S&&(O=O.slice(0,re)),O}(L,A);if(ArrayBuffer.isView(L))return function ae(L){if(qt(L,Uint8Array)){const A=new Uint8Array(L);return be(A.buffer,A.byteOffset,A.byteLength)}return q(L)}(L);if(null==L)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L);if(qt(L,ArrayBuffer)||L&&qt(L.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(qt(L,SharedArrayBuffer)||L&&qt(L.buffer,SharedArrayBuffer)))return be(L,A,S);if("number"==typeof L)throw new TypeError('The "value" argument must not be of type number. Received type number');const O=L.valueOf&&L.valueOf();if(null!=O&&O!==L)return p.from(O,A,S);const re=function St(L){if(p.isBuffer(L)){const A=0|ee(L.length),S=ge(A);return 0===S.length||L.copy(S,0,0,A),S}return void 0!==L.length?"number"!=typeof L.length||En(L.length)?ge(0):q(L):"Buffer"===L.type&&Array.isArray(L.data)?q(L.data):void 0}(L);if(re)return re;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof L[Symbol.toPrimitive])return p.from(L[Symbol.toPrimitive]("string"),A,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof L)}function Xe(L){if("number"!=typeof L)throw new TypeError('"size" argument must be of type number');if(L<0)throw new RangeError('The value "'+L+'" is invalid for option "size"')}function ke(L){return Xe(L),ge(L<0?0:0|ee(L))}function q(L){const A=L.length<0?0:0|ee(L.length),S=ge(A);for(let O=0;O<A;O+=1)S[O]=255&L[O];return S}function be(L,A,S){if(A<0||L.byteLength<A)throw new RangeError('"offset" is outside of buffer bounds');if(L.byteLength<A+(S||0))throw new RangeError('"length" is outside of buffer bounds');let O;return O=void 0===A&&void 0===S?new Uint8Array(L):void 0===S?new Uint8Array(L,A):new Uint8Array(L,A,S),Object.setPrototypeOf(O,p.prototype),O}function ee(L){if(L>=Pe)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Pe.toString(16)+" bytes");return 0|L}function xe(L,A){if(p.isBuffer(L))return L.length;if(ArrayBuffer.isView(L)||qt(L,ArrayBuffer))return L.byteLength;if("string"!=typeof L)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof L);const S=L.length,O=arguments.length>2&&!0===arguments[2];if(!O&&0===S)return 0;let re=!1;for(;;)switch(A){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return _t(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*S;case"hex":return S>>>1;case"base64":return Bn(L).length;default:if(re)return O?-1:_t(L).length;A=(""+A).toLowerCase(),re=!0}}function Ee(L,A,S){let O=!1;if((void 0===A||A<0)&&(A=0),A>this.length||((void 0===S||S>this.length)&&(S=this.length),S<=0)||(S>>>=0)<=(A>>>=0))return"";for(L||(L="utf8");;)switch(L){case"hex":return j(this,A,S);case"utf8":case"utf-8":return De(this,A,S);case"ascii":return Dt(this,A,S);case"latin1":case"binary":return F(this,A,S);case"base64":return ne(this,A,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,A,S);default:if(O)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),O=!0}}function et(L,A,S){const O=L[A];L[A]=L[S],L[S]=O}function Ct(L,A,S,O,re){if(0===L.length)return-1;if("string"==typeof S?(O=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),En(S=+S)&&(S=re?0:L.length-1),S<0&&(S=L.length+S),S>=L.length){if(re)return-1;S=L.length-1}else if(S<0){if(!re)return-1;S=0}if("string"==typeof A&&(A=p.from(A,O)),p.isBuffer(A))return 0===A.length?-1:mt(L,A,S,O,re);if("number"==typeof A)return A&=255,"function"==typeof Uint8Array.prototype.indexOf?re?Uint8Array.prototype.indexOf.call(L,A,S):Uint8Array.prototype.lastIndexOf.call(L,A,S):mt(L,[A],S,O,re);throw new TypeError("val must be string, number or Buffer")}function mt(L,A,S,O,re){let qn,Ae=1,je=L.length,jt=A.length;if(void 0!==O&&("ucs2"===(O=String(O).toLowerCase())||"ucs-2"===O||"utf16le"===O||"utf-16le"===O)){if(L.length<2||A.length<2)return-1;Ae=2,je/=2,jt/=2,S/=2}function er(te,he){return 1===Ae?te[he]:te.readUInt16BE(he*Ae)}if(re){let te=-1;for(qn=S;qn<je;qn++)if(er(L,qn)===er(A,-1===te?0:qn-te)){if(-1===te&&(te=qn),qn-te+1===jt)return te*Ae}else-1!==te&&(qn-=qn-te),te=-1}else for(S+jt>je&&(S=je-jt),qn=S;qn>=0;qn--){let te=!0;for(let he=0;he<jt;he++)if(er(L,qn+he)!==er(A,he)){te=!1;break}if(te)return qn}return-1}function Nt(L,A,S,O){S=Number(S)||0;const re=L.length-S;O?(O=Number(O))>re&&(O=re):O=re;const Ae=A.length;let je;for(O>Ae/2&&(O=Ae/2),je=0;je<O;++je){const jt=parseInt(A.substr(2*je,2),16);if(En(jt))return je;L[S+je]=jt}return je}function Re(L,A,S,O){return Jt(_t(A,L.length-S),L,S,O)}function $e(L,A,S,O){return Jt(function sn(L){const A=[];for(let S=0;S<L.length;++S)A.push(255&L.charCodeAt(S));return A}(A),L,S,O)}function Ye(L,A,S,O){return Jt(Bn(A),L,S,O)}function Wt(L,A,S,O){return Jt(function Dn(L,A){let S,O,re;const Ae=[];for(let je=0;je<L.length&&!((A-=2)<0);++je)S=L.charCodeAt(je),O=S>>8,re=S%256,Ae.push(re),Ae.push(O);return Ae}(A,L.length-S),L,S,O)}function ne(L,A,S){return Ue.fromByteArray(0===A&&S===L.length?L:L.slice(A,S))}function De(L,A,S){S=Math.min(L.length,S);const O=[];let re=A;for(;re<S;){const Ae=L[re];let je=null,jt=Ae>239?4:Ae>223?3:Ae>191?2:1;if(re+jt<=S){let er,qn,te,he;switch(jt){case 1:Ae<128&&(je=Ae);break;case 2:er=L[re+1],128==(192&er)&&(he=(31&Ae)<<6|63&er,he>127&&(je=he));break;case 3:er=L[re+1],qn=L[re+2],128==(192&er)&&128==(192&qn)&&(he=(15&Ae)<<12|(63&er)<<6|63&qn,he>2047&&(he<55296||he>57343)&&(je=he));break;case 4:er=L[re+1],qn=L[re+2],te=L[re+3],128==(192&er)&&128==(192&qn)&&128==(192&te)&&(he=(15&Ae)<<18|(63&er)<<12|(63&qn)<<6|63&te,he>65535&&he<1114112&&(je=he))}}null===je?(je=65533,jt=1):je>65535&&(je-=65536,O.push(je>>>10&1023|55296),je=56320|1023&je),O.push(je),re+=jt}return function kt(L){const A=L.length;if(A<=It)return String.fromCharCode.apply(String,L);let S="",O=0;for(;O<A;)S+=String.fromCharCode.apply(String,L.slice(O,O+=It));return S}(O)}!(p.TYPED_ARRAY_SUPPORT=function _(){try{const L=new Uint8Array(1),A={foo:function(){return 42}};return Object.setPrototypeOf(A,Uint8Array.prototype),Object.setPrototypeOf(L,A),42===L.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(L,A,S){return Oe(L,A,S)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(L,A,S){return function ue(L,A,S){return Xe(L),L<=0?ge(L):void 0!==A?"string"==typeof S?ge(L).fill(A,S):ge(L).fill(A):ge(L)}(L,A,S)},p.allocUnsafe=function(L){return ke(L)},p.allocUnsafeSlow=function(L){return ke(L)},p.isBuffer=function(A){return null!=A&&!0===A._isBuffer&&A!==p.prototype},p.compare=function(A,S){if(qt(A,Uint8Array)&&(A=p.from(A,A.offset,A.byteLength)),qt(S,Uint8Array)&&(S=p.from(S,S.offset,S.byteLength)),!p.isBuffer(A)||!p.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(A===S)return 0;let O=A.length,re=S.length;for(let Ae=0,je=Math.min(O,re);Ae<je;++Ae)if(A[Ae]!==S[Ae]){O=A[Ae],re=S[Ae];break}return O<re?-1:re<O?1:0},p.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(A,S){if(!Array.isArray(A))throw new TypeError('"list" argument must be an Array of Buffers');if(0===A.length)return p.alloc(0);let O;if(void 0===S)for(S=0,O=0;O<A.length;++O)S+=A[O].length;const re=p.allocUnsafe(S);let Ae=0;for(O=0;O<A.length;++O){let je=A[O];if(qt(je,Uint8Array))Ae+je.length>re.length?(p.isBuffer(je)||(je=p.from(je)),je.copy(re,Ae)):Uint8Array.prototype.set.call(re,je,Ae);else{if(!p.isBuffer(je))throw new TypeError('"list" argument must be an Array of Buffers');je.copy(re,Ae)}Ae+=je.length}return re},p.byteLength=xe,p.prototype._isBuffer=!0,p.prototype.swap16=function(){const A=this.length;if(A%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let S=0;S<A;S+=2)et(this,S,S+1);return this},p.prototype.swap32=function(){const A=this.length;if(A%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let S=0;S<A;S+=4)et(this,S,S+3),et(this,S+1,S+2);return this},p.prototype.swap64=function(){const A=this.length;if(A%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let S=0;S<A;S+=8)et(this,S,S+7),et(this,S+1,S+6),et(this,S+2,S+5),et(this,S+3,S+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){const A=this.length;return 0===A?"":0===arguments.length?De(this,0,A):Ee.apply(this,arguments)},p.prototype.equals=function(A){if(!p.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A||0===p.compare(this,A)},p.prototype.inspect=function(){let A="";const S=at.IS;return A=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(A+=" ... "),"<Buffer "+A+">"},lt&&(p.prototype[lt]=p.prototype.inspect),p.prototype.compare=function(A,S,O,re,Ae){if(qt(A,Uint8Array)&&(A=p.from(A,A.offset,A.byteLength)),!p.isBuffer(A))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof A);if(void 0===S&&(S=0),void 0===O&&(O=A?A.length:0),void 0===re&&(re=0),void 0===Ae&&(Ae=this.length),S<0||O>A.length||re<0||Ae>this.length)throw new RangeError("out of range index");if(re>=Ae&&S>=O)return 0;if(re>=Ae)return-1;if(S>=O)return 1;if(this===A)return 0;let je=(Ae>>>=0)-(re>>>=0),jt=(O>>>=0)-(S>>>=0);const er=Math.min(je,jt),qn=this.slice(re,Ae),te=A.slice(S,O);for(let he=0;he<er;++he)if(qn[he]!==te[he]){je=qn[he],jt=te[he];break}return je<jt?-1:jt<je?1:0},p.prototype.includes=function(A,S,O){return-1!==this.indexOf(A,S,O)},p.prototype.indexOf=function(A,S,O){return Ct(this,A,S,O,!0)},p.prototype.lastIndexOf=function(A,S,O){return Ct(this,A,S,O,!1)},p.prototype.write=function(A,S,O,re){if(void 0===S)re="utf8",O=this.length,S=0;else if(void 0===O&&"string"==typeof S)re=S,O=this.length,S=0;else{if(!isFinite(S))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");S>>>=0,isFinite(O)?(O>>>=0,void 0===re&&(re="utf8")):(re=O,O=void 0)}const Ae=this.length-S;if((void 0===O||O>Ae)&&(O=Ae),A.length>0&&(O<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");let je=!1;for(;;)switch(re){case"hex":return Nt(this,A,S,O);case"utf8":case"utf-8":return Re(this,A,S,O);case"ascii":case"latin1":case"binary":return $e(this,A,S,O);case"base64":return Ye(this,A,S,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Wt(this,A,S,O);default:if(je)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),je=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const It=4096;function Dt(L,A,S){let O="";S=Math.min(L.length,S);for(let re=A;re<S;++re)O+=String.fromCharCode(127&L[re]);return O}function F(L,A,S){let O="";S=Math.min(L.length,S);for(let re=A;re<S;++re)O+=String.fromCharCode(L[re]);return O}function j(L,A,S){const O=L.length;(!A||A<0)&&(A=0),(!S||S<0||S>O)&&(S=O);let re="";for(let Ae=A;Ae<S;++Ae)re+=Nn[L[Ae]];return re}function Te(L,A,S){const O=L.slice(A,S);let re="";for(let Ae=0;Ae<O.length-1;Ae+=2)re+=String.fromCharCode(O[Ae]+256*O[Ae+1]);return re}function qe(L,A,S){if(L%1!=0||L<0)throw new RangeError("offset is not uint");if(L+A>S)throw new RangeError("Trying to access beyond buffer length")}function st(L,A,S,O,re,Ae){if(!p.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>re||A<Ae)throw new RangeError('"value" argument is out of bounds');if(S+O>L.length)throw new RangeError("Index out of range")}function ln(L,A,S,O,re){ir(A,O,re,L,S,7);let Ae=Number(A&BigInt(4294967295));L[S++]=Ae,Ae>>=8,L[S++]=Ae,Ae>>=8,L[S++]=Ae,Ae>>=8,L[S++]=Ae;let je=Number(A>>BigInt(32)&BigInt(4294967295));return L[S++]=je,je>>=8,L[S++]=je,je>>=8,L[S++]=je,je>>=8,L[S++]=je,S}function Xt(L,A,S,O,re){ir(A,O,re,L,S,7);let Ae=Number(A&BigInt(4294967295));L[S+7]=Ae,Ae>>=8,L[S+6]=Ae,Ae>>=8,L[S+5]=Ae,Ae>>=8,L[S+4]=Ae;let je=Number(A>>BigInt(32)&BigInt(4294967295));return L[S+3]=je,je>>=8,L[S+2]=je,je>>=8,L[S+1]=je,je>>=8,L[S]=je,S+8}function pn(L,A,S,O,re,Ae){if(S+O>L.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function jr(L,A,S,O,re){return A=+A,S>>>=0,re||pn(L,0,S,4),Je.write(L,A,S,O,23,4),S+4}function Ts(L,A,S,O,re){return A=+A,S>>>=0,re||pn(L,0,S,8),Je.write(L,A,S,O,52,8),S+8}p.prototype.slice=function(A,S){const O=this.length;(A=~~A)<0?(A+=O)<0&&(A=0):A>O&&(A=O),(S=void 0===S?O:~~S)<0?(S+=O)<0&&(S=0):S>O&&(S=O),S<A&&(S=A);const re=this.subarray(A,S);return Object.setPrototypeOf(re,p.prototype),re},p.prototype.readUintLE=p.prototype.readUIntLE=function(A,S,O){A>>>=0,S>>>=0,O||qe(A,S,this.length);let re=this[A],Ae=1,je=0;for(;++je<S&&(Ae*=256);)re+=this[A+je]*Ae;return re},p.prototype.readUintBE=p.prototype.readUIntBE=function(A,S,O){A>>>=0,S>>>=0,O||qe(A,S,this.length);let re=this[A+--S],Ae=1;for(;S>0&&(Ae*=256);)re+=this[A+--S]*Ae;return re},p.prototype.readUint8=p.prototype.readUInt8=function(A,S){return A>>>=0,S||qe(A,1,this.length),this[A]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(A,S){return A>>>=0,S||qe(A,2,this.length),this[A]|this[A+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(A,S){return A>>>=0,S||qe(A,2,this.length),this[A]<<8|this[A+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(A,S){return A>>>=0,S||qe(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+16777216*this[A+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(A,S){return A>>>=0,S||qe(A,4,this.length),16777216*this[A]+(this[A+1]<<16|this[A+2]<<8|this[A+3])},p.prototype.readBigUInt64LE=Rr(function(A){Hn(A>>>=0,"offset");const S=this[A],O=this[A+7];(void 0===S||void 0===O)&&P(A,this.length-8);const re=S+256*this[++A]+65536*this[++A]+this[++A]*2**24,Ae=this[++A]+256*this[++A]+65536*this[++A]+O*2**24;return BigInt(re)+(BigInt(Ae)<<BigInt(32))}),p.prototype.readBigUInt64BE=Rr(function(A){Hn(A>>>=0,"offset");const S=this[A],O=this[A+7];(void 0===S||void 0===O)&&P(A,this.length-8);const re=S*2**24+65536*this[++A]+256*this[++A]+this[++A],Ae=this[++A]*2**24+65536*this[++A]+256*this[++A]+O;return(BigInt(re)<<BigInt(32))+BigInt(Ae)}),p.prototype.readIntLE=function(A,S,O){A>>>=0,S>>>=0,O||qe(A,S,this.length);let re=this[A],Ae=1,je=0;for(;++je<S&&(Ae*=256);)re+=this[A+je]*Ae;return Ae*=128,re>=Ae&&(re-=Math.pow(2,8*S)),re},p.prototype.readIntBE=function(A,S,O){A>>>=0,S>>>=0,O||qe(A,S,this.length);let re=S,Ae=1,je=this[A+--re];for(;re>0&&(Ae*=256);)je+=this[A+--re]*Ae;return Ae*=128,je>=Ae&&(je-=Math.pow(2,8*S)),je},p.prototype.readInt8=function(A,S){return A>>>=0,S||qe(A,1,this.length),128&this[A]?-1*(255-this[A]+1):this[A]},p.prototype.readInt16LE=function(A,S){A>>>=0,S||qe(A,2,this.length);const O=this[A]|this[A+1]<<8;return 32768&O?4294901760|O:O},p.prototype.readInt16BE=function(A,S){A>>>=0,S||qe(A,2,this.length);const O=this[A+1]|this[A]<<8;return 32768&O?4294901760|O:O},p.prototype.readInt32LE=function(A,S){return A>>>=0,S||qe(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},p.prototype.readInt32BE=function(A,S){return A>>>=0,S||qe(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},p.prototype.readBigInt64LE=Rr(function(A){Hn(A>>>=0,"offset");const S=this[A],O=this[A+7];return(void 0===S||void 0===O)&&P(A,this.length-8),(BigInt(this[A+4]+256*this[A+5]+65536*this[A+6]+(O<<24))<<BigInt(32))+BigInt(S+256*this[++A]+65536*this[++A]+this[++A]*2**24)}),p.prototype.readBigInt64BE=Rr(function(A){Hn(A>>>=0,"offset");const S=this[A],O=this[A+7];(void 0===S||void 0===O)&&P(A,this.length-8);const re=(S<<24)+65536*this[++A]+256*this[++A]+this[++A];return(BigInt(re)<<BigInt(32))+BigInt(this[++A]*2**24+65536*this[++A]+256*this[++A]+O)}),p.prototype.readFloatLE=function(A,S){return A>>>=0,S||qe(A,4,this.length),Je.read(this,A,!0,23,4)},p.prototype.readFloatBE=function(A,S){return A>>>=0,S||qe(A,4,this.length),Je.read(this,A,!1,23,4)},p.prototype.readDoubleLE=function(A,S){return A>>>=0,S||qe(A,8,this.length),Je.read(this,A,!0,52,8)},p.prototype.readDoubleBE=function(A,S){return A>>>=0,S||qe(A,8,this.length),Je.read(this,A,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(A,S,O,re){A=+A,S>>>=0,O>>>=0,re||st(this,A,S,O,Math.pow(2,8*O)-1,0);let Ae=1,je=0;for(this[S]=255&A;++je<O&&(Ae*=256);)this[S+je]=A/Ae&255;return S+O},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(A,S,O,re){A=+A,S>>>=0,O>>>=0,re||st(this,A,S,O,Math.pow(2,8*O)-1,0);let Ae=O-1,je=1;for(this[S+Ae]=255&A;--Ae>=0&&(je*=256);)this[S+Ae]=A/je&255;return S+O},p.prototype.writeUint8=p.prototype.writeUInt8=function(A,S,O){return A=+A,S>>>=0,O||st(this,A,S,1,255,0),this[S]=255&A,S+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(A,S,O){return A=+A,S>>>=0,O||st(this,A,S,2,65535,0),this[S]=255&A,this[S+1]=A>>>8,S+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(A,S,O){return A=+A,S>>>=0,O||st(this,A,S,2,65535,0),this[S]=A>>>8,this[S+1]=255&A,S+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(A,S,O){return A=+A,S>>>=0,O||st(this,A,S,4,4294967295,0),this[S+3]=A>>>24,this[S+2]=A>>>16,this[S+1]=A>>>8,this[S]=255&A,S+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(A,S,O){return A=+A,S>>>=0,O||st(this,A,S,4,4294967295,0),this[S]=A>>>24,this[S+1]=A>>>16,this[S+2]=A>>>8,this[S+3]=255&A,S+4},p.prototype.writeBigUInt64LE=Rr(function(A,S=0){return ln(this,A,S,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=Rr(function(A,S=0){return Xt(this,A,S,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(A,S,O,re){if(A=+A,S>>>=0,!re){const er=Math.pow(2,8*O-1);st(this,A,S,O,er-1,-er)}let Ae=0,je=1,jt=0;for(this[S]=255&A;++Ae<O&&(je*=256);)A<0&&0===jt&&0!==this[S+Ae-1]&&(jt=1),this[S+Ae]=(A/je|0)-jt&255;return S+O},p.prototype.writeIntBE=function(A,S,O,re){if(A=+A,S>>>=0,!re){const er=Math.pow(2,8*O-1);st(this,A,S,O,er-1,-er)}let Ae=O-1,je=1,jt=0;for(this[S+Ae]=255&A;--Ae>=0&&(je*=256);)A<0&&0===jt&&0!==this[S+Ae+1]&&(jt=1),this[S+Ae]=(A/je|0)-jt&255;return S+O},p.prototype.writeInt8=function(A,S,O){return A=+A,S>>>=0,O||st(this,A,S,1,127,-128),A<0&&(A=255+A+1),this[S]=255&A,S+1},p.prototype.writeInt16LE=function(A,S,O){return A=+A,S>>>=0,O||st(this,A,S,2,32767,-32768),this[S]=255&A,this[S+1]=A>>>8,S+2},p.prototype.writeInt16BE=function(A,S,O){return A=+A,S>>>=0,O||st(this,A,S,2,32767,-32768),this[S]=A>>>8,this[S+1]=255&A,S+2},p.prototype.writeInt32LE=function(A,S,O){return A=+A,S>>>=0,O||st(this,A,S,4,2147483647,-2147483648),this[S]=255&A,this[S+1]=A>>>8,this[S+2]=A>>>16,this[S+3]=A>>>24,S+4},p.prototype.writeInt32BE=function(A,S,O){return A=+A,S>>>=0,O||st(this,A,S,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),this[S]=A>>>24,this[S+1]=A>>>16,this[S+2]=A>>>8,this[S+3]=255&A,S+4},p.prototype.writeBigInt64LE=Rr(function(A,S=0){return ln(this,A,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=Rr(function(A,S=0){return Xt(this,A,S,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(A,S,O){return jr(this,A,S,!0,O)},p.prototype.writeFloatBE=function(A,S,O){return jr(this,A,S,!1,O)},p.prototype.writeDoubleLE=function(A,S,O){return Ts(this,A,S,!0,O)},p.prototype.writeDoubleBE=function(A,S,O){return Ts(this,A,S,!1,O)},p.prototype.copy=function(A,S,O,re){if(!p.isBuffer(A))throw new TypeError("argument should be a Buffer");if(O||(O=0),!re&&0!==re&&(re=this.length),S>=A.length&&(S=A.length),S||(S=0),re>0&&re<O&&(re=O),re===O||0===A.length||0===this.length)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),A.length-S<re-O&&(re=A.length-S+O);const Ae=re-O;return this===A&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(S,O,re):Uint8Array.prototype.set.call(A,this.subarray(O,re),S),Ae},p.prototype.fill=function(A,S,O,re){if("string"==typeof A){if("string"==typeof S?(re=S,S=0,O=this.length):"string"==typeof O&&(re=O,O=this.length),void 0!==re&&"string"!=typeof re)throw new TypeError("encoding must be a string");if("string"==typeof re&&!p.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if(1===A.length){const je=A.charCodeAt(0);("utf8"===re&&je<128||"latin1"===re)&&(A=je)}}else"number"==typeof A?A&=255:"boolean"==typeof A&&(A=Number(A));if(S<0||this.length<S||this.length<O)throw new RangeError("Out of range index");if(O<=S)return this;let Ae;if(S>>>=0,O=void 0===O?this.length:O>>>0,A||(A=0),"number"==typeof A)for(Ae=S;Ae<O;++Ae)this[Ae]=A;else{const je=p.isBuffer(A)?A:p.from(A,re),jt=je.length;if(0===jt)throw new TypeError('The value "'+A+'" is invalid for argument "value"');for(Ae=0;Ae<O-S;++Ae)this[Ae+S]=je[Ae%jt]}return this};const Pn={};function os(L,A,S){Pn[L]=class extends S{constructor(){super(),Object.defineProperty(this,"message",{value:A.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${L}]`,delete this.name}get code(){return L}set code(re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:re,writable:!0})}toString(){return`${this.name} [${L}]: ${this.message}`}}}function Zs(L){let A="",S=L.length;const O="-"===L[0]?1:0;for(;S>=O+4;S-=3)A=`_${L.slice(S-3,S)}${A}`;return`${L.slice(0,S)}${A}`}function ir(L,A,S,O,re,Ae){if(L>S||L<A){const je="bigint"==typeof A?"n":"";let jt;throw jt=Ae>3?0===A||A===BigInt(0)?`>= 0${je} and < 2${je} ** ${8*(Ae+1)}${je}`:`>= -(2${je} ** ${8*(Ae+1)-1}${je}) and < 2 ** ${8*(Ae+1)-1}${je}`:`>= ${A}${je} and <= ${S}${je}`,new Pn.ERR_OUT_OF_RANGE("value",jt,L)}!function ji(L,A,S){Hn(A,"offset"),(void 0===L[A]||void 0===L[A+S])&&P(A,L.length-(S+1))}(O,re,Ae)}function Hn(L,A){if("number"!=typeof L)throw new Pn.ERR_INVALID_ARG_TYPE(A,"number",L)}function P(L,A,S){throw Math.floor(L)!==L?(Hn(L,S),new Pn.ERR_OUT_OF_RANGE(S||"offset","an integer",L)):A<0?new Pn.ERR_BUFFER_OUT_OF_BOUNDS:new Pn.ERR_OUT_OF_RANGE(S||"offset",`>= ${S?1:0} and <= ${A}`,L)}os("ERR_BUFFER_OUT_OF_BOUNDS",function(L){return L?`${L} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),os("ERR_INVALID_ARG_TYPE",function(L,A){return`The "${L}" argument must be of type number. Received type ${typeof A}`},TypeError),os("ERR_OUT_OF_RANGE",function(L,A,S){let O=`The value of "${L}" is out of range.`,re=S;return Number.isInteger(S)&&Math.abs(S)>2**32?re=Zs(String(S)):"bigint"==typeof S&&(re=String(S),(S>BigInt(2)**BigInt(32)||S<-(BigInt(2)**BigInt(32)))&&(re=Zs(re)),re+="n"),O+=` It must be ${A}. Received ${re}`,O},RangeError);const le=/[^+/0-9A-Za-z-_]/g;function _t(L,A){let S;A=A||1/0;const O=L.length;let re=null;const Ae=[];for(let je=0;je<O;++je){if(S=L.charCodeAt(je),S>55295&&S<57344){if(!re){if(S>56319){(A-=3)>-1&&Ae.push(239,191,189);continue}if(je+1===O){(A-=3)>-1&&Ae.push(239,191,189);continue}re=S;continue}if(S<56320){(A-=3)>-1&&Ae.push(239,191,189),re=S;continue}S=65536+(re-55296<<10|S-56320)}else re&&(A-=3)>-1&&Ae.push(239,191,189);if(re=null,S<128){if((A-=1)<0)break;Ae.push(S)}else if(S<2048){if((A-=2)<0)break;Ae.push(S>>6|192,63&S|128)}else if(S<65536){if((A-=3)<0)break;Ae.push(S>>12|224,S>>6&63|128,63&S|128)}else{if(!(S<1114112))throw new Error("Invalid code point");if((A-=4)<0)break;Ae.push(S>>18|240,S>>12&63|128,S>>6&63|128,63&S|128)}}return Ae}function Bn(L){return Ue.toByteArray(function Ie(L){if((L=(L=L.split("=")[0]).trim().replace(le,"")).length<2)return"";for(;L.length%4!=0;)L+="=";return L}(L))}function Jt(L,A,S,O){let re;for(re=0;re<O&&!(re+S>=A.length||re>=L.length);++re)A[re+S]=L[re];return re}function qt(L,A){return L instanceof A||null!=L&&null!=L.constructor&&null!=L.constructor.name&&L.constructor.name===A.name}function En(L){return L!=L}const Nn=function(){const L="0123456789abcdef",A=new Array(256);for(let S=0;S<16;++S){const O=16*S;for(let re=0;re<16;++re)A[O+re]=L[S]+L[re]}return A}();function Rr(L){return typeof BigInt>"u"?fs:L}function fs(){throw new Error("BigInt not supported")}},9423:(Fn,at,Ve)=>{"use strict";Ve.d(at,{A:()=>Ue});const Ue={Literal:1,Collection:3,Graph:4,NamedNode:5,BlankNode:6,Variable:7}},1752:(Fn,at,Ve)=>{"use strict";Ve.d(at,{A:()=>ge});var ce=Ve(1423),Ue=Ve(9423),Je=Ve(9788),lt=Ve(9535),Pe=Ve(79),_=Ve(1551);class ge extends Je.A{constructor(Oe){if(super((0,Pe.E)(Oe)),(0,ce.A)(this,"termType",lt.Kk),(0,ce.A)(this,"classOrder",Ue.A.NamedNode),!this.value)throw new Error("Missing IRI for NamedNode");if(!this.value.includes(":"))throw new Error('NamedNode IRI "'+Oe+'" must be absolute.');if(this.value.includes(" "))throw new Error('Error: NamedNode IRI "'+Oe+'" must not contain unencoded spaces.')}dir(){var Oe=this.value.split("#")[0],Xe=Oe.slice(0,-1).lastIndexOf("/"),ue=Oe.indexOf("//");return ue>=0&&Xe<ue+2||Xe<0?null:new ge(Oe.slice(0,Xe+1))}site(){var Oe=this.value.split("#")[0],Xe=Oe.indexOf("//");if(Xe<0)throw new Error("This URI does not have a web site part (origin)");var ue=Oe.indexOf("/",Xe+2);return new ge(ue<0?Oe.slice(0)+"/":Oe.slice(0,ue+1))}doc(){return this.value.indexOf("#")<0?this:new ge(this.value.split("#")[0])}toString(){return"<"+this.value+">"}id(){return this.value.split("#")[1]}get uri(){return this.value}set uri(Oe){this.value=Oe}static fromValue(Oe){return typeof Oe>"u"||null===Oe||(0,_.D0)(Oe)?Oe:new ge(Oe)}}},9788:(Fn,at,Ve)=>{"use strict";Ve.d(at,{A:()=>Ue});var ce=Ve(1423);class Ue{constructor(lt){(0,ce.A)(this,"termType",void 0),(0,ce.A)(this,"classOrder",void 0),(0,ce.A)(this,"value",void 0),this.value=lt}substitute(lt){return this}compareTerm(lt){return this.classOrder<lt.classOrder?-1:this.classOrder>lt.classOrder?1:this.value<lt.value?-1:this.value>lt.value?1:0}equals(lt){return!!lt&&this.termType===lt.termType&&this.value===lt.value}hashString(){return this.toCanonical()}sameTerm(lt){return this.equals(lt)}toCanonical(){return this.toNT()}toNT(){return this.toString()}toNQ(){return this.toNT()}toString(){throw new Error("Node.toString() is abstract - see the subclasses instead")}}(0,ce.A)(Ue,"fromValue",void 0),(0,ce.A)(Ue,"toJS",void 0)},9535:(Fn,at,Ve)=>{"use strict";Ve.d(at,{$Q:()=>Ue,BR:()=>se,Fn:()=>ee,H:()=>Ee,JG:()=>be,K9:()=>St,Kk:()=>ce,MG:()=>ke,P2:()=>lt,QW:()=>Je,S:()=>ge,_0:()=>q,bD:()=>p,bM:()=>ae,hu:()=>xe,i2:()=>Xe,ic:()=>Pe,lc:()=>Oe,ny:()=>ue,r0:()=>_,sT:()=>ve});const ce="NamedNode",Ue="BlankNode",Je="Literal",lt="Variable",Pe="DefaultGraph",_="Collection",ge="Empty",p="Graph",Oe="text/html",Xe="application/ld+json",ue="text/n3",ke="application/n3",se="application/nquads",q="application/n-quads",ae="application/n-triples",be="application/rdf+xml",St="application/sparql-update",ee="application/sparql-update-single-match",ve="text/turtle",xe="application/x-turtle",Ee="application/xhtml+xml"},9223:(Fn,at,Ve)=>{"use strict";Ve.d(at,{Kw:()=>_,Uz:()=>ae,VQ:()=>ke,h4:()=>q,jI:()=>p,tE:()=>lt,uN:()=>ee});var ce=Ve(1752),Ue=Ve(2502);function lt(ve){return ve=ve.split(";")[0].trim(),new ce.A("http://www.w3.org/ns/iana/media-types/"+ve+"#Resource")}function _(ve,xe){ve.callbacks={};for(var Ee=xe.length-1;Ee>=0;Ee--)ve.callbacks[xe[Ee]]=[];ve.addHook=function(et){ve.callbacks[et]||(ve.callbacks[et]=[])},ve.addCallback=function(et,Ct){ve.callbacks[et].push(Ct)},ve.removeCallback=function(et,Ct){for(var mt=0;mt<ve.callbacks[et].length;mt++)if(ve.callbacks[et][mt].name===Ct)return ve.callbacks[et].splice(mt,1),!0;return!1},ve.insertCallback=function(et,Ct){ve.callbacks[et].unshift(Ct)},ve.fireCallbacks=function(Ct,mt){var Ye,Nt=[],Re=[],$e=ve.callbacks[Ct].length;let Wt;for(Ye=$e-1;Ye>=0;Ye--)Wt=ve.callbacks[Ct][Ye],Wt&&Wt.apply(ve,mt)&&Nt.push(Wt);for(Ye=Nt.length-1;Ye>=0;Ye--)Re.push(Nt[Ye]);for(Ye=$e;Ye<ve.callbacks[Ct].length;Ye++)Re.push(ve.callbacks[Ct][Ye]);ve.callbacks[Ct]=Re}}function p(ve,xe){var Ee=[];(xe=xe||{})&&xe.selfClosing&&xe.selfClosing.split(" ").forEach(function(Ct){Ee[Ct]=!0});var et=[];return xe&&xe.skipAttributes&&xe.skipAttributes.split(" ").forEach(function(Ct){et[Ct]=!0}),Oe(ve,xe,Ee,et)}function Oe(ve,xe,Ee,et){var Ct,mt="",Nt=[!1];if(typeof ve.nodeType>"u")return mt;if(1===ve.nodeType){if(ve.hasAttribute("class")&&xe&&xe.classWithChildText&&ve.matches(xe.classWithChildText.class))mt+=ve.querySelector(xe.classWithChildText.element).textContent;else if(!(xe&&xe.skipNodeWithClass&&ve.matches("."+xe.skipNodeWithClass))){var Re=ve.nodeName.toLowerCase();mt+="<"+Re;var $e=[];for(Ct=ve.attributes.length-1;Ct>=0;Ct--){var Ye=ve.attributes[Ct];if(!(et&&et.length>0&&et[Ye.name]||/^\d+$/.test(Ye.name))){if("class"===Ye.name&&xe&&xe.replaceClassItemWith&&Ye.value.split(" ").indexOf(xe.replaceClassItemWith.source)>-1){var Wt=new RegExp(xe.replaceClassItemWith.source,"g");Ye.value=Ye.value.replace(Wt,xe.replaceClassItemWith.target).trim()}"class"===Ye.name&&xe&&xe.skipClassWithValue&&xe.skipClassWithValue===Ye.value||$e.push(Ye.name+"='"+Ye.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if($e.length>0&&(xe&&xe.sortAttributes&&$e.sort(function(De,It){return De.toLowerCase().localeCompare(It.toLowerCase())}),mt+=" "+$e.join(" ")),Ee&&Ee.ename)mt+=" />";else{for(mt+=">",mt+="html"===Re?"\n  ":"",Nt.push("style"===Re||"script"===Re),Ct=0;Ct<ve.childNodes.length;Ct++)mt+=Oe(ve.childNodes[Ct]);Nt.pop(),mt+="body"===Re?"</"+Re+">\n":"</"+Re+">"}}}else if(8===ve.nodeType)mt+="\x3c!--"+ve.nodeValue+"--\x3e";else if(3===ve.nodeType||4===ve.nodeType){var ne=ve.nodeValue.replace(/\n+$/,"");mt+=Nt[Nt.length-1]?ne:ne.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+ve.nodeType),console.log(ve);return mt}function ue(ve,xe,Ee,et){var Ct=function(Re){return"BlankNode"===Re.termType?null:Re},mt=function(Re){var $e=Ee.statementsMatching(Re).map(function(Ye){return Ct(Ye.subject)+" "+Ct(Ye.predicate)+" "+Ct(Ye.object)}).concat(Ee.statementsMatching(void 0,void 0,Re).map(function(Ye){return Ct(Ye.subject)+" "+Ct(Ye.predicate)+" "+Ct(Ye.object)}));return $e.sort(),$e.join("\n")};const Nt=Object.prototype.hasOwnProperty.call(Ee,"compareTerms")?Ee.compareTerms(ve,xe):ve.compareTerm(xe);return"BlankNode"===ve.termType&&"BlankNode"===xe.termType?0===Nt?0:mt(ve)>mt(xe)?1:mt(ve)<mt(xe)?-1:Nt:et&&ve.uri&&xe.uri?(et[ve.uri]||ve.uri).localeCompare(et[xe.uri]||xe.uri):Nt}function ke(ve,xe,Ee,et){return ue(ve.subject,xe.subject,Ee,et)||ue(ve.predicate,xe.predicate,Ee,et)||ue(ve.object,xe.object,Ee,et)}function q(ve,xe){return xe=xe||{},Fn&&Fn.exports?(new Ue.DOMParser).parseFromString(ve,xe.contentType||"application/xhtml+xml"):(typeof window<"u"&&window.DOMParser?new window.DOMParser:new Ue.DOMParser).parseFromString(ve,"application/xml")}function ae(ve,xe){for(var Ee=0;Ee<ve.length;Ee++)if(ve[Ee].subject.equals(xe.subject)&&ve[Ee].predicate.equals(xe.predicate)&&ve[Ee].object.equals(xe.object)&&ve[Ee].why.equals(xe.why))return void ve.splice(Ee,1);throw new Error("RDFArrayRemove: Array did not contain "+xe+" "+xe.why)}function ee(ve){var xe=ve+"\n";if(!ve.stack)return xe+"No stack available.\n";for(var Ee=ve.stack.toString().split("\n"),et=[],Ct=0;Ct<Ee.length;Ct++){var mt=Ee[Ct];if(mt.indexOf("ecmaunit.js")>-1)break;"("==mt.charAt(0)&&(mt="function"+mt);var Nt=mt.split("@");et.push(Nt)}for(Ct=0;Ct<et.length;Ct++)xe+="  "+et[Ct][1]+"\n    "+et[Ct][0];return xe}Fn=Ve.hmd(Fn)},79:(Fn,at,Ve)=>{"use strict";function ce(Ue){return"string"==typeof Ue?Ue:Ue.value}Ve.d(at,{E:()=>ce})},1551:(Fn,at,Ve)=>{"use strict";Ve.d(at,{CZ:()=>_,D0:()=>Oe,DJ:()=>Pe,DZ:()=>p,P3:()=>lt,RN:()=>St,SH:()=>Ue,Y2:()=>ke,aF:()=>ue,c$:()=>Xe,fY:()=>ge,jt:()=>se,ok:()=>Je});var ce=Ve(9535);function Ue(ee){return"object"==typeof ee&&null!==ee&&"subject"in ee}function Je(ee){return"object"==typeof ee&&null!==ee&&"statements"in ee}function lt(ee){return Oe(ee)&&ee.termType===ce.r0}function Pe(ee){return ee&&Object.prototype.hasOwnProperty.call(ee,"termType")&&(ee.termType===ce.Kk||ee.termType===ce.P2||ee.termType===ce.$Q||ee.termType===ce.r0||ee.termType===ce.QW||ee.termType===ce.bD)}function _(ee){return ee&&Object.prototype.hasOwnProperty.call(ee,"termType")&&(ee.termType===ce.Kk||ee.termType===ce.P2||ee.termType===ce.$Q||ee.termType===ce.r0||ee.termType===ce.QW||ee.termType===ce.bD)}function ge(ee){return Oe(ee)&&(ee.termType===ce.Kk||ee.termType===ce.$Q||ee.termType===ce.P2)}function p(ee){return Oe(ee)&&ee.termType===ce.P2}function Oe(ee){return"object"==typeof ee&&null!==ee&&"termType"in ee}function Xe(ee){return ee.termType===ce.QW}function ue(ee){return"object"==typeof ee&&null!==ee&&"subject"in ee&&"predicate"in ee&&"object"in ee}function ke(ee){return Oe(ee)&&"NamedNode"===ee.termType}function se(ee){return Oe(ee)&&"termType"in ee&&"BlankNode"===ee.termType}function St(ee){return Oe(ee)&&(ee.termType===ce.Kk||ee.termType===ce.P2||ee.termType===ce.$Q||ee.termType===ce.ic)}},8868:(Fn,at)=>{var Je,Ve=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global,ce=function(){function Je(){this.fetch=!1,this.DOMException=Ve.DOMException}return Je.prototype=Ve,new Je}();Je=ce,function(Pe){var _=typeof Je<"u"&&Je||typeof self<"u"&&self||typeof global<"u"&&global||{},ge_searchParams="URLSearchParams"in _,ge_iterable="Symbol"in _&&"iterator"in Symbol,ge_blob="FileReader"in _&&"Blob"in _&&function(){try{return new Blob,!0}catch{return!1}}(),ge_formData="FormData"in _,ge_arrayBuffer="ArrayBuffer"in _;if(ge_arrayBuffer)var Oe=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Xe=ArrayBuffer.isView||function(ne){return ne&&Oe.indexOf(Object.prototype.toString.call(ne))>-1};function ue(ne){if("string"!=typeof ne&&(ne=String(ne)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(ne)||""===ne)throw new TypeError('Invalid character in header field name: "'+ne+'"');return ne.toLowerCase()}function ke(ne){return"string"!=typeof ne&&(ne=String(ne)),ne}function se(ne){var De={next:function(){var It=ne.shift();return{done:void 0===It,value:It}}};return ge_iterable&&(De[Symbol.iterator]=function(){return De}),De}function q(ne){this.map={},ne instanceof q?ne.forEach(function(De,It){this.append(It,De)},this):Array.isArray(ne)?ne.forEach(function(De){if(2!=De.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+De.length);this.append(De[0],De[1])},this):ne&&Object.getOwnPropertyNames(ne).forEach(function(De){this.append(De,ne[De])},this)}function ae(ne){if(!ne._noBody){if(ne.bodyUsed)return Promise.reject(new TypeError("Already read"));ne.bodyUsed=!0}}function be(ne){return new Promise(function(De,It){ne.onload=function(){De(ne.result)},ne.onerror=function(){It(ne.error)}})}function St(ne){var De=new FileReader,It=be(De);return De.readAsArrayBuffer(ne),It}function xe(ne){if(ne.slice)return ne.slice(0);var De=new Uint8Array(ne.byteLength);return De.set(new Uint8Array(ne)),De.buffer}function Ee(){return this.bodyUsed=!1,this._initBody=function(ne){this.bodyUsed=this.bodyUsed,this._bodyInit=ne,ne?"string"==typeof ne?this._bodyText=ne:ge_blob&&Blob.prototype.isPrototypeOf(ne)?this._bodyBlob=ne:ge_formData&&FormData.prototype.isPrototypeOf(ne)?this._bodyFormData=ne:ge_searchParams&&URLSearchParams.prototype.isPrototypeOf(ne)?this._bodyText=ne.toString():ge_arrayBuffer&&ge_blob&&function p(ne){return ne&&DataView.prototype.isPrototypeOf(ne)}(ne)?(this._bodyArrayBuffer=xe(ne.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):ge_arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(ne)||Xe(ne))?this._bodyArrayBuffer=xe(ne):this._bodyText=ne=Object.prototype.toString.call(ne):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof ne?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):ge_searchParams&&URLSearchParams.prototype.isPrototypeOf(ne)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},ge_blob&&(this.blob=function(){var ne=ae(this);if(ne)return ne;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return ae(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(ge_blob)return this.blob().then(St);throw new Error("could not read as ArrayBuffer")},this.text=function(){var ne=ae(this);if(ne)return ne;if(this._bodyBlob)return function ee(ne){var De=new FileReader,It=be(De),kt=/charset=([A-Za-z0-9_-]+)/.exec(ne.type);return De.readAsText(ne,kt?kt[1]:"utf-8"),It}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function ve(ne){for(var De=new Uint8Array(ne),It=new Array(De.length),kt=0;kt<De.length;kt++)It[kt]=String.fromCharCode(De[kt]);return It.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},ge_formData&&(this.formData=function(){return this.text().then(Nt)}),this.json=function(){return this.text().then(JSON.parse)},this}q.prototype.append=function(ne,De){ne=ue(ne),De=ke(De);var It=this.map[ne];this.map[ne]=It?It+", "+De:De},q.prototype.delete=function(ne){delete this.map[ue(ne)]},q.prototype.get=function(ne){return ne=ue(ne),this.has(ne)?this.map[ne]:null},q.prototype.has=function(ne){return this.map.hasOwnProperty(ue(ne))},q.prototype.set=function(ne,De){this.map[ue(ne)]=ke(De)},q.prototype.forEach=function(ne,De){for(var It in this.map)this.map.hasOwnProperty(It)&&ne.call(De,this.map[It],It,this)},q.prototype.keys=function(){var ne=[];return this.forEach(function(De,It){ne.push(It)}),se(ne)},q.prototype.values=function(){var ne=[];return this.forEach(function(De){ne.push(De)}),se(ne)},q.prototype.entries=function(){var ne=[];return this.forEach(function(De,It){ne.push([It,De])}),se(ne)},ge_iterable&&(q.prototype[Symbol.iterator]=q.prototype.entries);var et=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function mt(ne,De){if(!(this instanceof mt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var It=(De=De||{}).body;if(ne instanceof mt){if(ne.bodyUsed)throw new TypeError("Already read");this.url=ne.url,this.credentials=ne.credentials,De.headers||(this.headers=new q(ne.headers)),this.method=ne.method,this.mode=ne.mode,this.signal=ne.signal,!It&&null!=ne._bodyInit&&(It=ne._bodyInit,ne.bodyUsed=!0)}else this.url=String(ne);if(this.credentials=De.credentials||this.credentials||"same-origin",(De.headers||!this.headers)&&(this.headers=new q(De.headers)),this.method=function Ct(ne){var De=ne.toUpperCase();return et.indexOf(De)>-1?De:ne}(De.method||this.method||"GET"),this.mode=De.mode||this.mode||null,this.signal=De.signal||this.signal||function(){if("AbortController"in _)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&It)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(It),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==De.cache&&"no-cache"!==De.cache)){var kt=/([?&])_=[^&]*/;kt.test(this.url)?this.url=this.url.replace(kt,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function Nt(ne){var De=new FormData;return ne.trim().split("&").forEach(function(It){if(It){var kt=It.split("="),Dt=kt.shift().replace(/\+/g," "),F=kt.join("=").replace(/\+/g," ");De.append(decodeURIComponent(Dt),decodeURIComponent(F))}}),De}function Re(ne){var De=new q;return ne.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(kt){return 0===kt.indexOf("\n")?kt.substr(1,kt.length):kt}).forEach(function(kt){var Dt=kt.split(":"),F=Dt.shift().trim();if(F){var j=Dt.join(":").trim();try{De.append(F,j)}catch(Te){console.warn("Response "+Te.message)}}}),De}function $e(ne,De){if(!(this instanceof $e))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(De||(De={}),this.type="default",this.status=void 0===De.status?200:De.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===De.statusText?"":""+De.statusText,this.headers=new q(De.headers),this.url=De.url||"",this._initBody(ne)}mt.prototype.clone=function(){return new mt(this,{body:this._bodyInit})},Ee.call(mt.prototype),Ee.call($e.prototype),$e.prototype.clone=function(){return new $e(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new q(this.headers),url:this.url})},$e.error=function(){var ne=new $e(null,{status:200,statusText:""});return ne.ok=!1,ne.status=0,ne.type="error",ne};var Ye=[301,302,303,307,308];$e.redirect=function(ne,De){if(-1===Ye.indexOf(De))throw new RangeError("Invalid status code");return new $e(null,{status:De,headers:{location:ne}})},Pe.DOMException=_.DOMException;try{new Pe.DOMException}catch{Pe.DOMException=function(De,It){this.message=De,this.name=It;var kt=Error(De);this.stack=kt.stack},Pe.DOMException.prototype=Object.create(Error.prototype),Pe.DOMException.prototype.constructor=Pe.DOMException}function Wt(ne,De){return new Promise(function(It,kt){var Dt=new mt(ne,De);if(Dt.signal&&Dt.signal.aborted)return kt(new Pe.DOMException("Aborted","AbortError"));var F=new XMLHttpRequest;function j(){F.abort()}if(F.onload=function(){var st={statusText:F.statusText,headers:Re(F.getAllResponseHeaders()||"")};st.status=0===Dt.url.indexOf("file://")&&(F.status<200||F.status>599)?200:F.status,st.url="responseURL"in F?F.responseURL:st.headers.get("X-Request-URL");var ln="response"in F?F.response:F.responseText;setTimeout(function(){It(new $e(ln,st))},0)},F.onerror=function(){setTimeout(function(){kt(new TypeError("Network request failed"))},0)},F.ontimeout=function(){setTimeout(function(){kt(new TypeError("Network request timed out"))},0)},F.onabort=function(){setTimeout(function(){kt(new Pe.DOMException("Aborted","AbortError"))},0)},F.open(Dt.method,function Te(st){try{return""===st&&_.location.href?_.location.href:st}catch{return st}}(Dt.url),!0),"include"===Dt.credentials?F.withCredentials=!0:"omit"===Dt.credentials&&(F.withCredentials=!1),"responseType"in F&&(ge_blob?F.responseType="blob":ge_arrayBuffer&&(F.responseType="arraybuffer")),De&&"object"==typeof De.headers&&!(De.headers instanceof q||_.Headers&&De.headers instanceof _.Headers)){var qe=[];Object.getOwnPropertyNames(De.headers).forEach(function(st){qe.push(ue(st)),F.setRequestHeader(st,ke(De.headers[st]))}),Dt.headers.forEach(function(st,ln){-1===qe.indexOf(ln)&&F.setRequestHeader(ln,st)})}else Dt.headers.forEach(function(st,ln){F.setRequestHeader(ln,st)});Dt.signal&&(Dt.signal.addEventListener("abort",j),F.onreadystatechange=function(){4===F.readyState&&Dt.signal.removeEventListener("abort",j)}),F.send(typeof Dt._bodyInit>"u"?null:Dt._bodyInit)})}Wt.polyfill=!0,_.fetch||(_.fetch=Wt,_.Headers=q,_.Request=mt,_.Response=$e),Pe.Headers=q,Pe.Request=mt,Pe.Response=$e,Pe.fetch=Wt,Object.defineProperty(Pe,"__esModule",{value:!0})}({}),ce.fetch.ponyfill=!0,delete ce.fetch.polyfill;var Ue=Ve.fetch?Ve:ce;(at=Ue.fetch).default=Ue.fetch,at.fetch=Ue.fetch,at.Headers=Ue.Headers,at.Request=Ue.Request,at.Response=Ue.Response,Fn.exports=at},974:Fn=>{const at={acl:"http://www.w3.org/ns/auth/acl#",arg:"http://www.w3.org/ns/pim/arg#",as:"https://www.w3.org/ns/activitystreams#",bookmark:"http://www.w3.org/2002/01/bookmark#",cal:"http://www.w3.org/2002/12/cal/ical#",cco:"http://www.ontologyrepository.com/CommonCoreOntologies/",cert:"http://www.w3.org/ns/auth/cert#",contact:"http://www.w3.org/2000/10/swap/pim/contact#",dc:"http://purl.org/dc/elements/1.1/",dct:"http://purl.org/dc/terms/",doap:"http://usefulinc.com/ns/doap#",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",gpx:"http://www.w3.org/ns/pim/gpx#",gr:"http://purl.org/goodrelations/v1#",http:"http://www.w3.org/2007/ont/http#",httph:"http://www.w3.org/2007/ont/httph#",icalTZ:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",link:"http://www.w3.org/2007/ont/link#",log:"http://www.w3.org/2000/10/swap/log#",meeting:"http://www.w3.org/ns/pim/meeting#",mo:"http://purl.org/ontology/mo/",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",pad:"http://www.w3.org/ns/pim/pad#",patch:"http://www.w3.org/ns/pim/patch#",prov:"http://www.w3.org/ns/prov#",pto:"http://www.productontology.org/id/",qu:"http://www.w3.org/2000/10/swap/pim/qif#",trip:"http://www.w3.org/ns/pim/trip#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rss:"http://purl.org/rss/1.0/",sched:"http://www.w3.org/ns/pim/schedule#",schema:"http://schema.org/",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",solid:"http://www.w3.org/ns/solid/terms#",space:"http://www.w3.org/ns/pim/space#",stat:"http://www.w3.org/ns/posix/stat#",tab:"http://www.w3.org/2007/ont/link#",tabont:"http://www.w3.org/2007/ont/link#",ui:"http://www.w3.org/ns/ui#",vann:"http://purl.org/vocab/vann/",vcard:"http://www.w3.org/2006/vcard/ns#",wf:"http://www.w3.org/2005/01/wf/flow#",xsd:"http://www.w3.org/2001/XMLSchema#"};Fn.exports=function Ve(ce={namedNode:Ue=>Ue}){const Ue={};for(const Je in at){const lt=at[Je];Ue[Je]=function(Pe=""){return ce.namedNode(lt+Pe)}}return Ue}},2058:(Fn,at,Ve)=>{"use strict";function ce(ue,ke,se){let q,ae;se=se||Ue;let be=0,St=ue.length,ee=!1;for(;be<St;)q=be+(St-be>>1),ae=+se(ue[q],ke),ae<0?be=q+1:(St=q,ee=!ae);return ee?be:~be}function Ue(ue,ke){return ue>ke?1:ue<ke?-1:0}function lt(ue,ke,se){if(ue[0]<=ke)return 0;const q=ue.length;if(ke<=ue[q-1])return q-1;if("function"==typeof se){for(let ae=1;ae<q;++ae){const be=ue[ae];if(be===ke)return ae;if(be<ke)return se(ke,ue[ae-1],be)>0?ae-1:ae}return q-1}if(se>0){for(let ae=1;ae<q;++ae)if(ue[ae]<ke)return ae-1;return q-1}if(se<0){for(let ae=1;ae<q;++ae)if(ue[ae]<=ke)return ae;return q-1}for(let ae=1;ae<q;++ae){if(ue[ae]==ke)return ae;if(ue[ae]<ke)return ue[ae-1]-ke<ke-ue[ae]?ae-1:ae}return q-1}function _(ue,ke){const se=Array.isArray(ke)?ke:[ke],q=se.length;for(let ae=0;ae<q;ae++)ue[ue.length]=se[ae]}function p(ue,ke){const se=ue.length;if(se!==ke.length)return!1;for(let q=0;q<se;q++)if(ue[q]!==ke[q])return!1;return!0}function Xe(ue,ke,se){const q=ke||Ue;return ue.every(function(ae,be){if(0===be)return!0;const St=q(ue[be-1],ae);return!(St>0||se&&0===St)})}Ve.d(at,{El:()=>ce,FT:()=>lt,V_:()=>Ue,WC:()=>Xe,X$:()=>_,aI:()=>p})},5940:(Fn,at,Ve)=>{"use strict";function ce(Ue,Je){if(!Ue)throw new Error(Je)}Ve.d(at,{v:()=>ce})},3467:(Fn,at,Ve)=>{"use strict";Ve.d(at,{NW:()=>ji,Ld:()=>_,ms:()=>p,Rj:()=>Oe,S5:()=>ue,N:()=>ke,aZ:()=>se,dP:()=>q,Vy:()=>be,X$:()=>xe,R8:()=>Ct,sB:()=>Re,q1:()=>ne,Oq:()=>F,Py:()=>ln,RG:()=>pn,HY:()=>jr,Mx:()=>Zs,$u:()=>Pn});const ce={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function _(P,le,Ie){let _t,sn;return _t=le<P[0]?P[0]-le:P[2]<le?le-P[2]:0,sn=Ie<P[1]?P[1]-Ie:P[3]<Ie?Ie-P[3]:0,_t*_t+sn*sn}function p(P,le){return P[0]<=le[0]&&le[2]<=P[2]&&P[1]<=le[1]&&le[3]<=P[3]}function Oe(P,le,Ie){return P[0]<=le&&le<=P[2]&&P[1]<=Ie&&Ie<=P[3]}function Xe(P,le){const Bn=le[0],Jt=le[1];let qt=ce.UNKNOWN;return Bn<P[0]?qt|=ce.LEFT:Bn>P[2]&&(qt|=ce.RIGHT),Jt<P[1]?qt|=ce.BELOW:Jt>P[3]&&(qt|=ce.ABOVE),qt===ce.UNKNOWN&&(qt=ce.INTERSECTING),qt}function ue(){return[1/0,1/0,-1/0,-1/0]}function ke(P,le,Ie,_t,sn){return sn?(sn[0]=P,sn[1]=le,sn[2]=Ie,sn[3]=_t,sn):[P,le,Ie,_t]}function se(P){return ke(1/0,1/0,-1/0,-1/0,P)}function q(P,le){const Ie=P[0],_t=P[1];return ke(Ie,_t,Ie,_t,le)}function be(P,le,Ie,_t,sn){return Ct(se(sn),P,le,Ie,_t)}function xe(P,le){return le[0]<P[0]&&(P[0]=le[0]),le[2]>P[2]&&(P[2]=le[2]),le[1]<P[1]&&(P[1]=le[1]),le[3]>P[3]&&(P[3]=le[3]),P}function Ct(P,le,Ie,_t,sn){for(;Ie<_t;Ie+=sn)Nt(P,le[Ie],le[Ie+1]);return P}function Nt(P,le,Ie){P[0]=Math.min(P[0],le),P[1]=Math.min(P[1],Ie),P[2]=Math.max(P[2],le),P[3]=Math.max(P[3],Ie)}function Re(P,le){let Ie;return Ie=le(function Ye(P){return[P[0],P[1]]}(P)),!!(Ie||(Ie=le(function Wt(P){return[P[2],P[1]]}(P)),Ie)||(Ie=le(function Xt(P){return[P[2],P[3]]}(P)),Ie)||(Ie=le(ln(P)),Ie))&&Ie}function ne(P){return[(P[0]+P[2])/2,(P[1]+P[3])/2]}function F(P){return P[3]-P[1]}function ln(P){return[P[0],P[3]]}function pn(P){return P[2]-P[0]}function jr(P,le){return P[0]<=le[2]&&P[2]>=le[0]&&P[1]<=le[3]&&P[3]>=le[1]}function Pn(P,le){return le?(le[0]=P[0],le[1]=P[1],le[2]=P[2],le[3]=P[3],le):P}function Zs(P,le,Ie){let _t=!1;const sn=Xe(P,le),Dn=Xe(P,Ie);if(sn===ce.INTERSECTING||Dn===ce.INTERSECTING)_t=!0;else{const Bn=P[0],Jt=P[1],qt=P[2],En=P[3],fs=Ie[0],L=Ie[1],A=(L-le[1])/(fs-le[0]);let S,O;Dn&ce.ABOVE&&!(sn&ce.ABOVE)&&(S=fs-(L-En)/A,_t=S>=Bn&&S<=qt),!_t&&Dn&ce.RIGHT&&!(sn&ce.RIGHT)&&(O=L-(fs-qt)*A,_t=O>=Jt&&O<=En),!_t&&Dn&ce.BELOW&&!(sn&ce.BELOW)&&(S=fs-(L-Jt)/A,_t=S>=Bn&&S<=qt),!_t&&Dn&ce.LEFT&&!(sn&ce.LEFT)&&(O=L-(fs-Bn)*A,_t=O>=Jt&&O<=En)}return _t}function ji(P,le,Ie,_t){if(function Ts(P){return P[2]<P[0]||P[3]<P[1]}(P))return se(Ie);let sn=[];if(_t>1){const Jt=P[2]-P[0],qt=P[3]-P[1];for(let En=0;En<_t;++En)sn.push(P[0]+Jt*En/_t,P[1],P[2],P[1]+qt*En/_t,P[2]-Jt*En/_t,P[3],P[0],P[3]-qt*En/_t)}else sn=[P[0],P[1],P[2],P[1],P[2],P[3],P[0],P[3]];le(sn,sn,2);const Dn=[],Bn=[];for(let Jt=0,qt=sn.length;Jt<qt;Jt+=2)Dn.push(sn[Jt]),Bn.push(sn[Jt+1]);return function Je(P,le,Ie){return ke(Math.min.apply(null,P),Math.min.apply(null,le),Math.max.apply(null,P),Math.max.apply(null,le),Ie)}(Dn,Bn,Ie)}},9749:(Fn,at,Ve)=>{"use strict";Ve.d(at,{Gd:()=>Pe,a_:()=>Je,t7:()=>Ue,zb:()=>lt});var ce=Ve(3467);function Ue(_,ge,p,Oe,Xe){return!(0,ce.sB)(Xe,function(ke){return!Je(_,ge,p,Oe,ke[0],ke[1])})}function Je(_,ge,p,Oe,Xe,ue){let ke=0,se=_[p-Oe],q=_[p-Oe+1];for(;ge<p;ge+=Oe){const ae=_[ge],be=_[ge+1];q<=ue?be>ue&&(ae-se)*(ue-q)-(Xe-se)*(be-q)>0&&ke++:be<=ue&&(ae-se)*(ue-q)-(Xe-se)*(be-q)<0&&ke--,se=ae,q=be}return 0!==ke}function lt(_,ge,p,Oe,Xe,ue){if(0===p.length||!Je(_,ge,p[0],Oe,Xe,ue))return!1;for(let ke=1,se=p.length;ke<se;++ke)if(Je(_,p[ke-1],p[ke],Oe,Xe,ue))return!1;return!0}function Pe(_,ge,p,Oe,Xe,ue){if(0===p.length)return!1;for(let ke=0,se=p.length;ke<se;++ke){const q=p[ke];if(lt(_,ge,q,Oe,Xe,ue))return!0;ge=q[q.length-1]}return!1}},9542:(Fn,at,Ve)=>{"use strict";Ve.d(at,{HT:()=>ge,Wp:()=>p,fB:()=>Pe,gp:()=>lt,sj:()=>_});var ce=Ve(3467),Ue=Ve(3846),Je=Ve(9749);function lt(Oe,Xe,ue,ke,se){const q=(0,ce.R8)((0,ce.S5)(),Oe,Xe,ue,ke);return!!(0,ce.HY)(se,q)&&(!!((0,ce.ms)(se,q)||q[0]>=se[0]&&q[2]<=se[2]||q[1]>=se[1]&&q[3]<=se[3])||(0,Ue.j)(Oe,Xe,ue,ke,function(ae,be){return(0,ce.Mx)(se,ae,be)}))}function Pe(Oe,Xe,ue,ke,se){for(let q=0,ae=ue.length;q<ae;++q){if(lt(Oe,Xe,ue[q],ke,se))return!0;Xe=ue[q]}return!1}function _(Oe,Xe,ue,ke,se){return!!(lt(Oe,Xe,ue,ke,se)||(0,Je.a_)(Oe,Xe,ue,ke,se[0],se[1])||(0,Je.a_)(Oe,Xe,ue,ke,se[0],se[3])||(0,Je.a_)(Oe,Xe,ue,ke,se[2],se[1])||(0,Je.a_)(Oe,Xe,ue,ke,se[2],se[3]))}function ge(Oe,Xe,ue,ke,se){if(!_(Oe,Xe,ue[0],ke,se))return!1;if(1===ue.length)return!0;for(let q=1,ae=ue.length;q<ae;++q)if((0,Je.t7)(Oe,ue[q-1],ue[q],ke,se)&&!lt(Oe,ue[q-1],ue[q],ke,se))return!1;return!0}function p(Oe,Xe,ue,ke,se){for(let q=0,ae=ue.length;q<ae;++q){const be=ue[q];if(ge(Oe,Xe,be,ke,se))return!0;Xe=be[be.length-1]}return!1}},3846:(Fn,at,Ve)=>{"use strict";function ce(Ue,Je,lt,Pe,_){let ge;for(Je+=Pe;Je<lt;Je+=Pe)if(ge=_(Ue.slice(Je-Pe,Je),Ue.slice(Je,Je+Pe)),ge)return ge;return!1}Ve.d(at,{j:()=>ce})},9973:(Fn,at,Ve)=>{"use strict";function ce(se,q,ae){return Math.min(Math.max(se,q),ae)}function Ue(se,q,ae,be,St,ee){const ve=St-ae,xe=ee-be;if(0!==ve||0!==xe){const Ee=((se-ae)*ve+(q-be)*xe)/(ve*ve+xe*xe);Ee>1?(ae=St,be=ee):Ee>0&&(ae+=ve*Ee,be+=xe*Ee)}return Je(se,q,ae,be)}function Je(se,q,ae,be){const St=ae-se,ee=be-q;return St*St+ee*ee}function p(se,q,ae){return se+ae*(q-se)}function Oe(se,q){const ae=Math.pow(10,q);return Math.round(se*ae)/ae}function ue(se,q){return Math.floor(Oe(se,q))}function ke(se,q){return Math.ceil(Oe(se,q))}Ve.d(at,{Cc:()=>p,Q1:()=>Ue,RI:()=>ue,hG:()=>Je,mk:()=>ke,qE:()=>ce})},6016:(Fn,at,Ve)=>{"use strict";Ve.d(at,{hB:()=>le,O3:()=>Zs,bF:()=>jr,wU:()=>er,tI:()=>sn,Jt:()=>Pn,RG:()=>Bn,DI:()=>qt});var ce=Ve(2018);const Ue=6378137,Je=Math.PI*Ue,lt=[-Je,-Je,Je,Je],Pe=[-180,-85,180,85],_=Ue*Math.log(Math.tan(Math.PI/2));class ge extends ce.A{constructor(he){super({code:he,units:"m",extent:lt,global:!0,worldExtent:Pe,getPointResolution:function(Qe,ct){return Qe/Math.cosh(ct[1]/Ue)}})}}const p=[new ge("EPSG:3857"),new ge("EPSG:102100"),new ge("EPSG:102113"),new ge("EPSG:900913"),new ge("http://www.opengis.net/def/crs/EPSG/0/3857"),new ge("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Oe(te,he,Qe){const ct=te.length;Qe=Qe>1?Qe:2,void 0===he&&(he=Qe>2?te.slice():new Array(ct));for(let Yt=0;Yt<ct;Yt+=Qe){he[Yt]=Je*te[Yt]/180;let Ln=Ue*Math.log(Math.tan(Math.PI*(+te[Yt+1]+90)/360));Ln>_?Ln=_:Ln<-_&&(Ln=-_),he[Yt+1]=Ln}return he}function Xe(te,he,Qe){const ct=te.length;Qe=Qe>1?Qe:2,void 0===he&&(he=Qe>2?te.slice():new Array(ct));for(let Yt=0;Yt<ct;Yt+=Qe)he[Yt]=180*te[Yt]/Je,he[Yt+1]=360*Math.atan(Math.exp(te[Yt+1]/Ue))/Math.PI-90;return he}const ke=[-180,-90,180,90],se=6378137*Math.PI/180;class q extends ce.A{constructor(he,Qe){super({code:he,units:"degrees",extent:ke,axisOrientation:Qe,global:!0,metersPerUnit:se,worldExtent:ke})}}const ae=[new q("CRS:84"),new q("EPSG:4326","neu"),new q("urn:ogc:def:crs:OGC:1.3:CRS84"),new q("urn:ogc:def:crs:OGC:2:84"),new q("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new q("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new q("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let be={};var xe=Ve(4238),Ee=Ve(3467),et=Ve(9973);function Xt(te,he){if(void 0!==he)for(let Qe=0,ct=te.length;Qe<ct;++Qe)he[Qe]=te[Qe];else he=te.slice();return he}function pn(te,he){if(void 0!==he&&te!==he){for(let Qe=0,ct=te.length;Qe<ct;++Qe)he[Qe]=te[Qe];te=he}return te}function jr(te){(function ve(te,he){be[te]=he})(te.getCode(),te),(0,xe.WQ)(te,te,Xt)}function Pn(te){return"string"==typeof te?function ee(te){return be[te]||be[te.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(te):te||null}function Zs(te){(function Ts(te){te.forEach(jr)})(te),te.forEach(function(he){te.forEach(function(Qe){he!==Qe&&(0,xe.WQ)(he,Qe,Xt)})})}function P(te){return function(he,Qe,ct){const Yt=he.length;ct=void 0!==ct?ct:2,Qe=void 0!==Qe?Qe:new Array(Yt);for(let Ln=0;Ln<Yt;Ln+=ct){const ar=te(he.slice(Ln,Ln+ct)),zn=ar.length;for(let hr=0,Vr=ct;hr<Vr;++hr)Qe[Ln+hr]=hr>=zn?he[Ln+hr]:ar[hr]}return Qe}}function le(te,he,Qe,ct){const Yt=Pn(te),Ln=Pn(he);(0,xe.WQ)(Yt,Ln,P(Qe)),(0,xe.WQ)(Ln,Yt,P(ct))}function sn(te,he){if(te===he)return!0;const Qe=te.getUnits()===he.getUnits();return(te.getCode()===he.getCode()||Dn(te,he)===Xt)&&Qe}function Dn(te,he){const Qe=te.getCode(),ct=he.getCode();let Yt=(0,xe.Jt)(Qe,ct);return Yt||(Yt=pn),Yt}function Bn(te,he){return Dn(Pn(te),Pn(he))}function qt(te,he,Qe,ct){const Yt=Bn(he,Qe);return(0,Ee.NW)(te,Yt,void 0,ct)}function er(te,he,Qe){return function(ct){let Yt,Ln;if(te.canWrapX()){const ar=te.getExtent(),zn=(0,Ee.RG)(ar);Ln=function qe(te,he,Qe){const ct=he.getExtent();let Yt=0;return he.canWrapX()&&(te[0]<ct[0]||te[0]>ct[2])&&(Qe=Qe||(0,Ee.RG)(ct),Yt=Math.floor((te[0]-ct[0])/Qe)),Yt}(ct=ct.slice(0),te,zn),Ln&&(ct[0]=ct[0]-Ln*zn),ct[0]=(0,et.qE)(ct[0],ar[0],ar[2]),ct[1]=(0,et.qE)(ct[1],ar[1],ar[3]),Yt=Qe(ct)}else Yt=Qe(ct);return Ln&&he.canWrapX()&&(Yt[0]+=Ln*(0,Ee.RG)(he.getExtent())),Yt}}!function qn(){Zs(p),Zs(ae),function ji(te,he,Qe,ct){te.forEach(function(Yt){he.forEach(function(Ln){(0,xe.WQ)(Yt,Ln,Qe),(0,xe.WQ)(Ln,Yt,ct)})})}(ae,p,Oe,Xe)}()},2018:(Fn,at,Ve)=>{"use strict";Ve.d(at,{A:()=>Pe});const Je={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},Pe=class lt{constructor(ge){this.code_=ge.code,this.units_=ge.units,this.extent_=void 0!==ge.extent?ge.extent:null,this.worldExtent_=void 0!==ge.worldExtent?ge.worldExtent:null,this.axisOrientation_=void 0!==ge.axisOrientation?ge.axisOrientation:"enu",this.global_=void 0!==ge.global&&ge.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=ge.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=ge.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Je[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(ge){this.global_=ge,this.canWrapX_=!(!ge||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(ge){this.defaultTileGrid_=ge}setExtent(ge){this.extent_=ge,this.canWrapX_=!(!this.global_||!ge)}setWorldExtent(ge){this.worldExtent_=ge}setGetPointResolution(ge){this.getPointResolutionFunc_=ge}getPointResolutionFunc(){return this.getPointResolutionFunc_}}},4238:(Fn,at,Ve)=>{"use strict";Ve.d(at,{Jt:()=>Pe,WQ:()=>Je});let ce={};function Je(_,ge,p){const Oe=_.getCode(),Xe=ge.getCode();Oe in ce||(ce[Oe]={}),ce[Oe][Xe]=p}function Pe(_,ge){let p;return _ in ce&&ge in ce[_]&&(p=ce[_][ge]),p}},3308:(Fn,at,Ve)=>{"use strict";function ce(Je,lt,Pe,_,ge,p,Oe){try{var Xe=Je[p](Oe),ue=Xe.value}catch(ke){return void Pe(ke)}Xe.done?lt(ue):Promise.resolve(ue).then(_,ge)}function Ue(Je){return function(){var lt=this,Pe=arguments;return new Promise(function(_,ge){var p=Je.apply(lt,Pe);function Oe(ue){ce(p,_,ge,Oe,Xe,"next",ue)}function Xe(ue){ce(p,_,ge,Oe,Xe,"throw",ue)}Oe(void 0)})}}Ve.d(at,{A:()=>Ue})},1423:(Fn,at,Ve)=>{"use strict";function ce(Pe){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(Pe)}function lt(Pe,_,ge){return(_=function Je(Pe){var _=function Ue(Pe,_){if("object"!=ce(Pe)||!Pe)return Pe;var ge=Pe[Symbol.toPrimitive];if(void 0!==ge){var p=ge.call(Pe,_||"default");if("object"!=ce(p))return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(Pe)}(Pe,"string");return"symbol"==ce(_)?_:_+""}(_))in Pe?Object.defineProperty(Pe,_,{value:ge,enumerable:!0,configurable:!0,writable:!0}):Pe[_]=ge,Pe}Ve.d(at,{A:()=>lt})}},Fn=>{Fn(Fn.s=7844)}]);