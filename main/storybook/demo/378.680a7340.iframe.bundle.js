/*! For license information please see 378.680a7340.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkgeonetwork_ui=self.webpackChunkgeonetwork_ui||[]).push([[378],{"./node_modules/date-fns/esm/_lib/format/longFormatters/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var dateLongFormatter=function dateLongFormatter(pattern,formatLong){switch(pattern){case"P":return formatLong.date({width:"short"});case"PP":return formatLong.date({width:"medium"});case"PPP":return formatLong.date({width:"long"});default:return formatLong.date({width:"full"})}},timeLongFormatter=function timeLongFormatter(pattern,formatLong){switch(pattern){case"p":return formatLong.time({width:"short"});case"pp":return formatLong.time({width:"medium"});case"ppp":return formatLong.time({width:"long"});default:return formatLong.time({width:"full"})}};const __WEBPACK_DEFAULT_EXPORT__={p:timeLongFormatter,P:function dateTimeLongFormatter(pattern,formatLong){var dateTimeFormat,matchResult=pattern.match(/(P+)(p+)?/)||[],datePattern=matchResult[1],timePattern=matchResult[2];if(!timePattern)return dateLongFormatter(pattern,formatLong);switch(datePattern){case"P":dateTimeFormat=formatLong.dateTime({width:"short"});break;case"PP":dateTimeFormat=formatLong.dateTime({width:"medium"});break;case"PPP":dateTimeFormat=formatLong.dateTime({width:"long"});break;default:dateTimeFormat=formatLong.dateTime({width:"full"})}return dateTimeFormat.replace("{{date}}",dateLongFormatter(datePattern,formatLong)).replace("{{time}}",timeLongFormatter(timePattern,formatLong))}}},"./node_modules/date-fns/esm/_lib/getUTCISOWeek/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>getUTCISOWeek});var toDate=__webpack_require__("./node_modules/date-fns/esm/toDate/index.js"),startOfUTCISOWeek=__webpack_require__("./node_modules/date-fns/esm/_lib/startOfUTCISOWeek/index.js"),getUTCISOWeekYear=__webpack_require__("./node_modules/date-fns/esm/_lib/getUTCISOWeekYear/index.js"),requiredArgs=__webpack_require__("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");var MILLISECONDS_IN_WEEK=6048e5;function getUTCISOWeek(dirtyDate){(0,requiredArgs.Z)(1,arguments);var date=(0,toDate.Z)(dirtyDate),diff=(0,startOfUTCISOWeek.Z)(date).getTime()-function startOfUTCISOWeekYear(dirtyDate){(0,requiredArgs.Z)(1,arguments);var year=(0,getUTCISOWeekYear.Z)(dirtyDate),fourthOfJanuary=new Date(0);return fourthOfJanuary.setUTCFullYear(year,0,4),fourthOfJanuary.setUTCHours(0,0,0,0),(0,startOfUTCISOWeek.Z)(fourthOfJanuary)}(date).getTime();return Math.round(diff/MILLISECONDS_IN_WEEK)+1}},"./node_modules/date-fns/esm/_lib/getUTCISOWeekYear/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>getUTCISOWeekYear});var _toDate_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/date-fns/esm/toDate/index.js"),_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/esm/_lib/requiredArgs/index.js"),_startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/date-fns/esm/_lib/startOfUTCISOWeek/index.js");function getUTCISOWeekYear(dirtyDate){(0,_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__.Z)(1,arguments);var date=(0,_toDate_index_js__WEBPACK_IMPORTED_MODULE_1__.Z)(dirtyDate),year=date.getUTCFullYear(),fourthOfJanuaryOfNextYear=new Date(0);fourthOfJanuaryOfNextYear.setUTCFullYear(year+1,0,4),fourthOfJanuaryOfNextYear.setUTCHours(0,0,0,0);var startOfNextYear=(0,_startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_2__.Z)(fourthOfJanuaryOfNextYear),fourthOfJanuaryOfThisYear=new Date(0);fourthOfJanuaryOfThisYear.setUTCFullYear(year,0,4),fourthOfJanuaryOfThisYear.setUTCHours(0,0,0,0);var startOfThisYear=(0,_startOfUTCISOWeek_index_js__WEBPACK_IMPORTED_MODULE_2__.Z)(fourthOfJanuaryOfThisYear);return date.getTime()>=startOfNextYear.getTime()?year+1:date.getTime()>=startOfThisYear.getTime()?year:year-1}},"./node_modules/date-fns/esm/_lib/getUTCWeek/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>getUTCWeek});var toDate=__webpack_require__("./node_modules/date-fns/esm/toDate/index.js"),startOfUTCWeek=__webpack_require__("./node_modules/date-fns/esm/_lib/startOfUTCWeek/index.js"),getUTCWeekYear=__webpack_require__("./node_modules/date-fns/esm/_lib/getUTCWeekYear/index.js"),requiredArgs=__webpack_require__("./node_modules/date-fns/esm/_lib/requiredArgs/index.js"),toInteger=__webpack_require__("./node_modules/date-fns/esm/_lib/toInteger/index.js"),_lib_defaultOptions=__webpack_require__("./node_modules/date-fns/esm/_lib/defaultOptions/index.js");var MILLISECONDS_IN_WEEK=6048e5;function getUTCWeek(dirtyDate,options){(0,requiredArgs.Z)(1,arguments);var date=(0,toDate.Z)(dirtyDate),diff=(0,startOfUTCWeek.Z)(date,options).getTime()-function startOfUTCWeekYear(dirtyDate,options){var _ref,_ref2,_ref3,_options$firstWeekCon,_options$locale,_options$locale$optio,_defaultOptions$local,_defaultOptions$local2;(0,requiredArgs.Z)(1,arguments);var defaultOptions=(0,_lib_defaultOptions.j)(),firstWeekContainsDate=(0,toInteger.Z)(null!==(_ref=null!==(_ref2=null!==(_ref3=null!==(_options$firstWeekCon=null==options?void 0:options.firstWeekContainsDate)&&void 0!==_options$firstWeekCon?_options$firstWeekCon:null==options||null===(_options$locale=options.locale)||void 0===_options$locale||null===(_options$locale$optio=_options$locale.options)||void 0===_options$locale$optio?void 0:_options$locale$optio.firstWeekContainsDate)&&void 0!==_ref3?_ref3:defaultOptions.firstWeekContainsDate)&&void 0!==_ref2?_ref2:null===(_defaultOptions$local=defaultOptions.locale)||void 0===_defaultOptions$local||null===(_defaultOptions$local2=_defaultOptions$local.options)||void 0===_defaultOptions$local2?void 0:_defaultOptions$local2.firstWeekContainsDate)&&void 0!==_ref?_ref:1),year=(0,getUTCWeekYear.Z)(dirtyDate,options),firstWeek=new Date(0);return firstWeek.setUTCFullYear(year,0,firstWeekContainsDate),firstWeek.setUTCHours(0,0,0,0),(0,startOfUTCWeek.Z)(firstWeek,options)}(date,options).getTime();return Math.round(diff/MILLISECONDS_IN_WEEK)+1}},"./node_modules/date-fns/esm/_lib/getUTCWeekYear/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>getUTCWeekYear});var _toDate_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/date-fns/esm/toDate/index.js"),_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/esm/_lib/requiredArgs/index.js"),_startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/date-fns/esm/_lib/startOfUTCWeek/index.js"),_toInteger_index_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/date-fns/esm/_lib/toInteger/index.js"),_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/date-fns/esm/_lib/defaultOptions/index.js");function getUTCWeekYear(dirtyDate,options){var _ref,_ref2,_ref3,_options$firstWeekCon,_options$locale,_options$locale$optio,_defaultOptions$local,_defaultOptions$local2;(0,_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__.Z)(1,arguments);var date=(0,_toDate_index_js__WEBPACK_IMPORTED_MODULE_1__.Z)(dirtyDate),year=date.getUTCFullYear(),defaultOptions=(0,_defaultOptions_index_js__WEBPACK_IMPORTED_MODULE_2__.j)(),firstWeekContainsDate=(0,_toInteger_index_js__WEBPACK_IMPORTED_MODULE_3__.Z)(null!==(_ref=null!==(_ref2=null!==(_ref3=null!==(_options$firstWeekCon=null==options?void 0:options.firstWeekContainsDate)&&void 0!==_options$firstWeekCon?_options$firstWeekCon:null==options||null===(_options$locale=options.locale)||void 0===_options$locale||null===(_options$locale$optio=_options$locale.options)||void 0===_options$locale$optio?void 0:_options$locale$optio.firstWeekContainsDate)&&void 0!==_ref3?_ref3:defaultOptions.firstWeekContainsDate)&&void 0!==_ref2?_ref2:null===(_defaultOptions$local=defaultOptions.locale)||void 0===_defaultOptions$local||null===(_defaultOptions$local2=_defaultOptions$local.options)||void 0===_defaultOptions$local2?void 0:_defaultOptions$local2.firstWeekContainsDate)&&void 0!==_ref?_ref:1);if(!(firstWeekContainsDate>=1&&firstWeekContainsDate<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var firstWeekOfNextYear=new Date(0);firstWeekOfNextYear.setUTCFullYear(year+1,0,firstWeekContainsDate),firstWeekOfNextYear.setUTCHours(0,0,0,0);var startOfNextYear=(0,_startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_4__.Z)(firstWeekOfNextYear,options),firstWeekOfThisYear=new Date(0);firstWeekOfThisYear.setUTCFullYear(year,0,firstWeekContainsDate),firstWeekOfThisYear.setUTCHours(0,0,0,0);var startOfThisYear=(0,_startOfUTCWeek_index_js__WEBPACK_IMPORTED_MODULE_4__.Z)(firstWeekOfThisYear,options);return date.getTime()>=startOfNextYear.getTime()?year+1:date.getTime()>=startOfThisYear.getTime()?year:year-1}},"./node_modules/date-fns/esm/_lib/protectedTokens/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Do:()=>isProtectedWeekYearToken,Iu:()=>isProtectedDayOfYearToken,qp:()=>throwProtectedError});var protectedDayOfYearTokens=["D","DD"],protectedWeekYearTokens=["YY","YYYY"];function isProtectedDayOfYearToken(token){return-1!==protectedDayOfYearTokens.indexOf(token)}function isProtectedWeekYearToken(token){return-1!==protectedWeekYearTokens.indexOf(token)}function throwProtectedError(token,format,input){if("YYYY"===token)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(format,"`) for formatting years to the input `").concat(input,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===token)throw new RangeError("Use `yy` instead of `YY` (in `".concat(format,"`) for formatting years to the input `").concat(input,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===token)throw new RangeError("Use `d` instead of `D` (in `".concat(format,"`) for formatting days of the month to the input `").concat(input,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===token)throw new RangeError("Use `dd` instead of `DD` (in `".concat(format,"`) for formatting days of the month to the input `").concat(input,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}},"./node_modules/date-fns/esm/_lib/startOfUTCISOWeek/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>startOfUTCISOWeek});var _toDate_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/date-fns/esm/toDate/index.js"),_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function startOfUTCISOWeek(dirtyDate){(0,_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__.Z)(1,arguments);var date=(0,_toDate_index_js__WEBPACK_IMPORTED_MODULE_1__.Z)(dirtyDate),day=date.getUTCDay(),diff=(day<1?7:0)+day-1;return date.setUTCDate(date.getUTCDate()-diff),date.setUTCHours(0,0,0,0),date}},"./node_modules/date-fns/esm/constants/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{qk:()=>millisecondsInSecond,vh:()=>millisecondsInHour,yJ:()=>millisecondsInMinute});Math.pow(10,8);var millisecondsInMinute=6e4,millisecondsInHour=36e5,millisecondsInSecond=1e3},"./node_modules/date-fns/esm/parse/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>parse});var esm_typeof=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/typeof.js");function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}var defaultLocale=__webpack_require__("./node_modules/date-fns/esm/_lib/defaultLocale/index.js"),subMilliseconds=__webpack_require__("./node_modules/date-fns/esm/subMilliseconds/index.js"),toDate=__webpack_require__("./node_modules/date-fns/esm/toDate/index.js"),_lib_assign=__webpack_require__("./node_modules/date-fns/esm/_lib/assign/index.js"),longFormatters=__webpack_require__("./node_modules/date-fns/esm/_lib/format/longFormatters/index.js"),getTimezoneOffsetInMilliseconds=__webpack_require__("./node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),protectedTokens=__webpack_require__("./node_modules/date-fns/esm/_lib/protectedTokens/index.js"),toInteger=__webpack_require__("./node_modules/date-fns/esm/_lib/toInteger/index.js"),requiredArgs=__webpack_require__("./node_modules/date-fns/esm/_lib/requiredArgs/index.js"),assertThisInitialized=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),setPrototypeOf=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&(0,setPrototypeOf.Z)(subClass,superClass)}var getPrototypeOf=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),isNativeReflectConstruct=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js");function _createSuper(Derived){var hasNativeReflectConstruct=(0,isNativeReflectConstruct.Z)();return function _createSuperInternal(){var result,Super=(0,getPrototypeOf.Z)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.Z)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===(0,esm_typeof.Z)(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return(0,assertThisInitialized.Z)(self)}(this,result)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==(0,esm_typeof.Z)(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==(0,esm_typeof.Z)(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===(0,esm_typeof.Z)(key)?key:String(key)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Setter=function(){function Setter(){_classCallCheck(this,Setter),_defineProperty(this,"priority",void 0),_defineProperty(this,"subPriority",0)}return _createClass(Setter,[{key:"validate",value:function validate(_utcDate,_options){return!0}}]),Setter}(),ValueSetter=function(_Setter){_inherits(ValueSetter,_Setter);var _super=_createSuper(ValueSetter);function ValueSetter(value,validateValue,setValue,priority,subPriority){var _this;return _classCallCheck(this,ValueSetter),(_this=_super.call(this)).value=value,_this.validateValue=validateValue,_this.setValue=setValue,_this.priority=priority,subPriority&&(_this.subPriority=subPriority),_this}return _createClass(ValueSetter,[{key:"validate",value:function validate(utcDate,options){return this.validateValue(utcDate,this.value,options)}},{key:"set",value:function set(utcDate,flags,options){return this.setValue(utcDate,flags,this.value,options)}}]),ValueSetter}(Setter),DateToSystemTimezoneSetter=function(_Setter2){_inherits(DateToSystemTimezoneSetter,_Setter2);var _super2=_createSuper(DateToSystemTimezoneSetter);function DateToSystemTimezoneSetter(){var _this2;_classCallCheck(this,DateToSystemTimezoneSetter);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this2=_super2.call.apply(_super2,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this2),"priority",10),_defineProperty((0,assertThisInitialized.Z)(_this2),"subPriority",-1),_this2}return _createClass(DateToSystemTimezoneSetter,[{key:"set",value:function set(date,flags){if(flags.timestampIsSet)return date;var convertedDate=new Date(0);return convertedDate.setFullYear(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate()),convertedDate.setHours(date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds(),date.getUTCMilliseconds()),convertedDate}}]),DateToSystemTimezoneSetter}(Setter),Parser=function(){function Parser(){_classCallCheck(this,Parser),_defineProperty(this,"incompatibleTokens",void 0),_defineProperty(this,"priority",void 0),_defineProperty(this,"subPriority",void 0)}return _createClass(Parser,[{key:"run",value:function run(dateString,token,match,options){var result=this.parse(dateString,token,match,options);return result?{setter:new ValueSetter(result.value,this.validate,this.set,this.priority,this.subPriority),rest:result.rest}:null}},{key:"validate",value:function validate(_utcDate,_value,_options){return!0}}]),Parser}(),EraParser=function(_Parser){_inherits(EraParser,_Parser);var _super=_createSuper(EraParser);function EraParser(){var _this;_classCallCheck(this,EraParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",140),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["R","u","t","T"]),_this}return _createClass(EraParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"G":case"GG":case"GGG":return match.era(dateString,{width:"abbreviated"})||match.era(dateString,{width:"narrow"});case"GGGGG":return match.era(dateString,{width:"narrow"});default:return match.era(dateString,{width:"wide"})||match.era(dateString,{width:"abbreviated"})||match.era(dateString,{width:"narrow"})}}},{key:"set",value:function set(date,flags,value){return flags.era=value,date.setUTCFullYear(value,0,1),date.setUTCHours(0,0,0,0),date}}]),EraParser}(Parser),constants=__webpack_require__("./node_modules/date-fns/esm/constants/index.js"),numericPatterns_month=/^(1[0-2]|0?\d)/,numericPatterns_date=/^(3[0-1]|[0-2]?\d)/,numericPatterns_dayOfYear=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,numericPatterns_week=/^(5[0-3]|[0-4]?\d)/,numericPatterns_hour23h=/^(2[0-3]|[0-1]?\d)/,numericPatterns_hour24h=/^(2[0-4]|[0-1]?\d)/,numericPatterns_hour11h=/^(1[0-1]|0?\d)/,numericPatterns_hour12h=/^(1[0-2]|0?\d)/,numericPatterns_minute=/^[0-5]?\d/,numericPatterns_second=/^[0-5]?\d/,numericPatterns_singleDigit=/^\d/,numericPatterns_twoDigits=/^\d{1,2}/,numericPatterns_threeDigits=/^\d{1,3}/,numericPatterns_fourDigits=/^\d{1,4}/,numericPatterns_anyDigitsSigned=/^-?\d+/,numericPatterns_singleDigitSigned=/^-?\d/,numericPatterns_twoDigitsSigned=/^-?\d{1,2}/,numericPatterns_threeDigitsSigned=/^-?\d{1,3}/,numericPatterns_fourDigitsSigned=/^-?\d{1,4}/,timezonePatterns_basicOptionalMinutes=/^([+-])(\d{2})(\d{2})?|Z/,timezonePatterns_basic=/^([+-])(\d{2})(\d{2})|Z/,timezonePatterns_basicOptionalSeconds=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,timezonePatterns_extended=/^([+-])(\d{2}):(\d{2})|Z/,timezonePatterns_extendedOptionalSeconds=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function mapValue(parseFnResult,mapFn){return parseFnResult?{value:mapFn(parseFnResult.value),rest:parseFnResult.rest}:parseFnResult}function parseNumericPattern(pattern,dateString){var matchResult=dateString.match(pattern);return matchResult?{value:parseInt(matchResult[0],10),rest:dateString.slice(matchResult[0].length)}:null}function parseTimezonePattern(pattern,dateString){var matchResult=dateString.match(pattern);if(!matchResult)return null;if("Z"===matchResult[0])return{value:0,rest:dateString.slice(1)};var sign="+"===matchResult[1]?1:-1,hours=matchResult[2]?parseInt(matchResult[2],10):0,minutes=matchResult[3]?parseInt(matchResult[3],10):0,seconds=matchResult[5]?parseInt(matchResult[5],10):0;return{value:sign*(hours*constants.vh+minutes*constants.yJ+seconds*constants.qk),rest:dateString.slice(matchResult[0].length)}}function parseAnyDigitsSigned(dateString){return parseNumericPattern(numericPatterns_anyDigitsSigned,dateString)}function parseNDigits(n,dateString){switch(n){case 1:return parseNumericPattern(numericPatterns_singleDigit,dateString);case 2:return parseNumericPattern(numericPatterns_twoDigits,dateString);case 3:return parseNumericPattern(numericPatterns_threeDigits,dateString);case 4:return parseNumericPattern(numericPatterns_fourDigits,dateString);default:return parseNumericPattern(new RegExp("^\\d{1,"+n+"}"),dateString)}}function parseNDigitsSigned(n,dateString){switch(n){case 1:return parseNumericPattern(numericPatterns_singleDigitSigned,dateString);case 2:return parseNumericPattern(numericPatterns_twoDigitsSigned,dateString);case 3:return parseNumericPattern(numericPatterns_threeDigitsSigned,dateString);case 4:return parseNumericPattern(numericPatterns_fourDigitsSigned,dateString);default:return parseNumericPattern(new RegExp("^-?\\d{1,"+n+"}"),dateString)}}function dayPeriodEnumToHours(dayPeriod){switch(dayPeriod){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function normalizeTwoDigitYear(twoDigitYear,currentYear){var result,isCommonEra=currentYear>0,absCurrentYear=isCommonEra?currentYear:1-currentYear;if(absCurrentYear<=50)result=twoDigitYear||100;else{var rangeEnd=absCurrentYear+50;result=twoDigitYear+100*Math.floor(rangeEnd/100)-(twoDigitYear>=rangeEnd%100?100:0)}return isCommonEra?result:1-result}function isLeapYearIndex(year){return year%400==0||year%4==0&&year%100!=0}var YearParser=function(_Parser){_inherits(YearParser,_Parser);var _super=_createSuper(YearParser);function YearParser(){var _this;_classCallCheck(this,YearParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",130),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),_this}return _createClass(YearParser,[{key:"parse",value:function parse(dateString,token,match){var valueCallback=function valueCallback(year){return{year,isTwoDigitYear:"yy"===token}};switch(token){case"y":return mapValue(parseNDigits(4,dateString),valueCallback);case"yo":return mapValue(match.ordinalNumber(dateString,{unit:"year"}),valueCallback);default:return mapValue(parseNDigits(token.length,dateString),valueCallback)}}},{key:"validate",value:function validate(_date,value){return value.isTwoDigitYear||value.year>0}},{key:"set",value:function set(date,flags,value){var currentYear=date.getUTCFullYear();if(value.isTwoDigitYear){var normalizedTwoDigitYear=normalizeTwoDigitYear(value.year,currentYear);return date.setUTCFullYear(normalizedTwoDigitYear,0,1),date.setUTCHours(0,0,0,0),date}var year="era"in flags&&1!==flags.era?1-value.year:value.year;return date.setUTCFullYear(year,0,1),date.setUTCHours(0,0,0,0),date}}]),YearParser}(Parser),getUTCWeekYear=__webpack_require__("./node_modules/date-fns/esm/_lib/getUTCWeekYear/index.js"),startOfUTCWeek=__webpack_require__("./node_modules/date-fns/esm/_lib/startOfUTCWeek/index.js"),LocalWeekYearParser=function(_Parser){_inherits(LocalWeekYearParser,_Parser);var _super=_createSuper(LocalWeekYearParser);function LocalWeekYearParser(){var _this;_classCallCheck(this,LocalWeekYearParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",130),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),_this}return _createClass(LocalWeekYearParser,[{key:"parse",value:function parse(dateString,token,match){var valueCallback=function valueCallback(year){return{year,isTwoDigitYear:"YY"===token}};switch(token){case"Y":return mapValue(parseNDigits(4,dateString),valueCallback);case"Yo":return mapValue(match.ordinalNumber(dateString,{unit:"year"}),valueCallback);default:return mapValue(parseNDigits(token.length,dateString),valueCallback)}}},{key:"validate",value:function validate(_date,value){return value.isTwoDigitYear||value.year>0}},{key:"set",value:function set(date,flags,value,options){var currentYear=(0,getUTCWeekYear.Z)(date,options);if(value.isTwoDigitYear){var normalizedTwoDigitYear=normalizeTwoDigitYear(value.year,currentYear);return date.setUTCFullYear(normalizedTwoDigitYear,0,options.firstWeekContainsDate),date.setUTCHours(0,0,0,0),(0,startOfUTCWeek.Z)(date,options)}var year="era"in flags&&1!==flags.era?1-value.year:value.year;return date.setUTCFullYear(year,0,options.firstWeekContainsDate),date.setUTCHours(0,0,0,0),(0,startOfUTCWeek.Z)(date,options)}}]),LocalWeekYearParser}(Parser),startOfUTCISOWeek=__webpack_require__("./node_modules/date-fns/esm/_lib/startOfUTCISOWeek/index.js"),ISOWeekYearParser=function(_Parser){_inherits(ISOWeekYearParser,_Parser);var _super=_createSuper(ISOWeekYearParser);function ISOWeekYearParser(){var _this;_classCallCheck(this,ISOWeekYearParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",130),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),_this}return _createClass(ISOWeekYearParser,[{key:"parse",value:function parse(dateString,token){return parseNDigitsSigned("R"===token?4:token.length,dateString)}},{key:"set",value:function set(_date,_flags,value){var firstWeekOfYear=new Date(0);return firstWeekOfYear.setUTCFullYear(value,0,4),firstWeekOfYear.setUTCHours(0,0,0,0),(0,startOfUTCISOWeek.Z)(firstWeekOfYear)}}]),ISOWeekYearParser}(Parser),ExtendedYearParser=function(_Parser){_inherits(ExtendedYearParser,_Parser);var _super=_createSuper(ExtendedYearParser);function ExtendedYearParser(){var _this;_classCallCheck(this,ExtendedYearParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",130),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),_this}return _createClass(ExtendedYearParser,[{key:"parse",value:function parse(dateString,token){return parseNDigitsSigned("u"===token?4:token.length,dateString)}},{key:"set",value:function set(date,_flags,value){return date.setUTCFullYear(value,0,1),date.setUTCHours(0,0,0,0),date}}]),ExtendedYearParser}(Parser),QuarterParser=function(_Parser){_inherits(QuarterParser,_Parser);var _super=_createSuper(QuarterParser);function QuarterParser(){var _this;_classCallCheck(this,QuarterParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",120),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),_this}return _createClass(QuarterParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"Q":case"QQ":return parseNDigits(token.length,dateString);case"Qo":return match.ordinalNumber(dateString,{unit:"quarter"});case"QQQ":return match.quarter(dateString,{width:"abbreviated",context:"formatting"})||match.quarter(dateString,{width:"narrow",context:"formatting"});case"QQQQQ":return match.quarter(dateString,{width:"narrow",context:"formatting"});default:return match.quarter(dateString,{width:"wide",context:"formatting"})||match.quarter(dateString,{width:"abbreviated",context:"formatting"})||match.quarter(dateString,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=4}},{key:"set",value:function set(date,_flags,value){return date.setUTCMonth(3*(value-1),1),date.setUTCHours(0,0,0,0),date}}]),QuarterParser}(Parser),StandAloneQuarterParser=function(_Parser){_inherits(StandAloneQuarterParser,_Parser);var _super=_createSuper(StandAloneQuarterParser);function StandAloneQuarterParser(){var _this;_classCallCheck(this,StandAloneQuarterParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",120),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),_this}return _createClass(StandAloneQuarterParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"q":case"qq":return parseNDigits(token.length,dateString);case"qo":return match.ordinalNumber(dateString,{unit:"quarter"});case"qqq":return match.quarter(dateString,{width:"abbreviated",context:"standalone"})||match.quarter(dateString,{width:"narrow",context:"standalone"});case"qqqqq":return match.quarter(dateString,{width:"narrow",context:"standalone"});default:return match.quarter(dateString,{width:"wide",context:"standalone"})||match.quarter(dateString,{width:"abbreviated",context:"standalone"})||match.quarter(dateString,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=4}},{key:"set",value:function set(date,_flags,value){return date.setUTCMonth(3*(value-1),1),date.setUTCHours(0,0,0,0),date}}]),StandAloneQuarterParser}(Parser),MonthParser=function(_Parser){_inherits(MonthParser,_Parser);var _super=_createSuper(MonthParser);function MonthParser(){var _this;_classCallCheck(this,MonthParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",110),_this}return _createClass(MonthParser,[{key:"parse",value:function parse(dateString,token,match){var valueCallback=function valueCallback(value){return value-1};switch(token){case"M":return mapValue(parseNumericPattern(numericPatterns_month,dateString),valueCallback);case"MM":return mapValue(parseNDigits(2,dateString),valueCallback);case"Mo":return mapValue(match.ordinalNumber(dateString,{unit:"month"}),valueCallback);case"MMM":return match.month(dateString,{width:"abbreviated",context:"formatting"})||match.month(dateString,{width:"narrow",context:"formatting"});case"MMMMM":return match.month(dateString,{width:"narrow",context:"formatting"});default:return match.month(dateString,{width:"wide",context:"formatting"})||match.month(dateString,{width:"abbreviated",context:"formatting"})||match.month(dateString,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=11}},{key:"set",value:function set(date,_flags,value){return date.setUTCMonth(value,1),date.setUTCHours(0,0,0,0),date}}]),MonthParser}(Parser),StandAloneMonthParser=function(_Parser){_inherits(StandAloneMonthParser,_Parser);var _super=_createSuper(StandAloneMonthParser);function StandAloneMonthParser(){var _this;_classCallCheck(this,StandAloneMonthParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",110),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),_this}return _createClass(StandAloneMonthParser,[{key:"parse",value:function parse(dateString,token,match){var valueCallback=function valueCallback(value){return value-1};switch(token){case"L":return mapValue(parseNumericPattern(numericPatterns_month,dateString),valueCallback);case"LL":return mapValue(parseNDigits(2,dateString),valueCallback);case"Lo":return mapValue(match.ordinalNumber(dateString,{unit:"month"}),valueCallback);case"LLL":return match.month(dateString,{width:"abbreviated",context:"standalone"})||match.month(dateString,{width:"narrow",context:"standalone"});case"LLLLL":return match.month(dateString,{width:"narrow",context:"standalone"});default:return match.month(dateString,{width:"wide",context:"standalone"})||match.month(dateString,{width:"abbreviated",context:"standalone"})||match.month(dateString,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=11}},{key:"set",value:function set(date,_flags,value){return date.setUTCMonth(value,1),date.setUTCHours(0,0,0,0),date}}]),StandAloneMonthParser}(Parser),getUTCWeek=__webpack_require__("./node_modules/date-fns/esm/_lib/getUTCWeek/index.js");var LocalWeekParser=function(_Parser){_inherits(LocalWeekParser,_Parser);var _super=_createSuper(LocalWeekParser);function LocalWeekParser(){var _this;_classCallCheck(this,LocalWeekParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",100),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),_this}return _createClass(LocalWeekParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"w":return parseNumericPattern(numericPatterns_week,dateString);case"wo":return match.ordinalNumber(dateString,{unit:"week"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=53}},{key:"set",value:function set(date,_flags,value,options){return(0,startOfUTCWeek.Z)(function setUTCWeek(dirtyDate,dirtyWeek,options){(0,requiredArgs.Z)(2,arguments);var date=(0,toDate.Z)(dirtyDate),week=(0,toInteger.Z)(dirtyWeek),diff=(0,getUTCWeek.Z)(date,options)-week;return date.setUTCDate(date.getUTCDate()-7*diff),date}(date,value,options),options)}}]),LocalWeekParser}(Parser),getUTCISOWeek=__webpack_require__("./node_modules/date-fns/esm/_lib/getUTCISOWeek/index.js");var ISOWeekParser=function(_Parser){_inherits(ISOWeekParser,_Parser);var _super=_createSuper(ISOWeekParser);function ISOWeekParser(){var _this;_classCallCheck(this,ISOWeekParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",100),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),_this}return _createClass(ISOWeekParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"I":return parseNumericPattern(numericPatterns_week,dateString);case"Io":return match.ordinalNumber(dateString,{unit:"week"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=53}},{key:"set",value:function set(date,_flags,value){return(0,startOfUTCISOWeek.Z)(function setUTCISOWeek(dirtyDate,dirtyISOWeek){(0,requiredArgs.Z)(2,arguments);var date=(0,toDate.Z)(dirtyDate),isoWeek=(0,toInteger.Z)(dirtyISOWeek),diff=(0,getUTCISOWeek.Z)(date)-isoWeek;return date.setUTCDate(date.getUTCDate()-7*diff),date}(date,value))}}]),ISOWeekParser}(Parser),DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],DAYS_IN_MONTH_LEAP_YEAR=[31,29,31,30,31,30,31,31,30,31,30,31],DateParser=function(_Parser){_inherits(DateParser,_Parser);var _super=_createSuper(DateParser);function DateParser(){var _this;_classCallCheck(this,DateParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",90),_defineProperty((0,assertThisInitialized.Z)(_this),"subPriority",1),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),_this}return _createClass(DateParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"d":return parseNumericPattern(numericPatterns_date,dateString);case"do":return match.ordinalNumber(dateString,{unit:"date"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(date,value){var isLeapYear=isLeapYearIndex(date.getUTCFullYear()),month=date.getUTCMonth();return isLeapYear?value>=1&&value<=DAYS_IN_MONTH_LEAP_YEAR[month]:value>=1&&value<=DAYS_IN_MONTH[month]}},{key:"set",value:function set(date,_flags,value){return date.setUTCDate(value),date.setUTCHours(0,0,0,0),date}}]),DateParser}(Parser),DayOfYearParser=function(_Parser){_inherits(DayOfYearParser,_Parser);var _super=_createSuper(DayOfYearParser);function DayOfYearParser(){var _this;_classCallCheck(this,DayOfYearParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",90),_defineProperty((0,assertThisInitialized.Z)(_this),"subpriority",1),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),_this}return _createClass(DayOfYearParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"D":case"DD":return parseNumericPattern(numericPatterns_dayOfYear,dateString);case"Do":return match.ordinalNumber(dateString,{unit:"date"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(date,value){return isLeapYearIndex(date.getUTCFullYear())?value>=1&&value<=366:value>=1&&value<=365}},{key:"set",value:function set(date,_flags,value){return date.setUTCMonth(0,value),date.setUTCHours(0,0,0,0),date}}]),DayOfYearParser}(Parser),_lib_defaultOptions=__webpack_require__("./node_modules/date-fns/esm/_lib/defaultOptions/index.js");function setUTCDay(dirtyDate,dirtyDay,options){var _ref,_ref2,_ref3,_options$weekStartsOn,_options$locale,_options$locale$optio,_defaultOptions$local,_defaultOptions$local2;(0,requiredArgs.Z)(2,arguments);var defaultOptions=(0,_lib_defaultOptions.j)(),weekStartsOn=(0,toInteger.Z)(null!==(_ref=null!==(_ref2=null!==(_ref3=null!==(_options$weekStartsOn=null==options?void 0:options.weekStartsOn)&&void 0!==_options$weekStartsOn?_options$weekStartsOn:null==options||null===(_options$locale=options.locale)||void 0===_options$locale||null===(_options$locale$optio=_options$locale.options)||void 0===_options$locale$optio?void 0:_options$locale$optio.weekStartsOn)&&void 0!==_ref3?_ref3:defaultOptions.weekStartsOn)&&void 0!==_ref2?_ref2:null===(_defaultOptions$local=defaultOptions.locale)||void 0===_defaultOptions$local||null===(_defaultOptions$local2=_defaultOptions$local.options)||void 0===_defaultOptions$local2?void 0:_defaultOptions$local2.weekStartsOn)&&void 0!==_ref?_ref:0);if(!(weekStartsOn>=0&&weekStartsOn<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var date=(0,toDate.Z)(dirtyDate),day=(0,toInteger.Z)(dirtyDay),diff=((day%7+7)%7<weekStartsOn?7:0)+day-date.getUTCDay();return date.setUTCDate(date.getUTCDate()+diff),date}var DayParser=function(_Parser){_inherits(DayParser,_Parser);var _super=_createSuper(DayParser);function DayParser(){var _this;_classCallCheck(this,DayParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",90),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["D","i","e","c","t","T"]),_this}return _createClass(DayParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"E":case"EE":case"EEE":return match.day(dateString,{width:"abbreviated",context:"formatting"})||match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"});case"EEEEE":return match.day(dateString,{width:"narrow",context:"formatting"});case"EEEEEE":return match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"});default:return match.day(dateString,{width:"wide",context:"formatting"})||match.day(dateString,{width:"abbreviated",context:"formatting"})||match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=6}},{key:"set",value:function set(date,_flags,value,options){return(date=setUTCDay(date,value,options)).setUTCHours(0,0,0,0),date}}]),DayParser}(Parser),LocalDayParser=function(_Parser){_inherits(LocalDayParser,_Parser);var _super=_createSuper(LocalDayParser);function LocalDayParser(){var _this;_classCallCheck(this,LocalDayParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",90),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),_this}return _createClass(LocalDayParser,[{key:"parse",value:function parse(dateString,token,match,options){var valueCallback=function valueCallback(value){var wholeWeekDays=7*Math.floor((value-1)/7);return(value+options.weekStartsOn+6)%7+wholeWeekDays};switch(token){case"e":case"ee":return mapValue(parseNDigits(token.length,dateString),valueCallback);case"eo":return mapValue(match.ordinalNumber(dateString,{unit:"day"}),valueCallback);case"eee":return match.day(dateString,{width:"abbreviated",context:"formatting"})||match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"});case"eeeee":return match.day(dateString,{width:"narrow",context:"formatting"});case"eeeeee":return match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"});default:return match.day(dateString,{width:"wide",context:"formatting"})||match.day(dateString,{width:"abbreviated",context:"formatting"})||match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=6}},{key:"set",value:function set(date,_flags,value,options){return(date=setUTCDay(date,value,options)).setUTCHours(0,0,0,0),date}}]),LocalDayParser}(Parser),StandAloneLocalDayParser=function(_Parser){_inherits(StandAloneLocalDayParser,_Parser);var _super=_createSuper(StandAloneLocalDayParser);function StandAloneLocalDayParser(){var _this;_classCallCheck(this,StandAloneLocalDayParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",90),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),_this}return _createClass(StandAloneLocalDayParser,[{key:"parse",value:function parse(dateString,token,match,options){var valueCallback=function valueCallback(value){var wholeWeekDays=7*Math.floor((value-1)/7);return(value+options.weekStartsOn+6)%7+wholeWeekDays};switch(token){case"c":case"cc":return mapValue(parseNDigits(token.length,dateString),valueCallback);case"co":return mapValue(match.ordinalNumber(dateString,{unit:"day"}),valueCallback);case"ccc":return match.day(dateString,{width:"abbreviated",context:"standalone"})||match.day(dateString,{width:"short",context:"standalone"})||match.day(dateString,{width:"narrow",context:"standalone"});case"ccccc":return match.day(dateString,{width:"narrow",context:"standalone"});case"cccccc":return match.day(dateString,{width:"short",context:"standalone"})||match.day(dateString,{width:"narrow",context:"standalone"});default:return match.day(dateString,{width:"wide",context:"standalone"})||match.day(dateString,{width:"abbreviated",context:"standalone"})||match.day(dateString,{width:"short",context:"standalone"})||match.day(dateString,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=6}},{key:"set",value:function set(date,_flags,value,options){return(date=setUTCDay(date,value,options)).setUTCHours(0,0,0,0),date}}]),StandAloneLocalDayParser}(Parser);var ISODayParser=function(_Parser){_inherits(ISODayParser,_Parser);var _super=_createSuper(ISODayParser);function ISODayParser(){var _this;_classCallCheck(this,ISODayParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",90),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),_this}return _createClass(ISODayParser,[{key:"parse",value:function parse(dateString,token,match){var valueCallback=function valueCallback(value){return 0===value?7:value};switch(token){case"i":case"ii":return parseNDigits(token.length,dateString);case"io":return match.ordinalNumber(dateString,{unit:"day"});case"iii":return mapValue(match.day(dateString,{width:"abbreviated",context:"formatting"})||match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"}),valueCallback);case"iiiii":return mapValue(match.day(dateString,{width:"narrow",context:"formatting"}),valueCallback);case"iiiiii":return mapValue(match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"}),valueCallback);default:return mapValue(match.day(dateString,{width:"wide",context:"formatting"})||match.day(dateString,{width:"abbreviated",context:"formatting"})||match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"}),valueCallback)}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=7}},{key:"set",value:function set(date,_flags,value){return date=function setUTCISODay(dirtyDate,dirtyDay){(0,requiredArgs.Z)(2,arguments);var day=(0,toInteger.Z)(dirtyDay);day%7==0&&(day-=7);var date=(0,toDate.Z)(dirtyDate),diff=((day%7+7)%7<1?7:0)+day-date.getUTCDay();return date.setUTCDate(date.getUTCDate()+diff),date}(date,value),date.setUTCHours(0,0,0,0),date}}]),ISODayParser}(Parser),AMPMParser=function(_Parser){_inherits(AMPMParser,_Parser);var _super=_createSuper(AMPMParser);function AMPMParser(){var _this;_classCallCheck(this,AMPMParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",80),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["b","B","H","k","t","T"]),_this}return _createClass(AMPMParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"a":case"aa":case"aaa":return match.dayPeriod(dateString,{width:"abbreviated",context:"formatting"})||match.dayPeriod(dateString,{width:"narrow",context:"formatting"});case"aaaaa":return match.dayPeriod(dateString,{width:"narrow",context:"formatting"});default:return match.dayPeriod(dateString,{width:"wide",context:"formatting"})||match.dayPeriod(dateString,{width:"abbreviated",context:"formatting"})||match.dayPeriod(dateString,{width:"narrow",context:"formatting"})}}},{key:"set",value:function set(date,_flags,value){return date.setUTCHours(dayPeriodEnumToHours(value),0,0,0),date}}]),AMPMParser}(Parser),AMPMMidnightParser=function(_Parser){_inherits(AMPMMidnightParser,_Parser);var _super=_createSuper(AMPMMidnightParser);function AMPMMidnightParser(){var _this;_classCallCheck(this,AMPMMidnightParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",80),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["a","B","H","k","t","T"]),_this}return _createClass(AMPMMidnightParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"b":case"bb":case"bbb":return match.dayPeriod(dateString,{width:"abbreviated",context:"formatting"})||match.dayPeriod(dateString,{width:"narrow",context:"formatting"});case"bbbbb":return match.dayPeriod(dateString,{width:"narrow",context:"formatting"});default:return match.dayPeriod(dateString,{width:"wide",context:"formatting"})||match.dayPeriod(dateString,{width:"abbreviated",context:"formatting"})||match.dayPeriod(dateString,{width:"narrow",context:"formatting"})}}},{key:"set",value:function set(date,_flags,value){return date.setUTCHours(dayPeriodEnumToHours(value),0,0,0),date}}]),AMPMMidnightParser}(Parser),DayPeriodParser=function(_Parser){_inherits(DayPeriodParser,_Parser);var _super=_createSuper(DayPeriodParser);function DayPeriodParser(){var _this;_classCallCheck(this,DayPeriodParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",80),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["a","b","t","T"]),_this}return _createClass(DayPeriodParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"B":case"BB":case"BBB":return match.dayPeriod(dateString,{width:"abbreviated",context:"formatting"})||match.dayPeriod(dateString,{width:"narrow",context:"formatting"});case"BBBBB":return match.dayPeriod(dateString,{width:"narrow",context:"formatting"});default:return match.dayPeriod(dateString,{width:"wide",context:"formatting"})||match.dayPeriod(dateString,{width:"abbreviated",context:"formatting"})||match.dayPeriod(dateString,{width:"narrow",context:"formatting"})}}},{key:"set",value:function set(date,_flags,value){return date.setUTCHours(dayPeriodEnumToHours(value),0,0,0),date}}]),DayPeriodParser}(Parser),Hour1to12Parser=function(_Parser){_inherits(Hour1to12Parser,_Parser);var _super=_createSuper(Hour1to12Parser);function Hour1to12Parser(){var _this;_classCallCheck(this,Hour1to12Parser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",70),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["H","K","k","t","T"]),_this}return _createClass(Hour1to12Parser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"h":return parseNumericPattern(numericPatterns_hour12h,dateString);case"ho":return match.ordinalNumber(dateString,{unit:"hour"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=12}},{key:"set",value:function set(date,_flags,value){var isPM=date.getUTCHours()>=12;return isPM&&value<12?date.setUTCHours(value+12,0,0,0):isPM||12!==value?date.setUTCHours(value,0,0,0):date.setUTCHours(0,0,0,0),date}}]),Hour1to12Parser}(Parser),Hour0to23Parser=function(_Parser){_inherits(Hour0to23Parser,_Parser);var _super=_createSuper(Hour0to23Parser);function Hour0to23Parser(){var _this;_classCallCheck(this,Hour0to23Parser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",70),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["a","b","h","K","k","t","T"]),_this}return _createClass(Hour0to23Parser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"H":return parseNumericPattern(numericPatterns_hour23h,dateString);case"Ho":return match.ordinalNumber(dateString,{unit:"hour"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=23}},{key:"set",value:function set(date,_flags,value){return date.setUTCHours(value,0,0,0),date}}]),Hour0to23Parser}(Parser),Hour0To11Parser=function(_Parser){_inherits(Hour0To11Parser,_Parser);var _super=_createSuper(Hour0To11Parser);function Hour0To11Parser(){var _this;_classCallCheck(this,Hour0To11Parser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",70),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["h","H","k","t","T"]),_this}return _createClass(Hour0To11Parser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"K":return parseNumericPattern(numericPatterns_hour11h,dateString);case"Ko":return match.ordinalNumber(dateString,{unit:"hour"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=11}},{key:"set",value:function set(date,_flags,value){return date.getUTCHours()>=12&&value<12?date.setUTCHours(value+12,0,0,0):date.setUTCHours(value,0,0,0),date}}]),Hour0To11Parser}(Parser),Hour1To24Parser=function(_Parser){_inherits(Hour1To24Parser,_Parser);var _super=_createSuper(Hour1To24Parser);function Hour1To24Parser(){var _this;_classCallCheck(this,Hour1To24Parser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",70),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["a","b","h","H","K","t","T"]),_this}return _createClass(Hour1To24Parser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"k":return parseNumericPattern(numericPatterns_hour24h,dateString);case"ko":return match.ordinalNumber(dateString,{unit:"hour"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=24}},{key:"set",value:function set(date,_flags,value){var hours=value<=24?value%24:value;return date.setUTCHours(hours,0,0,0),date}}]),Hour1To24Parser}(Parser),MinuteParser=function(_Parser){_inherits(MinuteParser,_Parser);var _super=_createSuper(MinuteParser);function MinuteParser(){var _this;_classCallCheck(this,MinuteParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",60),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["t","T"]),_this}return _createClass(MinuteParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"m":return parseNumericPattern(numericPatterns_minute,dateString);case"mo":return match.ordinalNumber(dateString,{unit:"minute"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=59}},{key:"set",value:function set(date,_flags,value){return date.setUTCMinutes(value,0,0),date}}]),MinuteParser}(Parser),SecondParser=function(_Parser){_inherits(SecondParser,_Parser);var _super=_createSuper(SecondParser);function SecondParser(){var _this;_classCallCheck(this,SecondParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",50),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["t","T"]),_this}return _createClass(SecondParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"s":return parseNumericPattern(numericPatterns_second,dateString);case"so":return match.ordinalNumber(dateString,{unit:"second"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=59}},{key:"set",value:function set(date,_flags,value){return date.setUTCSeconds(value,0),date}}]),SecondParser}(Parser),FractionOfSecondParser=function(_Parser){_inherits(FractionOfSecondParser,_Parser);var _super=_createSuper(FractionOfSecondParser);function FractionOfSecondParser(){var _this;_classCallCheck(this,FractionOfSecondParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",30),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["t","T"]),_this}return _createClass(FractionOfSecondParser,[{key:"parse",value:function parse(dateString,token){return mapValue(parseNDigits(token.length,dateString),(function valueCallback(value){return Math.floor(value*Math.pow(10,3-token.length))}))}},{key:"set",value:function set(date,_flags,value){return date.setUTCMilliseconds(value),date}}]),FractionOfSecondParser}(Parser),ISOTimezoneWithZParser=function(_Parser){_inherits(ISOTimezoneWithZParser,_Parser);var _super=_createSuper(ISOTimezoneWithZParser);function ISOTimezoneWithZParser(){var _this;_classCallCheck(this,ISOTimezoneWithZParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",10),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["t","T","x"]),_this}return _createClass(ISOTimezoneWithZParser,[{key:"parse",value:function parse(dateString,token){switch(token){case"X":return parseTimezonePattern(timezonePatterns_basicOptionalMinutes,dateString);case"XX":return parseTimezonePattern(timezonePatterns_basic,dateString);case"XXXX":return parseTimezonePattern(timezonePatterns_basicOptionalSeconds,dateString);case"XXXXX":return parseTimezonePattern(timezonePatterns_extendedOptionalSeconds,dateString);default:return parseTimezonePattern(timezonePatterns_extended,dateString)}}},{key:"set",value:function set(date,flags,value){return flags.timestampIsSet?date:new Date(date.getTime()-value)}}]),ISOTimezoneWithZParser}(Parser),ISOTimezoneParser=function(_Parser){_inherits(ISOTimezoneParser,_Parser);var _super=_createSuper(ISOTimezoneParser);function ISOTimezoneParser(){var _this;_classCallCheck(this,ISOTimezoneParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",10),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens",["t","T","X"]),_this}return _createClass(ISOTimezoneParser,[{key:"parse",value:function parse(dateString,token){switch(token){case"x":return parseTimezonePattern(timezonePatterns_basicOptionalMinutes,dateString);case"xx":return parseTimezonePattern(timezonePatterns_basic,dateString);case"xxxx":return parseTimezonePattern(timezonePatterns_basicOptionalSeconds,dateString);case"xxxxx":return parseTimezonePattern(timezonePatterns_extendedOptionalSeconds,dateString);default:return parseTimezonePattern(timezonePatterns_extended,dateString)}}},{key:"set",value:function set(date,flags,value){return flags.timestampIsSet?date:new Date(date.getTime()-value)}}]),ISOTimezoneParser}(Parser),TimestampSecondsParser=function(_Parser){_inherits(TimestampSecondsParser,_Parser);var _super=_createSuper(TimestampSecondsParser);function TimestampSecondsParser(){var _this;_classCallCheck(this,TimestampSecondsParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",40),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens","*"),_this}return _createClass(TimestampSecondsParser,[{key:"parse",value:function parse(dateString){return parseAnyDigitsSigned(dateString)}},{key:"set",value:function set(_date,_flags,value){return[new Date(1e3*value),{timestampIsSet:!0}]}}]),TimestampSecondsParser}(Parser),TimestampMillisecondsParser=function(_Parser){_inherits(TimestampMillisecondsParser,_Parser);var _super=_createSuper(TimestampMillisecondsParser);function TimestampMillisecondsParser(){var _this;_classCallCheck(this,TimestampMillisecondsParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.Z)(_this),"priority",20),_defineProperty((0,assertThisInitialized.Z)(_this),"incompatibleTokens","*"),_this}return _createClass(TimestampMillisecondsParser,[{key:"parse",value:function parse(dateString){return parseAnyDigitsSigned(dateString)}},{key:"set",value:function set(_date,_flags,value){return[new Date(value),{timestampIsSet:!0}]}}]),TimestampMillisecondsParser}(Parser),parsers={G:new EraParser,y:new YearParser,Y:new LocalWeekYearParser,R:new ISOWeekYearParser,u:new ExtendedYearParser,Q:new QuarterParser,q:new StandAloneQuarterParser,M:new MonthParser,L:new StandAloneMonthParser,w:new LocalWeekParser,I:new ISOWeekParser,d:new DateParser,D:new DayOfYearParser,E:new DayParser,e:new LocalDayParser,c:new StandAloneLocalDayParser,i:new ISODayParser,a:new AMPMParser,b:new AMPMMidnightParser,B:new DayPeriodParser,h:new Hour1to12Parser,H:new Hour0to23Parser,K:new Hour0To11Parser,k:new Hour1To24Parser,m:new MinuteParser,s:new SecondParser,S:new FractionOfSecondParser,X:new ISOTimezoneWithZParser,x:new ISOTimezoneParser,t:new TimestampSecondsParser,T:new TimestampMillisecondsParser},formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,notWhitespaceRegExp=/\S/,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function parse(dirtyDateString,dirtyFormatString,dirtyReferenceDate,options){var _ref,_options$locale,_ref2,_ref3,_ref4,_options$firstWeekCon,_options$locale2,_options$locale2$opti,_defaultOptions$local,_defaultOptions$local2,_ref5,_ref6,_ref7,_options$weekStartsOn,_options$locale3,_options$locale3$opti,_defaultOptions$local3,_defaultOptions$local4;(0,requiredArgs.Z)(3,arguments);var dateString=String(dirtyDateString),formatString=String(dirtyFormatString),defaultOptions=(0,_lib_defaultOptions.j)(),locale=null!==(_ref=null!==(_options$locale=null==options?void 0:options.locale)&&void 0!==_options$locale?_options$locale:defaultOptions.locale)&&void 0!==_ref?_ref:defaultLocale.Z;if(!locale.match)throw new RangeError("locale must contain match property");var firstWeekContainsDate=(0,toInteger.Z)(null!==(_ref2=null!==(_ref3=null!==(_ref4=null!==(_options$firstWeekCon=null==options?void 0:options.firstWeekContainsDate)&&void 0!==_options$firstWeekCon?_options$firstWeekCon:null==options||null===(_options$locale2=options.locale)||void 0===_options$locale2||null===(_options$locale2$opti=_options$locale2.options)||void 0===_options$locale2$opti?void 0:_options$locale2$opti.firstWeekContainsDate)&&void 0!==_ref4?_ref4:defaultOptions.firstWeekContainsDate)&&void 0!==_ref3?_ref3:null===(_defaultOptions$local=defaultOptions.locale)||void 0===_defaultOptions$local||null===(_defaultOptions$local2=_defaultOptions$local.options)||void 0===_defaultOptions$local2?void 0:_defaultOptions$local2.firstWeekContainsDate)&&void 0!==_ref2?_ref2:1);if(!(firstWeekContainsDate>=1&&firstWeekContainsDate<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var weekStartsOn=(0,toInteger.Z)(null!==(_ref5=null!==(_ref6=null!==(_ref7=null!==(_options$weekStartsOn=null==options?void 0:options.weekStartsOn)&&void 0!==_options$weekStartsOn?_options$weekStartsOn:null==options||null===(_options$locale3=options.locale)||void 0===_options$locale3||null===(_options$locale3$opti=_options$locale3.options)||void 0===_options$locale3$opti?void 0:_options$locale3$opti.weekStartsOn)&&void 0!==_ref7?_ref7:defaultOptions.weekStartsOn)&&void 0!==_ref6?_ref6:null===(_defaultOptions$local3=defaultOptions.locale)||void 0===_defaultOptions$local3||null===(_defaultOptions$local4=_defaultOptions$local3.options)||void 0===_defaultOptions$local4?void 0:_defaultOptions$local4.weekStartsOn)&&void 0!==_ref5?_ref5:0);if(!(weekStartsOn>=0&&weekStartsOn<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===formatString)return""===dateString?(0,toDate.Z)(dirtyReferenceDate):new Date(NaN);var _step,subFnOptions={firstWeekContainsDate,weekStartsOn,locale},setters=[new DateToSystemTimezoneSetter],tokens=formatString.match(longFormattingTokensRegExp).map((function(substring){var firstCharacter=substring[0];return firstCharacter in longFormatters.Z?(0,longFormatters.Z[firstCharacter])(substring,locale.formatLong):substring})).join("").match(formattingTokensRegExp),usedTokens=[],_iterator=_createForOfIteratorHelper(tokens);try{var _loop=function _loop(){var token=_step.value;null!=options&&options.useAdditionalWeekYearTokens||!(0,protectedTokens.Do)(token)||(0,protectedTokens.qp)(token,formatString,dirtyDateString),null!=options&&options.useAdditionalDayOfYearTokens||!(0,protectedTokens.Iu)(token)||(0,protectedTokens.qp)(token,formatString,dirtyDateString);var firstCharacter=token[0],parser=parsers[firstCharacter];if(parser){var incompatibleTokens=parser.incompatibleTokens;if(Array.isArray(incompatibleTokens)){var incompatibleToken=usedTokens.find((function(usedToken){return incompatibleTokens.includes(usedToken.token)||usedToken.token===firstCharacter}));if(incompatibleToken)throw new RangeError("The format string mustn't contain `".concat(incompatibleToken.fullToken,"` and `").concat(token,"` at the same time"))}else if("*"===parser.incompatibleTokens&&usedTokens.length>0)throw new RangeError("The format string mustn't contain `".concat(token,"` and any other token at the same time"));usedTokens.push({token:firstCharacter,fullToken:token});var parseResult=parser.run(dateString,token,locale.match,subFnOptions);if(!parseResult)return{v:new Date(NaN)};setters.push(parseResult.setter),dateString=parseResult.rest}else{if(firstCharacter.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+firstCharacter+"`");if("''"===token?token="'":"'"===firstCharacter&&(token=function cleanEscapedString(input){return input.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp,"'")}(token)),0!==dateString.indexOf(token))return{v:new Date(NaN)};dateString=dateString.slice(token.length)}};for(_iterator.s();!(_step=_iterator.n()).done;){var _ret=_loop();if("object"===(0,esm_typeof.Z)(_ret))return _ret.v}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(dateString.length>0&&notWhitespaceRegExp.test(dateString))return new Date(NaN);var uniquePrioritySetters=setters.map((function(setter){return setter.priority})).sort((function(a,b){return b-a})).filter((function(priority,index,array){return array.indexOf(priority)===index})).map((function(priority){return setters.filter((function(setter){return setter.priority===priority})).sort((function(a,b){return b.subPriority-a.subPriority}))})).map((function(setterArray){return setterArray[0]})),date=(0,toDate.Z)(dirtyReferenceDate);if(isNaN(date.getTime()))return new Date(NaN);var _step2,utcDate=(0,subMilliseconds.Z)(date,(0,getTimezoneOffsetInMilliseconds.Z)(date)),flags={},_iterator2=_createForOfIteratorHelper(uniquePrioritySetters);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var setter=_step2.value;if(!setter.validate(utcDate,subFnOptions))return new Date(NaN);var result=setter.set(utcDate,flags,subFnOptions);Array.isArray(result)?(utcDate=result[0],(0,_lib_assign.Z)(flags,result[1])):utcDate=result}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return utcDate}},"./node_modules/date-fns/esm/parseISO/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>parseISO});var _constants_index_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/date-fns/esm/constants/index.js"),_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/date-fns/esm/_lib/requiredArgs/index.js"),_lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/date-fns/esm/_lib/toInteger/index.js");function parseISO(argument,options){var _options$additionalDi;(0,_lib_requiredArgs_index_js__WEBPACK_IMPORTED_MODULE_0__.Z)(1,arguments);var additionalDigits=(0,_lib_toInteger_index_js__WEBPACK_IMPORTED_MODULE_1__.Z)(null!==(_options$additionalDi=null==options?void 0:options.additionalDigits)&&void 0!==_options$additionalDi?_options$additionalDi:2);if(2!==additionalDigits&&1!==additionalDigits&&0!==additionalDigits)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof argument&&"[object String]"!==Object.prototype.toString.call(argument))return new Date(NaN);var date,dateStrings=function splitDateString(dateString){var timeString,dateStrings={},array=dateString.split(patterns.dateTimeDelimiter);if(array.length>2)return dateStrings;/:/.test(array[0])?timeString=array[0]:(dateStrings.date=array[0],timeString=array[1],patterns.timeZoneDelimiter.test(dateStrings.date)&&(dateStrings.date=dateString.split(patterns.timeZoneDelimiter)[0],timeString=dateString.substr(dateStrings.date.length,dateString.length)));if(timeString){var token=patterns.timezone.exec(timeString);token?(dateStrings.time=timeString.replace(token[1],""),dateStrings.timezone=token[1]):dateStrings.time=timeString}return dateStrings}(argument);if(dateStrings.date){var parseYearResult=function parseYear(dateString,additionalDigits){var regex=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+additionalDigits)+"})|(\\d{2}|[+-]\\d{"+(2+additionalDigits)+"})$)"),captures=dateString.match(regex);if(!captures)return{year:NaN,restDateString:""};var year=captures[1]?parseInt(captures[1]):null,century=captures[2]?parseInt(captures[2]):null;return{year:null===century?year:100*century,restDateString:dateString.slice((captures[1]||captures[2]).length)}}(dateStrings.date,additionalDigits);date=function parseDate(dateString,year){if(null===year)return new Date(NaN);var captures=dateString.match(dateRegex);if(!captures)return new Date(NaN);var isWeekDate=!!captures[4],dayOfYear=parseDateUnit(captures[1]),month=parseDateUnit(captures[2])-1,day=parseDateUnit(captures[3]),week=parseDateUnit(captures[4]),dayOfWeek=parseDateUnit(captures[5])-1;if(isWeekDate)return function validateWeekDate(_year,week,day){return week>=1&&week<=53&&day>=0&&day<=6}(0,week,dayOfWeek)?function dayOfISOWeekYear(isoWeekYear,week,day){var date=new Date(0);date.setUTCFullYear(isoWeekYear,0,4);var fourthOfJanuaryDay=date.getUTCDay()||7,diff=7*(week-1)+day+1-fourthOfJanuaryDay;return date.setUTCDate(date.getUTCDate()+diff),date}(year,week,dayOfWeek):new Date(NaN);var date=new Date(0);return function validateDate(year,month,date){return month>=0&&month<=11&&date>=1&&date<=(daysInMonths[month]||(isLeapYearIndex(year)?29:28))}(year,month,day)&&function validateDayOfYearDate(year,dayOfYear){return dayOfYear>=1&&dayOfYear<=(isLeapYearIndex(year)?366:365)}(year,dayOfYear)?(date.setUTCFullYear(year,month,Math.max(dayOfYear,day)),date):new Date(NaN)}(parseYearResult.restDateString,parseYearResult.year)}if(!date||isNaN(date.getTime()))return new Date(NaN);var offset,timestamp=date.getTime(),time=0;if(dateStrings.time&&(time=function parseTime(timeString){var captures=timeString.match(timeRegex);if(!captures)return NaN;var hours=parseTimeUnit(captures[1]),minutes=parseTimeUnit(captures[2]),seconds=parseTimeUnit(captures[3]);if(!function validateTime(hours,minutes,seconds){if(24===hours)return 0===minutes&&0===seconds;return seconds>=0&&seconds<60&&minutes>=0&&minutes<60&&hours>=0&&hours<25}(hours,minutes,seconds))return NaN;return hours*_constants_index_js__WEBPACK_IMPORTED_MODULE_2__.vh+minutes*_constants_index_js__WEBPACK_IMPORTED_MODULE_2__.yJ+1e3*seconds}(dateStrings.time),isNaN(time)))return new Date(NaN);if(!dateStrings.timezone){var dirtyDate=new Date(timestamp+time),result=new Date(0);return result.setFullYear(dirtyDate.getUTCFullYear(),dirtyDate.getUTCMonth(),dirtyDate.getUTCDate()),result.setHours(dirtyDate.getUTCHours(),dirtyDate.getUTCMinutes(),dirtyDate.getUTCSeconds(),dirtyDate.getUTCMilliseconds()),result}return offset=function parseTimezone(timezoneString){if("Z"===timezoneString)return 0;var captures=timezoneString.match(timezoneRegex);if(!captures)return 0;var sign="+"===captures[1]?-1:1,hours=parseInt(captures[2]),minutes=captures[3]&&parseInt(captures[3])||0;if(!function validateTimezone(_hours,minutes){return minutes>=0&&minutes<=59}(0,minutes))return NaN;return sign*(hours*_constants_index_js__WEBPACK_IMPORTED_MODULE_2__.vh+minutes*_constants_index_js__WEBPACK_IMPORTED_MODULE_2__.yJ)}(dateStrings.timezone),isNaN(offset)?new Date(NaN):new Date(timestamp+time+offset)}var patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function parseDateUnit(value){return value?parseInt(value):1}function parseTimeUnit(value){return value&&parseFloat(value.replace(",","."))||0}var daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(year){return year%400==0||year%4==0&&year%100!=0}},"./node_modules/date-fns/esm/subMilliseconds/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>subMilliseconds});var toInteger=__webpack_require__("./node_modules/date-fns/esm/_lib/toInteger/index.js"),toDate=__webpack_require__("./node_modules/date-fns/esm/toDate/index.js"),requiredArgs=__webpack_require__("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function subMilliseconds(dirtyDate,dirtyAmount){return(0,requiredArgs.Z)(2,arguments),function addMilliseconds(dirtyDate,dirtyAmount){(0,requiredArgs.Z)(2,arguments);var timestamp=(0,toDate.Z)(dirtyDate).getTime(),amount=(0,toInteger.Z)(dirtyAmount);return new Date(timestamp+amount)}(dirtyDate,-(0,toInteger.Z)(dirtyAmount))}},"./node_modules/ol/format/WFS.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>format_WFS});var Feature=__webpack_require__("./node_modules/ol/Feature.js"),Geometry=__webpack_require__("./node_modules/ol/geom/Geometry.js"),LineString=__webpack_require__("./node_modules/ol/geom/LineString.js"),LinearRing=__webpack_require__("./node_modules/ol/geom/LinearRing.js"),MultiLineString=__webpack_require__("./node_modules/ol/geom/MultiLineString.js"),MultiPoint=__webpack_require__("./node_modules/ol/geom/MultiPoint.js"),MultiPolygon=__webpack_require__("./node_modules/ol/geom/MultiPolygon.js"),Point=__webpack_require__("./node_modules/ol/geom/Point.js"),Polygon=__webpack_require__("./node_modules/ol/geom/Polygon.js"),format_Feature=__webpack_require__("./node_modules/ol/format/Feature.js"),util=__webpack_require__("./node_modules/ol/util.js"),ol_array=__webpack_require__("./node_modules/ol/array.js");function xml_createElementNS(namespaceURI,qualifiedName){return xml_getDocument().createElementNS(namespaceURI,qualifiedName)}function xml_getAllTextContent(node,normalizeWhitespace){return getAllTextContent_(node,normalizeWhitespace,[]).join("")}function getAllTextContent_(node,normalizeWhitespace,accumulator){if(node.nodeType==Node.CDATA_SECTION_NODE||node.nodeType==Node.TEXT_NODE)normalizeWhitespace?accumulator.push(String(node.nodeValue).replace(/(\r\n|\r|\n)/g,"")):accumulator.push(node.nodeValue);else{let n;for(n=node.firstChild;n;n=n.nextSibling)getAllTextContent_(n,normalizeWhitespace,accumulator)}return accumulator}function isDocument(object){return"documentElement"in object}function parse(xml){return(new DOMParser).parseFromString(xml,"application/xml")}function makeArrayExtender(valueReader,thisArg){return function(node,objectStack){const value=valueReader.call(void 0!==thisArg?thisArg:this,node,objectStack);if(void 0!==value){const array=objectStack[objectStack.length-1];(0,ol_array.l7)(array,value)}}}function makeArrayPusher(valueReader,thisArg){return function(node,objectStack){const value=valueReader.call(void 0!==thisArg?thisArg:this,node,objectStack);if(void 0!==value){objectStack[objectStack.length-1].push(value)}}}function makeReplacer(valueReader,thisArg){return function(node,objectStack){const value=valueReader.call(void 0!==thisArg?thisArg:this,node,objectStack);void 0!==value&&(objectStack[objectStack.length-1]=value)}}function makeObjectPropertySetter(valueReader,property,thisArg){return function(node,objectStack){const value=valueReader.call(void 0!==thisArg?thisArg:this,node,objectStack);if(void 0!==value){objectStack[objectStack.length-1][void 0!==property?property:node.localName]=value}}}function makeChildAppender(nodeWriter,thisArg){return function(node,value,objectStack){nodeWriter.call(void 0!==thisArg?thisArg:this,node,value,objectStack);objectStack[objectStack.length-1].node.appendChild(node)}}function makeSimpleNodeFactory(fixedNodeName,fixedNamespaceURI){return function(value,objectStack,newNodeName){const node=objectStack[objectStack.length-1].node;let nodeName=fixedNodeName;void 0===nodeName&&(nodeName=newNodeName);return xml_createElementNS(void 0!==fixedNamespaceURI?fixedNamespaceURI:node.namespaceURI,nodeName)}}const OBJECT_PROPERTY_NODE_FACTORY=makeSimpleNodeFactory();function parseNode(parsersNS,node,objectStack,thisArg){let n;for(n=node.firstElementChild;n;n=n.nextElementSibling){const parsers=parsersNS[n.namespaceURI];if(void 0!==parsers){const parser=parsers[n.localName];void 0!==parser&&parser.call(thisArg,n,objectStack)}}}function pushParseAndPop(object,parsersNS,node,objectStack,thisArg){return objectStack.push(object),parseNode(parsersNS,node,objectStack,thisArg),objectStack.pop()}function serialize(serializersNS,nodeFactory,values,objectStack,keys,thisArg){const length=(void 0!==keys?keys:values).length;let value,node;for(let i=0;i<length;++i)value=values[i],void 0!==value&&(node=nodeFactory.call(void 0!==thisArg?thisArg:this,value,objectStack,void 0!==keys?keys[i]:void 0),void 0!==node&&serializersNS[node.namespaceURI][node.localName].call(thisArg,node,value,objectStack))}function pushSerializeAndPop(object,serializersNS,nodeFactory,values,objectStack,keys,thisArg){return objectStack.push(object),serialize(serializersNS,nodeFactory,values,objectStack,keys,thisArg),objectStack.pop()}let xmlSerializer_,document_;function xml_getDocument(){return void 0===document_&&"undefined"!=typeof document&&(document_=document.implementation.createDocument("","",null)),document_}class XMLFeature extends format_Feature.ZP{constructor(){super(),this.xmlSerializer_=function getXMLSerializer(){return void 0===xmlSerializer_&&"undefined"!=typeof XMLSerializer&&(xmlSerializer_=new XMLSerializer),xmlSerializer_}()}getType(){return"xml"}readFeature(source,options){if(!source)return null;if("string"==typeof source){const doc=parse(source);return this.readFeatureFromDocument(doc,options)}return isDocument(source)?this.readFeatureFromDocument(source,options):this.readFeatureFromNode(source,options)}readFeatureFromDocument(doc,options){const features=this.readFeaturesFromDocument(doc,options);return features.length>0?features[0]:null}readFeatureFromNode(node,options){return null}readFeatures(source,options){if(!source)return[];if("string"==typeof source){const doc=parse(source);return this.readFeaturesFromDocument(doc,options)}return isDocument(source)?this.readFeaturesFromDocument(source,options):this.readFeaturesFromNode(source,options)}readFeaturesFromDocument(doc,options){const features=[];for(let n=doc.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&(0,ol_array.l7)(features,this.readFeaturesFromNode(n,options));return features}readFeaturesFromNode(node,options){return(0,util.O3)()}readGeometry(source,options){if(!source)return null;if("string"==typeof source){const doc=parse(source);return this.readGeometryFromDocument(doc,options)}return isDocument(source)?this.readGeometryFromDocument(source,options):this.readGeometryFromNode(source,options)}readGeometryFromDocument(doc,options){return null}readGeometryFromNode(node,options){return null}readProjection(source){if(!source)return null;if("string"==typeof source){const doc=parse(source);return this.readProjectionFromDocument(doc)}return isDocument(source)?this.readProjectionFromDocument(source):this.readProjectionFromNode(source)}readProjectionFromDocument(doc){return this.dataProjection}readProjectionFromNode(node){return this.dataProjection}writeFeature(feature,options){const node=this.writeFeatureNode(feature,options);return this.xmlSerializer_.serializeToString(node)}writeFeatureNode(feature,options){return null}writeFeatures(features,options){const node=this.writeFeaturesNode(features,options);return this.xmlSerializer_.serializeToString(node)}writeFeaturesNode(features,options){return null}writeGeometry(geometry,options){const node=this.writeGeometryNode(geometry,options);return this.xmlSerializer_.serializeToString(node)}writeGeometryNode(geometry,options){return null}}const format_XMLFeature=XMLFeature;var ol_proj=__webpack_require__("./node_modules/ol/proj.js");const GMLNS="http://www.opengis.net/gml",ONLY_WHITESPACE_RE=/^\s*$/;class GMLBase extends format_XMLFeature{constructor(options){super(),options=options||{},this.featureType=options.featureType,this.featureNS=options.featureNS,this.srsName=options.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:makeArrayPusher(this.readFeaturesInternal),featureMembers:makeReplacer(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(node,objectStack){const localName=node.localName;let features=null;if("FeatureCollection"==localName)features=pushParseAndPop([],this.FEATURE_COLLECTION_PARSERS,node,objectStack,this);else if("featureMembers"==localName||"featureMember"==localName||"member"==localName){const context=objectStack[0];let featureType=context.featureType,featureNS=context.featureNS;const prefix="p",defaultPrefix="p0";if(!featureType&&node.childNodes){featureType=[],featureNS={};for(let i=0,ii=node.childNodes.length;i<ii;++i){const child=node.childNodes[i];if(1===child.nodeType){const ft=child.nodeName.split(":").pop();if(!featureType.includes(ft)){let key="",count=0;const uri=child.namespaceURI;for(const candidate in featureNS){if(featureNS[candidate]===uri){key=candidate;break}++count}key||(key=prefix+count,featureNS[key]=uri),featureType.push(key+":"+ft)}}}"featureMember"!=localName&&(context.featureType=featureType,context.featureNS=featureNS)}if("string"==typeof featureNS){const ns=featureNS;featureNS={},featureNS[defaultPrefix]=ns}const parsersNS={},featureTypes=Array.isArray(featureType)?featureType:[featureType];for(const p in featureNS){const parsers={};for(let i=0,ii=featureTypes.length;i<ii;++i){(featureTypes[i].includes(":")?featureTypes[i].split(":")[0]:defaultPrefix)===p&&(parsers[featureTypes[i].split(":").pop()]="featureMembers"==localName?makeArrayPusher(this.readFeatureElement,this):makeReplacer(this.readFeatureElement,this))}parsersNS[featureNS[p]]=parsers}features=pushParseAndPop("featureMember"==localName||"member"==localName?void 0:[],parsersNS,node,objectStack)}return null===features&&(features=[]),features}readGeometryOrExtent(node,objectStack){const context=objectStack[0];return context.srsName=node.firstElementChild.getAttribute("srsName"),context.srsDimension=node.firstElementChild.getAttribute("srsDimension"),pushParseAndPop(null,this.GEOMETRY_PARSERS,node,objectStack,this)}readExtentElement(node,objectStack){const context=objectStack[0],extent=this.readGeometryOrExtent(node,objectStack);return extent?(0,format_Feature.lj)(extent,context):void 0}readGeometryElement(node,objectStack){const context=objectStack[0],geometry=this.readGeometryOrExtent(node,objectStack);return geometry?(0,format_Feature.fI)(geometry,!1,context):void 0}readFeatureElementInternal(node,objectStack,asFeature){let geometryName;const values={};for(let n=node.firstElementChild;n;n=n.nextElementSibling){let value;const localName=n.localName;0===n.childNodes.length||1===n.childNodes.length&&(3===n.firstChild.nodeType||4===n.firstChild.nodeType)?(value=xml_getAllTextContent(n,!1),ONLY_WHITESPACE_RE.test(value)&&(value=void 0)):(asFeature&&(value="boundedBy"===localName?this.readExtentElement(n,objectStack):this.readGeometryElement(n,objectStack)),value?"boundedBy"!==localName&&(geometryName=localName):value=this.readFeatureElementInternal(n,objectStack,!1));const len=n.attributes.length;if(len>0&&!(value instanceof Geometry.Z)){value={_content_:value};for(let i=0;i<len;i++){value[n.attributes[i].name]=n.attributes[i].value}}values[localName]?(values[localName]instanceof Array||(values[localName]=[values[localName]]),values[localName].push(value)):values[localName]=value}if(!asFeature)return values;const feature=new Feature.Z(values);geometryName&&feature.setGeometryName(geometryName);const fid=node.getAttribute("fid")||function getAttributeNS(node,namespaceURI,name){return node.getAttributeNS(namespaceURI,name)||""}(node,this.namespace,"id");return fid&&feature.setId(fid),feature}readFeatureElement(node,objectStack){return this.readFeatureElementInternal(node,objectStack,!0)}readPoint(node,objectStack){const flatCoordinates=this.readFlatCoordinatesFromNode(node,objectStack);if(flatCoordinates)return new Point.Z(flatCoordinates,"XYZ")}readMultiPoint(node,objectStack){const coordinates=pushParseAndPop([],this.MULTIPOINT_PARSERS,node,objectStack,this);if(coordinates)return new MultiPoint.Z(coordinates)}readMultiLineString(node,objectStack){const lineStrings=pushParseAndPop([],this.MULTILINESTRING_PARSERS,node,objectStack,this);if(lineStrings)return new MultiLineString.Z(lineStrings)}readMultiPolygon(node,objectStack){const polygons=pushParseAndPop([],this.MULTIPOLYGON_PARSERS,node,objectStack,this);if(polygons)return new MultiPolygon.Z(polygons)}pointMemberParser(node,objectStack){parseNode(this.POINTMEMBER_PARSERS,node,objectStack,this)}lineStringMemberParser(node,objectStack){parseNode(this.LINESTRINGMEMBER_PARSERS,node,objectStack,this)}polygonMemberParser(node,objectStack){parseNode(this.POLYGONMEMBER_PARSERS,node,objectStack,this)}readLineString(node,objectStack){const flatCoordinates=this.readFlatCoordinatesFromNode(node,objectStack);if(flatCoordinates){return new LineString.Z(flatCoordinates,"XYZ")}}readFlatLinearRing(node,objectStack){const ring=pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,node,objectStack,this);if(ring)return ring}readLinearRing(node,objectStack){const flatCoordinates=this.readFlatCoordinatesFromNode(node,objectStack);if(flatCoordinates)return new LinearRing.Z(flatCoordinates,"XYZ")}readPolygon(node,objectStack){const flatLinearRings=pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS,node,objectStack,this);if(flatLinearRings&&flatLinearRings[0]){const flatCoordinates=flatLinearRings[0],ends=[flatCoordinates.length];let i,ii;for(i=1,ii=flatLinearRings.length;i<ii;++i)(0,ol_array.l7)(flatCoordinates,flatLinearRings[i]),ends.push(flatCoordinates.length);return new Polygon.ZP(flatCoordinates,"XYZ",ends)}}readFlatCoordinatesFromNode(node,objectStack){return pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,node,objectStack,this)}readGeometryFromNode(node,options){const geometry=this.readGeometryElement(node,[this.getReadOptions(node,options||{})]);return geometry||null}readFeaturesFromNode(node,options){const internalOptions={featureType:this.featureType,featureNS:this.featureNS};internalOptions&&Object.assign(internalOptions,this.getReadOptions(node,options));return this.readFeaturesInternal(node,[internalOptions])||[]}readProjectionFromNode(node){return(0,ol_proj.U2)(this.srsName?this.srsName:node.firstElementChild.getAttribute("srsName"))}}GMLBase.prototype.namespace=GMLNS,GMLBase.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},GMLBase.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},GMLBase.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},GMLBase.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:makeArrayPusher(GMLBase.prototype.pointMemberParser),pointMembers:makeArrayPusher(GMLBase.prototype.pointMemberParser)}},GMLBase.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:makeArrayPusher(GMLBase.prototype.lineStringMemberParser),lineStringMembers:makeArrayPusher(GMLBase.prototype.lineStringMemberParser)}},GMLBase.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:makeArrayPusher(GMLBase.prototype.polygonMemberParser),polygonMembers:makeArrayPusher(GMLBase.prototype.polygonMemberParser)}},GMLBase.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:makeArrayPusher(GMLBase.prototype.readFlatCoordinatesFromNode)}},GMLBase.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:makeArrayPusher(GMLBase.prototype.readLineString)}},GMLBase.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:makeArrayPusher(GMLBase.prototype.readPolygon)}},GMLBase.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:makeReplacer(GMLBase.prototype.readFlatLinearRing)}};const format_GMLBase=GMLBase;var extent=__webpack_require__("./node_modules/ol/extent.js");function readPositiveInteger(node){return readNonNegativeIntegerString(xml_getAllTextContent(node,!1))}function readNonNegativeIntegerString(string){const m=/^\s*(\d+)\s*$/.exec(string);if(m)return parseInt(m[1],10)}function writeStringTextNode(node,string){node.appendChild(xml_getDocument().createTextNode(string))}const schemaLocation=GMLNS+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",MULTIGEOMETRY_TO_MEMBER_NODENAME={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class GML2 extends format_GMLBase{constructor(options){super(options=options||{}),this.FEATURE_COLLECTION_PARSERS[GMLNS].featureMember=makeArrayPusher(this.readFeaturesInternal),this.schemaLocation=options.schemaLocation?options.schemaLocation:schemaLocation}readFlatCoordinates(node,objectStack){const s=xml_getAllTextContent(node,!1).replace(/^\s*|\s*$/g,""),containerSrs=objectStack[0].srsName;let axisOrientation="enu";if(containerSrs){const proj=(0,ol_proj.U2)(containerSrs);proj&&(axisOrientation=proj.getAxisOrientation())}const coordsGroups=s.trim().split(/\s+/),flatCoordinates=[];for(let i=0,ii=coordsGroups.length;i<ii;i++){const coords=coordsGroups[i].split(/,+/),x=parseFloat(coords[0]),y=parseFloat(coords[1]),z=3===coords.length?parseFloat(coords[2]):0;"en"===axisOrientation.substr(0,2)?flatCoordinates.push(x,y,z):flatCoordinates.push(y,x,z)}return flatCoordinates}readBox(node,objectStack){const flatCoordinates=pushParseAndPop([null],this.BOX_PARSERS_,node,objectStack,this);return(0,extent.T9)(flatCoordinates[1][0],flatCoordinates[1][1],flatCoordinates[1][3],flatCoordinates[1][4])}innerBoundaryIsParser(node,objectStack){const flatLinearRing=pushParseAndPop(void 0,this.RING_PARSERS,node,objectStack,this);if(flatLinearRing){objectStack[objectStack.length-1].push(flatLinearRing)}}outerBoundaryIsParser(node,objectStack){const flatLinearRing=pushParseAndPop(void 0,this.RING_PARSERS,node,objectStack,this);if(flatLinearRing){objectStack[objectStack.length-1][0]=flatLinearRing}}GEOMETRY_NODE_FACTORY_(value,objectStack,nodeName){const context=objectStack[objectStack.length-1],multiSurface=context.multiSurface,surface=context.surface,multiCurve=context.multiCurve;return Array.isArray(value)?nodeName="Envelope":"MultiPolygon"===(nodeName=value.getType())&&!0===multiSurface?nodeName="MultiSurface":"Polygon"===nodeName&&!0===surface?nodeName="Surface":"MultiLineString"===nodeName&&!0===multiCurve&&(nodeName="MultiCurve"),xml_createElementNS("http://www.opengis.net/gml",nodeName)}writeFeatureElement(node,feature,objectStack){const fid=feature.getId();fid&&node.setAttribute("fid",fid);const context=objectStack[objectStack.length-1],featureNS=context.featureNS,geometryName=feature.getGeometryName();context.serializers||(context.serializers={},context.serializers[featureNS]={});const keys=[],values=[];if(feature.hasProperties()){const properties=feature.getProperties();for(const key in properties){const value=properties[key];null!==value&&(keys.push(key),values.push(value),key==geometryName||"function"==typeof value.getSimplifiedGeometry?key in context.serializers[featureNS]||(context.serializers[featureNS][key]=makeChildAppender(this.writeGeometryElement,this)):key in context.serializers[featureNS]||(context.serializers[featureNS][key]=makeChildAppender(writeStringTextNode)))}}const item=Object.assign({},context);item.node=node,pushSerializeAndPop(item,context.serializers,makeSimpleNodeFactory(void 0,featureNS),values,objectStack,keys)}writeCurveOrLineString(node,geometry,objectStack){const srsName=objectStack[objectStack.length-1].srsName;if("LineStringSegment"!==node.nodeName&&srsName&&node.setAttribute("srsName",srsName),"LineString"===node.nodeName||"LineStringSegment"===node.nodeName){const coordinates=this.createCoordinatesNode_(node.namespaceURI);node.appendChild(coordinates),this.writeCoordinates_(coordinates,geometry,objectStack)}else if("Curve"===node.nodeName){const segments=xml_createElementNS(node.namespaceURI,"segments");node.appendChild(segments),this.writeCurveSegments_(segments,geometry,objectStack)}}writeLineStringOrCurveMember(node,line,objectStack){const child=this.GEOMETRY_NODE_FACTORY_(line,objectStack);child&&(node.appendChild(child),this.writeCurveOrLineString(child,line,objectStack))}writeMultiCurveOrLineString(node,geometry,objectStack){const context=objectStack[objectStack.length-1],hasZ=context.hasZ,srsName=context.srsName,curve=context.curve;srsName&&node.setAttribute("srsName",srsName);const lines=geometry.getLineStrings();pushSerializeAndPop({node,hasZ,srsName,curve},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,lines,objectStack,void 0,this)}writeGeometryElement(node,geometry,objectStack){const context=objectStack[objectStack.length-1],item=Object.assign({},context);let value;item.node=node,value=Array.isArray(geometry)?(0,format_Feature.lj)(geometry,context):(0,format_Feature.fI)(geometry,!0,context),pushSerializeAndPop(item,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[value],objectStack,void 0,this)}createCoordinatesNode_(namespaceURI){const coordinates=xml_createElementNS(namespaceURI,"coordinates");return coordinates.setAttribute("decimal","."),coordinates.setAttribute("cs",","),coordinates.setAttribute("ts"," "),coordinates}writeCoordinates_(node,value,objectStack){const context=objectStack[objectStack.length-1],hasZ=context.hasZ,srsName=context.srsName,points=value.getCoordinates(),len=points.length,parts=new Array(len);for(let i=0;i<len;++i){const point=points[i];parts[i]=this.getCoords_(point,srsName,hasZ)}writeStringTextNode(node,parts.join(" "))}writeCurveSegments_(node,line,objectStack){const child=xml_createElementNS(node.namespaceURI,"LineStringSegment");node.appendChild(child),this.writeCurveOrLineString(child,line,objectStack)}writeSurfaceOrPolygon(node,geometry,objectStack){const context=objectStack[objectStack.length-1],hasZ=context.hasZ,srsName=context.srsName;if("PolygonPatch"!==node.nodeName&&srsName&&node.setAttribute("srsName",srsName),"Polygon"===node.nodeName||"PolygonPatch"===node.nodeName){const rings=geometry.getLinearRings();pushSerializeAndPop({node,hasZ,srsName},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,rings,objectStack,void 0,this)}else if("Surface"===node.nodeName){const patches=xml_createElementNS(node.namespaceURI,"patches");node.appendChild(patches),this.writeSurfacePatches_(patches,geometry,objectStack)}}RING_NODE_FACTORY_(value,objectStack,nodeName){const context=objectStack[objectStack.length-1],parentNode=context.node,exteriorWritten=context.exteriorWritten;return void 0===exteriorWritten&&(context.exteriorWritten=!0),xml_createElementNS(parentNode.namespaceURI,void 0!==exteriorWritten?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(node,polygon,objectStack){const child=xml_createElementNS(node.namespaceURI,"PolygonPatch");node.appendChild(child),this.writeSurfaceOrPolygon(child,polygon,objectStack)}writeRing(node,ring,objectStack){const linearRing=xml_createElementNS(node.namespaceURI,"LinearRing");node.appendChild(linearRing),this.writeLinearRing(linearRing,ring,objectStack)}getCoords_(point,srsName,hasZ){let axisOrientation="enu";srsName&&(axisOrientation=(0,ol_proj.U2)(srsName).getAxisOrientation());let coords="en"===axisOrientation.substr(0,2)?point[0]+","+point[1]:point[1]+","+point[0];if(hasZ){coords+=","+(point[2]||0)}return coords}writePoint(node,geometry,objectStack){const context=objectStack[objectStack.length-1],hasZ=context.hasZ,srsName=context.srsName;srsName&&node.setAttribute("srsName",srsName);const coordinates=this.createCoordinatesNode_(node.namespaceURI);node.appendChild(coordinates);const point=geometry.getCoordinates();writeStringTextNode(coordinates,this.getCoords_(point,srsName,hasZ))}writeMultiPoint(node,geometry,objectStack){const context=objectStack[objectStack.length-1],hasZ=context.hasZ,srsName=context.srsName;srsName&&node.setAttribute("srsName",srsName);const points=geometry.getPoints();pushSerializeAndPop({node,hasZ,srsName},this.POINTMEMBER_SERIALIZERS,makeSimpleNodeFactory("pointMember"),points,objectStack,void 0,this)}writePointMember(node,point,objectStack){const child=xml_createElementNS(node.namespaceURI,"Point");node.appendChild(child),this.writePoint(child,point,objectStack)}writeLinearRing(node,geometry,objectStack){const srsName=objectStack[objectStack.length-1].srsName;srsName&&node.setAttribute("srsName",srsName);const coordinates=this.createCoordinatesNode_(node.namespaceURI);node.appendChild(coordinates),this.writeCoordinates_(coordinates,geometry,objectStack)}writeMultiSurfaceOrPolygon(node,geometry,objectStack){const context=objectStack[objectStack.length-1],hasZ=context.hasZ,srsName=context.srsName,surface=context.surface;srsName&&node.setAttribute("srsName",srsName);const polygons=geometry.getPolygons();pushSerializeAndPop({node,hasZ,srsName,surface},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,polygons,objectStack,void 0,this)}writeSurfaceOrPolygonMember(node,polygon,objectStack){const child=this.GEOMETRY_NODE_FACTORY_(polygon,objectStack);child&&(node.appendChild(child),this.writeSurfaceOrPolygon(child,polygon,objectStack))}writeEnvelope(node,extent,objectStack){const srsName=objectStack[objectStack.length-1].srsName;srsName&&node.setAttribute("srsName",srsName);const values=[extent[0]+" "+extent[1],extent[2]+" "+extent[3]];pushSerializeAndPop({node},this.ENVELOPE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,values,objectStack,["lowerCorner","upperCorner"],this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(value,objectStack,nodeName){const parentNode=objectStack[objectStack.length-1].node;return xml_createElementNS("http://www.opengis.net/gml",MULTIGEOMETRY_TO_MEMBER_NODENAME[parentNode.nodeName])}}GML2.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:makeReplacer(GML2.prototype.readFlatCoordinates)}},GML2.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:GML2.prototype.innerBoundaryIsParser,outerBoundaryIs:GML2.prototype.outerBoundaryIsParser}},GML2.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:makeArrayPusher(GML2.prototype.readFlatCoordinates)}},GML2.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:makeReplacer(format_GMLBase.prototype.readPoint),MultiPoint:makeReplacer(format_GMLBase.prototype.readMultiPoint),LineString:makeReplacer(format_GMLBase.prototype.readLineString),MultiLineString:makeReplacer(format_GMLBase.prototype.readMultiLineString),LinearRing:makeReplacer(format_GMLBase.prototype.readLinearRing),Polygon:makeReplacer(format_GMLBase.prototype.readPolygon),MultiPolygon:makeReplacer(format_GMLBase.prototype.readMultiPolygon),Box:makeReplacer(GML2.prototype.readBox)}},GML2.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:makeChildAppender(GML2.prototype.writeCurveOrLineString),MultiCurve:makeChildAppender(GML2.prototype.writeMultiCurveOrLineString),Point:makeChildAppender(GML2.prototype.writePoint),MultiPoint:makeChildAppender(GML2.prototype.writeMultiPoint),LineString:makeChildAppender(GML2.prototype.writeCurveOrLineString),MultiLineString:makeChildAppender(GML2.prototype.writeMultiCurveOrLineString),LinearRing:makeChildAppender(GML2.prototype.writeLinearRing),Polygon:makeChildAppender(GML2.prototype.writeSurfaceOrPolygon),MultiPolygon:makeChildAppender(GML2.prototype.writeMultiSurfaceOrPolygon),Surface:makeChildAppender(GML2.prototype.writeSurfaceOrPolygon),MultiSurface:makeChildAppender(GML2.prototype.writeMultiSurfaceOrPolygon),Envelope:makeChildAppender(GML2.prototype.writeEnvelope)}},GML2.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:makeChildAppender(GML2.prototype.writeLineStringOrCurveMember),curveMember:makeChildAppender(GML2.prototype.writeLineStringOrCurveMember)}},GML2.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:makeChildAppender(GML2.prototype.writeRing),innerBoundaryIs:makeChildAppender(GML2.prototype.writeRing)}},GML2.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:makeChildAppender(GML2.prototype.writePointMember)}},GML2.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:makeChildAppender(GML2.prototype.writeSurfaceOrPolygonMember),polygonMember:makeChildAppender(GML2.prototype.writeSurfaceOrPolygonMember)}},GML2.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:makeChildAppender(writeStringTextNode),upperCorner:makeChildAppender(writeStringTextNode)}};const format_GML2=GML2,GML3_schemaLocation=GMLNS+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",GML3_MULTIGEOMETRY_TO_MEMBER_NODENAME={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class GML3 extends format_GMLBase{constructor(options){super(options=options||{}),this.surface_=void 0!==options.surface&&options.surface,this.curve_=void 0!==options.curve&&options.curve,this.multiCurve_=void 0===options.multiCurve||options.multiCurve,this.multiSurface_=void 0===options.multiSurface||options.multiSurface,this.schemaLocation=options.schemaLocation?options.schemaLocation:GML3_schemaLocation,this.hasZ=void 0!==options.hasZ&&options.hasZ}readMultiCurve(node,objectStack){const lineStrings=pushParseAndPop([],this.MULTICURVE_PARSERS,node,objectStack,this);if(lineStrings){return new MultiLineString.Z(lineStrings)}}readFlatCurveRing(node,objectStack){const lineStrings=pushParseAndPop([],this.MULTICURVE_PARSERS,node,objectStack,this),flatCoordinates=[];for(let i=0,ii=lineStrings.length;i<ii;++i)(0,ol_array.l7)(flatCoordinates,lineStrings[i].getFlatCoordinates());return flatCoordinates}readMultiSurface(node,objectStack){const polygons=pushParseAndPop([],this.MULTISURFACE_PARSERS,node,objectStack,this);if(polygons)return new MultiPolygon.Z(polygons)}curveMemberParser(node,objectStack){parseNode(this.CURVEMEMBER_PARSERS,node,objectStack,this)}surfaceMemberParser(node,objectStack){parseNode(this.SURFACEMEMBER_PARSERS,node,objectStack,this)}readPatch(node,objectStack){return pushParseAndPop([null],this.PATCHES_PARSERS,node,objectStack,this)}readSegment(node,objectStack){return pushParseAndPop([],this.SEGMENTS_PARSERS,node,objectStack,this)}readPolygonPatch(node,objectStack){return pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS,node,objectStack,this)}readLineStringSegment(node,objectStack){return pushParseAndPop([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,node,objectStack,this)}interiorParser(node,objectStack){const flatLinearRing=pushParseAndPop(void 0,this.RING_PARSERS,node,objectStack,this);if(flatLinearRing){objectStack[objectStack.length-1].push(flatLinearRing)}}exteriorParser(node,objectStack){const flatLinearRing=pushParseAndPop(void 0,this.RING_PARSERS,node,objectStack,this);if(flatLinearRing){objectStack[objectStack.length-1][0]=flatLinearRing}}readSurface(node,objectStack){const flatLinearRings=pushParseAndPop([null],this.SURFACE_PARSERS,node,objectStack,this);if(flatLinearRings&&flatLinearRings[0]){const flatCoordinates=flatLinearRings[0],ends=[flatCoordinates.length];let i,ii;for(i=1,ii=flatLinearRings.length;i<ii;++i)(0,ol_array.l7)(flatCoordinates,flatLinearRings[i]),ends.push(flatCoordinates.length);return new Polygon.ZP(flatCoordinates,"XYZ",ends)}}readCurve(node,objectStack){const flatCoordinates=pushParseAndPop([null],this.CURVE_PARSERS,node,objectStack,this);if(flatCoordinates){return new LineString.Z(flatCoordinates,"XYZ")}}readEnvelope(node,objectStack){const flatCoordinates=pushParseAndPop([null],this.ENVELOPE_PARSERS,node,objectStack,this);return(0,extent.T9)(flatCoordinates[1][0],flatCoordinates[1][1],flatCoordinates[2][0],flatCoordinates[2][1])}readFlatPos(node,objectStack){let s=xml_getAllTextContent(node,!1);const re=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,flatCoordinates=[];let m;for(;m=re.exec(s);)flatCoordinates.push(parseFloat(m[1])),s=s.substr(m[0].length);if(""!==s)return;const containerSrs=objectStack[0].srsName;let axisOrientation="enu";if(containerSrs){axisOrientation=(0,ol_proj.U2)(containerSrs).getAxisOrientation()}if("neu"===axisOrientation){let i,ii;for(i=0,ii=flatCoordinates.length;i<ii;i+=3){const y=flatCoordinates[i],x=flatCoordinates[i+1];flatCoordinates[i]=x,flatCoordinates[i+1]=y}}const len=flatCoordinates.length;return 2==len&&flatCoordinates.push(0),0!==len?flatCoordinates:void 0}readFlatPosList(node,objectStack){const s=xml_getAllTextContent(node,!1).replace(/^\s*|\s*$/g,""),context=objectStack[0],containerSrs=context.srsName,contextDimension=context.srsDimension;let axisOrientation="enu";if(containerSrs){axisOrientation=(0,ol_proj.U2)(containerSrs).getAxisOrientation()}const coords=s.split(/\s+/);let x,y,z,dim=2;node.getAttribute("srsDimension")?dim=readNonNegativeIntegerString(node.getAttribute("srsDimension")):node.getAttribute("dimension")?dim=readNonNegativeIntegerString(node.getAttribute("dimension")):node.parentNode.getAttribute("srsDimension")?dim=readNonNegativeIntegerString(node.parentNode.getAttribute("srsDimension")):contextDimension&&(dim=readNonNegativeIntegerString(contextDimension));const flatCoordinates=[];for(let i=0,ii=coords.length;i<ii;i+=dim)x=parseFloat(coords[i]),y=parseFloat(coords[i+1]),z=3===dim?parseFloat(coords[i+2]):0,"en"===axisOrientation.substr(0,2)?flatCoordinates.push(x,y,z):flatCoordinates.push(y,x,z);return flatCoordinates}writePos_(node,value,objectStack){const context=objectStack[objectStack.length-1],hasZ=context.hasZ,srsDimension=hasZ?"3":"2";node.setAttribute("srsDimension",srsDimension);const srsName=context.srsName;let axisOrientation="enu";srsName&&(axisOrientation=(0,ol_proj.U2)(srsName).getAxisOrientation());const point=value.getCoordinates();let coords;if(coords="en"===axisOrientation.substr(0,2)?point[0]+" "+point[1]:point[1]+" "+point[0],hasZ){coords+=" "+(point[2]||0)}writeStringTextNode(node,coords)}getCoords_(point,srsName,hasZ){let axisOrientation="enu";srsName&&(axisOrientation=(0,ol_proj.U2)(srsName).getAxisOrientation());let coords="en"===axisOrientation.substr(0,2)?point[0]+" "+point[1]:point[1]+" "+point[0];if(hasZ){coords+=" "+(point[2]||0)}return coords}writePosList_(node,value,objectStack){const context=objectStack[objectStack.length-1],hasZ=context.hasZ,srsDimension=hasZ?"3":"2";node.setAttribute("srsDimension",srsDimension);const srsName=context.srsName,points=value.getCoordinates(),len=points.length,parts=new Array(len);let point;for(let i=0;i<len;++i)point=points[i],parts[i]=this.getCoords_(point,srsName,hasZ);writeStringTextNode(node,parts.join(" "))}writePoint(node,geometry,objectStack){const srsName=objectStack[objectStack.length-1].srsName;srsName&&node.setAttribute("srsName",srsName);const pos=xml_createElementNS(node.namespaceURI,"pos");node.appendChild(pos),this.writePos_(pos,geometry,objectStack)}writeEnvelope(node,extent,objectStack){const srsName=objectStack[objectStack.length-1].srsName;srsName&&node.setAttribute("srsName",srsName);const values=[extent[0]+" "+extent[1],extent[2]+" "+extent[3]];pushSerializeAndPop({node},this.ENVELOPE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,values,objectStack,["lowerCorner","upperCorner"],this)}writeLinearRing(node,geometry,objectStack){const srsName=objectStack[objectStack.length-1].srsName;srsName&&node.setAttribute("srsName",srsName);const posList=xml_createElementNS(node.namespaceURI,"posList");node.appendChild(posList),this.writePosList_(posList,geometry,objectStack)}RING_NODE_FACTORY_(value,objectStack,nodeName){const context=objectStack[objectStack.length-1],parentNode=context.node,exteriorWritten=context.exteriorWritten;return void 0===exteriorWritten&&(context.exteriorWritten=!0),xml_createElementNS(parentNode.namespaceURI,void 0!==exteriorWritten?"interior":"exterior")}writeSurfaceOrPolygon(node,geometry,objectStack){const context=objectStack[objectStack.length-1],hasZ=context.hasZ,srsName=context.srsName;if("PolygonPatch"!==node.nodeName&&srsName&&node.setAttribute("srsName",srsName),"Polygon"===node.nodeName||"PolygonPatch"===node.nodeName){const rings=geometry.getLinearRings();pushSerializeAndPop({node,hasZ,srsName},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,rings,objectStack,void 0,this)}else if("Surface"===node.nodeName){const patches=xml_createElementNS(node.namespaceURI,"patches");node.appendChild(patches),this.writeSurfacePatches_(patches,geometry,objectStack)}}writeCurveOrLineString(node,geometry,objectStack){const srsName=objectStack[objectStack.length-1].srsName;if("LineStringSegment"!==node.nodeName&&srsName&&node.setAttribute("srsName",srsName),"LineString"===node.nodeName||"LineStringSegment"===node.nodeName){const posList=xml_createElementNS(node.namespaceURI,"posList");node.appendChild(posList),this.writePosList_(posList,geometry,objectStack)}else if("Curve"===node.nodeName){const segments=xml_createElementNS(node.namespaceURI,"segments");node.appendChild(segments),this.writeCurveSegments_(segments,geometry,objectStack)}}writeMultiSurfaceOrPolygon(node,geometry,objectStack){const context=objectStack[objectStack.length-1],hasZ=context.hasZ,srsName=context.srsName,surface=context.surface;srsName&&node.setAttribute("srsName",srsName);const polygons=geometry.getPolygons();pushSerializeAndPop({node,hasZ,srsName,surface},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,polygons,objectStack,void 0,this)}writeMultiPoint(node,geometry,objectStack){const context=objectStack[objectStack.length-1],srsName=context.srsName,hasZ=context.hasZ;srsName&&node.setAttribute("srsName",srsName);const points=geometry.getPoints();pushSerializeAndPop({node,hasZ,srsName},this.POINTMEMBER_SERIALIZERS,makeSimpleNodeFactory("pointMember"),points,objectStack,void 0,this)}writeMultiCurveOrLineString(node,geometry,objectStack){const context=objectStack[objectStack.length-1],hasZ=context.hasZ,srsName=context.srsName,curve=context.curve;srsName&&node.setAttribute("srsName",srsName);const lines=geometry.getLineStrings();pushSerializeAndPop({node,hasZ,srsName,curve},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,lines,objectStack,void 0,this)}writeRing(node,ring,objectStack){const linearRing=xml_createElementNS(node.namespaceURI,"LinearRing");node.appendChild(linearRing),this.writeLinearRing(linearRing,ring,objectStack)}writeSurfaceOrPolygonMember(node,polygon,objectStack){const child=this.GEOMETRY_NODE_FACTORY_(polygon,objectStack);child&&(node.appendChild(child),this.writeSurfaceOrPolygon(child,polygon,objectStack))}writePointMember(node,point,objectStack){const child=xml_createElementNS(node.namespaceURI,"Point");node.appendChild(child),this.writePoint(child,point,objectStack)}writeLineStringOrCurveMember(node,line,objectStack){const child=this.GEOMETRY_NODE_FACTORY_(line,objectStack);child&&(node.appendChild(child),this.writeCurveOrLineString(child,line,objectStack))}writeSurfacePatches_(node,polygon,objectStack){const child=xml_createElementNS(node.namespaceURI,"PolygonPatch");node.appendChild(child),this.writeSurfaceOrPolygon(child,polygon,objectStack)}writeCurveSegments_(node,line,objectStack){const child=xml_createElementNS(node.namespaceURI,"LineStringSegment");node.appendChild(child),this.writeCurveOrLineString(child,line,objectStack)}writeGeometryElement(node,geometry,objectStack){const context=objectStack[objectStack.length-1],item=Object.assign({},context);let value;item.node=node,value=Array.isArray(geometry)?(0,format_Feature.lj)(geometry,context):(0,format_Feature.fI)(geometry,!0,context),pushSerializeAndPop(item,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[value],objectStack,void 0,this)}writeFeatureElement(node,feature,objectStack){const fid=feature.getId();fid&&node.setAttribute("fid",fid);const context=objectStack[objectStack.length-1],featureNS=context.featureNS,geometryName=feature.getGeometryName();context.serializers||(context.serializers={},context.serializers[featureNS]={});const keys=[],values=[];if(feature.hasProperties()){const properties=feature.getProperties();for(const key in properties){const value=properties[key];null!==value&&(keys.push(key),values.push(value),key==geometryName||"function"==typeof value.getSimplifiedGeometry?key in context.serializers[featureNS]||(context.serializers[featureNS][key]=makeChildAppender(this.writeGeometryElement,this)):key in context.serializers[featureNS]||(context.serializers[featureNS][key]=makeChildAppender(writeStringTextNode)))}}const item=Object.assign({},context);item.node=node,pushSerializeAndPop(item,context.serializers,makeSimpleNodeFactory(void 0,featureNS),values,objectStack,keys)}writeFeatureMembers_(node,features,objectStack){const context=objectStack[objectStack.length-1],featureType=context.featureType,featureNS=context.featureNS,serializers={};serializers[featureNS]={},serializers[featureNS][featureType]=makeChildAppender(this.writeFeatureElement,this);const item=Object.assign({},context);item.node=node,pushSerializeAndPop(item,serializers,makeSimpleNodeFactory(featureType,featureNS),features,objectStack)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(value,objectStack,nodeName){const parentNode=objectStack[objectStack.length-1].node;return xml_createElementNS(this.namespace,GML3_MULTIGEOMETRY_TO_MEMBER_NODENAME[parentNode.nodeName])}GEOMETRY_NODE_FACTORY_(value,objectStack,nodeName){const context=objectStack[objectStack.length-1],multiSurface=context.multiSurface,surface=context.surface,curve=context.curve,multiCurve=context.multiCurve;return Array.isArray(value)?nodeName="Envelope":"MultiPolygon"===(nodeName=value.getType())&&!0===multiSurface?nodeName="MultiSurface":"Polygon"===nodeName&&!0===surface?nodeName="Surface":"LineString"===nodeName&&!0===curve?nodeName="Curve":"MultiLineString"===nodeName&&!0===multiCurve&&(nodeName="MultiCurve"),xml_createElementNS(this.namespace,nodeName)}writeGeometryNode(geometry,options){options=this.adaptOptions(options);const geom=xml_createElementNS(this.namespace,"geom"),context={node:geom,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return options&&Object.assign(context,options),this.writeGeometryElement(geom,geometry,[context]),geom}writeFeaturesNode(features,options){options=this.adaptOptions(options);const node=xml_createElementNS(this.namespace,"featureMembers");node.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);const context={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return options&&Object.assign(context,options),this.writeFeatureMembers_(node,features,[context]),node}}GML3.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:makeReplacer(GML3.prototype.readFlatPos),posList:makeReplacer(GML3.prototype.readFlatPosList),coordinates:makeReplacer(format_GML2.prototype.readFlatCoordinates)}},GML3.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:GML3.prototype.interiorParser,exterior:GML3.prototype.exteriorParser}},GML3.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:makeReplacer(format_GMLBase.prototype.readPoint),MultiPoint:makeReplacer(format_GMLBase.prototype.readMultiPoint),LineString:makeReplacer(format_GMLBase.prototype.readLineString),MultiLineString:makeReplacer(format_GMLBase.prototype.readMultiLineString),LinearRing:makeReplacer(format_GMLBase.prototype.readLinearRing),Polygon:makeReplacer(format_GMLBase.prototype.readPolygon),MultiPolygon:makeReplacer(format_GMLBase.prototype.readMultiPolygon),Surface:makeReplacer(GML3.prototype.readSurface),MultiSurface:makeReplacer(GML3.prototype.readMultiSurface),Curve:makeReplacer(GML3.prototype.readCurve),MultiCurve:makeReplacer(GML3.prototype.readMultiCurve),Envelope:makeReplacer(GML3.prototype.readEnvelope)}},GML3.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:makeArrayPusher(GML3.prototype.curveMemberParser),curveMembers:makeArrayPusher(GML3.prototype.curveMemberParser)}},GML3.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:makeArrayPusher(GML3.prototype.surfaceMemberParser),surfaceMembers:makeArrayPusher(GML3.prototype.surfaceMemberParser)}},GML3.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:makeArrayPusher(format_GMLBase.prototype.readLineString),Curve:makeArrayPusher(GML3.prototype.readCurve)}},GML3.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:makeArrayPusher(format_GMLBase.prototype.readPolygon),Surface:makeArrayPusher(GML3.prototype.readSurface)}},GML3.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:makeReplacer(GML3.prototype.readPatch)}},GML3.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:makeReplacer(GML3.prototype.readSegment)}},GML3.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:makeArrayPusher(GML3.prototype.readFlatPosList),upperCorner:makeArrayPusher(GML3.prototype.readFlatPosList)}},GML3.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:makeReplacer(GML3.prototype.readPolygonPatch)}},GML3.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:makeArrayExtender(GML3.prototype.readLineStringSegment)}},format_GMLBase.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:makeReplacer(format_GMLBase.prototype.readFlatLinearRing),Ring:makeReplacer(GML3.prototype.readFlatCurveRing)}},GML3.prototype.writeFeatures,GML3.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:makeChildAppender(GML3.prototype.writeRing),interior:makeChildAppender(GML3.prototype.writeRing)}},GML3.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:makeChildAppender(writeStringTextNode),upperCorner:makeChildAppender(writeStringTextNode)}},GML3.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:makeChildAppender(GML3.prototype.writeSurfaceOrPolygonMember),polygonMember:makeChildAppender(GML3.prototype.writeSurfaceOrPolygonMember)}},GML3.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:makeChildAppender(GML3.prototype.writePointMember)}},GML3.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:makeChildAppender(GML3.prototype.writeLineStringOrCurveMember),curveMember:makeChildAppender(GML3.prototype.writeLineStringOrCurveMember)}},GML3.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:makeChildAppender(GML3.prototype.writeCurveOrLineString),MultiCurve:makeChildAppender(GML3.prototype.writeMultiCurveOrLineString),Point:makeChildAppender(GML3.prototype.writePoint),MultiPoint:makeChildAppender(GML3.prototype.writeMultiPoint),LineString:makeChildAppender(GML3.prototype.writeCurveOrLineString),MultiLineString:makeChildAppender(GML3.prototype.writeMultiCurveOrLineString),LinearRing:makeChildAppender(GML3.prototype.writeLinearRing),Polygon:makeChildAppender(GML3.prototype.writeSurfaceOrPolygon),MultiPolygon:makeChildAppender(GML3.prototype.writeMultiSurfaceOrPolygon),Surface:makeChildAppender(GML3.prototype.writeSurfaceOrPolygon),MultiSurface:makeChildAppender(GML3.prototype.writeMultiSurfaceOrPolygon),Envelope:makeChildAppender(GML3.prototype.writeEnvelope)}};const format_GML3=GML3;class GML32 extends format_GML3{constructor(options){super(options=options||{}),this.schemaLocation=options.schemaLocation?options.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(node,geometry,objectStack){const context=objectStack[objectStack.length-1];objectStack[objectStack.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},context),super.writeGeometryElement(node,geometry,objectStack)}}GML32.prototype.namespace="http://www.opengis.net/gml/3.2",GML32.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:makeReplacer(format_GML3.prototype.readFlatPos),posList:makeReplacer(format_GML3.prototype.readFlatPosList),coordinates:makeReplacer(format_GML2.prototype.readFlatCoordinates)}},GML32.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:format_GML3.prototype.interiorParser,exterior:format_GML3.prototype.exteriorParser}},GML32.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:makeReplacer(format_GMLBase.prototype.readPoint),MultiPoint:makeReplacer(format_GMLBase.prototype.readMultiPoint),LineString:makeReplacer(format_GMLBase.prototype.readLineString),MultiLineString:makeReplacer(format_GMLBase.prototype.readMultiLineString),LinearRing:makeReplacer(format_GMLBase.prototype.readLinearRing),Polygon:makeReplacer(format_GMLBase.prototype.readPolygon),MultiPolygon:makeReplacer(format_GMLBase.prototype.readMultiPolygon),Surface:makeReplacer(GML32.prototype.readSurface),MultiSurface:makeReplacer(format_GML3.prototype.readMultiSurface),Curve:makeReplacer(GML32.prototype.readCurve),MultiCurve:makeReplacer(format_GML3.prototype.readMultiCurve),Envelope:makeReplacer(GML32.prototype.readEnvelope)}},GML32.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:makeArrayPusher(format_GML3.prototype.curveMemberParser),curveMembers:makeArrayPusher(format_GML3.prototype.curveMemberParser)}},GML32.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:makeArrayPusher(format_GML3.prototype.surfaceMemberParser),surfaceMembers:makeArrayPusher(format_GML3.prototype.surfaceMemberParser)}},GML32.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:makeArrayPusher(format_GMLBase.prototype.readLineString),Curve:makeArrayPusher(format_GML3.prototype.readCurve)}},GML32.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:makeArrayPusher(format_GMLBase.prototype.readPolygon),Surface:makeArrayPusher(format_GML3.prototype.readSurface)}},GML32.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:makeReplacer(format_GML3.prototype.readPatch)}},GML32.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:makeReplacer(format_GML3.prototype.readSegment)}},GML32.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:makeArrayPusher(format_GML3.prototype.readFlatPosList),upperCorner:makeArrayPusher(format_GML3.prototype.readFlatPosList)}},GML32.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:makeReplacer(format_GML3.prototype.readPolygonPatch)}},GML32.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:makeArrayExtender(format_GML3.prototype.readLineStringSegment)}},GML32.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:makeArrayPusher(format_GMLBase.prototype.pointMemberParser),pointMembers:makeArrayPusher(format_GMLBase.prototype.pointMemberParser)}},GML32.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:makeArrayPusher(format_GMLBase.prototype.lineStringMemberParser),lineStringMembers:makeArrayPusher(format_GMLBase.prototype.lineStringMemberParser)}},GML32.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:makeArrayPusher(format_GMLBase.prototype.polygonMemberParser),polygonMembers:makeArrayPusher(format_GMLBase.prototype.polygonMemberParser)}},GML32.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:makeArrayPusher(format_GMLBase.prototype.readFlatCoordinatesFromNode)}},GML32.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:makeArrayPusher(format_GMLBase.prototype.readLineString)}},GML32.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:makeArrayPusher(format_GMLBase.prototype.readPolygon)}},GML32.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:makeReplacer(format_GMLBase.prototype.readFlatLinearRing),Ring:makeReplacer(GML32.prototype.readFlatCurveRing)}},GML32.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:makeChildAppender(format_GML3.prototype.writeRing),interior:makeChildAppender(format_GML3.prototype.writeRing)}},GML32.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:makeChildAppender(writeStringTextNode),upperCorner:makeChildAppender(writeStringTextNode)}},GML32.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:makeChildAppender(format_GML3.prototype.writeSurfaceOrPolygonMember),polygonMember:makeChildAppender(format_GML3.prototype.writeSurfaceOrPolygonMember)}},GML32.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:makeChildAppender(format_GML3.prototype.writePointMember)}},GML32.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:makeChildAppender(format_GML3.prototype.writeLineStringOrCurveMember),curveMember:makeChildAppender(format_GML3.prototype.writeLineStringOrCurveMember)}},GML32.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:makeChildAppender(format_GML3.prototype.writeCurveOrLineString),MultiCurve:makeChildAppender(format_GML3.prototype.writeMultiCurveOrLineString),Point:makeChildAppender(GML32.prototype.writePoint),MultiPoint:makeChildAppender(format_GML3.prototype.writeMultiPoint),LineString:makeChildAppender(format_GML3.prototype.writeCurveOrLineString),MultiLineString:makeChildAppender(format_GML3.prototype.writeMultiCurveOrLineString),LinearRing:makeChildAppender(format_GML3.prototype.writeLinearRing),Polygon:makeChildAppender(format_GML3.prototype.writeSurfaceOrPolygon),MultiPolygon:makeChildAppender(format_GML3.prototype.writeMultiSurfaceOrPolygon),Surface:makeChildAppender(format_GML3.prototype.writeSurfaceOrPolygon),MultiSurface:makeChildAppender(format_GML3.prototype.writeMultiSurfaceOrPolygon),Envelope:makeChildAppender(format_GML3.prototype.writeEnvelope)}};const format_GML32=GML32;const filter_Filter=class Filter{constructor(tagName){this.tagName_=tagName}getTagName(){return this.tagName_}};var asserts=__webpack_require__("./node_modules/ol/asserts.js");const filter_LogicalNary=class LogicalNary extends filter_Filter{constructor(tagName,conditions){super(tagName),this.conditions=conditions,(0,asserts.h)(this.conditions.length>=2,"At least 2 conditions are required")}};const filter_And=class And extends filter_LogicalNary{constructor(conditions){super("And",Array.prototype.slice.call(arguments))}};const filter_Bbox=class Bbox extends filter_Filter{constructor(geometryName,extent,srsName){if(super("BBOX"),this.geometryName=geometryName,this.extent=extent,4!==extent.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=srsName}};const FEATURE_COLLECTION_PARSERS={"http://www.opengis.net/gml":{boundedBy:makeObjectPropertySetter(format_GMLBase.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:makeArrayPusher(format_GMLBase.prototype.readFeaturesInternal)}},TRANSACTION_SUMMARY_PARSERS={"http://www.opengis.net/wfs":{totalInserted:makeObjectPropertySetter(readPositiveInteger),totalUpdated:makeObjectPropertySetter(readPositiveInteger),totalDeleted:makeObjectPropertySetter(readPositiveInteger)},"http://www.opengis.net/wfs/2.0":{totalInserted:makeObjectPropertySetter(readPositiveInteger),totalUpdated:makeObjectPropertySetter(readPositiveInteger),totalDeleted:makeObjectPropertySetter(readPositiveInteger)}},TRANSACTION_RESPONSE_PARSERS={"http://www.opengis.net/wfs":{TransactionSummary:makeObjectPropertySetter(readTransactionSummary,"transactionSummary"),InsertResults:makeObjectPropertySetter(readInsertResults,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:makeObjectPropertySetter(readTransactionSummary,"transactionSummary"),InsertResults:makeObjectPropertySetter(readInsertResults,"insertIds")}},QUERY_SERIALIZERS={"http://www.opengis.net/wfs":{PropertyName:makeChildAppender(writeStringTextNode)},"http://www.opengis.net/wfs/2.0":{PropertyName:makeChildAppender(writeStringTextNode)}},TRANSACTION_SERIALIZERS={"http://www.opengis.net/wfs":{Insert:makeChildAppender(writeFeature),Update:makeChildAppender(writeUpdate),Delete:makeChildAppender(writeDelete),Property:makeChildAppender(writeProperty),Native:makeChildAppender(writeNative)},"http://www.opengis.net/wfs/2.0":{Insert:makeChildAppender(writeFeature),Update:makeChildAppender(writeUpdate),Delete:makeChildAppender(writeDelete),Property:makeChildAppender(writeProperty),Native:makeChildAppender(writeNative)}},FEATURE_PREFIX="feature",XMLNS="http://www.w3.org/2000/xmlns/",OGCNS={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},WFSNS={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},FESNS={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},SCHEMA_LOCATIONS={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},GML_FORMATS={"2.0.0":format_GML32,"1.1.0":format_GML3,"1.0.0":format_GML2};function serializeTransactionRequest(type,features,objectStack,request){pushSerializeAndPop(request,TRANSACTION_SERIALIZERS,makeSimpleNodeFactory(type),features,objectStack)}function readTransactionSummary(node,objectStack){return pushParseAndPop({},TRANSACTION_SUMMARY_PARSERS,node,objectStack)}const OGC_FID_PARSERS={"http://www.opengis.net/ogc":{FeatureId:makeArrayPusher((function(node,objectStack){return node.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:makeArrayPusher((function(node,objectStack){return node.getAttribute("fid")}))}};function fidParser(node,objectStack){parseNode(OGC_FID_PARSERS,node,objectStack)}const INSERT_RESULTS_PARSERS={"http://www.opengis.net/wfs":{Feature:fidParser},"http://www.opengis.net/wfs/2.0":{Feature:fidParser}};function readInsertResults(node,objectStack){return pushParseAndPop([],INSERT_RESULTS_PARSERS,node,objectStack)}function writeFeature(node,feature,objectStack){const context=objectStack[objectStack.length-1],featureType=context.featureType,featureNS=context.featureNS,gmlVersion=context.gmlVersion,child=xml_createElementNS(featureNS,featureType);node.appendChild(child),2===gmlVersion?format_GML2.prototype.writeFeatureElement(child,feature,objectStack):3===gmlVersion?format_GML3.prototype.writeFeatureElement(child,feature,objectStack):format_GML32.prototype.writeFeatureElement(child,feature,objectStack)}function writeOgcFidFilter(node,fid,objectStack){const version=objectStack[objectStack.length-1].version,ns=OGCNS[version],filter=xml_createElementNS(ns,"Filter"),child=xml_createElementNS(ns,"FeatureId");filter.appendChild(child),child.setAttribute("fid",fid),node.appendChild(filter)}function getTypeName(featurePrefix,featureType){const prefix=(featurePrefix=featurePrefix||FEATURE_PREFIX)+":";return featureType.startsWith(prefix)?featureType:prefix+featureType}function writeDelete(node,feature,objectStack){const context=objectStack[objectStack.length-1];(0,asserts.h)(void 0!==feature.getId(),"Features must have an id set");const featureType=context.featureType,featurePrefix=context.featurePrefix,featureNS=context.featureNS,typeName=getTypeName(featurePrefix,featureType);node.setAttribute("typeName",typeName),node.setAttributeNS(XMLNS,"xmlns:"+featurePrefix,featureNS);const fid=feature.getId();void 0!==fid&&writeOgcFidFilter(node,fid,objectStack)}function writeUpdate(node,feature,objectStack){const context=objectStack[objectStack.length-1];(0,asserts.h)(void 0!==feature.getId(),"Features must have an id set");const version=context.version,featureType=context.featureType,featurePrefix=context.featurePrefix,featureNS=context.featureNS,typeName=getTypeName(featurePrefix,featureType),geometryName=feature.getGeometryName();node.setAttribute("typeName",typeName),node.setAttributeNS(XMLNS,"xmlns:"+featurePrefix,featureNS);const fid=feature.getId();if(void 0!==fid){const keys=feature.getKeys(),values=[];for(let i=0,ii=keys.length;i<ii;i++){const value=feature.get(keys[i]);if(void 0!==value){let name=keys[i];value&&"function"==typeof value.getSimplifiedGeometry&&(name=geometryName),values.push({name,value})}}pushSerializeAndPop({version,gmlVersion:context.gmlVersion,node,hasZ:context.hasZ,srsName:context.srsName},TRANSACTION_SERIALIZERS,makeSimpleNodeFactory("Property"),values,objectStack),writeOgcFidFilter(node,fid,objectStack)}}function writeProperty(node,pair,objectStack){const context=objectStack[objectStack.length-1],version=context.version,ns=WFSNS[version],name=xml_createElementNS(ns,"2.0.0"===version?"ValueReference":"Name"),gmlVersion=context.gmlVersion;if(node.appendChild(name),writeStringTextNode(name,pair.name),void 0!==pair.value&&null!==pair.value){const value=xml_createElementNS(ns,"Value");node.appendChild(value),pair.value&&"function"==typeof pair.value.getSimplifiedGeometry?2===gmlVersion?format_GML2.prototype.writeGeometryElement(value,pair.value,objectStack):3===gmlVersion?format_GML3.prototype.writeGeometryElement(value,pair.value,objectStack):format_GML32.prototype.writeGeometryElement(value,pair.value,objectStack):writeStringTextNode(value,pair.value)}}function writeNative(node,nativeElement,objectStack){nativeElement.vendorId&&node.setAttribute("vendorId",nativeElement.vendorId),void 0!==nativeElement.safeToIgnore&&node.setAttribute("safeToIgnore",String(nativeElement.safeToIgnore)),void 0!==nativeElement.value&&writeStringTextNode(node,nativeElement.value)}const GETFEATURE_SERIALIZERS={"http://www.opengis.net/wfs":{Query:makeChildAppender(writeQuery)},"http://www.opengis.net/wfs/2.0":{Query:makeChildAppender(writeQuery)},"http://www.opengis.net/ogc":{During:makeChildAppender(writeDuringFilter),And:makeChildAppender(writeLogicalFilter),Or:makeChildAppender(writeLogicalFilter),Not:makeChildAppender(writeNotFilter),BBOX:makeChildAppender(writeBboxFilter),Contains:makeChildAppender(writeSpatialFilter),Intersects:makeChildAppender(writeSpatialFilter),Within:makeChildAppender(writeSpatialFilter),DWithin:makeChildAppender(writeDWithinFilter),PropertyIsEqualTo:makeChildAppender(writeComparisonFilter),PropertyIsNotEqualTo:makeChildAppender(writeComparisonFilter),PropertyIsLessThan:makeChildAppender(writeComparisonFilter),PropertyIsLessThanOrEqualTo:makeChildAppender(writeComparisonFilter),PropertyIsGreaterThan:makeChildAppender(writeComparisonFilter),PropertyIsGreaterThanOrEqualTo:makeChildAppender(writeComparisonFilter),PropertyIsNull:makeChildAppender(writeIsNullFilter),PropertyIsBetween:makeChildAppender(writeIsBetweenFilter),PropertyIsLike:makeChildAppender(writeIsLikeFilter)},"http://www.opengis.net/fes/2.0":{During:makeChildAppender(writeDuringFilter),And:makeChildAppender(writeLogicalFilter),Or:makeChildAppender(writeLogicalFilter),Not:makeChildAppender(writeNotFilter),BBOX:makeChildAppender(writeBboxFilter),Contains:makeChildAppender(writeSpatialFilter),Disjoint:makeChildAppender(writeSpatialFilter),Intersects:makeChildAppender(writeSpatialFilter),ResourceId:makeChildAppender((function writeResourceIdFilter(node,filter,objectStack){node.setAttribute("rid",filter.rid)})),Within:makeChildAppender(writeSpatialFilter),DWithin:makeChildAppender(writeDWithinFilter),PropertyIsEqualTo:makeChildAppender(writeComparisonFilter),PropertyIsNotEqualTo:makeChildAppender(writeComparisonFilter),PropertyIsLessThan:makeChildAppender(writeComparisonFilter),PropertyIsLessThanOrEqualTo:makeChildAppender(writeComparisonFilter),PropertyIsGreaterThan:makeChildAppender(writeComparisonFilter),PropertyIsGreaterThanOrEqualTo:makeChildAppender(writeComparisonFilter),PropertyIsNull:makeChildAppender(writeIsNullFilter),PropertyIsBetween:makeChildAppender(writeIsBetweenFilter),PropertyIsLike:makeChildAppender(writeIsLikeFilter)}};function writeQuery(node,featureType,objectStack){const context=objectStack[objectStack.length-1],version=context.version,featurePrefix=context.featurePrefix,featureNS=context.featureNS,propertyNames=context.propertyNames,srsName=context.srsName;let typeName,typeNameAttr;typeName=featurePrefix?getTypeName(featurePrefix,featureType):featureType,typeNameAttr="2.0.0"===version?"typeNames":"typeName",node.setAttribute(typeNameAttr,typeName),srsName&&node.setAttribute("srsName",srsName),featureNS&&node.setAttributeNS(XMLNS,"xmlns:"+featurePrefix,featureNS);const item=Object.assign({},context);item.node=node,pushSerializeAndPop(item,QUERY_SERIALIZERS,makeSimpleNodeFactory("PropertyName"),propertyNames,objectStack);const filter=context.filter;if(filter){const child=xml_createElementNS(getFilterNS(version),"Filter");node.appendChild(child),writeFilterCondition(child,filter,objectStack)}}function writeFilterCondition(node,filter,objectStack){const context=objectStack[objectStack.length-1],item={node};Object.assign(item,{context}),pushSerializeAndPop(item,GETFEATURE_SERIALIZERS,makeSimpleNodeFactory(filter.getTagName()),[filter],objectStack)}function writeBboxFilter(node,filter,objectStack){const parent=objectStack[objectStack.length-1],version=parent.context.version;parent.srsName=filter.srsName;const format=GML_FORMATS[version];writePropertyName(version,node,filter.geometryName),format.prototype.writeGeometryElement(node,filter.extent,objectStack)}function writeSpatialFilter(node,filter,objectStack){const parent=objectStack[objectStack.length-1],version=parent.context.version;parent.srsName=filter.srsName;const format=GML_FORMATS[version];writePropertyName(version,node,filter.geometryName),format.prototype.writeGeometryElement(node,filter.geometry,objectStack)}function writeDWithinFilter(node,filter,objectStack){const version=objectStack[objectStack.length-1].context.version;writeSpatialFilter(node,filter,objectStack);const distance=xml_createElementNS(getFilterNS(version),"Distance");writeStringTextNode(distance,filter.distance.toString()),"2.0.0"===version?distance.setAttribute("uom",filter.unit):distance.setAttribute("units",filter.unit),node.appendChild(distance)}function writeDuringFilter(node,filter,objectStack){const version=objectStack[objectStack.length-1].context.version;writeExpression(FESNS[version],"ValueReference",node,filter.propertyName);const timePeriod=xml_createElementNS(GMLNS,"TimePeriod");node.appendChild(timePeriod);const begin=xml_createElementNS(GMLNS,"begin");timePeriod.appendChild(begin),writeTimeInstant(begin,filter.begin);const end=xml_createElementNS(GMLNS,"end");timePeriod.appendChild(end),writeTimeInstant(end,filter.end)}function writeLogicalFilter(node,filter,objectStack){const context=objectStack[objectStack.length-1].context,item={node};Object.assign(item,{context});const conditions=filter.conditions;for(let i=0,ii=conditions.length;i<ii;++i){const condition=conditions[i];pushSerializeAndPop(item,GETFEATURE_SERIALIZERS,makeSimpleNodeFactory(condition.getTagName()),[condition],objectStack)}}function writeNotFilter(node,filter,objectStack){const context=objectStack[objectStack.length-1].context,item={node};Object.assign(item,{context});const condition=filter.condition;pushSerializeAndPop(item,GETFEATURE_SERIALIZERS,makeSimpleNodeFactory(condition.getTagName()),[condition],objectStack)}function writeComparisonFilter(node,filter,objectStack){const version=objectStack[objectStack.length-1].context.version;void 0!==filter.matchCase&&node.setAttribute("matchCase",filter.matchCase.toString()),writePropertyName(version,node,filter.propertyName),writeLiteral(version,node,""+filter.expression)}function writeIsNullFilter(node,filter,objectStack){writePropertyName(objectStack[objectStack.length-1].context.version,node,filter.propertyName)}function writeIsBetweenFilter(node,filter,objectStack){const version=objectStack[objectStack.length-1].context.version,ns=getFilterNS(version);writePropertyName(version,node,filter.propertyName);const lowerBoundary=xml_createElementNS(ns,"LowerBoundary");node.appendChild(lowerBoundary),writeLiteral(version,lowerBoundary,""+filter.lowerBoundary);const upperBoundary=xml_createElementNS(ns,"UpperBoundary");node.appendChild(upperBoundary),writeLiteral(version,upperBoundary,""+filter.upperBoundary)}function writeIsLikeFilter(node,filter,objectStack){const version=objectStack[objectStack.length-1].context.version;node.setAttribute("wildCard",filter.wildCard),node.setAttribute("singleChar",filter.singleChar),node.setAttribute("escapeChar",filter.escapeChar),void 0!==filter.matchCase&&node.setAttribute("matchCase",filter.matchCase.toString()),writePropertyName(version,node,filter.propertyName),writeLiteral(version,node,""+filter.pattern)}function writeExpression(ns,tagName,node,value){const property=xml_createElementNS(ns,tagName);writeStringTextNode(property,value),node.appendChild(property)}function writeLiteral(version,node,value){writeExpression(getFilterNS(version),"Literal",node,value)}function writePropertyName(version,node,value){"2.0.0"===version?writeExpression(FESNS[version],"ValueReference",node,value):writeExpression(OGCNS[version],"PropertyName",node,value)}function writeTimeInstant(node,time){const timeInstant=xml_createElementNS(GMLNS,"TimeInstant");node.appendChild(timeInstant);const timePosition=xml_createElementNS(GMLNS,"timePosition");timeInstant.appendChild(timePosition),writeStringTextNode(timePosition,time)}function writeGetFeature(node,featureTypes,objectStack){const context=objectStack[objectStack.length-1],item=Object.assign({},context);item.node=node,pushSerializeAndPop(item,GETFEATURE_SERIALIZERS,makeSimpleNodeFactory("Query"),featureTypes,objectStack)}function getFilterNS(version){let ns;return ns="2.0.0"===version?FESNS[version]:OGCNS[version],ns}const format_WFS=class WFS extends format_XMLFeature{constructor(options){super(),options=options||{},this.version_=options.version?options.version:"1.1.0",this.featureType_=options.featureType,this.featureNS_=options.featureNS,this.gmlFormat_=options.gmlFormat?options.gmlFormat:new GML_FORMATS[this.version_],this.schemaLocation_=options.schemaLocation?options.schemaLocation:SCHEMA_LOCATIONS[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(featureType){this.featureType_=featureType}readFeaturesFromNode(node,options){const context={node};Object.assign(context,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(context,this.getReadOptions(node,options||{}));const objectStack=[context];let featuresNS;featuresNS="2.0.0"===this.version_?FEATURE_COLLECTION_PARSERS:this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let features=pushParseAndPop([],featuresNS,node,objectStack,this.gmlFormat_);return features||(features=[]),features}readTransactionResponse(source){if(source){if("string"==typeof source){const doc=parse(source);return this.readTransactionResponseFromDocument(doc)}return isDocument(source)?this.readTransactionResponseFromDocument(source):this.readTransactionResponseFromNode(source)}}readFeatureCollectionMetadata(source){if(source){if("string"==typeof source){const doc=parse(source);return this.readFeatureCollectionMetadataFromDocument(doc)}return isDocument(source)?this.readFeatureCollectionMetadataFromDocument(source):this.readFeatureCollectionMetadataFromNode(source)}}readFeatureCollectionMetadataFromDocument(doc){for(let n=doc.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(n)}readFeatureCollectionMetadataFromNode(node){const result={},value=readNonNegativeIntegerString(node.getAttribute("numberOfFeatures"));return result.numberOfFeatures=value,pushParseAndPop(result,FEATURE_COLLECTION_PARSERS,node,[],this.gmlFormat_)}readTransactionResponseFromDocument(doc){for(let n=doc.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(n)}readTransactionResponseFromNode(node){return pushParseAndPop({},TRANSACTION_RESPONSE_PARSERS,node,[])}writeGetFeature(options){const node=xml_createElementNS(WFSNS[this.version_],"GetFeature");node.setAttribute("service","WFS"),node.setAttribute("version",this.version_),options.handle&&node.setAttribute("handle",options.handle),options.outputFormat&&node.setAttribute("outputFormat",options.outputFormat),void 0!==options.maxFeatures&&node.setAttribute("maxFeatures",String(options.maxFeatures)),options.resultType&&node.setAttribute("resultType",options.resultType),void 0!==options.startIndex&&node.setAttribute("startIndex",String(options.startIndex)),void 0!==options.count&&node.setAttribute("count",String(options.count)),void 0!==options.viewParams&&node.setAttribute("viewParams",options.viewParams),node.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation_);const context={node};if(Object.assign(context,{version:this.version_,srsName:options.srsName,featureNS:options.featureNS?options.featureNS:this.featureNS_,featurePrefix:options.featurePrefix,propertyNames:options.propertyNames?options.propertyNames:[]}),(0,asserts.h)(Array.isArray(options.featureTypes),"`options.featureTypes` must be an Array"),"string"==typeof options.featureTypes[0]){let filter=options.filter;options.bbox&&((0,asserts.h)(options.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),filter=this.combineBboxAndFilter(options.geometryName,options.bbox,options.srsName,filter)),Object.assign(context,{geometryName:options.geometryName,filter}),writeGetFeature(node,options.featureTypes,[context])}else options.featureTypes.forEach((featureType=>{const completeFilter=this.combineBboxAndFilter(featureType.geometryName,featureType.bbox,options.srsName,options.filter);Object.assign(context,{geometryName:featureType.geometryName,filter:completeFilter}),writeGetFeature(node,[featureType.name],[context])}));return node}combineBboxAndFilter(geometryName,extent,srsName,filter){const bboxFilter=function bbox(geometryName,extent,srsName){return new filter_Bbox(geometryName,extent,srsName)}(geometryName,extent,srsName);return filter?function and(conditions){const params=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(filter_And,params))}(filter,bboxFilter):bboxFilter}writeTransaction(inserts,updates,deletes,options){const objectStack=[],version=options.version?options.version:this.version_,node=xml_createElementNS(WFSNS[version],"Transaction");let baseObj;node.setAttribute("service","WFS"),node.setAttribute("version",version),options&&(baseObj=options.gmlOptions?options.gmlOptions:{},options.handle&&node.setAttribute("handle",options.handle)),node.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",SCHEMA_LOCATIONS[version]);const request=function createTransactionRequest(node,baseObj,version,options){const featurePrefix=options.featurePrefix?options.featurePrefix:FEATURE_PREFIX;let gmlVersion;"1.0.0"===version?gmlVersion=2:"1.1.0"===version?gmlVersion=3:"2.0.0"===version&&(gmlVersion=3.2);const obj=Object.assign({node},{version,featureNS:options.featureNS,featureType:options.featureType,featurePrefix,gmlVersion,hasZ:options.hasZ,srsName:options.srsName},baseObj);return obj}(node,baseObj,version,options);return inserts&&serializeTransactionRequest("Insert",inserts,objectStack,request),updates&&serializeTransactionRequest("Update",updates,objectStack,request),deletes&&serializeTransactionRequest("Delete",deletes,objectStack,request),options.nativeElements&&serializeTransactionRequest("Native",options.nativeElements,objectStack,request),node}readProjectionFromDocument(doc){for(let n=doc.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(n);return null}readProjectionFromNode(node){if(node.firstElementChild&&node.firstElementChild.firstElementChild)for(let n=(node=node.firstElementChild.firstElementChild).firstElementChild;n;n=n.nextElementSibling)if(0!==n.childNodes.length&&(1!==n.childNodes.length||3!==n.firstChild.nodeType)){const objectStack=[{}];return this.gmlFormat_.readGeometryElement(n,objectStack),(0,ol_proj.U2)(objectStack.pop().srsName)}return null}}},"./node_modules/papaparse/papaparse.min.js":function(module,exports){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=function s(){"use strict";var f="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==f?f:{},n=!f.document&&!!f.postMessage,o=f.IS_PAPA_WORKER||!1,a={},u=0,b={parse:function(e,t){var r=(t=t||{}).dynamicTyping||!1;if(J(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=!!J(t.transform)&&t.transform,t.worker&&b.WORKERS_SUPPORTED){var i=function(){if(!b.WORKERS_SUPPORTED)return!1;var r,i,e=(r=f.URL||f.webkitURL||null,i=s.toString(),b.BLOB_URL||(b.BLOB_URL=r.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",i,")();"],{type:"text/javascript"})))),t=new f.Worker(e);return t.onmessage=_,t.id=u++,a[t.id]=t}();return i.userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=J(t.step),t.chunk=J(t.chunk),t.complete=J(t.complete),t.error=J(t.error),delete t.worker,void i.postMessage({input:e,config:t,workerId:i.id})}var n=null;return b.NODE_STREAM_INPUT,"string"==typeof e?(e=function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}(e),n=t.download?new l(t):new p(t)):!0===e.readable&&J(e.read)&&J(e.on)?n=new g(t):(f.File&&e instanceof File||e instanceof Object)&&(n=new c(t)),n.stream(e)},unparse:function(e,t){var n=!1,_=!0,m=",",y="\r\n",s='"',a=s+s,r=!1,i=null,o=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||b.BAD_DELIMITERS.filter((function(e){return-1!==t.delimiter.indexOf(e)})).length||(m=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(r=t.skipEmptyLines),"string"==typeof t.newline&&(y=t.newline),"string"==typeof t.quoteChar&&(s=t.quoteChar),"boolean"==typeof t.header&&(_=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");i=t.columns}void 0!==t.escapeChar&&(a=t.escapeChar+s),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(o=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var u=new RegExp(Q(s),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return h(null,e,r);if("object"==typeof e[0])return h(i||Object.keys(e[0]),e,r)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||i),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),h(e.fields||[],e.data||[],r);throw new Error("Unable to serialize unrecognized input");function h(e,t,r){var i="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var n=Array.isArray(e)&&0<e.length,s=!Array.isArray(t[0]);if(n&&_){for(var a=0;a<e.length;a++)0<a&&(i+=m),i+=v(e[a],a);0<t.length&&(i+=y)}for(var o=0;o<t.length;o++){var u=n?e.length:t[o].length,h=!1,f=n?0===Object.keys(t[o]).length:0===t[o].length;if(r&&!n&&(h="greedy"===r?""===t[o].join("").trim():1===t[o].length&&0===t[o][0].length),"greedy"===r&&n){for(var d=[],l=0;l<u;l++){var c=s?e[l]:l;d.push(t[o][c])}h=""===d.join("").trim()}if(!h){for(var p=0;p<u;p++){0<p&&!f&&(i+=m);var g=n&&s?e[p]:p;i+=v(t[o][g],p)}o<t.length-1&&(!r||0<u&&!f)&&(i+=y)}}return i}function v(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var r=!1;o&&"string"==typeof e&&o.test(e)&&(e="'"+e,r=!0);var i=e.toString().replace(u,a);return(r=r||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var r=0;r<t.length;r++)if(-1<e.indexOf(t[r]))return!0;return!1}(i,b.BAD_DELIMITERS)||-1<i.indexOf(m)||" "===i.charAt(0)||" "===i.charAt(i.length-1))?s+i+s:i}}};if(b.RECORD_SEP=String.fromCharCode(30),b.UNIT_SEP=String.fromCharCode(31),b.BYTE_ORDER_MARK="\ufeff",b.BAD_DELIMITERS=["\r","\n",'"',b.BYTE_ORDER_MARK],b.WORKERS_SUPPORTED=!n&&!!f.Worker,b.NODE_STREAM_INPUT=1,b.LocalChunkSize=10485760,b.RemoteChunkSize=5242880,b.DefaultDelimiter=",",b.Parser=E,b.ParserHandle=r,b.NetworkStreamer=l,b.FileStreamer=c,b.StringStreamer=p,b.ReadableStreamStreamer=g,f.jQuery){var d=f.jQuery;d.fn.parse=function(o){var r=o.config||{},u=[];return this.each((function(e){if("INPUT"!==d(this).prop("tagName").toUpperCase()||"file"!==d(this).attr("type").toLowerCase()||!f.FileReader||!this.files||0===this.files.length)return!0;for(var t=0;t<this.files.length;t++)u.push({file:this.files[t],inputElem:this,instanceConfig:d.extend({},r)})})),e(),this;function e(){if(0!==u.length){var e,t,r,i,n=u[0];if(J(o.before)){var s=o.before(n.file,n.inputElem);if("object"==typeof s){if("abort"===s.action)return e="AbortError",t=n.file,r=n.inputElem,i=s.reason,void(J(o.error)&&o.error({name:e},t,r,i));if("skip"===s.action)return void h();"object"==typeof s.config&&(n.instanceConfig=d.extend(n.instanceConfig,s.config))}else if("skip"===s)return void h()}var a=n.instanceConfig.complete;n.instanceConfig.complete=function(e){J(a)&&a(e,n.file,n.inputElem),h()},b.parse(n.file,n.instanceConfig)}else J(o.complete)&&o.complete()}function h(){u.splice(0,1),e()}}}function h(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=w(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new r(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){if(this.isFirstChunk&&J(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(e);void 0!==r&&(e=r)}this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+e;this._partialLine="";var n=this._handle.parse(i,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=n.meta.cursor;this._finished||(this._partialLine=i.substring(s-this._baseIndex),this._baseIndex=s),n&&n.data&&(this._rowCount+=n.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)f.postMessage({results:n,workerId:b.WORKER_ID,finished:a});else if(J(this._config.chunk)&&!t){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);n=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!a||!J(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0},this._sendError=function(e){J(this._config.error)?this._config.error(e):o&&this._config.error&&f.postMessage({workerId:b.WORKER_ID,error:e,finished:!1})}}function l(e){var i;(e=e||{}).chunkSize||(e.chunkSize=b.RemoteChunkSize),h.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(i=new XMLHttpRequest,this._config.withCredentials&&(i.withCredentials=this._config.withCredentials),n||(i.onload=v(this._chunkLoaded,this),i.onerror=v(this._chunkError,this)),i.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var t in e)i.setRequestHeader(t,e[t])}if(this._config.chunkSize){var r=this._start+this._config.chunkSize-1;i.setRequestHeader("Range","bytes="+this._start+"-"+r)}try{i.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===i.status&&this._chunkError()}},this._chunkLoaded=function(){4===i.readyState&&(i.status<200||400<=i.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:i.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader("Content-Range");return null===t?-1:parseInt(t.substring(t.lastIndexOf("/")+1))}(i),this.parseChunk(i.responseText)))},this._chunkError=function(e){var t=i.statusText||e;this._sendError(new Error(t))}}function c(e){var i,n;(e=e||{}).chunkSize||(e.chunkSize=b.LocalChunkSize),h.call(this,e);var s="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,s?((i=new FileReader).onload=v(this._chunkLoaded,this),i.onerror=v(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var t=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,t)}var r=i.readAsText(e,this._config.encoding);s||this._chunkLoaded({target:{result:r}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(i.error)}}function p(e){var r;h.call(this,e=e||{}),this.stream=function(e){return r=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,t=this._config.chunkSize;return t?(e=r.substring(0,t),r=r.substring(t)):(e=r,r=""),this._finished=!r,this.parseChunk(e)}}}function g(e){h.call(this,e=e||{});var t=[],r=!0,i=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=v((function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}}),this),this._streamError=v((function(e){this._streamCleanUp(),this._sendError(e)}),this),this._streamEnd=v((function(){this._streamCleanUp(),i=!0,this._streamData("")}),this),this._streamCleanUp=v((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function r(m){var a,o,u,i=Math.pow(2,53),n=-i,s=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,h=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,t=this,r=0,f=0,d=!1,e=!1,l=[],c={data:[],errors:[],meta:{}};if(J(m.step)){var p=m.step;m.step=function(e){if(c=e,_())g();else{if(g(),0===c.data.length)return;r+=e.data.length,m.preview&&r>m.preview?o.abort():(c.data=c.data[0],p(c,t))}}}function y(e){return"greedy"===m.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function g(){return c&&u&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+b.DefaultDelimiter+"'"),u=!1),m.skipEmptyLines&&(c.data=c.data.filter((function(e){return!y(e)}))),_()&&function(){if(c)if(Array.isArray(c.data[0])){for(var t=0;_()&&t<c.data.length;t++)c.data[t].forEach(e);c.data.splice(0,1)}else c.data.forEach(e);function e(e,t){J(m.transformHeader)&&(e=m.transformHeader(e,t)),l.push(e)}}(),function(){if(!c||!m.header&&!m.dynamicTyping&&!m.transform)return c;function e(e,t){var r,i=m.header?{}:[];for(r=0;r<e.length;r++){var n=r,s=e[r];m.header&&(n=r>=l.length?"__parsed_extra":l[r]),m.transform&&(s=m.transform(s,n)),s=v(n,s),"__parsed_extra"===n?(i[n]=i[n]||[],i[n].push(s)):i[n]=s}return m.header&&(r>l.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+l.length+" fields but parsed "+r,f+t):r<l.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+l.length+" fields but parsed "+r,f+t)),i}var t=1;return!c.data.length||Array.isArray(c.data[0])?(c.data=c.data.map(e),t=c.data.length):c.data=e(c.data,0),m.header&&c.meta&&(c.meta.fields=l),f+=t,c}()}function _(){return m.header&&0===l.length}function v(e,t){return r=e,m.dynamicTypingFunction&&void 0===m.dynamicTyping[r]&&(m.dynamicTyping[r]=m.dynamicTypingFunction(r)),!0===(m.dynamicTyping[r]||m.dynamicTyping)?"true"===t||"TRUE"===t||"false"!==t&&"FALSE"!==t&&(function(e){if(s.test(e)){var t=parseFloat(e);if(n<t&&t<i)return!0}return!1}(t)?parseFloat(t):h.test(t)?new Date(t):""===t?null:t):t;var r}function k(e,t,r,i){var n={type:e,code:t,message:r};void 0!==i&&(n.row=i),c.errors.push(n)}this.parse=function(e,t,r){var i=m.quoteChar||'"';if(m.newline||(m.newline=function(e,t){e=e.substring(0,1048576);var r=new RegExp(Q(t)+"([^]*?)"+Q(t),"gm"),i=(e=e.replace(r,"")).split("\r"),n=e.split("\n"),s=1<n.length&&n[0].length<i[0].length;if(1===i.length||s)return"\n";for(var a=0,o=0;o<i.length;o++)"\n"===i[o][0]&&a++;return a>=i.length/2?"\r\n":"\r"}(e,i)),u=!1,m.delimiter)J(m.delimiter)&&(m.delimiter=m.delimiter(e),c.meta.delimiter=m.delimiter);else{var n=function(e,t,r,i,n){var s,a,o,u;n=n||[",","\t","|",";",b.RECORD_SEP,b.UNIT_SEP];for(var h=0;h<n.length;h++){var f=n[h],d=0,l=0,c=0;o=void 0;for(var p=new E({comments:i,delimiter:f,newline:t,preview:10}).parse(e),g=0;g<p.data.length;g++)if(r&&y(p.data[g]))c++;else{var _=p.data[g].length;l+=_,void 0!==o?0<_&&(d+=Math.abs(_-o),o=_):o=_}0<p.data.length&&(l/=p.data.length-c),(void 0===a||d<=a)&&(void 0===u||u<l)&&1.99<l&&(a=d,s=f,u=l)}return{successful:!!(m.delimiter=s),bestDelimiter:s}}(e,m.newline,m.skipEmptyLines,m.comments,m.delimitersToGuess);n.successful?m.delimiter=n.bestDelimiter:(u=!0,m.delimiter=b.DefaultDelimiter),c.meta.delimiter=m.delimiter}var s=w(m);return m.preview&&m.header&&s.preview++,a=e,o=new E(s),c=o.parse(a,t,r),g(),d?{meta:{paused:!0}}:c||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,o.abort(),a=J(m.chunk)?"":a.substring(o.getCharIndex())},this.resume=function(){t.streamer._halted?(d=!1,t.streamer.parseChunk(a,!0)):setTimeout(t.resume,3)},this.aborted=function(){return e},this.abort=function(){e=!0,o.abort(),c.meta.aborted=!0,J(m.complete)&&m.complete(c),a=""}}function Q(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(j){var z,M=(j=j||{}).delimiter,P=j.newline,U=j.comments,q=j.step,N=j.preview,B=j.fastMode,K=z=void 0===j.quoteChar||null===j.quoteChar?'"':j.quoteChar;if(void 0!==j.escapeChar&&(K=j.escapeChar),("string"!=typeof M||-1<b.BAD_DELIMITERS.indexOf(M))&&(M=","),U===M)throw new Error("Comment character same as delimiter");!0===U?U="#":("string"!=typeof U||-1<b.BAD_DELIMITERS.indexOf(U))&&(U=!1),"\n"!==P&&"\r"!==P&&"\r\n"!==P&&(P="\n");var W=0,H=!1;this.parse=function(i,t,r){if("string"!=typeof i)throw new Error("Input must be a string");var n=i.length,e=M.length,s=P.length,a=U.length,o=J(q),u=[],h=[],f=[],d=W=0;if(!i)return L();if(j.header&&!t){var l=i.split(P)[0].split(M),c=[],p={},g=!1;for(var _ in l){var m=l[_];J(j.transformHeader)&&(m=j.transformHeader(m,_));var y=m,v=p[m]||0;for(0<v&&(g=!0,y=m+"_"+v),p[m]=v+1;c.includes(y);)y=y+"_"+v;c.push(y)}if(g){var k=i.split(P);k[0]=c.join(M),i=k.join(P)}}if(B||!1!==B&&-1===i.indexOf(z)){for(var b=i.split(P),E=0;E<b.length;E++){if(f=b[E],W+=f.length,E!==b.length-1)W+=P.length;else if(r)return L();if(!U||f.substring(0,a)!==U){if(o){if(u=[],I(f.split(M)),F(),H)return L()}else I(f.split(M));if(N&&N<=E)return u=u.slice(0,N),L(!0)}}return L()}for(var w=i.indexOf(M,W),R=i.indexOf(P,W),C=new RegExp(Q(K)+Q(z),"g"),S=i.indexOf(z,W);;)if(i[W]!==z)if(U&&0===f.length&&i.substring(W,W+a)===U){if(-1===R)return L();W=R+s,R=i.indexOf(P,W),w=i.indexOf(M,W)}else if(-1!==w&&(w<R||-1===R))f.push(i.substring(W,w)),W=w+e,w=i.indexOf(M,W);else{if(-1===R)break;if(f.push(i.substring(W,R)),D(R+s),o&&(F(),H))return L();if(N&&u.length>=N)return L(!0)}else for(S=W,W++;;){if(-1===(S=i.indexOf(z,S+1)))return r||h.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:u.length,index:W}),T();if(S===n-1)return T(i.substring(W,S).replace(C,z));if(z!==K||i[S+1]!==K){if(z===K||0===S||i[S-1]!==K){-1!==w&&w<S+1&&(w=i.indexOf(M,S+1)),-1!==R&&R<S+1&&(R=i.indexOf(P,S+1));var O=A(-1===R?w:Math.min(w,R));if(i.substr(S+1+O,e)===M){f.push(i.substring(W,S).replace(C,z)),i[W=S+1+O+e]!==z&&(S=i.indexOf(z,W)),w=i.indexOf(M,W),R=i.indexOf(P,W);break}var x=A(R);if(i.substring(S+1+x,S+1+x+s)===P){if(f.push(i.substring(W,S).replace(C,z)),D(S+1+x+s),w=i.indexOf(M,W),S=i.indexOf(z,W),o&&(F(),H))return L();if(N&&u.length>=N)return L(!0);break}h.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:u.length,index:W}),S++}}else S++}return T();function I(e){u.push(e),d=W}function A(e){var t=0;if(-1!==e){var r=i.substring(S+1,e);r&&""===r.trim()&&(t=r.length)}return t}function T(e){return r||(void 0===e&&(e=i.substring(W)),f.push(e),W=n,I(f),o&&F()),L()}function D(e){W=e,I(f),f=[],R=i.indexOf(P,W)}function L(e){return{data:u,errors:h,meta:{delimiter:M,linebreak:P,aborted:H,truncated:!!e,cursor:d+(t||0)}}}function F(){q(L()),u=[],h=[]}},this.abort=function(){H=!0},this.getCharIndex=function(){return W}}function _(e){var t=e.data,r=a[t.workerId],i=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){i=!0,m(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(J(r.userStep)){for(var s=0;s<t.results.data.length&&(r.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},n),!i);s++);delete t.results}else J(r.userChunk)&&(r.userChunk(t.results,n,t.file),delete t.results)}t.finished&&!i&&m(t.workerId,t.results)}function m(e,t){var r=a[e];J(r.userComplete)&&r.userComplete(t),r.terminate(),delete a[e]}function y(){throw new Error("Not implemented.")}function w(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=w(e[r]);return t}function v(e,t){return function(){e.apply(t,arguments)}}function J(e){return"function"==typeof e}return o&&(f.onmessage=function(e){var t=e.data;if(void 0===b.WORKER_ID&&t&&(b.WORKER_ID=t.workerId),"string"==typeof t.input)f.postMessage({workerId:b.WORKER_ID,results:b.parse(t.input,t.config),finished:!0});else if(f.File&&t.input instanceof File||t.input instanceof Object){var r=b.parse(t.input,t.config);r&&f.postMessage({workerId:b.WORKER_ID,results:r,finished:!0})}}),(l.prototype=Object.create(h.prototype)).constructor=l,(c.prototype=Object.create(h.prototype)).constructor=c,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(h.prototype)).constructor=g,b},void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},"./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}__webpack_require__.d(__webpack_exports__,{Z:()=>_assertThisInitialized})},"./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}__webpack_require__.d(__webpack_exports__,{Z:()=>_getPrototypeOf})},"./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}__webpack_require__.d(__webpack_exports__,{Z:()=>_isNativeReflectConstruct})},"./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}__webpack_require__.d(__webpack_exports__,{Z:()=>_setPrototypeOf})}}]);