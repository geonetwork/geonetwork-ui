"use strict";(self.webpackChunkgeonetwork_ui=self.webpackChunkgeonetwork_ui||[]).push([[6075],{"./libs/ui/layout/src/lib/cell-popin/cell-popin.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>CellPopinComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var _staticBlock,root_effect_scheduler=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),debug_node=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs"),ng_icons_core=__webpack_require__("./node_modules/@ng-icons/core/fesm2022/ng-icons-core.mjs"),ng_icons_iconoir=__webpack_require__("./node_modules/@ng-icons/iconoir/fesm2022/ng-icons-iconoir.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),scrolling=__webpack_require__("./node_modules/@angular/cdk/fesm2022/scrolling.mjs"),overlay_module=__webpack_require__("./node_modules/@angular/cdk/fesm2022/overlay-module.mjs"),src=__webpack_require__("./libs/ui/inputs/src/index.ts");let CellPopinComponent=(class CellPopinComponent{constructor(){this.scrollDispatcher=(0,root_effect_scheduler.WQX)(scrolling.R),this.cdr=(0,root_effect_scheduler.WQX)(core.ChangeDetectorRef),this.extraClass="",this.isOpen=!1,this.isVisible=!0,this.overlayPositions=[{originX:"end",originY:"top",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}],this.firstCheck=!0,this._activePopin=!0}set activePopin(active){this._activePopin=!!active,this.updateIntersectionObserver()}get activePopin(){return this._activePopin}ngAfterViewInit(){this.activePopin&&(this.cdkScrollContainer&&this.scrollDispatcher.register(this.cdkScrollContainer),this.updateIntersectionObserver())}ngOnDestroy(){this.intersectionObserver?.disconnect(),this.scrollDispatcher.deregister(this.cdkScrollContainer)}updateIntersectionObserver(){this.scrollContainer&&this.anchorRef&&(this.intersectionObserver&&this.intersectionObserver?.disconnect(),this.intersectionObserver=new IntersectionObserver(([entry])=>{const visible=entry.intersectionRatio>=1;!this.firstCheck||visible?(this.firstCheck=!1,this.isVisible!==visible&&(this.isVisible=visible,this.cdr.detectChanges())):this.firstCheck=!1},{root:this.scrollContainer.nativeElement,threshold:1}),this.intersectionObserver.observe(this.anchorRef.nativeElement))}openOverlay(){this.isOpen=!0}closeOverlay(){this.isOpen=!1}static#_=_staticBlock=()=>(this.propDecorators={extraClass:[{type:debug_node.pde}],cdkScrollContainer:[{type:debug_node.pde}],scrollContainer:[{type:debug_node.pde}],anchorRef:[{type:core.ViewChild,args:["anchorRef"]}],activePopin:[{type:debug_node.pde}]},this)},_staticBlock());CellPopinComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"gn-ui-cell-popin",standalone:!0,imports:[fesm2022_button.Hl,overlay_module.z_,src.Qp,ng_icons_core.Uq],providers:[(0,ng_icons_core.EB)({iconoirReduce:ng_icons_iconoir.WaV})],template:'<div\n  class="h-full flex items-center justify-center"\n  cdkOverlayOrigin\n  #anchorRef\n  #trigger="cdkOverlayOrigin"\n  [class]="extraClass"\n  data-cy="cell-popin"\n>\n  <ng-content select="[cellContent]"></ng-content>\n  @if (activePopin) {\n    <ng-template\n      cdkConnectedOverlay\n      [cdkConnectedOverlayPush]="false"\n      [cdkConnectedOverlayOrigin]="trigger"\n      [cdkConnectedOverlayOpen]="isOpen"\n      [cdkConnectedOverlayPositions]="overlayPositions"\n      [cdkConnectedOverlayWidth]="\'auto\'"\n      [cdkConnectedOverlayFlexibleDimensions]="true"\n      [cdkConnectedOverlayGrowAfterOpen]="true"\n      (detach)="closeOverlay()"\n    >\n      @if (activePopin && isVisible) {\n        <div\n          class="bg-white shadow-lg border border-gray-300 relative"\n          data-cy="cell-popin-content"\n        >\n          <ng-content select="[popinContent]"></ng-content>\n          <gn-ui-button\n            data-cy="cell-popin-close"\n            [style.--gn-ui-button-background]="\'bg-transparent\'"\n            class="absolute top-2 right-2"\n            type="light"\n            (buttonClick)="closeOverlay()"\n            extraClass="w-10 h-8 px-1"\n          >\n            <ng-icon name="iconoirReduce" size="24"></ng-icon>\n          </gn-ui-button>\n        </div>\n      }\n    </ng-template>\n  }\n</div>\n'})],CellPopinComponent)},"./libs/ui/layout/src/lib/truncated-text/truncated-text.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LongText:()=>LongText,ShortText:()=>ShortText,TextFitPerfectly:()=>TextFitPerfectly,URL:()=>URL,VeryNarrow:()=>VeryNarrow,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),_truncated_text_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./libs/ui/layout/src/lib/truncated-text/truncated-text.component.ts"),_geonetwork_ui_util_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./libs/util/i18n/src/index.ts");const __WEBPACK_DEFAULT_EXPORT__={component:_truncated_text_component__WEBPACK_IMPORTED_MODULE_1__.x,title:"Layout/TruncatedText",decorators:[(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.L4)({providers:[(0,_geonetwork_ui_util_i18n__WEBPACK_IMPORTED_MODULE_2__.GN)()]})],render:args=>({props:args,template:'\n      <div [style.width]="width" class="border border-gray-300">\n        <gn-ui-truncated-text [text]="text"></gn-ui-truncated-text>\n      </div>\n    '})},ShortText={args:{text:"This is a short text that will not be truncated",width:"500px"}},LongText={args:{text:"This is a very long text that will definitely be truncated because it contains too many characters to fit in the container width and thus will show an ellipsis and the open button",width:"300px"}},VeryNarrow={args:{text:"This text will be truncated",width:"120px"}},TextFitPerfectly={args:{text:"This text will not be truncated",width:"230px"}},URL={args:{text:"https://www.very-long-domain-name-example.com/with/very/long/path/that/should/be/truncated",width:"200px"}},__namedExportsOrder=["ShortText","LongText","VeryNarrow","TextFitPerfectly","URL"]},"./libs/ui/layout/src/lib/truncated-text/truncated-text.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>TruncatedTextComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var _staticBlock,root_effect_scheduler=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),debug_node=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs"),ng_icons_core=__webpack_require__("./node_modules/@ng-icons/core/fesm2022/ng-icons-core.mjs"),ng_icons_iconoir=__webpack_require__("./node_modules/@ng-icons/iconoir/fesm2022/ng-icons-iconoir.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),overlay_module=__webpack_require__("./node_modules/@angular/cdk/fesm2022/overlay-module.mjs"),src=__webpack_require__("./libs/ui/inputs/src/index.ts"),cell_popin_component=__webpack_require__("./libs/ui/layout/src/lib/cell-popin/cell-popin.component.ts");let TruncatedTextComponent=(class TruncatedTextComponent{constructor(){this.cd=(0,root_effect_scheduler.WQX)(core.ChangeDetectorRef),this.ngZone=(0,root_effect_scheduler.WQX)(debug_node.SKi),this.text="",this.extraClass="",this.isTextTruncated=!1,this.resizeObserver=new ResizeObserver(()=>{this.ngZone.run(()=>this.checkTextTruncation())}),this.mutationObserver=new MutationObserver(()=>{this.ngZone.run(()=>{this.checkTextTruncation()})})}ngAfterViewInit(){const element=this.textElement.nativeElement;this.resizeObserver?.observe(element),this.mutationObserver?.observe(element.parentElement,{attributes:!0,childList:!0,subtree:!0}),this.checkTextTruncation()}ngOnDestroy(){this.resizeObserver?.disconnect(),this.mutationObserver?.disconnect()}checkTextTruncation(){const element=this.textElement.nativeElement;this.isTextTruncated=element.scrollWidth>element.clientWidth,this.cd.detectChanges()}static#_=_staticBlock=()=>(this.ctorParameters=()=>[],this.propDecorators={text:[{type:debug_node.pde}],extraClass:[{type:debug_node.pde}],scrollContainer:[{type:debug_node.pde}],cdkScrollContainer:[{type:debug_node.pde}],textElement:[{type:core.ViewChild,args:["textElement"]}]},this)},_staticBlock());TruncatedTextComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"gn-ui-truncated-text",standalone:!0,imports:[fesm2022_button.Hl,overlay_module.z_,src.Qp,cell_popin_component.e,ng_icons_core.Uq],providers:[(0,ng_icons_core.EB)({iconoirExpand:ng_icons_iconoir.sC3})],template:'<gn-ui-cell-popin\n  #popinRef\n  [activePopin]="isTextTruncated"\n  [scrollContainer]="scrollContainer"\n  [cdkScrollContainer]="cdkScrollContainer"\n>\n  <div\n    cellContent\n    class="flex items-center justify-between w-full gap-2"\n    [class]="extraClass"\n  >\n    <span #textElement class="truncate py-3 px-2">\n      {{ text }}\n    </span>\n    @if (isTextTruncated) {\n      <gn-ui-button\n        type="outline"\n        extraClass="w-10 h-8 border rounded-lg mr-2"\n        (buttonClick)="popinRef.openOverlay()"\n      >\n        <ng-icon name="iconoirExpand" size="24"> </ng-icon>\n      </gn-ui-button>\n    }\n  </div>\n  <div popinContent class="sm:w-64 xs:w-32 py-4 pl-6 pr-9">\n    <p>{{ text }}</p>\n  </div>\n</gn-ui-cell-popin>\n'}),(0,tslib_es6.Sn)("design:paramtypes",[])],TruncatedTextComponent)},"./node_modules/@angular/material/fesm2022/tooltip-module.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{u:()=>MatTooltipModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs"),_angular_cdk_a11y__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/cdk/fesm2022/a11y-module.mjs"),_angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/cdk/fesm2022/overlay-module.mjs"),_angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@angular/cdk/fesm2022/scrolling.mjs"),_tooltip2_mjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@angular/material/fesm2022/tooltip2.mjs"),_common_module_mjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@angular/material/fesm2022/common-module.mjs");class MatTooltipModule{static ɵfac=function MatTooltipModule_Factory(__ngFactoryType__){return new(__ngFactoryType__||MatTooltipModule)};static ɵmod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.$C({type:MatTooltipModule,imports:[_angular_cdk_a11y__WEBPACK_IMPORTED_MODULE_2__.Pd,_angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_3__.z_,_common_module_mjs__WEBPACK_IMPORTED_MODULE_6__.y,_tooltip2_mjs__WEBPACK_IMPORTED_MODULE_5__.oV,_tooltip2_mjs__WEBPACK_IMPORTED_MODULE_5__.b6],exports:[_tooltip2_mjs__WEBPACK_IMPORTED_MODULE_5__.oV,_tooltip2_mjs__WEBPACK_IMPORTED_MODULE_5__.b6,_common_module_mjs__WEBPACK_IMPORTED_MODULE_6__.y,_angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_4__.Gj]});static ɵinj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.G2t({providers:[_tooltip2_mjs__WEBPACK_IMPORTED_MODULE_5__.YZ],imports:[_angular_cdk_a11y__WEBPACK_IMPORTED_MODULE_2__.Pd,_angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_3__.z_,_common_module_mjs__WEBPACK_IMPORTED_MODULE_6__.y,_common_module_mjs__WEBPACK_IMPORTED_MODULE_6__.y,_angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_4__.Gj]})}("undefined"==typeof ngDevMode||ngDevMode)&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.cDI(MatTooltipModule,[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.UQu,args:[{imports:[_angular_cdk_a11y__WEBPACK_IMPORTED_MODULE_2__.Pd,_angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_3__.z_,_common_module_mjs__WEBPACK_IMPORTED_MODULE_6__.y,_tooltip2_mjs__WEBPACK_IMPORTED_MODULE_5__.oV,_tooltip2_mjs__WEBPACK_IMPORTED_MODULE_5__.b6],exports:[_tooltip2_mjs__WEBPACK_IMPORTED_MODULE_5__.oV,_tooltip2_mjs__WEBPACK_IMPORTED_MODULE_5__.b6,_common_module_mjs__WEBPACK_IMPORTED_MODULE_6__.y,_angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_4__.Gj],providers:[_tooltip2_mjs__WEBPACK_IMPORTED_MODULE_5__.YZ]}]}],null,null)},"./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>firstValueFrom});var _util_EmptyError__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/EmptyError.js"),_Subscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subscriber.js");function firstValueFrom(source,config){var hasConfig="object"==typeof config;return new Promise(function(resolve,reject){var subscriber=new _Subscriber__WEBPACK_IMPORTED_MODULE_1__.Ms({next:function(value){resolve(value),subscriber.unsubscribe()},error:reject,complete:function(){hasConfig?resolve(config.defaultValue):reject(new _util_EmptyError__WEBPACK_IMPORTED_MODULE_0__.G)}});source.subscribe(subscriber)})}}}]);