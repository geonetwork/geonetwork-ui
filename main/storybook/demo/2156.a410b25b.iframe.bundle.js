/*! For license information please see 2156.a410b25b.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkgeonetwork_ui=self.webpackChunkgeonetwork_ui||[]).push([[2156],{"./node_modules/@ltd/j-toml/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";const SyntaxError$1=SyntaxError,TypeError$1=(RangeError,TypeError),RegExp$1=(Error,"undefined"==typeof BigInt||BigInt,RegExp),WeakMap$1=WeakMap,get=WeakMap.prototype.get,set=WeakMap.prototype.set,create$1=Object.create,freeze=(Number.isSafeInteger,Object.getOwnPropertyNames,Object.freeze),NULL=(Object.prototype.isPrototypeOf,Object.seal?Object.preventExtensions(Object.create(null)):null),bind=Function.prototype.bind,test=RegExp.prototype.test,exec=RegExp.prototype.exec,apply$1=Reflect.apply,Proxy$1=Proxy,assign$1=("undefined"==typeof Symbol||Symbol.toStringTag,Object.defineProperty,Object.assign),Object$1=Object,fromCharCode=(Math.floor,Array.isArray,String.fromCharCode),Array$1=Array,hasOwnProperty=Object.prototype.hasOwnProperty,propertyIsEnumerable=Object.prototype.propertyIsEnumerable;Function.prototype.apply;var isEnum=propertyIsEnumerable.call.bind(propertyIsEnumerable),hasOwn=Object$1.hasOwn||function(){return hasOwnProperty.bind?hasOwnProperty.call.bind(hasOwnProperty):function hasOwn(object,key){return hasOwnProperty.call(object,key)}}(),create=Object$1.create;function Descriptor(source){var target=create(NULL);return hasOwn(source,"value")&&(target.value=source.value),hasOwn(source,"writable")&&(target.writable=source.writable),hasOwn(source,"get")&&(target.get=source.get),hasOwn(source,"set")&&(target.set=source.set),hasOwn(source,"enumerable")&&(target.enumerable=source.enumerable),hasOwn(source,"configurable")&&(target.configurable=source.configurable),target}var Test=bind?bind.bind(test):function(re){return function(string){return test.call(re,string)}},Exec=bind?bind.bind(exec):function(re){return function(string){return exec.call(re,string)}};function __PURE__(re){var test=re.test=Test(re),exec=re.exec=Exec(re),source=test.source=exec.source=re.source;return test.unicode=exec.unicode=re.unicode,test.ignoreCase=exec.ignoreCase=re.ignoreCase,test.multiline=exec.multiline=source.indexOf("^")<0&&source.indexOf("$")<0?null:re.multiline,test.dotAll=exec.dotAll=source.indexOf(".")<0?null:re.dotAll,re}function theRegExp(re){return __PURE__(re)}var NT=/[\n\t]+/g,ESCAPE=/\\./g;function graveAccentReplacer($$){return"\\`"===$$?"`":$$}var includes="".includes?function(that,searchString){return that.includes(searchString)}:function(that,searchString){return that.indexOf(searchString)>-1};function RE(template){for(var U=this.U,I=this.I,M=this.M,S=this.S,raw=template.raw,source=raw[0].replace(NT,""),index=1,length=arguments.length;index!==length;){var value=arguments[index];if("string"==typeof value)source+=value;else{var value_source=value.source;if("string"!=typeof value_source)throw TypeError$1("source");if(value.unicode===U)throw SyntaxError$1("unicode");if(value.ignoreCase===I)throw SyntaxError$1("ignoreCase");if(value.multiline===M&&(includes(value_source,"^")||includes(value_source,"$")))throw SyntaxError$1("multiline");if(value.dotAll===S&&includes(value_source,"."))throw SyntaxError$1("dotAll");source+=value_source}source+=raw[index++].replace(NT,"")}var re=RegExp$1(U?source=source.replace(ESCAPE,graveAccentReplacer):source,this.flags),test=re.test=Test(re),exec=re.exec=Exec(re);return test.source=exec.source=source,test.unicode=exec.unicode=!U,test.ignoreCase=exec.ignoreCase=!I,test.multiline=exec.multiline=includes(source,"^")||includes(source,"$")?!M:null,test.dotAll=exec.dotAll=includes(source,".")?!S:null,re}var RE_bind=bind&&bind.bind(RE);function Context(flags){return{U:!includes(flags,"u"),I:!includes(flags,"i"),M:!includes(flags,"m"),S:!includes(flags,"s"),flags}}var CONTEXT=Context(""),newRegExp=Proxy$1?new Proxy$1(RE,{apply:function(RE,thisArg,args){return apply$1(RE,CONTEXT,args)},get:function(RE,flags){return RE_bind(Context(flags))},defineProperty:function(){return!1},preventExtensions:function(){return!1}}):function(){RE.apply=RE.apply;for(var newRegExp=function(){return RE.apply(CONTEXT,arguments)},flags=63;flags--;)!function(context){newRegExp[context.flags]=function(){return RE.apply(context,arguments)}}(Context((1&flags?"":"d")+(2&flags?"":"g")+(4&flags?"":"i")+(8&flags?"":"m")+(8&flags?"":"s")+(16&flags?"":"u")+(32&flags?"":"y")));return freeze?freeze(newRegExp):newRegExp}();const WeakSet$1=WeakSet,keys=(WeakSet.prototype.has,WeakSet.prototype.add,WeakSet.prototype.delete,Object.keys),getOwnPropertySymbols=Object.getOwnPropertySymbols,Null$1=function(){var assign=Object.assign||function assign(target,source){var keys$1,index,key;for(keys$1=keys(source),index=0;index<keys$1.length;++index)target[key=keys$1[index]]=source[key];if(getOwnPropertySymbols)for(keys$1=getOwnPropertySymbols(source),index=0;index<keys$1.length;++index)key=keys$1[index],isEnum(source,key)&&(target[key]=source[key]);return target};function Nullify(constructor){return delete constructor.prototype.constructor,freeze(constructor.prototype),constructor}function Null(origin){return undefined===origin?this:"function"==typeof origin?Nullify(origin):assign(create(NULL),origin)}return delete Null.name,Null.prototype=null,freeze(Null),Null}(),is=Object.is,Object_defineProperties=Object.defineProperties,fromEntries=Object.fromEntries,Reflect_construct=Reflect.construct,Reflect_defineProperty=Reflect.defineProperty,Reflect_deleteProperty=Reflect.deleteProperty,ownKeys=Reflect.ownKeys,newWeakMap=()=>{const weakMap=new WeakMap$1;return weakMap.has=weakMap.has,weakMap.get=weakMap.get,weakMap.set=weakMap.set,weakMap},target2keeper=newWeakMap(),proxy2target=newWeakMap(),target2proxy=newWeakMap(),handlers=assign$1(create$1(NULL),{defineProperty:(target,key,descriptor)=>{if(hasOwn(target,key))return Reflect_defineProperty(target,key,assign$1(create$1(NULL),descriptor));if(Reflect_defineProperty(target,key,assign$1(create$1(NULL),descriptor))){const keeper=target2keeper.get(target);return keeper[keeper.length]=key,!0}return!1},deleteProperty:(target,key)=>{if(Reflect_deleteProperty(target,key)){const keeper=target2keeper.get(target),index=keeper.indexOf(key);return index<0||--keeper.copyWithin(index,index+1).length,!0}return!1},ownKeys:target=>target2keeper.get(target),construct:(target,args,newTarget)=>orderify(Reflect_construct(target,args,newTarget)),apply:(target,thisArg,args)=>orderify(apply$1(target,thisArg,args))}),newProxy=(target,keeper)=>{target2keeper.set(target,keeper);const proxy=new Proxy$1(target,handlers);return proxy2target.set(proxy,target),proxy},orderify=object=>{if(proxy2target.has(object))return object;let proxy=target2proxy.get(object);return proxy||(proxy=newProxy(object,assign$1([],ownKeys(object))),target2proxy.set(object,proxy),proxy)},NONE=(WeakMap.prototype.has,WeakMap.prototype.delete,new WeakMap$1,new WeakSet$1,new WeakSet$1,new WeakSet$1,new WeakSet$1,[]);let sourcePath="",sourceLines=NONE,lineIndex=-1;const throws=error=>{throw error};const where=(pre,rowIndex=lineIndex,columnNumber=0)=>sourceLines===NONE?"":sourcePath?`\n    at (${sourcePath}:${rowIndex+1}:${columnNumber})`:`${pre}line ${rowIndex+1}: ${sourceLines[rowIndex]}`,Whitespace=/[ \t]/,{exec:VALUE_REST_exec}=newRegExp.s`
	^
	(
		(?:\d\d\d\d-\d\d-\d\d \d)?
		[\w\-+.:]+
	)
	${Whitespace}*
	(.*)
	$`.valueOf(),{exec:LITERAL_STRING_exec}=newRegExp.s`
	^
	'([^']*)'
	${Whitespace}*
	(.*)`.valueOf(),{exec:MULTI_LINE_LITERAL_STRING_0_1_2}=newRegExp.s`
	^
	(.*?)
	'''('{0,2})
	${Whitespace}*
	(.*)`.valueOf(),{exec:MULTI_LINE_LITERAL_STRING_0}=newRegExp.s`
	^
	(.*?)
	'''()
	${Whitespace}*
	(.*)`.valueOf();const Tag=/[^\x00-\x1F"#'()<>[\\\]`{}\x7F]+/,{exec:KEY_VALUE_PAIR_exec}=newRegExp.s`
	^
	${Whitespace}*
	=
	${Whitespace}*
	(?:
		<(${Tag})>
		${Whitespace}*
	)?
	(.*)
	$`.valueOf(),{exec:_VALUE_PAIR_exec}=newRegExp.s`
	^
	<(${Tag})>
	${Whitespace}*
	(.*)
	$`.valueOf(),{exec:TAG_REST_exec}=newRegExp.s`
	^
	<(${Tag})>
	${Whitespace}*
	(.*)
	$`.valueOf();theRegExp(/[^\\"]+|\\.?|"(?!"")"?/sy);theRegExp(/[^\\"\x00-\x08\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y),theRegExp(/[^\\"\x00-\x08\x0B-\x1F\x7F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y),theRegExp(/[^\\"\x00-\x08\x0B-\x1F]+|\\(?:[btnfr"\\]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y),theRegExp(/[^\\"\x00-\x08\x0B-\x1F]+|\\(?:[btnfr"\\/]|u[\dA-Fa-f]{4}|U[\dA-Fa-f]{8})/y);const{test:IS_DOT_KEY}=theRegExp(/^[ \t]*\./),{exec:BARE_KEY_STRICT}=theRegExp(/^[\w-]+/),{exec:BARE_KEY_FREE}=theRegExp(/^[^ \t#=[\]'".]+(?:[ \t]+[^ \t#=[\]'".]+)*/);const{exec:LITERAL_KEY____}=theRegExp(/^'[^'\x00-\x08\x0B-\x1F\x7F]*'/),{exec:LITERAL_KEY_DEL}=theRegExp(/^'[^'\x00-\x08\x0B-\x1F]*'/);const{test:CONTROL_CHARACTER_EXCLUDE_TAB____}=theRegExp(/[\x00-\x08\x0B-\x1F\x7F]/),{test:CONTROL_CHARACTER_EXCLUDE_TAB_DEL}=theRegExp(/[\x00-\x08\x0B-\x1F]/);const NUM=newRegExp`
	(?:
		0
		(?:
			b[01][_01]*
		|
			o[0-7][_0-7]*
		|
			x[\dA-Fa-f][_\dA-Fa-f]*
		|
			(?:\.\d[_\d]*)?(?:[Ee]-?\d[_\d]*)?
		)
	|
		[1-9][_\d]*
		(?:\.\d[_\d]*)?(?:[Ee]-?\d[_\d]*)?
	|
		inf
	|
		nan
	)
`.valueOf(),{test:IS_AMAZING}=newRegExp`
	^(?:
		-?${NUM}
		(?:-${NUM})*
	|
		true
	|
		false
	)$
`.valueOf(),{test:BAD_DXOB}=newRegExp`_(?![\dA-Fa-f])`.valueOf();const arrayTypes=new WeakMap$1,arrayTypes_get=get.bind(arrayTypes),arrayTypes_set=set.bind(arrayTypes),As=()=>{const as=array=>{const got=arrayTypes_get(array);return got?got===as||throws(TypeError$1("Types in Array must be same"+where(". Check "))):arrayTypes_set(array,as),array};return as};As(),As(),As(),As(),As(),As(),As(),As(),As(),As(),As();ArrayBuffer.isView;const TextDecoder$1=TextDecoder,Symbol$1=Symbol,NativeDate=(Symbol$1("previous"),Symbol$1("_literal"),new WeakSet$1,new WeakSet$1,Date),getOwnPropertyDescriptors=(Date.parse,Object.preventExtensions,Object.getOwnPropertyDescriptors),defineProperties=function defineProperties(object,descriptorMap){for(var created=create$1(NULL),names=keys(descriptorMap),length=names.length,index=0;index<length;++index){var name=names[index];created[name]=Descriptor(descriptorMap[name])}if(getOwnPropertySymbols){var symbols=getOwnPropertySymbols(descriptorMap);for(length=symbols.length,index=0;index<length;++index){var symbol=symbols[index];isEnum(descriptorMap,symbol)&&(created[symbol]=Descriptor(descriptorMap[symbol]))}}return Object_defineProperties(object,created)},_30_=/(?:0[1-9]|[12]\d|30)/,_31_=/(?:0[1-9]|[12]\d|3[01])/,_23_=/(?:[01]\d|2[0-3])/,_59_=/[0-5]\d/,YMD=newRegExp`
	\d\d\d\d-
	(?:
		0
		(?:
			[13578]-${_31_}
			|
			[469]-${_30_}
			|
			2-${/(?:0[1-9]|1\d|2\d)/}
		)
		|
		1
		(?:
			[02]-${_31_}
			|
			1-${_30_}
		)
	)
`.valueOf(),HMS=newRegExp`
	${_23_}:${_59_}:${_59_}
`.valueOf(),{exec:Z_exec}=theRegExp(/(([+-])\d\d):(\d\d)$/),{exec:OFFSET_DATETIME_exec}=newRegExp`
	^
	${YMD}
	[Tt ]
	${HMS}
	(?:\.\d{1,3}(\d*?)0*)?
	(?:[Zz]|[+-]${_23_}:${_59_})
	$`.valueOf(),{exec:OFFSET_DATETIME_ZERO_exec}=newRegExp`
	^
	${YMD}
	[Tt ]
	${HMS}
	()
	[Zz]
	$`.valueOf(),{test:IS_LOCAL_DATETIME}=newRegExp`
	^
	${YMD}
	[Tt ]
	${HMS}
	(?:\.\d+)?
	$`.valueOf(),{test:IS_LOCAL_DATE}=newRegExp`
	^
	${YMD}
	$`.valueOf(),{test:IS_LOCAL_TIME}=newRegExp`
	^
	${HMS}
	(?:\.\d+)?
	$`.valueOf(),{test:VALIDATE_LEAP}=newRegExp.s`^.....(?:06.30|12.31).23:59:59`.valueOf(),INTEGER_D=(new NativeDate(0),NativeDate.prototype,Symbol$1("OffsetDateTime_ISOString"),Symbol$1("OffsetDateTime_value"),Symbol$1("LocalDateTime_ISOString"),Symbol$1("LocalDateTime_value"),Symbol$1("LocalDate_ISOString"),Symbol$1("LocalDate_value"),Symbol$1("LocalTime_ISOString"),Symbol$1("LocalTime_value"),parseInt,String.fromCodePoint,/[-+]?(?:0|[1-9][_\d]*)/),{test:BAD_D}=newRegExp`_(?!\d)`.valueOf(),{test:IS_D_INTEGER}=newRegExp`^${INTEGER_D}$`.valueOf(),{test:IS_XOB_INTEGER}=theRegExp(/^0(?:x[\dA-Fa-f][_\dA-Fa-f]*|o[0-7][_0-7]*|b[01][_01]*)$/),{test:BAD_XOB}=newRegExp`_(?![\dA-Fa-f])`.valueOf(),{test:IS_FLOAT}=(isFinite,newRegExp`
	^
	${INTEGER_D}
	(?:
		\.\d[_\d]*
		(?:[eE][-+]?\d[_\d]*)?
	|
		[eE][-+]?\d[_\d]*
	)
	$`.valueOf()),{test:IS_ZERO}=theRegExp(/^[-+]?0(?:\.0+)?(?:[eE][-+]?0+)?$/),{exec:NORMALIZED}=theRegExp(/^[-0]?(\d*)(?:\.(\d+))?(?:e\+?(-?\d+))?$/),{exec:ORIGINAL}=theRegExp(/^[-+]?0?(\d*)(?:\.(\d*?)0*)?(?:[eE]\+?(-?\d+))?$/),{test:includesNewline}=(Symbol$1("this"),theRegExp(/\r?\n/g)),{test:IS_OFFSET$}=theRegExp(/(?:[Zz]|[+-]\d\d:\d\d)$/),{test:IS_EMPTY}=theRegExp(/^\[[\t ]*]/),{test:NEED_BASIC}=(Number.MAX_SAFE_INTEGER,Date.prototype,String.prototype.valueOf,Number.prototype.valueOf,BigInt.prototype.valueOf,theRegExp(/[\x00-\x08\x0A-\x1F'\x7F]/)),{test:NEED_ESCAPE}=theRegExp(/^[\x00-\x08\x0A-\x1F"\\\x7F]/),{test:NEED_MULTILINE_BASIC}=theRegExp(/[\x00-\x08\x0A-\x1F\x7F]|'''/),{test:multilineNeedBasic}=theRegExp(/[\x00-\x08\x0B-\x1F\x7F]|'''/),{test:REAL_MULTILINE_ESCAPE}=theRegExp(/[\x00-\x08\x0A-\x1F\\\x7F]|"""/),{test:NEED_MULTILINE_ESCAPE}=theRegExp(/^(?:[\x00-\x08\x0A-\x1F\\\x7F]|""")/),Float64Array$1=Float64Array,Uint8Array$1=Uint8Array,{test:INTEGER_LIKE}=theRegExp(/^-?\d+$/),ensureFloat=literal=>INTEGER_LIKE(literal)?literal+".0":literal,float64Array=new Float64Array$1([NaN]),uint8Array=new Uint8Array$1(float64Array.buffer),NaN_7=uint8Array[7],{test:BARE}=(new Uint8Array$1(new Float64Array$1([NaN]).buffer)[7],theRegExp(/^[\w-]+$/));Symbol$1.toPrimitive;const{test:IS_INDENT}=theRegExp(/^[\t ]*$/);new WeakSet$1,Null$1({fatal:!0,ignoreBOM:!1});const{test:includesNonScalar}=theRegExp(/[\uD800-\uDFFF]/u)},"./node_modules/color-name/index.js":module=>{"use strict";module.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},"./node_modules/ol/Collection.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _Object_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/Object.js"),_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/CollectionEventType.js"),_events_Event_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/events/Event.js");const Property_LENGTH="length";class CollectionEvent extends _events_Event_js__WEBPACK_IMPORTED_MODULE_0__.ZP{constructor(type,element,index){super(type),this.element=element,this.index=index}}class Collection extends _Object_js__WEBPACK_IMPORTED_MODULE_1__.Z{constructor(array,options){if(super(),this.on,this.once,this.un,options=options||{},this.unique_=!!options.unique,this.array_=array||[],this.unique_)for(let i=0,ii=this.array_.length;i<ii;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(arr){for(let i=0,ii=arr.length;i<ii;++i)this.push(arr[i]);return this}forEach(f){const array=this.array_;for(let i=0,ii=array.length;i<ii;++i)f(array[i],i,array)}getArray(){return this.array_}item(index){return this.array_[index]}getLength(){return this.get(Property_LENGTH)}insertAt(index,elem){if(index<0||index>this.getLength())throw new Error("Index out of bounds: "+index);this.unique_&&this.assertUnique_(elem),this.array_.splice(index,0,elem),this.updateLength_(),this.dispatchEvent(new CollectionEvent(_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_2__.Z.ADD,elem,index))}pop(){return this.removeAt(this.getLength()-1)}push(elem){this.unique_&&this.assertUnique_(elem);const n=this.getLength();return this.insertAt(n,elem),this.getLength()}remove(elem){const arr=this.array_;for(let i=0,ii=arr.length;i<ii;++i)if(arr[i]===elem)return this.removeAt(i)}removeAt(index){if(index<0||index>=this.getLength())return;const prev=this.array_[index];return this.array_.splice(index,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_2__.Z.REMOVE,prev,index)),prev}setAt(index,elem){if(index>=this.getLength())return void this.insertAt(index,elem);if(index<0)throw new Error("Index out of bounds: "+index);this.unique_&&this.assertUnique_(elem,index);const prev=this.array_[index];this.array_[index]=elem,this.dispatchEvent(new CollectionEvent(_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_2__.Z.REMOVE,prev,index)),this.dispatchEvent(new CollectionEvent(_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_2__.Z.ADD,elem,index))}updateLength_(){this.set(Property_LENGTH,this.array_.length)}assertUnique_(elem,except){for(let i=0,ii=this.array_.length;i<ii;++i)if(this.array_[i]===elem&&i!==except)throw new Error("Duplicate item added to a unique collection")}}const __WEBPACK_DEFAULT_EXPORT__=Collection},"./node_modules/ol/CollectionEventType.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={ADD:"add",REMOVE:"remove"}},"./node_modules/ol/Image.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Jx:()=>decode,Kp:()=>listenImage,Q9:()=>decodeFallback,ZP:()=>__WEBPACK_DEFAULT_EXPORT__});var _events_Target_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/events/Target.js"),_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/events/EventType.js"),_ImageState_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/ImageState.js"),_has_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/ol/has.js"),_events_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/events.js"),_functions_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/functions.js");class ImageWrapper extends _events_Target_js__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(extent,resolution,pixelRatio,stateOrLoader){super(),this.extent=extent,this.pixelRatio_=pixelRatio,this.resolution=resolution,this.state="function"==typeof stateOrLoader?_ImageState_js__WEBPACK_IMPORTED_MODULE_1__.Z.IDLE:stateOrLoader,this.image_=null,this.loader="function"==typeof stateOrLoader?stateOrLoader:null}changed(){this.dispatchEvent(_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__.Z.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==_ImageState_js__WEBPACK_IMPORTED_MODULE_1__.Z.IDLE&&this.loader){this.state=_ImageState_js__WEBPACK_IMPORTED_MODULE_1__.Z.LOADING,this.changed();const resolution=this.getResolution(),requestResolution=Array.isArray(resolution)?resolution[0]:resolution;(0,_functions_js__WEBPACK_IMPORTED_MODULE_3__.Vi)((()=>this.loader(this.getExtent(),requestResolution,this.getPixelRatio()))).then((image=>{"image"in image&&(this.image_=image.image),"extent"in image&&(this.extent=image.extent),"resolution"in image&&(this.resolution=image.resolution),"pixelRatio"in image&&(this.pixelRatio_=image.pixelRatio),(image instanceof HTMLImageElement||image instanceof ImageBitmap||image instanceof HTMLCanvasElement||image instanceof HTMLVideoElement)&&(this.image_=image),this.state=_ImageState_js__WEBPACK_IMPORTED_MODULE_1__.Z.LOADED})).catch((error=>{this.state=_ImageState_js__WEBPACK_IMPORTED_MODULE_1__.Z.ERROR,console.error(error)})).finally((()=>this.changed()))}}setImage(image){this.image_=image}setResolution(resolution){this.resolution=resolution}}function listenImage(image,loadHandler,errorHandler){const img=image;let listening=!0,decoding=!1,loaded=!1;const listenerKeys=[(0,_events_js__WEBPACK_IMPORTED_MODULE_4__.Vx)(img,_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__.Z.LOAD,(function(){loaded=!0,decoding||loadHandler()}))];return img.src&&_has_js__WEBPACK_IMPORTED_MODULE_5__.Tp?(decoding=!0,img.decode().then((function(){listening&&loadHandler()})).catch((function(error){listening&&(loaded?loadHandler():errorHandler())}))):listenerKeys.push((0,_events_js__WEBPACK_IMPORTED_MODULE_4__.Vx)(img,_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__.Z.ERROR,errorHandler)),function unlisten(){listening=!1,listenerKeys.forEach(_events_js__WEBPACK_IMPORTED_MODULE_4__.bN)}}function decodeFallback(image,src){return src&&(image.src=src),image.src&&_has_js__WEBPACK_IMPORTED_MODULE_5__.Tp?new Promise(((resolve,reject)=>image.decode().then((()=>resolve(image))).catch((e=>image.complete&&image.width?resolve(image):reject(e))))):function load(image,src){return new Promise(((resolve,reject)=>{function handleLoad(){unlisten(),resolve(image)}function handleError(){unlisten(),reject(new Error("Image load error"))}function unlisten(){image.removeEventListener("load",handleLoad),image.removeEventListener("error",handleError)}image.addEventListener("load",handleLoad),image.addEventListener("error",handleError),src&&(image.src=src)}))}(image)}function decode(image,src){return src&&(image.src=src),image.src&&_has_js__WEBPACK_IMPORTED_MODULE_5__.Tp&&_has_js__WEBPACK_IMPORTED_MODULE_5__.et?image.decode().then((()=>createImageBitmap(image))).catch((e=>{if(image.complete&&image.width)return image;throw e})):decodeFallback(image)}const __WEBPACK_DEFAULT_EXPORT__=ImageWrapper},"./node_modules/ol/ImageState.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},"./node_modules/ol/ImageTile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _Tile_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/Tile.js"),_TileState_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/TileState.js"),_dom_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/dom.js"),_Image_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/Image.js");class ImageTile extends _Tile_js__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(tileCoord,state,src,crossOrigin,tileLoadFunction,options){super(tileCoord,state,options),this.crossOrigin_=crossOrigin,this.src_=src,this.key=src,this.image_=new Image,null!==crossOrigin&&(this.image_.crossOrigin=crossOrigin),this.unlisten_=null,this.tileLoadFunction_=tileLoadFunction}getImage(){return this.image_}setImage(element){this.image_=element,this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.ERROR,this.unlistenImage_(),this.image_=function getBlankImage(){const ctx=(0,_dom_js__WEBPACK_IMPORTED_MODULE_3__.E4)(1,1);return ctx.fillStyle="rgba(0,0,0,0)",ctx.fillRect(0,0,1,1),ctx.canvas}(),this.changed()}handleImageLoad_(){const image=this.image_;image.naturalWidth&&image.naturalHeight?this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.LOADED:this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.ERROR&&(this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.IDLE&&(this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,_Image_js__WEBPACK_IMPORTED_MODULE_2__.Kp)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}const __WEBPACK_DEFAULT_EXPORT__=ImageTile},"./node_modules/ol/Map.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>ol_Map});var ol_Object=__webpack_require__("./node_modules/ol/Object.js"),Collection=__webpack_require__("./node_modules/ol/Collection.js"),CollectionEventType=__webpack_require__("./node_modules/ol/CollectionEventType.js"),Disposable=__webpack_require__("./node_modules/ol/Disposable.js"),functions=__webpack_require__("./node_modules/ol/functions.js"),util=__webpack_require__("./node_modules/ol/util.js"),transform=__webpack_require__("./node_modules/ol/transform.js"),extent=__webpack_require__("./node_modules/ol/extent.js"),IconImageCache=__webpack_require__("./node_modules/ol/style/IconImageCache.js"),Layer=__webpack_require__("./node_modules/ol/layer/Layer.js"),ol_coordinate=__webpack_require__("./node_modules/ol/coordinate.js");class MapRenderer extends Disposable.Z{constructor(map){super(),this.map_=map}dispatchRenderEvent(type,frameState){(0,util.O3)()}calculateMatrices2D(frameState){const viewState=frameState.viewState,coordinateToPixelTransform=frameState.coordinateToPixelTransform,pixelToCoordinateTransform=frameState.pixelToCoordinateTransform;(0,transform.qC)(coordinateToPixelTransform,frameState.size[0]/2,frameState.size[1]/2,1/viewState.resolution,-1/viewState.resolution,-viewState.rotation,-viewState.center[0],-viewState.center[1]),(0,transform.nb)(pixelToCoordinateTransform,coordinateToPixelTransform)}forEachFeatureAtCoordinate(coordinate,frameState,hitTolerance,checkWrapped,callback,thisArg,layerFilter,thisArg2){let result;const viewState=frameState.viewState;function forEachFeatureAtCoordinate(managed,feature,layer,geometry){return callback.call(thisArg,feature,managed?layer:null,geometry)}const projection=viewState.projection,translatedCoordinate=(0,ol_coordinate.Cf)(coordinate.slice(),projection),offsets=[[0,0]];if(projection.canWrapX()&&checkWrapped){const projectionExtent=projection.getExtent(),worldWidth=(0,extent.dz)(projectionExtent);offsets.push([-worldWidth,0],[worldWidth,0])}const layerStates=frameState.layerStatesArray,numLayers=layerStates.length,matches=[],tmpCoord=[];for(let i=0;i<offsets.length;i++)for(let j=numLayers-1;j>=0;--j){const layerState=layerStates[j],layer=layerState.layer;if(layer.hasRenderer()&&(0,Layer.j)(layerState,viewState)&&layerFilter.call(thisArg2,layer)){const layerRenderer=layer.getRenderer(),source=layer.getSource();if(layerRenderer&&source){const coordinates=source.getWrapX()?translatedCoordinate:coordinate,callback=forEachFeatureAtCoordinate.bind(null,layerState.managed);tmpCoord[0]=coordinates[0]+offsets[i][0],tmpCoord[1]=coordinates[1]+offsets[i][1],result=layerRenderer.forEachFeatureAtCoordinate(tmpCoord,frameState,hitTolerance,callback,matches)}if(result)return result}}if(0===matches.length)return;const order=1/matches.length;return matches.forEach(((m,i)=>m.distanceSq+=i*order)),matches.sort(((a,b)=>a.distanceSq-b.distanceSq)),matches.some((m=>result=m.callback(m.feature,m.layer,m.geometry))),result}hasFeatureAtCoordinate(coordinate,frameState,hitTolerance,checkWrapped,layerFilter,thisArg){return void 0!==this.forEachFeatureAtCoordinate(coordinate,frameState,hitTolerance,checkWrapped,functions.uX,this,layerFilter,thisArg)}getMap(){return this.map_}renderFrame(frameState){(0,util.O3)()}flushDeclutterItems(frameState){}scheduleExpireIconCache(frameState){IconImageCache.c.canExpireCache()&&frameState.postRenderFunctions.push(expireIconCache)}}function expireIconCache(map,frameState){IconImageCache.c.expire()}const Map=MapRenderer;var ObjectEventType=__webpack_require__("./node_modules/ol/ObjectEventType.js"),Event=__webpack_require__("./node_modules/ol/render/Event.js"),EventType=__webpack_require__("./node_modules/ol/render/EventType.js"),css=__webpack_require__("./node_modules/ol/css.js"),canvas=__webpack_require__("./node_modules/ol/render/canvas.js"),events=__webpack_require__("./node_modules/ol/events.js"),dom=__webpack_require__("./node_modules/ol/dom.js");const Composite=class CompositeMapRenderer extends Map{constructor(map){super(map),this.fontChangeListenerKey_=(0,events.oL)(canvas.sG,ObjectEventType.Z.PROPERTYCHANGE,map.redrawText.bind(map)),this.element_=document.createElement("div");const style=this.element_.style;style.position="absolute",style.width="100%",style.height="100%",style.zIndex="0",this.element_.className=css.XV+" ol-layers";const container=map.getViewport();container.insertBefore(this.element_,container.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(type,frameState){const map=this.getMap();if(map.hasListener(type)){const event=new Event.Z(type,void 0,frameState);map.dispatchEvent(event)}}disposeInternal(){(0,events.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(frameState){if(!frameState)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(frameState),this.dispatchRenderEvent(EventType.Z.PRECOMPOSE,frameState);const layerStatesArray=frameState.layerStatesArray.sort((function(a,b){return a.zIndex-b.zIndex})),viewState=frameState.viewState;this.children_.length=0;const declutterLayers=this.declutterLayers_;declutterLayers.length=0;let previousElement=null;for(let i=0,ii=layerStatesArray.length;i<ii;++i){const layerState=layerStatesArray[i];frameState.layerIndex=i;const layer=layerState.layer,sourceState=layer.getSourceState();if(!(0,Layer.j)(layerState,viewState)||"ready"!=sourceState&&"undefined"!=sourceState){layer.unrender();continue}const element=layer.render(frameState,previousElement);element&&(element!==previousElement&&(this.children_.push(element),previousElement=element),"getDeclutter"in layer&&declutterLayers.push(layer))}this.flushDeclutterItems(frameState),(0,dom.hF)(this.element_,this.children_),this.dispatchRenderEvent(EventType.Z.POSTCOMPOSE,frameState),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(frameState)}flushDeclutterItems(frameState){const layers=this.declutterLayers_;for(let i=layers.length-1;i>=0;--i)layers[i].renderDeclutter(frameState);layers.length=0}};var events_EventType=__webpack_require__("./node_modules/ol/events/EventType.js"),Base=__webpack_require__("./node_modules/ol/layer/Base.js"),events_Event=__webpack_require__("./node_modules/ol/events/Event.js"),asserts=__webpack_require__("./node_modules/ol/asserts.js"),obj=__webpack_require__("./node_modules/ol/obj.js");class GroupEvent extends events_Event.ZP{constructor(type,layer){super(type),this.layer=layer}}const Property_LAYERS="layers";class LayerGroup extends Base.Z{constructor(options){options=options||{};const baseOptions=Object.assign({},options);delete baseOptions.layers;let layers=options.layers;super(baseOptions),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property_LAYERS,this.handleLayersChanged_),layers?Array.isArray(layers)?layers=new Collection.Z(layers.slice(),{unique:!0}):(0,asserts.h)("function"==typeof layers.getArray,"Expected `layers` to be an array or a `Collection`"):layers=new Collection.Z(void 0,{unique:!0}),this.setLayers(layers)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(events.bN),this.layersListenerKeys_.length=0;const layers=this.getLayers();this.layersListenerKeys_.push((0,events.oL)(layers,CollectionEventType.Z.ADD,this.handleLayersAdd_,this),(0,events.oL)(layers,CollectionEventType.Z.REMOVE,this.handleLayersRemove_,this));for(const id in this.listenerKeys_)this.listenerKeys_[id].forEach(events.bN);(0,obj.Z)(this.listenerKeys_);const layersArray=layers.getArray();for(let i=0,ii=layersArray.length;i<ii;i++){const layer=layersArray[i];this.registerLayerListeners_(layer),this.dispatchEvent(new GroupEvent("addlayer",layer))}this.changed()}registerLayerListeners_(layer){const listenerKeys=[(0,events.oL)(layer,ObjectEventType.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,events.oL)(layer,events_EventType.Z.CHANGE,this.handleLayerChange_,this)];layer instanceof LayerGroup&&listenerKeys.push((0,events.oL)(layer,"addlayer",this.handleLayerGroupAdd_,this),(0,events.oL)(layer,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,util.sq)(layer)]=listenerKeys}handleLayerGroupAdd_(event){this.dispatchEvent(new GroupEvent("addlayer",event.layer))}handleLayerGroupRemove_(event){this.dispatchEvent(new GroupEvent("removelayer",event.layer))}handleLayersAdd_(collectionEvent){const layer=collectionEvent.element;this.registerLayerListeners_(layer),this.dispatchEvent(new GroupEvent("addlayer",layer)),this.changed()}handleLayersRemove_(collectionEvent){const layer=collectionEvent.element,key=(0,util.sq)(layer);this.listenerKeys_[key].forEach(events.bN),delete this.listenerKeys_[key],this.dispatchEvent(new GroupEvent("removelayer",layer)),this.changed()}getLayers(){return this.get(Property_LAYERS)}setLayers(layers){const collection=this.getLayers();if(collection){const currentLayers=collection.getArray();for(let i=0,ii=currentLayers.length;i<ii;++i)this.dispatchEvent(new GroupEvent("removelayer",currentLayers[i]))}this.set(Property_LAYERS,layers)}getLayersArray(array){return array=void 0!==array?array:[],this.getLayers().forEach((function(layer){layer.getLayersArray(array)})),array}getLayerStatesArray(dest){const states=void 0!==dest?dest:[],pos=states.length;this.getLayers().forEach((function(layer){layer.getLayerStatesArray(states)}));const ownLayerState=this.getLayerState();let defaultZIndex=ownLayerState.zIndex;dest||void 0!==ownLayerState.zIndex||(defaultZIndex=0);for(let i=pos,ii=states.length;i<ii;i++){const layerState=states[i];layerState.opacity*=ownLayerState.opacity,layerState.visible=layerState.visible&&ownLayerState.visible,layerState.maxResolution=Math.min(layerState.maxResolution,ownLayerState.maxResolution),layerState.minResolution=Math.max(layerState.minResolution,ownLayerState.minResolution),layerState.minZoom=Math.max(layerState.minZoom,ownLayerState.minZoom),layerState.maxZoom=Math.min(layerState.maxZoom,ownLayerState.maxZoom),void 0!==ownLayerState.extent&&(void 0!==layerState.extent?layerState.extent=(0,extent.Ed)(layerState.extent,ownLayerState.extent):layerState.extent=ownLayerState.extent),void 0===layerState.zIndex&&(layerState.zIndex=defaultZIndex)}return states}getSourceState(){return"ready"}}const Group=LayerGroup;class MapEvent extends events_Event.ZP{constructor(type,map,frameState){super(type),this.map=map,this.frameState=void 0!==frameState?frameState:null}}const ol_MapEvent=MapEvent;const ol_MapBrowserEvent=class MapBrowserEvent extends ol_MapEvent{constructor(type,map,originalEvent,dragging,frameState,activePointers){super(type,map,frameState),this.originalEvent=originalEvent,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==dragging&&dragging,this.activePointers=activePointers}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(pixel){this.pixel_=pixel}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(coordinate){this.coordinate_=coordinate}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}};var MapBrowserEventType=__webpack_require__("./node_modules/ol/MapBrowserEventType.js");const pointer_EventType_POINTERMOVE="pointermove",pointer_EventType_POINTERDOWN="pointerdown";var Target=__webpack_require__("./node_modules/ol/events/Target.js"),has=__webpack_require__("./node_modules/ol/has.js");class MapBrowserEventHandler extends Target.Z{constructor(map,moveTolerance){super(map),this.map_=map,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===moveTolerance?1:moveTolerance,this.down_=null;const element=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=element,this.pointerdownListenerKey_=(0,events.oL)(element,pointer_EventType_POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=(0,events.oL)(element,pointer_EventType_POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(events_EventType.Z.TOUCHMOVE,this.boundHandleTouchMove_,!!has.bM&&{passive:!1})}emulateClick_(pointerEvent){let newEvent=new ol_MapBrowserEvent(MapBrowserEventType.Z.CLICK,this.map_,pointerEvent);this.dispatchEvent(newEvent),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,newEvent=new ol_MapBrowserEvent(MapBrowserEventType.Z.DBLCLICK,this.map_,pointerEvent),this.dispatchEvent(newEvent)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const newEvent=new ol_MapBrowserEvent(MapBrowserEventType.Z.SINGLECLICK,this.map_,pointerEvent);this.dispatchEvent(newEvent)}),250)}updateActivePointers_(pointerEvent){const event=pointerEvent,id=event.pointerId;if(event.type==MapBrowserEventType.Z.POINTERUP||event.type==MapBrowserEventType.Z.POINTERCANCEL){delete this.trackedTouches_[id];for(const pointerId in this.trackedTouches_)if(this.trackedTouches_[pointerId].target!==event.target){delete this.trackedTouches_[pointerId];break}}else event.type!=MapBrowserEventType.Z.POINTERDOWN&&event.type!=MapBrowserEventType.Z.POINTERMOVE||(this.trackedTouches_[id]=event);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(pointerEvent){this.updateActivePointers_(pointerEvent);const newEvent=new ol_MapBrowserEvent(MapBrowserEventType.Z.POINTERUP,this.map_,pointerEvent,void 0,void 0,this.activePointers_);this.dispatchEvent(newEvent),this.emulateClicks_&&!newEvent.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(pointerEvent)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(events.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(pointerEvent){return 0===pointerEvent.button}handlePointerDown_(pointerEvent){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(pointerEvent);const newEvent=new ol_MapBrowserEvent(MapBrowserEventType.Z.POINTERDOWN,this.map_,pointerEvent,void 0,void 0,this.activePointers_);if(this.dispatchEvent(newEvent),this.down_=new PointerEvent(pointerEvent.type,pointerEvent),Object.defineProperty(this.down_,"target",{writable:!1,value:pointerEvent.target}),0===this.dragListenerKeys_.length){const doc=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,events.oL)(doc,MapBrowserEventType.Z.POINTERMOVE,this.handlePointerMove_,this),(0,events.oL)(doc,MapBrowserEventType.Z.POINTERUP,this.handlePointerUp_,this),(0,events.oL)(this.element_,MapBrowserEventType.Z.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==doc&&this.dragListenerKeys_.push((0,events.oL)(this.element_.getRootNode(),MapBrowserEventType.Z.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(pointerEvent){if(this.isMoving_(pointerEvent)){this.updateActivePointers_(pointerEvent),this.dragging_=!0;const newEvent=new ol_MapBrowserEvent(MapBrowserEventType.Z.POINTERDRAG,this.map_,pointerEvent,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(newEvent)}}relayMoveEvent_(pointerEvent){this.originalPointerMoveEvent_=pointerEvent;const dragging=!(!this.down_||!this.isMoving_(pointerEvent));this.dispatchEvent(new ol_MapBrowserEvent(MapBrowserEventType.Z.POINTERMOVE,this.map_,pointerEvent,dragging))}handleTouchMove_(event){const originalEvent=this.originalPointerMoveEvent_;originalEvent&&!originalEvent.defaultPrevented||"boolean"==typeof event.cancelable&&!0!==event.cancelable||event.preventDefault()}isMoving_(pointerEvent){return this.dragging_||Math.abs(pointerEvent.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(pointerEvent.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,events.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(events_EventType.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,events.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(events.bN),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const ol_MapBrowserEventHandler=MapBrowserEventHandler,MapEventType_POSTRENDER="postrender",MapEventType_MOVESTART="movestart",MapEventType_MOVEEND="moveend",MapEventType_LOADSTART="loadstart",MapEventType_LOADEND="loadend",MapProperty_LAYERGROUP="layergroup",MapProperty_SIZE="size",MapProperty_TARGET="target",MapProperty_VIEW="view",DROP=1/0;const structs_PriorityQueue=class PriorityQueue{constructor(priorityFunction,keyFunction){this.priorityFunction_=priorityFunction,this.keyFunction_=keyFunction,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,obj.Z)(this.queuedElements_)}dequeue(){const elements=this.elements_,priorities=this.priorities_,element=elements[0];1==elements.length?(elements.length=0,priorities.length=0):(elements[0]=elements.pop(),priorities[0]=priorities.pop(),this.siftUp_(0));const elementKey=this.keyFunction_(element);return delete this.queuedElements_[elementKey],element}enqueue(element){(0,asserts.h)(!(this.keyFunction_(element)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const priority=this.priorityFunction_(element);return priority!=DROP&&(this.elements_.push(element),this.priorities_.push(priority),this.queuedElements_[this.keyFunction_(element)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(index){return 2*index+1}getRightChildIndex_(index){return 2*index+2}getParentIndex_(index){return index-1>>1}heapify_(){let i;for(i=(this.elements_.length>>1)-1;i>=0;i--)this.siftUp_(i)}isEmpty(){return 0===this.elements_.length}isKeyQueued(key){return key in this.queuedElements_}isQueued(element){return this.isKeyQueued(this.keyFunction_(element))}siftUp_(index){const elements=this.elements_,priorities=this.priorities_,count=elements.length,element=elements[index],priority=priorities[index],startIndex=index;for(;index<count>>1;){const lIndex=this.getLeftChildIndex_(index),rIndex=this.getRightChildIndex_(index),smallerChildIndex=rIndex<count&&priorities[rIndex]<priorities[lIndex]?rIndex:lIndex;elements[index]=elements[smallerChildIndex],priorities[index]=priorities[smallerChildIndex],index=smallerChildIndex}elements[index]=element,priorities[index]=priority,this.siftDown_(startIndex,index)}siftDown_(startIndex,index){const elements=this.elements_,priorities=this.priorities_,element=elements[index],priority=priorities[index];for(;index>startIndex;){const parentIndex=this.getParentIndex_(index);if(!(priorities[parentIndex]>priority))break;elements[index]=elements[parentIndex],priorities[index]=priorities[parentIndex],index=parentIndex}elements[index]=element,priorities[index]=priority}reprioritize(){const priorityFunction=this.priorityFunction_,elements=this.elements_,priorities=this.priorities_;let index=0;const n=elements.length;let element,i,priority;for(i=0;i<n;++i)element=elements[i],priority=priorityFunction(element),priority==DROP?delete this.queuedElements_[this.keyFunction_(element)]:(priorities[index]=priority,elements[index++]=element);elements.length=index,priorities.length=index,this.heapify_()}};var TileState=__webpack_require__("./node_modules/ol/TileState.js");const ol_TileQueue=class TileQueue extends structs_PriorityQueue{constructor(tilePriorityFunction,tileChangeCallback){super((function(element){return tilePriorityFunction.apply(null,element)}),(function(element){return element[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=tileChangeCallback,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(element){const added=super.enqueue(element);if(added){element[0].addEventListener(events_EventType.Z.CHANGE,this.boundHandleTileChange_)}return added}getTilesLoading(){return this.tilesLoading_}handleTileChange(event){const tile=event.target,state=tile.getState();if(state===TileState.Z.LOADED||state===TileState.Z.ERROR||state===TileState.Z.EMPTY){state!==TileState.Z.ERROR&&tile.removeEventListener(events_EventType.Z.CHANGE,this.boundHandleTileChange_);const tileKey=tile.getKey();tileKey in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[tileKey],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(maxTotalLoading,maxNewLoads){let state,tile,tileKey,newLoads=0;for(;this.tilesLoading_<maxTotalLoading&&newLoads<maxNewLoads&&this.getCount()>0;)tile=this.dequeue()[0],tileKey=tile.getKey(),state=tile.getState(),state!==TileState.Z.IDLE||tileKey in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[tileKey]=!0,++this.tilesLoading_,++newLoads,tile.load())}};var View=__webpack_require__("./node_modules/ol/View.js"),ViewHint=__webpack_require__("./node_modules/ol/ViewHint.js");class Control extends ol_Object.Z{constructor(options){super();const element=options.element;!element||options.target||element.style.pointerEvents||(element.style.pointerEvents="auto"),this.element=element||null,this.target_=null,this.map_=null,this.listenerKeys=[],options.render&&(this.render=options.render),options.target&&this.setTarget(options.target)}disposeInternal(){(0,dom.ZF)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(map){this.map_&&(0,dom.ZF)(this.element);for(let i=0,ii=this.listenerKeys.length;i<ii;++i)(0,events.bN)(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=map,map){(this.target_?this.target_:map.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==functions.Zn&&this.listenerKeys.push((0,events.oL)(map,MapEventType_POSTRENDER,this.render,this)),map.render()}}render(mapEvent){}setTarget(target){this.target_="string"==typeof target?document.getElementById(target):target}}const control_Control=Control;var array=__webpack_require__("./node_modules/ol/array.js");const control_Attribution=class Attribution extends control_Control{constructor(options){options=options||{},super({element:document.createElement("div"),render:options.render,target:options.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===options.collapsed||options.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==options.collapsible,this.collapsible_=void 0===options.collapsible||options.collapsible,this.collapsible_||(this.collapsed_=!1);const className=void 0!==options.className?options.className:"ol-attribution",tipLabel=void 0!==options.tipLabel?options.tipLabel:"Attributions",expandClassName=void 0!==options.expandClassName?options.expandClassName:className+"-expand",collapseLabel=void 0!==options.collapseLabel?options.collapseLabel:"›",collapseClassName=void 0!==options.collapseClassName?options.collapseClassName:className+"-collapse";"string"==typeof collapseLabel?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=collapseLabel,this.collapseLabel_.className=collapseClassName):this.collapseLabel_=collapseLabel;const label=void 0!==options.label?options.label:"i";"string"==typeof label?(this.label_=document.createElement("span"),this.label_.textContent=label,this.label_.className=expandClassName):this.label_=label;const activeLabel=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=tipLabel,this.toggleButton_.appendChild(activeLabel),this.toggleButton_.addEventListener(events_EventType.Z.CLICK,this.handleClick_.bind(this),!1);const cssClasses=className+" "+css.XV+" "+css.hg+(this.collapsed_&&this.collapsible_?" "+css.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),element=this.element;element.className=cssClasses,element.appendChild(this.toggleButton_),element.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(frameState){const visibleAttributions=Array.from(new Set(this.getMap().getAllLayers().flatMap((layer=>layer.getAttributions(frameState))))),collapsible=!this.getMap().getAllLayers().some((layer=>layer.getSource()&&!1===layer.getSource().getAttributionsCollapsible()));return this.overrideCollapsible_||this.setCollapsible(collapsible),visibleAttributions}updateElement_(frameState){if(!frameState)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const attributions=this.collectSourceAttributions_(frameState),visible=attributions.length>0;if(this.renderedVisible_!=visible&&(this.element.style.display=visible?"":"none",this.renderedVisible_=visible),!(0,array.fS)(attributions,this.renderedAttributions_)){(0,dom.ep)(this.ulElement_);for(let i=0,ii=attributions.length;i<ii;++i){const element=document.createElement("li");element.innerHTML=attributions[i],this.ulElement_.appendChild(element)}this.renderedAttributions_=attributions}}handleClick_(event){event.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(css.hN),this.collapsed_?(0,dom.$H)(this.collapseLabel_,this.label_):(0,dom.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(collapsible){this.collapsible_!==collapsible&&(this.collapsible_=collapsible,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(collapsed){this.userCollapsed_=collapsed,this.collapsible_&&this.collapsed_!==collapsed&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(mapEvent){this.updateElement_(mapEvent.frameState)}};var easing=__webpack_require__("./node_modules/ol/easing.js");const control_Rotate=class Rotate extends control_Control{constructor(options){options=options||{},super({element:document.createElement("div"),render:options.render,target:options.target});const className=void 0!==options.className?options.className:"ol-rotate",label=void 0!==options.label?options.label:"⇧",compassClassName=void 0!==options.compassClassName?options.compassClassName:"ol-compass";this.label_=null,"string"==typeof label?(this.label_=document.createElement("span"),this.label_.className=compassClassName,this.label_.textContent=label):(this.label_=label,this.label_.classList.add(compassClassName));const tipLabel=options.tipLabel?options.tipLabel:"Reset rotation",button=document.createElement("button");button.className=className+"-reset",button.setAttribute("type","button"),button.title=tipLabel,button.appendChild(this.label_),button.addEventListener(events_EventType.Z.CLICK,this.handleClick_.bind(this),!1);const cssClasses=className+" "+css.XV+" "+css.hg,element=this.element;element.className=cssClasses,element.appendChild(button),this.callResetNorth_=options.resetNorth?options.resetNorth:void 0,this.duration_=void 0!==options.duration?options.duration:250,this.autoHide_=void 0===options.autoHide||options.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(css.oj)}handleClick_(event){event.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const view=this.getMap().getView();if(!view)return;const rotation=view.getRotation();void 0!==rotation&&(this.duration_>0&&rotation%(2*Math.PI)!=0?view.animate({rotation:0,duration:this.duration_,easing:easing.Vv}):view.setRotation(0))}render(mapEvent){const frameState=mapEvent.frameState;if(!frameState)return;const rotation=frameState.viewState.rotation;if(rotation!=this.rotation_){const transform="rotate("+rotation+"rad)";if(this.autoHide_){const contains=this.element.classList.contains(css.oj);contains||0!==rotation?contains&&0!==rotation&&this.element.classList.remove(css.oj):this.element.classList.add(css.oj)}this.label_.style.transform=transform}this.rotation_=rotation}};const control_Zoom=class Zoom extends control_Control{constructor(options){options=options||{},super({element:document.createElement("div"),target:options.target});const className=void 0!==options.className?options.className:"ol-zoom",delta=void 0!==options.delta?options.delta:1,zoomInClassName=void 0!==options.zoomInClassName?options.zoomInClassName:className+"-in",zoomOutClassName=void 0!==options.zoomOutClassName?options.zoomOutClassName:className+"-out",zoomInLabel=void 0!==options.zoomInLabel?options.zoomInLabel:"+",zoomOutLabel=void 0!==options.zoomOutLabel?options.zoomOutLabel:"–",zoomInTipLabel=void 0!==options.zoomInTipLabel?options.zoomInTipLabel:"Zoom in",zoomOutTipLabel=void 0!==options.zoomOutTipLabel?options.zoomOutTipLabel:"Zoom out",inElement=document.createElement("button");inElement.className=zoomInClassName,inElement.setAttribute("type","button"),inElement.title=zoomInTipLabel,inElement.appendChild("string"==typeof zoomInLabel?document.createTextNode(zoomInLabel):zoomInLabel),inElement.addEventListener(events_EventType.Z.CLICK,this.handleClick_.bind(this,delta),!1);const outElement=document.createElement("button");outElement.className=zoomOutClassName,outElement.setAttribute("type","button"),outElement.title=zoomOutTipLabel,outElement.appendChild("string"==typeof zoomOutLabel?document.createTextNode(zoomOutLabel):zoomOutLabel),outElement.addEventListener(events_EventType.Z.CLICK,this.handleClick_.bind(this,-delta),!1);const cssClasses=className+" "+css.XV+" "+css.hg,element=this.element;element.className=cssClasses,element.appendChild(inElement),element.appendChild(outElement),this.duration_=void 0!==options.duration?options.duration:250}handleClick_(delta,event){event.preventDefault(),this.zoomByDelta_(delta)}zoomByDelta_(delta){const view=this.getMap().getView();if(!view)return;const currentZoom=view.getZoom();if(void 0!==currentZoom){const newZoom=view.getConstrainedZoom(currentZoom+delta);this.duration_>0?(view.getAnimating()&&view.cancelAnimations(),view.animate({zoom:newZoom,duration:this.duration_,easing:easing.Vv})):view.setZoom(newZoom)}}};var interaction_defaults=__webpack_require__("./node_modules/ol/interaction/defaults.js"),proj=__webpack_require__("./node_modules/ol/proj.js"),ol_size=__webpack_require__("./node_modules/ol/size.js"),console=__webpack_require__("./node_modules/ol/console.js");function removeLayerMapProperty(layer){layer instanceof Layer.Z?layer.setMapInternal(null):layer instanceof Group&&layer.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(layer,map){if(layer instanceof Layer.Z)layer.setMapInternal(map);else if(layer instanceof Group){const layers=layer.getLayers().getArray();for(let i=0,ii=layers.length;i<ii;++i)setLayerMapProperty(layers[i],map)}}class Map_Map extends ol_Object.Z{constructor(options){super(),options=options||{},this.on,this.once,this.un;const optionsInternal=function createOptionsInternal(options){let keyboardEventTarget=null;void 0!==options.keyboardEventTarget&&(keyboardEventTarget="string"==typeof options.keyboardEventTarget?document.getElementById(options.keyboardEventTarget):options.keyboardEventTarget);const values={},layerGroup=options.layers&&"function"==typeof options.layers.getLayers?options.layers:new Group({layers:options.layers});let controls,interactions,overlays;values[MapProperty_LAYERGROUP]=layerGroup,values[MapProperty_TARGET]=options.target,values[MapProperty_VIEW]=options.view instanceof View.ZP?options.view:new View.ZP,void 0!==options.controls&&(Array.isArray(options.controls)?controls=new Collection.Z(options.controls.slice()):((0,asserts.h)("function"==typeof options.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),controls=options.controls));void 0!==options.interactions&&(Array.isArray(options.interactions)?interactions=new Collection.Z(options.interactions.slice()):((0,asserts.h)("function"==typeof options.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),interactions=options.interactions));void 0!==options.overlays?Array.isArray(options.overlays)?overlays=new Collection.Z(options.overlays.slice()):((0,asserts.h)("function"==typeof options.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),overlays=options.overlays):overlays=new Collection.Z;return{controls,interactions,keyboardEventTarget,overlays,values}}(options);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==options.maxTilesLoading?options.maxTilesLoading:16,this.pixelRatio_=void 0!==options.pixelRatio?options.pixelRatio:has.MP,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,transform.Ue)(),this.pixelToCoordinateTransform_=(0,transform.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=options.moveTolerance,this.keyboardEventTarget_=optionsInternal.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=optionsInternal.controls||function defaults(options){options=options||{};const controls=new Collection.Z;return(void 0===options.zoom||options.zoom)&&controls.push(new control_Zoom(options.zoomOptions)),(void 0===options.rotate||options.rotate)&&controls.push(new control_Rotate(options.rotateOptions)),(void 0===options.attribution||options.attribution)&&controls.push(new control_Attribution(options.attributionOptions)),controls}(),this.interactions=optionsInternal.interactions||(0,interaction_defaults.c)({onFocusOnly:!0}),this.overlays_=optionsInternal.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new ol_TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty_LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty_VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty_SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty_TARGET,this.handleTargetChanged_),this.setProperties(optionsInternal.values);const map=this;!options.view||options.view instanceof View.ZP||options.view.then((function(viewOptions){map.setView(new View.ZP(viewOptions))})),this.controls.addEventListener(CollectionEventType.Z.ADD,(event=>{event.element.setMap(this)})),this.controls.addEventListener(CollectionEventType.Z.REMOVE,(event=>{event.element.setMap(null)})),this.interactions.addEventListener(CollectionEventType.Z.ADD,(event=>{event.element.setMap(this)})),this.interactions.addEventListener(CollectionEventType.Z.REMOVE,(event=>{event.element.setMap(null)})),this.overlays_.addEventListener(CollectionEventType.Z.ADD,(event=>{this.addOverlayInternal_(event.element)})),this.overlays_.addEventListener(CollectionEventType.Z.REMOVE,(event=>{const id=event.element.getId();void 0!==id&&delete this.overlayIdIndex_[id.toString()],event.element.setMap(null)})),this.controls.forEach((control=>{control.setMap(this)})),this.interactions.forEach((interaction=>{interaction.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(control){this.getControls().push(control)}addInteraction(interaction){this.getInteractions().push(interaction)}addLayer(layer){this.getLayerGroup().getLayers().push(layer)}handleLayerAdd_(event){setLayerMapProperty(event.layer,this)}addOverlay(overlay){this.getOverlays().push(overlay)}addOverlayInternal_(overlay){const id=overlay.getId();void 0!==id&&(this.overlayIdIndex_[id.toString()]=overlay),overlay.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(pixel,callback,options){if(!this.frameState_||!this.renderer_)return;const coordinate=this.getCoordinateFromPixelInternal(pixel),hitTolerance=void 0!==(options=void 0!==options?options:{}).hitTolerance?options.hitTolerance:0,layerFilter=void 0!==options.layerFilter?options.layerFilter:functions.uX,checkWrapped=!1!==options.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(coordinate,this.frameState_,hitTolerance,checkWrapped,callback,null,layerFilter,null)}getFeaturesAtPixel(pixel,options){const features=[];return this.forEachFeatureAtPixel(pixel,(function(feature){features.push(feature)}),options),features}getAllLayers(){const layers=[];return function addLayersFrom(layerGroup){layerGroup.forEach((function(layer){layer instanceof Group?addLayersFrom(layer.getLayers()):layers.push(layer)}))}(this.getLayers()),layers}hasFeatureAtPixel(pixel,options){if(!this.frameState_||!this.renderer_)return!1;const coordinate=this.getCoordinateFromPixelInternal(pixel),layerFilter=void 0!==(options=void 0!==options?options:{}).layerFilter?options.layerFilter:functions.uX,hitTolerance=void 0!==options.hitTolerance?options.hitTolerance:0,checkWrapped=!1!==options.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(coordinate,this.frameState_,hitTolerance,checkWrapped,layerFilter,null)}getEventCoordinate(event){return this.getCoordinateFromPixel(this.getEventPixel(event))}getEventCoordinateInternal(event){return this.getCoordinateFromPixelInternal(this.getEventPixel(event))}getEventPixel(event){const viewportPosition=this.viewport_.getBoundingClientRect(),viewportSize=this.getSize(),scaleX=viewportPosition.width/viewportSize[0],scaleY=viewportPosition.height/viewportSize[1],eventPosition="changedTouches"in event?event.changedTouches[0]:event;return[(eventPosition.clientX-viewportPosition.left)/scaleX,(eventPosition.clientY-viewportPosition.top)/scaleY]}getTarget(){return this.get(MapProperty_TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(pixel){return(0,proj.lO)(this.getCoordinateFromPixelInternal(pixel),this.getView().getProjection())}getCoordinateFromPixelInternal(pixel){const frameState=this.frameState_;return frameState?(0,transform.nn)(frameState.pixelToCoordinateTransform,pixel.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(id){const overlay=this.overlayIdIndex_[id.toString()];return void 0!==overlay?overlay:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty_LAYERGROUP)}setLayers(layers){const group=this.getLayerGroup();if(layers instanceof Collection.Z)return void group.setLayers(layers);const collection=group.getLayers();collection.clear(),collection.extend(layers)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const layerStatesArray=this.getLayerGroup().getLayerStatesArray();for(let i=0,ii=layerStatesArray.length;i<ii;++i){const state=layerStatesArray[i];if(!state.visible)continue;const renderer=state.layer.getRenderer();if(renderer&&!renderer.ready)return!0;const source=state.layer.getSource();if(source&&source.loading)return!0}return!1}getPixelFromCoordinate(coordinate){const viewCoordinate=(0,proj.Vs)(coordinate,this.getView().getProjection());return this.getPixelFromCoordinateInternal(viewCoordinate)}getPixelFromCoordinateInternal(coordinate){const frameState=this.frameState_;return frameState?(0,transform.nn)(frameState.coordinateToPixelTransform,coordinate.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty_SIZE)}getView(){return this.get(MapProperty_VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const targetElement=this.getTargetElement();return targetElement?targetElement.ownerDocument:document}getTilePriority(tile,tileSourceKey,tileCenter,tileResolution){return function getTilePriority(frameState,tile,tileSourceKey,tileCenter,tileResolution){if(!frameState||!(tileSourceKey in frameState.wantedTiles))return DROP;if(!frameState.wantedTiles[tileSourceKey][tile.getKey()])return DROP;const center=frameState.viewState.center,deltaX=tileCenter[0]-center[0],deltaY=tileCenter[1]-center[1];return 65536*Math.log(tileResolution)+Math.sqrt(deltaX*deltaX+deltaY*deltaY)/tileResolution}(this.frameState_,tile,tileSourceKey,tileCenter,tileResolution)}handleBrowserEvent(browserEvent,type){type=type||browserEvent.type;const mapBrowserEvent=new ol_MapBrowserEvent(type,this,browserEvent);this.handleMapBrowserEvent(mapBrowserEvent)}handleMapBrowserEvent(mapBrowserEvent){if(!this.frameState_)return;const originalEvent=mapBrowserEvent.originalEvent,eventType=originalEvent.type;if(eventType===pointer_EventType_POINTERDOWN||eventType===events_EventType.Z.WHEEL||eventType===events_EventType.Z.KEYDOWN){const doc=this.getOwnerDocument(),rootNode=this.viewport_.getRootNode?this.viewport_.getRootNode():doc,target=originalEvent.target;if(this.overlayContainerStopEvent_.contains(target)||!(rootNode===doc?doc.documentElement:rootNode).contains(target))return}if(mapBrowserEvent.frameState=this.frameState_,!1!==this.dispatchEvent(mapBrowserEvent)){const interactionsArray=this.getInteractions().getArray().slice();for(let i=interactionsArray.length-1;i>=0;i--){const interaction=interactionsArray[i];if(interaction.getMap()!==this||!interaction.getActive()||!this.getTargetElement())continue;if(!interaction.handleEvent(mapBrowserEvent)||mapBrowserEvent.propagationStopped)break}}}handlePostRender(){const frameState=this.frameState_,tileQueue=this.tileQueue_;if(!tileQueue.isEmpty()){let maxTotalLoading=this.maxTilesLoading_,maxNewLoads=maxTotalLoading;if(frameState){const hints=frameState.viewHints;if(hints[ViewHint.Z.ANIMATING]||hints[ViewHint.Z.INTERACTING]){const lowOnFrameBudget=Date.now()-frameState.time>8;maxTotalLoading=lowOnFrameBudget?0:8,maxNewLoads=lowOnFrameBudget?0:2}}tileQueue.getTilesLoading()<maxTotalLoading&&(tileQueue.reprioritize(),tileQueue.loadMoreTiles(maxTotalLoading,maxNewLoads))}frameState&&this.renderer_&&!frameState.animate&&(!0===this.renderComplete_?(this.hasListener(EventType.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(EventType.Z.RENDERCOMPLETE,frameState),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new ol_MapEvent(MapEventType_LOADEND,this,frameState)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new ol_MapEvent(MapEventType_LOADSTART,this,frameState))));const postRenderFunctions=this.postRenderFunctions_;for(let i=0,ii=postRenderFunctions.length;i<ii;++i)postRenderFunctions[i](this,frameState);postRenderFunctions.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,ii=this.targetChangeHandlerKeys_.length;i<ii;++i)(0,events.bN)(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(events_EventType.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(events_EventType.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,dom.ZF)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const rootNode=this.targetElement_.getRootNode();rootNode instanceof ShadowRoot&&this.resizeObserver_.unobserve(rootNode.host),this.setSize(void 0)}const target=this.getTarget(),targetElement="string"==typeof target?document.getElementById(target):target;if(this.targetElement_=targetElement,targetElement){targetElement.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Composite(this)),this.mapBrowserEventHandler_=new ol_MapBrowserEventHandler(this,this.moveTolerance_);for(const key in MapBrowserEventType.Z)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType.Z[key],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(events_EventType.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(events_EventType.Z.WHEEL,this.boundHandleBrowserEvent_,!!has.bM&&{passive:!1});const keyboardEventTarget=this.keyboardEventTarget_?this.keyboardEventTarget_:targetElement;this.targetChangeHandlerKeys_=[(0,events.oL)(keyboardEventTarget,events_EventType.Z.KEYDOWN,this.handleBrowserEvent,this),(0,events.oL)(keyboardEventTarget,events_EventType.Z.KEYPRESS,this.handleBrowserEvent,this)];const rootNode=targetElement.getRootNode();rootNode instanceof ShadowRoot&&this.resizeObserver_.observe(rootNode.host),this.resizeObserver_.observe(targetElement)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,events.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,events.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const view=this.getView();view&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=(0,events.oL)(view,ObjectEventType.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,events.oL)(view,events_EventType.Z.CHANGE,this.handleViewPropertyChanged_,this),view.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(events.bN),this.layerGroupPropertyListenerKeys_=null);const layerGroup=this.getLayerGroup();layerGroup&&(this.handleLayerAdd_(new GroupEvent("addlayer",layerGroup)),this.layerGroupPropertyListenerKeys_=[(0,events.oL)(layerGroup,ObjectEventType.Z.PROPERTYCHANGE,this.render,this),(0,events.oL)(layerGroup,events_EventType.Z.CHANGE,this.render,this),(0,events.oL)(layerGroup,"addlayer",this.handleLayerAdd_,this),(0,events.oL)(layerGroup,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const layerStates=this.getLayerGroup().getLayerStatesArray();for(let i=0,ii=layerStates.length;i<ii;++i){const layer=layerStates[i].layer;layer.hasRenderer()&&layer.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const frameState=this.frameState_;frameState&&this.renderer_.flushDeclutterItems(frameState)}removeControl(control){return this.getControls().remove(control)}removeInteraction(interaction){return this.getInteractions().remove(interaction)}removeLayer(layer){return this.getLayerGroup().getLayers().remove(layer)}handleLayerRemove_(event){removeLayerMapProperty(event.layer)}removeOverlay(overlay){return this.getOverlays().remove(overlay)}renderFrame_(time){const size=this.getSize(),view=this.getView(),previousFrameState=this.frameState_;let frameState=null;if(void 0!==size&&(0,ol_size.py)(size)&&view&&view.isDef()){const viewHints=view.getHints(this.frameState_?this.frameState_.viewHints:void 0),viewState=view.getState();if(frameState={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,extent.p8)(viewState.center,viewState.resolution,viewState.rotation,size),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size,tileQueue:this.tileQueue_,time,usedTiles:{},viewState,viewHints,wantedTiles:{},mapId:(0,util.sq)(this),renderTargets:{}},viewState.nextCenter&&viewState.nextResolution){const rotation=isNaN(viewState.nextRotation)?viewState.rotation:viewState.nextRotation;frameState.nextExtent=(0,extent.p8)(viewState.nextCenter,viewState.nextResolution,rotation,size)}}if(this.frameState_=frameState,this.renderer_.renderFrame(frameState),frameState){if(frameState.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,frameState.postRenderFunctions),previousFrameState){(!this.previousExtent_||!(0,extent.xb)(this.previousExtent_)&&!(0,extent.fS)(frameState.extent,this.previousExtent_))&&(this.dispatchEvent(new ol_MapEvent(MapEventType_MOVESTART,this,previousFrameState)),this.previousExtent_=(0,extent.YN)(this.previousExtent_))}this.previousExtent_&&!frameState.viewHints[ViewHint.Z.ANIMATING]&&!frameState.viewHints[ViewHint.Z.INTERACTING]&&!(0,extent.fS)(frameState.extent,this.previousExtent_)&&(this.dispatchEvent(new ol_MapEvent(MapEventType_MOVEEND,this,frameState)),(0,extent.d9)(frameState.extent,this.previousExtent_))}this.dispatchEvent(new ol_MapEvent(MapEventType_POSTRENDER,this,frameState)),this.renderComplete_=this.hasListener(MapEventType_LOADSTART)||this.hasListener(MapEventType_LOADEND)||this.hasListener(EventType.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(layerGroup){const oldLayerGroup=this.getLayerGroup();oldLayerGroup&&this.handleLayerRemove_(new GroupEvent("removelayer",oldLayerGroup)),this.set(MapProperty_LAYERGROUP,layerGroup)}setSize(size){this.set(MapProperty_SIZE,size)}setTarget(target){this.set(MapProperty_TARGET,target)}setView(view){if(!view||view instanceof View.ZP)return void this.set(MapProperty_VIEW,view);this.set(MapProperty_VIEW,new View.ZP);const map=this;view.then((function(viewOptions){map.setView(new View.ZP(viewOptions))}))}updateSize(){const targetElement=this.getTargetElement();let size;if(targetElement){const computedStyle=getComputedStyle(targetElement),width=targetElement.offsetWidth-parseFloat(computedStyle.borderLeftWidth)-parseFloat(computedStyle.paddingLeft)-parseFloat(computedStyle.paddingRight)-parseFloat(computedStyle.borderRightWidth),height=targetElement.offsetHeight-parseFloat(computedStyle.borderTopWidth)-parseFloat(computedStyle.paddingTop)-parseFloat(computedStyle.paddingBottom)-parseFloat(computedStyle.borderBottomWidth);isNaN(width)||isNaN(height)||(size=[width,height],!(0,ol_size.py)(size)&&(targetElement.offsetWidth||targetElement.offsetHeight||targetElement.getClientRects().length)&&(0,console.ZK)("No map visible because the map container's width or height are 0."))}const oldSize=this.getSize();!size||oldSize&&(0,array.fS)(size,oldSize)||(this.setSize(size),this.updateViewportSize_(size))}updateViewportSize_(size){const view=this.getView();view&&view.setViewportSize(size)}}const ol_Map=Map_Map},"./node_modules/ol/MapBrowserEventType.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _events_EventType_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/events/EventType.js");const __WEBPACK_DEFAULT_EXPORT__={SINGLECLICK:"singleclick",CLICK:_events_EventType_js__WEBPACK_IMPORTED_MODULE_0__.Z.CLICK,DBLCLICK:_events_EventType_js__WEBPACK_IMPORTED_MODULE_0__.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},"./node_modules/ol/Tile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _events_Target_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/events/Target.js"),_events_EventType_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/events/EventType.js"),_TileState_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/TileState.js"),_util_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/util.js"),_easing_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/easing.js");class Tile extends _events_Target_js__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(tileCoord,state,options){super(),options=options||{},this.tileCoord=tileCoord,this.state=state,this.interimTile=null,this.key="",this.transition_=void 0===options.transition?250:options.transition,this.transitionStarts_={},this.interpolate=!!options.interpolate}changed(){this.dispatchEvent(_events_EventType_js__WEBPACK_IMPORTED_MODULE_1__.Z.CHANGE)}release(){this.state===_TileState_js__WEBPACK_IMPORTED_MODULE_2__.Z.ERROR&&this.setState(_TileState_js__WEBPACK_IMPORTED_MODULE_2__.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let tile=this.interimTile;if(!tile)return this;do{if(tile.getState()==_TileState_js__WEBPACK_IMPORTED_MODULE_2__.Z.LOADED)return this.transition_=0,tile;tile=tile.interimTile}while(tile);return this}refreshInterimChain(){let tile=this.interimTile;if(!tile)return;let prev=this;do{if(tile.getState()==_TileState_js__WEBPACK_IMPORTED_MODULE_2__.Z.LOADED){tile.interimTile=null;break}tile.getState()==_TileState_js__WEBPACK_IMPORTED_MODULE_2__.Z.LOADING?prev=tile:tile.getState()==_TileState_js__WEBPACK_IMPORTED_MODULE_2__.Z.IDLE?prev.interimTile=tile.interimTile:prev=tile,tile=prev.interimTile}while(tile)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(state){if(this.state!==_TileState_js__WEBPACK_IMPORTED_MODULE_2__.Z.ERROR&&this.state>state)throw new Error("Tile load sequence violation");this.state=state,this.changed()}load(){(0,_util_js__WEBPACK_IMPORTED_MODULE_3__.O3)()}getAlpha(id,time){if(!this.transition_)return 1;let start=this.transitionStarts_[id];if(start){if(-1===start)return 1}else start=time,this.transitionStarts_[id]=start;const delta=time-start+1e3/60;return delta>=this.transition_?1:(0,_easing_js__WEBPACK_IMPORTED_MODULE_4__.YQ)(delta/this.transition_)}inTransition(id){return!!this.transition_&&-1!==this.transitionStarts_[id]}endTransition(id){this.transition_&&(this.transitionStarts_[id]=-1)}}const __WEBPACK_DEFAULT_EXPORT__=Tile},"./node_modules/ol/TileState.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},"./node_modules/ol/View.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ZP:()=>ol_View});var ol_Object=__webpack_require__("./node_modules/ol/Object.js"),ViewHint=__webpack_require__("./node_modules/ol/ViewHint.js");const ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var common=__webpack_require__("./node_modules/ol/tilegrid/common.js"),proj=__webpack_require__("./node_modules/ol/proj.js"),functions=__webpack_require__("./node_modules/ol/functions.js"),coordinate=__webpack_require__("./node_modules/ol/coordinate.js"),asserts=__webpack_require__("./node_modules/ol/asserts.js"),math=__webpack_require__("./node_modules/ol/math.js");function createExtent(extent,onlyCenter,smooth){return function(center,resolution,size,isMoving,centerShift){if(!center)return;if(!resolution&&!onlyCenter)return center;const viewWidth=onlyCenter?0:size[0]*resolution,viewHeight=onlyCenter?0:size[1]*resolution,shiftX=centerShift?centerShift[0]:0,shiftY=centerShift?centerShift[1]:0;let minX=extent[0]+viewWidth/2+shiftX,maxX=extent[2]-viewWidth/2+shiftX,minY=extent[1]+viewHeight/2+shiftY,maxY=extent[3]-viewHeight/2+shiftY;minX>maxX&&(minX=(maxX+minX)/2,maxX=minX),minY>maxY&&(minY=(maxY+minY)/2,maxY=minY);let x=(0,math.uZ)(center[0],minX,maxX),y=(0,math.uZ)(center[1],minY,maxY);if(isMoving&&smooth&&resolution){const ratio=30*resolution;x+=-ratio*Math.log(1+Math.max(0,minX-center[0])/ratio)+ratio*Math.log(1+Math.max(0,center[0]-maxX)/ratio),y+=-ratio*Math.log(1+Math.max(0,minY-center[1])/ratio)+ratio*Math.log(1+Math.max(0,center[1]-maxY)/ratio)}return[x,y]}}function none(center){return center}var ol_extent=__webpack_require__("./node_modules/ol/extent.js"),array=__webpack_require__("./node_modules/ol/array.js");function getViewportClampedResolution(resolution,maxExtent,viewportSize,showFullExtent){const xResolution=(0,ol_extent.dz)(maxExtent)/viewportSize[0],yResolution=(0,ol_extent.Cr)(maxExtent)/viewportSize[1];return showFullExtent?Math.min(resolution,Math.max(xResolution,yResolution)):Math.min(resolution,Math.min(xResolution,yResolution))}function getSmoothClampedResolution(resolution,maxResolution,minResolution){let result=Math.min(resolution,maxResolution);return result*=Math.log(1+50*Math.max(0,resolution/maxResolution-1))/50+1,minResolution&&(result=Math.max(result,minResolution),result/=Math.log(1+50*Math.max(0,minResolution/resolution-1))/50+1),(0,math.uZ)(result,minResolution/2,2*maxResolution)}function createMinMaxResolution(maxResolution,minResolution,smooth,maxExtent,showFullExtent){return smooth=void 0===smooth||smooth,function(resolution,direction,size,isMoving){if(void 0!==resolution){const cappedMaxRes=maxExtent?getViewportClampedResolution(maxResolution,maxExtent,size,showFullExtent):maxResolution;return smooth&&isMoving?getSmoothClampedResolution(resolution,cappedMaxRes,minResolution):(0,math.uZ)(resolution,minResolution,cappedMaxRes)}}}var rotationconstraint=__webpack_require__("./node_modules/ol/rotationconstraint.js"),easing=__webpack_require__("./node_modules/ol/easing.js"),Polygon=__webpack_require__("./node_modules/ol/geom/Polygon.js");class View extends ol_Object.Z{constructor(options){super(),this.on,this.once,this.un,options=Object.assign({},options),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,proj.UQ)(options.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,options.projection&&(0,proj.h_)(),options.center&&(options.center=(0,proj.Vs)(options.center,this.projection_)),options.extent&&(options.extent=(0,proj.dY)(options.extent,this.projection_)),this.applyOptions_(options)}applyOptions_(options){const properties=Object.assign({},options);for(const key in ViewProperty)delete properties[key];this.setProperties(properties,!0);const resolutionConstraintInfo=function createResolutionConstraint(options){let resolutionConstraint,maxResolution,minResolution;const defaultMaxZoom=28,defaultZoomFactor=2;let minZoom=void 0!==options.minZoom?options.minZoom:0,maxZoom=void 0!==options.maxZoom?options.maxZoom:defaultMaxZoom;const zoomFactor=void 0!==options.zoomFactor?options.zoomFactor:defaultZoomFactor,multiWorld=void 0!==options.multiWorld&&options.multiWorld,smooth=void 0===options.smoothResolutionConstraint||options.smoothResolutionConstraint,showFullExtent=void 0!==options.showFullExtent&&options.showFullExtent,projection=(0,proj.UQ)(options.projection,"EPSG:3857"),projExtent=projection.getExtent();let constrainOnlyCenter=options.constrainOnlyCenter,extent=options.extent;multiWorld||extent||!projection.isGlobal()||(constrainOnlyCenter=!1,extent=projExtent);if(void 0!==options.resolutions){const resolutions=options.resolutions;maxResolution=resolutions[minZoom],minResolution=void 0!==resolutions[maxZoom]?resolutions[maxZoom]:resolutions[resolutions.length-1],resolutionConstraint=options.constrainResolution?function createSnapToResolutions(resolutions,smooth,maxExtent,showFullExtent){return smooth=void 0===smooth||smooth,function(resolution,direction,size,isMoving){if(void 0!==resolution){const maxResolution=resolutions[0],minResolution=resolutions[resolutions.length-1],cappedMaxRes=maxExtent?getViewportClampedResolution(maxResolution,maxExtent,size,showFullExtent):maxResolution;if(isMoving)return smooth?getSmoothClampedResolution(resolution,cappedMaxRes,minResolution):(0,math.uZ)(resolution,minResolution,cappedMaxRes);const capped=Math.min(cappedMaxRes,resolution),z=Math.floor((0,array.h7)(resolutions,capped,direction));return resolutions[z]>cappedMaxRes&&z<resolutions.length-1?resolutions[z+1]:resolutions[z]}}}(resolutions,smooth,!constrainOnlyCenter&&extent,showFullExtent):createMinMaxResolution(maxResolution,minResolution,smooth,!constrainOnlyCenter&&extent,showFullExtent)}else{const defaultMaxResolution=(projExtent?Math.max((0,ol_extent.dz)(projExtent),(0,ol_extent.Cr)(projExtent)):360*proj.Wm.degrees/projection.getMetersPerUnit())/common.S/Math.pow(defaultZoomFactor,0),defaultMinResolution=defaultMaxResolution/Math.pow(defaultZoomFactor,defaultMaxZoom-0);maxResolution=options.maxResolution,void 0!==maxResolution?minZoom=0:maxResolution=defaultMaxResolution/Math.pow(zoomFactor,minZoom),minResolution=options.minResolution,void 0===minResolution&&(minResolution=void 0!==options.maxZoom?void 0!==options.maxResolution?maxResolution/Math.pow(zoomFactor,maxZoom):defaultMaxResolution/Math.pow(zoomFactor,maxZoom):defaultMinResolution),maxZoom=minZoom+Math.floor(Math.log(maxResolution/minResolution)/Math.log(zoomFactor)),minResolution=maxResolution/Math.pow(zoomFactor,maxZoom-minZoom),resolutionConstraint=options.constrainResolution?function createSnapToPower(power,maxResolution,minResolution,smooth,maxExtent,showFullExtent){return smooth=void 0===smooth||smooth,minResolution=void 0!==minResolution?minResolution:0,function(resolution,direction,size,isMoving){if(void 0!==resolution){const cappedMaxRes=maxExtent?getViewportClampedResolution(maxResolution,maxExtent,size,showFullExtent):maxResolution;if(isMoving)return smooth?getSmoothClampedResolution(resolution,cappedMaxRes,minResolution):(0,math.uZ)(resolution,minResolution,cappedMaxRes);const tolerance=1e-9,minZoomLevel=Math.ceil(Math.log(maxResolution/cappedMaxRes)/Math.log(power)-tolerance),offset=-direction*(.5-tolerance)+.5,capped=Math.min(cappedMaxRes,resolution),cappedZoomLevel=Math.floor(Math.log(maxResolution/capped)/Math.log(power)+offset),zoomLevel=Math.max(minZoomLevel,cappedZoomLevel),newResolution=maxResolution/Math.pow(power,zoomLevel);return(0,math.uZ)(newResolution,minResolution,cappedMaxRes)}}}(zoomFactor,maxResolution,minResolution,smooth,!constrainOnlyCenter&&extent,showFullExtent):createMinMaxResolution(maxResolution,minResolution,smooth,!constrainOnlyCenter&&extent,showFullExtent)}return{constraint:resolutionConstraint,maxResolution,minResolution,minZoom,zoomFactor}}(options);this.maxResolution_=resolutionConstraintInfo.maxResolution,this.minResolution_=resolutionConstraintInfo.minResolution,this.zoomFactor_=resolutionConstraintInfo.zoomFactor,this.resolutions_=options.resolutions,this.padding_=options.padding,this.minZoom_=resolutionConstraintInfo.minZoom;const centerConstraint=function createCenterConstraint(options){if(void 0!==options.extent){const smooth=void 0===options.smoothExtentConstraint||options.smoothExtentConstraint;return createExtent(options.extent,options.constrainOnlyCenter,smooth)}const projection=(0,proj.UQ)(options.projection,"EPSG:3857");if(!0!==options.multiWorld&&projection.isGlobal()){const extent=projection.getExtent().slice();return extent[0]=-1/0,extent[2]=1/0,createExtent(extent,!1,!1)}return none}(options),resolutionConstraint=resolutionConstraintInfo.constraint,rotationConstraint=function createRotationConstraint(options){const enableRotation=void 0===options.enableRotation||options.enableRotation;if(enableRotation){const constrainRotation=options.constrainRotation;return void 0===constrainRotation||!0===constrainRotation?(0,rotationconstraint.Gw)():!1===constrainRotation?rotationconstraint.YP:"number"==typeof constrainRotation?(0,rotationconstraint.gE)(constrainRotation):rotationconstraint.YP}return rotationconstraint.h$}(options);this.constraints_={center:centerConstraint,resolution:resolutionConstraint,rotation:rotationConstraint},this.setRotation(void 0!==options.rotation?options.rotation:0),this.setCenterInternal(void 0!==options.center?options.center:null),void 0!==options.resolution?this.setResolution(options.resolution):void 0!==options.zoom&&this.setZoom(options.zoom)}get padding(){return this.padding_}set padding(padding){let oldPadding=this.padding_;this.padding_=padding;const center=this.getCenterInternal();if(center){const newPadding=padding||[0,0,0,0];oldPadding=oldPadding||[0,0,0,0];const resolution=this.getResolution(),offsetX=resolution/2*(newPadding[3]-oldPadding[3]+oldPadding[1]-newPadding[1]),offsetY=resolution/2*(newPadding[0]-oldPadding[0]+oldPadding[2]-newPadding[2]);this.setCenterInternal([center[0]+offsetX,center[1]-offsetY])}}getUpdatedOptions_(newOptions){const options=this.getProperties();return void 0!==options.resolution?options.resolution=this.getResolution():options.zoom=this.getZoom(),options.center=this.getCenterInternal(),options.rotation=this.getRotation(),Object.assign({},options,newOptions)}animate(var_args){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const args=new Array(arguments.length);for(let i=0;i<args.length;++i){let options=arguments[i];options.center&&(options=Object.assign({},options),options.center=(0,proj.Vs)(options.center,this.getProjection())),options.anchor&&(options=Object.assign({},options),options.anchor=(0,proj.Vs)(options.anchor,this.getProjection())),args[i]=options}this.animateInternal.apply(this,args)}animateInternal(var_args){let callback,animationCount=arguments.length;animationCount>1&&"function"==typeof arguments[animationCount-1]&&(callback=arguments[animationCount-1],--animationCount);let i=0;for(;i<animationCount&&!this.isDef();++i){const state=arguments[i];state.center&&this.setCenterInternal(state.center),void 0!==state.zoom?this.setZoom(state.zoom):state.resolution&&this.setResolution(state.resolution),void 0!==state.rotation&&this.setRotation(state.rotation)}if(i===animationCount)return void(callback&&animationCallback(callback,!0));let start=Date.now(),center=this.targetCenter_.slice(),resolution=this.targetResolution_,rotation=this.targetRotation_;const series=[];for(;i<animationCount;++i){const options=arguments[i],animation={start,complete:!1,anchor:options.anchor,duration:void 0!==options.duration?options.duration:1e3,easing:options.easing||easing.rd,callback};if(options.center&&(animation.sourceCenter=center,animation.targetCenter=options.center.slice(),center=animation.targetCenter),void 0!==options.zoom?(animation.sourceResolution=resolution,animation.targetResolution=this.getResolutionForZoom(options.zoom),resolution=animation.targetResolution):options.resolution&&(animation.sourceResolution=resolution,animation.targetResolution=options.resolution,resolution=animation.targetResolution),void 0!==options.rotation){animation.sourceRotation=rotation;const delta=(0,math.$W)(options.rotation-rotation+Math.PI,2*Math.PI)-Math.PI;animation.targetRotation=rotation+delta,rotation=animation.targetRotation}isNoopAnimation(animation)?animation.complete=!0:start+=animation.duration,series.push(animation)}this.animations_.push(series),this.setHint(ViewHint.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.Z.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.Z.INTERACTING]>0}cancelAnimations(){let anchor;this.setHint(ViewHint.Z.ANIMATING,-this.hints_[ViewHint.Z.ANIMATING]);for(let i=0,ii=this.animations_.length;i<ii;++i){const series=this.animations_[i];if(series[0].callback&&animationCallback(series[0].callback,!1),!anchor)for(let j=0,jj=series.length;j<jj;++j){const animation=series[j];if(!animation.complete){anchor=animation.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=anchor,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const now=Date.now();let more=!1;for(let i=this.animations_.length-1;i>=0;--i){const series=this.animations_[i];let seriesComplete=!0;for(let j=0,jj=series.length;j<jj;++j){const animation=series[j];if(animation.complete)continue;const elapsed=now-animation.start;let fraction=animation.duration>0?elapsed/animation.duration:1;fraction>=1?(animation.complete=!0,fraction=1):seriesComplete=!1;const progress=animation.easing(fraction);if(animation.sourceCenter){const x0=animation.sourceCenter[0],y0=animation.sourceCenter[1],x1=animation.targetCenter[0],y1=animation.targetCenter[1];this.nextCenter_=animation.targetCenter;const x=x0+progress*(x1-x0),y=y0+progress*(y1-y0);this.targetCenter_=[x,y]}if(animation.sourceResolution&&animation.targetResolution){const resolution=1===progress?animation.targetResolution:animation.sourceResolution+progress*(animation.targetResolution-animation.sourceResolution);if(animation.anchor){const size=this.getViewportSize_(this.getRotation()),constrainedResolution=this.constraints_.resolution(resolution,0,size,!0);this.targetCenter_=this.calculateCenterZoom(constrainedResolution,animation.anchor)}this.nextResolution_=animation.targetResolution,this.targetResolution_=resolution,this.applyTargetState_(!0)}if(void 0!==animation.sourceRotation&&void 0!==animation.targetRotation){const rotation=1===progress?(0,math.$W)(animation.targetRotation+Math.PI,2*Math.PI)-Math.PI:animation.sourceRotation+progress*(animation.targetRotation-animation.sourceRotation);if(animation.anchor){const constrainedRotation=this.constraints_.rotation(rotation,!0);this.targetCenter_=this.calculateCenterRotate(constrainedRotation,animation.anchor)}this.nextRotation_=animation.targetRotation,this.targetRotation_=rotation}if(this.applyTargetState_(!0),more=!0,!animation.complete)break}if(seriesComplete){this.animations_[i]=null,this.setHint(ViewHint.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const callback=series[0].callback;callback&&animationCallback(callback,!0)}}this.animations_=this.animations_.filter(Boolean),more&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(rotation,anchor){let center;const currentCenter=this.getCenterInternal();return void 0!==currentCenter&&(center=[currentCenter[0]-anchor[0],currentCenter[1]-anchor[1]],(0,coordinate.U1)(center,rotation-this.getRotation()),(0,coordinate.IH)(center,anchor)),center}calculateCenterZoom(resolution,anchor){let center;const currentCenter=this.getCenterInternal(),currentResolution=this.getResolution();if(void 0!==currentCenter&&void 0!==currentResolution){center=[anchor[0]-resolution*(anchor[0]-currentCenter[0])/currentResolution,anchor[1]-resolution*(anchor[1]-currentCenter[1])/currentResolution]}return center}getViewportSize_(rotation){const size=this.viewportSize_;if(rotation){const w=size[0],h=size[1];return[Math.abs(w*Math.cos(rotation))+Math.abs(h*Math.sin(rotation)),Math.abs(w*Math.sin(rotation))+Math.abs(h*Math.cos(rotation))]}return size}setViewportSize(size){this.viewportSize_=Array.isArray(size)?size.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const center=this.getCenterInternal();return center?(0,proj.lO)(center,this.getProjection()):center}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(hints){return void 0!==hints?(hints[0]=this.hints_[0],hints[1]=this.hints_[1],hints):this.hints_.slice()}calculateExtent(size){const extent=this.calculateExtentInternal(size);return(0,proj.Fj)(extent,this.getProjection())}calculateExtentInternal(size){size=size||this.getViewportSizeMinusPadding_();const center=this.getCenterInternal();(0,asserts.h)(center,"The view center is not defined");const resolution=this.getResolution();(0,asserts.h)(void 0!==resolution,"The view resolution is not defined");const rotation=this.getRotation();return(0,asserts.h)(void 0!==rotation,"The view rotation is not defined"),(0,ol_extent.p8)(center,resolution,rotation,size)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(zoom){this.applyOptions_(this.getUpdatedOptions_({maxZoom:zoom}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(zoom){this.applyOptions_(this.getUpdatedOptions_({minZoom:zoom}))}setConstrainResolution(enabled){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:enabled}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(extent,size){return this.getResolutionForExtentInternal((0,proj.dY)(extent,this.getProjection()),size)}getResolutionForExtentInternal(extent,size){size=size||this.getViewportSizeMinusPadding_();const xResolution=(0,ol_extent.dz)(extent)/size[0],yResolution=(0,ol_extent.Cr)(extent)/size[1];return Math.max(xResolution,yResolution)}getResolutionForValueFunction(power){power=power||2;const maxResolution=this.getConstrainedResolution(this.maxResolution_),minResolution=this.minResolution_,max=Math.log(maxResolution/minResolution)/Math.log(power);return function(value){return maxResolution/Math.pow(power,value*max)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(power){const logPower=Math.log(power||2),maxResolution=this.getConstrainedResolution(this.maxResolution_),minResolution=this.minResolution_,max=Math.log(maxResolution/minResolution)/logPower;return function(resolution){return Math.log(maxResolution/resolution)/logPower/max}}getViewportSizeMinusPadding_(rotation){let size=this.getViewportSize_(rotation);const padding=this.padding_;return padding&&(size=[size[0]-padding[1]-padding[3],size[1]-padding[0]-padding[2]]),size}getState(){const projection=this.getProjection(),resolution=this.getResolution(),rotation=this.getRotation();let center=this.getCenterInternal();const padding=this.padding_;if(padding){const reducedSize=this.getViewportSizeMinusPadding_();center=calculateCenterOn(center,this.getViewportSize_(),[reducedSize[0]/2+padding[3],reducedSize[1]/2+padding[0]],resolution,rotation)}return{center:center.slice(0),projection:void 0!==projection?projection:null,resolution,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let zoom;const resolution=this.getResolution();return void 0!==resolution&&(zoom=this.getZoomForResolution(resolution)),zoom}getZoomForResolution(resolution){let max,zoomFactor,offset=this.minZoom_||0;if(this.resolutions_){const nearest=(0,array.h7)(this.resolutions_,resolution,1);offset=nearest,max=this.resolutions_[nearest],zoomFactor=nearest==this.resolutions_.length-1?2:max/this.resolutions_[nearest+1]}else max=this.maxResolution_,zoomFactor=this.zoomFactor_;return offset+Math.log(max/resolution)/Math.log(zoomFactor)}getResolutionForZoom(zoom){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const baseLevel=(0,math.uZ)(Math.floor(zoom),0,this.resolutions_.length-2),zoomFactor=this.resolutions_[baseLevel]/this.resolutions_[baseLevel+1];return this.resolutions_[baseLevel]/Math.pow(zoomFactor,(0,math.uZ)(zoom-baseLevel,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,zoom-this.minZoom_)}fit(geometryOrExtent,options){let geometry;if((0,asserts.h)(Array.isArray(geometryOrExtent)||"function"==typeof geometryOrExtent.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(geometryOrExtent)){(0,asserts.h)(!(0,ol_extent.xb)(geometryOrExtent),"Cannot fit empty extent provided as `geometry`");const extent=(0,proj.dY)(geometryOrExtent,this.getProjection());geometry=(0,Polygon.oJ)(extent)}else if("Circle"===geometryOrExtent.getType()){const extent=(0,proj.dY)(geometryOrExtent.getExtent(),this.getProjection());geometry=(0,Polygon.oJ)(extent),geometry.rotate(this.getRotation(),(0,ol_extent.qg)(extent))}else{const userProjection=(0,proj.Cs)();geometry=userProjection?geometryOrExtent.clone().transform(userProjection,this.getProjection()):geometryOrExtent}this.fitInternal(geometry,options)}rotatedExtentForGeometry(geometry){const rotation=this.getRotation(),cosAngle=Math.cos(rotation),sinAngle=Math.sin(-rotation),coords=geometry.getFlatCoordinates(),stride=geometry.getStride();let minRotX=1/0,minRotY=1/0,maxRotX=-1/0,maxRotY=-1/0;for(let i=0,ii=coords.length;i<ii;i+=stride){const rotX=coords[i]*cosAngle-coords[i+1]*sinAngle,rotY=coords[i]*sinAngle+coords[i+1]*cosAngle;minRotX=Math.min(minRotX,rotX),minRotY=Math.min(minRotY,rotY),maxRotX=Math.max(maxRotX,rotX),maxRotY=Math.max(maxRotY,rotY)}return[minRotX,minRotY,maxRotX,maxRotY]}fitInternal(geometry,options){let size=(options=options||{}).size;size||(size=this.getViewportSizeMinusPadding_());const padding=void 0!==options.padding?options.padding:[0,0,0,0],nearest=void 0!==options.nearest&&options.nearest;let minResolution;minResolution=void 0!==options.minResolution?options.minResolution:void 0!==options.maxZoom?this.getResolutionForZoom(options.maxZoom):0;const rotatedExtent=this.rotatedExtentForGeometry(geometry);let resolution=this.getResolutionForExtentInternal(rotatedExtent,[size[0]-padding[1]-padding[3],size[1]-padding[0]-padding[2]]);resolution=isNaN(resolution)?minResolution:Math.max(resolution,minResolution),resolution=this.getConstrainedResolution(resolution,nearest?0:1);const rotation=this.getRotation(),sinAngle=Math.sin(rotation),cosAngle=Math.cos(rotation),centerRot=(0,ol_extent.qg)(rotatedExtent);centerRot[0]+=(padding[1]-padding[3])/2*resolution,centerRot[1]+=(padding[0]-padding[2])/2*resolution;const centerX=centerRot[0]*cosAngle-centerRot[1]*sinAngle,centerY=centerRot[1]*cosAngle+centerRot[0]*sinAngle,center=this.getConstrainedCenter([centerX,centerY],resolution),callback=options.callback?options.callback:functions.Zn;void 0!==options.duration?this.animateInternal({resolution,center,duration:options.duration,easing:options.easing},callback):(this.targetResolution_=resolution,this.targetCenter_=center,this.applyTargetState_(!1,!0),animationCallback(callback,!0))}centerOn(coordinate,size,position){this.centerOnInternal((0,proj.Vs)(coordinate,this.getProjection()),size,position)}centerOnInternal(coordinate,size,position){this.setCenterInternal(calculateCenterOn(coordinate,size,position,this.getResolution(),this.getRotation()))}calculateCenterShift(center,resolution,rotation,size){let centerShift;const padding=this.padding_;if(padding&&center){const reducedSize=this.getViewportSizeMinusPadding_(-rotation),shiftedCenter=calculateCenterOn(center,size,[reducedSize[0]/2+padding[3],reducedSize[1]/2+padding[0]],resolution,rotation);centerShift=[center[0]-shiftedCenter[0],center[1]-shiftedCenter[1]]}return centerShift}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(deltaCoordinates){const center=(0,proj.lO)(this.targetCenter_,this.getProjection());this.setCenter([center[0]+deltaCoordinates[0],center[1]+deltaCoordinates[1]])}adjustCenterInternal(deltaCoordinates){const center=this.targetCenter_;this.setCenterInternal([center[0]+deltaCoordinates[0],center[1]+deltaCoordinates[1]])}adjustResolution(ratio,anchor){anchor=anchor&&(0,proj.Vs)(anchor,this.getProjection()),this.adjustResolutionInternal(ratio,anchor)}adjustResolutionInternal(ratio,anchor){const isMoving=this.getAnimating()||this.getInteracting(),size=this.getViewportSize_(this.getRotation()),newResolution=this.constraints_.resolution(this.targetResolution_*ratio,0,size,isMoving);anchor&&(this.targetCenter_=this.calculateCenterZoom(newResolution,anchor)),this.targetResolution_*=ratio,this.applyTargetState_()}adjustZoom(delta,anchor){this.adjustResolution(Math.pow(this.zoomFactor_,-delta),anchor)}adjustRotation(delta,anchor){anchor&&(anchor=(0,proj.Vs)(anchor,this.getProjection())),this.adjustRotationInternal(delta,anchor)}adjustRotationInternal(delta,anchor){const isMoving=this.getAnimating()||this.getInteracting(),newRotation=this.constraints_.rotation(this.targetRotation_+delta,isMoving);anchor&&(this.targetCenter_=this.calculateCenterRotate(newRotation,anchor)),this.targetRotation_+=delta,this.applyTargetState_()}setCenter(center){this.setCenterInternal(center?(0,proj.Vs)(center,this.getProjection()):center)}setCenterInternal(center){this.targetCenter_=center,this.applyTargetState_()}setHint(hint,delta){return this.hints_[hint]+=delta,this.changed(),this.hints_[hint]}setResolution(resolution){this.targetResolution_=resolution,this.applyTargetState_()}setRotation(rotation){this.targetRotation_=rotation,this.applyTargetState_()}setZoom(zoom){this.setResolution(this.getResolutionForZoom(zoom))}applyTargetState_(doNotCancelAnims,forceMoving){const isMoving=this.getAnimating()||this.getInteracting()||forceMoving,newRotation=this.constraints_.rotation(this.targetRotation_,isMoving),size=this.getViewportSize_(newRotation),newResolution=this.constraints_.resolution(this.targetResolution_,0,size,isMoving),newCenter=this.constraints_.center(this.targetCenter_,newResolution,size,isMoving,this.calculateCenterShift(this.targetCenter_,newResolution,newRotation,size));this.get(ViewProperty.ROTATION)!==newRotation&&this.set(ViewProperty.ROTATION,newRotation),this.get(ViewProperty.RESOLUTION)!==newResolution&&(this.set(ViewProperty.RESOLUTION,newResolution),this.set("zoom",this.getZoom(),!0)),newCenter&&this.get(ViewProperty.CENTER)&&(0,coordinate.fS)(this.get(ViewProperty.CENTER),newCenter)||this.set(ViewProperty.CENTER,newCenter),this.getAnimating()&&!doNotCancelAnims&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(duration,resolutionDirection,anchor){duration=void 0!==duration?duration:200;const direction=resolutionDirection||0,newRotation=this.constraints_.rotation(this.targetRotation_),size=this.getViewportSize_(newRotation),newResolution=this.constraints_.resolution(this.targetResolution_,direction,size),newCenter=this.constraints_.center(this.targetCenter_,newResolution,size,!1,this.calculateCenterShift(this.targetCenter_,newResolution,newRotation,size));if(0===duration&&!this.cancelAnchor_)return this.targetResolution_=newResolution,this.targetRotation_=newRotation,this.targetCenter_=newCenter,void this.applyTargetState_();anchor=anchor||(0===duration?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===newResolution&&this.getRotation()===newRotation&&this.getCenterInternal()&&(0,coordinate.fS)(this.getCenterInternal(),newCenter)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:newRotation,center:newCenter,resolution:newResolution,duration,easing:easing.Vv,anchor}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.Z.INTERACTING,1)}endInteraction(duration,resolutionDirection,anchor){anchor=anchor&&(0,proj.Vs)(anchor,this.getProjection()),this.endInteractionInternal(duration,resolutionDirection,anchor)}endInteractionInternal(duration,resolutionDirection,anchor){this.getInteracting()&&(this.setHint(ViewHint.Z.INTERACTING,-1),this.resolveConstraints(duration,resolutionDirection,anchor))}getConstrainedCenter(targetCenter,targetResolution){const size=this.getViewportSize_(this.getRotation());return this.constraints_.center(targetCenter,targetResolution||this.getResolution(),size)}getConstrainedZoom(targetZoom,direction){const targetRes=this.getResolutionForZoom(targetZoom);return this.getZoomForResolution(this.getConstrainedResolution(targetRes,direction))}getConstrainedResolution(targetResolution,direction){direction=direction||0;const size=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(targetResolution,direction,size)}}function animationCallback(callback,returnValue){setTimeout((function(){callback(returnValue)}),0)}function isNoopAnimation(animation){return!(animation.sourceCenter&&animation.targetCenter&&!(0,coordinate.fS)(animation.sourceCenter,animation.targetCenter))&&(animation.sourceResolution===animation.targetResolution&&animation.sourceRotation===animation.targetRotation)}function calculateCenterOn(coordinate,size,position,resolution,rotation){const cosAngle=Math.cos(-rotation);let sinAngle=Math.sin(-rotation),rotX=coordinate[0]*cosAngle-coordinate[1]*sinAngle,rotY=coordinate[1]*cosAngle+coordinate[0]*sinAngle;rotX+=(size[0]/2-position[0])*resolution,rotY+=(position[1]-size[1]/2)*resolution,sinAngle=-sinAngle;return[rotX*cosAngle-rotY*sinAngle,rotY*cosAngle+rotX*sinAngle]}const ol_View=View},"./node_modules/ol/ViewHint.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={ANIMATING:0,INTERACTING:1}},"./node_modules/ol/color.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_2:()=>asArray,XC:()=>asString,mL:()=>fromString,e1:()=>isStringColor,TF:()=>lchaToRgba,Fv:()=>normalize,WV:()=>rgbaToLcha,BB:()=>color_toString,fG:()=>withAlpha});const rgb={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var xyz={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};xyz.max=xyz.whitepoint[2].D65,xyz.rgb=function(_xyz,white){white=white||xyz.whitepoint[2].E;var r,g,b,x=_xyz[0]/white[0],y=_xyz[1]/white[1],z=_xyz[2]/white[2];return g=-.96924363628087*x+1.87596750150772*y+.041555057407175*z,b=.055630079696993*x+-.20397695888897*y+1.056971514242878*z,r=(r=3.240969941904521*x+-1.537383177570093*y+-.498610760293*z)>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,g=g>.0031308?1.055*Math.pow(g,1/2.4)-.055:g*=12.92,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b*=12.92,[255*(r=Math.min(Math.max(0,r),1)),255*(g=Math.min(Math.max(0,g),1)),255*(b=Math.min(Math.max(0,b),1))]},rgb.xyz=function(rgb,white){var r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,y=.21263900587151*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.71516867876775*(g=g>.04045?Math.pow((g+.055)/1.055,2.4):g/12.92)+.072192315360733*(b=b>.04045?Math.pow((b+.055)/1.055,2.4):b/12.92),z=.019330818715591*r+.11919477979462*g+.95053215224966*b;return[(.41239079926595*r+.35758433938387*g+.18048078840183*b)*(white=white||xyz.whitepoint[2].E)[0],y*white[1],z*white[2]]};const color_space_xyz=xyz,luv={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(arg,i,o){var _u,_v,l,u,v,y,xn,yn,zn;if(l=arg[0],u=arg[1],v=arg[2],0===l)return[0,0,0];return i=i||"D65",o=o||2,_u=u/(13*l)+4*(xn=color_space_xyz.whitepoint[o][i][0])/(xn+15*(yn=color_space_xyz.whitepoint[o][i][1])+3*(zn=color_space_xyz.whitepoint[o][i][2]))||0,_v=v/(13*l)+9*yn/(xn+15*yn+3*zn)||0,[9*(y=l>8?yn*Math.pow((l+16)/116,3):yn*l*.0011070564598794539)*_u/(4*_v)||0,y,y*(12-3*_u-20*_v)/(4*_v)||0]}};color_space_xyz.luv=function(arg,i,o){var _u,_v,l,x,y,z,xn,yn,zn,un,vn;i=i||"D65",o=o||2,un=4*(xn=color_space_xyz.whitepoint[o][i][0])/(xn+15*(yn=color_space_xyz.whitepoint[o][i][1])+3*(zn=color_space_xyz.whitepoint[o][i][2])),vn=9*yn/(xn+15*yn+3*zn),_u=4*(x=arg[0])/(x+15*(y=arg[1])+3*(z=arg[2]))||0,_v=9*y/(x+15*y+3*z)||0;var yr=y/yn;return[l=yr<=.008856451679035631?903.2962962962961*yr:116*Math.pow(yr,1/3)-16,13*l*(_u-un),13*l*(_v-vn)]};var lchuv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(luv){var hr,l=luv[0],c=luv[1];return hr=luv[2]/360*2*Math.PI,[l,c*Math.cos(hr),c*Math.sin(hr)]},xyz:function(arg){return luv.xyz(lchuv.luv(arg))}};const color_space_lchuv=lchuv;luv.lchuv=function(luv){var l=luv[0],u=luv[1],v=luv[2],c=Math.sqrt(u*u+v*v),h=360*Math.atan2(v,u)/2/Math.PI;return h<0&&(h+=360),[l,c,h]},color_space_xyz.lchuv=function(arg){return luv.lchuv(color_space_xyz.luv(arg))};var color_name=__webpack_require__("./node_modules/color-name/index.js"),color_name_default=__webpack_require__.n(color_name);const color_parse=function parse(cstr){var m,space,parts=[],alpha=1;if("number"==typeof cstr)return{space:"rgb",values:[cstr>>>16,(65280&cstr)>>>8,255&cstr],alpha:1};if("number"==typeof cstr)return{space:"rgb",values:[cstr>>>16,(65280&cstr)>>>8,255&cstr],alpha:1};if(cstr=String(cstr).toLowerCase(),color_name_default()[cstr])parts=color_name_default()[cstr].slice(),space="rgb";else if("transparent"===cstr)alpha=0,space="rgb",parts=[0,0,0];else if("#"===cstr[0]){var base=cstr.slice(1),size=base.length;alpha=1,size<=4?(parts=[parseInt(base[0]+base[0],16),parseInt(base[1]+base[1],16),parseInt(base[2]+base[2],16)],4===size&&(alpha=parseInt(base[3]+base[3],16)/255)):(parts=[parseInt(base[0]+base[1],16),parseInt(base[2]+base[3],16),parseInt(base[4]+base[5],16)],8===size&&(alpha=parseInt(base[6]+base[7],16)/255)),parts[0]||(parts[0]=0),parts[1]||(parts[1]=0),parts[2]||(parts[2]=0),space="rgb"}else if(m=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(cstr)){var name=m[1],dims="cmyk"===(space=name.replace(/a$/,""))?4:"gray"===space?1:3;parts=m[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===space&&(space=parts.shift()),alpha=(parts=parts.map((function(x,i){if("%"===x[x.length-1])return x=parseFloat(x)/100,3===i?x:"rgb"===space?255*x:"h"===space[0]?100*x:"l"!==space[0]||i?"lab"===space?125*x:"lch"===space?i<2?150*x:360*x:"o"!==space[0]||i?"oklab"===space?.4*x:"oklch"===space?i<2?.4*x:360*x:x:x:100*x;if("h"===space[i]||2===i&&"h"===space[space.length-1]){if(void 0!==baseHues[x])return baseHues[x];if(x.endsWith("deg"))return parseFloat(x);if(x.endsWith("turn"))return 360*parseFloat(x);if(x.endsWith("grad"))return 360*parseFloat(x)/400;if(x.endsWith("rad"))return 180*parseFloat(x)/Math.PI}return"none"===x?0:parseFloat(x)}))).length>dims?parts.pop():1}else/[0-9](?:\s|\/|,)/.test(cstr)&&(parts=cstr.match(/([0-9]+)/g).map((function(value){return parseFloat(value)})),space=cstr.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space,values:parts,alpha}};var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};const hsl={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(hsl){var t1,t2,t3,rgb,val,h=hsl[0]/360,s=hsl[1]/100,l=hsl[2]/100,i=0;if(0===s)return[val=255*l,val,val];for(t1=2*l-(t2=l<.5?l*(1+s):l+s-l*s),rgb=[0,0,0];i<3;)(t3=h+1/3*-(i-1))<0?t3++:t3>1&&t3--,val=6*t3<1?t1+6*(t2-t1)*t3:2*t3<1?t2:3*t3<2?t1+(t2-t1)*(2/3-t3)*6:t1,rgb[i++]=255*val;return rgb}};rgb.hsl=function(rgb){var h,l,r=rgb[0]/255,g=rgb[1]/255,b=rgb[2]/255,min=Math.min(r,g,b),max=Math.max(r,g,b),delta=max-min;return max===min?h=0:r===max?h=(g-b)/delta:g===max?h=2+(b-r)/delta:b===max&&(h=4+(r-g)/delta),(h=Math.min(60*h,360))<0&&(h+=360),l=(min+max)/2,[h,100*(max===min?0:l<=.5?delta/(max+min):delta/(2-max-min)),100*l]};var math=__webpack_require__("./node_modules/ol/math.js");function asString(color){return"string"==typeof color?color:color_toString(color)}const MAX_CACHE_SIZE=1024,cache={};let cacheSize=0;function withAlpha(color){if(4===color.length)return color;const output=color.slice();return output[3]=1,output}function rgbaToLcha(color){const output=color_space_xyz.lchuv(rgb.xyz(color));return output[3]=color[3],output}function lchaToRgba(color){const output=color_space_xyz.rgb(color_space_lchuv.xyz(color));return output[3]=color[3],output}function fromString(s){if(cache.hasOwnProperty(s))return cache[s];if(cacheSize>=MAX_CACHE_SIZE){let i=0;for(const key in cache)0==(3&i++)&&(delete cache[key],--cacheSize)}const color=function rgba(color){var values;Array.isArray(color)&&color.raw&&(color=String.raw(...arguments)),color instanceof Number&&(color=+color);var parsed=color_parse(color);if(!parsed.space)return[];const min="h"===parsed.space[0]?hsl.min:rgb.min,max="h"===parsed.space[0]?hsl.max:rgb.max;return(values=Array(3))[0]=Math.min(Math.max(parsed.values[0],min[0]),max[0]),values[1]=Math.min(Math.max(parsed.values[1],min[1]),max[1]),values[2]=Math.min(Math.max(parsed.values[2],min[2]),max[2]),"h"===parsed.space[0]&&(values=hsl.rgb(values)),values.push(Math.min(Math.max(parsed.alpha,0),1)),values}(s);if(4!==color.length)throw new Error('Failed to parse "'+s+'" as color');for(const c of color)if(isNaN(c))throw new Error('Failed to parse "'+s+'" as color');return normalize(color),cache[s]=color,++cacheSize,color}function asArray(color){return Array.isArray(color)?color:fromString(color)}function normalize(color){return color[0]=(0,math.uZ)(color[0]+.5|0,0,255),color[1]=(0,math.uZ)(color[1]+.5|0,0,255),color[2]=(0,math.uZ)(color[2]+.5|0,0,255),color[3]=(0,math.uZ)(color[3],0,1),color}function color_toString(color){let r=color[0];r!=(0|r)&&(r=r+.5|0);let g=color[1];g!=(0|g)&&(g=g+.5|0);let b=color[2];b!=(0|b)&&(b=b+.5|0);return"rgba("+r+","+g+","+b+","+(void 0===color[3]?1:Math.round(100*color[3])/100)+")"}function isStringColor(s){try{return fromString(s),!0}catch(_){return!1}}},"./node_modules/ol/colorlike.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{y:()=>asColorLike});var _color_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/color.js");function asColorLike(color){return Array.isArray(color)?(0,_color_js__WEBPACK_IMPORTED_MODULE_0__.BB)(color):color}},"./node_modules/ol/css.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{XV:()=>CLASS_UNSELECTABLE,hN:()=>CLASS_COLLAPSED,hg:()=>CLASS_CONTROL,oj:()=>CLASS_HIDDEN,p:()=>getFontParameters});const CLASS_HIDDEN="ol-hidden",CLASS_UNSELECTABLE="ol-unselectable",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(fontSpec){const match=fontSpec.match(fontRegEx);if(!match)return null;const style={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,ii=fontRegExMatchIndex.length;i<ii;++i){const value=match[i+1];void 0!==value&&(style[fontRegExMatchIndex[i]]=value)}return style.families=style.family.split(/,\s?/),style}},"./node_modules/ol/dom.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$H:()=>replaceNode,E4:()=>createCanvasContext2D,ZF:()=>removeNode,ep:()=>removeChildren,hF:()=>replaceChildren,jy:()=>releaseCanvas});var _has_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/has.js");function createCanvasContext2D(width,height,canvasPool,settings){let canvas;return canvas=canvasPool&&canvasPool.length?canvasPool.shift():_has_js__WEBPACK_IMPORTED_MODULE_0__.Id?new OffscreenCanvas(width||300,height||300):document.createElement("canvas"),width&&(canvas.width=width),height&&(canvas.height=height),canvas.getContext("2d",settings)}function releaseCanvas(context){const canvas=context.canvas;canvas.width=1,canvas.height=1,context.clearRect(0,0,1,1)}function replaceNode(newNode,oldNode){const parent=oldNode.parentNode;parent&&parent.replaceChild(newNode,oldNode)}function removeNode(node){return node&&node.parentNode?node.parentNode.removeChild(node):null}function removeChildren(node){for(;node.lastChild;)node.removeChild(node.lastChild)}function replaceChildren(node,children){const oldChildren=node.childNodes;for(let i=0;;++i){const oldChild=oldChildren[i],newChild=children[i];if(!oldChild&&!newChild)break;oldChild!==newChild&&(oldChild?newChild?node.insertBefore(newChild,oldChild):(node.removeChild(oldChild),--i):node.appendChild(newChild))}}},"./node_modules/ol/easing.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function easeIn(t){return Math.pow(t,3)}function easeOut(t){return 1-easeIn(1-t)}function inAndOut(t){return 3*t*t-2*t*t*t}function linear(t){return t}__webpack_require__.d(__webpack_exports__,{GE:()=>linear,Vv:()=>easeOut,YQ:()=>easeIn,rd:()=>inAndOut})},"./node_modules/ol/events/condition.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$6:()=>all,Bx:()=>always,QC:()=>platformModifierKeyOnly,QL:()=>mouseOnly,TN:()=>targetNotEditable,Xp:()=>primaryAction,a5:()=>platformModifierKey,aj:()=>altShiftKeysOnly,rM:()=>noModifierKeys,v8:()=>mouseActionButton,vY:()=>shiftKeyOnly,yZ:()=>focusWithTabindex});var _functions_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/functions.js"),_has_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/has.js"),_asserts_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/asserts.js");function all(var_args){const conditions=arguments;return function(event){let pass=!0;for(let i=0,ii=conditions.length;i<ii&&(pass=pass&&conditions[i](event),pass);++i);return pass}}const altShiftKeysOnly=function(mapBrowserEvent){const originalEvent=mapBrowserEvent.originalEvent;return originalEvent.altKey&&!(originalEvent.metaKey||originalEvent.ctrlKey)&&originalEvent.shiftKey},focusWithTabindex=function(event){return!event.map.getTargetElement().hasAttribute("tabindex")||function(event){const targetElement=event.map.getTargetElement(),activeElement=event.map.getOwnerDocument().activeElement;return targetElement.contains(activeElement)}(event)},always=_functions_js__WEBPACK_IMPORTED_MODULE_0__.uX,mouseActionButton=function(mapBrowserEvent){const originalEvent=mapBrowserEvent.originalEvent;return 0==originalEvent.button&&!(_has_js__WEBPACK_IMPORTED_MODULE_1__.G$&&_has_js__WEBPACK_IMPORTED_MODULE_1__.tK&&originalEvent.ctrlKey)},noModifierKeys=function(mapBrowserEvent){const originalEvent=mapBrowserEvent.originalEvent;return!originalEvent.altKey&&!(originalEvent.metaKey||originalEvent.ctrlKey)&&!originalEvent.shiftKey},platformModifierKeyOnly=function(mapBrowserEvent){const originalEvent=mapBrowserEvent.originalEvent;return!originalEvent.altKey&&(_has_js__WEBPACK_IMPORTED_MODULE_1__.tK?originalEvent.metaKey:originalEvent.ctrlKey)&&!originalEvent.shiftKey},platformModifierKey=function(mapBrowserEvent){const originalEvent=mapBrowserEvent.originalEvent;return _has_js__WEBPACK_IMPORTED_MODULE_1__.tK?originalEvent.metaKey:originalEvent.ctrlKey},shiftKeyOnly=function(mapBrowserEvent){const originalEvent=mapBrowserEvent.originalEvent;return!originalEvent.altKey&&!(originalEvent.metaKey||originalEvent.ctrlKey)&&originalEvent.shiftKey},targetNotEditable=function(mapBrowserEvent){const originalEvent=mapBrowserEvent.originalEvent,tagName=originalEvent.target.tagName;return"INPUT"!==tagName&&"SELECT"!==tagName&&"TEXTAREA"!==tagName&&!originalEvent.target.isContentEditable},mouseOnly=function(mapBrowserEvent){const pointerEvent=mapBrowserEvent.originalEvent;return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_2__.h)(void 0!==pointerEvent,"mapBrowserEvent must originate from a pointer event"),"mouse"==pointerEvent.pointerType},primaryAction=function(mapBrowserEvent){const pointerEvent=mapBrowserEvent.originalEvent;return(0,_asserts_js__WEBPACK_IMPORTED_MODULE_2__.h)(void 0!==pointerEvent,"mapBrowserEvent must originate from a pointer event"),pointerEvent.isPrimary&&0===pointerEvent.button}},"./node_modules/ol/interaction/DragPan.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _Pointer_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/interaction/Pointer.js"),_functions_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/functions.js"),_events_condition_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/events/condition.js"),_easing_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/easing.js"),_coordinate_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/coordinate.js");class DragPan extends _Pointer_js__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(options){super({stopDown:_functions_js__WEBPACK_IMPORTED_MODULE_1__.Dv}),options=options||{},this.kinetic_=options.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const condition=options.condition?options.condition:(0,_events_condition_js__WEBPACK_IMPORTED_MODULE_2__.$6)(_events_condition_js__WEBPACK_IMPORTED_MODULE_2__.rM,_events_condition_js__WEBPACK_IMPORTED_MODULE_2__.Xp);this.condition_=options.onFocusOnly?(0,_events_condition_js__WEBPACK_IMPORTED_MODULE_2__.$6)(_events_condition_js__WEBPACK_IMPORTED_MODULE_2__.yZ,condition):condition,this.noKinetic_=!1}handleDragEvent(mapBrowserEvent){const map=mapBrowserEvent.map;this.panning_||(this.panning_=!0,map.getView().beginInteraction());const targetPointers=this.targetPointers,centroid=map.getEventPixel((0,_Pointer_js__WEBPACK_IMPORTED_MODULE_0__.S)(targetPointers));if(targetPointers.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(centroid[0],centroid[1]),this.lastCentroid){const delta=[this.lastCentroid[0]-centroid[0],centroid[1]-this.lastCentroid[1]],view=mapBrowserEvent.map.getView();(0,_coordinate_js__WEBPACK_IMPORTED_MODULE_3__.bA)(delta,view.getResolution()),(0,_coordinate_js__WEBPACK_IMPORTED_MODULE_3__.U1)(delta,view.getRotation()),view.adjustCenterInternal(delta)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=centroid,this.lastPointersCount_=targetPointers.length,mapBrowserEvent.originalEvent.preventDefault()}handleUpEvent(mapBrowserEvent){const map=mapBrowserEvent.map,view=map.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const distance=this.kinetic_.getDistance(),angle=this.kinetic_.getAngle(),center=view.getCenterInternal(),centerpx=map.getPixelFromCoordinateInternal(center),dest=map.getCoordinateFromPixelInternal([centerpx[0]-distance*Math.cos(angle),centerpx[1]-distance*Math.sin(angle)]);view.animateInternal({center:view.getConstrainedCenter(dest),duration:500,easing:_easing_js__WEBPACK_IMPORTED_MODULE_4__.Vv})}return this.panning_&&(this.panning_=!1,view.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(mapBrowserEvent){if(this.targetPointers.length>0&&this.condition_(mapBrowserEvent)){const view=mapBrowserEvent.map.getView();return this.lastCentroid=null,view.getAnimating()&&view.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const __WEBPACK_DEFAULT_EXPORT__=DragPan},"./node_modules/ol/interaction/Interaction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ZP:()=>interaction_Interaction,Cv:()=>pan,FW:()=>zoomByDelta});var ol_Object=__webpack_require__("./node_modules/ol/Object.js");const Property_ACTIVE="active";var easing=__webpack_require__("./node_modules/ol/easing.js");class Interaction extends ol_Object.Z{constructor(options){super(),this.on,this.once,this.un,options&&options.handleEvent&&(this.handleEvent=options.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Property_ACTIVE)}getMap(){return this.map_}handleEvent(mapBrowserEvent){return!0}setActive(active){this.set(Property_ACTIVE,active)}setMap(map){this.map_=map}}function pan(view,delta,duration){const currentCenter=view.getCenterInternal();if(currentCenter){const center=[currentCenter[0]+delta[0],currentCenter[1]+delta[1]];view.animateInternal({duration:void 0!==duration?duration:250,easing:easing.GE,center:view.getConstrainedCenter(center)})}}function zoomByDelta(view,delta,anchor,duration){const currentZoom=view.getZoom();if(void 0===currentZoom)return;const newZoom=view.getConstrainedZoom(currentZoom+delta),newResolution=view.getResolutionForZoom(newZoom);view.getAnimating()&&view.cancelAnimations(),view.animate({resolution:newResolution,anchor,duration:void 0!==duration?duration:250,easing:easing.Vv})}const interaction_Interaction=Interaction},"./node_modules/ol/interaction/MouseWheelZoom.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _events_EventType_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/events/EventType.js"),_Interaction_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/interaction/Interaction.js"),_has_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/has.js"),_events_condition_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/events/condition.js"),_math_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/math.js");class MouseWheelZoom extends _Interaction_js__WEBPACK_IMPORTED_MODULE_0__.ZP{constructor(options){super(options=options||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==options.maxDelta?options.maxDelta:1,this.duration_=void 0!==options.duration?options.duration:250,this.timeout_=void 0!==options.timeout?options.timeout:80,this.useAnchor_=void 0===options.useAnchor||options.useAnchor,this.constrainResolution_=void 0!==options.constrainResolution&&options.constrainResolution;const condition=options.condition?options.condition:_events_condition_js__WEBPACK_IMPORTED_MODULE_1__.Bx;this.condition_=options.onFocusOnly?(0,_events_condition_js__WEBPACK_IMPORTED_MODULE_1__.$6)(_events_condition_js__WEBPACK_IMPORTED_MODULE_1__.yZ,condition):condition,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const map=this.getMap();if(!map)return;map.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(mapBrowserEvent){if(!this.condition_(mapBrowserEvent))return!0;if(mapBrowserEvent.type!==_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__.Z.WHEEL)return!0;const map=mapBrowserEvent.map,wheelEvent=mapBrowserEvent.originalEvent;let delta;if(wheelEvent.preventDefault(),this.useAnchor_&&(this.lastAnchor_=mapBrowserEvent.coordinate),mapBrowserEvent.type==_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__.Z.WHEEL&&(delta=wheelEvent.deltaY,_has_js__WEBPACK_IMPORTED_MODULE_3__.V&&wheelEvent.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(delta/=_has_js__WEBPACK_IMPORTED_MODULE_3__.MP),wheelEvent.deltaMode===WheelEvent.DOM_DELTA_LINE&&(delta*=40)),0===delta)return!1;this.lastDelta_=delta;const now=Date.now();void 0===this.startTime_&&(this.startTime_=now),(!this.mode_||now-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(delta)<4?"trackpad":"wheel");const view=map.getView();if("trackpad"===this.mode_&&!view.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(view.getAnimating()&&view.cancelAnimations(),view.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),view.adjustZoom(-delta/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=now,!1;this.totalDelta_+=delta;const timeLeft=Math.max(this.timeout_-(now-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,map),timeLeft),!1}handleWheelZoom_(map){const view=map.getView();view.getAnimating()&&view.cancelAnimations();let delta=-(0,_math_js__WEBPACK_IMPORTED_MODULE_4__.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(view.getConstrainResolution()||this.constrainResolution_)&&(delta=delta?delta>0?1:-1:0),(0,_Interaction_js__WEBPACK_IMPORTED_MODULE_0__.FW)(view,delta,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(useAnchor){this.useAnchor_=useAnchor,useAnchor||(this.lastAnchor_=null)}}const __WEBPACK_DEFAULT_EXPORT__=MouseWheelZoom},"./node_modules/ol/interaction/Pointer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>centroid,Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _Interaction_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/interaction/Interaction.js"),_MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/MapBrowserEventType.js");class PointerInteraction extends _Interaction_js__WEBPACK_IMPORTED_MODULE_0__.ZP{constructor(options){super(options=options||{}),options.handleDownEvent&&(this.handleDownEvent=options.handleDownEvent),options.handleDragEvent&&(this.handleDragEvent=options.handleDragEvent),options.handleMoveEvent&&(this.handleMoveEvent=options.handleMoveEvent),options.handleUpEvent&&(this.handleUpEvent=options.handleUpEvent),options.stopDown&&(this.stopDown=options.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(mapBrowserEvent){return!1}handleDragEvent(mapBrowserEvent){}handleEvent(mapBrowserEvent){if(!mapBrowserEvent.originalEvent)return!0;let stopEvent=!1;if(this.updateTrackedPointers_(mapBrowserEvent),this.handlingDownUpSequence){if(mapBrowserEvent.type==_MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_1__.Z.POINTERDRAG)this.handleDragEvent(mapBrowserEvent),mapBrowserEvent.originalEvent.preventDefault();else if(mapBrowserEvent.type==_MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_1__.Z.POINTERUP){const handledUp=this.handleUpEvent(mapBrowserEvent);this.handlingDownUpSequence=handledUp&&this.targetPointers.length>0}}else if(mapBrowserEvent.type==_MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_1__.Z.POINTERDOWN){const handled=this.handleDownEvent(mapBrowserEvent);this.handlingDownUpSequence=handled,stopEvent=this.stopDown(handled)}else mapBrowserEvent.type==_MapBrowserEventType_js__WEBPACK_IMPORTED_MODULE_1__.Z.POINTERMOVE&&this.handleMoveEvent(mapBrowserEvent);return!stopEvent}handleMoveEvent(mapBrowserEvent){}handleUpEvent(mapBrowserEvent){return!1}stopDown(handled){return handled}updateTrackedPointers_(mapBrowserEvent){mapBrowserEvent.activePointers&&(this.targetPointers=mapBrowserEvent.activePointers)}}function centroid(pointerEvents){const length=pointerEvents.length;let clientX=0,clientY=0;for(let i=0;i<length;i++)clientX+=pointerEvents[i].clientX,clientY+=pointerEvents[i].clientY;return{clientX:clientX/length,clientY:clientY/length}}const __WEBPACK_DEFAULT_EXPORT__=PointerInteraction},"./node_modules/ol/interaction/defaults.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>defaults});var Collection=__webpack_require__("./node_modules/ol/Collection.js"),Interaction=__webpack_require__("./node_modules/ol/interaction/Interaction.js"),MapBrowserEventType=__webpack_require__("./node_modules/ol/MapBrowserEventType.js");class DoubleClickZoom extends Interaction.ZP{constructor(options){super(),options=options||{},this.delta_=options.delta?options.delta:1,this.duration_=void 0!==options.duration?options.duration:250}handleEvent(mapBrowserEvent){let stopEvent=!1;if(mapBrowserEvent.type==MapBrowserEventType.Z.DBLCLICK){const browserEvent=mapBrowserEvent.originalEvent,map=mapBrowserEvent.map,anchor=mapBrowserEvent.coordinate,delta=browserEvent.shiftKey?-this.delta_:this.delta_,view=map.getView();(0,Interaction.FW)(view,delta,anchor,this.duration_),browserEvent.preventDefault(),stopEvent=!0}return!stopEvent}}const interaction_DoubleClickZoom=DoubleClickZoom;var DragPan=__webpack_require__("./node_modules/ol/interaction/DragPan.js"),Pointer=__webpack_require__("./node_modules/ol/interaction/Pointer.js"),functions=__webpack_require__("./node_modules/ol/functions.js"),events_condition=__webpack_require__("./node_modules/ol/events/condition.js"),rotationconstraint=__webpack_require__("./node_modules/ol/rotationconstraint.js");class DragRotate extends Pointer.Z{constructor(options){options=options||{},super({stopDown:functions.Dv}),this.condition_=options.condition?options.condition:events_condition.aj,this.lastAngle_=void 0,this.duration_=void 0!==options.duration?options.duration:250}handleDragEvent(mapBrowserEvent){if(!(0,events_condition.QL)(mapBrowserEvent))return;const map=mapBrowserEvent.map,view=map.getView();if(view.getConstraints().rotation===rotationconstraint.h$)return;const size=map.getSize(),offset=mapBrowserEvent.pixel,theta=Math.atan2(size[1]/2-offset[1],offset[0]-size[0]/2);if(void 0!==this.lastAngle_){const delta=theta-this.lastAngle_;view.adjustRotationInternal(-delta)}this.lastAngle_=theta}handleUpEvent(mapBrowserEvent){if(!(0,events_condition.QL)(mapBrowserEvent))return!0;return mapBrowserEvent.map.getView().endInteraction(this.duration_),!1}handleDownEvent(mapBrowserEvent){if(!(0,events_condition.QL)(mapBrowserEvent))return!1;if((0,events_condition.v8)(mapBrowserEvent)&&this.condition_(mapBrowserEvent)){return mapBrowserEvent.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}}const interaction_DragRotate=DragRotate;var Event=__webpack_require__("./node_modules/ol/events/Event.js"),Disposable=__webpack_require__("./node_modules/ol/Disposable.js"),Polygon=__webpack_require__("./node_modules/ol/geom/Polygon.js");class RenderBox extends Disposable.Z{constructor(className){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+className,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const startPixel=this.startPixel_,endPixel=this.endPixel_,style=this.element_.style;style.left=Math.min(startPixel[0],endPixel[0])+"px",style.top=Math.min(startPixel[1],endPixel[1])+"px",style.width=Math.abs(endPixel[0]-startPixel[0])+"px",style.height=Math.abs(endPixel[1]-startPixel[1])+"px"}setMap(map){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const style=this.element_.style;style.left="inherit",style.top="inherit",style.width="inherit",style.height="inherit"}this.map_=map,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(startPixel,endPixel){this.startPixel_=startPixel,this.endPixel_=endPixel,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const startPixel=this.startPixel_,endPixel=this.endPixel_,coordinates=[startPixel,[startPixel[0],endPixel[1]],endPixel,[endPixel[0],startPixel[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);coordinates[4]=coordinates[0].slice(),this.geometry_?this.geometry_.setCoordinates([coordinates]):this.geometry_=new Polygon.ZP([coordinates])}getGeometry(){return this.geometry_}}const Box=RenderBox,DragBoxEventType_BOXSTART="boxstart",DragBoxEventType_BOXDRAG="boxdrag",DragBoxEventType_BOXEND="boxend",DragBoxEventType_BOXCANCEL="boxcancel";class DragBoxEvent extends Event.ZP{constructor(type,coordinate,mapBrowserEvent){super(type),this.coordinate=coordinate,this.mapBrowserEvent=mapBrowserEvent}}class DragBox extends Pointer.Z{constructor(options){super(),this.on,this.once,this.un,options=options||{},this.box_=new Box(options.className||"ol-dragbox"),this.minArea_=void 0!==options.minArea?options.minArea:64,options.onBoxEnd&&(this.onBoxEnd=options.onBoxEnd),this.startPixel_=null,this.condition_=options.condition?options.condition:events_condition.v8,this.boxEndCondition_=options.boxEndCondition?options.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(mapBrowserEvent,startPixel,endPixel){const width=endPixel[0]-startPixel[0],height=endPixel[1]-startPixel[1];return width*width+height*height>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(mapBrowserEvent){this.box_.setPixels(this.startPixel_,mapBrowserEvent.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType_BOXDRAG,mapBrowserEvent.coordinate,mapBrowserEvent))}handleUpEvent(mapBrowserEvent){this.box_.setMap(null);const completeBox=this.boxEndCondition_(mapBrowserEvent,this.startPixel_,mapBrowserEvent.pixel);return completeBox&&this.onBoxEnd(mapBrowserEvent),this.dispatchEvent(new DragBoxEvent(completeBox?DragBoxEventType_BOXEND:DragBoxEventType_BOXCANCEL,mapBrowserEvent.coordinate,mapBrowserEvent)),!1}handleDownEvent(mapBrowserEvent){return!!this.condition_(mapBrowserEvent)&&(this.startPixel_=mapBrowserEvent.pixel,this.box_.setMap(mapBrowserEvent.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType_BOXSTART,mapBrowserEvent.coordinate,mapBrowserEvent)),!0)}onBoxEnd(event){}}const interaction_DragBox=DragBox;var easing=__webpack_require__("./node_modules/ol/easing.js");const interaction_DragZoom=class DragZoom extends interaction_DragBox{constructor(options){super({condition:(options=options||{}).condition?options.condition:events_condition.vY,className:options.className||"ol-dragzoom",minArea:options.minArea}),this.duration_=void 0!==options.duration?options.duration:200,this.out_=void 0!==options.out&&options.out}onBoxEnd(event){const view=this.getMap().getView();let geometry=this.getGeometry();if(this.out_){const rotatedExtent=view.rotatedExtentForGeometry(geometry),resolution=view.getResolutionForExtentInternal(rotatedExtent),factor=view.getResolution()/resolution;geometry=geometry.clone(),geometry.scale(factor*factor)}view.fitInternal(geometry,{duration:this.duration_,easing:easing.Vv})}};var EventType=__webpack_require__("./node_modules/ol/events/EventType.js");const Key_LEFT="ArrowLeft",Key_UP="ArrowUp",Key_RIGHT="ArrowRight",Key_DOWN="ArrowDown";var coordinate=__webpack_require__("./node_modules/ol/coordinate.js");class KeyboardPan extends Interaction.ZP{constructor(options){super(),options=options||{},this.defaultCondition_=function(mapBrowserEvent){return(0,events_condition.rM)(mapBrowserEvent)&&(0,events_condition.TN)(mapBrowserEvent)},this.condition_=void 0!==options.condition?options.condition:this.defaultCondition_,this.duration_=void 0!==options.duration?options.duration:100,this.pixelDelta_=void 0!==options.pixelDelta?options.pixelDelta:128}handleEvent(mapBrowserEvent){let stopEvent=!1;if(mapBrowserEvent.type==EventType.Z.KEYDOWN){const keyEvent=mapBrowserEvent.originalEvent,key=keyEvent.key;if(this.condition_(mapBrowserEvent)&&(key==Key_DOWN||key==Key_LEFT||key==Key_RIGHT||key==Key_UP)){const view=mapBrowserEvent.map.getView(),mapUnitsDelta=view.getResolution()*this.pixelDelta_;let deltaX=0,deltaY=0;key==Key_DOWN?deltaY=-mapUnitsDelta:key==Key_LEFT?deltaX=-mapUnitsDelta:key==Key_RIGHT?deltaX=mapUnitsDelta:deltaY=mapUnitsDelta;const delta=[deltaX,deltaY];(0,coordinate.U1)(delta,view.getRotation()),(0,Interaction.Cv)(view,delta,this.duration_),keyEvent.preventDefault(),stopEvent=!0}}return!stopEvent}}const interaction_KeyboardPan=KeyboardPan;class KeyboardZoom extends Interaction.ZP{constructor(options){super(),options=options||{},this.condition_=options.condition?options.condition:function(mapBrowserEvent){return!(0,events_condition.a5)(mapBrowserEvent)&&(0,events_condition.TN)(mapBrowserEvent)},this.delta_=options.delta?options.delta:1,this.duration_=void 0!==options.duration?options.duration:100}handleEvent(mapBrowserEvent){let stopEvent=!1;if(mapBrowserEvent.type==EventType.Z.KEYDOWN||mapBrowserEvent.type==EventType.Z.KEYPRESS){const keyEvent=mapBrowserEvent.originalEvent,key=keyEvent.key;if(this.condition_(mapBrowserEvent)&&("+"===key||"-"===key)){const map=mapBrowserEvent.map,delta="+"===key?this.delta_:-this.delta_,view=map.getView();(0,Interaction.FW)(view,delta,void 0,this.duration_),keyEvent.preventDefault(),stopEvent=!0}}return!stopEvent}}const interaction_KeyboardZoom=KeyboardZoom;const ol_Kinetic=class Kinetic{constructor(decay,minVelocity,delay){this.decay_=decay,this.minVelocity_=minVelocity,this.delay_=delay,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(x,y){this.points_.push(x,y,Date.now())}end(){if(this.points_.length<6)return!1;const delay=Date.now()-this.delay_,lastIndex=this.points_.length-3;if(this.points_[lastIndex+2]<delay)return!1;let firstIndex=lastIndex-3;for(;firstIndex>0&&this.points_[firstIndex+2]>delay;)firstIndex-=3;const duration=this.points_[lastIndex+2]-this.points_[firstIndex+2];if(duration<1e3/60)return!1;const dx=this.points_[lastIndex]-this.points_[firstIndex],dy=this.points_[lastIndex+1]-this.points_[firstIndex+1];return this.angle_=Math.atan2(dy,dx),this.initialVelocity_=Math.sqrt(dx*dx+dy*dy)/duration,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}};var MouseWheelZoom=__webpack_require__("./node_modules/ol/interaction/MouseWheelZoom.js");class PinchRotate extends Pointer.Z{constructor(options){const pointerOptions=options=options||{};pointerOptions.stopDown||(pointerOptions.stopDown=functions.Dv),super(pointerOptions),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==options.threshold?options.threshold:.3,this.duration_=void 0!==options.duration?options.duration:250}handleDragEvent(mapBrowserEvent){let rotationDelta=0;const touch0=this.targetPointers[0],touch1=this.targetPointers[1],angle=Math.atan2(touch1.clientY-touch0.clientY,touch1.clientX-touch0.clientX);if(void 0!==this.lastAngle_){const delta=angle-this.lastAngle_;this.rotationDelta_+=delta,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),rotationDelta=delta}this.lastAngle_=angle;const map=mapBrowserEvent.map,view=map.getView();view.getConstraints().rotation!==rotationconstraint.h$&&(this.anchor_=map.getCoordinateFromPixelInternal(map.getEventPixel((0,Pointer.S)(this.targetPointers))),this.rotating_&&(map.render(),view.adjustRotationInternal(rotationDelta,this.anchor_)))}handleUpEvent(mapBrowserEvent){if(this.targetPointers.length<2){return mapBrowserEvent.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(mapBrowserEvent){if(this.targetPointers.length>=2){const map=mapBrowserEvent.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||map.getView().beginInteraction(),!0}return!1}}const interaction_PinchRotate=PinchRotate;class PinchZoom extends Pointer.Z{constructor(options){const pointerOptions=options=options||{};pointerOptions.stopDown||(pointerOptions.stopDown=functions.Dv),super(pointerOptions),this.anchor_=null,this.duration_=void 0!==options.duration?options.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(mapBrowserEvent){let scaleDelta=1;const touch0=this.targetPointers[0],touch1=this.targetPointers[1],dx=touch0.clientX-touch1.clientX,dy=touch0.clientY-touch1.clientY,distance=Math.sqrt(dx*dx+dy*dy);void 0!==this.lastDistance_&&(scaleDelta=this.lastDistance_/distance),this.lastDistance_=distance;const map=mapBrowserEvent.map,view=map.getView();1!=scaleDelta&&(this.lastScaleDelta_=scaleDelta),this.anchor_=map.getCoordinateFromPixelInternal(map.getEventPixel((0,Pointer.S)(this.targetPointers))),map.render(),view.adjustResolutionInternal(scaleDelta,this.anchor_)}handleUpEvent(mapBrowserEvent){if(this.targetPointers.length<2){const view=mapBrowserEvent.map.getView(),direction=this.lastScaleDelta_>1?1:-1;return view.endInteraction(this.duration_,direction),!1}return!0}handleDownEvent(mapBrowserEvent){if(this.targetPointers.length>=2){const map=mapBrowserEvent.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||map.getView().beginInteraction(),!0}return!1}}const interaction_PinchZoom=PinchZoom;function defaults(options){options=options||{};const interactions=new Collection.Z,kinetic=new ol_Kinetic(-.005,.05,100);(void 0===options.altShiftDragRotate||options.altShiftDragRotate)&&interactions.push(new interaction_DragRotate);(void 0===options.doubleClickZoom||options.doubleClickZoom)&&interactions.push(new interaction_DoubleClickZoom({delta:options.zoomDelta,duration:options.zoomDuration}));(void 0===options.dragPan||options.dragPan)&&interactions.push(new DragPan.Z({onFocusOnly:options.onFocusOnly,kinetic}));(void 0===options.pinchRotate||options.pinchRotate)&&interactions.push(new interaction_PinchRotate);(void 0===options.pinchZoom||options.pinchZoom)&&interactions.push(new interaction_PinchZoom({duration:options.zoomDuration}));(void 0===options.keyboard||options.keyboard)&&(interactions.push(new interaction_KeyboardPan),interactions.push(new interaction_KeyboardZoom({delta:options.zoomDelta,duration:options.zoomDuration})));(void 0===options.mouseWheelZoom||options.mouseWheelZoom)&&interactions.push(new MouseWheelZoom.Z({onFocusOnly:options.onFocusOnly,duration:options.zoomDuration}));return(void 0===options.shiftDragZoom||options.shiftDragZoom)&&interactions.push(new interaction_DragZoom({duration:options.zoomDuration})),interactions}},"./node_modules/ol/layer/Base.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _Object_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/Object.js"),_Property_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/layer/Property.js"),_util_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/util.js"),_asserts_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/asserts.js"),_math_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/math.js");class BaseLayer extends _Object_js__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(options){super(),this.on,this.once,this.un,this.background_=options.background;const properties=Object.assign({},options);"object"==typeof options.properties&&(delete properties.properties,Object.assign(properties,options.properties)),properties[_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.OPACITY]=void 0!==options.opacity?options.opacity:1,(0,_asserts_js__WEBPACK_IMPORTED_MODULE_2__.h)("number"==typeof properties[_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.OPACITY],"Layer opacity must be a number"),properties[_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.VISIBLE]=void 0===options.visible||options.visible,properties[_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.Z_INDEX]=options.zIndex,properties[_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MAX_RESOLUTION]=void 0!==options.maxResolution?options.maxResolution:1/0,properties[_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MIN_RESOLUTION]=void 0!==options.minResolution?options.minResolution:0,properties[_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MIN_ZOOM]=void 0!==options.minZoom?options.minZoom:-1/0,properties[_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MAX_ZOOM]=void 0!==options.maxZoom?options.maxZoom:1/0,this.className_=void 0!==properties.className?properties.className:"ol-layer",delete properties.className,this.setProperties(properties),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(managed){const state=this.state_||{layer:this,managed:void 0===managed||managed},zIndex=this.getZIndex();return state.opacity=(0,_math_js__WEBPACK_IMPORTED_MODULE_3__.uZ)(Math.round(100*this.getOpacity())/100,0,1),state.visible=this.getVisible(),state.extent=this.getExtent(),state.zIndex=void 0!==zIndex||state.managed?zIndex:1/0,state.maxResolution=this.getMaxResolution(),state.minResolution=Math.max(this.getMinResolution(),0),state.minZoom=this.getMinZoom(),state.maxZoom=this.getMaxZoom(),this.state_=state,state}getLayersArray(array){return(0,_util_js__WEBPACK_IMPORTED_MODULE_4__.O3)()}getLayerStatesArray(states){return(0,_util_js__WEBPACK_IMPORTED_MODULE_4__.O3)()}getExtent(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.EXTENT)}getMaxResolution(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MIN_ZOOM)}getMaxZoom(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MAX_ZOOM)}getOpacity(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.OPACITY)}getSourceState(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_4__.O3)()}getVisible(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.VISIBLE)}getZIndex(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.Z_INDEX)}setBackground(background){this.background_=background,this.changed()}setExtent(extent){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.EXTENT,extent)}setMaxResolution(maxResolution){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MAX_RESOLUTION,maxResolution)}setMinResolution(minResolution){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MIN_RESOLUTION,minResolution)}setMaxZoom(maxZoom){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MAX_ZOOM,maxZoom)}setMinZoom(minZoom){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MIN_ZOOM,minZoom)}setOpacity(opacity){(0,_asserts_js__WEBPACK_IMPORTED_MODULE_2__.h)("number"==typeof opacity,"Layer opacity must be a number"),this.set(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.OPACITY,opacity)}setVisible(visible){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.VISIBLE,visible)}setZIndex(zindex){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.Z_INDEX,zindex)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const __WEBPACK_DEFAULT_EXPORT__=BaseLayer},"./node_modules/ol/layer/Layer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__,j:()=>inView});var _Base_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/layer/Base.js"),_events_EventType_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/events/EventType.js"),_Property_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/layer/Property.js"),_render_EventType_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/ol/render/EventType.js"),_View_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/View.js"),_asserts_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/ol/asserts.js"),_extent_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/ol/extent.js"),_events_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/events.js");class Layer extends _Base_js__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(options){const baseOptions=Object.assign({},options);delete baseOptions.source,super(baseOptions),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,options.render&&(this.render=options.render),options.map&&this.setMap(options.map),this.addChangeListener(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.SOURCE,this.handleSourcePropertyChange_);const source=options.source?options.source:null;this.setSource(source)}getLayersArray(array){return(array=array||[]).push(this),array}getLayerStatesArray(states){return(states=states||[]).push(this.getLayerState()),states}getSource(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const source=this.getSource();return source?source.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,_events_js__WEBPACK_IMPORTED_MODULE_2__.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const source=this.getSource();source&&(this.sourceChangeKey_=(0,_events_js__WEBPACK_IMPORTED_MODULE_2__.oL)(source,_events_EventType_js__WEBPACK_IMPORTED_MODULE_3__.Z.CHANGE,this.handleSourceChange_,this),"ready"===source.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(pixel){return this.renderer_?this.renderer_.getFeatures(pixel):Promise.resolve([])}getData(pixel){return this.renderer_&&this.rendered?this.renderer_.getData(pixel):null}isVisible(view){let frameState;const map=this.getMapInternal();let layerState;!view&&map&&(view=map.getView()),frameState=view instanceof _View_js__WEBPACK_IMPORTED_MODULE_4__.ZP?{viewState:view.getState(),extent:view.calculateExtent()}:view,!frameState.layerStatesArray&&map&&(frameState.layerStatesArray=map.getLayerGroup().getLayerStatesArray()),layerState=frameState.layerStatesArray?frameState.layerStatesArray.find((layerState=>layerState.layer===this)):this.getLayerState();const layerExtent=this.getExtent();return inView(layerState,frameState.viewState)&&(!layerExtent||(0,_extent_js__WEBPACK_IMPORTED_MODULE_5__.kK)(layerExtent,frameState.extent))}getAttributions(view){if(!this.isVisible(view))return[];let getAttributions;const source=this.getSource();if(source&&(getAttributions=source.getAttributions()),!getAttributions)return[];let attributions=getAttributions(view instanceof _View_js__WEBPACK_IMPORTED_MODULE_4__.ZP?view.getViewStateAndExtent():view);return Array.isArray(attributions)||(attributions=[attributions]),attributions}render(frameState,target){const layerRenderer=this.getRenderer();return layerRenderer.prepareFrame(frameState)?(this.rendered=!0,layerRenderer.renderFrame(frameState,target)):null}unrender(){this.rendered=!1}setMapInternal(map){map||this.unrender(),this.set(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MAP,map)}getMapInternal(){return this.get(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.MAP)}setMap(map){this.mapPrecomposeKey_&&((0,_events_js__WEBPACK_IMPORTED_MODULE_2__.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),map||this.changed(),this.mapRenderKey_&&((0,_events_js__WEBPACK_IMPORTED_MODULE_2__.bN)(this.mapRenderKey_),this.mapRenderKey_=null),map&&(this.mapPrecomposeKey_=(0,_events_js__WEBPACK_IMPORTED_MODULE_2__.oL)(map,_render_EventType_js__WEBPACK_IMPORTED_MODULE_6__.Z.PRECOMPOSE,(function(evt){const layerStatesArray=evt.frameState.layerStatesArray,layerState=this.getLayerState(!1);(0,_asserts_js__WEBPACK_IMPORTED_MODULE_7__.h)(!layerStatesArray.some((function(arrayLayerState){return arrayLayerState.layer===layerState.layer})),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),layerStatesArray.push(layerState)}),this),this.mapRenderKey_=(0,_events_js__WEBPACK_IMPORTED_MODULE_2__.oL)(this,_events_EventType_js__WEBPACK_IMPORTED_MODULE_3__.Z.CHANGE,map.render,map),this.changed())}setSource(source){this.set(_Property_js__WEBPACK_IMPORTED_MODULE_1__.Z.SOURCE,source)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function inView(layerState,viewState){if(!layerState.visible)return!1;const resolution=viewState.resolution;if(resolution<layerState.minResolution||resolution>=layerState.maxResolution)return!1;const zoom=viewState.zoom;return zoom>layerState.minZoom&&zoom<=layerState.maxZoom}const __WEBPACK_DEFAULT_EXPORT__=Layer},"./node_modules/ol/layer/Property.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},"./node_modules/ol/layer/Tile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>layer_Tile});var Layer=__webpack_require__("./node_modules/ol/layer/Layer.js");const TileProperty_PRELOAD="preload",TileProperty_USE_INTERIM_TILES_ON_ERROR="useInterimTilesOnError";class BaseTileLayer extends Layer.Z{constructor(options){options=options||{};const baseOptions=Object.assign({},options);delete baseOptions.preload,delete baseOptions.useInterimTilesOnError,super(baseOptions),this.on,this.once,this.un,this.setPreload(void 0!==options.preload?options.preload:0),this.setUseInterimTilesOnError(void 0===options.useInterimTilesOnError||options.useInterimTilesOnError)}getPreload(){return this.get(TileProperty_PRELOAD)}setPreload(preload){this.set(TileProperty_PRELOAD,preload)}getUseInterimTilesOnError(){return this.get(TileProperty_USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(useInterimTilesOnError){this.set(TileProperty_USE_INTERIM_TILES_ON_ERROR,useInterimTilesOnError)}getData(pixel){return super.getData(pixel)}}const BaseTile=BaseTileLayer;var canvas_Layer=__webpack_require__("./node_modules/ol/renderer/canvas/Layer.js"),ImageTile=__webpack_require__("./node_modules/ol/ImageTile.js"),Tile=__webpack_require__("./node_modules/ol/reproj/Tile.js"),TileRange=__webpack_require__("./node_modules/ol/TileRange.js"),TileState=__webpack_require__("./node_modules/ol/TileState.js"),transform=__webpack_require__("./node_modules/ol/transform.js"),array=__webpack_require__("./node_modules/ol/array.js"),ol_extent=__webpack_require__("./node_modules/ol/extent.js"),proj=__webpack_require__("./node_modules/ol/proj.js"),util=__webpack_require__("./node_modules/ol/util.js"),size=__webpack_require__("./node_modules/ol/size.js");class CanvasTileLayerRenderer extends canvas_Layer.Z{constructor(tileLayer){super(tileLayer),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,ol_extent.lJ)(),this.tmpTileRange_=new TileRange.Z(0,0,0,0)}isDrawableTile(tile){const tileLayer=this.getLayer(),tileState=tile.getState(),useInterimTilesOnError=tileLayer.getUseInterimTilesOnError();return tileState==TileState.Z.LOADED||tileState==TileState.Z.EMPTY||tileState==TileState.Z.ERROR&&!useInterimTilesOnError}getTile(z,x,y,frameState){const pixelRatio=frameState.pixelRatio,projection=frameState.viewState.projection,tileLayer=this.getLayer();let tile=tileLayer.getSource().getTile(z,x,y,pixelRatio,projection);return tile.getState()==TileState.Z.ERROR&&tileLayer.getUseInterimTilesOnError()&&tileLayer.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(tile)||(tile=tile.getInterimTile()),tile}getData(pixel){const frameState=this.frameState;if(!frameState)return null;const layer=this.getLayer(),coordinate=(0,transform.nn)(frameState.pixelToCoordinateTransform,pixel.slice()),layerExtent=layer.getExtent();if(layerExtent&&!(0,ol_extent.b8)(layerExtent,coordinate))return null;const pixelRatio=frameState.pixelRatio,projection=frameState.viewState.projection,viewState=frameState.viewState,source=layer.getRenderSource(),tileGrid=source.getTileGridForProjection(viewState.projection),tilePixelRatio=source.getTilePixelRatio(frameState.pixelRatio);for(let z=tileGrid.getZForResolution(viewState.resolution);z>=tileGrid.getMinZoom();--z){const tileCoord=tileGrid.getTileCoordForCoordAndZ(coordinate,z),tile=source.getTile(z,tileCoord[1],tileCoord[2],pixelRatio,projection);if(!(tile instanceof ImageTile.Z||tile instanceof Tile.Z)||tile instanceof Tile.Z&&tile.getState()===TileState.Z.EMPTY)return null;if(tile.getState()!==TileState.Z.LOADED)continue;const tileOrigin=tileGrid.getOrigin(z),tileSize=(0,size.Pq)(tileGrid.getTileSize(z)),tileResolution=tileGrid.getResolution(z),col=Math.floor(tilePixelRatio*((coordinate[0]-tileOrigin[0])/tileResolution-tileCoord[1]*tileSize[0])),row=Math.floor(tilePixelRatio*((tileOrigin[1]-coordinate[1])/tileResolution-tileCoord[2]*tileSize[1])),gutter=Math.round(tilePixelRatio*source.getGutterForProjection(viewState.projection));return this.getImageData(tile.getImage(),col+gutter,row+gutter)}return null}loadedTileCallback(tiles,zoom,tile){return!!this.isDrawableTile(tile)&&super.loadedTileCallback(tiles,zoom,tile)}prepareFrame(frameState){return!!this.getLayer().getSource()}renderFrame(frameState,target){const layerState=frameState.layerStatesArray[frameState.layerIndex],viewState=frameState.viewState,projection=viewState.projection,viewResolution=viewState.resolution,viewCenter=viewState.center,rotation=viewState.rotation,pixelRatio=frameState.pixelRatio,tileLayer=this.getLayer(),tileSource=tileLayer.getSource(),sourceRevision=tileSource.getRevision(),tileGrid=tileSource.getTileGridForProjection(projection),z=tileGrid.getZForResolution(viewResolution,tileSource.zDirection),tileResolution=tileGrid.getResolution(z);let extent=frameState.extent;const resolution=frameState.viewState.resolution,tilePixelRatio=tileSource.getTilePixelRatio(pixelRatio),width=Math.round((0,ol_extent.dz)(extent)/resolution*pixelRatio),height=Math.round((0,ol_extent.Cr)(extent)/resolution*pixelRatio),layerExtent=layerState.extent&&(0,proj.dY)(layerState.extent,projection);layerExtent&&(extent=(0,ol_extent.Ed)(extent,(0,proj.dY)(layerState.extent,projection)));const dx=tileResolution*width/2/tilePixelRatio,dy=tileResolution*height/2/tilePixelRatio,canvasExtent=[viewCenter[0]-dx,viewCenter[1]-dy,viewCenter[0]+dx,viewCenter[1]+dy],tileRange=tileGrid.getTileRangeForExtentAndZ(extent,z),tilesToDrawByZ={};tilesToDrawByZ[z]={};const findLoadedTiles=this.createLoadedTileFinder(tileSource,projection,tilesToDrawByZ),tmpExtent=this.tmpExtent,tmpTileRange=this.tmpTileRange_;this.newTiles_=!1;const viewport=rotation?(0,ol_extent.dY)(viewState.center,resolution,rotation,frameState.size):void 0;for(let x=tileRange.minX;x<=tileRange.maxX;++x)for(let y=tileRange.minY;y<=tileRange.maxY;++y){if(rotation&&!tileGrid.tileCoordIntersectsViewport([z,x,y],viewport))continue;const tile=this.getTile(z,x,y,frameState);if(this.isDrawableTile(tile)){const uid=(0,util.sq)(this);if(tile.getState()==TileState.Z.LOADED){tilesToDrawByZ[z][tile.tileCoord.toString()]=tile;let inTransition=tile.inTransition(uid);inTransition&&1!==layerState.opacity&&(tile.endTransition(uid),inTransition=!1),this.newTiles_||!inTransition&&this.renderedTiles.includes(tile)||(this.newTiles_=!0)}if(1===tile.getAlpha(uid,frameState.time))continue}const childTileRange=tileGrid.getTileCoordChildTileRange(tile.tileCoord,tmpTileRange,tmpExtent);let covered=!1;childTileRange&&(covered=findLoadedTiles(z+1,childTileRange)),covered||tileGrid.forEachTileCoordParentTileRange(tile.tileCoord,findLoadedTiles,tmpTileRange,tmpExtent)}const canvasScale=tileResolution/viewResolution*pixelRatio/tilePixelRatio;(0,transform.qC)(this.pixelTransform,frameState.size[0]/2,frameState.size[1]/2,1/pixelRatio,1/pixelRatio,rotation,-width/2,-height/2);const canvasTransform=(0,transform.BB)(this.pixelTransform);this.useContainer(target,canvasTransform,this.getBackground(frameState));const context=this.context,canvas=context.canvas;(0,transform.nb)(this.inversePixelTransform,this.pixelTransform),(0,transform.qC)(this.tempTransform,width/2,height/2,canvasScale,canvasScale,0,-width/2,-height/2),canvas.width!=width||canvas.height!=height?(canvas.width=width,canvas.height=height):this.containerReused||context.clearRect(0,0,width,height),layerExtent&&this.clipUnrotated(context,frameState,layerExtent),tileSource.getInterpolate()||(context.imageSmoothingEnabled=!1),this.preRender(context,frameState),this.renderedTiles.length=0;let clips,clipZs,currentClip,zs=Object.keys(tilesToDrawByZ).map(Number);zs.sort(array.j2),1!==layerState.opacity||this.containerReused&&!tileSource.getOpaque(frameState.viewState.projection)?(clips=[],clipZs=[]):zs=zs.reverse();for(let i=zs.length-1;i>=0;--i){const currentZ=zs[i],currentTilePixelSize=tileSource.getTilePixelSize(currentZ,pixelRatio,projection),currentScale=tileGrid.getResolution(currentZ)/tileResolution,dx=currentTilePixelSize[0]*currentScale*canvasScale,dy=currentTilePixelSize[1]*currentScale*canvasScale,originTileCoord=tileGrid.getTileCoordForCoordAndZ((0,ol_extent.rL)(canvasExtent),currentZ),originTileExtent=tileGrid.getTileCoordExtent(originTileCoord),origin=(0,transform.nn)(this.tempTransform,[tilePixelRatio*(originTileExtent[0]-canvasExtent[0])/tileResolution,tilePixelRatio*(canvasExtent[3]-originTileExtent[3])/tileResolution]),tileGutter=tilePixelRatio*tileSource.getGutterForProjection(projection),tilesToDraw=tilesToDrawByZ[currentZ];for(const tileCoordKey in tilesToDraw){const tile=tilesToDraw[tileCoordKey],tileCoord=tile.tileCoord,xIndex=originTileCoord[1]-tileCoord[1],nextX=Math.round(origin[0]-(xIndex-1)*dx),yIndex=originTileCoord[2]-tileCoord[2],nextY=Math.round(origin[1]-(yIndex-1)*dy),x=Math.round(origin[0]-xIndex*dx),y=Math.round(origin[1]-yIndex*dy),w=nextX-x,h=nextY-y,transition=z===currentZ,inTransition=transition&&1!==tile.getAlpha((0,util.sq)(this),frameState.time);let contextSaved=!1;if(!inTransition)if(clips){currentClip=[x,y,x+w,y,x+w,y+h,x,y+h];for(let i=0,ii=clips.length;i<ii;++i)if(z!==currentZ&&currentZ<clipZs[i]){const clip=clips[i];(0,ol_extent.kK)([x,y,x+w,y+h],[clip[0],clip[3],clip[4],clip[7]])&&(contextSaved||(context.save(),contextSaved=!0),context.beginPath(),context.moveTo(currentClip[0],currentClip[1]),context.lineTo(currentClip[2],currentClip[3]),context.lineTo(currentClip[4],currentClip[5]),context.lineTo(currentClip[6],currentClip[7]),context.moveTo(clip[6],clip[7]),context.lineTo(clip[4],clip[5]),context.lineTo(clip[2],clip[3]),context.lineTo(clip[0],clip[1]),context.clip())}clips.push(currentClip),clipZs.push(currentZ)}else context.clearRect(x,y,w,h);this.drawTileImage(tile,frameState,x,y,w,h,tileGutter,transition),clips&&!inTransition?(contextSaved&&context.restore(),this.renderedTiles.unshift(tile)):this.renderedTiles.push(tile),this.updateUsedTiles(frameState.usedTiles,tileSource,tile)}}return this.renderedRevision=sourceRevision,this.renderedResolution=tileResolution,this.extentChanged=!this.renderedExtent_||!(0,ol_extent.fS)(this.renderedExtent_,canvasExtent),this.renderedExtent_=canvasExtent,this.renderedPixelRatio=pixelRatio,this.renderedProjection=projection,this.manageTilePyramid(frameState,tileSource,tileGrid,pixelRatio,projection,extent,z,tileLayer.getPreload()),this.scheduleExpireCache(frameState,tileSource),this.postRender(context,frameState),layerState.extent&&context.restore(),context.imageSmoothingEnabled=!0,canvasTransform!==canvas.style.transform&&(canvas.style.transform=canvasTransform),this.container}drawTileImage(tile,frameState,x,y,w,h,gutter,transition){const image=this.getTileImage(tile);if(!image)return;const uid=(0,util.sq)(this),layerState=frameState.layerStatesArray[frameState.layerIndex],alpha=layerState.opacity*(transition?tile.getAlpha(uid,frameState.time):1),alphaChanged=alpha!==this.context.globalAlpha;alphaChanged&&(this.context.save(),this.context.globalAlpha=alpha),this.context.drawImage(image,gutter,gutter,image.width-2*gutter,image.height-2*gutter,x,y,w,h),alphaChanged&&this.context.restore(),alpha!==layerState.opacity?frameState.animate=!0:transition&&tile.endTransition(uid)}getImage(){const context=this.context;return context?context.canvas:null}getTileImage(tile){return tile.getImage()}scheduleExpireCache(frameState,tileSource){if(tileSource.canExpireCache()){const postRenderFunction=function(tileSource,map,frameState){const tileSourceKey=(0,util.sq)(tileSource);tileSourceKey in frameState.usedTiles&&tileSource.expireCache(frameState.viewState.projection,frameState.usedTiles[tileSourceKey])}.bind(null,tileSource);frameState.postRenderFunctions.push(postRenderFunction)}}updateUsedTiles(usedTiles,tileSource,tile){const tileSourceKey=(0,util.sq)(tileSource);tileSourceKey in usedTiles||(usedTiles[tileSourceKey]={}),usedTiles[tileSourceKey][tile.getKey()]=!0}manageTilePyramid(frameState,tileSource,tileGrid,pixelRatio,projection,extent,currentZ,preload,tileCallback){const tileSourceKey=(0,util.sq)(tileSource);tileSourceKey in frameState.wantedTiles||(frameState.wantedTiles[tileSourceKey]={});const wantedTiles=frameState.wantedTiles[tileSourceKey],tileQueue=frameState.tileQueue,minZoom=tileGrid.getMinZoom(),rotation=frameState.viewState.rotation,viewport=rotation?(0,ol_extent.dY)(frameState.viewState.center,frameState.viewState.resolution,rotation,frameState.size):void 0;let tile,tileRange,tileResolution,x,y,z,tileCount=0;for(z=minZoom;z<=currentZ;++z)for(tileRange=tileGrid.getTileRangeForExtentAndZ(extent,z,tileRange),tileResolution=tileGrid.getResolution(z),x=tileRange.minX;x<=tileRange.maxX;++x)for(y=tileRange.minY;y<=tileRange.maxY;++y)rotation&&!tileGrid.tileCoordIntersectsViewport([z,x,y],viewport)||(currentZ-z<=preload?(++tileCount,tile=tileSource.getTile(z,x,y,pixelRatio,projection),tile.getState()==TileState.Z.IDLE&&(wantedTiles[tile.getKey()]=!0,tileQueue.isKeyQueued(tile.getKey())||tileQueue.enqueue([tile,tileSourceKey,tileGrid.getTileCoordCenter(tile.tileCoord),tileResolution])),void 0!==tileCallback&&tileCallback(tile)):tileSource.useTile(z,x,y,projection));tileSource.updateCacheSize(tileCount,projection)}}const canvas_TileLayer=CanvasTileLayerRenderer;const layer_Tile=class TileLayer extends BaseTile{constructor(options){super(options)}createRenderer(){return new canvas_TileLayer(this)}}},"./node_modules/ol/layer/Vector.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Vector});var Layer=__webpack_require__("./node_modules/ol/layer/Layer.js"),rbush_min=__webpack_require__("./node_modules/rbush/rbush.min.js"),rbush_min_default=__webpack_require__.n(rbush_min),Style=__webpack_require__("./node_modules/ol/style/Style.js"),Circle=__webpack_require__("./node_modules/ol/style/Circle.js"),Fill=__webpack_require__("./node_modules/ol/style/Fill.js"),EventType=__webpack_require__("./node_modules/ol/events/EventType.js"),ImageState=__webpack_require__("./node_modules/ol/ImageState.js"),style_Image=__webpack_require__("./node_modules/ol/style/Image.js"),color=__webpack_require__("./node_modules/ol/color.js"),asserts=__webpack_require__("./node_modules/ol/asserts.js"),Target=__webpack_require__("./node_modules/ol/events/Target.js"),dom=__webpack_require__("./node_modules/ol/dom.js"),ol_Image=__webpack_require__("./node_modules/ol/Image.js"),IconImageCache=__webpack_require__("./node_modules/ol/style/IconImageCache.js");let taintedTestContext=null;class IconImage extends Target.Z{constructor(image,src,crossOrigin,imageState,color){super(),this.hitDetectionImage_=null,this.image_=image,this.crossOrigin_=crossOrigin,this.canvas_={},this.color_=color,this.imageState_=void 0===imageState?ImageState.Z.IDLE:imageState,this.size_=image&&image.width&&image.height?[image.width,image.height]:null,this.src_=src,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===ImageState.Z.LOADED){taintedTestContext||(taintedTestContext=(0,dom.E4)(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch(e){taintedTestContext=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(EventType.Z.CHANGE)}handleImageError_(){this.imageState_=ImageState.Z.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.Z.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(pixelRatio){return this.image_||this.initializeImage_(),this.replaceColor_(pixelRatio),this.canvas_[pixelRatio]?this.canvas_[pixelRatio]:this.image_}getPixelRatio(pixelRatio){return this.replaceColor_(pixelRatio),this.canvas_[pixelRatio]?pixelRatio:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const width=this.size_[0],height=this.size_[1],context=(0,dom.E4)(width,height);context.fillRect(0,0,width,height),this.hitDetectionImage_=context.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.Z.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(e){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,ol_Image.Q9)(this.image_,this.src_).then((image=>{this.image_=image,this.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}}replaceColor_(pixelRatio){if(!this.color_||this.canvas_[pixelRatio]||this.imageState_!==ImageState.Z.LOADED)return;const image=this.image_,canvas=document.createElement("canvas");canvas.width=Math.ceil(image.width*pixelRatio),canvas.height=Math.ceil(image.height*pixelRatio);const ctx=canvas.getContext("2d");ctx.scale(pixelRatio,pixelRatio),ctx.drawImage(image,0,0),ctx.globalCompositeOperation="multiply",ctx.fillStyle=(0,color.XC)(this.color_),ctx.fillRect(0,0,canvas.width/pixelRatio,canvas.height/pixelRatio),ctx.globalCompositeOperation="destination-in",ctx.drawImage(image,0,0),this.canvas_[pixelRatio]=canvas}}var util=__webpack_require__("./node_modules/ol/util.js");function calculateScale(width,height,wantedWidth,wantedHeight){return void 0!==wantedWidth&&void 0!==wantedHeight?[wantedWidth/width,wantedHeight/height]:void 0!==wantedWidth?wantedWidth/width:void 0!==wantedHeight?wantedHeight/height:1}class Icon extends style_Image.Z{constructor(options){const opacity=void 0!==(options=options||{}).opacity?options.opacity:1,rotation=void 0!==options.rotation?options.rotation:0,scale=void 0!==options.scale?options.scale:1,rotateWithView=void 0!==options.rotateWithView&&options.rotateWithView;super({opacity,rotation,scale,displacement:void 0!==options.displacement?options.displacement:[0,0],rotateWithView,declutterMode:options.declutterMode}),this.anchor_=void 0!==options.anchor?options.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==options.anchorOrigin?options.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==options.anchorXUnits?options.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==options.anchorYUnits?options.anchorYUnits:"fraction",this.crossOrigin_=void 0!==options.crossOrigin?options.crossOrigin:null;const image=void 0!==options.img?options.img:null;let imageState,cacheKey=options.src;if((0,asserts.h)(!(void 0!==cacheKey&&image),"`image` and `src` cannot be provided at the same time"),void 0!==cacheKey&&0!==cacheKey.length||!image||(cacheKey=image.src||(0,util.sq)(image)),(0,asserts.h)(void 0!==cacheKey&&cacheKey.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,asserts.h)(!((void 0!==options.width||void 0!==options.height)&&void 0!==options.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==options.src?imageState=ImageState.Z.IDLE:void 0!==image&&(imageState=image instanceof HTMLImageElement?image.complete?image.src?ImageState.Z.LOADED:ImageState.Z.IDLE:ImageState.Z.LOADING:ImageState.Z.LOADED),this.color_=void 0!==options.color?(0,color._2)(options.color):null,this.iconImage_=function get(image,cacheKey,crossOrigin,imageState,color){let iconImage=void 0===cacheKey?void 0:IconImageCache.c.get(cacheKey,crossOrigin,color);return iconImage||(iconImage=new IconImage(image,image instanceof HTMLImageElement?image.src||void 0:cacheKey,crossOrigin,imageState,color),IconImageCache.c.set(cacheKey,crossOrigin,color,iconImage)),iconImage}(image,cacheKey,this.crossOrigin_,imageState,this.color_),this.offset_=void 0!==options.offset?options.offset:[0,0],this.offsetOrigin_=void 0!==options.offsetOrigin?options.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==options.size?options.size:null,void 0!==options.width||void 0!==options.height){let width,height;if(options.size)[width,height]=options.size;else{const image=this.getImage(1);if(image.width&&image.height)width=image.width,height=image.height;else if(image instanceof HTMLImageElement){this.initialOptions_=options;const onload=()=>{if(this.unlistenImageChange(onload),!this.initialOptions_)return;const imageSize=this.iconImage_.getSize();this.setScale(calculateScale(imageSize[0],imageSize[1],options.width,options.height))};return void this.listenImageChange(onload)}}void 0!==width&&this.setScale(calculateScale(width,height,options.width,options.height))}}clone(){let scale,width,height;return this.initialOptions_?(width=this.initialOptions_.width,height=this.initialOptions_.height):(scale=this.getScale(),scale=Array.isArray(scale)?scale.slice():scale),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale,width,height,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let anchor=this.normalizedAnchor_;if(!anchor){anchor=this.anchor_;const size=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!size)return null;anchor=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(anchor[0]*=size[0]),"fraction"==this.anchorYUnits_&&(anchor[1]*=size[1])}if("top-left"!=this.anchorOrigin_){if(!size)return null;anchor===this.anchor_&&(anchor=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(anchor[0]=-anchor[0]+size[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(anchor[1]=-anchor[1]+size[1])}this.normalizedAnchor_=anchor}const displacement=this.getDisplacement(),scale=this.getScaleArray();return[anchor[0]-displacement[0]/scale[0],anchor[1]+displacement[1]/scale[1]]}setAnchor(anchor){this.anchor_=anchor,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(pixelRatio){return this.iconImage_.getImage(pixelRatio)}getPixelRatio(pixelRatio){return this.iconImage_.getPixelRatio(pixelRatio)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let offset=this.offset_;if("top-left"!=this.offsetOrigin_){const size=this.getSize(),iconImageSize=this.iconImage_.getSize();if(!size||!iconImageSize)return null;offset=offset.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(offset[0]=iconImageSize[0]-size[0]-offset[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(offset[1]=iconImageSize[1]-size[1]-offset[1])}return this.origin_=offset,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const scale=this.getScaleArray();return this.size_?this.size_[0]*scale[0]:this.iconImage_.getImageState()==ImageState.Z.LOADED?this.iconImage_.getSize()[0]*scale[0]:void 0}getHeight(){const scale=this.getScaleArray();return this.size_?this.size_[1]*scale[1]:this.iconImage_.getImageState()==ImageState.Z.LOADED?this.iconImage_.getSize()[1]*scale[1]:void 0}setScale(scale){delete this.initialOptions_,super.setScale(scale)}listenImageChange(listener){this.iconImage_.addEventListener(EventType.Z.CHANGE,listener)}load(){this.iconImage_.load()}unlistenImageChange(listener){this.iconImage_.removeEventListener(EventType.Z.CHANGE,listener)}}const style_Icon=Icon;var RegularShape=__webpack_require__("./node_modules/ol/style/RegularShape.js"),Stroke=__webpack_require__("./node_modules/ol/style/Stroke.js"),size=__webpack_require__("./node_modules/ol/size.js");class Text{constructor(options){options=options||{},this.font_=options.font,this.rotation_=options.rotation,this.rotateWithView_=options.rotateWithView,this.scale_=options.scale,this.scaleArray_=(0,size.Pq)(void 0!==options.scale?options.scale:1),this.text_=options.text,this.textAlign_=options.textAlign,this.justify_=options.justify,this.repeat_=options.repeat,this.textBaseline_=options.textBaseline,this.fill_=void 0!==options.fill?options.fill:new Fill.Z({color:"#333"}),this.maxAngle_=void 0!==options.maxAngle?options.maxAngle:Math.PI/4,this.placement_=void 0!==options.placement?options.placement:"point",this.overflow_=!!options.overflow,this.stroke_=void 0!==options.stroke?options.stroke:null,this.offsetX_=void 0!==options.offsetX?options.offsetX:0,this.offsetY_=void 0!==options.offsetY?options.offsetY:0,this.backgroundFill_=options.backgroundFill?options.backgroundFill:null,this.backgroundStroke_=options.backgroundStroke?options.backgroundStroke:null,this.padding_=void 0===options.padding?null:options.padding}clone(){const scale=this.getScale();return new Text({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(scale)?scale.slice():scale,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(overflow){this.overflow_=overflow}setFont(font){this.font_=font}setMaxAngle(maxAngle){this.maxAngle_=maxAngle}setOffsetX(offsetX){this.offsetX_=offsetX}setOffsetY(offsetY){this.offsetY_=offsetY}setPlacement(placement){this.placement_=placement}setRepeat(repeat){this.repeat_=repeat}setRotateWithView(rotateWithView){this.rotateWithView_=rotateWithView}setFill(fill){this.fill_=fill}setRotation(rotation){this.rotation_=rotation}setScale(scale){this.scale_=scale,this.scaleArray_=(0,size.Pq)(void 0!==scale?scale:1)}setStroke(stroke){this.stroke_=stroke}setText(text){this.text_=text}setTextAlign(textAlign){this.textAlign_=textAlign}setJustify(justify){this.justify_=justify}setTextBaseline(textBaseline){this.textBaseline_=textBaseline}setBackgroundFill(fill){this.backgroundFill_=fill}setBackgroundStroke(stroke){this.backgroundStroke_=stroke}setPadding(padding){this.padding_=padding}}const style_Text=Text;var array=__webpack_require__("./node_modules/ol/array.js");let numTypes=0;const NoneType=0,BooleanType=1<<numTypes++,NumberType=1<<numTypes++,StringType=1<<numTypes++,ColorType=1<<numTypes++,NumberArrayType=1<<numTypes++,AnyType=Math.pow(2,5)-1,typeNames={[BooleanType]:"boolean",[NumberType]:"number",[StringType]:"string",[ColorType]:"color",[NumberArrayType]:"number[]"},namedTypes=Object.keys(typeNames).map(Number).sort(array.j2);function typeName(type){const names=[];for(const namedType of namedTypes)(type&(specific=namedType))===specific&&names.push(typeNames[namedType]);var specific;return 0===names.length?"untyped":names.length<3?names.join(" or "):names.slice(0,-1).join(", ")+", or "+names[names.length-1]}function overlapsType(oneType,otherType){return!!(oneType&otherType)}function isType(type,expected){return type===expected}class LiteralExpression{constructor(type,value){this.type=type,this.value=value}}class CallExpression{constructor(type,operator,...args){this.type=type,this.operator=operator,this.args=args}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function parse(encoded,context,typeHint){switch(typeof encoded){case"boolean":return new LiteralExpression(BooleanType,encoded);case"number":return new LiteralExpression(NumberType,encoded);case"string":{let type=StringType;return(0,color.e1)(encoded)&&(type|=ColorType),isType(type&typeHint,NoneType)||(type&=typeHint),new LiteralExpression(type,encoded)}}if(!Array.isArray(encoded))throw new Error("Expression must be an array or a primitive value");if(0===encoded.length)throw new Error("Empty expression");if("string"==typeof encoded[0])return function parseCallExpression(encoded,context,typeHint){const operator=encoded[0],parser=parsers[operator];if(!parser)throw new Error(`Unknown operator: ${operator}`);return parser(encoded,context,typeHint)}(encoded,context,typeHint);for(const item of encoded)if("number"!=typeof item)throw new Error("Expected an array of numbers");let type=NumberArrayType;return 3!==encoded.length&&4!==encoded.length||(type|=ColorType),typeHint&&(type&=typeHint),new LiteralExpression(type,encoded)}const Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},parsers={[Ops.Get]:createParser((([_,typeHint])=>void 0!==typeHint?function getTypeFromHint(typeHint){switch(typeHint){case"string":return StringType;case"color":return ColorType;case"number":return NumberType;case"boolean":return BooleanType;case"number[]":return NumberArrayType;default:throw new Error(`Unrecognized type hint: ${typeHint}`)}}(typeHint.value):AnyType),withArgsCount(1,2),(function withGetArgs(encoded,context){const arg=parse(encoded[1],context);if(!(arg instanceof LiteralExpression))throw new Error("Expected a literal argument for get operation");if("string"!=typeof arg.value)throw new Error("Expected a string argument for get operation");if(context.properties.add(arg.value),3===encoded.length){return[arg,parse(encoded[2],context)]}return[arg]})),[Ops.Var]:createParser((([firstArg])=>firstArg.type),withArgsCount(1,1),(function withVarArgs(encoded,context,parsedArgs,typeHint){const varName=encoded[1];if("string"!=typeof varName)throw new Error("Expected a string argument for var operation");if(context.variables.add(varName),!("variables"in context.style)||void 0===context.style.variables[varName])return[new LiteralExpression(AnyType,varName)];const arg=parse(context.style.variables[varName],context);if(arg.value=varName,typeHint&&!overlapsType(typeHint,arg.type))throw new Error(`The variable ${varName} has type ${typeName(arg.type)} but the following type was expected: ${typeName(typeHint)}`);return[arg]})),[Ops.Id]:createParser(NumberType|StringType,withNoArgs,(function usesFeatureId(encoded,context){context.featureId=!0})),[Ops.Concat]:createParser(StringType,withArgsCount(2,1/0),parseArgsOfType(AnyType)),[Ops.GeometryType]:createParser(StringType,withNoArgs),[Ops.Resolution]:createParser(NumberType,withNoArgs),[Ops.Zoom]:createParser(NumberType,withNoArgs),[Ops.Time]:createParser(NumberType,withNoArgs),[Ops.Any]:createParser(BooleanType,withArgsCount(2,1/0),parseArgsOfType(BooleanType)),[Ops.All]:createParser(BooleanType,withArgsCount(2,1/0),parseArgsOfType(BooleanType)),[Ops.Not]:createParser(BooleanType,withArgsCount(1,1),parseArgsOfType(BooleanType)),[Ops.Equal]:createParser(BooleanType,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.NotEqual]:createParser(BooleanType,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThan]:createParser(BooleanType,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThanOrEqualTo]:createParser(BooleanType,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThan]:createParser(BooleanType,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThanOrEqualTo]:createParser(BooleanType,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.Multiply]:createParser((parsedArgs=>{let outputType=NumberType|ColorType;for(let i=0;i<parsedArgs.length;i++)outputType&=parsedArgs[i].type;return outputType}),withArgsCount(2,1/0),parseArgsOfType(NumberType|ColorType),narrowArgsType),[Ops.Divide]:createParser(NumberType,withArgsCount(2,2),parseArgsOfType(NumberType)),[Ops.Add]:createParser(NumberType,withArgsCount(2,1/0),parseArgsOfType(NumberType)),[Ops.Subtract]:createParser(NumberType,withArgsCount(2,2),parseArgsOfType(NumberType)),[Ops.Clamp]:createParser(NumberType,withArgsCount(3,3),parseArgsOfType(NumberType)),[Ops.Mod]:createParser(NumberType,withArgsCount(2,2),parseArgsOfType(NumberType)),[Ops.Pow]:createParser(NumberType,withArgsCount(2,2),parseArgsOfType(NumberType)),[Ops.Abs]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Floor]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Ceil]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Round]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Sin]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Cos]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Atan]:createParser(NumberType,withArgsCount(1,2),parseArgsOfType(NumberType)),[Ops.Sqrt]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Match]:createParser((parsedArgs=>{let type=AnyType;for(let i=2;i<parsedArgs.length;i+=2)type&=parsedArgs[i].type;return type&=parsedArgs[parsedArgs.length-1].type,type}),withArgsCount(4,1/0),withEvenArgs,(function parseMatchArgs(encoded,context,parsedArgs,typeHint){const argsCount=encoded.length-1;let inputType=parse(encoded[1],context).type;const fallback=parse(encoded[encoded.length-1],context);let outputType=void 0!==typeHint?typeHint&fallback.type:fallback.type;const args=new Array(argsCount-2);for(let i=0;i<argsCount-2;i+=2){const match=parse(encoded[i+2],context),output=parse(encoded[i+3],context);inputType&=match.type,outputType&=output.type,args[i]=match,args[i+1]=output}const expectedInputType=StringType|NumberType|BooleanType;if(!overlapsType(expectedInputType,inputType))throw new Error(`Expected an input of type ${typeName(expectedInputType)} for the interpolate operation, got ${typeName(inputType)} instead`);if(isType(outputType,NoneType))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(encoded));for(let i=0;i<argsCount-2;i+=2){const match=parse(encoded[i+2],context,inputType),output=parse(encoded[i+3],context,outputType);args[i]=match,args[i+1]=output}return[parse(encoded[1],context,inputType),...args,parse(encoded[encoded.length-1],context,outputType)]})),[Ops.Between]:createParser(BooleanType,withArgsCount(3,3),parseArgsOfType(NumberType)),[Ops.Interpolate]:createParser((parsedArgs=>{let type=ColorType|NumberType;for(let i=3;i<parsedArgs.length;i+=2)type&=parsedArgs[i].type;return type}),withArgsCount(6,1/0),withEvenArgs,(function parseInterpolateArgs(encoded,context,parsedArgs,typeHint){const interpolationType=encoded[1];let interpolation;switch(interpolationType[0]){case"linear":interpolation=1;break;case"exponential":if(interpolation=interpolationType[1],"number"!=typeof interpolation)throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(interpolation)} instead`);break;default:interpolation=null}if(!interpolation)throw new Error(`Invalid interpolation type: ${JSON.stringify(interpolationType)}`);interpolation=parse(interpolation,context);let input=parse(encoded[2],context);if(!overlapsType(NumberType,input.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${typeName(input.type)} instead`);input=parse(encoded[2],context,NumberType);const args=new Array(encoded.length-3);for(let i=0;i<args.length;i+=2){let stop=parse(encoded[i+3],context);if(!overlapsType(NumberType,stop.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${typeName(stop.type)} at position ${i+2} instead`);let output=parse(encoded[i+4],context);if(!overlapsType(NumberType|ColorType,output.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${typeName(output.type)} at position ${i+3} instead`);stop=parse(encoded[i+3],context,NumberType),output=parse(encoded[i+4],context,NumberType|ColorType),args[i]=stop,args[i+1]=output}return[interpolation,input,...args]})),[Ops.Case]:createParser((parsedArgs=>{let type=AnyType;for(let i=1;i<parsedArgs.length;i+=2)type&=parsedArgs[i].type;return type&=parsedArgs[parsedArgs.length-1].type,type}),withArgsCount(3,1/0),(function withOddArgs(encoded,context){const operation=encoded[0],argCount=encoded.length-1;if(argCount%2==0)throw new Error(`An odd amount of arguments was expected for operation ${operation}, got ${JSON.stringify(argCount)} instead`)}),(function parseCaseArgs(encoded,context,parsedArgs,typeHint){const fallback=parse(encoded[encoded.length-1],context);let outputType=void 0!==typeHint?typeHint&fallback.type:fallback.type;const args=new Array(encoded.length-1);for(let i=0;i<args.length-1;i+=2){const condition=parse(encoded[i+1],context),output=parse(encoded[i+2],context);if(!overlapsType(BooleanType,condition.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${typeName(condition.type)} at position ${i} instead`);outputType&=output.type,args[i]=condition,args[i+1]=output}if(isType(outputType,NoneType))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(encoded));for(let i=0;i<args.length-1;i+=2)args[i+1]=parse(encoded[i+2],context,outputType);return args[args.length-1]=parse(encoded[encoded.length-1],context,outputType),args})),[Ops.In]:createParser(BooleanType,withArgsCount(2,2),(function parseInArgs(encoded,context){let haystack=encoded[2];if(!Array.isArray(haystack))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof haystack[0]){if("literal"!==haystack[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(haystack[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');haystack=haystack[1]}let needleType=StringType|NumberType;const args=new Array(haystack.length);for(let i=0;i<args.length;i++){const arg=parse(haystack[i],context);needleType&=arg.type,args[i]=arg}if(isType(needleType,NoneType))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(encoded));return[parse(encoded[1],context,needleType),...args]})),[Ops.Number]:createParser(NumberType,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.String]:createParser(StringType,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.Array]:createParser((parsedArgs=>3===parsedArgs.length||4===parsedArgs.length?NumberArrayType|ColorType:NumberArrayType),withArgsCount(1,1/0),parseArgsOfType(NumberType)),[Ops.Color]:createParser(ColorType,withArgsCount(3,4),parseArgsOfType(NumberType)),[Ops.Band]:createParser(NumberType,withArgsCount(1,3),parseArgsOfType(NumberType)),[Ops.Palette]:createParser(ColorType,withArgsCount(2,2),(function parsePaletteArgs(encoded,context){const index=parse(encoded[1],context,NumberType);if(index.type!==NumberType)throw new Error(`The first argument of palette must be an number, got ${typeName(index.type)} instead`);const colors=encoded[2];if(!Array.isArray(colors))throw new Error("The second argument of palette must be an array");const parsedColors=new Array(colors.length);for(let i=0;i<parsedColors.length;i++){const color=parse(colors[i],context,ColorType);if(!(color instanceof LiteralExpression))throw new Error(`The palette color at index ${i} must be a literal value`);if(!overlapsType(color.type,ColorType))throw new Error(`The palette color at index ${i} should be of type color, got ${typeName(color.type)} instead`);parsedColors[i]=color}return[index,...parsedColors]}))};function withNoArgs(encoded,context){const operation=encoded[0];if(1!==encoded.length)throw new Error(`Expected no arguments for ${operation} operation`);return[]}function withArgsCount(minArgs,maxArgs){return function(encoded,context){const operation=encoded[0],argCount=encoded.length-1;if(minArgs===maxArgs){if(argCount!==minArgs){throw new Error(`Expected ${minArgs} argument${1===minArgs?"":"s"} for ${operation}, got ${argCount}`)}}else if(argCount<minArgs||argCount>maxArgs){throw new Error(`Expected ${maxArgs===1/0?`${minArgs} or more`:`${minArgs} to ${maxArgs}`} arguments for ${operation}, got ${argCount}`)}}}function parseArgsOfType(argType){return function(encoded,context){const operation=encoded[0],argCount=encoded.length-1,args=new Array(argCount);for(let i=0;i<argCount;++i){const expression=parse(encoded[i+1],context);if(!overlapsType(argType,expression.type)){const gotType=typeName(argType),expectedType=typeName(expression.type);throw new Error(`Unexpected type for argument ${i} of ${operation} operation, got ${gotType} but expected ${expectedType}`)}expression.type&=argType,args[i]=expression}return args}}function narrowArgsType(encoded,context,parsedArgs){const operation=encoded[0],argCount=encoded.length-1;let sameType=AnyType;for(let i=0;i<parsedArgs.length;++i)sameType&=parsedArgs[i].type;if(sameType===NoneType)throw new Error(`No common type could be found for arguments of ${operation} operation`);const args=new Array(argCount);for(let i=0;i<argCount;++i)args[i]=parse(encoded[i+1],context,sameType);return args}function withEvenArgs(encoded,context){const operation=encoded[0],argCount=encoded.length-1;if(argCount%2==1)throw new Error(`An even amount of arguments was expected for operation ${operation}, got ${JSON.stringify(argCount)} instead`)}function createParser(returnType,...argValidators){return function(encoded,context,typeHint){const operator=encoded[0];let parsedArgs=[];for(let i=0;i<argValidators.length;i++)parsedArgs=argValidators[i](encoded,context,parsedArgs,typeHint)||parsedArgs;let actualType="function"==typeof returnType?returnType(parsedArgs):returnType;if(void 0!==typeHint){if(!overlapsType(actualType,typeHint))throw new Error(`The following expression was expected to return ${typeName(typeHint)}, but returns ${typeName(actualType)} instead: ${JSON.stringify(encoded)}`);actualType&=typeHint}if(actualType===NoneType)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(encoded)}`);return new CallExpression(actualType,operator,...parsedArgs)}}function buildExpression(encoded,type,context){const expression=parse(encoded,context);if(!overlapsType(type,expression.type)){const expected=typeName(type),actual=typeName(expression.type);throw new Error(`Expected expression to be of type ${expected}, got ${actual}`)}return compileExpression(expression,context)}function compileExpression(expression,context){if(expression instanceof LiteralExpression){if(expression.type===ColorType&&"string"==typeof expression.value){const colorValue=(0,color.mL)(expression.value);return function(){return colorValue}}return function(){return expression.value}}const operator=expression.operator;switch(operator){case Ops.Number:case Ops.String:return function compileAssertionExpression(expression,context){const type=expression.operator,length=expression.args.length,args=new Array(length);for(let i=0;i<length;++i)args[i]=compileExpression(expression.args[i],context);switch(type){case Ops.Number:case Ops.String:return context=>{for(let i=0;i<length;++i){const value=args[i](context);if(typeof value===type)return value}throw new Error(`Expected one of the values to be a ${type}`)};default:throw new Error(`Unsupported assertion operator ${type}`)}}(expression,context);case Ops.Get:case Ops.Var:return function compileAccessorExpression(expression,context){const nameExpression=expression.args[0],name=nameExpression.value;switch(expression.operator){case Ops.Get:return context=>context.properties[name];case Ops.Var:return context=>context.variables[name];default:throw new Error(`Unsupported accessor operator ${expression.operator}`)}}(expression);case Ops.Id:return expression=>expression.featureId;case Ops.Concat:{const args=expression.args.map((e=>compileExpression(e,context)));return context=>"".concat(...args.map((arg=>arg(context).toString())))}case Ops.Resolution:return context=>context.resolution;case Ops.Any:case Ops.All:case Ops.Not:return function compileLogicalExpression(expression,context){const op=expression.operator,length=expression.args.length,args=new Array(length);for(let i=0;i<length;++i)args[i]=compileExpression(expression.args[i],context);switch(op){case Ops.Any:return context=>{for(let i=0;i<length;++i)if(args[i](context))return!0;return!1};case Ops.All:return context=>{for(let i=0;i<length;++i)if(!args[i](context))return!1;return!0};case Ops.Not:return context=>!args[0](context);default:throw new Error(`Unsupported logical operator ${op}`)}}(expression,context);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return function compileComparisonExpression(expression,context){const op=expression.operator,left=compileExpression(expression.args[0],context),right=compileExpression(expression.args[1],context);switch(op){case Ops.Equal:return context=>left(context)===right(context);case Ops.NotEqual:return context=>left(context)!==right(context);case Ops.LessThan:return context=>left(context)<right(context);case Ops.LessThanOrEqualTo:return context=>left(context)<=right(context);case Ops.GreaterThan:return context=>left(context)>right(context);case Ops.GreaterThanOrEqualTo:return context=>left(context)>=right(context);default:throw new Error(`Unsupported comparison operator ${op}`)}}(expression,context);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return function compileNumericExpression(expression,context){const op=expression.operator,length=expression.args.length,args=new Array(length);for(let i=0;i<length;++i)args[i]=compileExpression(expression.args[i],context);switch(op){case Ops.Multiply:return context=>{let value=1;for(let i=0;i<length;++i)value*=args[i](context);return value};case Ops.Divide:return context=>args[0](context)/args[1](context);case Ops.Add:return context=>{let value=0;for(let i=0;i<length;++i)value+=args[i](context);return value};case Ops.Subtract:return context=>args[0](context)-args[1](context);case Ops.Clamp:return context=>{const value=args[0](context),min=args[1](context);if(value<min)return min;const max=args[2](context);return value>max?max:value};case Ops.Mod:return context=>args[0](context)%args[1](context);case Ops.Pow:return context=>Math.pow(args[0](context),args[1](context));case Ops.Abs:return context=>Math.abs(args[0](context));case Ops.Floor:return context=>Math.floor(args[0](context));case Ops.Ceil:return context=>Math.ceil(args[0](context));case Ops.Round:return context=>Math.round(args[0](context));case Ops.Sin:return context=>Math.sin(args[0](context));case Ops.Cos:return context=>Math.cos(args[0](context));case Ops.Atan:return 2===length?context=>Math.atan2(args[0](context),args[1](context)):context=>Math.atan(args[0](context));case Ops.Sqrt:return context=>Math.sqrt(args[0](context));default:throw new Error(`Unsupported numeric operator ${op}`)}}(expression,context);case Ops.Match:return function compileMatchExpression(expression,context){const length=expression.args.length,args=new Array(length);for(let i=0;i<length;++i)args[i]=compileExpression(expression.args[i],context);return context=>{const value=args[0](context);for(let i=1;i<length;i+=2)if(value===args[i](context))return args[i+1](context);return args[length-1](context)}}(expression,context);case Ops.Interpolate:return function compileInterpolateExpression(expression,context){const length=expression.args.length,args=new Array(length);for(let i=0;i<length;++i)args[i]=compileExpression(expression.args[i],context);return context=>{const base=args[0](context),value=args[1](context);let previousInput,previousOutput;for(let i=2;i<length;i+=2){const input=args[i](context);let output=args[i+1](context);const isColor=Array.isArray(output);if(isColor&&(output=(0,color.fG)(output)),input>=value)return 2===i?output:isColor?interpolateColor(base,value,previousInput,previousOutput,input,output):interpolateNumber(base,value,previousInput,previousOutput,input,output);previousInput=input,previousOutput=output}return previousOutput}}(expression,context);default:throw new Error(`Unsupported operator ${operator}`)}}function interpolateNumber(base,value,input1,output1,input2,output2){const delta=input2-input1;if(0===delta)return output1;const along=value-input1;return output1+(1===base?along/delta:(Math.pow(base,along)-1)/(Math.pow(base,delta)-1))*(output2-output1)}function interpolateColor(base,value,input1,rgba1,input2,rgba2){if(0===input2-input1)return rgba1;const lcha1=(0,color.WV)(rgba1),lcha2=(0,color.WV)(rgba2);let deltaHue=lcha2[2]-lcha1[2];deltaHue>180?deltaHue-=360:deltaHue<-180&&(deltaHue+=360);const lcha=[interpolateNumber(base,value,input1,lcha1[0],input2,lcha2[0]),interpolateNumber(base,value,input1,lcha1[1],input2,lcha2[1]),lcha1[2]+interpolateNumber(base,value,input1,0,input2,deltaHue),interpolateNumber(base,value,input1,rgba1[3],input2,rgba2[3])];return(0,color.Fv)((0,color.TF)(lcha))}var obj=__webpack_require__("./node_modules/ol/obj.js");function always(context){return!0}function rulesToStyleFunction(rules){const parsingContext=newParsingContext(),evaluator=function buildRuleSet(rules,context){const length=rules.length,compiledRules=new Array(length);for(let i=0;i<length;++i){const rule=rules[i],filter="filter"in rule?buildExpression(rule.filter,BooleanType,context):always;let styles;if(Array.isArray(rule.style)){const styleLength=rule.style.length;styles=new Array(styleLength);for(let j=0;j<styleLength;++j)styles[j]=buildStyle(rule.style[j],context)}else styles=[buildStyle(rule.style,context)];compiledRules[i]={filter,styles}}return function(context){const styles=[];let someMatched=!1;for(let i=0;i<length;++i){if((0,compiledRules[i].filter)(context)&&(!rules[i].else||!someMatched)){someMatched=!0;for(const styleEvaluator of compiledRules[i].styles){const style=styleEvaluator(context);style&&styles.push(style)}}}return styles}}(rules,parsingContext),evaluationContext={variables:{},properties:{},resolution:NaN,featureId:null};return function(feature,resolution){if(evaluationContext.properties=feature.getPropertiesInternal(),evaluationContext.resolution=resolution,parsingContext.featureId){const id=feature.getId();evaluationContext.featureId=void 0!==id?id:null}return evaluator(evaluationContext)}}function flatStylesToStyleFunction(flatStyles){const parsingContext=newParsingContext(),length=flatStyles.length,evaluators=new Array(length);for(let i=0;i<length;++i)evaluators[i]=buildStyle(flatStyles[i],parsingContext);const evaluationContext={variables:{},properties:{},resolution:NaN,featureId:null},styles=new Array(length);return function(feature,resolution){if(evaluationContext.properties=feature.getPropertiesInternal(),evaluationContext.resolution=resolution,parsingContext.featureId){const id=feature.getId();evaluationContext.featureId=void 0!==id?id:null}let nonNullCount=0;for(let i=0;i<length;++i){const style=evaluators[i](evaluationContext);style&&(styles[nonNullCount]=style,nonNullCount+=1)}return styles.length=nonNullCount,styles}}function buildStyle(flatStyle,context){const evaluateFill=buildFill(flatStyle,"",context),evaluateStroke=buildStroke(flatStyle,"",context),evaluateText=function buildText(flatStyle,context){const prefix="text-",evaluateValue=stringEvaluator(flatStyle,prefix+"value",context);if(!evaluateValue)return null;const evaluateFill=buildFill(flatStyle,prefix,context),evaluateBackgroundFill=buildFill(flatStyle,prefix+"background-",context),evaluateStroke=buildStroke(flatStyle,prefix,context),evaluateBackgroundStroke=buildStroke(flatStyle,prefix+"background-",context),evaluateFont=stringEvaluator(flatStyle,prefix+"font",context),evaluateMaxAngle=numberEvaluator(flatStyle,prefix+"max-angle",context),evaluateOffsetX=numberEvaluator(flatStyle,prefix+"offset-x",context),evaluateOffsetY=numberEvaluator(flatStyle,prefix+"offset-y",context),evaluateOverflow=booleanEvaluator(flatStyle,prefix+"overflow",context),evaluatePlacement=stringEvaluator(flatStyle,prefix+"placement",context),evaluateRepeat=numberEvaluator(flatStyle,prefix+"repeat",context),evaluateScale=sizeLikeEvaluator(flatStyle,prefix+"scale",context),evaluateRotateWithView=booleanEvaluator(flatStyle,prefix+"rotate-with-view",context),evaluateRotation=numberEvaluator(flatStyle,prefix+"rotation",context),evaluateAlign=stringEvaluator(flatStyle,prefix+"align",context),evaluateJustify=stringEvaluator(flatStyle,prefix+"justify",context),evaluateBaseline=stringEvaluator(flatStyle,prefix+"baseline",context),evaluatePadding=numberArrayEvaluator(flatStyle,prefix+"padding",context),text=new style_Text({});return function(context){if(text.setText(evaluateValue(context)),evaluateFill&&text.setFill(evaluateFill(context)),evaluateBackgroundFill&&text.setBackgroundFill(evaluateBackgroundFill(context)),evaluateStroke&&text.setStroke(evaluateStroke(context)),evaluateBackgroundStroke&&text.setBackgroundStroke(evaluateBackgroundStroke(context)),evaluateFont&&text.setFont(evaluateFont(context)),evaluateMaxAngle&&text.setMaxAngle(evaluateMaxAngle(context)),evaluateOffsetX&&text.setOffsetX(evaluateOffsetX(context)),evaluateOffsetY&&text.setOffsetY(evaluateOffsetY(context)),evaluateOverflow&&text.setOverflow(evaluateOverflow(context)),evaluatePlacement){const placement=evaluatePlacement(context);if("point"!==placement&&"line"!==placement)throw new Error("Expected point or line for text-placement");text.setPlacement(placement)}if(evaluateRepeat&&text.setRepeat(evaluateRepeat(context)),evaluateScale&&text.setScale(evaluateScale(context)),evaluateRotateWithView&&text.setRotateWithView(evaluateRotateWithView(context)),evaluateRotation&&text.setRotation(evaluateRotation(context)),evaluateAlign){const textAlign=evaluateAlign(context);if("left"!==textAlign&&"center"!==textAlign&&"right"!==textAlign&&"end"!==textAlign&&"start"!==textAlign)throw new Error("Expected left, right, center, start, or end for text-align");text.setTextAlign(textAlign)}if(evaluateJustify){const justify=evaluateJustify(context);if("left"!==justify&&"right"!==justify&&"center"!==justify)throw new Error("Expected left, right, or center for text-justify");text.setJustify(justify)}if(evaluateBaseline){const textBaseline=evaluateBaseline(context);if("bottom"!==textBaseline&&"top"!==textBaseline&&"middle"!==textBaseline&&"alphabetic"!==textBaseline&&"hanging"!==textBaseline)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");text.setTextBaseline(textBaseline)}return evaluatePadding&&text.setPadding(evaluatePadding(context)),text}}(flatStyle,context),evaluateImage=function buildImage(flatStyle,context){if("icon-src"in flatStyle)return function buildIcon(flatStyle,context){const prefix="icon-",srcName=prefix+"src",src=requireString(flatStyle[srcName],srcName),evaluateAnchor=coordinateEvaluator(flatStyle,prefix+"anchor",context),evaluateScale=sizeLikeEvaluator(flatStyle,prefix+"scale",context),evaluateOpacity=numberEvaluator(flatStyle,prefix+"opacity",context),evaluateDisplacement=coordinateEvaluator(flatStyle,prefix+"displacement",context),evaluateRotation=numberEvaluator(flatStyle,prefix+"rotation",context),evaluateRotateWithView=booleanEvaluator(flatStyle,prefix+"rotate-with-view",context),anchorOrigin=optionalIconOrigin(flatStyle,prefix+"anchor-origin"),anchorXUnits=optionalIconAnchorUnits(flatStyle,prefix+"anchor-x-units"),anchorYUnits=optionalIconAnchorUnits(flatStyle,prefix+"anchor-y-units"),color=function optionalColorLike(flatStyle,property){const encoded=flatStyle[property];if(void 0===encoded)return;return requireColorLike(encoded,property)}(flatStyle,prefix+"color"),crossOrigin=function optionalString(flatStyle,property){const encoded=flatStyle[property];if(void 0===encoded)return;if("string"!=typeof encoded)throw new Error(`Expected a string for ${property}`);return encoded}(flatStyle,prefix+"cross-origin"),offset=function optionalNumberArray(flatStyle,property){const encoded=flatStyle[property];if(void 0===encoded)return;return requireNumberArray(encoded,property)}(flatStyle,prefix+"offset"),offsetOrigin=optionalIconOrigin(flatStyle,prefix+"offset-origin"),width=optionalNumber(flatStyle,prefix+"width"),height=optionalNumber(flatStyle,prefix+"height"),size=optionalSize(flatStyle,prefix+"size"),declutterMode=optionalDeclutterMode(flatStyle,prefix+"declutter"),icon=new style_Icon({src,anchorOrigin,anchorXUnits,anchorYUnits,color,crossOrigin,offset,offsetOrigin,height,width,size,declutterMode});return function(context){return evaluateOpacity&&icon.setOpacity(evaluateOpacity(context)),evaluateDisplacement&&icon.setDisplacement(evaluateDisplacement(context)),evaluateRotation&&icon.setRotation(evaluateRotation(context)),evaluateRotateWithView&&icon.setRotateWithView(evaluateRotateWithView(context)),evaluateScale&&icon.setScale(evaluateScale(context)),evaluateAnchor&&icon.setAnchor(evaluateAnchor(context)),icon}}(flatStyle,context);if("shape-points"in flatStyle)return function buildShape(flatStyle,context){const prefix="shape-",pointsName=prefix+"points",points=requireNumber(flatStyle[pointsName],pointsName),evaluateFill=buildFill(flatStyle,prefix,context),evaluateStroke=buildStroke(flatStyle,prefix,context),evaluateScale=sizeLikeEvaluator(flatStyle,prefix+"scale",context),evaluateDisplacement=coordinateEvaluator(flatStyle,prefix+"displacement",context),evaluateRotation=numberEvaluator(flatStyle,prefix+"rotation",context),evaluateRotateWithView=booleanEvaluator(flatStyle,prefix+"rotate-with-view",context),radius=optionalNumber(flatStyle,prefix+"radius"),radius1=optionalNumber(flatStyle,prefix+"radius1"),radius2=optionalNumber(flatStyle,prefix+"radius2"),angle=optionalNumber(flatStyle,prefix+"angle"),declutterMode=optionalDeclutterMode(flatStyle,prefix+"declutter-mode"),shape=new RegularShape.Z({points,radius,radius1,radius2,angle,declutterMode});return function(context){return evaluateFill&&shape.setFill(evaluateFill(context)),evaluateStroke&&shape.setStroke(evaluateStroke(context)),evaluateDisplacement&&shape.setDisplacement(evaluateDisplacement(context)),evaluateRotation&&shape.setRotation(evaluateRotation(context)),evaluateRotateWithView&&shape.setRotateWithView(evaluateRotateWithView(context)),evaluateScale&&shape.setScale(evaluateScale(context)),shape}}(flatStyle,context);if("circle-radius"in flatStyle)return function buildCircle(flatStyle,context){const prefix="circle-",evaluateFill=buildFill(flatStyle,prefix,context),evaluateStroke=buildStroke(flatStyle,prefix,context),evaluateRadius=numberEvaluator(flatStyle,prefix+"radius",context),evaluateScale=sizeLikeEvaluator(flatStyle,prefix+"scale",context),evaluateDisplacement=coordinateEvaluator(flatStyle,prefix+"displacement",context),evaluateRotation=numberEvaluator(flatStyle,prefix+"rotation",context),evaluateRotateWithView=booleanEvaluator(flatStyle,prefix+"rotate-with-view",context),declutterMode=optionalDeclutterMode(flatStyle,prefix+"declutter-mode"),circle=new Circle.Z({radius:5,declutterMode});return function(context){return evaluateRadius&&circle.setRadius(evaluateRadius(context)),evaluateFill&&circle.setFill(evaluateFill(context)),evaluateStroke&&circle.setStroke(evaluateStroke(context)),evaluateDisplacement&&circle.setDisplacement(evaluateDisplacement(context)),evaluateRotation&&circle.setRotation(evaluateRotation(context)),evaluateRotateWithView&&circle.setRotateWithView(evaluateRotateWithView(context)),evaluateScale&&circle.setScale(evaluateScale(context)),circle}}(flatStyle,context);return null}(flatStyle,context),evaluateZIndex=numberEvaluator(flatStyle,"z-index",context);if(!(evaluateFill||evaluateStroke||evaluateText||evaluateImage||(0,obj.x)(flatStyle)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(flatStyle));const style=new Style.ZP;return function(context){let empty=!0;if(evaluateFill){const fill=evaluateFill(context);fill&&(empty=!1),style.setFill(fill)}if(evaluateStroke){const stroke=evaluateStroke(context);stroke&&(empty=!1),style.setStroke(stroke)}if(evaluateText){const text=evaluateText(context);text&&(empty=!1),style.setText(text)}if(evaluateImage){const image=evaluateImage(context);image&&(empty=!1),style.setImage(image)}return evaluateZIndex&&style.setZIndex(evaluateZIndex(context)),empty?null:style}}function buildFill(flatStyle,prefix,context){const evaluateColor=colorLikeEvaluator(flatStyle,prefix+"fill-color",context);if(!evaluateColor)return null;const fill=new Fill.Z;return function(context){const color=evaluateColor(context);return"none"===color?null:(fill.setColor(color),fill)}}function buildStroke(flatStyle,prefix,context){const evaluateWidth=numberEvaluator(flatStyle,prefix+"stroke-width",context),evaluateColor=colorLikeEvaluator(flatStyle,prefix+"stroke-color",context);if(!evaluateWidth&&!evaluateColor)return null;const evaluateLineCap=stringEvaluator(flatStyle,prefix+"stroke-line-cap",context),evaluateLineJoin=stringEvaluator(flatStyle,prefix+"stroke-line-join",context),evaluateLineDash=numberArrayEvaluator(flatStyle,prefix+"stroke-line-dash",context),evaluateLineDashOffset=numberEvaluator(flatStyle,prefix+"stroke-line-dash-offset",context),evaluateMiterLimit=numberEvaluator(flatStyle,prefix+"stroke-miter-limit",context),stroke=new Stroke.Z;return function(context){if(evaluateColor){const color=evaluateColor(context);if("none"===color)return null;stroke.setColor(color)}if(evaluateWidth&&stroke.setWidth(evaluateWidth(context)),evaluateLineCap){const lineCap=evaluateLineCap(context);if("butt"!==lineCap&&"round"!==lineCap&&"square"!==lineCap)throw new Error("Expected butt, round, or square line cap");stroke.setLineCap(lineCap)}if(evaluateLineJoin){const lineJoin=evaluateLineJoin(context);if("bevel"!==lineJoin&&"round"!==lineJoin&&"miter"!==lineJoin)throw new Error("Expected bevel, round, or miter line join");stroke.setLineJoin(lineJoin)}return evaluateLineDash&&stroke.setLineDash(evaluateLineDash(context)),evaluateLineDashOffset&&stroke.setLineDashOffset(evaluateLineDashOffset(context)),evaluateMiterLimit&&stroke.setMiterLimit(evaluateMiterLimit(context)),stroke}}function numberEvaluator(flatStyle,name,context){if(!(name in flatStyle))return;const evaluator=buildExpression(flatStyle[name],NumberType,context);return function(context){return requireNumber(evaluator(context),name)}}function stringEvaluator(flatStyle,name,context){if(!(name in flatStyle))return null;const evaluator=buildExpression(flatStyle[name],StringType,context);return function(context){return requireString(evaluator(context),name)}}function booleanEvaluator(flatStyle,name,context){if(!(name in flatStyle))return null;const evaluator=buildExpression(flatStyle[name],BooleanType,context);return function(context){const value=evaluator(context);if("boolean"!=typeof value)throw new Error(`Expected a boolean for ${name}`);return value}}function colorLikeEvaluator(flatStyle,name,context){if(!(name in flatStyle))return null;const evaluator=buildExpression(flatStyle[name],ColorType|StringType,context);return function(context){return requireColorLike(evaluator(context),name)}}function numberArrayEvaluator(flatStyle,name,context){if(!(name in flatStyle))return null;const evaluator=buildExpression(flatStyle[name],NumberArrayType,context);return function(context){return requireNumberArray(evaluator(context),name)}}function coordinateEvaluator(flatStyle,name,context){if(!(name in flatStyle))return null;const evaluator=buildExpression(flatStyle[name],NumberArrayType,context);return function(context){const array=requireNumberArray(evaluator(context),name);if(2!==array.length)throw new Error(`Expected two numbers for ${name}`);return array}}function sizeLikeEvaluator(flatStyle,name,context){if(!(name in flatStyle))return null;const evaluator=buildExpression(flatStyle[name],NumberArrayType|NumberType,context);return function(context){return function requireSizeLike(value,property){if("number"==typeof value)return value;const size=requireNumberArray(value,property);if(2!==size.length)throw new Error(`Expected an array of two numbers for ${property}`);return size}(evaluator(context),name)}}function optionalNumber(flatStyle,property){const value=flatStyle[property];if(void 0!==value){if("number"!=typeof value)throw new Error(`Expected a number for ${property}`);return value}}function optionalSize(flatStyle,property){const encoded=flatStyle[property];if(void 0!==encoded){if("number"==typeof encoded)return(0,size.Pq)(encoded);if(!Array.isArray(encoded))throw new Error(`Expected a number or size array for ${property}`);if(2!==encoded.length||"number"!=typeof encoded[0]||"number"!=typeof encoded[1])throw new Error(`Expected a number or size array for ${property}`);return encoded}}function optionalIconOrigin(flatStyle,property){const encoded=flatStyle[property];if(void 0!==encoded){if("bottom-left"!==encoded&&"bottom-right"!==encoded&&"top-left"!==encoded&&"top-right"!==encoded)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${property}`);return encoded}}function optionalIconAnchorUnits(flatStyle,property){const encoded=flatStyle[property];if(void 0!==encoded){if("pixels"!==encoded&&"fraction"!==encoded)throw new Error(`Expected pixels or fraction for ${property}`);return encoded}}function optionalDeclutterMode(flatStyle,property){const encoded=flatStyle[property];if(void 0!==encoded){if("string"!=typeof encoded)throw new Error(`Expected a string for ${property}`);if("declutter"!==encoded&&"obstacle"!==encoded&&"none"!==encoded)throw new Error(`Expected declutter, obstacle, or none for ${property}`);return encoded}}function requireNumberArray(value,property){if(!Array.isArray(value))throw new Error(`Expected an array for ${property}`);const length=value.length;for(let i=0;i<length;++i)if("number"!=typeof value[i])throw new Error(`Expected an array of numbers for ${property}`);return value}function requireString(value,property){if("string"!=typeof value)throw new Error(`Expected a string for ${property}`);return value}function requireNumber(value,property){if("number"!=typeof value)throw new Error(`Expected a number for ${property}`);return value}function requireColorLike(value,property){if("string"==typeof value)return value;const array=requireNumberArray(value,property),length=array.length;if(length<3||length>4)throw new Error(`Expected a color with 3 or 4 values for ${property}`);return array}const Property_RENDER_ORDER="renderOrder";class BaseVectorLayer extends Layer.Z{constructor(options){options=options||{};const baseOptions=Object.assign({},options);delete baseOptions.style,delete baseOptions.renderBuffer,delete baseOptions.updateWhileAnimating,delete baseOptions.updateWhileInteracting,super(baseOptions),this.declutter_=void 0!==options.declutter&&options.declutter,this.renderBuffer_=void 0!==options.renderBuffer?options.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(options.style),this.updateWhileAnimating_=void 0!==options.updateWhileAnimating&&options.updateWhileAnimating,this.updateWhileInteracting_=void 0!==options.updateWhileInteracting&&options.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(pixel){return super.getFeatures(pixel)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property_RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(frameState){frameState.declutterTree||(frameState.declutterTree=new(rbush_min_default())(9)),this.getRenderer().renderDeclutter(frameState)}setRenderOrder(renderOrder){this.set(Property_RENDER_ORDER,renderOrder)}setStyle(style){this.style_=function toStyleLike(style){if(void 0===style)return Style.yF;if(!style)return null;if("function"==typeof style)return style;if(style instanceof Style.ZP)return style;if(!Array.isArray(style))return flatStylesToStyleFunction([style]);if(0===style.length)return[];const length=style.length,first=style[0];if(first instanceof Style.ZP){const styles=new Array(length);for(let i=0;i<length;++i){const candidate=style[i];if(!(candidate instanceof Style.ZP))throw new Error("Expected a list of style instances");styles[i]=candidate}return styles}if("style"in first){const rules=new Array(length);for(let i=0;i<length;++i){const candidate=style[i];if(!("style"in candidate))throw new Error("Expected a list of rules with a style property");rules[i]=candidate}return rulesToStyleFunction(rules)}const flatStyles=style;return flatStylesToStyleFunction(flatStyles)}(style),this.styleFunction_=null===style?void 0:(0,Style.J$)(this.style_),this.changed()}}const BaseVector=BaseVectorLayer,Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH],canvas_Instruction=Instruction;var Relationship=__webpack_require__("./node_modules/ol/extent/Relationship.js");const render_VectorContext=class VectorContext{drawCustom(geometry,feature,renderer,hitDetectionRenderer){}drawGeometry(geometry){}setStyle(style){}drawCircle(circleGeometry,feature){}drawFeature(feature,style){}drawGeometryCollection(geometryCollectionGeometry,feature){}drawLineString(lineStringGeometry,feature){}drawMultiLineString(multiLineStringGeometry,feature){}drawMultiPoint(multiPointGeometry,feature){}drawMultiPolygon(multiPolygonGeometry,feature){}drawPoint(pointGeometry,feature){}drawPolygon(polygonGeometry,feature){}drawText(geometry,feature){}setFillStrokeStyle(fillStyle,strokeStyle){}setImageStyle(imageStyle,declutterImageWithText){}setTextStyle(textStyle,declutterImageWithText){}};var colorlike=__webpack_require__("./node_modules/ol/colorlike.js"),ol_extent=__webpack_require__("./node_modules/ol/extent.js"),render_canvas=__webpack_require__("./node_modules/ol/render/canvas.js"),inflate=__webpack_require__("./node_modules/ol/geom/flat/inflate.js");const Builder=class CanvasBuilder extends render_VectorContext{constructor(tolerance,maxExtent,resolution,pixelRatio){super(),this.tolerance=tolerance,this.maxExtent=maxExtent,this.pixelRatio=pixelRatio,this.maxLineWidth=0,this.resolution=resolution,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(dashArray){const pixelRatio=this.pixelRatio;return 1==pixelRatio?dashArray:dashArray.map((function(dash){return dash*pixelRatio}))}appendFlatPointCoordinates(flatCoordinates,stride){const extent=this.getBufferedMaxExtent(),tmpCoord=this.tmpCoordinate_,coordinates=this.coordinates;let myEnd=coordinates.length;for(let i=0,ii=flatCoordinates.length;i<ii;i+=stride)tmpCoord[0]=flatCoordinates[i],tmpCoord[1]=flatCoordinates[i+1],(0,ol_extent.b8)(extent,tmpCoord)&&(coordinates[myEnd++]=tmpCoord[0],coordinates[myEnd++]=tmpCoord[1]);return myEnd}appendFlatLineCoordinates(flatCoordinates,offset,end,stride,closed,skipFirst){const coordinates=this.coordinates;let myEnd=coordinates.length;const extent=this.getBufferedMaxExtent();skipFirst&&(offset+=stride);let lastXCoord=flatCoordinates[offset],lastYCoord=flatCoordinates[offset+1];const nextCoord=this.tmpCoordinate_;let i,lastRel,nextRel,skipped=!0;for(i=offset+stride;i<end;i+=stride)nextCoord[0]=flatCoordinates[i],nextCoord[1]=flatCoordinates[i+1],nextRel=(0,ol_extent.pX)(extent,nextCoord),nextRel!==lastRel?(skipped&&(coordinates[myEnd++]=lastXCoord,coordinates[myEnd++]=lastYCoord,skipped=!1),coordinates[myEnd++]=nextCoord[0],coordinates[myEnd++]=nextCoord[1]):nextRel===Relationship.Z.INTERSECTING?(coordinates[myEnd++]=nextCoord[0],coordinates[myEnd++]=nextCoord[1],skipped=!1):skipped=!0,lastXCoord=nextCoord[0],lastYCoord=nextCoord[1],lastRel=nextRel;return(closed&&skipped||i===offset+stride)&&(coordinates[myEnd++]=lastXCoord,coordinates[myEnd++]=lastYCoord),myEnd}drawCustomCoordinates_(flatCoordinates,offset,ends,stride,builderEnds){for(let i=0,ii=ends.length;i<ii;++i){const end=ends[i],builderEnd=this.appendFlatLineCoordinates(flatCoordinates,offset,end,stride,!1,!1);builderEnds.push(builderEnd),offset=end}return offset}drawCustom(geometry,feature,renderer,hitDetectionRenderer){this.beginGeometry(geometry,feature);const type=geometry.getType(),stride=geometry.getStride(),builderBegin=this.coordinates.length;let flatCoordinates,builderEnd,builderEnds,builderEndss,offset;switch(type){case"MultiPolygon":flatCoordinates=geometry.getOrientedFlatCoordinates(),builderEndss=[];const endss=geometry.getEndss();offset=0;for(let i=0,ii=endss.length;i<ii;++i){const myEnds=[];offset=this.drawCustomCoordinates_(flatCoordinates,offset,endss[i],stride,myEnds),builderEndss.push(myEnds)}this.instructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEndss,geometry,renderer,inflate.ug]),this.hitDetectionInstructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEndss,geometry,hitDetectionRenderer||renderer,inflate.ug]);break;case"Polygon":case"MultiLineString":builderEnds=[],flatCoordinates="Polygon"==type?geometry.getOrientedFlatCoordinates():geometry.getFlatCoordinates(),offset=this.drawCustomCoordinates_(flatCoordinates,0,geometry.getEnds(),stride,builderEnds),this.instructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnds,geometry,renderer,inflate.o1]),this.hitDetectionInstructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnds,geometry,hitDetectionRenderer||renderer,inflate.o1]);break;case"LineString":case"Circle":flatCoordinates=geometry.getFlatCoordinates(),builderEnd=this.appendFlatLineCoordinates(flatCoordinates,0,flatCoordinates.length,stride,!1,!1),this.instructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnd,geometry,renderer,inflate.Ml]),this.hitDetectionInstructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnd,geometry,hitDetectionRenderer||renderer,inflate.Ml]);break;case"MultiPoint":flatCoordinates=geometry.getFlatCoordinates(),builderEnd=this.appendFlatPointCoordinates(flatCoordinates,stride),builderEnd>builderBegin&&(this.instructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnd,geometry,renderer,inflate.Ml]),this.hitDetectionInstructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnd,geometry,hitDetectionRenderer||renderer,inflate.Ml]));break;case"Point":flatCoordinates=geometry.getFlatCoordinates(),this.coordinates.push(flatCoordinates[0],flatCoordinates[1]),builderEnd=this.coordinates.length,this.instructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnd,geometry,renderer]),this.hitDetectionInstructions.push([canvas_Instruction.CUSTOM,builderBegin,builderEnd,geometry,hitDetectionRenderer||renderer])}this.endGeometry(feature)}beginGeometry(geometry,feature){this.beginGeometryInstruction1_=[canvas_Instruction.BEGIN_GEOMETRY,feature,0,geometry],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[canvas_Instruction.BEGIN_GEOMETRY,feature,0,geometry],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const hitDetectionInstructions=this.hitDetectionInstructions;let i;hitDetectionInstructions.reverse();const n=hitDetectionInstructions.length;let instruction,type,begin=-1;for(i=0;i<n;++i)instruction=hitDetectionInstructions[i],type=instruction[0],type==canvas_Instruction.END_GEOMETRY?begin=i:type==canvas_Instruction.BEGIN_GEOMETRY&&(instruction[2]=i,(0,array.FZ)(this.hitDetectionInstructions,begin,i),begin=-1)}setFillStrokeStyle(fillStyle,strokeStyle){const state=this.state;if(fillStyle){const fillStyleColor=fillStyle.getColor();state.fillStyle=(0,colorlike.y)(fillStyleColor||render_canvas.bL)}else state.fillStyle=void 0;if(strokeStyle){const strokeStyleColor=strokeStyle.getColor();state.strokeStyle=(0,colorlike.y)(strokeStyleColor||render_canvas.Tx);const strokeStyleLineCap=strokeStyle.getLineCap();state.lineCap=void 0!==strokeStyleLineCap?strokeStyleLineCap:render_canvas.mb;const strokeStyleLineDash=strokeStyle.getLineDash();state.lineDash=strokeStyleLineDash?strokeStyleLineDash.slice():render_canvas.X9;const strokeStyleLineDashOffset=strokeStyle.getLineDashOffset();state.lineDashOffset=strokeStyleLineDashOffset||render_canvas.He;const strokeStyleLineJoin=strokeStyle.getLineJoin();state.lineJoin=void 0!==strokeStyleLineJoin?strokeStyleLineJoin:render_canvas.rc;const strokeStyleWidth=strokeStyle.getWidth();state.lineWidth=void 0!==strokeStyleWidth?strokeStyleWidth:render_canvas.yC;const strokeStyleMiterLimit=strokeStyle.getMiterLimit();state.miterLimit=void 0!==strokeStyleMiterLimit?strokeStyleMiterLimit:render_canvas.V4,state.lineWidth>this.maxLineWidth&&(this.maxLineWidth=state.lineWidth,this.bufferedMaxExtent_=null)}else state.strokeStyle=void 0,state.lineCap=void 0,state.lineDash=null,state.lineDashOffset=void 0,state.lineJoin=void 0,state.lineWidth=void 0,state.miterLimit=void 0}createFill(state){const fillStyle=state.fillStyle,fillInstruction=[canvas_Instruction.SET_FILL_STYLE,fillStyle];return"string"!=typeof fillStyle&&fillInstruction.push(!0),fillInstruction}applyStroke(state){this.instructions.push(this.createStroke(state))}createStroke(state){return[canvas_Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth*this.pixelRatio,state.lineCap,state.lineJoin,state.miterLimit,this.applyPixelRatio(state.lineDash),state.lineDashOffset*this.pixelRatio]}updateFillStyle(state,createFill){const fillStyle=state.fillStyle;"string"==typeof fillStyle&&state.currentFillStyle==fillStyle||(void 0!==fillStyle&&this.instructions.push(createFill.call(this,state)),state.currentFillStyle=fillStyle)}updateStrokeStyle(state,applyStroke){const strokeStyle=state.strokeStyle,lineCap=state.lineCap,lineDash=state.lineDash,lineDashOffset=state.lineDashOffset,lineJoin=state.lineJoin,lineWidth=state.lineWidth,miterLimit=state.miterLimit;(state.currentStrokeStyle!=strokeStyle||state.currentLineCap!=lineCap||lineDash!=state.currentLineDash&&!(0,array.fS)(state.currentLineDash,lineDash)||state.currentLineDashOffset!=lineDashOffset||state.currentLineJoin!=lineJoin||state.currentLineWidth!=lineWidth||state.currentMiterLimit!=miterLimit)&&(void 0!==strokeStyle&&applyStroke.call(this,state),state.currentStrokeStyle=strokeStyle,state.currentLineCap=lineCap,state.currentLineDash=lineDash,state.currentLineDashOffset=lineDashOffset,state.currentLineJoin=lineJoin,state.currentLineWidth=lineWidth,state.currentMiterLimit=miterLimit)}endGeometry(feature){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const endGeometryInstruction=[canvas_Instruction.END_GEOMETRY,feature];this.instructions.push(endGeometryInstruction),this.hitDetectionInstructions.push(endGeometryInstruction)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,ol_extent.d9)(this.maxExtent),this.maxLineWidth>0)){const width=this.resolution*(this.maxLineWidth+1)/2;(0,ol_extent.f3)(this.bufferedMaxExtent_,width,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}};const ImageBuilder=class CanvasImageBuilder extends Builder{constructor(tolerance,maxExtent,resolution,pixelRatio){super(tolerance,maxExtent,resolution,pixelRatio),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(pointGeometry,feature){if(!this.image_)return;this.beginGeometry(pointGeometry,feature);const flatCoordinates=pointGeometry.getFlatCoordinates(),stride=pointGeometry.getStride(),myBegin=this.coordinates.length,myEnd=this.appendFlatPointCoordinates(flatCoordinates,stride);this.instructions.push([canvas_Instruction.DRAW_IMAGE,myBegin,myEnd,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([canvas_Instruction.DRAW_IMAGE,myBegin,myEnd,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(feature)}drawMultiPoint(multiPointGeometry,feature){if(!this.image_)return;this.beginGeometry(multiPointGeometry,feature);const flatCoordinates=multiPointGeometry.getFlatCoordinates(),stride=multiPointGeometry.getStride(),myBegin=this.coordinates.length,myEnd=this.appendFlatPointCoordinates(flatCoordinates,stride);this.instructions.push([canvas_Instruction.DRAW_IMAGE,myBegin,myEnd,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([canvas_Instruction.DRAW_IMAGE,myBegin,myEnd,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(feature)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(imageStyle,sharedData){const anchor=imageStyle.getAnchor(),size=imageStyle.getSize(),origin=imageStyle.getOrigin();this.imagePixelRatio_=imageStyle.getPixelRatio(this.pixelRatio),this.anchorX_=anchor[0],this.anchorY_=anchor[1],this.hitDetectionImage_=imageStyle.getHitDetectionImage(),this.image_=imageStyle.getImage(this.pixelRatio),this.height_=size[1],this.opacity_=imageStyle.getOpacity(),this.originX_=origin[0],this.originY_=origin[1],this.rotateWithView_=imageStyle.getRotateWithView(),this.rotation_=imageStyle.getRotation(),this.scale_=imageStyle.getScaleArray(),this.width_=size[0],this.declutterMode_=imageStyle.getDeclutterMode(),this.declutterImageWithText_=sharedData}};const LineStringBuilder=class CanvasLineStringBuilder extends Builder{constructor(tolerance,maxExtent,resolution,pixelRatio){super(tolerance,maxExtent,resolution,pixelRatio)}drawFlatCoordinates_(flatCoordinates,offset,end,stride){const myBegin=this.coordinates.length,myEnd=this.appendFlatLineCoordinates(flatCoordinates,offset,end,stride,!1,!1),moveToLineToInstruction=[canvas_Instruction.MOVE_TO_LINE_TO,myBegin,myEnd];return this.instructions.push(moveToLineToInstruction),this.hitDetectionInstructions.push(moveToLineToInstruction),end}drawLineString(lineStringGeometry,feature){const state=this.state,strokeStyle=state.strokeStyle,lineWidth=state.lineWidth;if(void 0===strokeStyle||void 0===lineWidth)return;this.updateStrokeStyle(state,this.applyStroke),this.beginGeometry(lineStringGeometry,feature),this.hitDetectionInstructions.push([canvas_Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,render_canvas.X9,render_canvas.He],beginPathInstruction);const flatCoordinates=lineStringGeometry.getFlatCoordinates(),stride=lineStringGeometry.getStride();this.drawFlatCoordinates_(flatCoordinates,0,flatCoordinates.length,stride),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(feature)}drawMultiLineString(multiLineStringGeometry,feature){const state=this.state,strokeStyle=state.strokeStyle,lineWidth=state.lineWidth;if(void 0===strokeStyle||void 0===lineWidth)return;this.updateStrokeStyle(state,this.applyStroke),this.beginGeometry(multiLineStringGeometry,feature),this.hitDetectionInstructions.push([canvas_Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,render_canvas.X9,render_canvas.He],beginPathInstruction);const ends=multiLineStringGeometry.getEnds(),flatCoordinates=multiLineStringGeometry.getFlatCoordinates(),stride=multiLineStringGeometry.getStride();let offset=0;for(let i=0,ii=ends.length;i<ii;++i)offset=this.drawFlatCoordinates_(flatCoordinates,offset,ends[i],stride);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(feature)}finish(){const state=this.state;return null!=state.lastStroke&&state.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(state){null!=state.lastStroke&&state.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),state.lastStroke=this.coordinates.length),state.lastStroke=0,super.applyStroke(state),this.instructions.push(beginPathInstruction)}};var simplify=__webpack_require__("./node_modules/ol/geom/flat/simplify.js");const PolygonBuilder=class CanvasPolygonBuilder extends Builder{constructor(tolerance,maxExtent,resolution,pixelRatio){super(tolerance,maxExtent,resolution,pixelRatio)}drawFlatCoordinatess_(flatCoordinates,offset,ends,stride){const state=this.state,fill=void 0!==state.fillStyle,stroke=void 0!==state.strokeStyle,numEnds=ends.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let i=0;i<numEnds;++i){const end=ends[i],myBegin=this.coordinates.length,myEnd=this.appendFlatLineCoordinates(flatCoordinates,offset,end,stride,!0,!stroke),moveToLineToInstruction=[canvas_Instruction.MOVE_TO_LINE_TO,myBegin,myEnd];this.instructions.push(moveToLineToInstruction),this.hitDetectionInstructions.push(moveToLineToInstruction),stroke&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),offset=end}return fill&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),stroke&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),offset}drawCircle(circleGeometry,feature){const state=this.state,fillStyle=state.fillStyle,strokeStyle=state.strokeStyle;if(void 0===fillStyle&&void 0===strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(circleGeometry,feature),void 0!==state.fillStyle&&this.hitDetectionInstructions.push([canvas_Instruction.SET_FILL_STYLE,render_canvas.bL]),void 0!==state.strokeStyle&&this.hitDetectionInstructions.push([canvas_Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,render_canvas.X9,render_canvas.He]);const flatCoordinates=circleGeometry.getFlatCoordinates(),stride=circleGeometry.getStride(),myBegin=this.coordinates.length;this.appendFlatLineCoordinates(flatCoordinates,0,flatCoordinates.length,stride,!1,!1);const circleInstruction=[canvas_Instruction.CIRCLE,myBegin];this.instructions.push(beginPathInstruction,circleInstruction),this.hitDetectionInstructions.push(beginPathInstruction,circleInstruction),void 0!==state.fillStyle&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),void 0!==state.strokeStyle&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(feature)}drawPolygon(polygonGeometry,feature){const state=this.state,fillStyle=state.fillStyle,strokeStyle=state.strokeStyle;if(void 0===fillStyle&&void 0===strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(polygonGeometry,feature),void 0!==state.fillStyle&&this.hitDetectionInstructions.push([canvas_Instruction.SET_FILL_STYLE,render_canvas.bL]),void 0!==state.strokeStyle&&this.hitDetectionInstructions.push([canvas_Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,render_canvas.X9,render_canvas.He]);const ends=polygonGeometry.getEnds(),flatCoordinates=polygonGeometry.getOrientedFlatCoordinates(),stride=polygonGeometry.getStride();this.drawFlatCoordinatess_(flatCoordinates,0,ends,stride),this.endGeometry(feature)}drawMultiPolygon(multiPolygonGeometry,feature){const state=this.state,fillStyle=state.fillStyle,strokeStyle=state.strokeStyle;if(void 0===fillStyle&&void 0===strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(multiPolygonGeometry,feature),void 0!==state.fillStyle&&this.hitDetectionInstructions.push([canvas_Instruction.SET_FILL_STYLE,render_canvas.bL]),void 0!==state.strokeStyle&&this.hitDetectionInstructions.push([canvas_Instruction.SET_STROKE_STYLE,state.strokeStyle,state.lineWidth,state.lineCap,state.lineJoin,state.miterLimit,render_canvas.X9,render_canvas.He]);const endss=multiPolygonGeometry.getEndss(),flatCoordinates=multiPolygonGeometry.getOrientedFlatCoordinates(),stride=multiPolygonGeometry.getStride();let offset=0;for(let i=0,ii=endss.length;i<ii;++i)offset=this.drawFlatCoordinatess_(flatCoordinates,offset,endss[i],stride);this.endGeometry(feature)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const tolerance=this.tolerance;if(0!==tolerance){const coordinates=this.coordinates;for(let i=0,ii=coordinates.length;i<ii;++i)coordinates[i]=(0,simplify.uZ)(coordinates[i],tolerance)}return super.finish()}setFillStrokeStyles_(){const state=this.state;void 0!==state.fillStyle&&this.updateFillStyle(state,this.createFill),void 0!==state.strokeStyle&&this.updateStrokeStyle(state,this.applyStroke)}};var math=__webpack_require__("./node_modules/ol/math.js");function lineChunk(chunkLength,flatCoordinates,offset,end,stride){const chunks=[];let cursor=offset,chunkM=0,currentChunk=flatCoordinates.slice(offset,2);for(;chunkM<chunkLength&&cursor+stride<end;){const[x1,y1]=currentChunk.slice(-2),x2=flatCoordinates[cursor+stride],y2=flatCoordinates[cursor+stride+1],segmentLength=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));if(chunkM+=segmentLength,chunkM>=chunkLength){const m=(chunkLength-chunkM+segmentLength)/segmentLength,x=(0,math.t7)(x1,x2,m),y=(0,math.t7)(y1,y2,m);currentChunk.push(x,y),chunks.push(currentChunk),currentChunk=[x,y],chunkM==chunkLength&&(cursor+=stride),chunkM=0}else if(chunkM<chunkLength)currentChunk.push(flatCoordinates[cursor+stride],flatCoordinates[cursor+stride+1]),cursor+=stride;else{const missing=segmentLength-chunkM,x=(0,math.t7)(x1,x2,missing/segmentLength),y=(0,math.t7)(y1,y2,missing/segmentLength);currentChunk.push(x,y),chunks.push(currentChunk),currentChunk=[x,y],chunkM=0,cursor+=stride}}return chunkM>0&&chunks.push(currentChunk),chunks}function matchingChunk(maxAngle,flatCoordinates,offset,end,stride){let acos,i,m12,m23,x1,y1,x12,y12,x23,y23,chunkStart=offset,chunkEnd=offset,chunkM=0,m=0,start=offset;for(i=offset;i<end;i+=stride){const x2=flatCoordinates[i],y2=flatCoordinates[i+1];void 0!==x1&&(x23=x2-x1,y23=y2-y1,m23=Math.sqrt(x23*x23+y23*y23),void 0!==x12&&(m+=m12,acos=Math.acos((x12*x23+y12*y23)/(m12*m23)),acos>maxAngle&&(m>chunkM&&(chunkM=m,chunkStart=start,chunkEnd=i),m=0,start=i-stride)),m12=m23,x12=x23,y12=y23),x1=x2,y1=y2}return m+=m23,m>chunkM?[start,i]:[chunkStart,chunkEnd]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};const TextBuilder=class CanvasTextBuilder extends Builder{constructor(tolerance,maxExtent,resolution,pixelRatio){super(tolerance,maxExtent,resolution,pixelRatio),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[render_canvas.bL]={fillStyle:render_canvas.bL},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const instructions=super.finish();return instructions.textStates=this.textStates,instructions.fillStates=this.fillStates,instructions.strokeStates=this.strokeStates,instructions}drawText(geometry,feature){const fillState=this.textFillState_,strokeState=this.textStrokeState_,textState=this.textState_;if(""===this.text_||!textState||!fillState&&!strokeState)return;const coordinates=this.coordinates;let begin=coordinates.length;const geometryType=geometry.getType();let flatCoordinates=null,stride=geometry.getStride();if("line"!==textState.placement||"LineString"!=geometryType&&"MultiLineString"!=geometryType&&"Polygon"!=geometryType&&"MultiPolygon"!=geometryType){let geometryWidths=textState.overflow?null:[];switch(geometryType){case"Point":case"MultiPoint":flatCoordinates=geometry.getFlatCoordinates();break;case"LineString":flatCoordinates=geometry.getFlatMidpoint();break;case"Circle":flatCoordinates=geometry.getCenter();break;case"MultiLineString":flatCoordinates=geometry.getFlatMidpoints(),stride=2;break;case"Polygon":flatCoordinates=geometry.getFlatInteriorPoint(),textState.overflow||geometryWidths.push(flatCoordinates[2]/this.resolution),stride=3;break;case"MultiPolygon":const interiorPoints=geometry.getFlatInteriorPoints();flatCoordinates=[];for(let i=0,ii=interiorPoints.length;i<ii;i+=3)textState.overflow||geometryWidths.push(interiorPoints[i+2]/this.resolution),flatCoordinates.push(interiorPoints[i],interiorPoints[i+1]);if(0===flatCoordinates.length)return;stride=2}const end=this.appendFlatPointCoordinates(flatCoordinates,stride);if(end===begin)return;if(geometryWidths&&(end-begin)/2!=flatCoordinates.length/stride){let beg=begin/2;geometryWidths=geometryWidths.filter(((w,i)=>{const keep=coordinates[2*(beg+i)]===flatCoordinates[i*stride]&&coordinates[2*(beg+i)+1]===flatCoordinates[i*stride+1];return keep||--beg,keep}))}this.saveTextStates_(),(textState.backgroundFill||textState.backgroundStroke)&&(this.setFillStrokeStyle(textState.backgroundFill,textState.backgroundStroke),textState.backgroundFill&&this.updateFillStyle(this.state,this.createFill),textState.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(geometry,feature);let padding=textState.padding;if(padding!=render_canvas.oB&&(textState.scale[0]<0||textState.scale[1]<0)){let p0=textState.padding[0],p1=textState.padding[1],p2=textState.padding[2],p3=textState.padding[3];textState.scale[0]<0&&(p1=-p1,p3=-p3),textState.scale[1]<0&&(p0=-p0,p2=-p2),padding=[p0,p1,p2,p3]}const pixelRatio=this.pixelRatio;this.instructions.push([canvas_Instruction.DRAW_IMAGE,begin,end,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,padding==render_canvas.oB?render_canvas.oB:padding.map((function(p){return p*pixelRatio})),!!textState.backgroundFill,!!textState.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,geometryWidths]);const scale=1/pixelRatio,currentFillStyle=this.state.fillStyle;textState.backgroundFill&&(this.state.fillStyle=render_canvas.bL,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([canvas_Instruction.DRAW_IMAGE,begin,end,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[scale,scale],NaN,void 0,this.declutterImageWithText_,padding,!!textState.backgroundFill,!!textState.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?render_canvas.bL:this.fillKey_,this.textOffsetX_,this.textOffsetY_,geometryWidths]),textState.backgroundFill&&(this.state.fillStyle=currentFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(feature)}else{if(!(0,ol_extent.kK)(this.getBufferedMaxExtent(),geometry.getExtent()))return;let ends;if(flatCoordinates=geometry.getFlatCoordinates(),"LineString"==geometryType)ends=[flatCoordinates.length];else if("MultiLineString"==geometryType)ends=geometry.getEnds();else if("Polygon"==geometryType)ends=geometry.getEnds().slice(0,1);else if("MultiPolygon"==geometryType){const endss=geometry.getEndss();ends=[];for(let i=0,ii=endss.length;i<ii;++i)ends.push(endss[i][0])}this.beginGeometry(geometry,feature);const repeat=textState.repeat,textAlign=repeat?void 0:textState.textAlign;let flatOffset=0;for(let o=0,oo=ends.length;o<oo;++o){let chunks;chunks=repeat?lineChunk(repeat*this.resolution,flatCoordinates,flatOffset,ends[o],stride):[flatCoordinates.slice(flatOffset,ends[o])];for(let c=0,cc=chunks.length;c<cc;++c){const chunk=chunks[c];let chunkBegin=0,chunkEnd=chunk.length;if(null==textAlign){const range=matchingChunk(textState.maxAngle,chunk,0,chunk.length,2);chunkBegin=range[0],chunkEnd=range[1]}for(let i=chunkBegin;i<chunkEnd;i+=stride)coordinates.push(chunk[i],chunk[i+1]);const end=coordinates.length;flatOffset=ends[o],this.drawChars_(begin,end),begin=end}}this.endGeometry(feature)}}saveTextStates_(){const strokeState=this.textStrokeState_,textState=this.textState_,fillState=this.textFillState_,strokeKey=this.strokeKey_;strokeState&&(strokeKey in this.strokeStates||(this.strokeStates[strokeKey]={strokeStyle:strokeState.strokeStyle,lineCap:strokeState.lineCap,lineDashOffset:strokeState.lineDashOffset,lineWidth:strokeState.lineWidth,lineJoin:strokeState.lineJoin,miterLimit:strokeState.miterLimit,lineDash:strokeState.lineDash}));const textKey=this.textKey_;textKey in this.textStates||(this.textStates[textKey]={font:textState.font,textAlign:textState.textAlign||render_canvas.PH,justify:textState.justify,textBaseline:textState.textBaseline||render_canvas.ru,scale:textState.scale});const fillKey=this.fillKey_;fillState&&(fillKey in this.fillStates||(this.fillStates[fillKey]={fillStyle:fillState.fillStyle}))}drawChars_(begin,end){const strokeState=this.textStrokeState_,textState=this.textState_,strokeKey=this.strokeKey_,textKey=this.textKey_,fillKey=this.fillKey_;this.saveTextStates_();const pixelRatio=this.pixelRatio,baseline=TEXT_ALIGN[textState.textBaseline],offsetY=this.textOffsetY_*pixelRatio,text=this.text_,strokeWidth=strokeState?strokeState.lineWidth*Math.abs(textState.scale[0])/2:0;this.instructions.push([canvas_Instruction.DRAW_CHARS,begin,end,baseline,textState.overflow,fillKey,textState.maxAngle,pixelRatio,offsetY,strokeKey,strokeWidth*pixelRatio,text,textKey,1]),this.hitDetectionInstructions.push([canvas_Instruction.DRAW_CHARS,begin,end,baseline,textState.overflow,fillKey?render_canvas.bL:fillKey,textState.maxAngle,pixelRatio,offsetY,strokeKey,strokeWidth*pixelRatio,text,textKey,1/pixelRatio])}setTextStyle(textStyle,sharedData){let textState,fillState,strokeState;if(textStyle){const textFillStyle=textStyle.getFill();textFillStyle?(fillState=this.textFillState_,fillState||(fillState={},this.textFillState_=fillState),fillState.fillStyle=(0,colorlike.y)(textFillStyle.getColor()||render_canvas.bL)):(fillState=null,this.textFillState_=fillState);const textStrokeStyle=textStyle.getStroke();if(textStrokeStyle){strokeState=this.textStrokeState_,strokeState||(strokeState={},this.textStrokeState_=strokeState);const lineDash=textStrokeStyle.getLineDash(),lineDashOffset=textStrokeStyle.getLineDashOffset(),lineWidth=textStrokeStyle.getWidth(),miterLimit=textStrokeStyle.getMiterLimit();strokeState.lineCap=textStrokeStyle.getLineCap()||render_canvas.mb,strokeState.lineDash=lineDash?lineDash.slice():render_canvas.X9,strokeState.lineDashOffset=void 0===lineDashOffset?render_canvas.He:lineDashOffset,strokeState.lineJoin=textStrokeStyle.getLineJoin()||render_canvas.rc,strokeState.lineWidth=void 0===lineWidth?render_canvas.yC:lineWidth,strokeState.miterLimit=void 0===miterLimit?render_canvas.V4:miterLimit,strokeState.strokeStyle=(0,colorlike.y)(textStrokeStyle.getColor()||render_canvas.Tx)}else strokeState=null,this.textStrokeState_=strokeState;textState=this.textState_;const font=textStyle.getFont()||render_canvas.Df;(0,render_canvas.Qx)(font);const textScale=textStyle.getScaleArray();textState.overflow=textStyle.getOverflow(),textState.font=font,textState.maxAngle=textStyle.getMaxAngle(),textState.placement=textStyle.getPlacement(),textState.textAlign=textStyle.getTextAlign(),textState.repeat=textStyle.getRepeat(),textState.justify=textStyle.getJustify(),textState.textBaseline=textStyle.getTextBaseline()||render_canvas.ru,textState.backgroundFill=textStyle.getBackgroundFill(),textState.backgroundStroke=textStyle.getBackgroundStroke(),textState.padding=textStyle.getPadding()||render_canvas.oB,textState.scale=void 0===textScale?[1,1]:textScale;const textOffsetX=textStyle.getOffsetX(),textOffsetY=textStyle.getOffsetY(),textRotateWithView=textStyle.getRotateWithView(),textRotation=textStyle.getRotation();this.text_=textStyle.getText()||"",this.textOffsetX_=void 0===textOffsetX?0:textOffsetX,this.textOffsetY_=void 0===textOffsetY?0:textOffsetY,this.textRotateWithView_=void 0!==textRotateWithView&&textRotateWithView,this.textRotation_=void 0===textRotation?0:textRotation,this.strokeKey_=strokeState?("string"==typeof strokeState.strokeStyle?strokeState.strokeStyle:(0,util.sq)(strokeState.strokeStyle))+strokeState.lineCap+strokeState.lineDashOffset+"|"+strokeState.lineWidth+strokeState.lineJoin+strokeState.miterLimit+"["+strokeState.lineDash.join()+"]":"",this.textKey_=textState.font+textState.scale+(textState.textAlign||"?")+(textState.repeat||"?")+(textState.justify||"?")+(textState.textBaseline||"?"),this.fillKey_=fillState?"string"==typeof fillState.fillStyle?fillState.fillStyle:"|"+(0,util.sq)(fillState.fillStyle):""}else this.text_="";this.declutterImageWithText_=sharedData}},BATCH_CONSTRUCTORS={Circle:PolygonBuilder,Default:Builder,Image:ImageBuilder,LineString:LineStringBuilder,Polygon:PolygonBuilder,Text:TextBuilder};const canvas_BuilderGroup=class BuilderGroup{constructor(tolerance,maxExtent,resolution,pixelRatio){this.tolerance_=tolerance,this.maxExtent_=maxExtent,this.pixelRatio_=pixelRatio,this.resolution_=resolution,this.buildersByZIndex_={}}finish(){const builderInstructions={};for(const zKey in this.buildersByZIndex_){builderInstructions[zKey]=builderInstructions[zKey]||{};const builders=this.buildersByZIndex_[zKey];for(const builderKey in builders){const builderInstruction=builders[builderKey].finish();builderInstructions[zKey][builderKey]=builderInstruction}}return builderInstructions}getBuilder(zIndex,builderType){const zIndexKey=void 0!==zIndex?zIndex.toString():"0";let replays=this.buildersByZIndex_[zIndexKey];void 0===replays&&(replays={},this.buildersByZIndex_[zIndexKey]=replays);let replay=replays[builderType];if(void 0===replay){replay=new(0,BATCH_CONSTRUCTORS[builderType])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),replays[builderType]=replay}return replay}};var canvas_Layer=__webpack_require__("./node_modules/ol/renderer/canvas/Layer.js"),ol_transform=__webpack_require__("./node_modules/ol/transform.js"),flat_transform=__webpack_require__("./node_modules/ol/geom/flat/transform.js");function drawTextOnPath(flatCoordinates,offset,end,stride,text,startM,maxAngle,scale,measureAndCacheTextWidth,font,cache,rotation){let x2=flatCoordinates[offset],y2=flatCoordinates[offset+1],x1=0,y1=0,segmentLength=0,segmentM=0;function advance(){x1=x2,y1=y2,x2=flatCoordinates[offset+=stride],y2=flatCoordinates[offset+1],segmentM+=segmentLength,segmentLength=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1))}do{advance()}while(offset<end-stride&&segmentM+segmentLength<startM);let interpolate=0===segmentLength?0:(startM-segmentM)/segmentLength;const beginX=(0,math.t7)(x1,x2,interpolate),beginY=(0,math.t7)(y1,y2,interpolate),startOffset=offset-stride,startLength=segmentM,endM=startM+scale*measureAndCacheTextWidth(font,text,cache);for(;offset<end-stride&&segmentM+segmentLength<endM;)advance();interpolate=0===segmentLength?0:(endM-segmentM)/segmentLength;const endX=(0,math.t7)(x1,x2,interpolate),endY=(0,math.t7)(y1,y2,interpolate);let reverse;if(rotation){const flat=[beginX,beginY,endX,endY];(0,flat_transform.U1)(flat,0,4,2,rotation,flat,flat),reverse=flat[0]>flat[2]}else reverse=beginX>endX;const PI=Math.PI,result=[],singleSegment=startOffset+stride===offset;let previousAngle;if(segmentLength=0,segmentM=startLength,x2=flatCoordinates[offset=startOffset],y2=flatCoordinates[offset+1],singleSegment){advance(),previousAngle=Math.atan2(y2-y1,x2-x1),reverse&&(previousAngle+=previousAngle>0?-PI:PI);const x=(endX+beginX)/2,y=(endY+beginY)/2;return result[0]=[x,y,(endM-startM)/2,previousAngle,text],result}for(let i=0,ii=(text=text.replace(/\n/g," ")).length;i<ii;){advance();let angle=Math.atan2(y2-y1,x2-x1);if(reverse&&(angle+=angle>0?-PI:PI),void 0!==previousAngle){let delta=angle-previousAngle;if(delta+=delta>PI?-2*PI:delta<-PI?2*PI:0,Math.abs(delta)>maxAngle)return null}previousAngle=angle;const iStart=i;let charLength=0;for(;i<ii;++i){const len=scale*measureAndCacheTextWidth(font,text[reverse?ii-i-1:i],cache);if(offset+stride<end&&segmentM+segmentLength<startM+charLength+len/2)break;charLength+=len}if(i===iStart)continue;const chars=reverse?text.substring(ii-iStart,ii-i):text.substring(iStart,i);interpolate=0===segmentLength?0:(startM+charLength/2-segmentM)/segmentLength;const x=(0,math.t7)(x1,x2,interpolate),y=(0,math.t7)(y1,y2,interpolate);result.push([x,y,charLength/2,angle,chars]),startM+=charLength}return result}var flat_length=__webpack_require__("./node_modules/ol/geom/flat/length.js");const tmpExtent=(0,ol_extent.lJ)(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(replayImageOrLabelArgs){return replayImageOrLabelArgs[3].declutterBox}const rtlRegEx=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function horizontalTextAlign(text,align){return"start"===align?align=rtlRegEx.test(text)?"right":"left":"end"===align&&(align=rtlRegEx.test(text)?"left":"right"),TEXT_ALIGN[align]}function createTextChunks(acc,line,i){return i>0&&acc.push("\n",""),acc.push(line,""),acc}const canvas_Executor=class Executor{constructor(resolution,pixelRatio,overlaps,instructions){this.overlaps=overlaps,this.pixelRatio=pixelRatio,this.resolution=resolution,this.alignFill_,this.instructions=instructions.instructions,this.coordinates=instructions.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,ol_transform.Ue)(),this.hitDetectionInstructions=instructions.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=instructions.fillStates||{},this.strokeStates=instructions.strokeStates||{},this.textStates=instructions.textStates||{},this.widths_={},this.labels_={}}createLabel(text,textKey,fillKey,strokeKey){const key=text+textKey+fillKey+strokeKey;if(this.labels_[key])return this.labels_[key];const strokeState=strokeKey?this.strokeStates[strokeKey]:null,fillState=fillKey?this.fillStates[fillKey]:null,textState=this.textStates[textKey],pixelRatio=this.pixelRatio,scale=[textState.scale[0]*pixelRatio,textState.scale[1]*pixelRatio],textIsArray=Array.isArray(text),align=textState.justify?TEXT_ALIGN[textState.justify]:horizontalTextAlign(Array.isArray(text)?text[0]:text,textState.textAlign||render_canvas.PH),strokeWidth=strokeKey&&strokeState.lineWidth?strokeState.lineWidth:0,chunks=textIsArray?text:text.split("\n").reduce(createTextChunks,[]),{width,height,widths,heights,lineWidths}=(0,render_canvas.Zw)(textState,chunks),renderWidth=width+strokeWidth,contextInstructions=[],w=(renderWidth+2)*scale[0],h=(height+strokeWidth)*scale[1],label={width:w<0?Math.floor(w):Math.ceil(w),height:h<0?Math.floor(h):Math.ceil(h),contextInstructions};1==scale[0]&&1==scale[1]||contextInstructions.push("scale",scale),strokeKey&&(contextInstructions.push("strokeStyle",strokeState.strokeStyle),contextInstructions.push("lineWidth",strokeWidth),contextInstructions.push("lineCap",strokeState.lineCap),contextInstructions.push("lineJoin",strokeState.lineJoin),contextInstructions.push("miterLimit",strokeState.miterLimit),contextInstructions.push("setLineDash",[strokeState.lineDash]),contextInstructions.push("lineDashOffset",strokeState.lineDashOffset)),fillKey&&contextInstructions.push("fillStyle",fillState.fillStyle),contextInstructions.push("textBaseline","middle"),contextInstructions.push("textAlign","center");const leftRight=.5-align;let x=align*renderWidth+leftRight*strokeWidth;const strokeInstructions=[],fillInstructions=[];let previousFont,lineHeight=0,lineOffset=0,widthHeightIndex=0,lineWidthIndex=0;for(let i=0,ii=chunks.length;i<ii;i+=2){const text=chunks[i];if("\n"===text){lineOffset+=lineHeight,lineHeight=0,x=align*renderWidth+leftRight*strokeWidth,++lineWidthIndex;continue}const font=chunks[i+1]||textState.font;font!==previousFont&&(strokeKey&&strokeInstructions.push("font",font),fillKey&&fillInstructions.push("font",font),previousFont=font),lineHeight=Math.max(lineHeight,heights[widthHeightIndex]);const fillStrokeArgs=[text,x+leftRight*widths[widthHeightIndex]+align*(widths[widthHeightIndex]-lineWidths[lineWidthIndex]),.5*(strokeWidth+lineHeight)+lineOffset];x+=widths[widthHeightIndex],strokeKey&&strokeInstructions.push("strokeText",fillStrokeArgs),fillKey&&fillInstructions.push("fillText",fillStrokeArgs),++widthHeightIndex}return Array.prototype.push.apply(contextInstructions,strokeInstructions),Array.prototype.push.apply(contextInstructions,fillInstructions),this.labels_[key]=label,label}replayTextBackground_(context,p1,p2,p3,p4,fillInstruction,strokeInstruction){context.beginPath(),context.moveTo.apply(context,p1),context.lineTo.apply(context,p2),context.lineTo.apply(context,p3),context.lineTo.apply(context,p4),context.lineTo.apply(context,p1),fillInstruction&&(this.alignFill_=fillInstruction[2],this.fill_(context)),strokeInstruction&&(this.setStrokeStyle_(context,strokeInstruction),context.stroke())}calculateImageOrLabelDimensions_(sheetWidth,sheetHeight,centerX,centerY,width,height,anchorX,anchorY,originX,originY,rotation,scale,snapToPixel,padding,fillStroke,feature){let x=centerX-(anchorX*=scale[0]),y=centerY-(anchorY*=scale[1]);const w=width+originX>sheetWidth?sheetWidth-originX:width,h=height+originY>sheetHeight?sheetHeight-originY:height,boxW=padding[3]+w*scale[0]+padding[1],boxH=padding[0]+h*scale[1]+padding[2],boxX=x-padding[3],boxY=y-padding[0];let transform;return(fillStroke||0!==rotation)&&(p1[0]=boxX,p4[0]=boxX,p1[1]=boxY,p2[1]=boxY,p2[0]=boxX+boxW,p3[0]=p2[0],p3[1]=boxY+boxH,p4[1]=p3[1]),0!==rotation?(transform=(0,ol_transform.qC)((0,ol_transform.Ue)(),centerX,centerY,1,1,rotation,-centerX,-centerY),(0,ol_transform.nn)(transform,p1),(0,ol_transform.nn)(transform,p2),(0,ol_transform.nn)(transform,p3),(0,ol_transform.nn)(transform,p4),(0,ol_extent.T9)(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):(0,ol_extent.T9)(Math.min(boxX,boxX+boxW),Math.min(boxY,boxY+boxH),Math.max(boxX,boxX+boxW),Math.max(boxY,boxY+boxH),tmpExtent),snapToPixel&&(x=Math.round(x),y=Math.round(y)),{drawImageX:x,drawImageY:y,drawImageW:w,drawImageH:h,originX,originY,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:feature},canvasTransform:transform,scale}}replayImageOrLabel_(context,contextScale,imageOrLabel,dimensions,opacity,fillInstruction,strokeInstruction){const fillStroke=!(!fillInstruction&&!strokeInstruction),box=dimensions.declutterBox,canvas=context.canvas,strokePadding=strokeInstruction?strokeInstruction[2]*dimensions.scale[0]/2:0;return box.minX-strokePadding<=canvas.width/contextScale&&box.maxX+strokePadding>=0&&box.minY-strokePadding<=canvas.height/contextScale&&box.maxY+strokePadding>=0&&(fillStroke&&this.replayTextBackground_(context,p1,p2,p3,p4,fillInstruction,strokeInstruction),(0,render_canvas._f)(context,dimensions.canvasTransform,opacity,imageOrLabel,dimensions.originX,dimensions.originY,dimensions.drawImageW,dimensions.drawImageH,dimensions.drawImageX,dimensions.drawImageY,dimensions.scale)),!0}fill_(context){if(this.alignFill_){const origin=(0,ol_transform.nn)(this.renderedTransform_,[0,0]),repeatSize=512*this.pixelRatio;context.save(),context.translate(origin[0]%repeatSize,origin[1]%repeatSize),context.rotate(this.viewRotation_)}context.fill(),this.alignFill_&&context.restore()}setStrokeStyle_(context,instruction){context.strokeStyle=instruction[1],context.lineWidth=instruction[2],context.lineCap=instruction[3],context.lineJoin=instruction[4],context.miterLimit=instruction[5],context.lineDashOffset=instruction[7],context.setLineDash(instruction[6])}drawLabelWithPointPlacement_(text,textKey,strokeKey,fillKey){const textState=this.textStates[textKey],label=this.createLabel(text,textKey,fillKey,strokeKey),strokeState=this.strokeStates[strokeKey],pixelRatio=this.pixelRatio,align=horizontalTextAlign(Array.isArray(text)?text[0]:text,textState.textAlign||render_canvas.PH),baseline=TEXT_ALIGN[textState.textBaseline||render_canvas.ru],strokeWidth=strokeState&&strokeState.lineWidth?strokeState.lineWidth:0;return{label,anchorX:align*(label.width/pixelRatio-2*textState.scale[0])+2*(.5-align)*strokeWidth,anchorY:baseline*label.height/pixelRatio+2*(.5-baseline)*strokeWidth}}execute_(context,contextScale,transform,instructions,snapToPixel,featureCallback,hitExtent,declutterTree){let pixelCoordinates;this.pixelCoordinates_&&(0,array.fS)(transform,this.renderedTransform_)?pixelCoordinates=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),pixelCoordinates=(0,flat_transform.vT)(this.coordinates,0,this.coordinates.length,2,transform,this.pixelCoordinates_),(0,ol_transform.lk)(this.renderedTransform_,transform));let i=0;const ii=instructions.length;let dd,anchorX,anchorY,prevX,prevY,roundX,roundY,image,text,textKey,strokeKey,fillKey,d=0,pendingFill=0,pendingStroke=0,lastFillInstruction=null,lastStrokeInstruction=null;const coordinateCache=this.coordinateCache_,viewRotation=this.viewRotation_,viewRotationFromTransform=Math.round(1e12*Math.atan2(-transform[1],transform[0]))/1e12,state={context,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:viewRotation},batchSize=this.instructions!=instructions||this.overlaps?0:200;let feature,x,y,currentGeometry;for(;i<ii;){const instruction=instructions[i];switch(instruction[0]){case canvas_Instruction.BEGIN_GEOMETRY:feature=instruction[1],currentGeometry=instruction[3],feature.getGeometry()?void 0===hitExtent||(0,ol_extent.kK)(hitExtent,currentGeometry.getExtent())?++i:i=instruction[2]+1:i=instruction[2];break;case canvas_Instruction.BEGIN_PATH:pendingFill>batchSize&&(this.fill_(context),pendingFill=0),pendingStroke>batchSize&&(context.stroke(),pendingStroke=0),pendingFill||pendingStroke||(context.beginPath(),prevX=NaN,prevY=NaN),++i;break;case canvas_Instruction.CIRCLE:d=instruction[1];const x1=pixelCoordinates[d],y1=pixelCoordinates[d+1],dx=pixelCoordinates[d+2]-x1,dy=pixelCoordinates[d+3]-y1,r=Math.sqrt(dx*dx+dy*dy);context.moveTo(x1+r,y1),context.arc(x1,y1,r,0,2*Math.PI,!0),++i;break;case canvas_Instruction.CLOSE_PATH:context.closePath(),++i;break;case canvas_Instruction.CUSTOM:d=instruction[1],dd=instruction[2];const geometry=instruction[3],renderer=instruction[4],fn=6==instruction.length?instruction[5]:void 0;state.geometry=geometry,state.feature=feature,i in coordinateCache||(coordinateCache[i]=[]);const coords=coordinateCache[i];fn?fn(pixelCoordinates,d,dd,2,coords):(coords[0]=pixelCoordinates[d],coords[1]=pixelCoordinates[d+1],coords.length=2),renderer(coords,state),++i;break;case canvas_Instruction.DRAW_IMAGE:d=instruction[1],dd=instruction[2],image=instruction[3],anchorX=instruction[4],anchorY=instruction[5];let height=instruction[6];const opacity=instruction[7],originX=instruction[8],originY=instruction[9],rotateWithView=instruction[10];let rotation=instruction[11];const scale=instruction[12];let width=instruction[13];const declutterMode=instruction[14],declutterImageWithText=instruction[15];if(!image&&instruction.length>=20){text=instruction[19],textKey=instruction[20],strokeKey=instruction[21],fillKey=instruction[22];const labelWithAnchor=this.drawLabelWithPointPlacement_(text,textKey,strokeKey,fillKey);image=labelWithAnchor.label,instruction[3]=image;const textOffsetX=instruction[23];anchorX=(labelWithAnchor.anchorX-textOffsetX)*this.pixelRatio,instruction[4]=anchorX;const textOffsetY=instruction[24];anchorY=(labelWithAnchor.anchorY-textOffsetY)*this.pixelRatio,instruction[5]=anchorY,height=image.height,instruction[6]=height,width=image.width,instruction[13]=width}let geometryWidths,padding,backgroundFill,backgroundStroke;instruction.length>25&&(geometryWidths=instruction[25]),instruction.length>17?(padding=instruction[16],backgroundFill=instruction[17],backgroundStroke=instruction[18]):(padding=render_canvas.oB,backgroundFill=!1,backgroundStroke=!1),rotateWithView&&viewRotationFromTransform?rotation+=viewRotation:rotateWithView||viewRotationFromTransform||(rotation-=viewRotation);let widthIndex=0;for(;d<dd;d+=2){if(geometryWidths&&geometryWidths[widthIndex++]<width/this.pixelRatio)continue;const dimensions=this.calculateImageOrLabelDimensions_(image.width,image.height,pixelCoordinates[d],pixelCoordinates[d+1],width,height,anchorX,anchorY,originX,originY,rotation,scale,snapToPixel,padding,backgroundFill||backgroundStroke,feature),args=[context,contextScale,image,dimensions,opacity,backgroundFill?lastFillInstruction:null,backgroundStroke?lastStrokeInstruction:null];if(declutterTree){if("none"===declutterMode)continue;if("obstacle"===declutterMode){declutterTree.insert(dimensions.declutterBox);continue}{let imageArgs,imageDeclutterBox;if(declutterImageWithText){const index=dd-d;if(!declutterImageWithText[index]){declutterImageWithText[index]=args;continue}if(imageArgs=declutterImageWithText[index],delete declutterImageWithText[index],imageDeclutterBox=getDeclutterBox(imageArgs),declutterTree.collides(imageDeclutterBox))continue}if(declutterTree.collides(dimensions.declutterBox))continue;imageArgs&&(declutterTree.insert(imageDeclutterBox),this.replayImageOrLabel_.apply(this,imageArgs)),declutterTree.insert(dimensions.declutterBox)}}this.replayImageOrLabel_.apply(this,args)}++i;break;case canvas_Instruction.DRAW_CHARS:const begin=instruction[1],end=instruction[2],baseline=instruction[3],overflow=instruction[4];fillKey=instruction[5];const maxAngle=instruction[6],measurePixelRatio=instruction[7],offsetY=instruction[8];strokeKey=instruction[9];const strokeWidth=instruction[10];text=instruction[11],textKey=instruction[12];const pixelRatioScale=[instruction[13],instruction[13]],textState=this.textStates[textKey],font=textState.font,textScale=[textState.scale[0]*measurePixelRatio,textState.scale[1]*measurePixelRatio];let cachedWidths;font in this.widths_?cachedWidths=this.widths_[font]:(cachedWidths={},this.widths_[font]=cachedWidths);const pathLength=(0,flat_length.W)(pixelCoordinates,begin,end,2),textLength=Math.abs(textScale[0])*(0,render_canvas.Kd)(font,text,cachedWidths);if(overflow||textLength<=pathLength){const parts=drawTextOnPath(pixelCoordinates,begin,end,2,text,(pathLength-textLength)*horizontalTextAlign(text,this.textStates[textKey].textAlign),maxAngle,Math.abs(textScale[0]),render_canvas.Kd,font,cachedWidths,viewRotationFromTransform?0:this.viewRotation_);drawChars:if(parts){const replayImageOrLabelArgs=[];let c,cc,chars,label,part;if(strokeKey)for(c=0,cc=parts.length;c<cc;++c){part=parts[c],chars=part[4],label=this.createLabel(chars,textKey,"",strokeKey),anchorX=part[2]+(textScale[0]<0?-strokeWidth:strokeWidth),anchorY=baseline*label.height+2*(.5-baseline)*strokeWidth*textScale[1]/textScale[0]-offsetY;const dimensions=this.calculateImageOrLabelDimensions_(label.width,label.height,part[0],part[1],label.width,label.height,anchorX,anchorY,0,0,part[3],pixelRatioScale,!1,render_canvas.oB,!1,feature);if(declutterTree&&declutterTree.collides(dimensions.declutterBox))break drawChars;replayImageOrLabelArgs.push([context,contextScale,label,dimensions,1,null,null])}if(fillKey)for(c=0,cc=parts.length;c<cc;++c){part=parts[c],chars=part[4],label=this.createLabel(chars,textKey,fillKey,""),anchorX=part[2],anchorY=baseline*label.height-offsetY;const dimensions=this.calculateImageOrLabelDimensions_(label.width,label.height,part[0],part[1],label.width,label.height,anchorX,anchorY,0,0,part[3],pixelRatioScale,!1,render_canvas.oB,!1,feature);if(declutterTree&&declutterTree.collides(dimensions.declutterBox))break drawChars;replayImageOrLabelArgs.push([context,contextScale,label,dimensions,1,null,null])}declutterTree&&declutterTree.load(replayImageOrLabelArgs.map(getDeclutterBox));for(let i=0,ii=replayImageOrLabelArgs.length;i<ii;++i)this.replayImageOrLabel_.apply(this,replayImageOrLabelArgs[i])}}++i;break;case canvas_Instruction.END_GEOMETRY:if(void 0!==featureCallback){feature=instruction[1];const result=featureCallback(feature,currentGeometry);if(result)return result}++i;break;case canvas_Instruction.FILL:batchSize?pendingFill++:this.fill_(context),++i;break;case canvas_Instruction.MOVE_TO_LINE_TO:for(d=instruction[1],dd=instruction[2],x=pixelCoordinates[d],y=pixelCoordinates[d+1],roundX=x+.5|0,roundY=y+.5|0,roundX===prevX&&roundY===prevY||(context.moveTo(x,y),prevX=roundX,prevY=roundY),d+=2;d<dd;d+=2)x=pixelCoordinates[d],y=pixelCoordinates[d+1],roundX=x+.5|0,roundY=y+.5|0,d!=dd-2&&roundX===prevX&&roundY===prevY||(context.lineTo(x,y),prevX=roundX,prevY=roundY);++i;break;case canvas_Instruction.SET_FILL_STYLE:lastFillInstruction=instruction,this.alignFill_=instruction[2],pendingFill&&(this.fill_(context),pendingFill=0,pendingStroke&&(context.stroke(),pendingStroke=0)),context.fillStyle=instruction[1],++i;break;case canvas_Instruction.SET_STROKE_STYLE:lastStrokeInstruction=instruction,pendingStroke&&(context.stroke(),pendingStroke=0),this.setStrokeStyle_(context,instruction),++i;break;case canvas_Instruction.STROKE:batchSize?pendingStroke++:context.stroke(),++i;break;default:++i}}pendingFill&&this.fill_(context),pendingStroke&&context.stroke()}execute(context,contextScale,transform,viewRotation,snapToPixel,declutterTree){this.viewRotation_=viewRotation,this.execute_(context,contextScale,transform,this.instructions,snapToPixel,void 0,void 0,declutterTree)}executeHitDetection(context,transform,viewRotation,featureCallback,hitExtent){return this.viewRotation_=viewRotation,this.execute_(context,1,transform,this.hitDetectionInstructions,!0,featureCallback,hitExtent)}},ORDER=["Polygon","Circle","LineString","Image","Text","Default"];const circlePixelIndexArrayCache={};const canvas_ExecutorGroup=class ExecutorGroup{constructor(maxExtent,resolution,pixelRatio,overlaps,allInstructions,renderBuffer){this.maxExtent_=maxExtent,this.overlaps_=overlaps,this.pixelRatio_=pixelRatio,this.resolution_=resolution,this.renderBuffer_=renderBuffer,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,ol_transform.Ue)(),this.createExecutors_(allInstructions)}clip(context,transform){const flatClipCoords=this.getClipCoords(transform);context.beginPath(),context.moveTo(flatClipCoords[0],flatClipCoords[1]),context.lineTo(flatClipCoords[2],flatClipCoords[3]),context.lineTo(flatClipCoords[4],flatClipCoords[5]),context.lineTo(flatClipCoords[6],flatClipCoords[7]),context.clip()}createExecutors_(allInstructions){for(const zIndex in allInstructions){let executors=this.executorsByZIndex_[zIndex];void 0===executors&&(executors={},this.executorsByZIndex_[zIndex]=executors);const instructionByZindex=allInstructions[zIndex];for(const builderType in instructionByZindex){const instructions=instructionByZindex[builderType];executors[builderType]=new canvas_Executor(this.resolution_,this.pixelRatio_,this.overlaps_,instructions)}}}hasExecutors(executors){for(const zIndex in this.executorsByZIndex_){const candidates=this.executorsByZIndex_[zIndex];for(let i=0,ii=executors.length;i<ii;++i)if(executors[i]in candidates)return!0}return!1}forEachFeatureAtCoordinate(coordinate,resolution,rotation,hitTolerance,callback,declutteredFeatures){const contextSize=2*(hitTolerance=Math.round(hitTolerance))+1,transform=(0,ol_transform.qC)(this.hitDetectionTransform_,hitTolerance+.5,hitTolerance+.5,1/resolution,-1/resolution,-rotation,-coordinate[0],-coordinate[1]),newContext=!this.hitDetectionContext_;newContext&&(this.hitDetectionContext_=(0,dom.E4)(contextSize,contextSize,void 0,{willReadFrequently:!0}));const context=this.hitDetectionContext_;let hitExtent;context.canvas.width!==contextSize||context.canvas.height!==contextSize?(context.canvas.width=contextSize,context.canvas.height=contextSize):newContext||context.clearRect(0,0,contextSize,contextSize),void 0!==this.renderBuffer_&&(hitExtent=(0,ol_extent.lJ)(),(0,ol_extent.Wj)(hitExtent,coordinate),(0,ol_extent.f3)(hitExtent,resolution*(this.renderBuffer_+hitTolerance),hitExtent));const indexes=function getPixelIndexArray(radius){if(void 0!==circlePixelIndexArrayCache[radius])return circlePixelIndexArrayCache[radius];const size=2*radius+1,maxDistanceSq=radius*radius,distances=new Array(maxDistanceSq+1);for(let i=0;i<=radius;++i)for(let j=0;j<=radius;++j){const distanceSq=i*i+j*j;if(distanceSq>maxDistanceSq)break;let distance=distances[distanceSq];distance||(distance=[],distances[distanceSq]=distance),distance.push(4*((radius+i)*size+(radius+j))+3),i>0&&distance.push(4*((radius-i)*size+(radius+j))+3),j>0&&(distance.push(4*((radius+i)*size+(radius-j))+3),i>0&&distance.push(4*((radius-i)*size+(radius-j))+3))}const pixelIndex=[];for(let i=0,ii=distances.length;i<ii;++i)distances[i]&&pixelIndex.push(...distances[i]);return circlePixelIndexArrayCache[radius]=pixelIndex,pixelIndex}(hitTolerance);let builderType;function featureCallback(feature,geometry){const imageData=context.getImageData(0,0,contextSize,contextSize).data;for(let i=0,ii=indexes.length;i<ii;i++)if(imageData[indexes[i]]>0){if(!declutteredFeatures||"Image"!==builderType&&"Text"!==builderType||declutteredFeatures.includes(feature)){const idx=(indexes[i]-3)/4,x=hitTolerance-idx%contextSize,y=hitTolerance-(idx/contextSize|0),result=callback(feature,geometry,x*x+y*y);if(result)return result}context.clearRect(0,0,contextSize,contextSize);break}}const zs=Object.keys(this.executorsByZIndex_).map(Number);let i,j,executors,executor,result;for(zs.sort(array.j2),i=zs.length-1;i>=0;--i){const zIndexKey=zs[i].toString();for(executors=this.executorsByZIndex_[zIndexKey],j=ORDER.length-1;j>=0;--j)if(builderType=ORDER[j],executor=executors[builderType],void 0!==executor&&(result=executor.executeHitDetection(context,transform,rotation,featureCallback,hitExtent),result))return result}}getClipCoords(transform){const maxExtent=this.maxExtent_;if(!maxExtent)return null;const minX=maxExtent[0],minY=maxExtent[1],maxX=maxExtent[2],maxY=maxExtent[3],flatClipCoords=[minX,minY,minX,maxY,maxX,maxY,maxX,minY];return(0,flat_transform.vT)(flatClipCoords,0,8,2,transform,flatClipCoords),flatClipCoords}isEmpty(){return(0,obj.x)(this.executorsByZIndex_)}execute(context,contextScale,transform,viewRotation,snapToPixel,builderTypes,declutterTree){const zs=Object.keys(this.executorsByZIndex_).map(Number);let i,ii,j,jj,replays,replay;for(zs.sort(array.j2),this.maxExtent_&&(context.save(),this.clip(context,transform)),builderTypes=builderTypes||ORDER,declutterTree&&zs.reverse(),i=0,ii=zs.length;i<ii;++i){const zIndexKey=zs[i].toString();for(replays=this.executorsByZIndex_[zIndexKey],j=0,jj=builderTypes.length;j<jj;++j){replay=replays[builderTypes[j]],void 0!==replay&&replay.execute(context,contextScale,transform,viewRotation,snapToPixel,declutterTree)}}this.maxExtent_&&context.restore()}};var render_EventType=__webpack_require__("./node_modules/ol/render/EventType.js"),ViewHint=__webpack_require__("./node_modules/ol/ViewHint.js"),SimpleGeometry=__webpack_require__("./node_modules/ol/geom/SimpleGeometry.js");const Immediate=class CanvasImmediateRenderer extends render_VectorContext{constructor(context,pixelRatio,extent,transform,viewRotation,squaredTolerance,userTransform){super(),this.context_=context,this.pixelRatio_=pixelRatio,this.extent_=extent,this.transform_=transform,this.transformRotation_=transform?(0,math.FH)(Math.atan2(transform[1],transform[0]),10):0,this.viewRotation_=viewRotation,this.squaredTolerance_=squaredTolerance,this.userTransform_=userTransform,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,ol_transform.Ue)()}drawImages_(flatCoordinates,offset,end,stride){if(!this.image_)return;const pixelCoordinates=(0,flat_transform.vT)(flatCoordinates,offset,end,stride,this.transform_,this.pixelCoordinates_),context=this.context_,localTransform=this.tmpLocalTransform_,alpha=context.globalAlpha;1!=this.imageOpacity_&&(context.globalAlpha=alpha*this.imageOpacity_);let rotation=this.imageRotation_;0===this.transformRotation_&&(rotation-=this.viewRotation_),this.imageRotateWithView_&&(rotation+=this.viewRotation_);for(let i=0,ii=pixelCoordinates.length;i<ii;i+=2){const x=pixelCoordinates[i]-this.imageAnchorX_,y=pixelCoordinates[i+1]-this.imageAnchorY_;if(0!==rotation||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const centerX=x+this.imageAnchorX_,centerY=y+this.imageAnchorY_;(0,ol_transform.qC)(localTransform,centerX,centerY,1,1,rotation,-centerX,-centerY),context.save(),context.transform.apply(context,localTransform),context.translate(centerX,centerY),context.scale(this.imageScale_[0],this.imageScale_[1]),context.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),context.restore()}else context.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,x,y,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(context.globalAlpha=alpha)}drawText_(flatCoordinates,offset,end,stride){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const pixelCoordinates=(0,flat_transform.vT)(flatCoordinates,offset,end,stride,this.transform_,this.pixelCoordinates_),context=this.context_;let rotation=this.textRotation_;for(0===this.transformRotation_&&(rotation-=this.viewRotation_),this.textRotateWithView_&&(rotation+=this.viewRotation_);offset<end;offset+=stride){const x=pixelCoordinates[offset]+this.textOffsetX_,y=pixelCoordinates[offset+1]+this.textOffsetY_;0!==rotation||1!=this.textScale_[0]||1!=this.textScale_[1]?(context.save(),context.translate(x-this.textOffsetX_,y-this.textOffsetY_),context.rotate(rotation),context.translate(this.textOffsetX_,this.textOffsetY_),context.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&context.strokeText(this.text_,0,0),this.textFillState_&&context.fillText(this.text_,0,0),context.restore()):(this.textStrokeState_&&context.strokeText(this.text_,x,y),this.textFillState_&&context.fillText(this.text_,x,y))}}moveToLineTo_(flatCoordinates,offset,end,stride,close){const context=this.context_,pixelCoordinates=(0,flat_transform.vT)(flatCoordinates,offset,end,stride,this.transform_,this.pixelCoordinates_);context.moveTo(pixelCoordinates[0],pixelCoordinates[1]);let length=pixelCoordinates.length;close&&(length-=2);for(let i=2;i<length;i+=2)context.lineTo(pixelCoordinates[i],pixelCoordinates[i+1]);return close&&context.closePath(),end}drawRings_(flatCoordinates,offset,ends,stride){for(let i=0,ii=ends.length;i<ii;++i)offset=this.moveToLineTo_(flatCoordinates,offset,ends[i],stride,!0);return offset}drawCircle(geometry){if(this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ol_extent.kK)(this.extent_,geometry.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const pixelCoordinates=(0,SimpleGeometry.Kr)(geometry,this.transform_,this.pixelCoordinates_),dx=pixelCoordinates[2]-pixelCoordinates[0],dy=pixelCoordinates[3]-pixelCoordinates[1],radius=Math.sqrt(dx*dx+dy*dy),context=this.context_;context.beginPath(),context.arc(pixelCoordinates[0],pixelCoordinates[1],radius,0,2*Math.PI),this.fillState_&&context.fill(),this.strokeState_&&context.stroke()}""!==this.text_&&this.drawText_(geometry.getCenter(),0,2,2)}}setStyle(style){this.setFillStrokeStyle(style.getFill(),style.getStroke()),this.setImageStyle(style.getImage()),this.setTextStyle(style.getText())}setTransform(transform){this.transform_=transform}drawGeometry(geometry){switch(geometry.getType()){case"Point":this.drawPoint(geometry);break;case"LineString":this.drawLineString(geometry);break;case"Polygon":this.drawPolygon(geometry);break;case"MultiPoint":this.drawMultiPoint(geometry);break;case"MultiLineString":this.drawMultiLineString(geometry);break;case"MultiPolygon":this.drawMultiPolygon(geometry);break;case"GeometryCollection":this.drawGeometryCollection(geometry);break;case"Circle":this.drawCircle(geometry)}}drawFeature(feature,style){const geometry=style.getGeometryFunction()(feature);geometry&&(this.setStyle(style),this.drawGeometry(geometry))}drawGeometryCollection(geometry){const geometries=geometry.getGeometriesArray();for(let i=0,ii=geometries.length;i<ii;++i)this.drawGeometry(geometries[i])}drawPoint(geometry){this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const flatCoordinates=geometry.getFlatCoordinates(),stride=geometry.getStride();this.image_&&this.drawImages_(flatCoordinates,0,flatCoordinates.length,stride),""!==this.text_&&this.drawText_(flatCoordinates,0,flatCoordinates.length,stride)}drawMultiPoint(geometry){this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const flatCoordinates=geometry.getFlatCoordinates(),stride=geometry.getStride();this.image_&&this.drawImages_(flatCoordinates,0,flatCoordinates.length,stride),""!==this.text_&&this.drawText_(flatCoordinates,0,flatCoordinates.length,stride)}drawLineString(geometry){if(this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ol_extent.kK)(this.extent_,geometry.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const context=this.context_,flatCoordinates=geometry.getFlatCoordinates();context.beginPath(),this.moveToLineTo_(flatCoordinates,0,flatCoordinates.length,geometry.getStride(),!1),context.stroke()}if(""!==this.text_){const flatMidpoint=geometry.getFlatMidpoint();this.drawText_(flatMidpoint,0,2,2)}}}drawMultiLineString(geometry){this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const geometryExtent=geometry.getExtent();if((0,ol_extent.kK)(this.extent_,geometryExtent)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const context=this.context_,flatCoordinates=geometry.getFlatCoordinates();let offset=0;const ends=geometry.getEnds(),stride=geometry.getStride();context.beginPath();for(let i=0,ii=ends.length;i<ii;++i)offset=this.moveToLineTo_(flatCoordinates,offset,ends[i],stride,!1);context.stroke()}if(""!==this.text_){const flatMidpoints=geometry.getFlatMidpoints();this.drawText_(flatMidpoints,0,flatMidpoints.length,2)}}}drawPolygon(geometry){if(this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ol_extent.kK)(this.extent_,geometry.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const context=this.context_;context.beginPath(),this.drawRings_(geometry.getOrientedFlatCoordinates(),0,geometry.getEnds(),geometry.getStride()),this.fillState_&&context.fill(),this.strokeState_&&context.stroke()}if(""!==this.text_){const flatInteriorPoint=geometry.getFlatInteriorPoint();this.drawText_(flatInteriorPoint,0,2,2)}}}drawMultiPolygon(geometry){if(this.squaredTolerance_&&(geometry=geometry.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,ol_extent.kK)(this.extent_,geometry.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const context=this.context_,flatCoordinates=geometry.getOrientedFlatCoordinates();let offset=0;const endss=geometry.getEndss(),stride=geometry.getStride();context.beginPath();for(let i=0,ii=endss.length;i<ii;++i){const ends=endss[i];offset=this.drawRings_(flatCoordinates,offset,ends,stride)}this.fillState_&&context.fill(),this.strokeState_&&context.stroke()}if(""!==this.text_){const flatInteriorPoints=geometry.getFlatInteriorPoints();this.drawText_(flatInteriorPoints,0,flatInteriorPoints.length,2)}}}setContextFillState_(fillState){const context=this.context_,contextFillState=this.contextFillState_;contextFillState?contextFillState.fillStyle!=fillState.fillStyle&&(contextFillState.fillStyle=fillState.fillStyle,context.fillStyle=fillState.fillStyle):(context.fillStyle=fillState.fillStyle,this.contextFillState_={fillStyle:fillState.fillStyle})}setContextStrokeState_(strokeState){const context=this.context_,contextStrokeState=this.contextStrokeState_;contextStrokeState?(contextStrokeState.lineCap!=strokeState.lineCap&&(contextStrokeState.lineCap=strokeState.lineCap,context.lineCap=strokeState.lineCap),(0,array.fS)(contextStrokeState.lineDash,strokeState.lineDash)||context.setLineDash(contextStrokeState.lineDash=strokeState.lineDash),contextStrokeState.lineDashOffset!=strokeState.lineDashOffset&&(contextStrokeState.lineDashOffset=strokeState.lineDashOffset,context.lineDashOffset=strokeState.lineDashOffset),contextStrokeState.lineJoin!=strokeState.lineJoin&&(contextStrokeState.lineJoin=strokeState.lineJoin,context.lineJoin=strokeState.lineJoin),contextStrokeState.lineWidth!=strokeState.lineWidth&&(contextStrokeState.lineWidth=strokeState.lineWidth,context.lineWidth=strokeState.lineWidth),contextStrokeState.miterLimit!=strokeState.miterLimit&&(contextStrokeState.miterLimit=strokeState.miterLimit,context.miterLimit=strokeState.miterLimit),contextStrokeState.strokeStyle!=strokeState.strokeStyle&&(contextStrokeState.strokeStyle=strokeState.strokeStyle,context.strokeStyle=strokeState.strokeStyle)):(context.lineCap=strokeState.lineCap,context.setLineDash(strokeState.lineDash),context.lineDashOffset=strokeState.lineDashOffset,context.lineJoin=strokeState.lineJoin,context.lineWidth=strokeState.lineWidth,context.miterLimit=strokeState.miterLimit,context.strokeStyle=strokeState.strokeStyle,this.contextStrokeState_={lineCap:strokeState.lineCap,lineDash:strokeState.lineDash,lineDashOffset:strokeState.lineDashOffset,lineJoin:strokeState.lineJoin,lineWidth:strokeState.lineWidth,miterLimit:strokeState.miterLimit,strokeStyle:strokeState.strokeStyle})}setContextTextState_(textState){const context=this.context_,contextTextState=this.contextTextState_,textAlign=textState.textAlign?textState.textAlign:render_canvas.PH;contextTextState?(contextTextState.font!=textState.font&&(contextTextState.font=textState.font,context.font=textState.font),contextTextState.textAlign!=textAlign&&(contextTextState.textAlign=textAlign,context.textAlign=textAlign),contextTextState.textBaseline!=textState.textBaseline&&(contextTextState.textBaseline=textState.textBaseline,context.textBaseline=textState.textBaseline)):(context.font=textState.font,context.textAlign=textAlign,context.textBaseline=textState.textBaseline,this.contextTextState_={font:textState.font,textAlign,textBaseline:textState.textBaseline})}setFillStrokeStyle(fillStyle,strokeStyle){if(fillStyle){const fillStyleColor=fillStyle.getColor();this.fillState_={fillStyle:(0,colorlike.y)(fillStyleColor||render_canvas.bL)}}else this.fillState_=null;if(strokeStyle){const strokeStyleColor=strokeStyle.getColor(),strokeStyleLineCap=strokeStyle.getLineCap(),strokeStyleLineDash=strokeStyle.getLineDash(),strokeStyleLineDashOffset=strokeStyle.getLineDashOffset(),strokeStyleLineJoin=strokeStyle.getLineJoin(),strokeStyleWidth=strokeStyle.getWidth(),strokeStyleMiterLimit=strokeStyle.getMiterLimit(),lineDash=strokeStyleLineDash||render_canvas.X9;this.strokeState_={lineCap:void 0!==strokeStyleLineCap?strokeStyleLineCap:render_canvas.mb,lineDash:1===this.pixelRatio_?lineDash:lineDash.map((n=>n*this.pixelRatio_)),lineDashOffset:(strokeStyleLineDashOffset||render_canvas.He)*this.pixelRatio_,lineJoin:void 0!==strokeStyleLineJoin?strokeStyleLineJoin:render_canvas.rc,lineWidth:(void 0!==strokeStyleWidth?strokeStyleWidth:render_canvas.yC)*this.pixelRatio_,miterLimit:void 0!==strokeStyleMiterLimit?strokeStyleMiterLimit:render_canvas.V4,strokeStyle:(0,colorlike.y)(strokeStyleColor||render_canvas.Tx)}}else this.strokeState_=null}setImageStyle(imageStyle){let imageSize;if(!imageStyle||!(imageSize=imageStyle.getSize()))return void(this.image_=null);const imagePixelRatio=imageStyle.getPixelRatio(this.pixelRatio_),imageAnchor=imageStyle.getAnchor(),imageOrigin=imageStyle.getOrigin();this.image_=imageStyle.getImage(this.pixelRatio_),this.imageAnchorX_=imageAnchor[0]*imagePixelRatio,this.imageAnchorY_=imageAnchor[1]*imagePixelRatio,this.imageHeight_=imageSize[1]*imagePixelRatio,this.imageOpacity_=imageStyle.getOpacity(),this.imageOriginX_=imageOrigin[0],this.imageOriginY_=imageOrigin[1],this.imageRotateWithView_=imageStyle.getRotateWithView(),this.imageRotation_=imageStyle.getRotation();const imageScale=imageStyle.getScaleArray();this.imageScale_=[imageScale[0]*this.pixelRatio_/imagePixelRatio,imageScale[1]*this.pixelRatio_/imagePixelRatio],this.imageWidth_=imageSize[0]*imagePixelRatio}setTextStyle(textStyle){if(textStyle){const textFillStyle=textStyle.getFill();if(textFillStyle){const textFillStyleColor=textFillStyle.getColor();this.textFillState_={fillStyle:(0,colorlike.y)(textFillStyleColor||render_canvas.bL)}}else this.textFillState_=null;const textStrokeStyle=textStyle.getStroke();if(textStrokeStyle){const textStrokeStyleColor=textStrokeStyle.getColor(),textStrokeStyleLineCap=textStrokeStyle.getLineCap(),textStrokeStyleLineDash=textStrokeStyle.getLineDash(),textStrokeStyleLineDashOffset=textStrokeStyle.getLineDashOffset(),textStrokeStyleLineJoin=textStrokeStyle.getLineJoin(),textStrokeStyleWidth=textStrokeStyle.getWidth(),textStrokeStyleMiterLimit=textStrokeStyle.getMiterLimit();this.textStrokeState_={lineCap:void 0!==textStrokeStyleLineCap?textStrokeStyleLineCap:render_canvas.mb,lineDash:textStrokeStyleLineDash||render_canvas.X9,lineDashOffset:textStrokeStyleLineDashOffset||render_canvas.He,lineJoin:void 0!==textStrokeStyleLineJoin?textStrokeStyleLineJoin:render_canvas.rc,lineWidth:void 0!==textStrokeStyleWidth?textStrokeStyleWidth:render_canvas.yC,miterLimit:void 0!==textStrokeStyleMiterLimit?textStrokeStyleMiterLimit:render_canvas.V4,strokeStyle:(0,colorlike.y)(textStrokeStyleColor||render_canvas.Tx)}}else this.textStrokeState_=null;const textFont=textStyle.getFont(),textOffsetX=textStyle.getOffsetX(),textOffsetY=textStyle.getOffsetY(),textRotateWithView=textStyle.getRotateWithView(),textRotation=textStyle.getRotation(),textScale=textStyle.getScaleArray(),textText=textStyle.getText(),textTextAlign=textStyle.getTextAlign(),textTextBaseline=textStyle.getTextBaseline();this.textState_={font:void 0!==textFont?textFont:render_canvas.Df,textAlign:void 0!==textTextAlign?textTextAlign:render_canvas.PH,textBaseline:void 0!==textTextBaseline?textTextBaseline:render_canvas.ru},this.text_=void 0!==textText?Array.isArray(textText)?textText.reduce(((acc,t,i)=>acc+(i%2?" ":t)),""):textText:"",this.textOffsetX_=void 0!==textOffsetX?this.pixelRatio_*textOffsetX:0,this.textOffsetY_=void 0!==textOffsetY?this.pixelRatio_*textOffsetY:0,this.textRotateWithView_=void 0!==textRotateWithView&&textRotateWithView,this.textRotation_=void 0!==textRotation?textRotation:0,this.textScale_=[this.pixelRatio_*textScale[0],this.pixelRatio_*textScale[1]]}else this.text_=""}};const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:function renderPointGeometry(builderGroup,geometry,style,feature,declutterBuilderGroup){const imageStyle=style.getImage(),textStyle=style.getText();let declutterImageWithText;if(imageStyle){if(imageStyle.getImageState()!=ImageState.Z.LOADED)return;let imageBuilderGroup=builderGroup;if(declutterBuilderGroup){const declutterMode=imageStyle.getDeclutterMode();if("none"!==declutterMode)if(imageBuilderGroup=declutterBuilderGroup,"obstacle"===declutterMode){const imageReplay=builderGroup.getBuilder(style.getZIndex(),"Image");imageReplay.setImageStyle(imageStyle,declutterImageWithText),imageReplay.drawPoint(geometry,feature)}else textStyle&&textStyle.getText()&&(declutterImageWithText={})}const imageReplay=imageBuilderGroup.getBuilder(style.getZIndex(),"Image");imageReplay.setImageStyle(imageStyle,declutterImageWithText),imageReplay.drawPoint(geometry,feature)}if(textStyle&&textStyle.getText()){let textBuilderGroup=builderGroup;declutterBuilderGroup&&(textBuilderGroup=declutterBuilderGroup);const textReplay=textBuilderGroup.getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle,declutterImageWithText),textReplay.drawText(geometry,feature)}},LineString:function renderLineStringGeometry(builderGroup,geometry,style,feature,declutterBuilderGroup){const strokeStyle=style.getStroke();if(strokeStyle){const lineStringReplay=builderGroup.getBuilder(style.getZIndex(),"LineString");lineStringReplay.setFillStrokeStyle(null,strokeStyle),lineStringReplay.drawLineString(geometry,feature)}const textStyle=style.getText();if(textStyle&&textStyle.getText()){const textReplay=(declutterBuilderGroup||builderGroup).getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle),textReplay.drawText(geometry,feature)}},Polygon:function renderPolygonGeometry(builderGroup,geometry,style,feature,declutterBuilderGroup){const fillStyle=style.getFill(),strokeStyle=style.getStroke();if(fillStyle||strokeStyle){const polygonReplay=builderGroup.getBuilder(style.getZIndex(),"Polygon");polygonReplay.setFillStrokeStyle(fillStyle,strokeStyle),polygonReplay.drawPolygon(geometry,feature)}const textStyle=style.getText();if(textStyle&&textStyle.getText()){const textReplay=(declutterBuilderGroup||builderGroup).getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle),textReplay.drawText(geometry,feature)}},MultiPoint:function renderMultiPointGeometry(builderGroup,geometry,style,feature,declutterBuilderGroup){const imageStyle=style.getImage(),textStyle=style.getText();let declutterImageWithText;if(imageStyle){if(imageStyle.getImageState()!=ImageState.Z.LOADED)return;let imageBuilderGroup=builderGroup;if(declutterBuilderGroup){const declutterMode=imageStyle.getDeclutterMode();if("none"!==declutterMode)if(imageBuilderGroup=declutterBuilderGroup,"obstacle"===declutterMode){const imageReplay=builderGroup.getBuilder(style.getZIndex(),"Image");imageReplay.setImageStyle(imageStyle,declutterImageWithText),imageReplay.drawMultiPoint(geometry,feature)}else textStyle&&textStyle.getText()&&(declutterImageWithText={})}const imageReplay=imageBuilderGroup.getBuilder(style.getZIndex(),"Image");imageReplay.setImageStyle(imageStyle,declutterImageWithText),imageReplay.drawMultiPoint(geometry,feature)}if(textStyle&&textStyle.getText()){let textBuilderGroup=builderGroup;declutterBuilderGroup&&(textBuilderGroup=declutterBuilderGroup);const textReplay=textBuilderGroup.getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle,declutterImageWithText),textReplay.drawText(geometry,feature)}},MultiLineString:function renderMultiLineStringGeometry(builderGroup,geometry,style,feature,declutterBuilderGroup){const strokeStyle=style.getStroke();if(strokeStyle){const lineStringReplay=builderGroup.getBuilder(style.getZIndex(),"LineString");lineStringReplay.setFillStrokeStyle(null,strokeStyle),lineStringReplay.drawMultiLineString(geometry,feature)}const textStyle=style.getText();if(textStyle&&textStyle.getText()){const textReplay=(declutterBuilderGroup||builderGroup).getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle),textReplay.drawText(geometry,feature)}},MultiPolygon:function renderMultiPolygonGeometry(builderGroup,geometry,style,feature,declutterBuilderGroup){const fillStyle=style.getFill(),strokeStyle=style.getStroke();if(strokeStyle||fillStyle){const polygonReplay=builderGroup.getBuilder(style.getZIndex(),"Polygon");polygonReplay.setFillStrokeStyle(fillStyle,strokeStyle),polygonReplay.drawMultiPolygon(geometry,feature)}const textStyle=style.getText();if(textStyle&&textStyle.getText()){const textReplay=(declutterBuilderGroup||builderGroup).getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle),textReplay.drawText(geometry,feature)}},GeometryCollection:function renderGeometryCollectionGeometry(replayGroup,geometry,style,feature,declutterBuilderGroup){const geometries=geometry.getGeometriesArray();let i,ii;for(i=0,ii=geometries.length;i<ii;++i){(0,GEOMETRY_RENDERERS[geometries[i].getType()])(replayGroup,geometries[i],style,feature,declutterBuilderGroup)}},Circle:function renderCircleGeometry(builderGroup,geometry,style,feature,declutterBuilderGroup){const fillStyle=style.getFill(),strokeStyle=style.getStroke();if(fillStyle||strokeStyle){const circleReplay=builderGroup.getBuilder(style.getZIndex(),"Circle");circleReplay.setFillStrokeStyle(fillStyle,strokeStyle),circleReplay.drawCircle(geometry,feature)}const textStyle=style.getText();if(textStyle&&textStyle.getText()){const textReplay=(declutterBuilderGroup||builderGroup).getBuilder(style.getZIndex(),"Text");textReplay.setTextStyle(textStyle),textReplay.drawText(geometry,feature)}}};function defaultOrder(feature1,feature2){return parseInt((0,util.sq)(feature1),10)-parseInt((0,util.sq)(feature2),10)}function getTolerance(resolution,pixelRatio){return SIMPLIFY_TOLERANCE*resolution/pixelRatio}function renderFeature(replayGroup,feature,style,squaredTolerance,listener,transform,declutterBuilderGroup){let loading=!1;const imageStyle=style.getImage();if(imageStyle){const imageState=imageStyle.getImageState();imageState==ImageState.Z.LOADED||imageState==ImageState.Z.ERROR?imageStyle.unlistenImageChange(listener):(imageState==ImageState.Z.IDLE&&imageStyle.load(),imageStyle.listenImageChange(listener),loading=!0)}return function renderFeatureInternal(replayGroup,feature,style,squaredTolerance,transform,declutterBuilderGroup){const geometry=style.getGeometryFunction()(feature);if(!geometry)return;const simplifiedGeometry=geometry.simplifyTransformed(squaredTolerance,transform),renderer=style.getRenderer();if(renderer)renderGeometry(replayGroup,simplifiedGeometry,style,feature);else{(0,GEOMETRY_RENDERERS[simplifiedGeometry.getType()])(replayGroup,simplifiedGeometry,style,feature,declutterBuilderGroup)}}(replayGroup,feature,style,squaredTolerance,transform,declutterBuilderGroup),loading}function renderGeometry(replayGroup,geometry,style,feature){if("GeometryCollection"==geometry.getType()){const geometries=geometry.getGeometries();for(let i=0,ii=geometries.length;i<ii;++i)renderGeometry(replayGroup,geometries[i],style,feature);return}replayGroup.getBuilder(style.getZIndex(),"Default").drawCustom(geometry,feature,style.getRenderer(),style.getHitDetectionRenderer())}var proj=__webpack_require__("./node_modules/ol/proj.js"),coordinate=__webpack_require__("./node_modules/ol/coordinate.js");class CanvasVectorLayerRenderer extends canvas_Layer.Z{constructor(vectorLayer){super(vectorLayer),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,ol_extent.lJ)(),this.wrappedRenderedExtent_=(0,ol_extent.lJ)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(executorGroup,frameState,declutterTree){const extent=frameState.extent,viewState=frameState.viewState,center=viewState.center,resolution=viewState.resolution,projection=viewState.projection,rotation=viewState.rotation,projectionExtent=projection.getExtent(),vectorSource=this.getLayer().getSource(),pixelRatio=frameState.pixelRatio,viewHints=frameState.viewHints,snapToPixel=!(viewHints[ViewHint.Z.ANIMATING]||viewHints[ViewHint.Z.INTERACTING]),context=this.compositionContext_,width=Math.round(frameState.size[0]*pixelRatio),height=Math.round(frameState.size[1]*pixelRatio),multiWorld=vectorSource.getWrapX()&&projection.canWrapX(),worldWidth=multiWorld?(0,ol_extent.dz)(projectionExtent):null,endWorld=multiWorld?Math.ceil((extent[2]-projectionExtent[2])/worldWidth)+1:1;let world=multiWorld?Math.floor((extent[0]-projectionExtent[0])/worldWidth):0;do{const transform=this.getRenderTransform(center,resolution,rotation,pixelRatio,width,height,world*worldWidth);executorGroup.execute(context,1,transform,rotation,snapToPixel,void 0,declutterTree)}while(++world<endWorld)}setupCompositionContext_(){if(1!==this.opacity_){const compositionContext=(0,dom.E4)(this.context.canvas.width,this.context.canvas.height,canvas_Layer.r);this.compositionContext_=compositionContext}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const alpha=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=alpha,(0,dom.jy)(this.compositionContext_),canvas_Layer.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(frameState){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,frameState,frameState.declutterTree),this.releaseCompositionContext_())}renderFrame(frameState,target){const pixelRatio=frameState.pixelRatio,layerState=frameState.layerStatesArray[frameState.layerIndex];(0,ol_transform.n3)(this.pixelTransform,1/pixelRatio,1/pixelRatio),(0,ol_transform.nb)(this.inversePixelTransform,this.pixelTransform);const canvasTransform=(0,ol_transform.BB)(this.pixelTransform);this.useContainer(target,canvasTransform,this.getBackground(frameState));const context=this.context,canvas=context.canvas,replayGroup=this.replayGroup_,declutterExecutorGroup=this.declutterExecutorGroup;let render=replayGroup&&!replayGroup.isEmpty()||declutterExecutorGroup&&!declutterExecutorGroup.isEmpty();if(!render){if(!(this.getLayer().hasListener(render_EventType.Z.PRERENDER)||this.getLayer().hasListener(render_EventType.Z.POSTRENDER)))return null}const width=Math.round(frameState.size[0]*pixelRatio),height=Math.round(frameState.size[1]*pixelRatio);canvas.width!=width||canvas.height!=height?(canvas.width=width,canvas.height=height,canvas.style.transform!==canvasTransform&&(canvas.style.transform=canvasTransform)):this.containerReused||context.clearRect(0,0,width,height),this.preRender(context,frameState);const viewState=frameState.viewState,projection=viewState.projection;this.opacity_=layerState.opacity,this.setupCompositionContext_();let clipped=!1;if(render&&layerState.extent&&this.clipping){const layerExtent=(0,proj.dY)(layerState.extent,projection);render=(0,ol_extent.kK)(layerExtent,frameState.extent),clipped=render&&!(0,ol_extent.r4)(layerExtent,frameState.extent),clipped&&this.clipUnrotated(this.compositionContext_,frameState,layerExtent)}return render&&this.renderWorlds(replayGroup,frameState),clipped&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(context,frameState),this.renderedRotation_!==viewState.rotation&&(this.renderedRotation_=viewState.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(pixel){return new Promise((resolve=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const size=[this.context.canvas.width,this.context.canvas.height];(0,ol_transform.nn)(this.pixelTransform,size);const center=this.renderedCenter_,resolution=this.renderedResolution_,rotation=this.renderedRotation_,projection=this.renderedProjection_,extent=this.wrappedRenderedExtent_,layer=this.getLayer(),transforms=[],width=.5*size[0],height=.5*size[1];transforms.push(this.getRenderTransform(center,resolution,rotation,.5,width,height,0).slice());const source=layer.getSource(),projectionExtent=projection.getExtent();if(source.getWrapX()&&projection.canWrapX()&&!(0,ol_extent.r4)(projectionExtent,extent)){let startX=extent[0];const worldWidth=(0,ol_extent.dz)(projectionExtent);let offsetX,world=0;for(;startX<projectionExtent[0];)--world,offsetX=worldWidth*world,transforms.push(this.getRenderTransform(center,resolution,rotation,.5,width,height,offsetX).slice()),startX+=worldWidth;for(world=0,startX=extent[2];startX>projectionExtent[2];)++world,offsetX=worldWidth*world,transforms.push(this.getRenderTransform(center,resolution,rotation,.5,width,height,offsetX).slice()),startX-=worldWidth}this.hitDetectionImageData_=function createHitDetectionImageData(size,transforms,features,styleFunction,extent,resolution,rotation){const width=.5*size[0],height=.5*size[1],context=(0,dom.E4)(width,height);context.imageSmoothingEnabled=!1;const canvas=context.canvas,renderer=new Immediate(context,.5,extent,null,rotation),featureCount=features.length,indexFactor=Math.floor(16777215/featureCount),featuresByZIndex={};for(let i=1;i<=featureCount;++i){const feature=features[i-1],featureStyleFunction=feature.getStyleFunction()||styleFunction;if(!featureStyleFunction)continue;let styles=featureStyleFunction(feature,resolution);if(!styles)continue;Array.isArray(styles)||(styles=[styles]);const color=(i*indexFactor).toString(16).padStart(7,"#00000");for(let j=0,jj=styles.length;j<jj;++j){const originalStyle=styles[j],geometry=originalStyle.getGeometryFunction()(feature);if(!geometry||!(0,ol_extent.kK)(extent,geometry.getExtent()))continue;const style=originalStyle.clone(),fill=style.getFill();fill&&fill.setColor(color);const stroke=style.getStroke();stroke&&(stroke.setColor(color),stroke.setLineDash(null)),style.setText(void 0);const image=originalStyle.getImage();if(image){const imgSize=image.getImageSize();if(!imgSize)continue;const imgContext=(0,dom.E4)(imgSize[0],imgSize[1],void 0,{alpha:!1}),img=imgContext.canvas;imgContext.fillStyle=color,imgContext.fillRect(0,0,img.width,img.height),style.setImage(new style_Icon({img,anchor:image.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:image.getOrigin(),opacity:1,size:image.getSize(),scale:image.getScale(),rotation:image.getRotation(),rotateWithView:image.getRotateWithView()}))}const zIndex=style.getZIndex()||0;let byGeometryType=featuresByZIndex[zIndex];byGeometryType||(byGeometryType={},featuresByZIndex[zIndex]=byGeometryType,byGeometryType.Polygon=[],byGeometryType.Circle=[],byGeometryType.LineString=[],byGeometryType.Point=[]);const type=geometry.getType();if("GeometryCollection"===type){const geometries=geometry.getGeometriesArrayRecursive();for(let i=0,ii=geometries.length;i<ii;++i){const geometry=geometries[i];byGeometryType[geometry.getType().replace("Multi","")].push(geometry,style)}}else byGeometryType[type.replace("Multi","")].push(geometry,style)}}const zIndexKeys=Object.keys(featuresByZIndex).map(Number).sort(array.j2);for(let i=0,ii=zIndexKeys.length;i<ii;++i){const byGeometryType=featuresByZIndex[zIndexKeys[i]];for(const type in byGeometryType){const geomAndStyle=byGeometryType[type];for(let j=0,jj=geomAndStyle.length;j<jj;j+=2){renderer.setStyle(geomAndStyle[j+1]);for(let k=0,kk=transforms.length;k<kk;++k)renderer.setTransform(transforms[k]),renderer.drawGeometry(geomAndStyle[j])}}}return context.getImageData(0,0,canvas.width,canvas.height)}(size,transforms,this.renderedFeatures_,layer.getStyleFunction(),extent,resolution,rotation)}resolve(function hitDetect(pixel,features,imageData){const resultFeatures=[];if(imageData){const x=Math.floor(.5*Math.round(pixel[0])),y=Math.floor(.5*Math.round(pixel[1])),index=4*((0,math.uZ)(x,0,imageData.width-1)+(0,math.uZ)(y,0,imageData.height-1)*imageData.width),r=imageData.data[index],g=imageData.data[index+1],i=imageData.data[index+2]+256*(g+256*r),indexFactor=Math.floor(16777215/features.length);i&&i%indexFactor==0&&resultFeatures.push(features[i/indexFactor-1])}return resultFeatures}(pixel,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(coordinate,frameState,hitTolerance,callback,matches){if(!this.replayGroup_)return;const resolution=frameState.viewState.resolution,rotation=frameState.viewState.rotation,layer=this.getLayer(),features={},featureCallback=function(feature,geometry,distanceSq){const key=(0,util.sq)(feature),match=features[key];if(match){if(!0!==match&&distanceSq<match.distanceSq){if(0===distanceSq)return features[key]=!0,matches.splice(matches.lastIndexOf(match),1),callback(feature,layer,geometry);match.geometry=geometry,match.distanceSq=distanceSq}}else{if(0===distanceSq)return features[key]=!0,callback(feature,layer,geometry);matches.push(features[key]={feature,layer,geometry,distanceSq,callback})}};let result;const executorGroups=[this.replayGroup_];return this.declutterExecutorGroup&&executorGroups.push(this.declutterExecutorGroup),executorGroups.some((executorGroup=>result=executorGroup.forEachFeatureAtCoordinate(coordinate,resolution,rotation,hitTolerance,featureCallback,executorGroup===this.declutterExecutorGroup&&frameState.declutterTree?frameState.declutterTree.all().map((item=>item.value)):null))),result}handleFontsChanged(){const layer=this.getLayer();layer.getVisible()&&this.replayGroup_&&layer.changed()}handleStyleImageChange_(event){this.renderIfReadyAndVisible()}prepareFrame(frameState){const vectorLayer=this.getLayer(),vectorSource=vectorLayer.getSource();if(!vectorSource)return!1;const animating=frameState.viewHints[ViewHint.Z.ANIMATING],interacting=frameState.viewHints[ViewHint.Z.INTERACTING],updateWhileAnimating=vectorLayer.getUpdateWhileAnimating(),updateWhileInteracting=vectorLayer.getUpdateWhileInteracting();if(this.ready&&!updateWhileAnimating&&animating||!updateWhileInteracting&&interacting)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const frameStateExtent=frameState.extent,viewState=frameState.viewState,projection=viewState.projection,resolution=viewState.resolution,pixelRatio=frameState.pixelRatio,vectorLayerRevision=vectorLayer.getRevision(),vectorLayerRenderBuffer=vectorLayer.getRenderBuffer();let vectorLayerRenderOrder=vectorLayer.getRenderOrder();void 0===vectorLayerRenderOrder&&(vectorLayerRenderOrder=defaultOrder);const center=viewState.center.slice(),extent=(0,ol_extent.f3)(frameStateExtent,vectorLayerRenderBuffer*resolution),renderedExtent=extent.slice(),loadExtents=[extent.slice()],projectionExtent=projection.getExtent();if(vectorSource.getWrapX()&&projection.canWrapX()&&!(0,ol_extent.r4)(projectionExtent,frameState.extent)){const worldWidth=(0,ol_extent.dz)(projectionExtent),gutter=Math.max((0,ol_extent.dz)(extent)/2,worldWidth);extent[0]=projectionExtent[0]-gutter,extent[2]=projectionExtent[2]+gutter,(0,coordinate.Cf)(center,projection);const loadExtent=(0,ol_extent.Cf)(loadExtents[0],projection);loadExtent[0]<projectionExtent[0]&&loadExtent[2]<projectionExtent[2]?loadExtents.push([loadExtent[0]+worldWidth,loadExtent[1],loadExtent[2]+worldWidth,loadExtent[3]]):loadExtent[0]>projectionExtent[0]&&loadExtent[2]>projectionExtent[2]&&loadExtents.push([loadExtent[0]-worldWidth,loadExtent[1],loadExtent[2]-worldWidth,loadExtent[3]])}if(this.ready&&this.renderedResolution_==resolution&&this.renderedRevision_==vectorLayerRevision&&this.renderedRenderOrder_==vectorLayerRenderOrder&&(0,ol_extent.r4)(this.wrappedRenderedExtent_,extent))return(0,array.fS)(this.renderedExtent_,renderedExtent)||(this.hitDetectionImageData_=null,this.renderedExtent_=renderedExtent),this.renderedCenter_=center,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const replayGroup=new canvas_BuilderGroup(getTolerance(resolution,pixelRatio),extent,resolution,pixelRatio);let declutterBuilderGroup;this.getLayer().getDeclutter()&&(declutterBuilderGroup=new canvas_BuilderGroup(getTolerance(resolution,pixelRatio),extent,resolution,pixelRatio));const userProjection=(0,proj.Cs)();let userTransform;if(userProjection){for(let i=0,ii=loadExtents.length;i<ii;++i){const extent=loadExtents[i],userExtent=(0,proj.Fj)(extent,projection);vectorSource.loadFeatures(userExtent,(0,proj.on)(resolution,projection),userProjection)}userTransform=(0,proj.WO)(userProjection,projection)}else for(let i=0,ii=loadExtents.length;i<ii;++i)vectorSource.loadFeatures(loadExtents[i],resolution,projection);const squaredTolerance=function getSquaredTolerance(resolution,pixelRatio){const tolerance=getTolerance(resolution,pixelRatio);return tolerance*tolerance}(resolution,pixelRatio);let ready=!0;const render=feature=>{let styles;const styleFunction=feature.getStyleFunction()||vectorLayer.getStyleFunction();if(styleFunction&&(styles=styleFunction(feature,resolution)),styles){const dirty=this.renderFeature(feature,squaredTolerance,styles,replayGroup,userTransform,declutterBuilderGroup);ready=ready&&!dirty}},userExtent=(0,proj.Fj)(extent,projection),features=vectorSource.getFeaturesInExtent(userExtent);vectorLayerRenderOrder&&features.sort(vectorLayerRenderOrder);for(let i=0,ii=features.length;i<ii;++i)render(features[i]);this.renderedFeatures_=features,this.ready=ready;const replayGroupInstructions=replayGroup.finish(),executorGroup=new canvas_ExecutorGroup(extent,resolution,pixelRatio,vectorSource.getOverlaps(),replayGroupInstructions,vectorLayer.getRenderBuffer());return declutterBuilderGroup&&(this.declutterExecutorGroup=new canvas_ExecutorGroup(extent,resolution,pixelRatio,vectorSource.getOverlaps(),declutterBuilderGroup.finish(),vectorLayer.getRenderBuffer())),this.renderedResolution_=resolution,this.renderedRevision_=vectorLayerRevision,this.renderedRenderOrder_=vectorLayerRenderOrder,this.renderedExtent_=renderedExtent,this.wrappedRenderedExtent_=extent,this.renderedCenter_=center,this.renderedProjection_=projection,this.replayGroup_=executorGroup,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(feature,squaredTolerance,styles,builderGroup,transform,declutterBuilderGroup){if(!styles)return!1;let loading=!1;if(Array.isArray(styles))for(let i=0,ii=styles.length;i<ii;++i)loading=renderFeature(builderGroup,feature,styles[i],squaredTolerance,this.boundHandleStyleImageChange_,transform,declutterBuilderGroup)||loading;else loading=renderFeature(builderGroup,feature,styles,squaredTolerance,this.boundHandleStyleImageChange_,transform,declutterBuilderGroup);return loading}}const canvas_VectorLayer=CanvasVectorLayerRenderer;const Vector=class VectorLayer extends BaseVector{constructor(options){super(options)}createRenderer(){return new canvas_VectorLayer(this)}}},"./node_modules/ol/loadingstrategy.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$6:()=>all,VW:()=>bbox});__webpack_require__("./node_modules/ol/proj.js");function all(extent,resolution){return[[-1/0,-1/0,1/0,1/0]]}function bbox(extent,resolution){return[extent]}},"./node_modules/ol/render/Event.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _events_Event_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/events/Event.js");class RenderEvent extends _events_Event_js__WEBPACK_IMPORTED_MODULE_0__.ZP{constructor(type,inversePixelTransform,frameState,context){super(type),this.inversePixelTransform=inversePixelTransform,this.frameState=frameState,this.context=context}}const __WEBPACK_DEFAULT_EXPORT__=RenderEvent},"./node_modules/ol/render/EventType.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},"./node_modules/ol/render/canvas.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Df:()=>defaultFont,He:()=>defaultLineDashOffset,Kd:()=>measureAndCacheTextWidth,PH:()=>defaultTextAlign,Qx:()=>registerFont,Tx:()=>defaultStrokeStyle,V4:()=>defaultMiterLimit,X9:()=>defaultLineDash,Zw:()=>getTextDimensions,_f:()=>drawImageOrLabel,bL:()=>defaultFillStyle,mb:()=>defaultLineCap,oB:()=>defaultPadding,rc:()=>defaultLineJoin,ru:()=>defaultTextBaseline,sG:()=>checkedFonts,yC:()=>defaultLineWidth});var _Object_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/Object.js"),_has_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/has.js"),_obj_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/obj.js"),_dom_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/dom.js"),_css_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/css.js");const defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new _Object_js__WEBPACK_IMPORTED_MODULE_0__.Z;let measureFont,measureContext=null;const textHeights={},registerFont=function(){const size="32px ",referenceFonts=["monospace","serif"],len=referenceFonts.length,text="wmytzilWMYTZIL@#/&?$%10";let interval,referenceWidth;function isAvailable(fontStyle,fontWeight,fontFamily){let available=!0;for(let i=0;i<len;++i){const referenceFont=referenceFonts[i];if(referenceWidth=measureTextWidth(fontStyle+" "+fontWeight+" "+size+referenceFont,text),fontFamily!=referenceFont){const width=measureTextWidth(fontStyle+" "+fontWeight+" "+size+fontFamily+","+referenceFont,text);available=available&&width!=referenceWidth}}return!!available}function check(){let done=!0;const fonts=checkedFonts.getKeys();for(let i=0,ii=fonts.length;i<ii;++i){const font=fonts[i];checkedFonts.get(font)<100&&(isAvailable.apply(this,font.split("\n"))?((0,_obj_js__WEBPACK_IMPORTED_MODULE_1__.Z)(textHeights),measureContext=null,measureFont=void 0,checkedFonts.set(font,100)):(checkedFonts.set(font,checkedFonts.get(font)+1,!0),done=!1))}done&&(clearInterval(interval),interval=void 0)}return function(fontSpec){const font=(0,_css_js__WEBPACK_IMPORTED_MODULE_2__.p)(fontSpec);if(!font)return;const families=font.families;for(let i=0,ii=families.length;i<ii;++i){const family=families[i],key=font.style+"\n"+font.weight+"\n"+family;void 0===checkedFonts.get(key)&&(checkedFonts.set(key,100,!0),isAvailable(font.style,font.weight,family)||(checkedFonts.set(key,0,!0),void 0===interval&&(interval=setInterval(check,32))))}}}(),measureTextHeight=function(){let measureElement;return function(fontSpec){let height=textHeights[fontSpec];if(null==height){if(_has_js__WEBPACK_IMPORTED_MODULE_3__.Id){const font=(0,_css_js__WEBPACK_IMPORTED_MODULE_2__.p)(fontSpec),metrics=measureText(fontSpec,"Žg");height=(isNaN(Number(font.lineHeight))?1.2:Number(font.lineHeight))*(metrics.actualBoundingBoxAscent+metrics.actualBoundingBoxDescent)}else measureElement||(measureElement=document.createElement("div"),measureElement.innerHTML="M",measureElement.style.minHeight="0",measureElement.style.maxHeight="none",measureElement.style.height="auto",measureElement.style.padding="0",measureElement.style.border="none",measureElement.style.position="absolute",measureElement.style.display="block",measureElement.style.left="-99999px"),measureElement.style.font=fontSpec,document.body.appendChild(measureElement),height=measureElement.offsetHeight,document.body.removeChild(measureElement);textHeights[fontSpec]=height}return height}}();function measureText(font,text){return measureContext||(measureContext=(0,_dom_js__WEBPACK_IMPORTED_MODULE_4__.E4)(1,1)),font!=measureFont&&(measureContext.font=font,measureFont=measureContext.font),measureContext.measureText(text)}function measureTextWidth(font,text){return measureText(font,text).width}function measureAndCacheTextWidth(font,text,cache){if(text in cache)return cache[text];const width=text.split("\n").reduce(((prev,curr)=>Math.max(prev,measureTextWidth(font,curr))),0);return cache[text]=width,width}function getTextDimensions(baseStyle,chunks){const widths=[],heights=[],lineWidths=[];let width=0,lineWidth=0,height=0,lineHeight=0;for(let i=0,ii=chunks.length;i<=ii;i+=2){const text=chunks[i];if("\n"===text||i===ii){width=Math.max(width,lineWidth),lineWidths.push(lineWidth),lineWidth=0,height+=lineHeight;continue}const font=chunks[i+1]||baseStyle.font,currentWidth=measureTextWidth(font,text);widths.push(currentWidth),lineWidth+=currentWidth;const currentHeight=measureTextHeight(font);heights.push(currentHeight),lineHeight=Math.max(lineHeight,currentHeight)}return{width,height,widths,heights,lineWidths}}function drawImageOrLabel(context,transform,opacity,labelOrImage,originX,originY,w,h,x,y,scale){context.save(),1!==opacity&&(context.globalAlpha*=opacity),transform&&context.transform.apply(context,transform),labelOrImage.contextInstructions?(context.translate(x,y),context.scale(scale[0],scale[1]),function executeLabelInstructions(label,context){const contextInstructions=label.contextInstructions;for(let i=0,ii=contextInstructions.length;i<ii;i+=2)Array.isArray(contextInstructions[i+1])?context[contextInstructions[i]].apply(context,contextInstructions[i+1]):context[contextInstructions[i]]=contextInstructions[i+1]}(labelOrImage,context)):scale[0]<0||scale[1]<0?(context.translate(x,y),context.scale(scale[0],scale[1]),context.drawImage(labelOrImage,originX,originY,w,h,0,0,w,h)):context.drawImage(labelOrImage,originX,originY,w,h,x,y,w*scale[0],h*scale[1]),context.restore()}},"./node_modules/ol/renderer/canvas/Layer.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>canvasPool,Z:()=>canvas_Layer});var EventType=__webpack_require__("./node_modules/ol/events/EventType.js"),ImageState=__webpack_require__("./node_modules/ol/ImageState.js"),Observable=__webpack_require__("./node_modules/ol/Observable.js"),util=__webpack_require__("./node_modules/ol/util.js");class LayerRenderer extends Observable.Z{constructor(layer){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=layer,this.declutterExecutorGroup=null}getFeatures(pixel){return(0,util.O3)()}getData(pixel){return null}prepareFrame(frameState){return(0,util.O3)()}renderFrame(frameState,target){return(0,util.O3)()}loadedTileCallback(tiles,zoom,tile){tiles[zoom]||(tiles[zoom]={}),tiles[zoom][tile.tileCoord.toString()]=tile}createLoadedTileFinder(source,projection,tiles){return(zoom,tileRange)=>{const callback=this.loadedTileCallback.bind(this,tiles,zoom);return source.forEachLoadedTile(projection,zoom,tileRange,callback)}}forEachFeatureAtCoordinate(coordinate,frameState,hitTolerance,callback,matches){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(event){const image=event.target;image.getState()!==ImageState.Z.LOADED&&image.getState()!==ImageState.Z.ERROR||this.renderIfReadyAndVisible()}loadImage(image){let imageState=image.getState();return imageState!=ImageState.Z.LOADED&&imageState!=ImageState.Z.ERROR&&image.addEventListener(EventType.Z.CHANGE,this.boundHandleImageChange_),imageState==ImageState.Z.IDLE&&(image.load(),imageState=image.getState()),imageState==ImageState.Z.LOADED}renderIfReadyAndVisible(){const layer=this.getLayer();layer&&layer.getVisible()&&"ready"===layer.getSourceState()&&layer.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Layer=LayerRenderer;var Event=__webpack_require__("./node_modules/ol/render/Event.js"),render_EventType=__webpack_require__("./node_modules/ol/render/EventType.js"),transform=__webpack_require__("./node_modules/ol/transform.js"),color=__webpack_require__("./node_modules/ol/color.js"),dom=__webpack_require__("./node_modules/ol/dom.js"),array=__webpack_require__("./node_modules/ol/array.js"),ol_extent=__webpack_require__("./node_modules/ol/extent.js");const canvasPool=[];let pixelContext=null;const canvas_Layer=class CanvasLayerRenderer extends Layer{constructor(layer){super(layer),this.container=null,this.renderedResolution,this.tempTransform=(0,transform.Ue)(),this.pixelTransform=(0,transform.Ue)(),this.inversePixelTransform=(0,transform.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(image,col,row){let data;pixelContext||function createPixelContext(){pixelContext=(0,dom.E4)(1,1,void 0,{willReadFrequently:!0})}(),pixelContext.clearRect(0,0,1,1);try{pixelContext.drawImage(image,col,row,1,1,0,0,1,1),data=pixelContext.getImageData(0,0,1,1).data}catch(err){return pixelContext=null,null}return data}getBackground(frameState){let background=this.getLayer().getBackground();return"function"==typeof background&&(background=background(frameState.viewState.resolution)),background||void 0}useContainer(target,transform,backgroundColor){const layerClassName=this.getLayer().getClassName();let container,context;if(target&&target.className===layerClassName&&(!backgroundColor||target&&target.style.backgroundColor&&(0,array.fS)((0,color._2)(target.style.backgroundColor),(0,color._2)(backgroundColor)))){const canvas=target.firstElementChild;canvas instanceof HTMLCanvasElement&&(context=canvas.getContext("2d"))}if(context&&context.canvas.style.transform===transform?(this.container=target,this.context=context,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){container=document.createElement("div"),container.className=layerClassName;let style=container.style;style.position="absolute",style.width="100%",style.height="100%",context=(0,dom.E4)();const canvas=context.canvas;container.appendChild(canvas),style=canvas.style,style.position="absolute",style.left="0",style.transformOrigin="top left",this.container=container,this.context=context}this.containerReused||!backgroundColor||this.container.style.backgroundColor||(this.container.style.backgroundColor=backgroundColor)}clipUnrotated(context,frameState,extent){const topLeft=(0,ol_extent.rL)(extent),topRight=(0,ol_extent.Xv)(extent),bottomRight=(0,ol_extent.w$)(extent),bottomLeft=(0,ol_extent.hC)(extent);(0,transform.nn)(frameState.coordinateToPixelTransform,topLeft),(0,transform.nn)(frameState.coordinateToPixelTransform,topRight),(0,transform.nn)(frameState.coordinateToPixelTransform,bottomRight),(0,transform.nn)(frameState.coordinateToPixelTransform,bottomLeft);const inverted=this.inversePixelTransform;(0,transform.nn)(inverted,topLeft),(0,transform.nn)(inverted,topRight),(0,transform.nn)(inverted,bottomRight),(0,transform.nn)(inverted,bottomLeft),context.save(),context.beginPath(),context.moveTo(Math.round(topLeft[0]),Math.round(topLeft[1])),context.lineTo(Math.round(topRight[0]),Math.round(topRight[1])),context.lineTo(Math.round(bottomRight[0]),Math.round(bottomRight[1])),context.lineTo(Math.round(bottomLeft[0]),Math.round(bottomLeft[1])),context.clip()}dispatchRenderEvent_(type,context,frameState){const layer=this.getLayer();if(layer.hasListener(type)){const event=new Event.Z(type,this.inversePixelTransform,frameState,context);layer.dispatchEvent(event)}}preRender(context,frameState){this.frameState=frameState,this.dispatchRenderEvent_(render_EventType.Z.PRERENDER,context,frameState)}postRender(context,frameState){this.dispatchRenderEvent_(render_EventType.Z.POSTRENDER,context,frameState)}getRenderTransform(center,resolution,rotation,pixelRatio,width,height,offsetX){const dx1=width/2,dy1=height/2,sx=pixelRatio/resolution,sy=-sx,dx2=-center[0]+offsetX,dy2=-center[1];return(0,transform.qC)(this.tempTransform,dx1,dy1,sx,sy,-rotation,dx2,dy2)}disposeInternal(){delete this.frameState,super.disposeInternal()}}},"./node_modules/ol/reproj.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Co:()=>calculateSourceExtentResolution,aA:()=>calculateSourceResolution,rX:()=>canvasPool,sY:()=>render});var _extent_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/extent.js"),_dom_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/dom.js"),_proj_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/proj.js"),_math_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/math.js");let brokenDiagonalRendering_;const canvasPool=[];function drawTestTriangle(ctx,u1,v1,u2,v2){ctx.beginPath(),ctx.moveTo(0,0),ctx.lineTo(u1,v1),ctx.lineTo(u2,v2),ctx.closePath(),ctx.save(),ctx.clip(),ctx.fillRect(0,0,Math.max(u1,u2)+1,Math.max(v1,v2)),ctx.restore()}function verifyBrokenDiagonalRendering(data,offset){return Math.abs(data[4*offset]-210)>2||Math.abs(data[4*offset+3]-191.25)>2}function calculateSourceResolution(sourceProj,targetProj,targetCenter,targetResolution){const sourceCenter=(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__.vs)(targetCenter,targetProj,sourceProj);let sourceResolution=(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__._Q)(targetProj,targetResolution,targetCenter);const targetMetersPerUnit=targetProj.getMetersPerUnit();void 0!==targetMetersPerUnit&&(sourceResolution*=targetMetersPerUnit);const sourceMetersPerUnit=sourceProj.getMetersPerUnit();void 0!==sourceMetersPerUnit&&(sourceResolution/=sourceMetersPerUnit);const sourceExtent=sourceProj.getExtent();if(!sourceExtent||(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.b8)(sourceExtent,sourceCenter)){const compensationFactor=(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__._Q)(sourceProj,sourceResolution,sourceCenter)/sourceResolution;isFinite(compensationFactor)&&compensationFactor>0&&(sourceResolution/=compensationFactor)}return sourceResolution}function calculateSourceExtentResolution(sourceProj,targetProj,targetExtent,targetResolution){const targetCenter=(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.qg)(targetExtent);let sourceResolution=calculateSourceResolution(sourceProj,targetProj,targetCenter,targetResolution);return(!isFinite(sourceResolution)||sourceResolution<=0)&&(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.H6)(targetExtent,(function(corner){return sourceResolution=calculateSourceResolution(sourceProj,targetProj,corner,targetResolution),isFinite(sourceResolution)&&sourceResolution>0})),sourceResolution}function render(width,height,pixelRatio,sourceResolution,sourceExtent,targetResolution,targetExtent,triangulation,sources,gutter,renderEdges,interpolate,drawSingle){const context=(0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.E4)(Math.round(pixelRatio*width),Math.round(pixelRatio*height),canvasPool);if(interpolate||(context.imageSmoothingEnabled=!1),0===sources.length)return context.canvas;function pixelRound(value){return Math.round(value*pixelRatio)/pixelRatio}context.scale(pixelRatio,pixelRatio),context.globalCompositeOperation="lighter";const sourceDataExtent=(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.lJ)();let stitchContext;if(sources.forEach((function(src,i,arr){(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.l7)(sourceDataExtent,src.extent)})),!drawSingle||1!==sources.length||0!==gutter){const canvasWidthInUnits=(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.dz)(sourceDataExtent),canvasHeightInUnits=(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.Cr)(sourceDataExtent);stitchContext=(0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.E4)(Math.round(pixelRatio*canvasWidthInUnits/sourceResolution),Math.round(pixelRatio*canvasHeightInUnits/sourceResolution),canvasPool),interpolate||(stitchContext.imageSmoothingEnabled=!1);const stitchScale=pixelRatio/sourceResolution;sources.forEach((function(src,i,arr){const xPos=src.extent[0]-sourceDataExtent[0],yPos=-(src.extent[3]-sourceDataExtent[3]),srcWidth=(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.dz)(src.extent),srcHeight=(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.Cr)(src.extent);src.image.width>0&&src.image.height>0&&stitchContext.drawImage(src.image,gutter,gutter,src.image.width-2*gutter,src.image.height-2*gutter,xPos*stitchScale,yPos*stitchScale,srcWidth*stitchScale,srcHeight*stitchScale)}))}const targetTopLeft=(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.rL)(targetExtent);return triangulation.getTriangles().forEach((function(triangle,i,arr){const source=triangle.source,target=triangle.target;let x0=source[0][0],y0=source[0][1],x1=source[1][0],y1=source[1][1],x2=source[2][0],y2=source[2][1];const u0=pixelRound((target[0][0]-targetTopLeft[0])/targetResolution),v0=pixelRound(-(target[0][1]-targetTopLeft[1])/targetResolution),u1=pixelRound((target[1][0]-targetTopLeft[0])/targetResolution),v1=pixelRound(-(target[1][1]-targetTopLeft[1])/targetResolution),u2=pixelRound((target[2][0]-targetTopLeft[0])/targetResolution),v2=pixelRound(-(target[2][1]-targetTopLeft[1])/targetResolution),sourceNumericalShiftX=x0,sourceNumericalShiftY=y0;x0=0,y0=0,x1-=sourceNumericalShiftX,y1-=sourceNumericalShiftY,x2-=sourceNumericalShiftX,y2-=sourceNumericalShiftY;const augmentedMatrix=[[x1,y1,0,0,u1-u0],[x2,y2,0,0,u2-u0],[0,0,x1,y1,v1-v0],[0,0,x2,y2,v2-v0]],affineCoefs=(0,_math_js__WEBPACK_IMPORTED_MODULE_3__.SV)(augmentedMatrix);if(!affineCoefs)return;if(context.save(),context.beginPath(),function isBrokenDiagonalRendering(){if(void 0===brokenDiagonalRendering_){const ctx=(0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.E4)(6,6,canvasPool);ctx.globalCompositeOperation="lighter",ctx.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(ctx,4,5,4,0),drawTestTriangle(ctx,4,5,0,5);const data=ctx.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(data,0)||verifyBrokenDiagonalRendering(data,4)||verifyBrokenDiagonalRendering(data,8),(0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.jy)(ctx),canvasPool.push(ctx.canvas)}return brokenDiagonalRendering_}()||!interpolate){context.moveTo(u1,v1);const steps=4,ud=u0-u1,vd=v0-v1;for(let step=0;step<steps;step++)context.lineTo(u1+pixelRound((step+1)*ud/steps),v1+pixelRound(step*vd/(steps-1))),step!=steps-1&&context.lineTo(u1+pixelRound((step+1)*ud/steps),v1+pixelRound((step+1)*vd/(steps-1)));context.lineTo(u2,v2)}else context.moveTo(u1,v1),context.lineTo(u0,v0),context.lineTo(u2,v2);let image;if(context.clip(),context.transform(affineCoefs[0],affineCoefs[2],affineCoefs[1],affineCoefs[3],u0,v0),context.translate(sourceDataExtent[0]-sourceNumericalShiftX,sourceDataExtent[3]-sourceNumericalShiftY),stitchContext)image=stitchContext.canvas,context.scale(sourceResolution/pixelRatio,-sourceResolution/pixelRatio);else{const source=sources[0],extent=source.extent;image=source.image,context.scale((0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.dz)(extent)/image.width,-(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.Cr)(extent)/image.height)}context.drawImage(image,0,0),context.restore()})),stitchContext&&((0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.jy)(stitchContext),canvasPool.push(stitchContext.canvas)),renderEdges&&(context.save(),context.globalCompositeOperation="source-over",context.strokeStyle="black",context.lineWidth=1,triangulation.getTriangles().forEach((function(triangle,i,arr){const target=triangle.target,u0=(target[0][0]-targetTopLeft[0])/targetResolution,v0=-(target[0][1]-targetTopLeft[1])/targetResolution,u1=(target[1][0]-targetTopLeft[0])/targetResolution,v1=-(target[1][1]-targetTopLeft[1])/targetResolution,u2=(target[2][0]-targetTopLeft[0])/targetResolution,v2=-(target[2][1]-targetTopLeft[1])/targetResolution;context.beginPath(),context.moveTo(u1,v1),context.lineTo(u0,v0),context.lineTo(u2,v2),context.closePath(),context.stroke()})),context.restore()),context.canvas}},"./node_modules/ol/reproj/Tile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _common_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/reproj/common.js"),_events_EventType_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/ol/events/EventType.js"),_Tile_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/Tile.js"),_TileState_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/TileState.js"),_Triangulation_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/ol/reproj/Triangulation.js"),_reproj_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/reproj.js"),_math_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/ol/math.js"),_extent_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/extent.js"),_events_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/ol/events.js"),_dom_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/ol/dom.js");class ReprojTile extends _Tile_js__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(sourceProj,sourceTileGrid,targetProj,targetTileGrid,tileCoord,wrappedTileCoord,pixelRatio,gutter,getTileFunction,errorThreshold,renderEdges,options){super(tileCoord,_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.IDLE,options),this.renderEdges_=void 0!==renderEdges&&renderEdges,this.pixelRatio_=pixelRatio,this.gutter_=gutter,this.canvas_=null,this.sourceTileGrid_=sourceTileGrid,this.targetTileGrid_=targetTileGrid,this.wrappedTileCoord_=wrappedTileCoord||tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const targetExtent=targetTileGrid.getTileCoordExtent(this.wrappedTileCoord_),maxTargetExtent=this.targetTileGrid_.getExtent();let maxSourceExtent=this.sourceTileGrid_.getExtent();const limitedTargetExtent=maxTargetExtent?(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.Ed)(targetExtent,maxTargetExtent):targetExtent;if(0===(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.bg)(limitedTargetExtent))return void(this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.EMPTY);const sourceProjExtent=sourceProj.getExtent();sourceProjExtent&&(maxSourceExtent=maxSourceExtent?(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.Ed)(maxSourceExtent,sourceProjExtent):sourceProjExtent);const targetResolution=targetTileGrid.getResolution(this.wrappedTileCoord_[0]),sourceResolution=(0,_reproj_js__WEBPACK_IMPORTED_MODULE_3__.Co)(sourceProj,targetProj,limitedTargetExtent,targetResolution);if(!isFinite(sourceResolution)||sourceResolution<=0)return void(this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.EMPTY);const errorThresholdInPixels=void 0!==errorThreshold?errorThreshold:_common_js__WEBPACK_IMPORTED_MODULE_4__.m;if(this.triangulation_=new _Triangulation_js__WEBPACK_IMPORTED_MODULE_5__.Z(sourceProj,targetProj,limitedTargetExtent,maxSourceExtent,sourceResolution*errorThresholdInPixels,targetResolution),0===this.triangulation_.getTriangles().length)return void(this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.EMPTY);this.sourceZ_=sourceTileGrid.getZForResolution(sourceResolution);let sourceExtent=this.triangulation_.calculateSourceExtent();if(maxSourceExtent&&(sourceProj.canWrapX()?(sourceExtent[1]=(0,_math_js__WEBPACK_IMPORTED_MODULE_6__.uZ)(sourceExtent[1],maxSourceExtent[1],maxSourceExtent[3]),sourceExtent[3]=(0,_math_js__WEBPACK_IMPORTED_MODULE_6__.uZ)(sourceExtent[3],maxSourceExtent[1],maxSourceExtent[3])):sourceExtent=(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.Ed)(sourceExtent,maxSourceExtent)),(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.bg)(sourceExtent)){const sourceRange=sourceTileGrid.getTileRangeForExtentAndZ(sourceExtent,this.sourceZ_);for(let srcX=sourceRange.minX;srcX<=sourceRange.maxX;srcX++)for(let srcY=sourceRange.minY;srcY<=sourceRange.maxY;srcY++){const tile=getTileFunction(this.sourceZ_,srcX,srcY,pixelRatio);tile&&this.sourceTiles_.push(tile)}0===this.sourceTiles_.length&&(this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.EMPTY)}else this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const sources=[];if(this.sourceTiles_.forEach((tile=>{tile&&tile.getState()==_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.LOADED&&sources.push({extent:this.sourceTileGrid_.getTileCoordExtent(tile.tileCoord),image:tile.getImage()})})),this.sourceTiles_.length=0,0===sources.length)this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.ERROR;else{const z=this.wrappedTileCoord_[0],size=this.targetTileGrid_.getTileSize(z),width="number"==typeof size?size:size[0],height="number"==typeof size?size:size[1],targetResolution=this.targetTileGrid_.getResolution(z),sourceResolution=this.sourceTileGrid_.getResolution(this.sourceZ_),targetExtent=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,_reproj_js__WEBPACK_IMPORTED_MODULE_3__.sY)(width,height,this.pixelRatio_,sourceResolution,this.sourceTileGrid_.getExtent(),targetResolution,targetExtent,this.triangulation_,sources,this.gutter_,this.renderEdges_,this.interpolate),this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.LOADED}this.changed()}load(){if(this.state==_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.IDLE){this.state=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.LOADING,this.changed();let leftToLoad=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((tile=>{const state=tile.getState();if(state==_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.IDLE||state==_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.LOADING){leftToLoad++;const sourceListenKey=(0,_events_js__WEBPACK_IMPORTED_MODULE_7__.oL)(tile,_events_EventType_js__WEBPACK_IMPORTED_MODULE_8__.Z.CHANGE,(function(e){const state=tile.getState();state!=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.LOADED&&state!=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.ERROR&&state!=_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.EMPTY||((0,_events_js__WEBPACK_IMPORTED_MODULE_7__.bN)(sourceListenKey),leftToLoad--,0===leftToLoad&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(sourceListenKey)}})),0===leftToLoad?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(tile,i,arr){tile.getState()==_TileState_js__WEBPACK_IMPORTED_MODULE_1__.Z.IDLE&&tile.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(_events_js__WEBPACK_IMPORTED_MODULE_7__.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,_dom_js__WEBPACK_IMPORTED_MODULE_9__.jy)(this.canvas_.getContext("2d")),_reproj_js__WEBPACK_IMPORTED_MODULE_3__.rX.push(this.canvas_),this.canvas_=null),super.release()}}const __WEBPACK_DEFAULT_EXPORT__=ReprojTile},"./node_modules/ol/reproj/Triangulation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _extent_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/extent.js"),_proj_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/proj.js"),_math_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/math.js");const __WEBPACK_DEFAULT_EXPORT__=class Triangulation{constructor(sourceProj,targetProj,targetExtent,maxSourceExtent,errorThreshold,destinationResolution){this.sourceProj_=sourceProj,this.targetProj_=targetProj;let transformInvCache={};const transformInv=(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(c){const key=c[0]+"/"+c[1];return transformInvCache[key]||(transformInvCache[key]=transformInv(c)),transformInvCache[key]},this.maxSourceExtent_=maxSourceExtent,this.errorThresholdSquared_=errorThreshold*errorThreshold,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!maxSourceExtent&&!!this.sourceProj_.getExtent()&&(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.dz)(maxSourceExtent)>=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.dz)(this.targetProj_.getExtent()):null;const destinationTopLeft=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.rL)(targetExtent),destinationTopRight=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.Xv)(targetExtent),destinationBottomRight=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.w$)(targetExtent),destinationBottomLeft=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.hC)(targetExtent),sourceTopLeft=this.transformInv_(destinationTopLeft),sourceTopRight=this.transformInv_(destinationTopRight),sourceBottomRight=this.transformInv_(destinationBottomRight),sourceBottomLeft=this.transformInv_(destinationBottomLeft),maxSubdivision=10+(destinationResolution?Math.max(0,Math.ceil(Math.log2((0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.bg)(targetExtent)/(destinationResolution*destinationResolution*256*256)))):0);if(this.addQuad_(destinationTopLeft,destinationTopRight,destinationBottomRight,destinationBottomLeft,sourceTopLeft,sourceTopRight,sourceBottomRight,sourceBottomLeft,maxSubdivision),this.wrapsXInSource_){let leftBound=1/0;this.triangles_.forEach((function(triangle,i,arr){leftBound=Math.min(leftBound,triangle.source[0][0],triangle.source[1][0],triangle.source[2][0])})),this.triangles_.forEach((triangle=>{if(Math.max(triangle.source[0][0],triangle.source[1][0],triangle.source[2][0])-leftBound>this.sourceWorldWidth_/2){const newTriangle=[[triangle.source[0][0],triangle.source[0][1]],[triangle.source[1][0],triangle.source[1][1]],[triangle.source[2][0],triangle.source[2][1]]];newTriangle[0][0]-leftBound>this.sourceWorldWidth_/2&&(newTriangle[0][0]-=this.sourceWorldWidth_),newTriangle[1][0]-leftBound>this.sourceWorldWidth_/2&&(newTriangle[1][0]-=this.sourceWorldWidth_),newTriangle[2][0]-leftBound>this.sourceWorldWidth_/2&&(newTriangle[2][0]-=this.sourceWorldWidth_);const minX=Math.min(newTriangle[0][0],newTriangle[1][0],newTriangle[2][0]);Math.max(newTriangle[0][0],newTriangle[1][0],newTriangle[2][0])-minX<this.sourceWorldWidth_/2&&(triangle.source=newTriangle)}}))}transformInvCache={}}addTriangle_(a,b,c,aSrc,bSrc,cSrc){this.triangles_.push({source:[aSrc,bSrc,cSrc],target:[a,b,c]})}addQuad_(a,b,c,d,aSrc,bSrc,cSrc,dSrc,maxSubdivision){const sourceQuadExtent=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.hI)([aSrc,bSrc,cSrc,dSrc]),sourceCoverageX=this.sourceWorldWidth_?(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.dz)(sourceQuadExtent)/this.sourceWorldWidth_:null,sourceWorldWidth=this.sourceWorldWidth_,wrapsX=this.sourceProj_.canWrapX()&&sourceCoverageX>.5&&sourceCoverageX<1;let needsSubdivision=!1;if(maxSubdivision>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const targetQuadExtent=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.hI)([a,b,c,d]);needsSubdivision=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.dz)(targetQuadExtent)/this.targetWorldWidth_>.25||needsSubdivision}!wrapsX&&this.sourceProj_.isGlobal()&&sourceCoverageX&&(needsSubdivision=sourceCoverageX>.25||needsSubdivision)}if(!needsSubdivision&&this.maxSourceExtent_&&isFinite(sourceQuadExtent[0])&&isFinite(sourceQuadExtent[1])&&isFinite(sourceQuadExtent[2])&&isFinite(sourceQuadExtent[3])&&!(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.kK)(sourceQuadExtent,this.maxSourceExtent_))return;let isNotFinite=0;if(!(needsSubdivision||isFinite(aSrc[0])&&isFinite(aSrc[1])&&isFinite(bSrc[0])&&isFinite(bSrc[1])&&isFinite(cSrc[0])&&isFinite(cSrc[1])&&isFinite(dSrc[0])&&isFinite(dSrc[1])))if(maxSubdivision>0)needsSubdivision=!0;else if(isNotFinite=(isFinite(aSrc[0])&&isFinite(aSrc[1])?0:8)+(isFinite(bSrc[0])&&isFinite(bSrc[1])?0:4)+(isFinite(cSrc[0])&&isFinite(cSrc[1])?0:2)+(isFinite(dSrc[0])&&isFinite(dSrc[1])?0:1),1!=isNotFinite&&2!=isNotFinite&&4!=isNotFinite&&8!=isNotFinite)return;if(maxSubdivision>0){if(!needsSubdivision){const center=[(a[0]+c[0])/2,(a[1]+c[1])/2],centerSrc=this.transformInv_(center);let dx;if(wrapsX){dx=((0,_math_js__WEBPACK_IMPORTED_MODULE_2__.$W)(aSrc[0],sourceWorldWidth)+(0,_math_js__WEBPACK_IMPORTED_MODULE_2__.$W)(cSrc[0],sourceWorldWidth))/2-(0,_math_js__WEBPACK_IMPORTED_MODULE_2__.$W)(centerSrc[0],sourceWorldWidth)}else dx=(aSrc[0]+cSrc[0])/2-centerSrc[0];const dy=(aSrc[1]+cSrc[1])/2-centerSrc[1];needsSubdivision=dx*dx+dy*dy>this.errorThresholdSquared_}if(needsSubdivision){if(Math.abs(a[0]-c[0])<=Math.abs(a[1]-c[1])){const bc=[(b[0]+c[0])/2,(b[1]+c[1])/2],bcSrc=this.transformInv_(bc),da=[(d[0]+a[0])/2,(d[1]+a[1])/2],daSrc=this.transformInv_(da);this.addQuad_(a,b,bc,da,aSrc,bSrc,bcSrc,daSrc,maxSubdivision-1),this.addQuad_(da,bc,c,d,daSrc,bcSrc,cSrc,dSrc,maxSubdivision-1)}else{const ab=[(a[0]+b[0])/2,(a[1]+b[1])/2],abSrc=this.transformInv_(ab),cd=[(c[0]+d[0])/2,(c[1]+d[1])/2],cdSrc=this.transformInv_(cd);this.addQuad_(a,ab,cd,d,aSrc,abSrc,cdSrc,dSrc,maxSubdivision-1),this.addQuad_(ab,b,c,cd,abSrc,bSrc,cSrc,cdSrc,maxSubdivision-1)}return}}if(wrapsX){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&isNotFinite)&&this.addTriangle_(a,c,d,aSrc,cSrc,dSrc),0==(14&isNotFinite)&&this.addTriangle_(a,c,b,aSrc,cSrc,bSrc),isNotFinite&&(0==(13&isNotFinite)&&this.addTriangle_(b,d,a,bSrc,dSrc,aSrc),0==(7&isNotFinite)&&this.addTriangle_(b,d,c,bSrc,dSrc,cSrc))}calculateSourceExtent(){const extent=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.lJ)();return this.triangles_.forEach((function(triangle,i,arr){const src=triangle.source;(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.Wj)(extent,src[0]),(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.Wj)(extent,src[1]),(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.Wj)(extent,src[2])})),extent}getTriangles(){return this.triangles_}}},"./node_modules/ol/reproj/common.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>ERROR_THRESHOLD});const ERROR_THRESHOLD=.5},"./node_modules/ol/rotationconstraint.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Gw:()=>createSnapToZero,YP:()=>none,gE:()=>createSnapToN,h$:()=>disable});var _math_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/math.js");function disable(rotation){if(void 0!==rotation)return 0}function none(rotation){if(void 0!==rotation)return rotation}function createSnapToN(n){const theta=2*Math.PI/n;return function(rotation,isMoving){return isMoving?rotation:void 0!==rotation?rotation=Math.floor(rotation/theta+.5)*theta:void 0}}function createSnapToZero(tolerance){const t=void 0===tolerance?(0,_math_js__WEBPACK_IMPORTED_MODULE_0__.Yr)(5):tolerance;return function(rotation,isMoving){return isMoving||void 0===rotation?rotation:Math.abs(rotation)<=t?0:rotation}}},"./node_modules/ol/source/Image.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{ZP:()=>source_Image,r6:()=>defaultImageLoadFunction,Ps:()=>getRequestExtent});var Event=__webpack_require__("./node_modules/ol/events/Event.js"),EventType=__webpack_require__("./node_modules/ol/events/EventType.js"),ImageState=__webpack_require__("./node_modules/ol/ImageState.js"),Image=__webpack_require__("./node_modules/ol/Image.js"),common=__webpack_require__("./node_modules/ol/reproj/common.js"),Triangulation=__webpack_require__("./node_modules/ol/reproj/Triangulation.js"),reproj=__webpack_require__("./node_modules/ol/reproj.js");function fromResolutionLike(resolution){return Array.isArray(resolution)?Math.min(...resolution):resolution}var ol_extent=__webpack_require__("./node_modules/ol/extent.js"),events=__webpack_require__("./node_modules/ol/events.js");class ReprojImage extends Image.ZP{constructor(sourceProj,targetProj,targetExtent,targetResolution,pixelRatio,getImageFunction,interpolate){let maxSourceExtent=sourceProj.getExtent();maxSourceExtent&&sourceProj.canWrapX()&&(maxSourceExtent=maxSourceExtent.slice(),maxSourceExtent[0]=-1/0,maxSourceExtent[2]=1/0);let maxTargetExtent=targetProj.getExtent();maxTargetExtent&&targetProj.canWrapX()&&(maxTargetExtent=maxTargetExtent.slice(),maxTargetExtent[0]=-1/0,maxTargetExtent[2]=1/0);const limitedTargetExtent=maxTargetExtent?(0,ol_extent.Ed)(targetExtent,maxTargetExtent):targetExtent,targetCenter=(0,ol_extent.qg)(limitedTargetExtent),sourceResolution=(0,reproj.aA)(sourceProj,targetProj,targetCenter,targetResolution),errorThresholdInPixels=common.m,triangulation=new Triangulation.Z(sourceProj,targetProj,limitedTargetExtent,maxSourceExtent,sourceResolution*errorThresholdInPixels,targetResolution),sourceExtent=triangulation.calculateSourceExtent(),sourceImage=(0,ol_extent.xb)(sourceExtent)?null:getImageFunction(sourceExtent,sourceResolution,pixelRatio),state=sourceImage?ImageState.Z.IDLE:ImageState.Z.EMPTY,sourcePixelRatio=sourceImage?sourceImage.getPixelRatio():1;super(targetExtent,targetResolution,sourcePixelRatio,state),this.targetProj_=targetProj,this.maxSourceExtent_=maxSourceExtent,this.triangulation_=triangulation,this.targetResolution_=targetResolution,this.targetExtent_=targetExtent,this.sourceImage_=sourceImage,this.sourcePixelRatio_=sourcePixelRatio,this.interpolate_=interpolate,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ImageState.Z.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const sourceState=this.sourceImage_.getState();if(sourceState==ImageState.Z.LOADED){const width=(0,ol_extent.dz)(this.targetExtent_)/this.targetResolution_,height=(0,ol_extent.Cr)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,reproj.sY)(width,height,this.sourcePixelRatio_,fromResolutionLike(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=sourceState,this.changed()}load(){if(this.state==ImageState.Z.IDLE){this.state=ImageState.Z.LOADING,this.changed();const sourceState=this.sourceImage_.getState();sourceState==ImageState.Z.LOADED||sourceState==ImageState.Z.ERROR?this.reproject_():(this.sourceListenerKey_=(0,events.oL)(this.sourceImage_,EventType.Z.CHANGE,(function(e){const sourceState=this.sourceImage_.getState();sourceState!=ImageState.Z.LOADED&&sourceState!=ImageState.Z.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}}unlistenSource_(){(0,events.bN)(this.sourceListenerKey_),this.sourceListenerKey_=null}}const reproj_Image=ReprojImage;var Source=__webpack_require__("./node_modules/ol/source/Source.js"),source_common=__webpack_require__("./node_modules/ol/source/common.js"),math=__webpack_require__("./node_modules/ol/math.js"),proj=__webpack_require__("./node_modules/ol/proj.js"),array=__webpack_require__("./node_modules/ol/array.js");const ImageSourceEventType_IMAGELOADSTART="imageloadstart",ImageSourceEventType_IMAGELOADEND="imageloadend",ImageSourceEventType_IMAGELOADERROR="imageloaderror";class ImageSourceEvent extends Event.ZP{constructor(type,image){super(type),this.image=image}}class ImageSource extends Source.Z{constructor(options){super({attributions:options.attributions,projection:options.projection,state:options.state,interpolate:void 0===options.interpolate||options.interpolate}),this.on,this.once,this.un,this.loader=options.loader||null,this.resolutions_=void 0!==options.resolutions?options.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!options.loader&&0===options.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(resolutions){this.resolutions_=resolutions}findNearestResolution(resolution){const resolutions=this.getResolutions();if(resolutions){resolution=resolutions[(0,array.h7)(resolutions,resolution,0)]}return resolution}getImage(extent,resolution,pixelRatio,projection){const sourceProjection=this.getProjection();if(!sourceProjection||!projection||(0,proj.OP)(sourceProjection,projection))return sourceProjection&&(projection=sourceProjection),this.getImageInternal(extent,resolution,pixelRatio,projection);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,proj.OP)(this.reprojectedImage_.getProjection(),projection)&&this.reprojectedImage_.getResolution()==resolution&&(0,ol_extent.fS)(this.reprojectedImage_.getExtent(),extent))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new reproj_Image(sourceProjection,projection,extent,resolution,pixelRatio,((extent,resolution,pixelRatio)=>this.getImageInternal(extent,resolution,pixelRatio,sourceProjection)),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(extent,resolution,pixelRatio,projection){if(this.loader){const requestExtent=getRequestExtent(extent,resolution,pixelRatio,1),requestResolution=this.findNearestResolution(resolution);if(this.image&&(this.static_||this.wantedProjection_===projection&&(this.wantedExtent_&&(0,ol_extent.r4)(this.wantedExtent_,requestExtent)||(0,ol_extent.r4)(this.image.getExtent(),requestExtent))&&(this.wantedResolution_&&fromResolutionLike(this.wantedResolution_)===requestResolution||fromResolutionLike(this.image.getResolution())===requestResolution)))return this.image;this.wantedProjection_=projection,this.wantedExtent_=requestExtent,this.wantedResolution_=requestResolution,this.image=new Image.ZP(requestExtent,requestResolution,pixelRatio,this.loader),this.image.addEventListener(EventType.Z.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(event){const image=event.target;let type;switch(image.getState()){case ImageState.Z.LOADING:this.loading=!0,type=ImageSourceEventType_IMAGELOADSTART;break;case ImageState.Z.LOADED:this.loading=!1,type=ImageSourceEventType_IMAGELOADEND;break;case ImageState.Z.ERROR:this.loading=!1,type=ImageSourceEventType_IMAGELOADERROR;break;default:return}this.hasListener(type)&&this.dispatchEvent(new ImageSourceEvent(type,image))}}function defaultImageLoadFunction(image,src){image.getImage().src=src}function getRequestExtent(extent,resolution,pixelRatio,ratio){const imageResolution=resolution/pixelRatio,center=(0,ol_extent.qg)(extent),viewWidth=(0,math.mD)((0,ol_extent.dz)(extent)/imageResolution,source_common.L),viewHeight=(0,math.mD)((0,ol_extent.Cr)(extent)/imageResolution,source_common.L),requestWidth=viewWidth+2*(0,math.mD)((ratio-1)*viewWidth/2,source_common.L),requestHeight=viewHeight+2*(0,math.mD)((ratio-1)*viewHeight/2,source_common.L);return(0,ol_extent.p8)(center,imageResolution,0,[requestWidth,requestHeight])}const source_Image=ImageSource},"./node_modules/ol/source/ImageWMS.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _Image_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/source/Image.js"),_reproj_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/reproj.js"),_wms_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/source/wms.js"),_Image_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/Image.js"),_proj_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/proj.js");class ImageWMS extends _Image_js__WEBPACK_IMPORTED_MODULE_1__.ZP{constructor(options){super({attributions:(options=options||{}).attributions,interpolate:options.interpolate,projection:options.projection,resolutions:options.resolutions}),this.crossOrigin_=void 0!==options.crossOrigin?options.crossOrigin:null,this.url_=options.url,this.imageLoadFunction_=void 0!==options.imageLoadFunction?options.imageLoadFunction:_Image_js__WEBPACK_IMPORTED_MODULE_1__.r6,this.params_=options.params,this.serverType_=options.serverType,this.hidpi_=void 0===options.hidpi||options.hidpi,this.renderedRevision_=0,this.ratio_=void 0!==options.ratio?options.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(coordinate,resolution,projection,params){const projectionObj=(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__.U2)(projection),sourceProjectionObj=this.getProjection();sourceProjectionObj&&sourceProjectionObj!==projectionObj&&(resolution=(0,_reproj_js__WEBPACK_IMPORTED_MODULE_2__.aA)(sourceProjectionObj,projectionObj,coordinate,resolution),coordinate=(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__.vs)(coordinate,projectionObj,sourceProjectionObj));const options={url:this.url_,params:{...this.params_,...params},projection:sourceProjectionObj||projectionObj};return(0,_wms_js__WEBPACK_IMPORTED_MODULE_3__.QL)(options,coordinate,resolution)}getLegendUrl(resolution,params){return(0,_wms_js__WEBPACK_IMPORTED_MODULE_3__.YT)({url:this.url_,params:{...this.params_,...params}},resolution)}getParams(){return this.params_}getImageInternal(extent,resolution,pixelRatio,projection){return void 0===this.url_?null:(this.loader&&this.loaderProjection_===projection||(this.loaderProjection_=projection,this.loader=(0,_wms_js__WEBPACK_IMPORTED_MODULE_3__.Ke)({crossOrigin:this.crossOrigin_,params:this.params_,projection,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(image,src)=>(this.image.setImage(image),this.imageLoadFunction_(this.image,src),(0,_Image_js__WEBPACK_IMPORTED_MODULE_4__.Jx)(image))})),super.getImageInternal(extent,resolution,pixelRatio,projection))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(imageLoadFunction){this.imageLoadFunction_=imageLoadFunction,this.changed()}setUrl(url){url!=this.url_&&(this.url_=url,this.loader=null,this.changed())}updateParams(params){Object.assign(this.params_,params),this.changed()}changed(){this.image=null,super.changed()}}const __WEBPACK_DEFAULT_EXPORT__=ImageWMS},"./node_modules/ol/source/Source.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _Object_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/Object.js"),_proj_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/proj.js");class Source extends _Object_js__WEBPACK_IMPORTED_MODULE_1__.Z{constructor(options){super(),this.projection=(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__.U2)(options.projection),this.attributions_=adaptAttributions(options.attributions),this.attributionsCollapsible_=void 0===options.attributionsCollapsible||options.attributionsCollapsible,this.loading=!1,this.state_=void 0!==options.state?options.state:"ready",this.wrapX_=void 0!==options.wrapX&&options.wrapX,this.interpolate_=!!options.interpolate,this.viewResolver=null,this.viewRejector=null;const self=this;this.viewPromise_=new Promise((function(resolve,reject){self.viewResolver=resolve,self.viewRejector=reject}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(projection){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(attributions){this.attributions_=adaptAttributions(attributions),this.changed()}setState(state){this.state_=state,this.changed()}}function adaptAttributions(attributionLike){return attributionLike?Array.isArray(attributionLike)?function(frameState){return attributionLike}:"function"==typeof attributionLike?attributionLike:function(frameState){return[attributionLike]}:null}const __WEBPACK_DEFAULT_EXPORT__=Source},"./node_modules/ol/source/TileImage.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>source_TileImage});var EventType=__webpack_require__("./node_modules/ol/events/EventType.js"),ImageTile=__webpack_require__("./node_modules/ol/ImageTile.js"),Tile=__webpack_require__("./node_modules/ol/reproj/Tile.js"),asserts=__webpack_require__("./node_modules/ol/asserts.js");const structs_LRUCache=class LRUCache{constructor(highWaterMark){this.highWaterMark=void 0!==highWaterMark?highWaterMark:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(keep){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(key){return this.entries_.hasOwnProperty(key)}forEach(f){let entry=this.oldest_;for(;entry;)f(entry.value_,entry.key_,this),entry=entry.newer}get(key,options){const entry=this.entries_[key];return(0,asserts.h)(void 0!==entry,"Tried to get a value for a key that does not exist in the cache"),entry===this.newest_||(entry===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(entry.newer.older=entry.older,entry.older.newer=entry.newer),entry.newer=null,entry.older=this.newest_,this.newest_.newer=entry,this.newest_=entry),entry.value_}remove(key){const entry=this.entries_[key];return(0,asserts.h)(void 0!==entry,"Tried to get a value for a key that does not exist in the cache"),entry===this.newest_?(this.newest_=entry.older,this.newest_&&(this.newest_.newer=null)):entry===this.oldest_?(this.oldest_=entry.newer,this.oldest_&&(this.oldest_.older=null)):(entry.newer.older=entry.older,entry.older.newer=entry.newer),delete this.entries_[key],--this.count_,entry.value_}getCount(){return this.count_}getKeys(){const keys=new Array(this.count_);let entry,i=0;for(entry=this.newest_;entry;entry=entry.older)keys[i++]=entry.key_;return keys}getValues(){const values=new Array(this.count_);let entry,i=0;for(entry=this.newest_;entry;entry=entry.older)values[i++]=entry.value_;return values}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(key){return this.entries_[key]?.value_}pop(){const entry=this.oldest_;return delete this.entries_[entry.key_],entry.newer&&(entry.newer.older=null),this.oldest_=entry.newer,this.oldest_||(this.newest_=null),--this.count_,entry.value_}replace(key,value){this.get(key),this.entries_[key].value_=value}set(key,value){(0,asserts.h)(!(key in this.entries_),"Tried to set a value for a key that is used already");const entry={key_:key,newer:null,older:this.newest_,value_:value};this.newest_?this.newest_.newer=entry:this.oldest_=entry,this.newest_=entry,this.entries_[key]=entry,++this.count_}setSize(size){this.highWaterMark=size}};var tilecoord=__webpack_require__("./node_modules/ol/tilecoord.js");const ol_TileCache=class TileCache extends structs_LRUCache{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(usedTiles){for(;this.canExpireCache();){if(this.peekLast().getKey()in usedTiles)break;this.pop().release()}}pruneExceptNewestZ(){if(0===this.getCount())return;const key=this.peekFirstKey(),z=(0,tilecoord.Ul)(key)[0];this.forEach((tile=>{tile.tileCoord[0]!==z&&(this.remove((0,tilecoord.km)(tile.tileCoord)),tile.release())}))}};var TileState=__webpack_require__("./node_modules/ol/TileState.js");const TileEventType_TILELOADSTART="tileloadstart",TileEventType_TILELOADEND="tileloadend",TileEventType_TILELOADERROR="tileloaderror";var Event=__webpack_require__("./node_modules/ol/events/Event.js"),Source=__webpack_require__("./node_modules/ol/source/Source.js"),util=__webpack_require__("./node_modules/ol/util.js"),ol_proj=__webpack_require__("./node_modules/ol/proj.js"),tilegrid=__webpack_require__("./node_modules/ol/tilegrid.js"),size=__webpack_require__("./node_modules/ol/size.js");class TileSource extends Source.Z{constructor(options){super({attributions:options.attributions,attributionsCollapsible:options.attributionsCollapsible,projection:options.projection,state:options.state,wrapX:options.wrapX,interpolate:options.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==options.opaque&&options.opaque,this.tilePixelRatio_=void 0!==options.tilePixelRatio?options.tilePixelRatio:1,this.tileGrid=void 0!==options.tileGrid?options.tileGrid:null;const tileSize=[256,256];this.tileGrid&&(0,size.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),tileSize),this.tileCache=new ol_TileCache(options.cacheSize||0),this.tmpSize=[0,0],this.key_=options.key||"",this.tileOptions={transition:options.transition,interpolate:options.interpolate},this.zDirection=options.zDirection?options.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(projection,usedTiles){const tileCache=this.getTileCacheForProjection(projection);tileCache&&tileCache.expireCache(usedTiles)}forEachLoadedTile(projection,z,tileRange,callback){const tileCache=this.getTileCacheForProjection(projection);if(!tileCache)return!1;let tile,tileCoordKey,loaded,covered=!0;for(let x=tileRange.minX;x<=tileRange.maxX;++x)for(let y=tileRange.minY;y<=tileRange.maxY;++y)tileCoordKey=(0,tilecoord.lg)(z,x,y),loaded=!1,tileCache.containsKey(tileCoordKey)&&(tile=tileCache.get(tileCoordKey),loaded=tile.getState()===TileState.Z.LOADED,loaded&&(loaded=!1!==callback(tile))),loaded||(covered=!1);return covered}getGutterForProjection(projection){return 0}getKey(){return this.key_}setKey(key){this.key_!==key&&(this.key_=key,this.changed())}getOpaque(projection){return this.opaque_}getResolutions(projection){const tileGrid=projection?this.getTileGridForProjection(projection):this.tileGrid;return tileGrid?tileGrid.getResolutions():null}getTile(z,x,y,pixelRatio,projection){return(0,util.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(projection){return this.tileGrid?this.tileGrid:(0,tilegrid.X$)(projection)}getTileCacheForProjection(projection){const sourceProjection=this.getProjection();return(0,asserts.h)(null===sourceProjection||(0,ol_proj.OP)(sourceProjection,projection),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(pixelRatio){return this.tilePixelRatio_}getTilePixelSize(z,pixelRatio,projection){const tileGrid=this.getTileGridForProjection(projection),tilePixelRatio=this.getTilePixelRatio(pixelRatio),tileSize=(0,size.Pq)(tileGrid.getTileSize(z),this.tmpSize);return 1==tilePixelRatio?tileSize:(0,size.bA)(tileSize,tilePixelRatio,this.tmpSize)}getTileCoordForTileUrlFunction(tileCoord,projection){projection=void 0!==projection?projection:this.getProjection();const tileGrid=this.getTileGridForProjection(projection);return this.getWrapX()&&projection.isGlobal()&&(tileCoord=(0,tilegrid.Cf)(tileGrid,tileCoord,projection)),(0,tilecoord.tE)(tileCoord,tileGrid)?tileCoord:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(tileCount,projection){const tileCache=this.getTileCacheForProjection(projection);tileCount>tileCache.highWaterMark&&(tileCache.highWaterMark=tileCount)}useTile(z,x,y,projection){}}class TileSourceEvent extends Event.ZP{constructor(type,tile){super(type),this.tile=tile}}const source_Tile=TileSource;var tileurlfunction=__webpack_require__("./node_modules/ol/tileurlfunction.js");class UrlTile extends source_Tile{constructor(options){super({attributions:options.attributions,cacheSize:options.cacheSize,opaque:options.opaque,projection:options.projection,state:options.state,tileGrid:options.tileGrid,tilePixelRatio:options.tilePixelRatio,wrapX:options.wrapX,transition:options.transition,interpolate:options.interpolate,key:options.key,attributionsCollapsible:options.attributionsCollapsible,zDirection:options.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=options.tileLoadFunction,options.tileUrlFunction&&(this.tileUrlFunction=options.tileUrlFunction),this.urls=null,options.urls?this.setUrls(options.urls):options.url&&this.setUrl(options.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(event){const tile=event.target,uid=(0,util.sq)(tile),tileState=tile.getState();let type;tileState==TileState.Z.LOADING?(this.tileLoadingKeys_[uid]=!0,type=TileEventType_TILELOADSTART):uid in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[uid],type=tileState==TileState.Z.ERROR?TileEventType_TILELOADERROR:tileState==TileState.Z.LOADED?TileEventType_TILELOADEND:void 0),null!=type&&this.dispatchEvent(new TileSourceEvent(type,tile))}setTileLoadFunction(tileLoadFunction){this.tileCache.clear(),this.tileLoadFunction=tileLoadFunction,this.changed()}setTileUrlFunction(tileUrlFunction,key){this.tileUrlFunction=tileUrlFunction,this.tileCache.pruneExceptNewestZ(),void 0!==key?this.setKey(key):this.changed()}setUrl(url){const urls=(0,tileurlfunction.Gk)(url);this.urls=urls,this.setUrls(urls)}setUrls(urls){this.urls=urls;const key=urls.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,tileurlfunction.uR)(urls,this.tileGrid),key):this.setKey(key)}tileUrlFunction(tileCoord,pixelRatio,projection){}useTile(z,x,y){const tileCoordKey=(0,tilecoord.lg)(z,x,y);this.tileCache.containsKey(tileCoordKey)&&this.tileCache.get(tileCoordKey)}}const source_UrlTile=UrlTile;function defaultTileLoadFunction(imageTile,src){imageTile.getImage().src=src}const source_TileImage=class TileImage extends source_UrlTile{constructor(options){super({attributions:options.attributions,cacheSize:options.cacheSize,opaque:options.opaque,projection:options.projection,state:options.state,tileGrid:options.tileGrid,tileLoadFunction:options.tileLoadFunction?options.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:options.tilePixelRatio,tileUrlFunction:options.tileUrlFunction,url:options.url,urls:options.urls,wrapX:options.wrapX,transition:options.transition,interpolate:void 0===options.interpolate||options.interpolate,key:options.key,attributionsCollapsible:options.attributionsCollapsible,zDirection:options.zDirection}),this.crossOrigin=void 0!==options.crossOrigin?options.crossOrigin:null,this.tileClass=void 0!==options.tileClass?options.tileClass:ImageTile.Z,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=options.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const key in this.tileCacheForProjection)if(this.tileCacheForProjection[key].canExpireCache())return!0;return!1}expireCache(projection,usedTiles){const usedTileCache=this.getTileCacheForProjection(projection);this.tileCache.expireCache(this.tileCache==usedTileCache?usedTiles:{});for(const id in this.tileCacheForProjection){const tileCache=this.tileCacheForProjection[id];tileCache.expireCache(tileCache==usedTileCache?usedTiles:{})}}getGutterForProjection(projection){return this.getProjection()&&projection&&!(0,ol_proj.OP)(this.getProjection(),projection)?0:this.getGutter()}getGutter(){return 0}getKey(){let key=super.getKey();return this.getInterpolate()||(key+=":disable-interpolation"),key}getOpaque(projection){return!(this.getProjection()&&projection&&!(0,ol_proj.OP)(this.getProjection(),projection))&&super.getOpaque(projection)}getTileGridForProjection(projection){const thisProj=this.getProjection();if(this.tileGrid&&(!thisProj||(0,ol_proj.OP)(thisProj,projection)))return this.tileGrid;const projKey=(0,util.sq)(projection);return projKey in this.tileGridForProjection||(this.tileGridForProjection[projKey]=(0,tilegrid.X$)(projection)),this.tileGridForProjection[projKey]}getTileCacheForProjection(projection){const thisProj=this.getProjection();if(!thisProj||(0,ol_proj.OP)(thisProj,projection))return this.tileCache;const projKey=(0,util.sq)(projection);return projKey in this.tileCacheForProjection||(this.tileCacheForProjection[projKey]=new ol_TileCache(this.tileCache.highWaterMark)),this.tileCacheForProjection[projKey]}createTile_(z,x,y,pixelRatio,projection,key){const tileCoord=[z,x,y],urlTileCoord=this.getTileCoordForTileUrlFunction(tileCoord,projection),tileUrl=urlTileCoord?this.tileUrlFunction(urlTileCoord,pixelRatio,projection):void 0,tile=new this.tileClass(tileCoord,void 0!==tileUrl?TileState.Z.IDLE:TileState.Z.EMPTY,void 0!==tileUrl?tileUrl:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return tile.key=key,tile.addEventListener(EventType.Z.CHANGE,this.handleTileChange.bind(this)),tile}getTile(z,x,y,pixelRatio,projection){const sourceProjection=this.getProjection();if(!sourceProjection||!projection||(0,ol_proj.OP)(sourceProjection,projection))return this.getTileInternal(z,x,y,pixelRatio,sourceProjection||projection);const cache=this.getTileCacheForProjection(projection),tileCoord=[z,x,y];let tile;const tileCoordKey=(0,tilecoord.km)(tileCoord);cache.containsKey(tileCoordKey)&&(tile=cache.get(tileCoordKey));const key=this.getKey();if(tile&&tile.key==key)return tile;const sourceTileGrid=this.getTileGridForProjection(sourceProjection),targetTileGrid=this.getTileGridForProjection(projection),wrappedTileCoord=this.getTileCoordForTileUrlFunction(tileCoord,projection),newTile=new Tile.Z(sourceProjection,sourceTileGrid,projection,targetTileGrid,tileCoord,wrappedTileCoord,this.getTilePixelRatio(pixelRatio),this.getGutter(),((z,x,y,pixelRatio)=>this.getTileInternal(z,x,y,pixelRatio,sourceProjection)),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return newTile.key=key,tile?(newTile.interimTile=tile,newTile.refreshInterimChain(),cache.replace(tileCoordKey,newTile)):cache.set(tileCoordKey,newTile),newTile}getTileInternal(z,x,y,pixelRatio,projection){let tile=null;const tileCoordKey=(0,tilecoord.lg)(z,x,y),key=this.getKey();if(this.tileCache.containsKey(tileCoordKey)){if(tile=this.tileCache.get(tileCoordKey),tile.key!=key){const interimTile=tile;tile=this.createTile_(z,x,y,pixelRatio,projection,key),interimTile.getState()==TileState.Z.IDLE?tile.interimTile=interimTile.interimTile:tile.interimTile=interimTile,tile.refreshInterimChain(),this.tileCache.replace(tileCoordKey,tile)}}else tile=this.createTile_(z,x,y,pixelRatio,projection,key),this.tileCache.set(tileCoordKey,tile);return tile}setRenderReprojectionEdges(render){if(this.renderReprojectionEdges_!=render){this.renderReprojectionEdges_=render;for(const id in this.tileCacheForProjection)this.tileCacheForProjection[id].clear();this.changed()}}setTileGridForProjection(projection,tilegrid){const proj=(0,ol_proj.U2)(projection);if(proj){const projKey=(0,util.sq)(proj);projKey in this.tileGridForProjection||(this.tileGridForProjection[projKey]=tilegrid)}}clear(){super.clear();for(const id in this.tileCacheForProjection)this.tileCacheForProjection[id].clear()}}},"./node_modules/ol/source/TileWMS.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _TileImage_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/source/TileImage.js"),_wms_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/source/wms.js"),_uri_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/ol/uri.js"),_extent_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/extent.js"),_reproj_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/reproj.js"),_string_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/ol/string.js"),_proj_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/proj.js"),_math_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/ol/math.js"),_tilecoord_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/ol/tilecoord.js");class TileWMS extends _TileImage_js__WEBPACK_IMPORTED_MODULE_1__.Z{constructor(options){options=options||{};const params=Object.assign({},options.params),transparent=!("TRANSPARENT"in params)||params.TRANSPARENT;super({attributions:options.attributions,attributionsCollapsible:options.attributionsCollapsible,cacheSize:options.cacheSize,crossOrigin:options.crossOrigin,interpolate:options.interpolate,opaque:!transparent,projection:options.projection,reprojectionErrorThreshold:options.reprojectionErrorThreshold,tileClass:options.tileClass,tileGrid:options.tileGrid,tileLoadFunction:options.tileLoadFunction,url:options.url,urls:options.urls,wrapX:void 0===options.wrapX||options.wrapX,transition:options.transition,zDirection:options.zDirection}),this.gutter_=void 0!==options.gutter?options.gutter:0,this.params_=params,this.v13_=!0,this.serverType_=options.serverType,this.hidpi_=void 0===options.hidpi||options.hidpi,this.tmpExtent_=(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.lJ)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(coordinate,resolution,projection,params){const projectionObj=(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__.U2)(projection),sourceProjectionObj=this.getProjection()||projectionObj;let tileGrid=this.getTileGrid();tileGrid||(tileGrid=this.getTileGridForProjection(sourceProjectionObj));const sourceProjCoord=(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__.vs)(coordinate,projectionObj,sourceProjectionObj),sourceResolution=(0,_reproj_js__WEBPACK_IMPORTED_MODULE_3__.aA)(sourceProjectionObj,projectionObj,coordinate,resolution),z=tileGrid.getZForResolution(sourceResolution,this.zDirection),tileResolution=tileGrid.getResolution(z),tileCoord=tileGrid.getTileCoordForCoordAndZ(sourceProjCoord,z);if(tileGrid.getResolutions().length<=tileCoord[0])return;let tileExtent=tileGrid.getTileCoordExtent(tileCoord,this.tmpExtent_);const gutter=this.gutter_;0!==gutter&&(tileExtent=(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.f3)(tileExtent,tileResolution*gutter,tileExtent));const baseParams={QUERY_LAYERS:this.params_.LAYERS};Object.assign(baseParams,(0,_wms_js__WEBPACK_IMPORTED_MODULE_4__.jt)(this.params_,"GetFeatureInfo"),params);const x=Math.floor((sourceProjCoord[0]-tileExtent[0])/tileResolution),y=Math.floor((tileExtent[3]-sourceProjCoord[1])/tileResolution);return baseParams[this.v13_?"I":"X"]=x,baseParams[this.v13_?"J":"Y"]=y,this.getRequestUrl_(tileCoord,tileExtent,1,sourceProjectionObj||projectionObj,baseParams)}getLegendUrl(resolution,params){if(void 0===this.urls[0])return;const baseParams={SERVICE:"WMS",VERSION:_wms_js__WEBPACK_IMPORTED_MODULE_4__.eQ,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===params||void 0===params.LAYER){const layers=this.params_.LAYERS;if(!(!Array.isArray(layers)||1===layers.length))return;baseParams.LAYER=layers}if(void 0!==resolution){const mpu=this.getProjection()?this.getProjection().getMetersPerUnit():1,pixelSize=28e-5;baseParams.SCALE=resolution*mpu/pixelSize}return Object.assign(baseParams,params),(0,_uri_js__WEBPACK_IMPORTED_MODULE_5__.B)(this.urls[0],baseParams)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(tileCoord,tileExtent,pixelRatio,projection,params){const urls=this.urls;if(!urls)return;let url;if(1==urls.length)url=urls[0];else{url=urls[(0,_math_js__WEBPACK_IMPORTED_MODULE_6__.$W)((0,_tilecoord_js__WEBPACK_IMPORTED_MODULE_7__.vp)(tileCoord),urls.length)]}return(0,_wms_js__WEBPACK_IMPORTED_MODULE_4__.Q4)(tileExtent,(this.tileGrid||this.getTileGridForProjection(projection)).getResolution(tileCoord[0]),pixelRatio,projection,url,params,this.serverType_)}getTilePixelRatio(pixelRatio){return this.hidpi_&&void 0!==this.serverType_?pixelRatio:1}getKeyForParams_(){let i=0;const res=[];for(const key in this.params_)res[i++]=key+"-"+this.params_[key];return res.join("/")}updateParams(params){Object.assign(this.params_,params),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const version=this.params_.VERSION||_wms_js__WEBPACK_IMPORTED_MODULE_4__.eQ;this.v13_=(0,_string_js__WEBPACK_IMPORTED_MODULE_8__.n)(version,"1.3")>=0}tileUrlFunction(tileCoord,pixelRatio,projection){let tileGrid=this.getTileGrid();if(tileGrid||(tileGrid=this.getTileGridForProjection(projection)),tileGrid.getResolutions().length<=tileCoord[0])return;1==pixelRatio||this.hidpi_&&void 0!==this.serverType_||(pixelRatio=1);const tileResolution=tileGrid.getResolution(tileCoord[0]);let tileExtent=tileGrid.getTileCoordExtent(tileCoord,this.tmpExtent_);const gutter=this.gutter_;0!==gutter&&(tileExtent=(0,_extent_js__WEBPACK_IMPORTED_MODULE_2__.f3)(tileExtent,tileResolution*gutter,tileExtent));const baseParams=Object.assign({},(0,_wms_js__WEBPACK_IMPORTED_MODULE_4__.jt)(this.params_,"GetMap"));return this.getRequestUrl_(tileCoord,tileExtent,pixelRatio,projection,baseParams)}}const __WEBPACK_DEFAULT_EXPORT__=TileWMS},"./node_modules/ol/source/Vector.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Vector});var Collection=__webpack_require__("./node_modules/ol/Collection.js"),CollectionEventType=__webpack_require__("./node_modules/ol/CollectionEventType.js"),Event=__webpack_require__("./node_modules/ol/events/Event.js"),EventType=__webpack_require__("./node_modules/ol/events/EventType.js"),ObjectEventType=__webpack_require__("./node_modules/ol/ObjectEventType.js"),rbush_min=__webpack_require__("./node_modules/rbush/rbush.min.js"),rbush_min_default=__webpack_require__.n(rbush_min),ol_extent=__webpack_require__("./node_modules/ol/extent.js"),util=__webpack_require__("./node_modules/ol/util.js"),obj=__webpack_require__("./node_modules/ol/obj.js");const structs_RBush=class RBush{constructor(maxEntries){this.rbush_=new(rbush_min_default())(maxEntries),this.items_={}}insert(extent,value){const item={minX:extent[0],minY:extent[1],maxX:extent[2],maxY:extent[3],value};this.rbush_.insert(item),this.items_[(0,util.sq)(value)]=item}load(extents,values){const items=new Array(values.length);for(let i=0,l=values.length;i<l;i++){const extent=extents[i],value=values[i],item={minX:extent[0],minY:extent[1],maxX:extent[2],maxY:extent[3],value};items[i]=item,this.items_[(0,util.sq)(value)]=item}this.rbush_.load(items)}remove(value){const uid=(0,util.sq)(value),item=this.items_[uid];return delete this.items_[uid],null!==this.rbush_.remove(item)}update(extent,value){const item=this.items_[(0,util.sq)(value)],bbox=[item.minX,item.minY,item.maxX,item.maxY];(0,ol_extent.fS)(bbox,extent)||(this.remove(value),this.insert(extent,value))}getAll(){return this.rbush_.all().map((function(item){return item.value}))}getInExtent(extent){const bbox={minX:extent[0],minY:extent[1],maxX:extent[2],maxY:extent[3]};return this.rbush_.search(bbox).map((function(item){return item.value}))}forEach(callback){return this.forEach_(this.getAll(),callback)}forEachInExtent(extent,callback){return this.forEach_(this.getInExtent(extent),callback)}forEach_(values,callback){let result;for(let i=0,l=values.length;i<l;i++)if(result=callback(values[i]),result)return result;return result}isEmpty(){return(0,obj.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(extent){const data=this.rbush_.toJSON();return(0,ol_extent.T9)(data.minX,data.minY,data.maxX,data.maxY,extent)}concat(rbush){this.rbush_.load(rbush.rbush_.all());for(const i in rbush.items_)this.items_[i]=rbush.items_[i]}};var Feature=__webpack_require__("./node_modules/ol/render/Feature.js"),Source=__webpack_require__("./node_modules/ol/source/Source.js");const VectorEventType_ADDFEATURE="addfeature",VectorEventType_CHANGEFEATURE="changefeature",VectorEventType_CLEAR="clear",VectorEventType_REMOVEFEATURE="removefeature",VectorEventType_FEATURESLOADSTART="featuresloadstart",VectorEventType_FEATURESLOADEND="featuresloadend",VectorEventType_FEATURESLOADERROR="featuresloaderror";var functions=__webpack_require__("./node_modules/ol/functions.js"),loadingstrategy=__webpack_require__("./node_modules/ol/loadingstrategy.js"),asserts=__webpack_require__("./node_modules/ol/asserts.js"),array=__webpack_require__("./node_modules/ol/array.js"),events=__webpack_require__("./node_modules/ol/events.js");let withCredentials=!1;function xhr(url,format){return function(extent,resolution,projection,success,failure){const source=this;!function loadFeaturesXhr(url,format,extent,resolution,projection,success,failure){const xhr=new XMLHttpRequest;xhr.open("GET","function"==typeof url?url(extent,resolution,projection):url,!0),"arraybuffer"==format.getType()&&(xhr.responseType="arraybuffer"),xhr.withCredentials=withCredentials,xhr.onload=function(event){if(!xhr.status||xhr.status>=200&&xhr.status<300){const type=format.getType();let source;"json"==type?source=JSON.parse(xhr.responseText):"text"==type?source=xhr.responseText:"xml"==type?(source=xhr.responseXML,source||(source=(new DOMParser).parseFromString(xhr.responseText,"application/xml"))):"arraybuffer"==type&&(source=xhr.response),source?success(format.readFeatures(source,{extent,featureProjection:projection}),format.readProjection(source)):failure()}else failure()},xhr.onerror=failure,xhr.send()}(url,format,extent,resolution,projection,(function(features,dataProjection){source.addFeatures(features),void 0!==success&&success(features)}),failure||functions.Zn)}}class VectorSourceEvent extends Event.ZP{constructor(type,feature,features){super(type),this.feature=feature,this.features=features}}class VectorSource extends Source.Z{constructor(options){super({attributions:(options=options||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===options.wrapX||options.wrapX}),this.on,this.once,this.un,this.loader_=functions.Zn,this.format_=options.format,this.overlaps_=void 0===options.overlaps||options.overlaps,this.url_=options.url,void 0!==options.loader?this.loader_=options.loader:void 0!==this.url_&&((0,asserts.h)(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=void 0!==options.strategy?options.strategy:loadingstrategy.$6;const useSpatialIndex=void 0===options.useSpatialIndex||options.useSpatialIndex;let collection,features;this.featuresRtree_=useSpatialIndex?new structs_RBush:null,this.loadedExtentsRtree_=new structs_RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(options.features)?features=options.features:options.features&&(collection=options.features,features=collection.getArray()),useSpatialIndex||void 0!==collection||(collection=new Collection.Z(features)),void 0!==features&&this.addFeaturesInternal(features),void 0!==collection&&this.bindFeaturesCollection_(collection)}addFeature(feature){this.addFeatureInternal(feature),this.changed()}addFeatureInternal(feature){const featureKey=(0,util.sq)(feature);if(!this.addToIndex_(featureKey,feature))return void(this.featuresCollection_&&this.featuresCollection_.remove(feature));this.setupChangeEvents_(featureKey,feature);const geometry=feature.getGeometry();if(geometry){const extent=geometry.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(extent,feature)}else this.nullGeometryFeatures_[featureKey]=feature;this.dispatchEvent(new VectorSourceEvent(VectorEventType_ADDFEATURE,feature))}setupChangeEvents_(featureKey,feature){feature instanceof Feature.ZP||(this.featureChangeKeys_[featureKey]=[(0,events.oL)(feature,EventType.Z.CHANGE,this.handleFeatureChange_,this),(0,events.oL)(feature,ObjectEventType.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(featureKey,feature){let valid=!0;if(void 0!==feature.getId()){const id=String(feature.getId());if(id in this.idIndex_)if(feature instanceof Feature.ZP){const indexedFeature=this.idIndex_[id];indexedFeature instanceof Feature.ZP?Array.isArray(indexedFeature)?indexedFeature.push(feature):this.idIndex_[id]=[indexedFeature,feature]:valid=!1}else valid=!1;else this.idIndex_[id]=feature}return valid&&((0,asserts.h)(!(featureKey in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[featureKey]=feature),valid}addFeatures(features){this.addFeaturesInternal(features),this.changed()}addFeaturesInternal(features){const extents=[],newFeatures=[],geometryFeatures=[];for(let i=0,length=features.length;i<length;i++){const feature=features[i],featureKey=(0,util.sq)(feature);this.addToIndex_(featureKey,feature)&&newFeatures.push(feature)}for(let i=0,length=newFeatures.length;i<length;i++){const feature=newFeatures[i],featureKey=(0,util.sq)(feature);this.setupChangeEvents_(featureKey,feature);const geometry=feature.getGeometry();if(geometry){const extent=geometry.getExtent();extents.push(extent),geometryFeatures.push(feature)}else this.nullGeometryFeatures_[featureKey]=feature}if(this.featuresRtree_&&this.featuresRtree_.load(extents,geometryFeatures),this.hasListener(VectorEventType_ADDFEATURE))for(let i=0,length=newFeatures.length;i<length;i++)this.dispatchEvent(new VectorSourceEvent(VectorEventType_ADDFEATURE,newFeatures[i]))}bindFeaturesCollection_(collection){let modifyingCollection=!1;this.addEventListener(VectorEventType_ADDFEATURE,(function(evt){modifyingCollection||(modifyingCollection=!0,collection.push(evt.feature),modifyingCollection=!1)})),this.addEventListener(VectorEventType_REMOVEFEATURE,(function(evt){modifyingCollection||(modifyingCollection=!0,collection.remove(evt.feature),modifyingCollection=!1)})),collection.addEventListener(CollectionEventType.Z.ADD,(evt=>{modifyingCollection||(modifyingCollection=!0,this.addFeature(evt.element),modifyingCollection=!1)})),collection.addEventListener(CollectionEventType.Z.REMOVE,(evt=>{modifyingCollection||(modifyingCollection=!0,this.removeFeature(evt.element),modifyingCollection=!1)})),this.featuresCollection_=collection}clear(fast){if(fast){for(const featureId in this.featureChangeKeys_){this.featureChangeKeys_[featureId].forEach(events.bN)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const removeAndIgnoreReturn=feature=>{this.removeFeatureInternal(feature)};this.featuresRtree_.forEach(removeAndIgnoreReturn);for(const id in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[id])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const clearEvent=new VectorSourceEvent(VectorEventType_CLEAR);this.dispatchEvent(clearEvent),this.changed()}forEachFeature(callback){if(this.featuresRtree_)return this.featuresRtree_.forEach(callback);this.featuresCollection_&&this.featuresCollection_.forEach(callback)}forEachFeatureAtCoordinateDirect(coordinate,callback){const extent=[coordinate[0],coordinate[1],coordinate[0],coordinate[1]];return this.forEachFeatureInExtent(extent,(function(feature){const geometry=feature.getGeometry();if(geometry instanceof Feature.ZP||geometry.intersectsCoordinate(coordinate))return callback(feature)}))}forEachFeatureInExtent(extent,callback){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(extent,callback);this.featuresCollection_&&this.featuresCollection_.forEach(callback)}forEachFeatureIntersectingExtent(extent,callback){return this.forEachFeatureInExtent(extent,(function(feature){const geometry=feature.getGeometry();if(geometry instanceof Feature.ZP||geometry.intersectsExtent(extent)){const result=callback(feature);if(result)return result}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let features;return this.featuresCollection_?features=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(features=this.featuresRtree_.getAll(),(0,obj.x)(this.nullGeometryFeatures_)||(0,array.l7)(features,Object.values(this.nullGeometryFeatures_))),features}getFeaturesAtCoordinate(coordinate){const features=[];return this.forEachFeatureAtCoordinateDirect(coordinate,(function(feature){features.push(feature)})),features}getFeaturesInExtent(extent,projection){if(this.featuresRtree_){if(!(projection&&projection.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(extent);const extents=(0,ol_extent.MV)(extent,projection);return[].concat(...extents.map((anExtent=>this.featuresRtree_.getInExtent(anExtent))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(coordinate,filter){const x=coordinate[0],y=coordinate[1];let closestFeature=null;const closestPoint=[NaN,NaN];let minSquaredDistance=1/0;const extent=[-1/0,-1/0,1/0,1/0];return filter=filter||functions.uX,this.featuresRtree_.forEachInExtent(extent,(function(feature){if(filter(feature)){const geometry=feature.getGeometry(),previousMinSquaredDistance=minSquaredDistance;if(minSquaredDistance=geometry instanceof Feature.ZP?0:geometry.closestPointXY(x,y,closestPoint,minSquaredDistance),minSquaredDistance<previousMinSquaredDistance){closestFeature=feature;const minDistance=Math.sqrt(minSquaredDistance);extent[0]=x-minDistance,extent[1]=y-minDistance,extent[2]=x+minDistance,extent[3]=y+minDistance}}})),closestFeature}getExtent(extent){return this.featuresRtree_.getExtent(extent)}getFeatureById(id){const feature=this.idIndex_[id.toString()];return void 0!==feature?feature:null}getFeatureByUid(uid){const feature=this.uidIndex_[uid];return void 0!==feature?feature:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(event){const feature=event.target,featureKey=(0,util.sq)(feature),geometry=feature.getGeometry();if(geometry){const extent=geometry.getExtent();featureKey in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[featureKey],this.featuresRtree_&&this.featuresRtree_.insert(extent,feature)):this.featuresRtree_&&this.featuresRtree_.update(extent,feature)}else featureKey in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(feature),this.nullGeometryFeatures_[featureKey]=feature);const id=feature.getId();if(void 0!==id){const sid=id.toString();this.idIndex_[sid]!==feature&&(this.removeFromIdIndex_(feature),this.idIndex_[sid]=feature)}else this.removeFromIdIndex_(feature),this.uidIndex_[featureKey]=feature;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType_CHANGEFEATURE,feature))}hasFeature(feature){const id=feature.getId();return void 0!==id?id in this.idIndex_:(0,util.sq)(feature)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,obj.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(extent,resolution,projection){const loadedExtentsRtree=this.loadedExtentsRtree_,extentsToLoad=this.strategy_(extent,resolution,projection);for(let i=0,ii=extentsToLoad.length;i<ii;++i){const extentToLoad=extentsToLoad[i];loadedExtentsRtree.forEachInExtent(extentToLoad,(function(object){return(0,ol_extent.r4)(object.extent,extentToLoad)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType_FEATURESLOADSTART)),this.loader_.call(this,extentToLoad,resolution,projection,(features=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType_FEATURESLOADEND,void 0,features))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType_FEATURESLOADERROR))})),loadedExtentsRtree.insert(extentToLoad,{extent:extentToLoad.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(extent){const loadedExtentsRtree=this.loadedExtentsRtree_;let obj;loadedExtentsRtree.forEachInExtent(extent,(function(object){if((0,ol_extent.fS)(object.extent,extent))return obj=object,!0})),obj&&loadedExtentsRtree.remove(obj)}removeFeature(feature){if(!feature)return;const featureKey=(0,util.sq)(feature);featureKey in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[featureKey]:this.featuresRtree_&&this.featuresRtree_.remove(feature);this.removeFeatureInternal(feature)&&this.changed()}removeFeatureInternal(feature){const featureKey=(0,util.sq)(feature),featureChangeKeys=this.featureChangeKeys_[featureKey];if(!featureChangeKeys)return;featureChangeKeys.forEach(events.bN),delete this.featureChangeKeys_[featureKey];const id=feature.getId();return void 0!==id&&delete this.idIndex_[id.toString()],delete this.uidIndex_[featureKey],this.dispatchEvent(new VectorSourceEvent(VectorEventType_REMOVEFEATURE,feature)),feature}removeFromIdIndex_(feature){let removed=!1;for(const id in this.idIndex_){const indexedFeature=this.idIndex_[id];if(feature instanceof Feature.ZP&&Array.isArray(indexedFeature)&&indexedFeature.includes(feature))indexedFeature.splice(indexedFeature.indexOf(feature),1);else if(this.idIndex_[id]===feature){delete this.idIndex_[id],removed=!0;break}}return removed}setLoader(loader){this.loader_=loader}setUrl(url){(0,asserts.h)(this.format_,"`format` must be set when `url` is set"),this.url_=url,this.setLoader(xhr(url,this.format_))}}const Vector=VectorSource},"./node_modules/ol/source/WMTS.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _TileImage_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/source/TileImage.js"),_uri_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/uri.js"),_tileurlfunction_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/tileurlfunction.js");__webpack_require__("./node_modules/ol/proj.js");class WMTS extends _TileImage_js__WEBPACK_IMPORTED_MODULE_1__.Z{constructor(options){const requestEncoding=void 0!==options.requestEncoding?options.requestEncoding:"KVP",tileGrid=options.tileGrid;let urls=options.urls;void 0===urls&&void 0!==options.url&&(urls=(0,_tileurlfunction_js__WEBPACK_IMPORTED_MODULE_2__.Gk)(options.url)),super({attributions:options.attributions,attributionsCollapsible:options.attributionsCollapsible,cacheSize:options.cacheSize,crossOrigin:options.crossOrigin,interpolate:options.interpolate,projection:options.projection,reprojectionErrorThreshold:options.reprojectionErrorThreshold,tileClass:options.tileClass,tileGrid,tileLoadFunction:options.tileLoadFunction,tilePixelRatio:options.tilePixelRatio,urls,wrapX:void 0!==options.wrapX&&options.wrapX,transition:options.transition,zDirection:options.zDirection}),this.version_=void 0!==options.version?options.version:"1.0.0",this.format_=void 0!==options.format?options.format:"image/jpeg",this.dimensions_=void 0!==options.dimensions?options.dimensions:{},this.layer_=options.layer,this.matrixSet_=options.matrixSet,this.style_=options.style,this.requestEncoding_=requestEncoding,this.setKey(this.getKeyForDimensions_()),urls&&urls.length>0&&(this.tileUrlFunction=(0,_tileurlfunction_js__WEBPACK_IMPORTED_MODULE_2__.Un)(urls.map(this.createFromWMTSTemplate.bind(this))))}setUrls(urls){this.urls=urls;const key=urls.join("\n");this.setTileUrlFunction((0,_tileurlfunction_js__WEBPACK_IMPORTED_MODULE_2__.Un)(urls.map(this.createFromWMTSTemplate.bind(this))),key)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const res=this.urls?this.urls.slice(0):[];for(const key in this.dimensions_)res.push(key+"-"+this.dimensions_[key]);return res.join("/")}updateDimensions(dimensions){Object.assign(this.dimensions_,dimensions),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(template){const requestEncoding=this.requestEncoding_,context={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==requestEncoding&&Object.assign(context,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),template="KVP"==requestEncoding?(0,_uri_js__WEBPACK_IMPORTED_MODULE_3__.B)(template,context):template.replace(/\{(\w+?)\}/g,(function(m,p){return p.toLowerCase()in context?context[p.toLowerCase()]:m}));const tileGrid=this.tileGrid,dimensions=this.dimensions_;return function(tileCoord,pixelRatio,projection){if(!tileCoord)return;const localContext={TileMatrix:tileGrid.getMatrixId(tileCoord[0]),TileCol:tileCoord[1],TileRow:tileCoord[2]};Object.assign(localContext,dimensions);let url=template;return url="KVP"==requestEncoding?(0,_uri_js__WEBPACK_IMPORTED_MODULE_3__.B)(url,localContext):url.replace(/\{(\w+?)\}/g,(function(m,p){return localContext[p]})),url}}}const __WEBPACK_DEFAULT_EXPORT__=WMTS},"./node_modules/ol/source/XYZ.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _TileImage_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/source/TileImage.js"),_tilegrid_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/tilegrid.js");class XYZ extends _TileImage_js__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(options){const projection=void 0!==(options=options||{}).projection?options.projection:"EPSG:3857",tileGrid=void 0!==options.tileGrid?options.tileGrid:(0,_tilegrid_js__WEBPACK_IMPORTED_MODULE_1__.dl)({extent:(0,_tilegrid_js__WEBPACK_IMPORTED_MODULE_1__.Tl)(projection),maxResolution:options.maxResolution,maxZoom:options.maxZoom,minZoom:options.minZoom,tileSize:options.tileSize});super({attributions:options.attributions,cacheSize:options.cacheSize,crossOrigin:options.crossOrigin,interpolate:options.interpolate,opaque:options.opaque,projection,reprojectionErrorThreshold:options.reprojectionErrorThreshold,tileGrid,tileLoadFunction:options.tileLoadFunction,tilePixelRatio:options.tilePixelRatio,tileUrlFunction:options.tileUrlFunction,url:options.url,urls:options.urls,wrapX:void 0===options.wrapX||options.wrapX,transition:options.transition,attributionsCollapsible:options.attributionsCollapsible,zDirection:options.zDirection}),this.gutter_=void 0!==options.gutter?options.gutter:0}getGutter(){return this.gutter_}}const __WEBPACK_DEFAULT_EXPORT__=XYZ},"./node_modules/ol/source/common.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>DECIMALS});const DECIMALS=4},"./node_modules/ol/source/wms.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ke:()=>createLoader,Q4:()=>getImageSrc,QL:()=>getFeatureInfoUrl,YT:()=>getLegendUrl,eQ:()=>DEFAULT_VERSION,jt:()=>getRequestParams});var _common_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/ol/source/common.js"),_uri_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/uri.js"),_string_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/string.js"),_Image_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/ol/Image.js"),_math_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/math.js"),_extent_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/extent.js"),_proj_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/proj.js"),_Image_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/ol/source/Image.js");const DEFAULT_VERSION="1.3.0",GETFEATUREINFO_IMAGE_SIZE=[101,101];function getRequestUrl(baseUrl,extent,size,projection,params){params.WIDTH=size[0],params.HEIGHT=size[1];const axisOrientation=projection.getAxisOrientation();let bbox;const v13=(0,_string_js__WEBPACK_IMPORTED_MODULE_1__.n)(params.VERSION,"1.3")>=0;return params[v13?"CRS":"SRS"]=projection.getCode(),bbox=v13&&"ne"==axisOrientation.substr(0,2)?[extent[1],extent[0],extent[3],extent[2]]:extent,params.BBOX=bbox.join(","),(0,_uri_js__WEBPACK_IMPORTED_MODULE_2__.B)(baseUrl,params)}function getImageSrc(extent,resolution,pixelRatio,projection,url,params,serverType){params=Object.assign({REQUEST:"GetMap"},params);const imageResolution=resolution/pixelRatio,imageSize=[(0,_math_js__WEBPACK_IMPORTED_MODULE_3__.NM)((0,_extent_js__WEBPACK_IMPORTED_MODULE_4__.dz)(extent)/imageResolution,_common_js__WEBPACK_IMPORTED_MODULE_5__.L),(0,_math_js__WEBPACK_IMPORTED_MODULE_3__.NM)((0,_extent_js__WEBPACK_IMPORTED_MODULE_4__.Cr)(extent)/imageResolution,_common_js__WEBPACK_IMPORTED_MODULE_5__.L)];if(1!=pixelRatio)switch(serverType){case"geoserver":const dpi=90*pixelRatio+.5|0;"FORMAT_OPTIONS"in params?params.FORMAT_OPTIONS+=";dpi:"+dpi:params.FORMAT_OPTIONS="dpi:"+dpi;break;case"mapserver":params.MAP_RESOLUTION=90*pixelRatio;break;case"carmentaserver":case"qgis":params.DPI=90*pixelRatio;break;default:throw new Error("Unknown `serverType` configured")}return getRequestUrl(url,extent,imageSize,projection,params)}function getRequestParams(params,request){return Object.assign({REQUEST:request,SERVICE:"WMS",VERSION:DEFAULT_VERSION,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},params)}function createLoader(options){const hidpi=void 0===options.hidpi||options.hidpi,projection=(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__.U2)(options.projection||"EPSG:3857"),ratio=options.ratio||1.5,load=options.load||_Image_js__WEBPACK_IMPORTED_MODULE_6__.Jx;return(extent,resolution,pixelRatio)=>{extent=(0,_Image_js__WEBPACK_IMPORTED_MODULE_7__.Ps)(extent,resolution,pixelRatio,ratio),1==pixelRatio||hidpi&&void 0!==options.serverType||(pixelRatio=1);const src=getImageSrc(extent,resolution,pixelRatio,projection,options.url,getRequestParams(options.params,"GetMap"),options.serverType),image=new Image;return null!==options.crossOrigin&&(image.crossOrigin=options.crossOrigin),load(image,src).then((image=>({image,extent,pixelRatio})))}}function getFeatureInfoUrl(options,coordinate,resolution){if(void 0===options.url)return;const projectionObj=(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__.U2)(options.projection||"EPSG:3857"),extent=(0,_extent_js__WEBPACK_IMPORTED_MODULE_4__.p8)(coordinate,resolution,0,GETFEATUREINFO_IMAGE_SIZE),baseParams={QUERY_LAYERS:options.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(baseParams,getRequestParams(options.params,"GetFeatureInfo"),options.params);const x=(0,_math_js__WEBPACK_IMPORTED_MODULE_3__.GW)((coordinate[0]-extent[0])/resolution,_common_js__WEBPACK_IMPORTED_MODULE_5__.L),y=(0,_math_js__WEBPACK_IMPORTED_MODULE_3__.GW)((extent[3]-coordinate[1])/resolution,_common_js__WEBPACK_IMPORTED_MODULE_5__.L),v13=(0,_string_js__WEBPACK_IMPORTED_MODULE_1__.n)(baseParams.VERSION,"1.3")>=0;return baseParams[v13?"I":"X"]=x,baseParams[v13?"J":"Y"]=y,getRequestUrl(options.url,extent,GETFEATUREINFO_IMAGE_SIZE,projectionObj,baseParams)}function getLegendUrl(options,resolution){if(void 0===options.url)return;const baseParams={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===options.params||void 0===options.params.LAYER){const layers=options.params.LAYERS;if(!(!Array.isArray(layers)||1===layers.length))return;baseParams.LAYER=layers}if(void 0!==resolution){const mpu=(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__.U2)(options.projection||"EPSG:3857").getMetersPerUnit()||1,pixelSize=28e-5;baseParams.SCALE=resolution*mpu/pixelSize}return Object.assign(baseParams,options.params),(0,_uri_js__WEBPACK_IMPORTED_MODULE_2__.B)(options.url,baseParams)}},"./node_modules/ol/string.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function compareVersions(v1,v2){const s1=(""+v1).split("."),s2=(""+v2).split(".");for(let i=0;i<Math.max(s1.length,s2.length);i++){const n1=parseInt(s1[i]||"0",10),n2=parseInt(s2[i]||"0",10);if(n1>n2)return 1;if(n2>n1)return-1}return 0}__webpack_require__.d(__webpack_exports__,{n:()=>compareVersions})},"./node_modules/ol/style/Circle.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _RegularShape_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/style/RegularShape.js");class CircleStyle extends _RegularShape_js__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(options){super({points:1/0,fill:(options=options||{radius:5}).fill,radius:options.radius,stroke:options.stroke,scale:void 0!==options.scale?options.scale:1,rotation:void 0!==options.rotation?options.rotation:0,rotateWithView:void 0!==options.rotateWithView&&options.rotateWithView,displacement:void 0!==options.displacement?options.displacement:[0,0],declutterMode:options.declutterMode})}clone(){const scale=this.getScale(),style=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(scale)?scale.slice():scale,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return style.setOpacity(this.getOpacity()),style}setRadius(radius){this.radius_=radius,this.render()}}const __WEBPACK_DEFAULT_EXPORT__=CircleStyle},"./node_modules/ol/style/Fill.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});class Fill{constructor(options){options=options||{},this.color_=void 0!==options.color?options.color:null}clone(){const color=this.getColor();return new Fill({color:Array.isArray(color)?color.slice():color||void 0})}getColor(){return this.color_}setColor(color){this.color_=color}}const __WEBPACK_DEFAULT_EXPORT__=Fill},"./node_modules/ol/style/IconImageCache.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>shared});var _color_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/color.js");class IconImageCache{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let i=0;for(const key in this.cache_){const iconImage=this.cache_[key];0!=(3&i++)||iconImage.hasListener()||(delete this.cache_[key],--this.cacheSize_)}}}get(src,crossOrigin,color){const key=getKey(src,crossOrigin,color);return key in this.cache_?this.cache_[key]:null}set(src,crossOrigin,color,iconImage){const key=getKey(src,crossOrigin,color);this.cache_[key]=iconImage,++this.cacheSize_}setSize(maxCacheSize){this.maxCacheSize_=maxCacheSize,this.expire()}}function getKey(src,crossOrigin,color){return crossOrigin+":"+src+":"+(color?(0,_color_js__WEBPACK_IMPORTED_MODULE_0__.XC)(color):"null")}const shared=new IconImageCache},"./node_modules/ol/style/Image.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _util_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/util.js"),_size_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/size.js");class ImageStyle{constructor(options){this.opacity_=options.opacity,this.rotateWithView_=options.rotateWithView,this.rotation_=options.rotation,this.scale_=options.scale,this.scaleArray_=(0,_size_js__WEBPACK_IMPORTED_MODULE_0__.Pq)(options.scale),this.displacement_=options.displacement,this.declutterMode_=options.declutterMode}clone(){const scale=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(scale)?scale.slice():scale,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.O3)()}getImage(pixelRatio){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.O3)()}getHitDetectionImage(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.O3)()}getPixelRatio(pixelRatio){return 1}getImageState(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.O3)()}getImageSize(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.O3)()}getOrigin(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.O3)()}getSize(){return(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.O3)()}setDisplacement(displacement){this.displacement_=displacement}setOpacity(opacity){this.opacity_=opacity}setRotateWithView(rotateWithView){this.rotateWithView_=rotateWithView}setRotation(rotation){this.rotation_=rotation}setScale(scale){this.scale_=scale,this.scaleArray_=(0,_size_js__WEBPACK_IMPORTED_MODULE_0__.Pq)(scale)}listenImageChange(listener){(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.O3)()}load(){(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.O3)()}unlistenImageChange(listener){(0,_util_js__WEBPACK_IMPORTED_MODULE_1__.O3)()}}const __WEBPACK_DEFAULT_EXPORT__=ImageStyle},"./node_modules/ol/style/RegularShape.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _ImageState_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/ImageState.js"),_Image_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/style/Image.js"),_color_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/ol/color.js"),_colorlike_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/colorlike.js"),_dom_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/dom.js"),_render_canvas_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/render/canvas.js");class RegularShape extends _Image_js__WEBPACK_IMPORTED_MODULE_0__.Z{constructor(options){super({opacity:1,rotateWithView:void 0!==options.rotateWithView&&options.rotateWithView,rotation:void 0!==options.rotation?options.rotation:0,scale:void 0!==options.scale?options.scale:1,displacement:void 0!==options.displacement?options.displacement:[0,0],declutterMode:options.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=void 0!==options.fill?options.fill:null,this.origin_=[0,0],this.points_=options.points,this.radius_=void 0!==options.radius?options.radius:options.radius1,this.radius2_=options.radius2,this.angle_=void 0!==options.angle?options.angle:0,this.stroke_=void 0!==options.stroke?options.stroke:null,this.size_,this.renderOptions_,this.render()}clone(){const scale=this.getScale(),style=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(scale)?scale.slice():scale,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return style.setOpacity(this.getOpacity()),style}getAnchor(){const size=this.size_,displacement=this.getDisplacement(),scale=this.getScaleArray();return[size[0]/2-displacement[0]/scale[0],size[1]/2+displacement[1]/scale[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(fill){this.fill_=fill,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(pixelRatio){let image=this.canvases_[pixelRatio];if(!image){const renderOptions=this.renderOptions_,context=(0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.E4)(renderOptions.size*pixelRatio,renderOptions.size*pixelRatio);this.draw_(renderOptions,context,pixelRatio),image=context.canvas,this.canvases_[pixelRatio]=image}return image}getPixelRatio(pixelRatio){return pixelRatio}getImageSize(){return this.size_}getImageState(){return _ImageState_js__WEBPACK_IMPORTED_MODULE_2__.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(stroke){this.stroke_=stroke,this.render()}listenImageChange(listener){}load(){}unlistenImageChange(listener){}calculateLineJoinSize_(lineJoin,strokeWidth,miterLimit){if(0===strokeWidth||this.points_===1/0||"bevel"!==lineJoin&&"miter"!==lineJoin)return strokeWidth;let r1=this.radius_,r2=void 0===this.radius2_?r1:this.radius2_;if(r1<r2){const tmp=r1;r1=r2,r2=tmp}const points=void 0===this.radius2_?this.points_:2*this.points_,alpha=2*Math.PI/points,a=r2*Math.sin(alpha),d=r1-Math.sqrt(r2*r2-a*a),e=Math.sqrt(a*a+d*d),miterRatio=e/a;if("miter"===lineJoin&&miterRatio<=miterLimit)return miterRatio*strokeWidth;const k=strokeWidth/2/miterRatio,l=strokeWidth/2*(d/e),bevelAdd=Math.sqrt((r1+k)*(r1+k)+l*l)-r1;if(void 0===this.radius2_||"bevel"===lineJoin)return 2*bevelAdd;const aa=r1*Math.sin(alpha),dd=r2-Math.sqrt(r1*r1-aa*aa),innerMiterRatio=Math.sqrt(aa*aa+dd*dd)/aa;if(innerMiterRatio<=miterLimit){const innerLength=innerMiterRatio*strokeWidth/2-r2-r1;return 2*Math.max(bevelAdd,innerLength)}return 2*bevelAdd}createRenderOptions(){let strokeStyle,lineCap=_render_canvas_js__WEBPACK_IMPORTED_MODULE_3__.mb,lineJoin=_render_canvas_js__WEBPACK_IMPORTED_MODULE_3__.rc,miterLimit=0,lineDash=null,lineDashOffset=0,strokeWidth=0;this.stroke_&&(strokeStyle=(0,_colorlike_js__WEBPACK_IMPORTED_MODULE_4__.y)(this.stroke_.getColor()??_render_canvas_js__WEBPACK_IMPORTED_MODULE_3__.Tx),strokeWidth=this.stroke_.getWidth()??_render_canvas_js__WEBPACK_IMPORTED_MODULE_3__.yC,lineDash=this.stroke_.getLineDash(),lineDashOffset=this.stroke_.getLineDashOffset()??0,lineJoin=this.stroke_.getLineJoin()??_render_canvas_js__WEBPACK_IMPORTED_MODULE_3__.rc,lineCap=this.stroke_.getLineCap()??_render_canvas_js__WEBPACK_IMPORTED_MODULE_3__.mb,miterLimit=this.stroke_.getMiterLimit()??_render_canvas_js__WEBPACK_IMPORTED_MODULE_3__.V4);const add=this.calculateLineJoinSize_(lineJoin,strokeWidth,miterLimit),maxRadius=Math.max(this.radius_,this.radius2_||0);return{strokeStyle,strokeWidth,size:Math.ceil(2*maxRadius+add),lineCap,lineDash,lineDashOffset,lineJoin,miterLimit}}render(){this.renderOptions_=this.createRenderOptions();const size=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[size,size]}draw_(renderOptions,context,pixelRatio){if(context.scale(pixelRatio,pixelRatio),context.translate(renderOptions.size/2,renderOptions.size/2),this.createPath_(context),this.fill_){let color=this.fill_.getColor();null===color&&(color=_render_canvas_js__WEBPACK_IMPORTED_MODULE_3__.bL),context.fillStyle=(0,_colorlike_js__WEBPACK_IMPORTED_MODULE_4__.y)(color),context.fill()}renderOptions.strokeStyle&&(context.strokeStyle=renderOptions.strokeStyle,context.lineWidth=renderOptions.strokeWidth,renderOptions.lineDash&&(context.setLineDash(renderOptions.lineDash),context.lineDashOffset=renderOptions.lineDashOffset),context.lineCap=renderOptions.lineCap,context.lineJoin=renderOptions.lineJoin,context.miterLimit=renderOptions.miterLimit,context.stroke())}createHitDetectionCanvas_(renderOptions){let context;if(this.fill_){let color=this.fill_.getColor(),opacity=0;"string"==typeof color&&(color=(0,_color_js__WEBPACK_IMPORTED_MODULE_5__._2)(color)),null===color?opacity=1:Array.isArray(color)&&(opacity=4===color.length?color[3]:1),0===opacity&&(context=(0,_dom_js__WEBPACK_IMPORTED_MODULE_1__.E4)(renderOptions.size,renderOptions.size),this.drawHitDetectionCanvas_(renderOptions,context))}return context?context.canvas:this.getImage(1)}createPath_(context){let points=this.points_;const radius=this.radius_;if(points===1/0)context.arc(0,0,radius,0,2*Math.PI);else{const radius2=void 0===this.radius2_?radius:this.radius2_;void 0!==this.radius2_&&(points*=2);const startAngle=this.angle_-Math.PI/2,step=2*Math.PI/points;for(let i=0;i<points;i++){const angle0=startAngle+i*step,radiusC=i%2==0?radius:radius2;context.lineTo(radiusC*Math.cos(angle0),radiusC*Math.sin(angle0))}context.closePath()}}drawHitDetectionCanvas_(renderOptions,context){context.translate(renderOptions.size/2,renderOptions.size/2),this.createPath_(context),context.fillStyle=_render_canvas_js__WEBPACK_IMPORTED_MODULE_3__.bL,context.fill(),renderOptions.strokeStyle&&(context.strokeStyle=renderOptions.strokeStyle,context.lineWidth=renderOptions.strokeWidth,renderOptions.lineDash&&(context.setLineDash(renderOptions.lineDash),context.lineDashOffset=renderOptions.lineDashOffset),context.lineJoin=renderOptions.lineJoin,context.miterLimit=renderOptions.miterLimit,context.stroke())}}const __WEBPACK_DEFAULT_EXPORT__=RegularShape},"./node_modules/ol/style/Stroke.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});class Stroke{constructor(options){options=options||{},this.color_=void 0!==options.color?options.color:null,this.lineCap_=options.lineCap,this.lineDash_=void 0!==options.lineDash?options.lineDash:null,this.lineDashOffset_=options.lineDashOffset,this.lineJoin_=options.lineJoin,this.miterLimit_=options.miterLimit,this.width_=options.width}clone(){const color=this.getColor();return new Stroke({color:Array.isArray(color)?color.slice():color||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(color){this.color_=color}setLineCap(lineCap){this.lineCap_=lineCap}setLineDash(lineDash){this.lineDash_=lineDash}setLineDashOffset(lineDashOffset){this.lineDashOffset_=lineDashOffset}setLineJoin(lineJoin){this.lineJoin_=lineJoin}setMiterLimit(miterLimit){this.miterLimit_=miterLimit}setWidth(width){this.width_=width}}const __WEBPACK_DEFAULT_EXPORT__=Stroke},"./node_modules/ol/style/Style.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J$:()=>toFunction,ZP:()=>__WEBPACK_DEFAULT_EXPORT__,yF:()=>createDefaultStyle});var _Circle_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/style/Circle.js"),_Fill_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/style/Fill.js"),_Stroke_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/style/Stroke.js"),_asserts_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/asserts.js");class Style{constructor(options){options=options||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,void 0!==options.geometry&&this.setGeometry(options.geometry),this.fill_=void 0!==options.fill?options.fill:null,this.image_=void 0!==options.image?options.image:null,this.renderer_=void 0!==options.renderer?options.renderer:null,this.hitDetectionRenderer_=void 0!==options.hitDetectionRenderer?options.hitDetectionRenderer:null,this.stroke_=void 0!==options.stroke?options.stroke:null,this.text_=void 0!==options.text?options.text:null,this.zIndex_=options.zIndex}clone(){let geometry=this.getGeometry();return geometry&&"object"==typeof geometry&&(geometry=geometry.clone()),new Style({geometry:geometry??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(renderer){this.renderer_=renderer}setHitDetectionRenderer(renderer){this.hitDetectionRenderer_=renderer}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(fill){this.fill_=fill}getImage(){return this.image_}setImage(image){this.image_=image}getStroke(){return this.stroke_}setStroke(stroke){this.stroke_=stroke}getText(){return this.text_}setText(text){this.text_=text}getZIndex(){return this.zIndex_}setGeometry(geometry){"function"==typeof geometry?this.geometryFunction_=geometry:"string"==typeof geometry?this.geometryFunction_=function(feature){return feature.get(geometry)}:geometry?void 0!==geometry&&(this.geometryFunction_=function(){return geometry}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=geometry}setZIndex(zIndex){this.zIndex_=zIndex}}function toFunction(obj){let styleFunction;if("function"==typeof obj)styleFunction=obj;else{let styles;if(Array.isArray(obj))styles=obj;else{(0,_asserts_js__WEBPACK_IMPORTED_MODULE_0__.h)("function"==typeof obj.getZIndex,"Expected an `Style` or an array of `Style`");styles=[obj]}styleFunction=function(){return styles}}return styleFunction}let defaultStyles=null;function createDefaultStyle(feature,resolution){if(!defaultStyles){const fill=new _Fill_js__WEBPACK_IMPORTED_MODULE_1__.Z({color:"rgba(255,255,255,0.4)"}),stroke=new _Stroke_js__WEBPACK_IMPORTED_MODULE_2__.Z({color:"#3399CC",width:1.25});defaultStyles=[new Style({image:new _Circle_js__WEBPACK_IMPORTED_MODULE_3__.Z({fill,stroke,radius:5}),fill,stroke})]}return defaultStyles}function defaultGeometryFunction(feature){return feature.getGeometry()}const __WEBPACK_DEFAULT_EXPORT__=Style},"./node_modules/ol/tilegrid.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Cf:()=>wrapX,Tl:()=>extentFromProjection,X$:()=>getForProjection,dl:()=>createXYZ});var _tilegrid_TileGrid_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/ol/tilegrid/TileGrid.js"),_tilegrid_common_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/ol/tilegrid/common.js"),_proj_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/proj.js"),_extent_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/extent.js"),_size_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/ol/size.js");function getForProjection(projection){let tileGrid=projection.getDefaultTileGrid();return tileGrid||(tileGrid=function createForProjection(projection,maxZoom,tileSize,corner){const extent=extentFromProjection(projection);return function createForExtent(extent,maxZoom,tileSize,corner){corner=void 0!==corner?corner:"top-left";const resolutions=resolutionsFromExtent(extent,maxZoom,tileSize);return new _tilegrid_TileGrid_js__WEBPACK_IMPORTED_MODULE_2__.Z({extent,origin:(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.g0)(extent,corner),resolutions,tileSize})}(extent,maxZoom,tileSize,corner)}(projection),projection.setDefaultTileGrid(tileGrid)),tileGrid}function wrapX(tileGrid,tileCoord,projection){const z=tileCoord[0],center=tileGrid.getTileCoordCenter(tileCoord),projectionExtent=extentFromProjection(projection);if(!(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.b8)(projectionExtent,center)){const worldWidth=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.dz)(projectionExtent),worldsAway=Math.ceil((projectionExtent[0]-center[0])/worldWidth);return center[0]+=worldWidth*worldsAway,tileGrid.getTileCoordForCoordAndZ(center,z)}return tileCoord}function createXYZ(options){const xyzOptions=options||{},extent=xyzOptions.extent||(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__.U2)("EPSG:3857").getExtent(),gridOptions={extent,minZoom:xyzOptions.minZoom,tileSize:xyzOptions.tileSize,resolutions:resolutionsFromExtent(extent,xyzOptions.maxZoom,xyzOptions.tileSize,xyzOptions.maxResolution)};return new _tilegrid_TileGrid_js__WEBPACK_IMPORTED_MODULE_2__.Z(gridOptions)}function resolutionsFromExtent(extent,maxZoom,tileSize,maxResolution){maxZoom=void 0!==maxZoom?maxZoom:_tilegrid_common_js__WEBPACK_IMPORTED_MODULE_3__.e,tileSize=(0,_size_js__WEBPACK_IMPORTED_MODULE_4__.Pq)(void 0!==tileSize?tileSize:_tilegrid_common_js__WEBPACK_IMPORTED_MODULE_3__.S);const height=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.Cr)(extent),width=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.dz)(extent);maxResolution=maxResolution>0?maxResolution:Math.max(width/tileSize[0],height/tileSize[1]);const length=maxZoom+1,resolutions=new Array(length);for(let z=0;z<length;++z)resolutions[z]=maxResolution/Math.pow(2,z);return resolutions}function extentFromProjection(projection){let extent=(projection=(0,_proj_js__WEBPACK_IMPORTED_MODULE_0__.U2)(projection)).getExtent();if(!extent){const half=180*_proj_js__WEBPACK_IMPORTED_MODULE_0__.Wm.degrees/projection.getMetersPerUnit();extent=(0,_extent_js__WEBPACK_IMPORTED_MODULE_1__.T9)(-half,-half,half,half)}return extent}},"./node_modules/ol/tileurlfunction.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Gk:()=>expandUrl,Un:()=>createFromTileUrlFunctions,uR:()=>createFromTemplates});var _math_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ol/math.js"),_tilecoord_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/ol/tilecoord.js");function createFromTemplate(template,tileGrid){const zRegEx=/\{z\}/g,xRegEx=/\{x\}/g,yRegEx=/\{y\}/g,dashYRegEx=/\{-y\}/g;return function(tileCoord,pixelRatio,projection){if(tileCoord)return template.replace(zRegEx,tileCoord[0].toString()).replace(xRegEx,tileCoord[1].toString()).replace(yRegEx,tileCoord[2].toString()).replace(dashYRegEx,(function(){const z=tileCoord[0],range=tileGrid.getFullTileRange(z);if(!range)throw new Error("The {-y} placeholder requires a tile grid with extent");return(range.getHeight()-tileCoord[2]-1).toString()}))}}function createFromTemplates(templates,tileGrid){const len=templates.length,tileUrlFunctions=new Array(len);for(let i=0;i<len;++i)tileUrlFunctions[i]=createFromTemplate(templates[i],tileGrid);return createFromTileUrlFunctions(tileUrlFunctions)}function createFromTileUrlFunctions(tileUrlFunctions){return 1===tileUrlFunctions.length?tileUrlFunctions[0]:function(tileCoord,pixelRatio,projection){if(!tileCoord)return;const h=(0,_tilecoord_js__WEBPACK_IMPORTED_MODULE_0__.vp)(tileCoord),index=(0,_math_js__WEBPACK_IMPORTED_MODULE_1__.$W)(h,tileUrlFunctions.length);return tileUrlFunctions[index](tileCoord,pixelRatio,projection)}}function expandUrl(url){const urls=[];let match=/\{([a-z])-([a-z])\}/.exec(url);if(match){const startCharCode=match[1].charCodeAt(0),stopCharCode=match[2].charCodeAt(0);let charCode;for(charCode=startCharCode;charCode<=stopCharCode;++charCode)urls.push(url.replace(match[0],String.fromCharCode(charCode)));return urls}if(match=/\{(\d+)-(\d+)\}/.exec(url),match){const stop=parseInt(match[2],10);for(let i=parseInt(match[1],10);i<=stop;i++)urls.push(url.replace(match[0],i.toString()));return urls}return urls.push(url),urls}},"./node_modules/ol/uri.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function appendParams(uri,params){const keyParams=[];Object.keys(params).forEach((function(k){null!==params[k]&&void 0!==params[k]&&keyParams.push(k+"="+encodeURIComponent(params[k]))}));const qs=keyParams.join("&");return uri=uri.replace(/[?&]$/,""),(uri+=uri.includes("?")?"&":"?")+qs}__webpack_require__.d(__webpack_exports__,{B:()=>appendParams})},"./node_modules/proj4/dist/proj4.js":function(module){module.exports=function(){"use strict";function t(t,s){if(t[s])return t[s];for(var i,a=Object.keys(t),h=s.toLowerCase().replace(Ot,""),e=-1;++e<a.length;)if((i=a[e]).toLowerCase().replace(Ot,"")===h)return t[i]}function s(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=qt}function i(t){return new s(t).output()}function a(t,s,i){Array.isArray(s)&&(i.unshift(s),s=null);var a=s?{}:t,e=i.reduce((function(t,s){return h(s,t),t}),a);s&&(t[s]=e)}function h(t,s){if(Array.isArray(t)){var i=t.shift();if("PARAMETER"===i&&(i=t.shift()),1===t.length)return Array.isArray(t[0])?(s[i]={},void h(t[0],s[i])):void(s[i]=t[0]);if(t.length)if("TOWGS84"!==i){if("AXIS"===i)return i in s||(s[i]=[]),void s[i].push(t);var e;switch(Array.isArray(i)||(s[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return s[i]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&h(t[2],s[i]));case"SPHEROID":case"ELLIPSOID":return s[i]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&h(t[3],s[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void a(s,i,t);default:for(e=-1;++e<t.length;)if(!Array.isArray(t[e]))return h(t,s[i]);return a(s,i,t)}}else s[i]=t;else s[i]=!0}else s[t]=!0}function e(t,s){var i=s[0],a=s[1];!(i in t)&&a in t&&(t[i]=t[a],3===s.length&&(t[i]=s[2](t[i])))}function n(t){return t*Bt}function r(t){function s(s){return s*(t.to_meter||1)}if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var i="",a=0,h=t.AXIS.length;a<h;++a){var r=[t.AXIS[a][0].toLowerCase(),t.AXIS[a][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?i+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?i+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?i+="e":-1===r[0].indexOf("west")&&("x"!==r[0]&&"lon"!==r[0]||"west"!==r[1])||(i+="w")}2===i.length&&(i+="u"),3===i.length&&(t.axis=i)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",n],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",n],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",n],["lat0","latitude_of_origin",n],["lat0","standard_parallel_1",n],["lat1","standard_parallel_1",n],["lat2","standard_parallel_2",n],["azimuth","Azimuth"],["alpha","azimuth",n],["srsCode","name"]].forEach((function(s){return e(t,s)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=n(t.lat0>0?90:-90)):(t.lat0=n(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function o(t){var s=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?o[t]=kt(arguments[1]):o[t]=zt(arguments[1]):o[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?o.apply(s,t):o(t)}));if("string"==typeof t){if(t in o)return o[t]}else"EPSG"in t?o["EPSG:"+t.EPSG]=t:"ESRI"in t?o["ESRI:"+t.ESRI]=t:"IAU2000"in t?o["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function l(t){return"string"==typeof t}function u(t){return t in o}function c(t){return Ft.some((function(s){return t.indexOf(s)>-1}))}function M(s){var i=t(s,"authority");if(i){var a=t(i,"epsg");return a&&Dt.indexOf(a)>-1}}function f(s){var i=t(s,"extension");if(i)return t(i,"proj4")}function d(t){return"+"===t[0]}function p(t){if(!l(t))return t;if(u(t))return o[t];if(c(t)){var s=zt(t);if(M(s))return o["EPSG:3857"];var i=f(s);return i?kt(i):s}return d(t)?kt(t):void 0}function m(t){return t}function _(t,s){var i=Zt.length;return t.names?(Zt[i]=t,t.names.forEach((function(t){Vt[t.toLowerCase()]=i})),this):(console.log(s),!0)}function y(t,s,i,a){var h=t*t,e=s*s,n=(h-e)/h,r=0;return a?(h=(t*=1-n*(gt+n*(vt+n*bt)))*t,n=0):r=Math.sqrt(n),{es:n,e:r,ep2:(h-e)/e}}function x(s,i,a,h,e){if(!s){var n=t($t,h);n||(n=ts),s=n.a,i=n.b,a=n.rf}return a&&!i&&(i=(1-1/a)*s),(0===a||Math.abs(s-i)<wt)&&(e=!0,i=s),{a:s,b:i,rf:a,sphere:e}}function g(t,s,i,a,h,e,n){var r={};return r.datum_type=void 0===t||"none"===t?_t:mt,s&&(r.datum_params=s.map(parseFloat),0===r.datum_params[0]&&0===r.datum_params[1]&&0===r.datum_params[2]||(r.datum_type=ft),r.datum_params.length>3&&(0===r.datum_params[3]&&0===r.datum_params[4]&&0===r.datum_params[5]&&0===r.datum_params[6]||(r.datum_type=dt,r.datum_params[3]*=yt,r.datum_params[4]*=yt,r.datum_params[5]*=yt,r.datum_params[6]=r.datum_params[6]/1e6+1))),n&&(r.datum_type=pt,r.grids=n),r.a=i,r.b=a,r.es=h,r.ep2=e,r}function v(t){return void 0===t?null:t.split(",").map(b)}function b(t){if(0===t.length)return null;var s="@"===t[0];return s&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!s,grid:null,isNull:!0}:{name:t,mandatory:!s,grid:is[t]||null,isNull:!1}}function w(t){return t/3600*Math.PI/180}function N(t){var s=t.getInt32(8,!1);return 11!==s&&(11!==(s=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function A(t,s){return{nFields:t.getInt32(8,s),nSubgridFields:t.getInt32(24,s),nSubgrids:t.getInt32(40,s),shiftType:E(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,s),fromSemiMinorAxis:t.getFloat64(136,s),toSemiMajorAxis:t.getFloat64(152,s),toSemiMinorAxis:t.getFloat64(168,s)}}function E(t,s,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(s,i)))}function C(t,s,i){for(var a=176,h=[],e=0;e<s.nSubgrids;e++){var n=S(t,a,i),r=I(t,a,n,i),o=Math.round(1+(n.upperLongitude-n.lowerLongitude)/n.longitudeInterval),l=Math.round(1+(n.upperLatitude-n.lowerLatitude)/n.latitudeInterval);h.push({ll:[w(n.lowerLongitude),w(n.lowerLatitude)],del:[w(n.longitudeInterval),w(n.latitudeInterval)],lim:[o,l],count:n.gridNodeCount,cvs:P(r)}),a+=176+16*n.gridNodeCount}return h}function P(t){return t.map((function(t){return[w(t.longitudeShift),w(t.latitudeShift)]}))}function S(t,s,i){return{name:E(t,s+8,s+16).trim(),parent:E(t,s+24,s+24+8).trim(),lowerLatitude:t.getFloat64(s+72,i),upperLatitude:t.getFloat64(s+88,i),lowerLongitude:t.getFloat64(s+104,i),upperLongitude:t.getFloat64(s+120,i),latitudeInterval:t.getFloat64(s+136,i),longitudeInterval:t.getFloat64(s+152,i),gridNodeCount:t.getInt32(s+168,i)}}function I(t,s,i,a){for(var h=s+176,e=[],n=0;n<i.gridNodeCount;n++){var r={latitudeShift:t.getFloat32(h+16*n,a),longitudeShift:t.getFloat32(h+16*n+4,a),latitudeAccuracy:t.getFloat32(h+16*n+8,a),longitudeAccuracy:t.getFloat32(h+16*n+12,a)};e.push(r)}return e}function Projection(s,i){if(!(this instanceof Projection))return new Projection(s);i=i||function(t){if(t)throw t};var a=p(s);if("object"==typeof a){var h=Projection.projections.get(a.projName);if(h){if(a.datumCode&&"none"!==a.datumCode){var e=t(ss,a.datumCode);e&&(a.datum_params=a.datum_params||(e.towgs84?e.towgs84.split(","):null),a.ellps=e.ellipse,a.datumName=e.datumName?e.datumName:a.datumCode)}a.k0=a.k0||1,a.axis=a.axis||"enu",a.ellps=a.ellps||"wgs84",a.lat1=a.lat1||a.lat0;var n=x(a.a,a.b,a.rf,a.ellps,a.sphere),r=y(n.a,n.b,n.rf,a.R_A),o=v(a.nadgrids),l=a.datum||g(a.datumCode,a.datum_params,n.a,n.b,r.es,r.ep2,o);Ut(this,a),Ut(this,h),this.a=n.a,this.b=n.b,this.rf=n.rf,this.sphere=n.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=l,this.init(),i(null,this)}else i(s)}else i(s)}function O(t,s){return t.datum_type===s.datum_type&&!(t.a!==s.a||Math.abs(t.es-s.es)>5e-11)&&(t.datum_type===ft?t.datum_params[0]===s.datum_params[0]&&t.datum_params[1]===s.datum_params[1]&&t.datum_params[2]===s.datum_params[2]:t.datum_type!==dt||t.datum_params[0]===s.datum_params[0]&&t.datum_params[1]===s.datum_params[1]&&t.datum_params[2]===s.datum_params[2]&&t.datum_params[3]===s.datum_params[3]&&t.datum_params[4]===s.datum_params[4]&&t.datum_params[5]===s.datum_params[5]&&t.datum_params[6]===s.datum_params[6])}function k(t,s,i){var a,h,e,n,r=t.x,o=t.y,l=t.z?t.z:0;if(o<-xt&&o>-1.001*xt)o=-xt;else if(o>xt&&o<1.001*xt)o=xt;else{if(o<-xt)return{x:-1/0,y:-1/0,z:t.z};if(o>xt)return{x:1/0,y:1/0,z:t.z}}return r>Math.PI&&(r-=2*Math.PI),h=Math.sin(o),n=Math.cos(o),e=h*h,{x:((a=i/Math.sqrt(1-s*e))+l)*n*Math.cos(r),y:(a+l)*n*Math.sin(r),z:(a*(1-s)+l)*h}}function q(t,s,i,a){var h,e,n,r,o,l,u,c,M,f,d,p,m,_,x,g=t.x,v=t.y,b=t.z?t.z:0;if(h=Math.sqrt(g*g+v*v),e=Math.sqrt(g*g+v*v+b*b),h/i<1e-12){if(_=0,e/i<1e-12)return x=-a,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(v,g);n=b/e,c=(r=h/e)*(1-s)*(o=1/Math.sqrt(1-s*(2-s)*r*r)),M=n*o,m=0;do{m++,l=s*(u=i/Math.sqrt(1-s*M*M))/(u+(x=h*c+b*M-u*(1-s*M*M))),p=(d=n*(o=1/Math.sqrt(1-l*(2-l)*r*r)))*c-(f=r*(1-l)*o)*M,c=f,M=d}while(p*p>1e-24&&m<30);return{x:_,y:Math.atan(d/Math.abs(f)),z:x}}function R(t,s,i){if(s===ft)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(s===dt){var a=i[0],h=i[1],e=i[2],n=i[3],r=i[4],o=i[5],l=i[6];return{x:l*(t.x-o*t.y+r*t.z)+a,y:l*(o*t.x+t.y-n*t.z)+h,z:l*(-r*t.x+n*t.y+t.z)+e}}}function L(t,s,i){if(s===ft)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(s===dt){var a=i[0],h=i[1],e=i[2],n=i[3],r=i[4],o=i[5],l=i[6],u=(t.x-a)/l,c=(t.y-h)/l,M=(t.z-e)/l;return{x:u+o*c-r*M,y:-o*u+c+n*M,z:r*u-n*c+M}}}function T(t){return t===ft||t===dt}function G(t,s,i){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var a={x:-i.x,y:i.y},h={x:Number.NaN,y:Number.NaN},e=[];t:for(var n=0;n<t.grids.length;n++){var r=t.grids[n];if(e.push(r.name),r.isNull){h=a;break}if(null!==r.grid)for(var o=r.grid.subgrids,l=0,u=o.length;l<u;l++){var c=o[l],M=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4,f=c.ll[0]-M,d=c.ll[1]-M,p=c.ll[0]+(c.lim[0]-1)*c.del[0]+M,m=c.ll[1]+(c.lim[1]-1)*c.del[1]+M;if(!(d>a.y||f>a.x||m<a.y||p<a.x||(h=j(a,s,c),isNaN(h.x))))break t}else if(r.mandatory)return console.log("Unable to find mandatory grid '"+r.name+"'"),-1}return isNaN(h.x)?(console.log("Failed to find a grid shift table for location '"+-a.x*At+" "+a.y*At+" tried: '"+e+"'"),-1):(i.x=-h.x,i.y=h.y,0)}function j(t,s,i){var a={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return a;var h={x:t.x,y:t.y};h.x-=i.ll[0],h.y-=i.ll[1],h.x=Ht(h.x-Math.PI)+Math.PI;var e=B(h,i);if(s){if(isNaN(e.x))return a;e.x=h.x-e.x,e.y=h.y-e.y;var n,r,o=9;do{if(r=B(e,i),isNaN(r.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}n={x:h.x-(r.x+e.x),y:h.y-(r.y+e.y)},e.x+=n.x,e.y+=n.y}while(o--&&Math.abs(n.x)>1e-12&&Math.abs(n.y)>1e-12);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),a;a.x=Ht(e.x+i.ll[0]),a.y=e.y+i.ll[1]}else isNaN(e.x)||(a.x=t.x+e.x,a.y=t.y+e.y);return a}function B(t,s){var i,a={x:t.x/s.del[0],y:t.y/s.del[1]},h={x:Math.floor(a.x),y:Math.floor(a.y)},e={x:a.x-1*h.x,y:a.y-1*h.y},n={x:Number.NaN,y:Number.NaN};if(h.x<0||h.x>=s.lim[0])return n;if(h.y<0||h.y>=s.lim[1])return n;i=h.y*s.lim[0]+h.x;var r={x:s.cvs[i][0],y:s.cvs[i][1]};i++;var o={x:s.cvs[i][0],y:s.cvs[i][1]};i+=s.lim[0];var l={x:s.cvs[i][0],y:s.cvs[i][1]};i--;var u={x:s.cvs[i][0],y:s.cvs[i][1]},c=e.x*e.y,M=e.x*(1-e.y),f=(1-e.x)*(1-e.y),d=(1-e.x)*e.y;return n.x=f*r.x+M*o.x+d*u.x+c*l.x,n.y=f*r.y+M*o.y+d*u.y+c*l.y,n}function z(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function F(t,s){return(t.datum.datum_type===ft||t.datum.datum_type===dt||t.datum.datum_type===pt)&&"WGS84"!==s.datumCode||(s.datum.datum_type===ft||s.datum.datum_type===dt||s.datum.datum_type===pt)&&"WGS84"!==t.datumCode}function D(t,s,i,a){var h,e=void 0!==(i=Array.isArray(i)?es(i):{x:i.x,y:i.y,z:i.z,m:i.m}).z;if(ns(i),t.datum&&s.datum&&F(t,s)&&(i=D(t,h=new Projection("WGS84"),i,a),t=h),a&&"enu"!==t.axis&&(i=hs(t,!1,i)),"longlat"===t.projName)i={x:i.x*Nt,y:i.y*Nt,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=as(t.datum,s.datum,i))return s.from_greenwich&&(i={x:i.x-s.from_greenwich,y:i.y,z:i.z||0}),"longlat"===s.projName?i={x:i.x*At,y:i.y*At,z:i.z||0}:(i=s.forward(i),s.to_meter&&(i={x:i.x/s.to_meter,y:i.y/s.to_meter,z:i.z||0})),a&&"enu"!==s.axis?hs(s,!0,i):(i&&!e&&delete i.z,i)}function U(t,s,i,a){var h,e,n;return Array.isArray(i)?(h=D(t,s,i,a)||{x:NaN,y:NaN},i.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==s.name&&"geocent"===s.name?"number"==typeof h.z?[h.x,h.y,h.z].concat(i.splice(3)):[h.x,h.y,i[2]].concat(i.splice(3)):[h.x,h.y].concat(i.splice(2)):[h.x,h.y]):(e=D(t,s,i,a),2===(n=Object.keys(i)).length||n.forEach((function(a){if(void 0!==t.name&&"geocent"===t.name||void 0!==s.name&&"geocent"===s.name){if("x"===a||"y"===a||"z"===a)return}else if("x"===a||"y"===a)return;e[a]=i[a]})),e)}function Q(t){return t instanceof Projection?t:t.oProj?t.oProj:Projection(t)}function W(t,s,i){t=Q(t);var a,h=!1;return void 0===s?(s=t,t=rs,h=!0):(void 0!==s.x||Array.isArray(s))&&(i=s,s=t,t=rs,h=!0),s=Q(s),i?U(t,s,i):(a={forward:function(i,a){return U(t,s,i,a)},inverse:function(i,a){return U(s,t,i,a)}},h&&(a.oProj=s),a)}function H(t,s){return s=s||5,$(V({lat:t[1],lon:t[0]}),s)}function X(t){var s=Z(at(t.toUpperCase()));return s.lat&&s.lon?[s.lon,s.lat]:[(s.left+s.right)/2,(s.top+s.bottom)/2]}function J(t){return t*(Math.PI/180)}function K(t){return t/Math.PI*180}function V(t){var s,i,a,h,n,r,o=t.lat,l=t.lon,u=6378137,c=J(o),M=J(l);r=Math.floor((l+180)/6)+1,180===l&&(r=60),o>=56&&o<64&&l>=3&&l<12&&(r=32),o>=72&&o<84&&(l>=0&&l<9?r=31:l>=9&&l<21?r=33:l>=21&&l<33?r=35:l>=33&&l<42&&(r=37)),n=J(6*(r-1)-180+3),s=u/Math.sqrt(1-.00669438*Math.sin(c)*Math.sin(c)),i=Math.tan(c)*Math.tan(c),a=.006739496752268451*Math.cos(c)*Math.cos(c);var f=.9996*s*((h=Math.cos(c)*(M-n))+(1-i+a)*h*h*h/6+(5-18*i+i*i+72*a-.39089081163157013)*h*h*h*h*h/120)+5e5,d=.9996*(u*(.9983242984503243*c-.002514607064228144*Math.sin(2*c)+2639046602129982e-21*Math.sin(4*c)-3.418046101696858e-9*Math.sin(6*c))+s*Math.tan(c)*(h*h/2+(5-i+9*a+4*a*a)*h*h*h*h/24+(61-58*i+i*i+600*a-2.2240339282485886)*h*h*h*h*h*h/720));return o<0&&(d+=1e7),{northing:Math.round(d),easting:Math.round(f),zoneNumber:r,zoneLetter:Y(o)}}function Z(t){var s=t.northing,i=t.easting,a=t.zoneLetter,h=t.zoneNumber;if(h<0||h>60)return null;var e,n,r,o,l,u,c,M,f=6378137,d=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),p=i-5e5,m=s;a<"N"&&(m-=1e7),u=6*(h-1)-180+3,M=(c=m/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*c)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*c)+151*d*d*d/96*Math.sin(6*c),e=f/Math.sqrt(1-.00669438*Math.sin(M)*Math.sin(M)),n=Math.tan(M)*Math.tan(M),r=.006739496752268451*Math.cos(M)*Math.cos(M),o=.99330562*f/Math.pow(1-.00669438*Math.sin(M)*Math.sin(M),1.5),l=p/(.9996*e);var _=M-e*Math.tan(M)/o*(l*l/2-(5+3*n+10*r-4*r*r-.06065547077041606)*l*l*l*l/24+(61+90*n+298*r+45*n*n-1.6983531815716497-3*r*r)*l*l*l*l*l*l/720);_=K(_);var x,y=(l-(1+2*n+r)*l*l*l/6+(5-2*r+28*n-3*r*r+.05391597401814761+24*n*n)*l*l*l*l*l/120)/Math.cos(M);if(y=u+K(y),t.accuracy){var g=Z({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});x={top:g.lat,right:g.lon,bottom:_,left:y}}else x={lat:_,lon:y};return x}function Y(t){var s="Z";return 84>=t&&t>=72?s="X":72>t&&t>=64?s="W":64>t&&t>=56?s="V":56>t&&t>=48?s="U":48>t&&t>=40?s="T":40>t&&t>=32?s="S":32>t&&t>=24?s="R":24>t&&t>=16?s="Q":16>t&&t>=8?s="P":8>t&&t>=0?s="N":0>t&&t>=-8?s="M":-8>t&&t>=-16?s="L":-16>t&&t>=-24?s="K":-24>t&&t>=-32?s="J":-32>t&&t>=-40?s="H":-40>t&&t>=-48?s="G":-48>t&&t>=-56?s="F":-56>t&&t>=-64?s="E":-64>t&&t>=-72?s="D":-72>t&&t>=-80&&(s="C"),s}function $(t,s){var i="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+tt(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,s)+a.substr(a.length-5,s)}function tt(t,s,i){var a=st(i);return it(Math.floor(t/1e5),Math.floor(s/1e5)%20,a)}function st(t){var s=t%os;return 0===s&&(s=os),s}function it(t,s,i){var a=i-1,h=ls.charCodeAt(a),e=us.charCodeAt(a),n=h+t-1,r=e+s,o=!1;return n>ps&&(n=n-ps+cs-1,o=!0),(n===Ms||h<Ms&&n>Ms||(n>Ms||h<Ms)&&o)&&n++,(n===fs||h<fs&&n>fs||(n>fs||h<fs)&&o)&&++n===Ms&&n++,n>ps&&(n=n-ps+cs-1),r>ds?(r=r-ds+cs-1,o=!0):o=!1,(r===Ms||e<Ms&&r>Ms||(r>Ms||e<Ms)&&o)&&r++,(r===fs||e<fs&&r>fs||(r>fs||e<fs)&&o)&&++r===Ms&&r++,r>ds&&(r=r-ds+cs-1),String.fromCharCode(n)+String.fromCharCode(r)}function at(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var s,i=t.length,a=null,h="",e=0;!/[A-Z]/.test(s=t.charAt(e));){if(e>=2)throw"MGRSPoint bad conversion from: "+t;h+=s,e++}var n=parseInt(h,10);if(0===e||e+3>i)throw"MGRSPoint bad conversion from: "+t;var r=t.charAt(e++);if(r<="A"||"B"===r||"Y"===r||r>="Z"||"I"===r||"O"===r)throw"MGRSPoint zone letter "+r+" not handled: "+t;a=t.substring(e,e+=2);for(var o=st(n),l=ht(a.charAt(0),o),u=et(a.charAt(1),o);u<nt(r);)u+=2e6;var c=i-e;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var M,f,d,_=c/2,y=0,x=0;return _>0&&(M=1e5/Math.pow(10,_),f=t.substring(e,e+_),y=parseFloat(f)*M,d=t.substring(e+_),x=parseFloat(d)*M),{easting:y+l,northing:x+u,zoneLetter:r,zoneNumber:n,accuracy:M}}function ht(t,s){for(var i=ls.charCodeAt(s-1),a=1e5,h=!1;i!==t.charCodeAt(0);){if(++i===Ms&&i++,i===fs&&i++,i>ps){if(h)throw"Bad character: "+t;i=cs,h=!0}a+=1e5}return a}function et(t,s){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=us.charCodeAt(s-1),a=0,h=!1;i!==t.charCodeAt(0);){if(++i===Ms&&i++,i===fs&&i++,i>ds){if(h)throw"Bad character: "+t;i=cs,h=!0}a+=1e5}return a}function nt(t){var s;switch(t){case"C":s=11e5;break;case"D":s=2e6;break;case"E":s=28e5;break;case"F":s=37e5;break;case"G":s=46e5;break;case"H":s=55e5;break;case"J":s=64e5;break;case"K":s=73e5;break;case"L":s=82e5;break;case"M":s=91e5;break;case"N":s=0;break;case"P":s=8e5;break;case"Q":s=17e5;break;case"R":s=26e5;break;case"S":s=35e5;break;case"T":s=44e5;break;case"U":s=53e5;break;case"V":s=62e5;break;case"W":s=7e6;break;case"X":s=79e5;break;default:s=-1}if(s>=0)return s;throw"Invalid zone letter: "+t}function Point(t,s,i){if(!(this instanceof Point))return new Point(t,s,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===s){var a=t.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=t,this.y=s,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function rt(t){var s=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==s.indexOf(i)}function ot(t){var s,i=[];return i[0]=t*$s,s=t*t,i[0]+=s*ti,i[1]=s*ii,s*=t,i[0]+=s*si,i[1]+=s*ai,i[2]=s*hi,i}function lt(t,s){var i=t+t;return t+s[0]*Math.sin(i)+s[1]*Math.sin(i+i)+s[2]*Math.sin(i+i+i)}function ut(t,s,i,a){var h;return t<wt?(a.value=Ni.AREA_0,h=0):(h=Math.atan2(s,i),Math.abs(h)<=Et?a.value=Ni.AREA_0:h>Et&&h<=xt+Et?(a.value=Ni.AREA_1,h-=xt):h>xt+Et||h<=-(xt+Et)?(a.value=Ni.AREA_2,h=h>=0?h-Pt:h+Pt):(a.value=Ni.AREA_3,h+=xt)),h}function ct(t,s){var i=t+s;return i<-Pt?i+=Ct:i>+Pt&&(i-=Ct),i}function Mt(t,s,i,a){for(var h=s;a;--a){var e=t(h);if(h-=e,Math.abs(e)<i)break}return h}var ft=1,dt=2,pt=3,mt=4,_t=5,yt=484813681109536e-20,xt=Math.PI/2,gt=.16666666666666666,vt=.04722222222222222,bt=.022156084656084655,wt=1e-10,Nt=.017453292519943295,At=57.29577951308232,Et=Math.PI/4,Ct=2*Math.PI,Pt=3.14159265359,St={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},It={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Ot=/[\s_\-\/\(\)]/g,kt=function(s){var i,a,h,e={},n=s.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,s){var i=s.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t}),{}),r={proj:"projName",datum:"datumCode",rf:function(t){e.rf=parseFloat(t)},lat_0:function(t){e.lat0=t*Nt},lat_1:function(t){e.lat1=t*Nt},lat_2:function(t){e.lat2=t*Nt},lat_ts:function(t){e.lat_ts=t*Nt},lon_0:function(t){e.long0=t*Nt},lon_1:function(t){e.long1=t*Nt},lon_2:function(t){e.long2=t*Nt},alpha:function(t){e.alpha=parseFloat(t)*Nt},gamma:function(t){e.rectified_grid_angle=parseFloat(t)},lonc:function(t){e.longc=t*Nt},x_0:function(t){e.x0=parseFloat(t)},y_0:function(t){e.y0=parseFloat(t)},k_0:function(t){e.k0=parseFloat(t)},k:function(t){e.k0=parseFloat(t)},a:function(t){e.a=parseFloat(t)},b:function(t){e.b=parseFloat(t)},r_a:function(){e.R_A=!0},zone:function(t){e.zone=parseInt(t,10)},south:function(){e.utmSouth=!0},towgs84:function(t){e.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){e.to_meter=parseFloat(t)},units:function(s){e.units=s;var i=t(It,s);i&&(e.to_meter=i.to_meter)},from_greenwich:function(t){e.from_greenwich=t*Nt},pm:function(s){var i=t(St,s);e.from_greenwich=(i||parseFloat(s))*Nt},nadgrids:function(t){"@null"===t?e.datumCode="none":e.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(e.axis=t)},approx:function(){e.approx=!0}};for(i in n)a=n[i],i in r?"function"==typeof(h=r[i])?h(a):e[h]=a:e[i]=a;return"string"==typeof e.datumCode&&"WGS84"!==e.datumCode&&(e.datumCode=e.datumCode.toLowerCase()),e},qt=1,Rt=/\s/,Lt=/[A-Za-z]/,Tt=/[A-Za-z84_]/,Gt=/[,\]]/,jt=/[\d\.E\-\+]/;s.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;Rt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case qt:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},s.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Gt.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},s.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=qt)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=qt,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},s.prototype.number=function(t){if(!jt.test(t)){if(Gt.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},s.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},s.prototype.keyword=function(t){if(Tt.test(t))this.word+=t;else{if("["===t){var s=[];return s.push(this.word),this.level++,null===this.root?this.root=s:this.currentObject.push(s),this.stack.push(this.currentObject),this.currentObject=s,void(this.state=qt)}if(!Gt.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},s.prototype.neutral=function(t){if(Lt.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(jt.test(t))return this.word=t,void(this.state=3);if(!Gt.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},s.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Bt=.017453292519943295,zt=function(t){var s=i(t),a=s.shift(),e=s.shift();s.unshift(["name",e]),s.unshift(["type",a]);var n={};return h(s,n),r(n),n};!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(o);var Ft=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Dt=["3857","900913","3785","102113"],Ut=function(t,s){var i,a;if(t=t||{},!s)return t;for(a in s)void 0!==(i=s[a])&&(t[a]=i);return t},Qt=function(t,s,i){var a=t*s;return i/Math.sqrt(1-a*a)},Wt=function(t){return t<0?-1:1},Ht=function(t){return Math.abs(t)<=Pt?t:t-Wt(t)*Ct},Xt=function(t,s,i){var a=t*i,h=.5*t;return a=Math.pow((1-a)/(1+a),h),Math.tan(.5*(xt-s))/a},Jt=function(t,s){for(var i,a,h=.5*t,e=xt-2*Math.atan(s),n=0;n<=15;n++)if(i=t*Math.sin(e),e+=a=xt-2*Math.atan(s*Math.pow((1-i)/(1+i),h))-e,Math.abs(a)<=1e-10)return e;return-9999},Kt=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Qt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var a,h,s=t.x,i=t.y;if(i*At>90&&i*At<-90&&s*At>180&&s*At<-180)return null;if(Math.abs(Math.abs(i)-xt)<=wt)return null;if(this.sphere)a=this.x0+this.a*this.k0*Ht(s-this.long0),h=this.y0+this.a*this.k0*Math.log(Math.tan(Et+.5*i));else{var e=Math.sin(i),n=Xt(this.e,i,e);a=this.x0+this.a*this.k0*Ht(s-this.long0),h=this.y0-this.a*this.k0*Math.log(n)}return t.x=a,t.y=h,t},inverse:function(t){var s,i,a=t.x-this.x0,h=t.y-this.y0;if(this.sphere)i=xt-2*Math.atan(Math.exp(-h/(this.a*this.k0)));else{var e=Math.exp(-h/(this.a*this.k0));if(-9999===(i=Jt(this.e,e)))return null}return s=Ht(this.long0+a/(this.a*this.k0)),t.x=s,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:m,inverse:m,names:["longlat","identity"]}],Vt={},Zt=[],Yt={start:function(){Kt.forEach(_)},add:_,get:function(t){if(!t)return!1;var s=t.toLowerCase();return void 0!==Vt[s]&&Zt[Vt[s]]?Zt[Vt[s]]:void 0}},$t={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},ts=$t.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};$t.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var ss={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},is={};Projection.projections=Yt,Projection.projections.start();var as=function(t,s,i){if(O(t,s))return i;if(t.datum_type===_t||s.datum_type===_t)return i;var a=t.a,h=t.es;if(t.datum_type===pt){if(0!==G(t,!1,i))return;a=6378137,h=.0066943799901413165}var e=s.a,n=s.b,r=s.es;return s.datum_type===pt&&(e=6378137,n=6356752.314,r=.0066943799901413165),h!==r||a!==e||T(t.datum_type)||T(s.datum_type)?(i=k(i,h,a),T(t.datum_type)&&(i=R(i,t.datum_type,t.datum_params)),T(s.datum_type)&&(i=L(i,s.datum_type,s.datum_params)),i=q(i,r,e,n),s.datum_type!==pt||0===G(s,!0,i)?i:void 0):i},hs=function(t,s,i){var a,h,e,n=i.x,r=i.y,o=i.z||0,l={};for(e=0;e<3;e++)if(!s||2!==e||void 0!==i.z)switch(0===e?(a=n,h=-1!=="ew".indexOf(t.axis[e])?"x":"y"):1===e?(a=r,h=-1!=="ns".indexOf(t.axis[e])?"y":"x"):(a=o,h="z"),t.axis[e]){case"e":case"n":l[h]=a;break;case"w":case"s":l[h]=-a;break;case"u":void 0!==i[h]&&(l.z=a);break;case"d":void 0!==i[h]&&(l.z=-a);break;default:return null}return l},es=function(t){var s={x:t[0],y:t[1]};return t.length>2&&(s.z=t[2]),t.length>3&&(s.m=t[3]),s},ns=function(t){z(t.x),z(t.y)},rs=Projection("WGS84"),os=6,ls="AJSAJS",us="AFAFAF",cs=65,Ms=73,fs=79,ds=86,ps=90,ms={forward:H,inverse:function(t){var s=Z(at(t.toUpperCase()));return s.lat&&s.lon?[s.lon,s.lat,s.lon,s.lat]:[s.left,s.bottom,s.right,s.top]},toPoint:X};Point.fromMGRS=function(t){return new Point(X(t))},Point.prototype.toMGRS=function(t){return H([this.x,this.y],t)};var proj4,_s=.01068115234375,ys=function(t){var s=[];s[0]=1-t*(.25+t*(.046875+t*(.01953125+t*_s))),s[1]=t*(.75-t*(.046875+t*(.01953125+t*_s)));var i=t*t;return s[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,s[3]=i*(.3645833333333333-.005696614583333333*t),s[4]=i*t*.3076171875,s},xs=function(t,s,i,a){return i*=s,s*=s,a[0]*t-i*(a[1]+s*(a[2]+s*(a[3]+s*a[4])))},gs=function(t,s,i){for(var a=1/(1-s),h=t,e=20;e;--e){var n=Math.sin(h),r=1-s*n*n;if(h-=r=(xs(h,n,Math.cos(h),i)-t)*(r*Math.sqrt(r))*a,Math.abs(r)<wt)return h}return h},vs={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=ys(this.es),this.ml0=xs(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var s,i,a,h=t.x,e=t.y,n=Ht(h-this.long0),r=Math.sin(e),o=Math.cos(e);if(this.es){var l=o*n,u=Math.pow(l,2),c=this.ep2*Math.pow(o,2),M=Math.pow(c,2),f=Math.abs(o)>wt?Math.tan(e):0,d=Math.pow(f,2),p=Math.pow(d,2);s=1-this.es*Math.pow(r,2),l/=Math.sqrt(s);var m=xs(e,r,o,this.en);i=this.a*(this.k0*l*(1+u/6*(1-d+c+u/20*(5-18*d+p+14*c-58*d*c+u/42*(61+179*p-p*d-479*d)))))+this.x0,a=this.a*(this.k0*(m-this.ml0+r*n*l/2*(1+u/12*(5-d+9*c+4*M+u/30*(61+p-58*d+270*c-330*d*c+u/56*(1385+543*p-p*d-3111*d))))))+this.y0}else{var _=o*Math.sin(n);if(Math.abs(Math.abs(_)-1)<wt)return 93;if(i=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,a=o*Math.cos(n)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(a))>=1){if(_-1>wt)return 93;a=0}else a=Math.acos(a);e<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return t.x=i,t.y=a,t},inverse:function(t){var s,i,a,h,e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);if(this.es)if(s=this.ml0+n/this.k0,i=gs(s,this.es,this.en),Math.abs(i)<xt){var r=Math.sin(i),o=Math.cos(i),l=Math.abs(o)>wt?Math.tan(i):0,u=this.ep2*Math.pow(o,2),c=Math.pow(u,2),M=Math.pow(l,2),f=Math.pow(M,2);s=1-this.es*Math.pow(r,2);var d=e*Math.sqrt(s)/this.k0,p=Math.pow(d,2);a=i-(s*=l)*p/(1-this.es)*.5*(1-p/12*(5+3*M-9*u*M+u-4*c-p/30*(61+90*M-252*u*M+45*f+46*u-p/56*(1385+3633*M+4095*f+1574*f*M)))),h=Ht(this.long0+d*(1-p/6*(1+2*M+u-p/20*(5+28*M+24*f+8*u*M+6*u-p/42*(61+662*M+1320*f+720*f*M))))/o)}else a=xt*Wt(n),h=0;else{var m=Math.exp(e/this.k0),_=.5*(m-1/m),y=this.lat0+n/this.k0,x=Math.cos(y);s=Math.sqrt((1-Math.pow(x,2))/(1+Math.pow(_,2))),a=Math.asin(s),n<0&&(a=-a),h=0===_&&0===x?0:Ht(Math.atan2(_,x)+this.long0)}return t.x=h,t.y=a,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]},bs=function(t){var s=Math.exp(t);return(s-1/s)/2},ws=function(t,s){t=Math.abs(t),s=Math.abs(s);var i=Math.max(t,s),a=Math.min(t,s)/(i||1);return i*Math.sqrt(1+Math.pow(a,2))},Ns=function(t){var s=1+t,i=s-1;return 0===i?t:t*Math.log(s)/i},As=function(t){var s=Math.abs(t);return s=Ns(s*(1+s/(ws(1,s)+1))),t<0?-s:s},Es=function(t,s){for(var i,a=2*Math.cos(2*s),h=t.length-1,e=t[h],n=0;--h>=0;)i=a*e-n+t[h],n=e,e=i;return s+i*Math.sin(2*s)},Cs=function(t,s){for(var i,a=2*Math.cos(s),h=t.length-1,e=t[h],n=0;--h>=0;)i=a*e-n+t[h],n=e,e=i;return Math.sin(s)*i},Ps=function(t){var s=Math.exp(t);return(s+1/s)/2},Ss=function(t,s,i){for(var a,h,e=Math.sin(s),n=Math.cos(s),r=bs(i),o=Ps(i),l=2*n*o,u=-2*e*r,c=t.length-1,M=t[c],f=0,d=0,p=0;--c>=0;)a=d,h=f,M=l*(d=M)-a-u*(f=p)+t[c],p=u*d-h+l*f;return[(l=e*o)*M-(u=n*r)*p,l*p+u*M]},Is={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(vs.init.apply(this),this.forward=vs.forward,this.inverse=vs.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),s=t/(2-t),i=s;this.cgb[0]=s*(2+s*(-2/3+s*(s*(116/45+s*(26/45+s*(-2854/675)))-2))),this.cbg[0]=s*(s*(2/3+s*(4/3+s*(-82/45+s*(32/45+s*(4642/4725)))))-2),i*=s,this.cgb[1]=i*(7/3+s*(s*(-227/45+s*(2704/315+s*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+s*(-16/15+s*(-13/9+s*(904/315+s*(-1522/945))))),i*=s,this.cgb[2]=i*(56/15+s*(-136/35+s*(-1262/105+s*(73814/2835)))),this.cbg[2]=i*(-26/15+s*(34/21+s*(1.6+s*(-12686/2835)))),i*=s,this.cgb[3]=i*(4279/630+s*(-332/35+s*(-399572/14175))),this.cbg[3]=i*(1237/630+s*(s*(-24832/14175)-2.4)),i*=s,this.cgb[4]=i*(4174/315+s*(-144838/6237)),this.cbg[4]=i*(-734/315+s*(109598/31185)),i*=s,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(s,2),this.Qn=this.k0/(1+s)*(1+i*(.25+i*(1/64+i/256))),this.utg[0]=s*(s*(2/3+s*(-37/96+s*(1/360+s*(81/512+s*(-96199/604800)))))-.5),this.gtu[0]=s*(.5+s*(-2/3+s*(5/16+s*(41/180+s*(-127/288+s*(7891/37800)))))),this.utg[1]=i*(-1/48+s*(-1/15+s*(437/1440+s*(-46/105+s*(1118711/3870720))))),this.gtu[1]=i*(13/48+s*(s*(557/1440+s*(281/630+s*(-1983433/1935360)))-.6)),i*=s,this.utg[2]=i*(-17/480+s*(37/840+s*(209/4480+s*(-5569/90720)))),this.gtu[2]=i*(61/240+s*(-103/140+s*(15061/26880+s*(167603/181440)))),i*=s,this.utg[3]=i*(-4397/161280+s*(11/504+s*(830251/7257600))),this.gtu[3]=i*(49561/161280+s*(-179/168+s*(6601661/7257600))),i*=s,this.utg[4]=i*(-4583/161280+s*(108847/3991680)),this.gtu[4]=i*(34729/80640+s*(-3418889/1995840)),i*=s,this.utg[5]=-.03233083094085698*i,this.gtu[5]=.6650675310896665*i;var a=Es(this.cbg,this.lat0);this.Zb=-this.Qn*(a+Cs(this.gtu,2*a))},forward:function(t){var s=Ht(t.x-this.long0),i=t.y;i=Es(this.cbg,i);var a=Math.sin(i),h=Math.cos(i),e=Math.sin(s),n=Math.cos(s);i=Math.atan2(a,n*h),s=Math.atan2(e*h,ws(a,h*n)),s=As(Math.tan(s));var o,l,r=Ss(this.gtu,2*i,2*s);return i+=r[0],s+=r[1],Math.abs(s)<=2.623395162778?(o=this.a*(this.Qn*s)+this.x0,l=this.a*(this.Qn*i+this.Zb)+this.y0):(o=1/0,l=1/0),t.x=o,t.y=l,t},inverse:function(t){var a,h,s=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,s/=this.Qn,Math.abs(s)<=2.623395162778){var e=Ss(this.utg,2*i,2*s);i+=e[0],s+=e[1],s=Math.atan(bs(s));var n=Math.sin(i),r=Math.cos(i),o=Math.sin(s),l=Math.cos(s);i=Math.atan2(n*l,ws(o,l*r)),s=Math.atan2(o,l*r),a=Ht(s+this.long0),h=Es(this.cgb,i)}else a=1/0,h=1/0;return t.x=a,t.y=h,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},Os=function(t,s){if(void 0===t){if((t=Math.floor(30*(Ht(s)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t},ks={init:function(){var t=Os(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Nt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Is.init.apply(this),this.forward=Is.forward,this.inverse=Is.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},qs=function(t,s){return Math.pow((1-t)/(1+t),s)},Rs=20,Ls={init:function(){var t=Math.sin(this.lat0),s=Math.cos(this.lat0);s*=s,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*s*s/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Et)/(Math.pow(Math.tan(.5*this.lat0+Et),this.C)*qs(this.e*t,this.ratexp))},forward:function(t){var s=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Et),this.C)*qs(this.e*Math.sin(i),this.ratexp))-xt,t.x=this.C*s,t},inverse:function(t){for(var s=t.x/this.C,i=t.y,a=Math.pow(Math.tan(.5*i+Et)/this.K,1/this.C),h=Rs;h>0&&(i=2*Math.atan(a*qs(this.e*Math.sin(t.y),-.5*this.e))-xt,!(Math.abs(i-t.y)<1e-14));--h)t.y=i;return h?(t.x=s,t.y=i,t):null},names:["gauss"]},Ts={init:function(){Ls.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var s,i,a,h;return t.x=Ht(t.x-this.long0),Ls.forward.apply(this,[t]),s=Math.sin(t.y),i=Math.cos(t.y),a=Math.cos(t.x),h=this.k0*this.R2/(1+this.sinc0*s+this.cosc0*i*a),t.x=h*i*Math.sin(t.x),t.y=h*(this.cosc0*s-this.sinc0*i*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var s,i,a,h,e;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,e=Math.sqrt(t.x*t.x+t.y*t.y)){var n=2*Math.atan2(e,this.R2);s=Math.sin(n),i=Math.cos(n),h=Math.asin(i*this.sinc0+t.y*s*this.cosc0/e),a=Math.atan2(t.x*s,e*this.cosc0*i-t.y*this.sinc0*s)}else h=this.phic0,a=0;return t.x=a,t.y=h,Ls.inverse.apply(this,[t]),t.x=Ht(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Gs={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=wt&&(this.k0=.5*(1+Wt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=wt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=wt&&Math.abs(Math.cos(this.lat_ts))>wt&&(this.k0=.5*this.cons*Qt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Xt(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Qt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-xt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var s,i,a,h,e,n,r=t.x,o=t.y,l=Math.sin(o),u=Math.cos(o),c=Ht(r-this.long0);return Math.abs(Math.abs(r-this.long0)-Math.PI)<=wt&&Math.abs(o+this.lat0)<=wt?(t.x=NaN,t.y=NaN,t):this.sphere?(s=2*this.k0/(1+this.sinlat0*l+this.coslat0*u*Math.cos(c)),t.x=this.a*s*u*Math.sin(c)+this.x0,t.y=this.a*s*(this.coslat0*l-this.sinlat0*u*Math.cos(c))+this.y0,t):(i=2*Math.atan(this.ssfn_(o,l,this.e))-xt,h=Math.cos(i),a=Math.sin(i),Math.abs(this.coslat0)<=wt?(e=Xt(this.e,o*this.con,this.con*l),n=2*this.a*this.k0*e/this.cons,t.x=this.x0+n*Math.sin(r-this.long0),t.y=this.y0-this.con*n*Math.cos(r-this.long0),t):(Math.abs(this.sinlat0)<wt?(s=2*this.a*this.k0/(1+h*Math.cos(c)),t.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*h*Math.cos(c))),t.y=s*(this.cosX0*a-this.sinX0*h*Math.cos(c))+this.y0),t.x=s*h*Math.sin(c)+this.x0,t))},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var s,i,a,h,e,n=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var r=2*Math.atan(n/(2*this.a*this.k0));return s=this.long0,i=this.lat0,n<=wt?(t.x=s,t.y=i,t):(i=Math.asin(Math.cos(r)*this.sinlat0+t.y*Math.sin(r)*this.coslat0/n),s=Ht(Math.abs(this.coslat0)<wt?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(r),n*this.coslat0*Math.cos(r)-t.y*this.sinlat0*Math.sin(r))),t.x=s,t.y=i,t)}if(Math.abs(this.coslat0)<=wt){if(n<=wt)return i=this.lat0,s=this.long0,t.x=s,t.y=i,t;t.x*=this.con,t.y*=this.con,a=n*this.cons/(2*this.a*this.k0),i=this.con*Jt(this.e,a),s=this.con*Ht(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else h=2*Math.atan(n*this.cosX0/(2*this.a*this.k0*this.ms1)),s=this.long0,n<=wt?e=this.X0:(e=Math.asin(Math.cos(h)*this.sinX0+t.y*Math.sin(h)*this.cosX0/n),s=Ht(this.long0+Math.atan2(t.x*Math.sin(h),n*this.cosX0*Math.cos(h)-t.y*this.sinX0*Math.sin(h)))),i=-1*Jt(this.e,Math.tan(.5*(xt+e)));return t.x=s,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(t,s,i){return s*=i,Math.tan(.5*(xt+t))*Math.pow((1-s)/(1+s),.5*i)}},js={init:function(){var t=this.lat0;this.lambda0=this.long0;var s=Math.sin(t),i=this.a,a=1/this.rf,h=2*a-Math.pow(a,2),e=this.e=Math.sqrt(h);this.R=this.k0*i*Math.sqrt(1-h)/(1-h*Math.pow(s,2)),this.alpha=Math.sqrt(1+h/(1-h)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(s/this.alpha);var n=Math.log(Math.tan(Math.PI/4+this.b0/2)),r=Math.log(Math.tan(Math.PI/4+t/2)),o=Math.log((1+e*s)/(1-e*s));this.K=n-this.alpha*r+this.alpha*e/2*o},forward:function(t){var s=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),a=-this.alpha*(s+i)+this.K,h=2*(Math.atan(Math.exp(a))-Math.PI/4),e=this.alpha*(t.x-this.lambda0),n=Math.atan(Math.sin(e)/(Math.sin(this.b0)*Math.tan(h)+Math.cos(this.b0)*Math.cos(e))),r=Math.asin(Math.cos(this.b0)*Math.sin(h)-Math.sin(this.b0)*Math.cos(h)*Math.cos(e));return t.y=this.R/2*Math.log((1+Math.sin(r))/(1-Math.sin(r)))+this.y0,t.x=this.R*n+this.x0,t},inverse:function(t){for(var s=t.x-this.x0,i=t.y-this.y0,a=s/this.R,h=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),e=Math.asin(Math.cos(this.b0)*Math.sin(h)+Math.sin(this.b0)*Math.cos(h)*Math.cos(a)),n=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(h))),r=this.lambda0+n/this.alpha,o=0,l=e,u=-1e3,c=0;Math.abs(l-u)>1e-7;){if(++c>20)return;o=1/this.alpha*(Math.log(Math.tan(Math.PI/4+e/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),u=l,l=2*Math.atan(Math.exp(o))-Math.PI/2}return t.x=r,t.y=l,t},names:["somerc"]},Bs=1e-7,zs={init:function(){var t,s,i,a,h,e,n,r,o,l,u,c=0,M=0,f=0,d=0,p=0,m=0,_=0;this.no_off=rt(this),this.no_rot="no_rot"in this;var y=!1;"alpha"in this&&(y=!0);var x=!1;if("rectified_grid_angle"in this&&(x=!0),y&&(_=this.alpha),x&&(c=this.rectified_grid_angle*Nt),y||x)M=this.longc;else if(f=this.long1,p=this.lat1,d=this.long2,m=this.lat2,Math.abs(p-m)<=Bs||(t=Math.abs(p))<=Bs||Math.abs(t-xt)<=Bs||Math.abs(Math.abs(this.lat0)-xt)<=Bs||Math.abs(Math.abs(m)-xt)<=Bs)throw new Error;var g=1-this.es;s=Math.sqrt(g),Math.abs(this.lat0)>wt?(r=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*r*r,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/g),this.A=this.B*this.k0*s/t,(h=(a=this.B*s/(i*Math.sqrt(t)))*a-1)<=0?h=0:(h=Math.sqrt(h),this.lat0<0&&(h=-h)),this.E=h+=a,this.E*=Math.pow(Xt(this.e,this.lat0,r),this.B)):(this.B=1/s,this.A=this.k0,this.E=a=h=1),y||x?(y?(u=Math.asin(Math.sin(_)/a),x||(c=_)):(u=c,_=Math.asin(a*Math.sin(u))),this.lam0=M-Math.asin(.5*(h-1/h)*Math.tan(u))/this.B):(e=Math.pow(Xt(this.e,p,Math.sin(p)),this.B),n=Math.pow(Xt(this.e,m,Math.sin(m)),this.B),h=this.E/e,o=(n-e)/(n+e),l=((l=this.E*this.E)-n*e)/(l+n*e),(t=f-d)<-Math.pi?d-=Ct:t>Math.pi&&(d+=Ct),this.lam0=Ht(.5*(f+d)-Math.atan(l*Math.tan(.5*this.B*(f-d))/o)/this.B),u=Math.atan(2*Math.sin(this.B*Ht(f-this.lam0))/(h-1/h)),c=_=Math.asin(a*Math.sin(u))),this.singam=Math.sin(u),this.cosgam=Math.cos(u),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),h=.5*u,this.v_pole_n=this.ArB*Math.log(Math.tan(Et-h)),this.v_pole_s=this.ArB*Math.log(Math.tan(Et+h))},forward:function(t){var s,i,a,h,e,n,r,o,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-xt)>wt){if(s=.5*((e=this.E/Math.pow(Xt(this.e,t.y,Math.sin(t.y)),this.B))-(n=1/e)),i=.5*(e+n),h=Math.sin(this.B*t.x),a=(s*this.singam-h*this.cosgam)/i,Math.abs(Math.abs(a)-1)<wt)throw new Error;o=.5*this.ArB*Math.log((1-a)/(1+a)),n=Math.cos(this.B*t.x),r=Math.abs(n)<Bs?this.A*t.x:this.ArB*Math.atan2(s*this.cosgam+h*this.singam,n)}else o=t.y>0?this.v_pole_n:this.v_pole_s,r=this.ArB*t.y;return this.no_rot?(l.x=r,l.y=o):(r-=this.u_0,l.x=o*this.cosrot+r*this.sinrot,l.y=r*this.cosrot-o*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var s,i,a,h,e,n,r,o={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,s=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,s=t.y*this.cosrot+t.x*this.sinrot+this.u_0),h=.5*((a=Math.exp(-this.BrA*i))-1/a),e=.5*(a+1/a),r=((n=Math.sin(this.BrA*s))*this.cosgam+h*this.singam)/e,Math.abs(Math.abs(r)-1)<wt)o.x=0,o.y=r<0?-xt:xt;else{if(o.y=this.E/Math.sqrt((1+r)/(1-r)),o.y=Jt(this.e,Math.pow(o.y,1/this.B)),o.y===1/0)throw new Error;o.x=-this.rB*Math.atan2(h*this.cosgam-n*this.singam,Math.cos(this.BrA*s))}return o.x+=this.lam0,o},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Fs={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<wt)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var s=Math.sin(this.lat1),i=Math.cos(this.lat1),a=Qt(this.e,s,i),h=Xt(this.e,this.lat1,s),e=Math.sin(this.lat2),n=Math.cos(this.lat2),r=Qt(this.e,e,n),o=Xt(this.e,this.lat2,e),l=Xt(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>wt?this.ns=Math.log(a/r)/Math.log(h/o):this.ns=s,isNaN(this.ns)&&(this.ns=s),this.f0=a/(this.ns*Math.pow(h,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var s=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=wt&&(i=Wt(i)*(xt-2*wt));var a,h,e=Math.abs(Math.abs(i)-xt);if(e>wt)a=Xt(this.e,i,Math.sin(i)),h=this.a*this.f0*Math.pow(a,this.ns);else{if((e=i*this.ns)<=0)return null;h=0}var n=this.ns*Ht(s-this.long0);return t.x=this.k0*(h*Math.sin(n))+this.x0,t.y=this.k0*(this.rh-h*Math.cos(n))+this.y0,t},inverse:function(t){var s,i,a,h,e,n=(t.x-this.x0)/this.k0,r=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(s=Math.sqrt(n*n+r*r),i=1):(s=-Math.sqrt(n*n+r*r),i=-1);var o=0;if(0!==s&&(o=Math.atan2(i*n,i*r)),0!==s||this.ns>0){if(i=1/this.ns,a=Math.pow(s/(this.a*this.f0),i),-9999===(h=Jt(this.e,a)))return null}else h=-xt;return e=Ht(o/this.ns+this.long0),t.x=e,t.y=h,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},Ds={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var s,i,a,h,e,n,r,o=t.x,l=t.y,u=Ht(o-this.long0);return s=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/s)-this.s45),a=-u*this.alfa,h=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),e=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(h)),n=this.n*e,r=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(h/2+this.s45),this.n),t.y=r*Math.cos(n)/1,t.x=r*Math.sin(n)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var s,i,a,h,e,n,r,o=t.x;t.x=t.y,t.y=o,this.czech||(t.y*=-1,t.x*=-1),e=Math.sqrt(t.x*t.x+t.y*t.y),h=Math.atan2(t.y,t.x)/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/e,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),s=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(h)),i=Math.asin(Math.cos(a)*Math.sin(h)/Math.cos(s)),t.x=this.long0-i/this.alfa,n=s,r=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(s/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(n))/(1-this.e*Math.sin(n)),this.e/2))-this.s45),Math.abs(n-t.y)<1e-10&&(r=1),n=t.y,l+=1}while(0===r&&l<15);return l>=15?null:t},names:["Krovak","krovak"]},Us=function(t,s,i,a,h){return t*h-s*Math.sin(2*h)+i*Math.sin(4*h)-a*Math.sin(6*h)},Qs=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},Ws=function(t){return.375*t*(1+.25*t*(1+.46875*t))},Hs=function(t){return.05859375*t*t*(1+.75*t)},Xs=function(t){return t*t*t*(35/3072)},Js=function(t,s,i){var a=s*i;return t/Math.sqrt(1-a*a)},Ks=function(t){return Math.abs(t)<xt?t:t-Wt(t)*Math.PI},Vs=function(t,s,i,a,h){var e,n;e=t/s;for(var r=0;r<15;r++)if(e+=n=(t-(s*e-i*Math.sin(2*e)+a*Math.sin(4*e)-h*Math.sin(6*e)))/(s-2*i*Math.cos(2*e)+4*a*Math.cos(4*e)-6*h*Math.cos(6*e)),Math.abs(n)<=1e-10)return e;return NaN},Zs={init:function(){this.sphere||(this.e0=Qs(this.es),this.e1=Ws(this.es),this.e2=Hs(this.es),this.e3=Xs(this.es),this.ml0=this.a*Us(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var s,i,a=t.x,h=t.y;if(a=Ht(a-this.long0),this.sphere)s=this.a*Math.asin(Math.cos(h)*Math.sin(a)),i=this.a*(Math.atan2(Math.tan(h),Math.cos(a))-this.lat0);else{var e=Math.sin(h),n=Math.cos(h),r=Js(this.a,this.e,e),o=Math.tan(h)*Math.tan(h),l=a*Math.cos(h),u=l*l,c=this.es*n*n/(1-this.es);s=r*l*(1-u*o*(1/6-(8-o+8*c)*u/120)),i=this.a*Us(this.e0,this.e1,this.e2,this.e3,h)-this.ml0+r*e/n*u*(.5+(5-o+6*c)*u/24)}return t.x=s+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var s,i,a=t.x/this.a,h=t.y/this.a;if(this.sphere){var e=h+this.lat0;s=Math.asin(Math.sin(e)*Math.cos(a)),i=Math.atan2(Math.tan(a),Math.cos(e))}else{var n=this.ml0/this.a+h,r=Vs(n,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(r)-xt)<=wt)return t.x=this.long0,t.y=xt,h<0&&(t.y*=-1),t;var o=Js(this.a,this.e,Math.sin(r)),l=o*o*o/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(r),2),c=a*this.a/o,M=c*c;s=r-o*Math.tan(r)/l*c*c*(.5-(1+3*u)*c*c/24),i=c*(1-M*(u/3+(1+3*u)*u*M/15))/Math.cos(r)}return t.x=Ht(i+this.long0),t.y=Ks(s),t},names:["Cassini","Cassini_Soldner","cass"]},Ys=function(t,s){var i;return t>1e-7?(1-t*t)*(s/(1-(i=t*s)*i)-.5/t*Math.log((1-i)/(1+i))):2*s},$s=.3333333333333333,ti=.17222222222222222,si=.10257936507936508,ii=.06388888888888888,ai=.0664021164021164,hi=.016415012942191543,ei={init:function(){var s,t=Math.abs(this.lat0);if(Math.abs(t-xt)<wt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<wt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Ys(this.e,1),this.mmf=.5/(1-this.es),this.apa=ot(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),s=Math.sin(this.lat0),this.sinb1=Ys(this.e,s)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*s*s)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var s,i,a,h,e,n,r,o,l,u,c=t.x,M=t.y;if(c=Ht(c-this.long0),this.sphere){if(e=Math.sin(M),u=Math.cos(M),a=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+u*a:1+this.sinph0*e+this.cosph0*u*a)<=wt)return null;s=(i=Math.sqrt(2/i))*u*Math.sin(c),i*=this.mode===this.EQUIT?e:this.cosph0*e-this.sinph0*u*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(M+this.lat0)<wt)return null;i=Et-.5*M,s=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(c),i*=a}}else{switch(r=0,o=0,l=0,a=Math.cos(c),h=Math.sin(c),e=Math.sin(M),n=Ys(this.e,e),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(r=n/this.qp,o=Math.sqrt(1-r*r)),this.mode){case this.OBLIQ:l=1+this.sinb1*r+this.cosb1*o*a;break;case this.EQUIT:l=1+o*a;break;case this.N_POLE:l=xt+M,n=this.qp-n;break;case this.S_POLE:l=M-xt,n=this.qp+n}if(Math.abs(l)<wt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),i=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*r-this.sinb1*o*a):(l=Math.sqrt(2/(1+o*a)))*r*this.ymf,s=this.xmf*l*o*h;break;case this.N_POLE:case this.S_POLE:n>=0?(s=(l=Math.sqrt(n))*h,i=a*(this.mode===this.S_POLE?l:-l)):s=i=0}}return t.x=this.a*s+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var s,i,a,h,e,n,r,o=t.x/this.a,l=t.y/this.a;if(this.sphere){var u,c=0,M=0;if((i=.5*(u=Math.sqrt(o*o+l*l)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(M=Math.sin(i),c=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(u)<=wt?0:Math.asin(l*M/u),o*=M,l=c*u;break;case this.OBLIQ:i=Math.abs(u)<=wt?this.lat0:Math.asin(c*this.sinph0+l*M*this.cosph0/u),o*=M*this.cosph0,l=(c-Math.sin(i)*this.sinph0)*u;break;case this.N_POLE:l=-l,i=xt-i;break;case this.S_POLE:i-=xt}s=0!==l||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(o,l):0}else{if(r=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(o/=this.dd,l*=this.dd,(n=Math.sqrt(o*o+l*l))<wt)return t.x=this.long0,t.y=this.lat0,t;h=2*Math.asin(.5*n/this.rq),a=Math.cos(h),o*=h=Math.sin(h),this.mode===this.OBLIQ?(r=a*this.sinb1+l*h*this.cosb1/n,e=this.qp*r,l=n*this.cosb1*a-l*this.sinb1*h):(r=l*h/n,e=this.qp*r,l=n*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),!(e=o*o+l*l))return t.x=this.long0,t.y=this.lat0,t;r=1-e/this.qp,this.mode===this.S_POLE&&(r=-r)}s=Math.atan2(o,l),i=lt(Math.asin(r),this.apa)}return t.x=Ht(this.long0+s),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},ni=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},ri={init:function(){Math.abs(this.lat1+this.lat2)<wt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Qt(this.e3,this.sin_po,this.cos_po),this.qs1=Ys(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Qt(this.e3,this.sin_po,this.cos_po),this.qs2=Ys(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Ys(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>wt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var s=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var a=Ys(this.e3,this.sin_phi),h=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,e=this.ns0*Ht(s-this.long0),n=h*Math.sin(e)+this.x0,r=this.rh-h*Math.cos(e)+this.y0;return t.x=n,t.y=r,t},inverse:function(t){var s,i,a,h,e,n;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(s=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(s=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1),h=0,0!==s&&(h=Math.atan2(a*t.x,a*t.y)),a=s*this.ns0/this.a,this.sphere?n=Math.asin((this.c-a*a)/(2*this.ns0)):(i=(this.c-a*a)/this.ns0,n=this.phi1z(this.e3,i)),e=Ht(h/this.ns0+this.long0),t.x=e,t.y=n,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,s){var i,h,e,n,r=ni(.5*s);if(t<wt)return r;for(var o=t*t,l=1;l<=25;l++)if(r+=n=.5*(e=1-(h=t*(i=Math.sin(r)))*h)*e/Math.cos(r)*(s/(1-o)-i/e+.5/t*Math.log((1-h)/(1+h))),Math.abs(n)<=1e-7)return r;return null}},oi={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var s,i,a,h,e,n,r,o=t.x,l=t.y;return a=Ht(o-this.long0),s=Math.sin(l),i=Math.cos(l),h=Math.cos(a),(e=this.sin_p14*s+this.cos_p14*i*h)>0||Math.abs(e)<=wt?(n=this.x0+1*this.a*i*Math.sin(a)/e,r=this.y0+1*this.a*(this.cos_p14*s-this.sin_p14*i*h)/e):(n=this.x0+this.infinity_dist*i*Math.sin(a),r=this.y0+this.infinity_dist*(this.cos_p14*s-this.sin_p14*i*h)),t.x=n,t.y=r,t},inverse:function(t){var s,i,a,h,e,n;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(s=Math.sqrt(t.x*t.x+t.y*t.y))?(h=Math.atan2(s,this.rc),i=Math.sin(h),a=Math.cos(h),n=ni(a*this.sin_p14+t.y*i*this.cos_p14/s),e=Math.atan2(t.x*i,s*this.cos_p14*a-t.y*this.sin_p14*i),e=Ht(this.long0+e)):(n=this.phic0,e=0),t.x=e,t.y=n,t},names:["gnom"]},li=function(t,s){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(s)-i)<1e-6)return s<0?-1*xt:xt;for(var a,h,e,n,r=Math.asin(.5*s),o=0;o<30;o++)if(h=Math.sin(r),e=Math.cos(r),n=t*h,r+=a=Math.pow(1-n*n,2)/(2*e)*(s/(1-t*t)-h/(1-n*n)+.5/t*Math.log((1-n)/(1+n))),Math.abs(a)<=1e-10)return r;return NaN},ui={init:function(){this.sphere||(this.k0=Qt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var s,i,a=t.x,h=t.y,e=Ht(a-this.long0);if(this.sphere)s=this.x0+this.a*e*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(h)/Math.cos(this.lat_ts);else{var n=Ys(this.e,Math.sin(h));s=this.x0+this.a*this.k0*e,i=this.y0+this.a*n*.5/this.k0}return t.x=s,t.y=i,t},inverse:function(t){var s,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(s=Ht(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=li(this.e,2*t.y*this.k0/this.a),s=Ht(this.long0+t.x/(this.a*this.k0))),t.x=s,t.y=i,t},names:["cea"]},ci={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var s=t.x,i=t.y,a=Ht(s-this.long0),h=Ks(i-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*h,t},inverse:function(t){var s=t.x,i=t.y;return t.x=Ht(this.long0+(s-this.x0)/(this.a*this.rc)),t.y=Ks(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Mi=20,fi={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Qs(this.es),this.e1=Ws(this.es),this.e2=Hs(this.es),this.e3=Xs(this.es),this.ml0=this.a*Us(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var s,i,a,h=t.x,e=t.y,n=Ht(h-this.long0);if(a=n*Math.sin(e),this.sphere)Math.abs(e)<=wt?(s=this.a*n,i=-1*this.a*this.lat0):(s=this.a*Math.sin(a)/Math.tan(e),i=this.a*(Ks(e-this.lat0)+(1-Math.cos(a))/Math.tan(e)));else if(Math.abs(e)<=wt)s=this.a*n,i=-1*this.ml0;else{var r=Js(this.a,this.e,Math.sin(e))/Math.tan(e);s=r*Math.sin(a),i=this.a*Us(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+r*(1-Math.cos(a))}return t.x=s+this.x0,t.y=i+this.y0,t},inverse:function(t){var s,i,a,h,e,n,r,o,l;if(a=t.x-this.x0,h=t.y-this.y0,this.sphere)if(Math.abs(h+this.a*this.lat0)<=wt)s=Ht(a/this.a+this.long0),i=0;else{var u;for(n=this.lat0+h/this.a,r=a*a/this.a/this.a+n*n,o=n,e=Mi;e;--e)if(o+=l=-1*(n*(o*(u=Math.tan(o))+1)-o-.5*(o*o+r)*u)/((o-n)/u-1),Math.abs(l)<=wt){i=o;break}s=Ht(this.long0+Math.asin(a*Math.tan(o)/this.a)/Math.sin(i))}else if(Math.abs(h+this.ml0)<=wt)i=0,s=Ht(this.long0+a/this.a);else{var c,M,f,d,p;for(n=(this.ml0+h)/this.a,r=a*a/this.a/this.a+n*n,o=n,e=Mi;e;--e)if(p=this.e*Math.sin(o),c=Math.sqrt(1-p*p)*Math.tan(o),M=this.a*Us(this.e0,this.e1,this.e2,this.e3,o),f=this.e0-2*this.e1*Math.cos(2*o)+4*this.e2*Math.cos(4*o)-6*this.e3*Math.cos(6*o),o-=l=(n*(c*(d=M/this.a)+1)-d-.5*c*(d*d+r))/(this.es*Math.sin(2*o)*(d*d+r-2*n*d)/(4*c)+(n-d)*(c*f-2/Math.sin(2*o))-f),Math.abs(l)<=wt){i=o;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),s=Ht(this.long0+Math.asin(a*c/this.a)/Math.sin(i))}return t.x=s,t.y=i,t},names:["Polyconic","poly"]},di={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var s,i=t.x,a=t.y-this.lat0,h=i-this.long0,e=a/yt*1e-5,n=h,r=1,o=0;for(s=1;s<=10;s++)r*=e,o+=this.A[s]*r;var l,u=o,c=n,M=1,f=0,d=0,p=0;for(s=1;s<=6;s++)l=f*u+M*c,M=M*u-f*c,f=l,d=d+this.B_re[s]*M-this.B_im[s]*f,p=p+this.B_im[s]*M+this.B_re[s]*f;return t.x=p*this.a+this.x0,t.y=d*this.a+this.y0,t},inverse:function(t){var s,i,a=t.x,h=t.y,e=a-this.x0,n=(h-this.y0)/this.a,r=e/this.a,o=1,l=0,u=0,c=0;for(s=1;s<=6;s++)i=l*n+o*r,o=o*n-l*r,l=i,u=u+this.C_re[s]*o-this.C_im[s]*l,c=c+this.C_im[s]*o+this.C_re[s]*l;for(var M=0;M<this.iterations;M++){var f,d=u,p=c,m=n,_=r;for(s=2;s<=6;s++)f=p*u+d*c,d=d*u-p*c,p=f,m+=(s-1)*(this.B_re[s]*d-this.B_im[s]*p),_+=(s-1)*(this.B_im[s]*d+this.B_re[s]*p);d=1,p=0;var y=this.B_re[1],x=this.B_im[1];for(s=2;s<=6;s++)f=p*u+d*c,d=d*u-p*c,p=f,y+=s*(this.B_re[s]*d-this.B_im[s]*p),x+=s*(this.B_im[s]*d+this.B_re[s]*p);var g=y*y+x*x;u=(m*y+_*x)/g,c=(_*y-m*x)/g}var v=u,b=c,w=1,N=0;for(s=1;s<=9;s++)w*=v,N+=this.D[s]*w;var A=this.lat0+N*yt*1e5,E=this.long0+b;return t.x=E,t.y=A,t},names:["New_Zealand_Map_Grid","nzmg"]},pi={init:function(){},forward:function(t){var s=t.x,i=t.y,a=Ht(s-this.long0),h=this.x0+this.a*a,e=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=h,t.y=e,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var s=Ht(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=s,t.y=i,t},names:["Miller_Cylindrical","mill"]},mi=20,_i={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=ys(this.es)},forward:function(t){var s,i,a=t.x,h=t.y;if(a=Ht(a-this.long0),this.sphere){if(this.m)for(var e=this.n*Math.sin(h),n=mi;n;--n){var r=(this.m*h+Math.sin(h)-e)/(this.m+Math.cos(h));if(h-=r,Math.abs(r)<wt)break}else h=1!==this.n?Math.asin(this.n*Math.sin(h)):h;s=this.a*this.C_x*a*(this.m+Math.cos(h)),i=this.a*this.C_y*h}else{var o=Math.sin(h),l=Math.cos(h);i=this.a*xs(h,o,l,this.en),s=this.a*a*l/Math.sqrt(1-this.es*o*o)}return t.x=s,t.y=i,t},inverse:function(t){var s,i,a,h;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,s=t.y/this.a,this.sphere?(s/=this.C_y,a/=this.C_x*(this.m+Math.cos(s)),this.m?s=ni((this.m*s+Math.sin(s))/this.n):1!==this.n&&(s=ni(Math.sin(s)/this.n)),a=Ht(a+this.long0),s=Ks(s)):(s=gs(t.y/this.a,this.es,this.en),(h=Math.abs(s))<xt?(h=Math.sin(s),i=this.long0+t.x*Math.sqrt(1-this.es*h*h)/(this.a*Math.cos(s)),a=Ht(i)):h-wt<xt&&(a=this.long0)),t.x=a,t.y=s,t},names:["Sinusoidal","sinu"]},yi={init:function(){},forward:function(t){for(var s=t.x,i=t.y,a=Ht(s-this.long0),h=i,e=Math.PI*Math.sin(i);;){var n=-(h+Math.sin(h)-e)/(1+Math.cos(h));if(h+=n,Math.abs(n)<wt)break}h/=2,Math.PI/2-Math.abs(i)<wt&&(a=0);var r=.900316316158*this.a*a*Math.cos(h)+this.x0,o=1.4142135623731*this.a*Math.sin(h)+this.y0;return t.x=r,t.y=o,t},inverse:function(t){var s,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),s=Math.asin(i);var a=Ht(this.long0+t.x/(.900316316158*this.a*Math.cos(s)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),i=(2*s+Math.sin(2*s))/Math.PI,Math.abs(i)>1&&(i=1);var h=Math.asin(i);return t.x=a,t.y=h,t},names:["Mollweide","moll"]},xi={init:function(){Math.abs(this.lat1+this.lat2)<wt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Qs(this.es),this.e1=Ws(this.es),this.e2=Hs(this.es),this.e3=Xs(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Qt(this.e,this.sinphi,this.cosphi),this.ml1=Us(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<wt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Qt(this.e,this.sinphi,this.cosphi),this.ml2=Us(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Us(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var s,i=t.x,a=t.y;if(this.sphere)s=this.a*(this.g-a);else{var h=Us(this.e0,this.e1,this.e2,this.e3,a);s=this.a*(this.g-h)}var e=this.ns*Ht(i-this.long0),n=this.x0+s*Math.sin(e),r=this.y0+this.rh-s*Math.cos(e);return t.x=n,t.y=r,t},inverse:function(t){var s,i,a,h;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),s=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),s=-1);var e=0;if(0!==i&&(e=Math.atan2(s*t.x,s*t.y)),this.sphere)return h=Ht(this.long0+e/this.ns),a=Ks(this.g-i/this.a),t.x=h,t.y=a,t;var n=this.g-i/this.a;return a=Vs(n,this.e0,this.e1,this.e2,this.e3),h=Ht(this.long0+e/this.ns),t.x=h,t.y=a,t},names:["Equidistant_Conic","eqdc"]},gi={init:function(){this.R=this.a},forward:function(t){var s,i,a=t.x,h=t.y,e=Ht(a-this.long0);Math.abs(h)<=wt&&(s=this.x0+this.R*e,i=this.y0);var n=ni(2*Math.abs(h/Math.PI));(Math.abs(e)<=wt||Math.abs(Math.abs(h)-xt)<=wt)&&(s=this.x0,i=h>=0?this.y0+Math.PI*this.R*Math.tan(.5*n):this.y0+Math.PI*this.R*-Math.tan(.5*n));var r=.5*Math.abs(Math.PI/e-e/Math.PI),o=r*r,l=Math.sin(n),u=Math.cos(n),c=u/(l+u-1),M=c*c,f=c*(2/l-1),d=f*f,p=Math.PI*this.R*(r*(c-d)+Math.sqrt(o*(c-d)*(c-d)-(d+o)*(M-d)))/(d+o);e<0&&(p=-p),s=this.x0+p;var m=o+c;return p=Math.PI*this.R*(f*m-r*Math.sqrt((d+o)*(o+1)-m*m))/(d+o),i=h>=0?this.y0+p:this.y0-p,t.x=s,t.y=i,t},inverse:function(t){var s,i,a,h,e,n,r,o,l,u,c,M;return t.x-=this.x0,t.y-=this.y0,c=Math.PI*this.R,e=(a=t.x/c)*a+(h=t.y/c)*h,c=3*(h*h/(o=-2*(n=-Math.abs(h)*(1+e))+1+2*h*h+e*e)+(2*(r=n-2*h*h+a*a)*r*r/o/o/o-9*n*r/o/o)/27)/(l=(n-r*r/3/o)/o)/(u=2*Math.sqrt(-l/3)),Math.abs(c)>1&&(c=c>=0?1:-1),M=Math.acos(c)/3,i=t.y>=0?(-u*Math.cos(M+Math.PI/3)-r/3/o)*Math.PI:-(-u*Math.cos(M+Math.PI/3)-r/3/o)*Math.PI,s=Math.abs(a)<wt?this.long0:Ht(this.long0+Math.PI*(e-1+Math.sqrt(1+2*(a*a-h*h)+e*e))/2/a),t.x=s,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},vi={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var s,i,a,h,e,n,r,o,l,u,c,M,f,d,p,m,_,y,x,g,v,b,N=t.x,A=t.y,E=Math.sin(t.y),C=Math.cos(t.y),P=Ht(N-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=wt?(t.x=this.x0+this.a*(xt-A)*Math.sin(P),t.y=this.y0-this.a*(xt-A)*Math.cos(P),t):Math.abs(this.sin_p12+1)<=wt?(t.x=this.x0+this.a*(xt+A)*Math.sin(P),t.y=this.y0+this.a*(xt+A)*Math.cos(P),t):(y=this.sin_p12*E+this.cos_p12*C*Math.cos(P),_=(m=Math.acos(y))?m/Math.sin(m):1,t.x=this.x0+this.a*_*C*Math.sin(P),t.y=this.y0+this.a*_*(this.cos_p12*E-this.sin_p12*C*Math.cos(P)),t):(s=Qs(this.es),i=Ws(this.es),a=Hs(this.es),h=Xs(this.es),Math.abs(this.sin_p12-1)<=wt?(e=this.a*Us(s,i,a,h,xt),n=this.a*Us(s,i,a,h,A),t.x=this.x0+(e-n)*Math.sin(P),t.y=this.y0-(e-n)*Math.cos(P),t):Math.abs(this.sin_p12+1)<=wt?(e=this.a*Us(s,i,a,h,xt),n=this.a*Us(s,i,a,h,A),t.x=this.x0+(e+n)*Math.sin(P),t.y=this.y0+(e+n)*Math.cos(P),t):(r=E/C,o=Js(this.a,this.e,this.sin_p12),l=Js(this.a,this.e,E),u=Math.atan((1-this.es)*r+this.es*o*this.sin_p12/(l*C)),x=0===(c=Math.atan2(Math.sin(P),this.cos_p12*Math.tan(u)-this.sin_p12*Math.cos(P)))?Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.abs(Math.abs(c)-Math.PI)<=wt?-Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.asin(Math.sin(P)*Math.cos(u)/Math.sin(c)),M=this.e*this.sin_p12/Math.sqrt(1-this.es),m=o*x*(1-(g=x*x)*(p=(f=this.e*this.cos_p12*Math.cos(c)/Math.sqrt(1-this.es))*f)*(1-p)/6+(v=g*x)/8*(d=M*f)*(1-2*p)+(b=v*x)/120*(p*(4-7*p)-3*M*M*(1-7*p))-b*x/48*d),t.x=this.x0+m*Math.sin(c),t.y=this.y0+m*Math.cos(c),t))},inverse:function(t){var s,i,a,h,e,n,r,o,l,u,c,M,d,p,m,_,y,x,g,v,b,w,N;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((s=Math.sqrt(t.x*t.x+t.y*t.y))>2*xt*this.a)return;return i=s/this.a,a=Math.sin(i),h=Math.cos(i),e=this.long0,Math.abs(s)<=wt?n=this.lat0:(n=ni(h*this.sin_p12+t.y*a*this.cos_p12/s),r=Math.abs(this.lat0)-xt,e=Ht(Math.abs(r)<=wt?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*a,s*this.cos_p12*h-t.y*this.sin_p12*a))),t.x=e,t.y=n,t}return o=Qs(this.es),l=Ws(this.es),u=Hs(this.es),c=Xs(this.es),Math.abs(this.sin_p12-1)<=wt?(M=this.a*Us(o,l,u,c,xt),s=Math.sqrt(t.x*t.x+t.y*t.y),n=Vs((M-s)/this.a,o,l,u,c),e=Ht(this.long0+Math.atan2(t.x,-1*t.y)),t.x=e,t.y=n,t):Math.abs(this.sin_p12+1)<=wt?(M=this.a*Us(o,l,u,c,xt),s=Math.sqrt(t.x*t.x+t.y*t.y),n=Vs((s-M)/this.a,o,l,u,c),e=Ht(this.long0+Math.atan2(t.x,t.y)),t.x=e,t.y=n,t):(s=Math.sqrt(t.x*t.x+t.y*t.y),m=Math.atan2(t.x,t.y),d=Js(this.a,this.e,this.sin_p12),_=Math.cos(m),x=-(y=this.e*this.cos_p12*_)*y/(1-this.es),g=3*this.es*(1-x)*this.sin_p12*this.cos_p12*_/(1-this.es),w=1-x*(b=(v=s/d)-x*(1+x)*Math.pow(v,3)/6-g*(1+3*x)*Math.pow(v,4)/24)*b/2-v*b*b*b/6,p=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*_),e=Ht(this.long0+Math.asin(Math.sin(m)*Math.sin(b)/Math.cos(p))),N=Math.sin(p),n=Math.atan2((N-this.es*w*this.sin_p12)*Math.tan(p),N*(1-this.es)),t.x=e,t.y=n,t)},names:["Azimuthal_Equidistant","aeqd"]},bi={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var s,i,a,h,e,n,r,o=t.x,l=t.y;return a=Ht(o-this.long0),s=Math.sin(l),i=Math.cos(l),h=Math.cos(a),((e=this.sin_p14*s+this.cos_p14*i*h)>0||Math.abs(e)<=wt)&&(n=1*this.a*i*Math.sin(a),r=this.y0+1*this.a*(this.cos_p14*s-this.sin_p14*i*h)),t.x=n,t.y=r,t},inverse:function(t){var s,i,a,h,e,n,r;return t.x-=this.x0,t.y-=this.y0,s=Math.sqrt(t.x*t.x+t.y*t.y),i=ni(s/this.a),a=Math.sin(i),h=Math.cos(i),n=this.long0,Math.abs(s)<=wt?(r=this.lat0,t.x=n,t.y=r,t):(r=ni(h*this.sin_p14+t.y*a*this.cos_p14/s),e=Math.abs(this.lat0)-xt,Math.abs(e)<=wt?(n=Ht(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=n,t.y=r,t):(n=Ht(this.long0+Math.atan2(t.x*a,s*this.cos_p14*h-t.y*this.sin_p14*a)),t.x=n,t.y=r,t))},names:["ortho"]},wi={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ni={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},Ai={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=xt-Et/2?this.face=wi.TOP:this.lat0<=-(xt-Et/2)?this.face=wi.BOTTOM:Math.abs(this.long0)<=Et?this.face=wi.FRONT:Math.abs(this.long0)<=xt+Et?this.face=this.long0>0?wi.RIGHT:wi.LEFT:this.face=wi.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var s,i,a,h,e,n,r={x:0,y:0},o={value:0};if(t.x-=this.long0,s=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,this.face===wi.TOP)h=xt-s,i>=Et&&i<=xt+Et?(o.value=Ni.AREA_0,a=i-xt):i>xt+Et||i<=-(xt+Et)?(o.value=Ni.AREA_1,a=i>0?i-Pt:i+Pt):i>-(xt+Et)&&i<=-Et?(o.value=Ni.AREA_2,a=i+xt):(o.value=Ni.AREA_3,a=i);else if(this.face===wi.BOTTOM)h=xt+s,i>=Et&&i<=xt+Et?(o.value=Ni.AREA_0,a=-i+xt):i<Et&&i>=-Et?(o.value=Ni.AREA_1,a=-i):i<-Et&&i>=-(xt+Et)?(o.value=Ni.AREA_2,a=-i-xt):(o.value=Ni.AREA_3,a=i>0?-i+Pt:-i-Pt);else{var l,u,c,M,f,d;this.face===wi.RIGHT?i=ct(i,+xt):this.face===wi.BACK?i=ct(i,+Pt):this.face===wi.LEFT&&(i=ct(i,-xt)),M=Math.sin(s),f=Math.cos(s),d=Math.sin(i),l=f*Math.cos(i),u=f*d,c=M,this.face===wi.FRONT?a=ut(h=Math.acos(l),c,u,o):this.face===wi.RIGHT?a=ut(h=Math.acos(u),c,-l,o):this.face===wi.BACK?a=ut(h=Math.acos(-l),c,-u,o):this.face===wi.LEFT?a=ut(h=Math.acos(-u),c,l,o):(h=a=0,o.value=Ni.AREA_0)}return n=Math.atan(12/Pt*(a+Math.acos(Math.sin(a)*Math.cos(Et))-xt)),e=Math.sqrt((1-Math.cos(h))/(Math.cos(n)*Math.cos(n))/(1-Math.cos(Math.atan(1/Math.cos(a))))),o.value===Ni.AREA_1?n+=xt:o.value===Ni.AREA_2?n+=Pt:o.value===Ni.AREA_3&&(n+=1.5*Pt),r.x=e*Math.cos(n),r.y=e*Math.sin(n),r.x=r.x*this.a+this.x0,r.y=r.y*this.a+this.y0,t.x=r.x,t.y=r.y,t},inverse:function(t){var s,i,a,h,e,n,r,o,l,p,m,_,u={lam:0,phi:0},c={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),s=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?c.value=Ni.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(c.value=Ni.AREA_1,s-=xt):t.x<0&&-t.x>=Math.abs(t.y)?(c.value=Ni.AREA_2,s=s<0?s+Pt:s-Pt):(c.value=Ni.AREA_3,s+=xt),l=Pt/12*Math.tan(s),e=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),n=Math.atan(e),(r=1-(a=Math.cos(s))*a*(h=Math.tan(i))*h*(1-Math.cos(Math.atan(1/Math.cos(n)))))<-1?r=-1:r>1&&(r=1),this.face===wi.TOP)o=Math.acos(r),u.phi=xt-o,c.value===Ni.AREA_0?u.lam=n+xt:c.value===Ni.AREA_1?u.lam=n<0?n+Pt:n-Pt:c.value===Ni.AREA_2?u.lam=n-xt:u.lam=n;else if(this.face===wi.BOTTOM)o=Math.acos(r),u.phi=o-xt,c.value===Ni.AREA_0?u.lam=-n+xt:c.value===Ni.AREA_1?u.lam=-n:c.value===Ni.AREA_2?u.lam=-n-xt:u.lam=n<0?-n-Pt:-n+Pt;else{var M,f,d;l=(M=r)*M,f=(l+=(d=l>=1?0:Math.sqrt(1-l)*Math.sin(n))*d)>=1?0:Math.sqrt(1-l),c.value===Ni.AREA_1?(l=f,f=-d,d=l):c.value===Ni.AREA_2?(f=-f,d=-d):c.value===Ni.AREA_3&&(l=f,f=d,d=-l),this.face===wi.RIGHT?(l=M,M=-f,f=l):this.face===wi.BACK?(M=-M,f=-f):this.face===wi.LEFT&&(l=M,M=f,f=-l),u.phi=Math.acos(-d)-xt,u.lam=Math.atan2(f,M),this.face===wi.RIGHT?u.lam=ct(u.lam,-xt):this.face===wi.BACK?u.lam=ct(u.lam,-Pt):this.face===wi.LEFT&&(u.lam=ct(u.lam,+xt))}return 0!==this.es&&(p=u.phi<0?1:0,m=Math.tan(u.phi),_=this.b/Math.sqrt(m*m+this.one_minus_f_squared),u.phi=Math.atan(Math.sqrt(this.a*this.a-_*_)/(this.one_minus_f*_)),p&&(u.phi=-u.phi)),u.lam+=this.long0,t.x=u.lam,t.y=u.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Ei=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Ci=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Pi=.8487,Si=1.3523,Ii=At/5,Oi=1/Ii,ki=18,qi=function(t,s){return t[0]+s*(t[1]+s*(t[2]+s*t[3]))},Ri=function(t,s){return t[1]+s*(2*t[2]+3*s*t[3])},Li={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var s=Ht(t.x-this.long0),i=Math.abs(t.y),a=Math.floor(i*Ii);a<0?a=0:a>=ki&&(a=ki-1),i=At*(i-Oi*a);var h={x:qi(Ei[a],i)*s,y:qi(Ci[a],i)};return t.y<0&&(h.y=-h.y),h.x=h.x*this.a*Pi+this.x0,h.y=h.y*this.a*Si+this.y0,h},inverse:function(t){var s={x:(t.x-this.x0)/(this.a*Pi),y:Math.abs(t.y-this.y0)/(this.a*Si)};if(s.y>=1)s.x/=Ei[ki][0],s.y=t.y<0?-xt:xt;else{var i=Math.floor(s.y*ki);for(i<0?i=0:i>=ki&&(i=ki-1);;)if(Ci[i][0]>s.y)--i;else{if(!(Ci[i+1][0]<=s.y))break;++i}var a=Ci[i],h=5*(s.y-a[0])/(Ci[i+1][0]-a[0]);h=Mt((function(t){return(qi(a,t)-s.y)/Ri(a,t)}),h,wt,100),s.x/=qi(Ei[i],h),s.y=(5*i+h)*Nt,t.y<0&&(s.y=-s.y)}return s.x=Ht(s.x+this.long0),s},names:["Robinson","robin"]},Ti={init:function(){this.name="geocent"},forward:function(t){return k(t,this.es,this.a)},inverse:function(t){return q(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},Gi={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},ji={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},Bi={init:function(){if(Object.keys(ji).forEach(function(t){if(void 0===this[t])this[t]=ji[t].def;else{if(ji[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);ji[t].num&&(this[t]=parseFloat(this[t]))}ji[t].degrees&&(this[t]=this[t]*Nt)}.bind(this)),Math.abs(Math.abs(this.lat0)-xt)<wt?this.mode=this.lat0<0?Gi.S_POLE:Gi.N_POLE:Math.abs(this.lat0)<wt?this.mode=Gi.EQUIT:(this.mode=Gi.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,s=this.azi;this.cg=Math.cos(s),this.sg=Math.sin(s),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var s,i,n,r,a=Math.sin(t.y),h=Math.cos(t.y),e=Math.cos(t.x);switch(this.mode){case Gi.OBLIQ:i=this.sinph0*a+this.cosph0*h*e;break;case Gi.EQUIT:i=h*e;break;case Gi.S_POLE:i=-a;break;case Gi.N_POLE:i=a}switch(s=(i=this.pn1/(this.p-i))*h*Math.sin(t.x),this.mode){case Gi.OBLIQ:i*=this.cosph0*a-this.sinph0*h*e;break;case Gi.EQUIT:i*=a;break;case Gi.N_POLE:i*=-h*e;break;case Gi.S_POLE:i*=h*e}return r=1/((n=i*this.cg+s*this.sg)*this.sw*this.h1+this.cw),s=(s*this.cg-i*this.sg)*this.cw*r,i=n*r,t.x=s*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var s,i,a,h={x:t.x,y:t.y};a=1/(this.pn1-t.y*this.sw),s=this.pn1*t.x*a,i=this.pn1*t.y*this.cw*a,t.x=s*this.cg+i*this.sg,t.y=i*this.cg-s*this.sg;var e=ws(t.x,t.y);if(Math.abs(e)<wt)h.x=0,h.y=t.y;else{var n,r;switch(r=1-e*e*this.pfact,r=(this.p-Math.sqrt(r))/(this.pn1/e+e/this.pn1),n=Math.sqrt(1-r*r),this.mode){case Gi.OBLIQ:h.y=Math.asin(n*this.sinph0+t.y*r*this.cosph0/e),t.y=(n-this.sinph0*Math.sin(h.y))*e,t.x*=r*this.cosph0;break;case Gi.EQUIT:h.y=Math.asin(t.y*r/e),t.y=n*e,t.x*=r;break;case Gi.N_POLE:h.y=Math.asin(n),t.y=-t.y;break;case Gi.S_POLE:h.y=-Math.asin(n)}h.x=Math.atan2(t.x,t.y)}return t.x=h.x+this.long0,t.y=h.y,t},names:["Tilted_Perspective","tpers"]},zi={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,s=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=s,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var s,i,a,h,e=t.x,n=t.y;if(e-=this.long0,"ellipse"===this.shape){n=Math.atan(this.radius_p2*Math.tan(n));var r=this.radius_p/ws(this.radius_p*Math.cos(n),Math.sin(n));if(i=r*Math.cos(e)*Math.cos(n),a=r*Math.sin(e)*Math.cos(n),h=r*Math.sin(n),(this.radius_g-i)*i-a*a-h*h*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;s=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(a/ws(h,s)),t.y=this.radius_g_1*Math.atan(h/s)):(t.x=this.radius_g_1*Math.atan(a/s),t.y=this.radius_g_1*Math.atan(h/ws(a,s)))}else"sphere"===this.shape&&(s=Math.cos(n),i=Math.cos(e)*s,a=Math.sin(e)*s,h=Math.sin(n),s=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(a/ws(h,s)),t.y=this.radius_g_1*Math.atan(h/s)):(t.x=this.radius_g_1*Math.atan(a/s),t.y=this.radius_g_1*Math.atan(h/ws(a,s))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var s,i,a,h,e=-1,n=0,r=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*ws(1,r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*ws(1,n));var o=r/this.radius_p;if(s=n*n+o*o+e*e,(a=(i=2*this.radius_g*e)*i-4*s*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;h=(-i-Math.sqrt(a))/(2*s),e=this.radius_g+h*e,n*=h,r*=h,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+r*r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),s=n*n+r*r+e*e,(a=(i=2*this.radius_g*e)*i-4*s*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;h=(-i-Math.sqrt(a))/(2*s),e=this.radius_g+h*e,n*=h,r*=h,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};return W.defaultDatum="WGS84",W.Proj=Projection,W.WGS84=new W.Proj("WGS84"),W.Point=Point,W.toPoint=es,W.defs=o,W.nadgrid=function(t,s){var i=new DataView(s),a=N(i),h=A(i,a),e={header:h,subgrids:C(i,h,a)};return is[t]=e,e},W.transform=D,W.mgrs=ms,W.version="2.9.2",(proj4=W).Proj.projections.add(vs),proj4.Proj.projections.add(Is),proj4.Proj.projections.add(ks),proj4.Proj.projections.add(Ts),proj4.Proj.projections.add(Gs),proj4.Proj.projections.add(js),proj4.Proj.projections.add(zs),proj4.Proj.projections.add(Fs),proj4.Proj.projections.add(Ds),proj4.Proj.projections.add(Zs),proj4.Proj.projections.add(ei),proj4.Proj.projections.add(ri),proj4.Proj.projections.add(oi),proj4.Proj.projections.add(ui),proj4.Proj.projections.add(ci),proj4.Proj.projections.add(fi),proj4.Proj.projections.add(di),proj4.Proj.projections.add(pi),proj4.Proj.projections.add(_i),proj4.Proj.projections.add(yi),proj4.Proj.projections.add(xi),proj4.Proj.projections.add(gi),proj4.Proj.projections.add(vi),proj4.Proj.projections.add(bi),proj4.Proj.projections.add(Ai),proj4.Proj.projections.add(Li),proj4.Proj.projections.add(Ti),proj4.Proj.projections.add(Bi),proj4.Proj.projections.add(zi),W}()},"./node_modules/rbush/rbush.min.js":function(module){module.exports=function(){"use strict";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1);t(n,r,Math.max(e,Math.floor(r-s*f/o+u)),Math.min(a,Math.floor(r+(o-s)*f/o+u)),h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=void 0,s=void 0,l=void 0,u=void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r}()}}]);
//# sourceMappingURL=2156.a410b25b.iframe.bundle.js.map