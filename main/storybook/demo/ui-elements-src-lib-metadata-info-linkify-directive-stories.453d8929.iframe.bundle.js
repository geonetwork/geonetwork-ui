"use strict";(self.webpackChunkgeonetwork_ui=self.webpackChunkgeonetwork_ui||[]).push([[7060],{"./libs/ui/elements/src/lib/metadata-info/linkify.directive.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),_linkify_directive__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./libs/ui/elements/src/lib/metadata-info/linkify.directive.ts");const __WEBPACK_DEFAULT_EXPORT__={title:"Elements/GnUiLinkifyDirective",decorators:[(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.Iz)({imports:[_linkify_directive__WEBPACK_IMPORTED_MODULE_1__.T]})]},Primary={args:{htmlContent:"<p class='my-2'>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin purus elit, tincidunt et gravida sit amet, mattis eget orci. Suspendisse dignissim magna sed neque rutrum lobortis. Aenean vitae quam sapien. Phasellus eleifend tortor ac imperdiet tristique. Curabitur aliquet mauris tristique, iaculis est sit amet, pulvinar ipsum. Maecenas lacinia varius felis sit amet tempor. Curabitur pulvinar ipsum eros, quis accumsan odio hendrerit sit amet.</p>\nThis is a link without markup: http://cnig.gouv.fr/wp-content/uploads/2019/04/190315_Standard_CNIG_SCOT.pdf<br>\nAnother link without markup:<br>\nhttp://cnig.gouv.fr/IMG/pdf/210615_standard_cnig_nouveauscot.pdf<br>\n<p class='my-2'>This is a link with markup: <a href=\"http://foo.com/(something)?after=before\">This is the display text</a></p>\nThis is a list containing links:\n<ul class='list-disc my-2 ml-3'>\n  <li>http://cnig.gouv.fr/IMG/pdf/210615_standard_cnig_nouveauscot.pdf</li>\n  <li><a href=\"http://foo.com/(something)?after=before\">This is the display text</a></li>\n  <li><a href=\"http://foo.com/(something)?after=before\" style='font-weight: bolder;'>\n    <span>Same link with style and <code>span</code> element inside</span>\n  </a></li>\n</ul>"},argTypes:{htmlContent:{control:"text"}},render:args=>({props:args,template:`\n    <div gnUiLinkify>\n      ${args.htmlContent}\n    </div>`})},__namedExportsOrder=["Primary"]},"./libs/ui/elements/src/lib/metadata-info/linkify.directive.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>GnUiLinkifyDirective});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs");let GnUiLinkifyDirective=class GnUiLinkifyDirective{constructor(){this.el=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.WQX)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.aKT),this.renderer=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.WQX)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.sFG)}ngOnInit(){setTimeout(()=>{this.processLinks(this.el.nativeElement)},0)}processLinks(container){Array.from(container.childNodes).forEach(node=>{if(node instanceof Text){const textNode=node,linkified=this.linkifyNode(textNode.nodeValue);linkified&&this.createLinkElements(container,linkified,node)}else if(node instanceof HTMLAnchorElement){const url=node.href,displayValue=node.innerHTML,linkified=this.linkifyNode(displayValue,url);linkified&&this.createLinkElements(container,linkified,node)}else this.processLinks(node)})}linkifyNode(displayValue,url){if(url)displayValue=this.createLink(displayValue,url);else{const urlRegex=/\bhttps?:\/\/(?:\([^\s()]+\)|[^\s()]+)+/g,matches=displayValue.match(urlRegex);matches&&matches.length>0&&matches.forEach(match=>{url=match,displayValue=displayValue.replace(match,match=>this.createLink(match,url))})}return displayValue}createLinkElements(container,htmlContent,node){const div=this.renderer.createElement("div");div.innerHTML=htmlContent;const fragment=document.createDocumentFragment();Array.from(div.childNodes).forEach(childNode=>{fragment.appendChild(childNode)}),container.insertBefore(fragment,node),container.removeChild(node)}createLink(displayValue,url){return`<a href="${url}" target="_blank" class="text-primary cursor-pointer hover:underline">${displayValue} <ng-icon class="!w-[12px] !h-[14px] !text-[14px] opacity-75" name="matOpenInNew"></ng-icon></a>`}};GnUiLinkifyDirective=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.WLR)({selector:"[gnUiLinkify]",standalone:!0})],GnUiLinkifyDirective)},"./node_modules/@storybook/angular/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L4:()=>applicationConfig,Ap:()=>componentWrapperDecorator,Iz:()=>moduleMetadata});var chunk_LXSTVAFF=__webpack_require__("./node_modules/@storybook/angular/dist/chunk-LXSTVAFF.mjs");__webpack_require__("storybook/preview-api");var moduleMetadata=metadata=>storyFn=>{let story=storyFn(),storyMetadata=story.moduleMetadata||{};return metadata=metadata||{},{...story,moduleMetadata:{declarations:[...metadata.declarations||[],...storyMetadata.declarations||[]],entryComponents:[...metadata.entryComponents||[],...storyMetadata.entryComponents||[]],imports:[...metadata.imports||[],...storyMetadata.imports||[]],schemas:[...metadata.schemas||[],...storyMetadata.schemas||[]],providers:[...metadata.providers||[],...storyMetadata.providers||[]]}}};function applicationConfig(config){return storyFn=>{let story=storyFn(),storyConfig=story.applicationConfig;return{...story,applicationConfig:storyConfig||config?{...config,...storyConfig,providers:[...config?.providers||[],...storyConfig?.providers||[]]}:void 0}}}var componentWrapperDecorator=(element,props)=>(storyFn,storyContext)=>{let story=storyFn(),currentProps="function"==typeof props?props(storyContext):props,template=(0,chunk_LXSTVAFF.Wy)(element)?(0,chunk_LXSTVAFF.UP)(element,currentProps??{},story.template):element(story.template);return{...story,template,...currentProps||story.props?{props:{...currentProps,...story.props}}:{}}};__webpack_require__("./node_modules/@storybook/angular/dist/chunk-CUDJAP6K.mjs")}}]);