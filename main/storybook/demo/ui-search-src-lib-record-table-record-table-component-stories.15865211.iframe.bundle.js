(self.webpackChunkgeonetwork_ui=self.webpackChunkgeonetwork_ui||[]).push([[3e3],{"./libs/ui/search/src/lib/record-table/record-table.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M:()=>RecordTableComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var _class,record_table_componentngResource=__webpack_require__("./libs/ui/search/src/lib/record-table/record-table.component.css?ngResource"),record_table_componentngResource_default=__webpack_require__.n(record_table_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),src=__webpack_require__("./libs/util/shared/src/index.ts");let RecordTableComponent=((_class=class RecordTableComponent{constructor(){this.records=[],this.recordSelect=new core.EventEmitter,this.sortByChange=new core.EventEmitter}dateToString(date){return date?.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}getStatus(isPublishedToAll){return isPublishedToAll?"published":"not published"}formatUserInfo(userInfo){const infos=("string"==typeof userInfo?userInfo:"").split("|");if(infos&&4===infos.length)return`${infos[2]} ${infos[1]}`}getRecordFormats(record){if("service"===record.kind||!("distributions"in record))return[];const formats=Array.from(new Set(record.distributions.map((distribution=>(0,src.TG)(distribution))))).filter((format=>!!format));return formats.sort(((a,b)=>(0,src.VY)(b)-(0,src.VY)(a))),formats}getBadgeColor(format){return(0,src.SX)(format)}getOrderForColumn(col){if(!this.sortBy)return null;let order=null;return(Array.isArray(this.sortBy[0])?this.sortBy:[this.sortBy]).forEach((sortedCol=>{sortedCol[1]===col&&(order=sortedCol[0])})),order}setSortBy(col){const sortOrder=this.getOrderForColumn(col);let newOrder;newOrder=sortOrder&&"asc"===sortOrder?"desc":"asc",this.sortByChange.emit([newOrder,col]),this.sortBy=[newOrder,col]}isSortedBy(col,order){return this.getOrderForColumn(col)===order}}).propDecorators={records:[{type:core.Input}],totalHits:[{type:core.Input}],sortBy:[{type:core.Input}],recordSelect:[{type:core.Output}],sortByChange:[{type:core.Output}]},_class);RecordTableComponent=(0,tslib_es6.gn)([(0,core.Component)({selector:"gn-ui-record-table",template:'<div>\n  <div *ngIf="totalHits" class="">\n    <div\n      translate\n      class="my-8 ml-4 block text-gray-500"\n      [translateParams]="{\n        displayed: records.length,\n        hits: totalHits\n      }"\n    >\n      results.records.hits.displayedOn\n    </div>\n\n    <div\n      class="grid grid-cols-[repeat(5,minmax(0,max-content))] gap-x-4 gap-y-1"\n    >\n      <div class="contents text-sm">\n        <div class="record-table-header text-gray-400 flex gap-1">\n          <gn-ui-button\n            type="light"\n            extraClass="px-3 py-2 space-x-1"\n            (buttonClick)="setSortBy(\'resourceTitleObject.default.keyword\')"\n          >\n            <span translate>record.metadata.title</span>\n            <mat-icon\n              class="material-symbols-outlined"\n              *ngIf="isSortedBy(\'resourceTitleObject.default.keyword\', \'desc\')"\n            >\n              expand_more</mat-icon\n            >\n            <mat-icon\n              class="material-symbols-outlined"\n              *ngIf="isSortedBy(\'resourceTitleObject.default.keyword\', \'asc\')"\n            >\n              expand_less</mat-icon\n            >\n          </gn-ui-button>\n        </div>\n        <div translate="" class="record-table-header text-gray-400 flex gap-1">\n          record.metadata.formats\n        </div>\n        <div class="record-table-header text-gray-400 flex gap-1">\n          <gn-ui-button\n            type="light"\n            extraClass="px-3 py-2 space-x-1"\n            (buttonClick)="setSortBy(\'recordOwner\')"\n          >\n            <span translate>record.metadata.author</span>\n            <mat-icon\n              class="material-symbols-outlined"\n              *ngIf="isSortedBy(\'recordOwner\', \'desc\')"\n            >\n              expand_more</mat-icon\n            >\n            <mat-icon\n              class="material-symbols-outlined"\n              *ngIf="isSortedBy(\'recordOwner\', \'asc\')"\n            >\n              expand_less</mat-icon\n            >\n          </gn-ui-button>\n        </div>\n        <div class="record-table-header text-gray-400 flex gap-1">\n          <gn-ui-button\n            type="light"\n            extraClass="px-3 py-2 space-x-1"\n            (buttonClick)="setSortBy(\'changeDate\')"\n          >\n            <span translate>record.metadata.updatedOn</span>\n            <mat-icon\n              class="material-symbols-outlined"\n              *ngIf="isSortedBy(\'changeDate\', \'desc\')"\n            >\n              expand_more</mat-icon\n            >\n            <mat-icon\n              class="material-symbols-outlined"\n              *ngIf="isSortedBy(\'changeDate\', \'asc\')"\n            >\n              expand_less</mat-icon\n            >\n          </gn-ui-button>\n        </div>\n        <div class="record-table-header text-gray-400 flex gap-1">\n          <gn-ui-button\n            type="light"\n            extraClass="px-3 py-2 space-x-1"\n            (buttonClick)="setSortBy(\'createDate\')"\n          >\n            <span translate>record.metadata.createdOn</span>\n            <mat-icon\n              class="material-symbols-outlined"\n              *ngIf="isSortedBy(\'createDate\', \'desc\')"\n            >\n              expand_more</mat-icon\n            >\n            <mat-icon\n              class="material-symbols-outlined"\n              *ngIf="isSortedBy(\'createDate\', \'asc\')"\n            >\n              expand_less</mat-icon\n            >\n          </gn-ui-button>\n        </div>\n      </div>\n      <div\n        class="contents hover:text-gray-900 text-gray-800 cursor-pointer"\n        (click)="recordSelect.emit(record)"\n        *ngFor="let record of records"\n      >\n        <div [title]="record.title" class="record-table-col text-16">\n          {{ record.title }}\n        </div>\n        <div\n          class="record-table-col flex justify-start items-center gap-2 text-16"\n          [title]="formats.join(\', \')"\n          *ngIf="getRecordFormats(record) as formats"\n        >\n          <span\n            class="badge-btn min-w-[45px] text-sm text-white px-2 flex-shrink-0"\n            [style.background-color]="getBadgeColor(formats[0])"\n            *ngIf="formats[0]"\n          >\n            {{ formats[0] }}\n          </span>\n          <span\n            class="badge-btn min-w-[45px] text-sm text-white px-2 flex-shrink-0"\n            [style.background-color]="getBadgeColor(formats[1])"\n            *ngIf="formats[1]"\n          >\n            {{ formats[1] }}\n          </span>\n          <div class="flex-shrink-0" *ngIf="formats.slice(2).length > 0">\n            <span>+{{ formats.slice(2).length }}</span>\n          </div>\n        </div>\n        <div class="record-table-col flex items-center gap-2 text-16">\n          <mat-icon class="material-symbols-outlined"> person </mat-icon>\n          <span class="">{{ formatUserInfo(record.extras?.ownerInfo) }}</span>\n        </div>\n        <div class="record-table-col text-16">\n          {{ dateToString(record.recordUpdated) }}\n        </div>\n        <div class="record-table-col text-16">\n          {{ dateToString(record.recordCreated) }}\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',styles:[record_table_componentngResource_default()]})],RecordTableComponent)},"./node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{aD:()=>chunk_AY7I2SME.aD});var chunk_AY7I2SME=__webpack_require__("./node_modules/@storybook/addon-actions/dist/chunk-AY7I2SME.mjs")},"./libs/ui/search/src/lib/record-table/record-table.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Primary:()=>Primary,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),_record_table_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./libs/ui/search/src/lib/record-table/record-table.component.ts"),_geonetwork_ui_common_fixtures__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./libs/common/fixtures/src/index.ts"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),_angular_material_icon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@angular/material/fesm2022/icon.mjs"),_geonetwork_ui_ui_inputs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./libs/ui/inputs/src/index.ts");const __WEBPACK_DEFAULT_EXPORT__={component:_record_table_component__WEBPACK_IMPORTED_MODULE_1__.M,title:"Search/RecordTableComponent",decorators:[(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.moduleMetadata)({declarations:[_record_table_component__WEBPACK_IMPORTED_MODULE_1__.M],imports:[_geonetwork_ui_ui_inputs__WEBPACK_IMPORTED_MODULE_4__.uU,_angular_material_icon__WEBPACK_IMPORTED_MODULE_5__.Ps]})],render:args=>({props:{...args,recordSelect:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_3__.aD)("recordSelect"),sortByChange:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_3__.aD)("sortByChange")}})},Primary={args:{records:_geonetwork_ui_common_fixtures__WEBPACK_IMPORTED_MODULE_2__.XQ.concat(_geonetwork_ui_common_fixtures__WEBPACK_IMPORTED_MODULE_2__.XQ,_geonetwork_ui_common_fixtures__WEBPACK_IMPORTED_MODULE_2__.XQ),totalHits:1234}}},"./libs/ui/search/src/lib/record-table/record-table.component.css?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".record-table-col {\n\n    align-items: center;\n\n    overflow: hidden;\n\n    text-overflow: ellipsis;\n\n    white-space: nowrap;\n\n    padding-left: 1.25rem;\n\n    padding-right: 1.25rem;\n\n    padding-top: 0.75rem;\n\n    padding-bottom: 0.75rem\n}\n\n.record-table-header {\n\n    text-transform: capitalize;\n\n    align-items: center;\n\n    overflow: hidden;\n\n    text-overflow: ellipsis;\n\n    white-space: nowrap;\n\n    padding-left: 1.25rem;\n\n    padding-right: 1.25rem;\n\n    padding-top: 0.75rem;\n\n    padding-bottom: 0.75rem\n}\n",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);