"use strict";(self.webpackChunkgeonetwork_ui=self.webpackChunkgeonetwork_ui||[]).push([[6075],{"./libs/ui/layout/src/lib/cell-popin/cell-popin.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>CellPopinComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),ng_icons_core=__webpack_require__("./node_modules/@ng-icons/core/fesm2022/ng-icons-core.mjs"),ng_icons_iconoir=__webpack_require__("./node_modules/@ng-icons/iconoir/fesm2022/ng-icons-iconoir.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),scrolling=__webpack_require__("./node_modules/@angular/cdk/fesm2022/scrolling.mjs"),overlay=__webpack_require__("./node_modules/@angular/cdk/fesm2022/overlay.mjs"),src=__webpack_require__("./libs/ui/inputs/src/index.ts");let CellPopinComponent=class CellPopinComponent{set activePopin(active){this._activePopin=!!active,this.updateIntersectionObserver()}get activePopin(){return this._activePopin}constructor(scrollDispatcher,cdr){this.scrollDispatcher=scrollDispatcher,this.cdr=cdr,this.extraClass="",this.isOpen=!1,this.isVisible=!0,this.overlayPositions=[{originX:"end",originY:"top",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}],this.firstCheck=!0,this._activePopin=!0}ngAfterViewInit(){this.activePopin&&(this.cdkScrollContainer&&this.scrollDispatcher.register(this.cdkScrollContainer),this.updateIntersectionObserver())}ngOnDestroy(){this.intersectionObserver?.disconnect(),this.scrollDispatcher.deregister(this.cdkScrollContainer)}updateIntersectionObserver(){this.scrollContainer&&this.anchorRef&&(this.intersectionObserver&&this.intersectionObserver?.disconnect(),this.intersectionObserver=new IntersectionObserver((([entry])=>{const visible=entry.intersectionRatio>=1;!this.firstCheck||visible?(this.firstCheck=!1,this.isVisible!==visible&&(this.isVisible=visible,this.cdr.detectChanges())):this.firstCheck=!1}),{root:this.scrollContainer.nativeElement,threshold:1}),this.intersectionObserver.observe(this.anchorRef.nativeElement))}openOverlay(){this.isOpen=!0}closeOverlay(){this.isOpen=!1}static{this.ctorParameters=()=>[{type:scrolling.R},{type:core.ChangeDetectorRef}]}static{this.propDecorators={extraClass:[{type:core.Input}],cdkScrollContainer:[{type:core.Input}],scrollContainer:[{type:core.Input}],anchorRef:[{type:core.ViewChild,args:["anchorRef"]}],activePopin:[{type:core.Input}]}}};CellPopinComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"gn-ui-cell-popin",standalone:!0,imports:[common.CommonModule,fesm2022_button.Hl,overlay.z_,src.Qp,ng_icons_core.Uq],providers:[(0,ng_icons_core.EB)({iconoirReduce:ng_icons_iconoir.WaV})],template:'<div\n  class="h-full flex items-center justify-center"\n  cdkOverlayOrigin\n  #anchorRef\n  #trigger="cdkOverlayOrigin"\n  [class]="extraClass"\n  data-cy="cell-popin"\n>\n  <ng-content select="[cellContent]"></ng-content>\n  <ng-template\n    *ngIf="activePopin"\n    cdkConnectedOverlay\n    [cdkConnectedOverlayPush]="false"\n    [cdkConnectedOverlayOrigin]="trigger"\n    [cdkConnectedOverlayOpen]="isOpen"\n    [cdkConnectedOverlayPositions]="overlayPositions"\n    [cdkConnectedOverlayWidth]="\'auto\'"\n    [cdkConnectedOverlayFlexibleDimensions]="true"\n    [cdkConnectedOverlayGrowAfterOpen]="true"\n    (detach)="closeOverlay()"\n  >\n    <div\n      *ngIf="activePopin && isVisible"\n      class="bg-white shadow-lg border border-gray-300 relative"\n      data-cy="cell-popin-content"\n    >\n      <ng-content select="[popinContent]"></ng-content>\n      <gn-ui-button\n        data-cy="cell-popin-close"\n        [style.--gn-ui-button-background]="\'bg-transparent\'"\n        class="absolute top-2 right-2"\n        type="light"\n        (buttonClick)="closeOverlay()"\n        extraClass="w-10 h-8 px-1"\n      >\n        <ng-icon name="iconoirReduce" size="24"></ng-icon>\n      </gn-ui-button>\n    </div>\n  </ng-template>\n</div>\n'}),(0,tslib_es6.Sn)("design:paramtypes",[scrolling.R,core.ChangeDetectorRef])],CellPopinComponent)},"./libs/ui/layout/src/lib/truncated-text/truncated-text.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>TruncatedTextComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),ng_icons_core=__webpack_require__("./node_modules/@ng-icons/core/fesm2022/ng-icons-core.mjs"),ng_icons_iconoir=__webpack_require__("./node_modules/@ng-icons/iconoir/fesm2022/ng-icons-iconoir.mjs"),fesm2022_button=__webpack_require__("./node_modules/@angular/material/fesm2022/button.mjs"),overlay=__webpack_require__("./node_modules/@angular/cdk/fesm2022/overlay.mjs"),src=__webpack_require__("./libs/ui/inputs/src/index.ts"),cell_popin_component=__webpack_require__("./libs/ui/layout/src/lib/cell-popin/cell-popin.component.ts");let TruncatedTextComponent=class TruncatedTextComponent{constructor(cd,ngZone){this.cd=cd,this.ngZone=ngZone,this.text="",this.extraClass="",this.isTextTruncated=!1,this.resizeObserver=new ResizeObserver((()=>{this.ngZone.run((()=>this.checkTextTruncation()))})),this.mutationObserver=new MutationObserver((()=>{this.ngZone.run((()=>{this.checkTextTruncation()}))}))}ngAfterViewInit(){const element=this.textElement.nativeElement;this.resizeObserver?.observe(element),this.mutationObserver?.observe(element.parentElement,{attributes:!0,childList:!0,subtree:!0}),this.checkTextTruncation()}ngOnDestroy(){this.resizeObserver?.disconnect(),this.mutationObserver?.disconnect()}checkTextTruncation(){const element=this.textElement.nativeElement;this.isTextTruncated=element.scrollWidth>element.clientWidth,this.cd.detectChanges()}static{this.ctorParameters=()=>[{type:core.ChangeDetectorRef},{type:core.NgZone}]}static{this.propDecorators={text:[{type:core.Input}],extraClass:[{type:core.Input}],scrollContainer:[{type:core.Input}],cdkScrollContainer:[{type:core.Input}],textElement:[{type:core.ViewChild,args:["textElement"]}]}}};TruncatedTextComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"gn-ui-truncated-text",standalone:!0,imports:[common.CommonModule,fesm2022_button.Hl,overlay.z_,src.Qp,cell_popin_component.e,ng_icons_core.Uq],providers:[(0,ng_icons_core.EB)({iconoirExpand:ng_icons_iconoir.sC3})],template:'<gn-ui-cell-popin\n  #popinRef\n  [activePopin]="isTextTruncated"\n  [scrollContainer]="scrollContainer"\n  [cdkScrollContainer]="cdkScrollContainer"\n>\n  <div\n    cellContent\n    class="flex items-center justify-between w-full gap-2"\n    [class]="extraClass"\n  >\n    <span #textElement class="truncate py-3 px-2">\n      {{ text }}\n    </span>\n    <gn-ui-button\n      *ngIf="isTextTruncated"\n      type="outline"\n      extraClass="w-10 h-8 border rounded-lg mr-2"\n      (buttonClick)="popinRef.openOverlay()"\n    >\n      <ng-icon name="iconoirExpand" size="24"> </ng-icon>\n    </gn-ui-button>\n  </div>\n  <div popinContent class="sm:w-64 xs:w-32 py-4 pl-6 pr-9">\n    <p>{{ text }}</p>\n  </div>\n</gn-ui-cell-popin>\n'}),(0,tslib_es6.Sn)("design:paramtypes",[core.ChangeDetectorRef,core.NgZone])],TruncatedTextComponent)},"./node_modules/rxjs/dist/esm5/internal/firstValueFrom.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>firstValueFrom});var _util_EmptyError__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/EmptyError.js"),_Subscriber__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subscriber.js");function firstValueFrom(source,config){var hasConfig="object"==typeof config;return new Promise((function(resolve,reject){var subscriber=new _Subscriber__WEBPACK_IMPORTED_MODULE_0__.Ms({next:function(value){resolve(value),subscriber.unsubscribe()},error:reject,complete:function(){hasConfig?resolve(config.defaultValue):reject(new _util_EmptyError__WEBPACK_IMPORTED_MODULE_1__.G)}});source.subscribe(subscriber)}))}},"./libs/ui/layout/src/lib/truncated-text/truncated-text.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LongText:()=>LongText,ShortText:()=>ShortText,TextFitPerfectly:()=>TextFitPerfectly,URL:()=>URL,VeryNarrow:()=>VeryNarrow,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/angular/dist/index.mjs"),_truncated_text_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./libs/ui/layout/src/lib/truncated-text/truncated-text.component.ts"),_geonetwork_ui_util_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./libs/util/i18n/src/index.ts");const __WEBPACK_DEFAULT_EXPORT__={component:_truncated_text_component__WEBPACK_IMPORTED_MODULE_1__.x,title:"Layout/TruncatedText",decorators:[(0,_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.applicationConfig)({providers:[(0,_geonetwork_ui_util_i18n__WEBPACK_IMPORTED_MODULE_2__.GN)()]})],render:args=>({props:args,template:'\n      <div [style.width]="width" class="border border-gray-300">\n        <gn-ui-truncated-text [text]="text"></gn-ui-truncated-text>\n      </div>\n    '})},ShortText={args:{text:"This is a short text that will not be truncated",width:"500px"}},LongText={args:{text:"This is a very long text that will definitely be truncated because it contains too many characters to fit in the container width and thus will show an ellipsis and the open button",width:"300px"}},VeryNarrow={args:{text:"This text will be truncated",width:"120px"}},TextFitPerfectly={args:{text:"This text will not be truncated",width:"230px"}},URL={args:{text:"https://www.very-long-domain-name-example.com/with/very/long/path/that/should/be/truncated",width:"200px"}},__namedExportsOrder=["ShortText","LongText","VeryNarrow","TextFitPerfectly","URL"];ShortText.parameters={...ShortText.parameters,docs:{...ShortText.parameters?.docs,source:{originalSource:"{\n  args: {\n    text: 'This is a short text that will not be truncated',\n    width: '500px'\n  }\n}",...ShortText.parameters?.docs?.source}}},LongText.parameters={...LongText.parameters,docs:{...LongText.parameters?.docs,source:{originalSource:"{\n  args: {\n    text: 'This is a very long text that will definitely be truncated because it contains too many characters to fit in the container width and thus will show an ellipsis and the open button',\n    width: '300px'\n  }\n}",...LongText.parameters?.docs?.source}}},VeryNarrow.parameters={...VeryNarrow.parameters,docs:{...VeryNarrow.parameters?.docs,source:{originalSource:"{\n  args: {\n    text: 'This text will be truncated',\n    width: '120px'\n  }\n}",...VeryNarrow.parameters?.docs?.source}}},TextFitPerfectly.parameters={...TextFitPerfectly.parameters,docs:{...TextFitPerfectly.parameters?.docs,source:{originalSource:"{\n  args: {\n    text: 'This text will not be truncated',\n    width: '230px'\n  }\n}",...TextFitPerfectly.parameters?.docs?.source}}},URL.parameters={...URL.parameters,docs:{...URL.parameters?.docs,source:{originalSource:"{\n  args: {\n    text: 'https://www.very-long-domain-name-example.com/with/very/long/path/that/should/be/truncated',\n    width: '200px'\n  }\n}",...URL.parameters?.docs?.source}}}}}]);