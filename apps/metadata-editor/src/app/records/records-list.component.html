<main class="grow bg-gray-100 p-12 flex flex-col justify-between gap-12">
  <div class="flex gap-8 justify-between">
    <div class="flex content-start gap-5">
      <div
        *ngIf="logo"
        class="flex-shrink-0 bg-gray-100 rounded-lg overflow-hidden border border-gray-300 h-20 w-20"
      >
        <gn-ui-thumbnail
          class="relative"
          [thumbnailUrl]="logo"
          [fit]="'contain'"
        >
        </gn-ui-thumbnail>
      </div>
      <div class="flex flex-row gap-3 items-center">
        <h1 class="text-[56px] font-title grow">{{ title }}</h1>
        <h1 *ngIf="users" class="text-[56px] font-title grow" translate>
          dashboard.records.users
        </h1>
      </div>
    </div>
    <a
      class="text-[30px] hover:underline"
      *ngIf="linkToDatahub && !recordCount"
      [href]="linkToDatahub"
      target="_blank"
    >
      {{ searchFacade.resultsHits$ | async }}
      <span>{{ 'record.metadata.publications' | translate }}</span>
    </a>
    <div
      *ngIf="recordCount"
      class="flex flex-col justify-items-start gap-3 items-center"
    >
      <a
        *ngIf="linkToDatahub"
        [href]="linkToDatahub"
        target="_blank"
        class="flex justify-center gap-2 items-center hover:text-gray-900 text-gray-800 cursor-pointer"
        ><span>{{ recordCount }}</span>
        <span translate>dashboard.records.publishedRecords</span></a
      >
      <gn-ui-button
        (click)="showUsers(logo, title)"
        class="flex justify-center gap-2 items-center hover:text-gray-900 text-gray-800 cursor-pointer"
        ><span>{{ userCount }}</span>
        <span translate>dashboard.records.users</span></gn-ui-button
      >
    </div>
  </div>
  <div
    class="shadow rounded bg-white grow"
    *ngIf="users ? users : (searchFacade.results$ | async) as results"
  >
    <div
      class="px-5 py-5 flex justify-center gap-8 items-baseline"
      *ngIf="results.length === 0"
    >
      <span *ngIf="users" translate>dashboard.records.noUser</span>
      <span *ngIf="!users" translate> dashboard.records.noRecord</span>
    </div>
    <gn-ui-record-table
      [records]="results"
      [totalHits]="users ? users.length : (searchFacade.resultsHits$ | async)"
      (recordClick)="editRecord($event)"
      (recordsDeselect)="handleRecordsDeselection($event)"
      (recordsSelect)="handleRecordsSelection($event)"
      (sortByChange)="setSortBy($event)"
      [sortBy]="searchFacade.sortBy$ | async"
      [selectedRecords]="getSelectedRecords() | async"
    ></gn-ui-record-table>
    <div
      class="px-5 py-5 flex justify-center gap-8 items-baseline"
      *ngIf="searchFacade.resultsHits$ | async as hits"
    >
      <div class="grow">
        <gn-ui-pagination-buttons
          [currentPage]="searchFacade.currentPage$ | async"
          [totalPages]="searchFacade.totalPages$ | async"
          (newCurrentPageEvent)="paginate($event)"
        ></gn-ui-pagination-buttons>
      </div>
    </div>
  </div>
</main>
